const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/permission.service-9Ilapnf8.js","assets/vendor-BPkUhSj7.js","assets/ui-Zr1fOA1V.js"])))=>i.map(i=>d[i]);
import{a as aw,b as rw,R as _a,N as kr,r as _,L as Cs,u as sm,B as ow,c as lw,d as Er}from"./vendor-BPkUhSj7.js";import{M as fl,S as jh,A as Na,L as im,B as am,Z as cw,a as Or,U as Lt,C as Da,E as hl,b as Lr,c as yv,d as Th,K as uw,e as zt,f as Eh,g as il,h as Ii,P as Mh,X as It,T as dw,I as rm,i as bv,j as om,k as lm,l as fw,m as vv,n as iu,o as hw,p as hu,q as cm,R as _s,G as xv,r as mw,s as ol,t as pw,u as gw,v as yw,w as mu,x as bw,y as vw,z as xw,D as Sw,F as ww,H as g0,J as Xf,N as y0,O as b0,Q as _w,V as Cw,W as jw}from"./ui-Zr1fOA1V.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(l){if(l.ep)return;l.ep=!0;const d=i(l);fetch(l.href,d)}})();var Wf={exports:{}},Jo={};var v0;function Tw(){if(v0)return Jo;v0=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(r,l,d){var f=null;if(d!==void 0&&(f=""+d),l.key!==void 0&&(f=""+l.key),"key"in l){d={};for(var m in l)m!=="key"&&(d[m]=l[m])}else d=l;return l=d.ref,{$$typeof:s,type:r,key:f,ref:l!==void 0?l:null,props:d}}return Jo.Fragment=n,Jo.jsx=i,Jo.jsxs=i,Jo}var x0;function Ew(){return x0||(x0=1,Wf.exports=Tw()),Wf.exports}var c=Ew(),Kf={exports:{}},el={},Qf={exports:{}},Zf={};var S0;function Mw(){return S0||(S0=1,(function(s){function n(I,Z){var ne=I.length;I.push(Z);e:for(;0<ne;){var ge=ne-1>>>1,je=I[ge];if(0<l(je,Z))I[ge]=Z,I[ne]=je,ne=ge;else break e}}function i(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var Z=I[0],ne=I.pop();if(ne!==Z){I[0]=ne;e:for(var ge=0,je=I.length,Ue=je>>>1;ge<Ue;){var Se=2*(ge+1)-1,ye=I[Se],Ye=Se+1,At=I[Ye];if(0>l(ye,ne))Ye<je&&0>l(At,ye)?(I[ge]=At,I[Ye]=ne,ge=Ye):(I[ge]=ye,I[Se]=ne,ge=Se);else if(Ye<je&&0>l(At,ne))I[ge]=At,I[Ye]=ne,ge=Ye;else break e}}return Z}function l(I,Z){var ne=I.sortIndex-Z.sortIndex;return ne!==0?ne:I.id-Z.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;s.unstable_now=function(){return d.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var p=[],y=[],b=1,v=null,w=3,E=!1,C=!1,A=!1,D=!1,P=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function J(I){for(var Z=i(y);Z!==null;){if(Z.callback===null)r(y);else if(Z.startTime<=I)r(y),Z.sortIndex=Z.expirationTime,n(p,Z);else break;Z=i(y)}}function G(I){if(A=!1,J(I),!C)if(i(p)!==null)C=!0,ee||(ee=!0,Re());else{var Z=i(y);Z!==null&&Ee(G,Z.startTime-I)}}var ee=!1,se=-1,W=5,le=-1;function ue(){return D?!0:!(s.unstable_now()-le<W)}function Ce(){if(D=!1,ee){var I=s.unstable_now();le=I;var Z=!0;try{e:{C=!1,A&&(A=!1,Q(se),se=-1),E=!0;var ne=w;try{t:{for(J(I),v=i(p);v!==null&&!(v.expirationTime>I&&ue());){var ge=v.callback;if(typeof ge=="function"){v.callback=null,w=v.priorityLevel;var je=ge(v.expirationTime<=I);if(I=s.unstable_now(),typeof je=="function"){v.callback=je,J(I),Z=!0;break t}v===i(p)&&r(p),J(I)}else r(p);v=i(p)}if(v!==null)Z=!0;else{var Ue=i(y);Ue!==null&&Ee(G,Ue.startTime-I),Z=!1}}break e}finally{v=null,w=ne,E=!1}Z=void 0}}finally{Z?Re():ee=!1}}}var Re;if(typeof V=="function")Re=function(){V(Ce)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,Qe=Ve.port2;Ve.port1.onmessage=Ce,Re=function(){Qe.postMessage(null)}}else Re=function(){P(Ce,0)};function Ee(I,Z){se=P(function(){I(s.unstable_now())},Z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(I){I.callback=null},s.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<I?Math.floor(1e3/I):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(I){switch(w){case 1:case 2:case 3:var Z=3;break;default:Z=w}var ne=w;w=Z;try{return I()}finally{w=ne}},s.unstable_requestPaint=function(){D=!0},s.unstable_runWithPriority=function(I,Z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var ne=w;w=I;try{return Z()}finally{w=ne}},s.unstable_scheduleCallback=function(I,Z,ne){var ge=s.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ge+ne:ge):ne=ge,I){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=ne+je,I={id:b++,callback:Z,priorityLevel:I,startTime:ne,expirationTime:je,sortIndex:-1},ne>ge?(I.sortIndex=ne,n(y,I),i(p)===null&&I===i(y)&&(A?(Q(se),se=-1):A=!0,Ee(G,ne-ge))):(I.sortIndex=je,n(p,I),C||E||(C=!0,ee||(ee=!0,Re()))),I},s.unstable_shouldYield=ue,s.unstable_wrapCallback=function(I){var Z=w;return function(){var ne=w;w=Z;try{return I.apply(this,arguments)}finally{w=ne}}}})(Zf)),Zf}var w0;function Aw(){return w0||(w0=1,Qf.exports=Mw()),Qf.exports}var _0;function kw(){if(_0)return el;_0=1;var s=Aw(),n=aw(),i=rw();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(r(188))}function y(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(r(188));return t!==e?null:e}for(var a=e,o=t;;){var u=a.return;if(u===null)break;var h=u.alternate;if(h===null){if(o=u.return,o!==null){a=o;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===a)return p(u),e;if(h===o)return p(u),t;h=h.sibling}throw Error(r(188))}if(a.return!==o.return)a=u,o=h;else{for(var g=!1,x=u.child;x;){if(x===a){g=!0,a=u,o=h;break}if(x===o){g=!0,o=u,a=h;break}x=x.sibling}if(!g){for(x=h.child;x;){if(x===a){g=!0,a=h,o=u;break}if(x===o){g=!0,o=h,a=u;break}x=x.sibling}if(!g)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),V=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),Ce=Symbol.iterator;function Re(e){return e===null||typeof e!="object"?null:(e=Ce&&e[Ce]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Symbol.for("react.client.reference");function Qe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ve?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case P:return"Profiler";case D:return"StrictMode";case G:return"Suspense";case ee:return"SuspenseList";case le:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case V:return e.displayName||"Context";case Q:return(e._context.displayName||"Context")+".Consumer";case J:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case se:return t=e.displayName||null,t!==null?t:Qe(e.type)||"Memo";case W:t=e._payload,e=e._init;try{return Qe(e(t))}catch{}}return null}var Ee=Array.isArray,I=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},ge=[],je=-1;function Ue(e){return{current:e}}function Se(e){0>je||(e.current=ge[je],ge[je]=null,je--)}function ye(e,t){je++,ge[je]=e.current,e.current=t}var Ye=Ue(null),At=Ue(null),rn=Ue(null),Xn=Ue(null);function as(e,t){switch(ye(rn,t),ye(At,e),ye(Ye,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Iy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Iy(t),e=Py(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Se(Ye),ye(Ye,e)}function Ut(){Se(Ye),Se(At),Se(rn)}function Tn(e){e.memoizedState!==null&&ye(Xn,e);var t=Ye.current,a=Py(t,e.type);t!==a&&(ye(At,e),ye(Ye,a))}function En(e){At.current===e&&(Se(Ye),Se(At)),Xn.current===e&&(Se(Xn),Wo._currentValue=ne)}var Wn,Mn;function kt(e){if(Wn===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Wn=t&&t[1]||"",Mn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wn+e+Mn}var ni=!1;function ot(e,t){if(!e||ni)return"";ni=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(U){var z=U}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(U){z=U}e.call(Y.prototype)}}else{try{throw Error()}catch(U){z=U}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(U){if(U&&z&&typeof U.stack=="string")return[U.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),g=h[0],x=h[1];if(g&&x){var T=g.split(`
`),N=x.split(`
`);for(u=o=0;o<T.length&&!T[o].includes("DetermineComponentFrameRoot");)o++;for(;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;if(o===T.length||u===N.length)for(o=T.length-1,u=N.length-1;1<=o&&0<=u&&T[o]!==N[u];)u--;for(;1<=o&&0<=u;o--,u--)if(T[o]!==N[u]){if(o!==1||u!==1)do if(o--,u--,0>u||T[o]!==N[u]){var H=`
`+T[o].replace(" at new "," at ");return e.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",e.displayName)),H}while(1<=o&&0<=u);break}}}finally{ni=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?kt(a):""}function Pt(e,t){switch(e.tag){case 26:case 27:case 5:return kt(e.type);case 16:return kt("Lazy");case 13:return e.child!==t&&t!==null?kt("Suspense Fallback"):kt("Suspense");case 19:return kt("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return kt("Activity");default:return""}}function An(e){try{var t="",a=null;do t+=Pt(e,a),a=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var rs=Object.prototype.hasOwnProperty,lt=s.unstable_scheduleCallback,kn=s.unstable_cancelCallback,Xr=s.unstable_shouldYield,Wr=s.unstable_requestPaint,Ht=s.unstable_now,Ua=s.unstable_getCurrentPriorityLevel,Oa=s.unstable_ImmediatePriority,os=s.unstable_UserBlockingPriority,si=s.unstable_NormalPriority,Es=s.unstable_LowPriority,La=s.unstable_IdlePriority,on=s.log,K=s.unstable_setDisableYieldValue,we=null,Ie=null;function He(e){if(typeof on=="function"&&K(e),Ie&&typeof Ie.setStrictMode=="function")try{Ie.setStrictMode(we,e)}catch{}}var pt=Math.clz32?Math.clz32:Ms,Rl=Math.log,Du=Math.LN2;function Ms(e){return e>>>=0,e===0?32:31-(Rl(e)/Du|0)|0}var Ia=256,ln=262144,qi=4194304;function ls(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Kr(e,t,a){var o=e.pendingLanes;if(o===0)return 0;var u=0,h=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var x=o&134217727;return x!==0?(o=x&~h,o!==0?u=ls(o):(g&=x,g!==0?u=ls(g):a||(a=x&~e,a!==0&&(u=ls(a))))):(x=o&~h,x!==0?u=ls(x):g!==0?u=ls(g):a||(a=o&~e,a!==0&&(u=ls(a)))),u===0?0:t!==0&&t!==u&&(t&h)===0&&(h=u&-u,a=t&-t,h>=a||h===32&&(a&4194048)!==0)?t:u}function Fi(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Km(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qr(){var e=qi;return qi<<=1,(qi&62914560)===0&&(qi=4194304),e}function Nl(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function ii(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Qm(e,t,a,o,u,h){var g=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var x=e.entanglements,T=e.expirationTimes,N=e.hiddenUpdates;for(a=g&~a;0<a;){var H=31-pt(a),Y=1<<H;x[H]=0,T[H]=-1;var z=N[H];if(z!==null)for(N[H]=null,H=0;H<z.length;H++){var U=z[H];U!==null&&(U.lane&=-536870913)}a&=~Y}o!==0&&Pa(e,o,0),h!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=h&~(g&~t))}function Pa(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-pt(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function zu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var o=31-pt(a),u=1<<o;u&t|e[o]&t&&(e[o]|=t),a&=~u}}function Dl(e,t){var a=t&-t;return a=(a&42)!==0?1:Zr(a),(a&(e.suspendedLanes|t))!==0?0:a}function Zr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ha(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Bu(){var e=Z.p;return e!==0?e:(e=window.event,e===void 0?32:c0(e.type))}function Jr(e,t){var a=Z.p;try{return Z.p=e,t()}finally{Z.p=a}}var cs=Math.random().toString(36).slice(2),gt="__reactFiber$"+cs,Vt="__reactProps$"+cs,As="__reactContainer$"+cs,Va="__reactEvents$"+cs,eo="__reactListeners$"+cs,zl="__reactHandles$"+cs,to="__reactResources$"+cs,Gi="__reactMarker$"+cs;function $a(e){delete e[gt],delete e[Vt],delete e[Va],delete e[eo],delete e[zl]}function ks(e){var t=e[gt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[As]||a[gt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Yy(e);e!==null;){if(a=e[gt])return a;e=Yy(e)}return t}e=a,a=e.parentNode}return null}function ai(e){if(e=e[gt]||e[As]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ri(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function Rs(e){var t=e[to];return t||(t=e[to]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function wt(e){e[Gi]=!0}var Bl=new Set,no={};function Ns(e,t){oi(e,t),oi(e+"Capture",t)}function oi(e,t){for(no[e]=t,e=0;e<t.length;e++)Bl.add(t[e])}var Yi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),us={},so={};function io(e){return rs.call(so,e)?!0:rs.call(us,e)?!1:Yi.test(e)?so[e]=!0:(us[e]=!0,!1)}function Xi(e,t,a){if(io(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function ds(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Rn(e,t,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+o)}}function $t(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ao(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yt(e,t,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,h=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(g){a=""+g,h.call(this,g)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qa(e){if(!e._valueTracker){var t=ao(e)?"checked":"value";e._valueTracker=yt(e,t,""+e[t])}}function Kt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),o="";return e&&(o=ao(e)?e.checked?"true":"false":e.value),e=o,e!==a?(t.setValue(e),!0):!1}function li(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Fa=/[\n"\\]/g;function Qt(e){return e.replace(Fa,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ci(e,t,a,o,u,h,g,x){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+$t(t)):e.value!==""+$t(t)&&(e.value=""+$t(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?ui(e,g,$t(t)):a!=null?ui(e,g,$t(a)):o!=null&&e.removeAttribute("value"),u==null&&h!=null&&(e.defaultChecked=!!h),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+$t(x):e.removeAttribute("name")}function ro(e,t,a,o,u,h,g,x){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){qa(e);return}a=a!=null?""+$t(a):"",t=t!=null?""+$t(t):a,x||t===e.value||(e.value=t),e.defaultValue=t}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=x?e.checked:!!o,e.defaultChecked=!!o,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),qa(e)}function ui(e,t,a){t==="number"&&li(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ds(e,t,a,o){if(e=e.options,t){t={};for(var u=0;u<a.length;u++)t["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=t.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&o&&(e[a].defaultSelected=!0)}else{for(a=""+$t(a),t=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Te(e,t,a){if(t!=null&&(t=""+$t(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+$t(a):""}function Wi(e,t,a,o){if(t==null){if(o!=null){if(a!=null)throw Error(r(92));if(Ee(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),t=a}a=$t(t),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),qa(e)}function bt(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Ki=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zs(e,t,a){var o=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,a):typeof a!="number"||a===0||Ki.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function oo(e,t,a){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var u in t)o=t[u],t.hasOwnProperty(u)&&a[u]!==o&&zs(e,u,o)}else for(var h in t)t.hasOwnProperty(h)&&zs(e,h,t[h])}function Ga(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ul=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ol=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qi(e){return Ol.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Nn(){}var Ya=null;function Rt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bs=null,fs=null;function lo(e){var t=ai(e);if(t&&(e=t.stateNode)){var a=e[Vt]||null;e:switch(e=t.stateNode,t.type){case"input":if(ci(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Qt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var o=a[t];if(o!==e&&o.form===e.form){var u=o[Vt]||null;if(!u)throw Error(r(90));ci(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<a.length;t++)o=a[t],o.form===e.form&&Kt(o)}break e;case"textarea":Te(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Ds(e,!!a.multiple,t,!1)}}}var Zi=!1;function co(e,t,a){if(Zi)return e(t,a);Zi=!0;try{var o=e(t);return o}finally{if(Zi=!1,(Bs!==null||fs!==null)&&(Mc(),Bs&&(t=Bs,e=fs,fs=Bs=null,lo(t),e)))for(t=0;t<e.length;t++)lo(e[t])}}function hs(e,t){var a=e.stateNode;if(a===null)return null;var o=a[Vt]||null;if(o===null)return null;a=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,t,typeof a));return a}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ms=!1;if(Dn)try{var di={};Object.defineProperty(di,"passive",{get:function(){ms=!0}}),window.addEventListener("test",di,di),window.removeEventListener("test",di,di)}catch{ms=!1}var zn=null,Xa=null,fi=null;function Ll(){if(fi)return fi;var e,t=Xa,a=t.length,o,u="value"in zn?zn.value:zn.textContent,h=u.length;for(e=0;e<a&&t[e]===u[e];e++);var g=a-e;for(o=1;o<=g&&t[a-o]===u[h-o];o++);return fi=u.slice(e,1<o?1-o:void 0)}function Ji(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wa(){return!0}function Il(){return!1}function Zt(e){function t(a,o,u,h,g){this._reactName=a,this._targetInst=u,this.type=o,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(a=e[x],this[x]=a?a(h):h[x]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Wa:Il,this.isPropagationStopped=Il,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),t}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ka=Zt(Us),hi=v({},Us,{view:0,detail:0}),Uu=Zt(hi),Qa,uo,mi,Za=v({},hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mi&&(mi&&e.type==="mousemove"?(Qa=e.screenX-mi.screenX,uo=e.screenY-mi.screenY):uo=Qa=0,mi=e),Qa)},movementY:function(e){return"movementY"in e?e.movementY:uo}}),Pl=Zt(Za),fo=v({},Za,{dataTransfer:0}),Ou=Zt(fo),Hl=v({},hi,{relatedTarget:0}),ho=Zt(Hl),Vl=v({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),Lu=Zt(Vl),Iu=v({},Us,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ea=Zt(Iu),Pu=v({},Us,{data:0}),$l=Zt(Pu),Hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ps={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $u(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vu[e])?!!t[e]:!1}function mo(){return $u}var qu=v({},hi,{key:function(e){if(e.key){var t=Hu[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ji(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ps[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mo,charCode:function(e){return e.type==="keypress"?Ji(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ji(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ql=Zt(qu),Fu=v({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fl=Zt(Fu),Gu=v({},hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mo}),Yu=Zt(Gu),Xu=v({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wu=Zt(Xu),Ku=v({},Za,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bn=Zt(Ku),Gl=v({},Us,{newState:0,oldState:0}),Qu=Zt(Gl),Zu=[9,13,27,32],po=Dn&&"CompositionEvent"in window,ta=null;Dn&&"documentMode"in document&&(ta=document.documentMode);var Ju=Dn&&"TextEvent"in window&&!ta,S=Dn&&(!po||ta&&8<ta&&11>=ta),F=" ",ie=!1;function me(e,t){switch(e){case"keyup":return Zu.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $e(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Be=!1;function gs(e,t){switch(e){case"compositionend":return $e(t);case"keypress":return t.which!==32?null:(ie=!0,F);case"textInput":return e=t.data,e===F&&ie?null:e;default:return null}}function na(e,t){if(Be)return e==="compositionend"||!po&&me(e,t)?(e=Ll(),fi=Xa=zn=null,Be=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return S&&t.locale!=="ko"?null:t.data;default:return null}}var nt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ys(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nt[e.type]:t==="textarea"}function go(e,t,a,o){Bs?fs?fs.push(o):fs=[o]:Bs=o,t=Bc(t,"onChange"),0<t.length&&(a=new Ka("onChange","change",null,a,o),e.push({event:a,listeners:t}))}var yo=null,bo=null;function N1(e){Dy(e,0)}function Yl(e){var t=ri(e);if(Kt(t))return e}function Zm(e,t){if(e==="change")return t}var Jm=!1;if(Dn){var ed;if(Dn){var td="oninput"in document;if(!td){var ep=document.createElement("div");ep.setAttribute("oninput","return;"),td=typeof ep.oninput=="function"}ed=td}else ed=!1;Jm=ed&&(!document.documentMode||9<document.documentMode)}function tp(){yo&&(yo.detachEvent("onpropertychange",np),bo=yo=null)}function np(e){if(e.propertyName==="value"&&Yl(bo)){var t=[];go(t,bo,e,Rt(e)),co(N1,t)}}function D1(e,t,a){e==="focusin"?(tp(),yo=t,bo=a,yo.attachEvent("onpropertychange",np)):e==="focusout"&&tp()}function z1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yl(bo)}function B1(e,t){if(e==="click")return Yl(t)}function U1(e,t){if(e==="input"||e==="change")return Yl(t)}function O1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yn=typeof Object.is=="function"?Object.is:O1;function vo(e,t){if(yn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var u=a[o];if(!rs.call(t,u)||!yn(e[u],t[u]))return!1}return!0}function sp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ip(e,t){var a=sp(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=t&&o>=t)return{node:a,offset:t-e};e=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=sp(a)}}function ap(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ap(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=li(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=li(e.document)}return t}function nd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var L1=Dn&&"documentMode"in document&&11>=document.documentMode,Ja=null,sd=null,xo=null,id=!1;function op(e,t,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;id||Ja==null||Ja!==li(o)||(o=Ja,"selectionStart"in o&&nd(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),xo&&vo(xo,o)||(xo=o,o=Bc(sd,"onSelect"),0<o.length&&(t=new Ka("onSelect","select",null,t,a),e.push({event:t,listeners:o}),t.target=Ja)))}function sa(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var er={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionrun:sa("Transition","TransitionRun"),transitionstart:sa("Transition","TransitionStart"),transitioncancel:sa("Transition","TransitionCancel"),transitionend:sa("Transition","TransitionEnd")},ad={},lp={};Dn&&(lp=document.createElement("div").style,"AnimationEvent"in window||(delete er.animationend.animation,delete er.animationiteration.animation,delete er.animationstart.animation),"TransitionEvent"in window||delete er.transitionend.transition);function ia(e){if(ad[e])return ad[e];if(!er[e])return e;var t=er[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in lp)return ad[e]=t[a];return e}var cp=ia("animationend"),up=ia("animationiteration"),dp=ia("animationstart"),I1=ia("transitionrun"),P1=ia("transitionstart"),H1=ia("transitioncancel"),fp=ia("transitionend"),hp=new Map,rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rd.push("scrollEnd");function Kn(e,t){hp.set(e,t),Ns(t,[e])}var Xl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Un=[],tr=0,od=0;function Wl(){for(var e=tr,t=od=tr=0;t<e;){var a=Un[t];Un[t++]=null;var o=Un[t];Un[t++]=null;var u=Un[t];Un[t++]=null;var h=Un[t];if(Un[t++]=null,o!==null&&u!==null){var g=o.pending;g===null?u.next=u:(u.next=g.next,g.next=u),o.pending=u}h!==0&&mp(a,u,h)}}function Kl(e,t,a,o){Un[tr++]=e,Un[tr++]=t,Un[tr++]=a,Un[tr++]=o,od|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function ld(e,t,a,o){return Kl(e,t,a,o),Ql(e)}function aa(e,t){return Kl(e,null,null,t),Ql(e)}function mp(e,t,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var u=!1,h=e.return;h!==null;)h.childLanes|=a,o=h.alternate,o!==null&&(o.childLanes|=a),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(u=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,u&&t!==null&&(u=31-pt(a),e=h.hiddenUpdates,o=e[u],o===null?e[u]=[t]:o.push(t),t.lane=a|536870912),h):null}function Ql(e){if(50<Vo)throw Vo=0,bf=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var nr={};function V1(e,t,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,a,o){return new V1(e,t,a,o)}function cd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Os(e,t){var a=e.alternate;return a===null?(a=bn(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function pp(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Zl(e,t,a,o,u,h){var g=0;if(o=e,typeof e=="function")cd(e)&&(g=1);else if(typeof e=="string")g=YS(e,a,Ye.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case le:return e=bn(31,a,t,u),e.elementType=le,e.lanes=h,e;case A:return ra(a.children,u,h,t);case D:g=8,u|=24;break;case P:return e=bn(12,a,t,u|2),e.elementType=P,e.lanes=h,e;case G:return e=bn(13,a,t,u),e.elementType=G,e.lanes=h,e;case ee:return e=bn(19,a,t,u),e.elementType=ee,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case V:g=10;break e;case Q:g=9;break e;case J:g=11;break e;case se:g=14;break e;case W:g=16,o=null;break e}g=29,a=Error(r(130,e===null?"null":typeof e,"")),o=null}return t=bn(g,a,t,u),t.elementType=e,t.type=o,t.lanes=h,t}function ra(e,t,a,o){return e=bn(7,e,o,t),e.lanes=a,e}function ud(e,t,a){return e=bn(6,e,null,t),e.lanes=a,e}function gp(e){var t=bn(18,null,null,0);return t.stateNode=e,t}function dd(e,t,a){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var yp=new WeakMap;function On(e,t){if(typeof e=="object"&&e!==null){var a=yp.get(e);return a!==void 0?a:(t={value:e,source:t,stack:An(t)},yp.set(e,t),t)}return{value:e,source:t,stack:An(t)}}var sr=[],ir=0,Jl=null,So=0,Ln=[],In=0,pi=null,bs=1,vs="";function Ls(e,t){sr[ir++]=So,sr[ir++]=Jl,Jl=e,So=t}function bp(e,t,a){Ln[In++]=bs,Ln[In++]=vs,Ln[In++]=pi,pi=e;var o=bs;e=vs;var u=32-pt(o)-1;o&=~(1<<u),a+=1;var h=32-pt(t)+u;if(30<h){var g=u-u%5;h=(o&(1<<g)-1).toString(32),o>>=g,u-=g,bs=1<<32-pt(t)+u|a<<u|o,vs=h+e}else bs=1<<h|a<<u|o,vs=e}function fd(e){e.return!==null&&(Ls(e,1),bp(e,1,0))}function hd(e){for(;e===Jl;)Jl=sr[--ir],sr[ir]=null,So=sr[--ir],sr[ir]=null;for(;e===pi;)pi=Ln[--In],Ln[In]=null,vs=Ln[--In],Ln[In]=null,bs=Ln[--In],Ln[In]=null}function vp(e,t){Ln[In++]=bs,Ln[In++]=vs,Ln[In++]=pi,bs=t.id,vs=t.overflow,pi=e}var qt=null,st=null,ze=!1,gi=null,Pn=!1,md=Error(r(519));function yi(e){var t=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wo(On(t,e)),md}function xp(e){var t=e.stateNode,a=e.type,o=e.memoizedProps;switch(t[gt]=e,t[Vt]=o,a){case"dialog":Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":case"embed":Ae("load",t);break;case"video":case"audio":for(a=0;a<qo.length;a++)Ae(qo[a],t);break;case"source":Ae("error",t);break;case"img":case"image":case"link":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"input":Ae("invalid",t),ro(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ae("invalid",t);break;case"textarea":Ae("invalid",t),Wi(t,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||o.suppressHydrationWarning===!0||Oy(t.textContent,a)?(o.popover!=null&&(Ae("beforetoggle",t),Ae("toggle",t)),o.onScroll!=null&&Ae("scroll",t),o.onScrollEnd!=null&&Ae("scrollend",t),o.onClick!=null&&(t.onclick=Nn),t=!0):t=!1,t||yi(e,!0)}function Sp(e){for(qt=e.return;qt;)switch(qt.tag){case 5:case 31:case 13:Pn=!1;return;case 27:case 3:Pn=!0;return;default:qt=qt.return}}function ar(e){if(e!==qt)return!1;if(!ze)return Sp(e),ze=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Df(e.type,e.memoizedProps)),a=!a),a&&st&&yi(e),Sp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));st=Gy(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));st=Gy(e)}else t===27?(t=st,Ri(e.type)?(e=Lf,Lf=null,st=e):st=t):st=qt?Vn(e.stateNode.nextSibling):null;return!0}function oa(){st=qt=null,ze=!1}function pd(){var e=gi;return e!==null&&(fn===null?fn=e:fn.push.apply(fn,e),gi=null),e}function wo(e){gi===null?gi=[e]:gi.push(e)}var gd=Ue(null),la=null,Is=null;function bi(e,t,a){ye(gd,t._currentValue),t._currentValue=a}function Ps(e){e._currentValue=gd.current,Se(gd)}function yd(e,t,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===a)break;e=e.return}}function bd(e,t,a,o){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var h=u.dependencies;if(h!==null){var g=u.child;h=h.firstContext;e:for(;h!==null;){var x=h;h=u;for(var T=0;T<t.length;T++)if(x.context===t[T]){h.lanes|=a,x=h.alternate,x!==null&&(x.lanes|=a),yd(h.return,a,e),o||(g=null);break e}h=x.next}}else if(u.tag===18){if(g=u.return,g===null)throw Error(r(341));g.lanes|=a,h=g.alternate,h!==null&&(h.lanes|=a),yd(g,a,e),g=null}else g=u.child;if(g!==null)g.return=u;else for(g=u;g!==null;){if(g===e){g=null;break}if(u=g.sibling,u!==null){u.return=g.return,g=u;break}g=g.return}u=g}}function rr(e,t,a,o){e=null;for(var u=t,h=!1;u!==null;){if(!h){if((u.flags&524288)!==0)h=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var g=u.alternate;if(g===null)throw Error(r(387));if(g=g.memoizedProps,g!==null){var x=u.type;yn(u.pendingProps.value,g.value)||(e!==null?e.push(x):e=[x])}}else if(u===Xn.current){if(g=u.alternate,g===null)throw Error(r(387));g.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(Wo):e=[Wo])}u=u.return}e!==null&&bd(t,e,a,o),t.flags|=262144}function ec(e){for(e=e.firstContext;e!==null;){if(!yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ca(e){la=e,Is=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ft(e){return wp(la,e)}function tc(e,t){return la===null&&ca(e),wp(e,t)}function wp(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Is===null){if(e===null)throw Error(r(308));Is=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Is=Is.next=t;return a}var $1=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},q1=s.unstable_scheduleCallback,F1=s.unstable_NormalPriority,_t={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vd(){return{controller:new $1,data:new Map,refCount:0}}function _o(e){e.refCount--,e.refCount===0&&q1(F1,function(){e.controller.abort()})}var Co=null,xd=0,or=0,lr=null;function G1(e,t){if(Co===null){var a=Co=[];xd=0,or=Cf(),lr={status:"pending",value:void 0,then:function(o){a.push(o)}}}return xd++,t.then(_p,_p),t}function _p(){if(--xd===0&&Co!==null){lr!==null&&(lr.status="fulfilled");var e=Co;Co=null,or=0,lr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Y1(e,t){var a=[],o={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var u=0;u<a.length;u++)(0,a[u])(t)},function(u){for(o.status="rejected",o.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),o}var Cp=I.S;I.S=function(e,t){oy=Ht(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&G1(e,t),Cp!==null&&Cp(e,t)};var ua=Ue(null);function Sd(){var e=ua.current;return e!==null?e:Ze.pooledCache}function nc(e,t){t===null?ye(ua,ua.current):ye(ua,t.pool)}function jp(){var e=Sd();return e===null?null:{parent:_t._currentValue,pool:e}}var cr=Error(r(460)),wd=Error(r(474)),sc=Error(r(542)),ic={then:function(){}};function Tp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ep(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Nn,Nn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ap(e),e;default:if(typeof t.status=="string")t.then(Nn,Nn);else{if(e=Ze,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=o}},function(o){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ap(e),e}throw fa=t,cr}}function da(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(fa=a,cr):a}}var fa=null;function Mp(){if(fa===null)throw Error(r(459));var e=fa;return fa=null,e}function Ap(e){if(e===cr||e===sc)throw Error(r(483))}var ur=null,jo=0;function ac(e){var t=jo;return jo+=1,ur===null&&(ur=[]),Ep(ur,e,t)}function To(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function rc(e,t){throw t.$$typeof===w?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function kp(e){function t(k,M){if(e){var R=k.deletions;R===null?(k.deletions=[M],k.flags|=16):R.push(M)}}function a(k,M){if(!e)return null;for(;M!==null;)t(k,M),M=M.sibling;return null}function o(k){for(var M=new Map;k!==null;)k.key!==null?M.set(k.key,k):M.set(k.index,k),k=k.sibling;return M}function u(k,M){return k=Os(k,M),k.index=0,k.sibling=null,k}function h(k,M,R){return k.index=R,e?(R=k.alternate,R!==null?(R=R.index,R<M?(k.flags|=67108866,M):R):(k.flags|=67108866,M)):(k.flags|=1048576,M)}function g(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function x(k,M,R,$){return M===null||M.tag!==6?(M=ud(R,k.mode,$),M.return=k,M):(M=u(M,R),M.return=k,M)}function T(k,M,R,$){var ce=R.type;return ce===A?H(k,M,R.props.children,$,R.key):M!==null&&(M.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===W&&da(ce)===M.type)?(M=u(M,R.props),To(M,R),M.return=k,M):(M=Zl(R.type,R.key,R.props,null,k.mode,$),To(M,R),M.return=k,M)}function N(k,M,R,$){return M===null||M.tag!==4||M.stateNode.containerInfo!==R.containerInfo||M.stateNode.implementation!==R.implementation?(M=dd(R,k.mode,$),M.return=k,M):(M=u(M,R.children||[]),M.return=k,M)}function H(k,M,R,$,ce){return M===null||M.tag!==7?(M=ra(R,k.mode,$,ce),M.return=k,M):(M=u(M,R),M.return=k,M)}function Y(k,M,R){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=ud(""+M,k.mode,R),M.return=k,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case E:return R=Zl(M.type,M.key,M.props,null,k.mode,R),To(R,M),R.return=k,R;case C:return M=dd(M,k.mode,R),M.return=k,M;case W:return M=da(M),Y(k,M,R)}if(Ee(M)||Re(M))return M=ra(M,k.mode,R,null),M.return=k,M;if(typeof M.then=="function")return Y(k,ac(M),R);if(M.$$typeof===V)return Y(k,tc(k,M),R);rc(k,M)}return null}function z(k,M,R,$){var ce=M!==null?M.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return ce!==null?null:x(k,M,""+R,$);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case E:return R.key===ce?T(k,M,R,$):null;case C:return R.key===ce?N(k,M,R,$):null;case W:return R=da(R),z(k,M,R,$)}if(Ee(R)||Re(R))return ce!==null?null:H(k,M,R,$,null);if(typeof R.then=="function")return z(k,M,ac(R),$);if(R.$$typeof===V)return z(k,M,tc(k,R),$);rc(k,R)}return null}function U(k,M,R,$,ce){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return k=k.get(R)||null,x(M,k,""+$,ce);if(typeof $=="object"&&$!==null){switch($.$$typeof){case E:return k=k.get($.key===null?R:$.key)||null,T(M,k,$,ce);case C:return k=k.get($.key===null?R:$.key)||null,N(M,k,$,ce);case W:return $=da($),U(k,M,R,$,ce)}if(Ee($)||Re($))return k=k.get(R)||null,H(M,k,$,ce,null);if(typeof $.then=="function")return U(k,M,R,ac($),ce);if($.$$typeof===V)return U(k,M,R,tc(M,$),ce);rc(M,$)}return null}function re(k,M,R,$){for(var ce=null,Oe=null,oe=M,_e=M=0,De=null;oe!==null&&_e<R.length;_e++){oe.index>_e?(De=oe,oe=null):De=oe.sibling;var Le=z(k,oe,R[_e],$);if(Le===null){oe===null&&(oe=De);break}e&&oe&&Le.alternate===null&&t(k,oe),M=h(Le,M,_e),Oe===null?ce=Le:Oe.sibling=Le,Oe=Le,oe=De}if(_e===R.length)return a(k,oe),ze&&Ls(k,_e),ce;if(oe===null){for(;_e<R.length;_e++)oe=Y(k,R[_e],$),oe!==null&&(M=h(oe,M,_e),Oe===null?ce=oe:Oe.sibling=oe,Oe=oe);return ze&&Ls(k,_e),ce}for(oe=o(oe);_e<R.length;_e++)De=U(oe,k,_e,R[_e],$),De!==null&&(e&&De.alternate!==null&&oe.delete(De.key===null?_e:De.key),M=h(De,M,_e),Oe===null?ce=De:Oe.sibling=De,Oe=De);return e&&oe.forEach(function(Ui){return t(k,Ui)}),ze&&Ls(k,_e),ce}function he(k,M,R,$){if(R==null)throw Error(r(151));for(var ce=null,Oe=null,oe=M,_e=M=0,De=null,Le=R.next();oe!==null&&!Le.done;_e++,Le=R.next()){oe.index>_e?(De=oe,oe=null):De=oe.sibling;var Ui=z(k,oe,Le.value,$);if(Ui===null){oe===null&&(oe=De);break}e&&oe&&Ui.alternate===null&&t(k,oe),M=h(Ui,M,_e),Oe===null?ce=Ui:Oe.sibling=Ui,Oe=Ui,oe=De}if(Le.done)return a(k,oe),ze&&Ls(k,_e),ce;if(oe===null){for(;!Le.done;_e++,Le=R.next())Le=Y(k,Le.value,$),Le!==null&&(M=h(Le,M,_e),Oe===null?ce=Le:Oe.sibling=Le,Oe=Le);return ze&&Ls(k,_e),ce}for(oe=o(oe);!Le.done;_e++,Le=R.next())Le=U(oe,k,_e,Le.value,$),Le!==null&&(e&&Le.alternate!==null&&oe.delete(Le.key===null?_e:Le.key),M=h(Le,M,_e),Oe===null?ce=Le:Oe.sibling=Le,Oe=Le);return e&&oe.forEach(function(iw){return t(k,iw)}),ze&&Ls(k,_e),ce}function Ke(k,M,R,$){if(typeof R=="object"&&R!==null&&R.type===A&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case E:e:{for(var ce=R.key;M!==null;){if(M.key===ce){if(ce=R.type,ce===A){if(M.tag===7){a(k,M.sibling),$=u(M,R.props.children),$.return=k,k=$;break e}}else if(M.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===W&&da(ce)===M.type){a(k,M.sibling),$=u(M,R.props),To($,R),$.return=k,k=$;break e}a(k,M);break}else t(k,M);M=M.sibling}R.type===A?($=ra(R.props.children,k.mode,$,R.key),$.return=k,k=$):($=Zl(R.type,R.key,R.props,null,k.mode,$),To($,R),$.return=k,k=$)}return g(k);case C:e:{for(ce=R.key;M!==null;){if(M.key===ce)if(M.tag===4&&M.stateNode.containerInfo===R.containerInfo&&M.stateNode.implementation===R.implementation){a(k,M.sibling),$=u(M,R.children||[]),$.return=k,k=$;break e}else{a(k,M);break}else t(k,M);M=M.sibling}$=dd(R,k.mode,$),$.return=k,k=$}return g(k);case W:return R=da(R),Ke(k,M,R,$)}if(Ee(R))return re(k,M,R,$);if(Re(R)){if(ce=Re(R),typeof ce!="function")throw Error(r(150));return R=ce.call(R),he(k,M,R,$)}if(typeof R.then=="function")return Ke(k,M,ac(R),$);if(R.$$typeof===V)return Ke(k,M,tc(k,R),$);rc(k,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,M!==null&&M.tag===6?(a(k,M.sibling),$=u(M,R),$.return=k,k=$):(a(k,M),$=ud(R,k.mode,$),$.return=k,k=$),g(k)):a(k,M)}return function(k,M,R,$){try{jo=0;var ce=Ke(k,M,R,$);return ur=null,ce}catch(oe){if(oe===cr||oe===sc)throw oe;var Oe=bn(29,oe,null,k.mode);return Oe.lanes=$,Oe.return=k,Oe}finally{}}}var ha=kp(!0),Rp=kp(!1),vi=!1;function _d(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function xi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Si(e,t,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Pe&2)!==0){var u=o.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),o.pending=t,t=Ql(e),mp(e,null,a),t}return Kl(e,o,t,a),Ql(e)}function Eo(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,a|=o,t.lanes=a,zu(e,a)}}function jd(e,t){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var u=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?u=h=g:h=h.next=g,a=a.next}while(a!==null);h===null?u=h=t:h=h.next=t}else u=h=t;a={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Td=!1;function Mo(){if(Td){var e=lr;if(e!==null)throw e}}function Ao(e,t,a,o){Td=!1;var u=e.updateQueue;vi=!1;var h=u.firstBaseUpdate,g=u.lastBaseUpdate,x=u.shared.pending;if(x!==null){u.shared.pending=null;var T=x,N=T.next;T.next=null,g===null?h=N:g.next=N,g=T;var H=e.alternate;H!==null&&(H=H.updateQueue,x=H.lastBaseUpdate,x!==g&&(x===null?H.firstBaseUpdate=N:x.next=N,H.lastBaseUpdate=T))}if(h!==null){var Y=u.baseState;g=0,H=N=T=null,x=h;do{var z=x.lane&-536870913,U=z!==x.lane;if(U?(Ne&z)===z:(o&z)===z){z!==0&&z===or&&(Td=!0),H!==null&&(H=H.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var re=e,he=x;z=t;var Ke=a;switch(he.tag){case 1:if(re=he.payload,typeof re=="function"){Y=re.call(Ke,Y,z);break e}Y=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=he.payload,z=typeof re=="function"?re.call(Ke,Y,z):re,z==null)break e;Y=v({},Y,z);break e;case 2:vi=!0}}z=x.callback,z!==null&&(e.flags|=64,U&&(e.flags|=8192),U=u.callbacks,U===null?u.callbacks=[z]:U.push(z))}else U={lane:z,tag:x.tag,payload:x.payload,callback:x.callback,next:null},H===null?(N=H=U,T=Y):H=H.next=U,g|=z;if(x=x.next,x===null){if(x=u.shared.pending,x===null)break;U=x,x=U.next,U.next=null,u.lastBaseUpdate=U,u.shared.pending=null}}while(!0);H===null&&(T=Y),u.baseState=T,u.firstBaseUpdate=N,u.lastBaseUpdate=H,h===null&&(u.shared.lanes=0),Ti|=g,e.lanes=g,e.memoizedState=Y}}function Np(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function Dp(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Np(a[e],t)}var dr=Ue(null),oc=Ue(0);function zp(e,t){e=Ws,ye(oc,e),ye(dr,t),Ws=e|t.baseLanes}function Ed(){ye(oc,Ws),ye(dr,dr.current)}function Md(){Ws=oc.current,Se(dr),Se(oc)}var vn=Ue(null),Hn=null;function wi(e){var t=e.alternate;ye(vt,vt.current&1),ye(vn,e),Hn===null&&(t===null||dr.current!==null||t.memoizedState!==null)&&(Hn=e)}function Ad(e){ye(vt,vt.current),ye(vn,e),Hn===null&&(Hn=e)}function Bp(e){e.tag===22?(ye(vt,vt.current),ye(vn,e),Hn===null&&(Hn=e)):_i()}function _i(){ye(vt,vt.current),ye(vn,vn.current)}function xn(e){Se(vn),Hn===e&&(Hn=null),Se(vt)}var vt=Ue(0);function lc(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Uf(a)||Of(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hs=0,ve=null,Xe=null,Ct=null,cc=!1,fr=!1,ma=!1,uc=0,ko=0,hr=null,X1=0;function dt(){throw Error(r(321))}function kd(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!yn(e[a],t[a]))return!1;return!0}function Rd(e,t,a,o,u,h){return Hs=h,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=e===null||e.memoizedState===null?bg:Gd,ma=!1,h=a(o,u),ma=!1,fr&&(h=Op(t,a,o,u)),Up(e),h}function Up(e){I.H=Do;var t=Xe!==null&&Xe.next!==null;if(Hs=0,Ct=Xe=ve=null,cc=!1,ko=0,hr=null,t)throw Error(r(300));e===null||jt||(e=e.dependencies,e!==null&&ec(e)&&(jt=!0))}function Op(e,t,a,o){ve=e;var u=0;do{if(fr&&(hr=null),ko=0,fr=!1,25<=u)throw Error(r(301));if(u+=1,Ct=Xe=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}I.H=vg,h=t(a,o)}while(fr);return h}function W1(){var e=I.H,t=e.useState()[0];return t=typeof t.then=="function"?Ro(t):t,e=e.useState()[0],(Xe!==null?Xe.memoizedState:null)!==e&&(ve.flags|=1024),t}function Nd(){var e=uc!==0;return uc=0,e}function Dd(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function zd(e){if(cc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}cc=!1}Hs=0,Ct=Xe=ve=null,fr=!1,ko=uc=0,hr=null}function nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?ve.memoizedState=Ct=e:Ct=Ct.next=e,Ct}function xt(){if(Xe===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=Ct===null?ve.memoizedState:Ct.next;if(t!==null)Ct=t,Xe=e;else{if(e===null)throw ve.alternate===null?Error(r(467)):Error(r(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},Ct===null?ve.memoizedState=Ct=e:Ct=Ct.next=e}return Ct}function dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ro(e){var t=ko;return ko+=1,hr===null&&(hr=[]),e=Ep(hr,e,t),t=ve,(Ct===null?t.memoizedState:Ct.next)===null&&(t=t.alternate,I.H=t===null||t.memoizedState===null?bg:Gd),e}function fc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ro(e);if(e.$$typeof===V)return Ft(e)}throw Error(r(438,String(e)))}function Bd(e){var t=null,a=ve.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var o=ve.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=dc(),ve.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),o=0;o<e;o++)a[o]=ue;return t.index++,a}function Vs(e,t){return typeof t=="function"?t(e):t}function hc(e){var t=xt();return Ud(t,Xe,e)}function Ud(e,t,a){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var u=e.baseQueue,h=o.pending;if(h!==null){if(u!==null){var g=u.next;u.next=h.next,h.next=g}t.baseQueue=u=h,o.pending=null}if(h=e.baseState,u===null)e.memoizedState=h;else{t=u.next;var x=g=null,T=null,N=t,H=!1;do{var Y=N.lane&-536870913;if(Y!==N.lane?(Ne&Y)===Y:(Hs&Y)===Y){var z=N.revertLane;if(z===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),Y===or&&(H=!0);else if((Hs&z)===z){N=N.next,z===or&&(H=!0);continue}else Y={lane:0,revertLane:N.revertLane,gesture:null,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},T===null?(x=T=Y,g=h):T=T.next=Y,ve.lanes|=z,Ti|=z;Y=N.action,ma&&a(h,Y),h=N.hasEagerState?N.eagerState:a(h,Y)}else z={lane:Y,revertLane:N.revertLane,gesture:N.gesture,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},T===null?(x=T=z,g=h):T=T.next=z,ve.lanes|=Y,Ti|=Y;N=N.next}while(N!==null&&N!==t);if(T===null?g=h:T.next=x,!yn(h,e.memoizedState)&&(jt=!0,H&&(a=lr,a!==null)))throw a;e.memoizedState=h,e.baseState=g,e.baseQueue=T,o.lastRenderedState=h}return u===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Od(e){var t=xt(),a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var o=a.dispatch,u=a.pending,h=t.memoizedState;if(u!==null){a.pending=null;var g=u=u.next;do h=e(h,g.action),g=g.next;while(g!==u);yn(h,t.memoizedState)||(jt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),a.lastRenderedState=h}return[h,o]}function Lp(e,t,a){var o=ve,u=xt(),h=ze;if(h){if(a===void 0)throw Error(r(407));a=a()}else a=t();var g=!yn((Xe||u).memoizedState,a);if(g&&(u.memoizedState=a,jt=!0),u=u.queue,Pd(Hp.bind(null,o,u,e),[e]),u.getSnapshot!==t||g||Ct!==null&&Ct.memoizedState.tag&1){if(o.flags|=2048,mr(9,{destroy:void 0},Pp.bind(null,o,u,a,t),null),Ze===null)throw Error(r(349));h||(Hs&127)!==0||Ip(o,t,a)}return a}function Ip(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ve.updateQueue,t===null?(t=dc(),ve.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Pp(e,t,a,o){t.value=a,t.getSnapshot=o,Vp(t)&&$p(e)}function Hp(e,t,a){return a(function(){Vp(t)&&$p(e)})}function Vp(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!yn(e,a)}catch{return!0}}function $p(e){var t=aa(e,2);t!==null&&hn(t,e,2)}function Ld(e){var t=nn();if(typeof e=="function"){var a=e;if(e=a(),ma){He(!0);try{a()}finally{He(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:e},t}function qp(e,t,a,o){return e.baseState=a,Ud(e,Xe,typeof o=="function"?o:Vs)}function K1(e,t,a,o,u){if(gc(e))throw Error(r(485));if(e=t.action,e!==null){var h={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){h.listeners.push(g)}};I.T!==null?a(!0):h.isTransition=!1,o(h),a=t.pending,a===null?(h.next=t.pending=h,Fp(t,h)):(h.next=a.next,t.pending=a.next=h)}}function Fp(e,t){var a=t.action,o=t.payload,u=e.state;if(t.isTransition){var h=I.T,g={};I.T=g;try{var x=a(u,o),T=I.S;T!==null&&T(g,x),Gp(e,t,x)}catch(N){Id(e,t,N)}finally{h!==null&&g.types!==null&&(h.types=g.types),I.T=h}}else try{h=a(u,o),Gp(e,t,h)}catch(N){Id(e,t,N)}}function Gp(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Yp(e,t,o)},function(o){return Id(e,t,o)}):Yp(e,t,a)}function Yp(e,t,a){t.status="fulfilled",t.value=a,Xp(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Fp(e,a)))}function Id(e,t,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=a,Xp(t),t=t.next;while(t!==o)}e.action=null}function Xp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Wp(e,t){return t}function Kp(e,t){if(ze){var a=Ze.formState;if(a!==null){e:{var o=ve;if(ze){if(st){t:{for(var u=st,h=Pn;u.nodeType!==8;){if(!h){u=null;break t}if(u=Vn(u.nextSibling),u===null){u=null;break t}}h=u.data,u=h==="F!"||h==="F"?u:null}if(u){st=Vn(u.nextSibling),o=u.data==="F!";break e}}yi(o)}o=!1}o&&(t=a[0])}}return a=nn(),a.memoizedState=a.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wp,lastRenderedState:t},a.queue=o,a=pg.bind(null,ve,o),o.dispatch=a,o=Ld(!1),h=Fd.bind(null,ve,!1,o.queue),o=nn(),u={state:t,dispatch:null,action:e,pending:null},o.queue=u,a=K1.bind(null,ve,u,h,a),u.dispatch=a,o.memoizedState=e,[t,a,!1]}function Qp(e){var t=xt();return Zp(t,Xe,e)}function Zp(e,t,a){if(t=Ud(e,t,Wp)[0],e=hc(Vs)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=Ro(t)}catch(g){throw g===cr?sc:g}else o=t;t=xt();var u=t.queue,h=u.dispatch;return a!==t.memoizedState&&(ve.flags|=2048,mr(9,{destroy:void 0},Q1.bind(null,u,a),null)),[o,h,e]}function Q1(e,t){e.action=t}function Jp(e){var t=xt(),a=Xe;if(a!==null)return Zp(t,a,e);xt(),t=t.memoizedState,a=xt();var o=a.queue.dispatch;return a.memoizedState=e,[t,o,!1]}function mr(e,t,a,o){return e={tag:e,create:a,deps:o,inst:t,next:null},t=ve.updateQueue,t===null&&(t=dc(),ve.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,t.lastEffect=e),e}function eg(){return xt().memoizedState}function mc(e,t,a,o){var u=nn();ve.flags|=e,u.memoizedState=mr(1|t,{destroy:void 0},a,o===void 0?null:o)}function pc(e,t,a,o){var u=xt();o=o===void 0?null:o;var h=u.memoizedState.inst;Xe!==null&&o!==null&&kd(o,Xe.memoizedState.deps)?u.memoizedState=mr(t,h,a,o):(ve.flags|=e,u.memoizedState=mr(1|t,h,a,o))}function tg(e,t){mc(8390656,8,e,t)}function Pd(e,t){pc(2048,8,e,t)}function Z1(e){ve.flags|=4;var t=ve.updateQueue;if(t===null)t=dc(),ve.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function ng(e){var t=xt().memoizedState;return Z1({ref:t,nextImpl:e}),function(){if((Pe&2)!==0)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function sg(e,t){return pc(4,2,e,t)}function ig(e,t){return pc(4,4,e,t)}function ag(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rg(e,t,a){a=a!=null?a.concat([e]):null,pc(4,4,ag.bind(null,t,e),a)}function Hd(){}function og(e,t){var a=xt();t=t===void 0?null:t;var o=a.memoizedState;return t!==null&&kd(t,o[1])?o[0]:(a.memoizedState=[e,t],e)}function lg(e,t){var a=xt();t=t===void 0?null:t;var o=a.memoizedState;if(t!==null&&kd(t,o[1]))return o[0];if(o=e(),ma){He(!0);try{e()}finally{He(!1)}}return a.memoizedState=[o,t],o}function Vd(e,t,a){return a===void 0||(Hs&1073741824)!==0&&(Ne&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=cy(),ve.lanes|=e,Ti|=e,a)}function cg(e,t,a,o){return yn(a,t)?a:dr.current!==null?(e=Vd(e,a,o),yn(e,t)||(jt=!0),e):(Hs&42)===0||(Hs&1073741824)!==0&&(Ne&261930)===0?(jt=!0,e.memoizedState=a):(e=cy(),ve.lanes|=e,Ti|=e,t)}function ug(e,t,a,o,u){var h=Z.p;Z.p=h!==0&&8>h?h:8;var g=I.T,x={};I.T=x,Fd(e,!1,t,a);try{var T=u(),N=I.S;if(N!==null&&N(x,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var H=Y1(T,o);No(e,t,H,_n(e))}else No(e,t,o,_n(e))}catch(Y){No(e,t,{then:function(){},status:"rejected",reason:Y},_n())}finally{Z.p=h,g!==null&&x.types!==null&&(g.types=x.types),I.T=g}}function J1(){}function $d(e,t,a,o){if(e.tag!==5)throw Error(r(476));var u=dg(e).queue;ug(e,u,t,ne,a===null?J1:function(){return fg(e),a(o)})}function dg(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:ne},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function fg(e){var t=dg(e);t.next===null&&(t=e.alternate.memoizedState),No(e,t.next.queue,{},_n())}function qd(){return Ft(Wo)}function hg(){return xt().memoizedState}function mg(){return xt().memoizedState}function eS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=_n();e=xi(a);var o=Si(t,e,a);o!==null&&(hn(o,t,a),Eo(o,t,a)),t={cache:vd()},e.payload=t;return}t=t.return}}function tS(e,t,a){var o=_n();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},gc(e)?gg(t,a):(a=ld(e,t,a,o),a!==null&&(hn(a,e,o),yg(a,t,o)))}function pg(e,t,a){var o=_n();No(e,t,a,o)}function No(e,t,a,o){var u={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(gc(e))gg(t,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var g=t.lastRenderedState,x=h(g,a);if(u.hasEagerState=!0,u.eagerState=x,yn(x,g))return Kl(e,t,u,0),Ze===null&&Wl(),!1}catch{}finally{}if(a=ld(e,t,u,o),a!==null)return hn(a,e,o),yg(a,t,o),!0}return!1}function Fd(e,t,a,o){if(o={lane:2,revertLane:Cf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},gc(e)){if(t)throw Error(r(479))}else t=ld(e,a,o,2),t!==null&&hn(t,e,2)}function gc(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function gg(e,t){fr=cc=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function yg(e,t,a){if((a&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,a|=o,t.lanes=a,zu(e,a)}}var Do={readContext:Ft,use:fc,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};Do.useEffectEvent=dt;var bg={readContext:Ft,use:fc,useCallback:function(e,t){return nn().memoizedState=[e,t===void 0?null:t],e},useContext:Ft,useEffect:tg,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,mc(4194308,4,ag.bind(null,t,e),a)},useLayoutEffect:function(e,t){return mc(4194308,4,e,t)},useInsertionEffect:function(e,t){mc(4,2,e,t)},useMemo:function(e,t){var a=nn();t=t===void 0?null:t;var o=e();if(ma){He(!0);try{e()}finally{He(!1)}}return a.memoizedState=[o,t],o},useReducer:function(e,t,a){var o=nn();if(a!==void 0){var u=a(t);if(ma){He(!0);try{a(t)}finally{He(!1)}}}else u=t;return o.memoizedState=o.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},o.queue=e,e=e.dispatch=tS.bind(null,ve,e),[o.memoizedState,e]},useRef:function(e){var t=nn();return e={current:e},t.memoizedState=e},useState:function(e){e=Ld(e);var t=e.queue,a=pg.bind(null,ve,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Hd,useDeferredValue:function(e,t){var a=nn();return Vd(a,e,t)},useTransition:function(){var e=Ld(!1);return e=ug.bind(null,ve,e.queue,!0,!1),nn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var o=ve,u=nn();if(ze){if(a===void 0)throw Error(r(407));a=a()}else{if(a=t(),Ze===null)throw Error(r(349));(Ne&127)!==0||Ip(o,t,a)}u.memoizedState=a;var h={value:a,getSnapshot:t};return u.queue=h,tg(Hp.bind(null,o,h,e),[e]),o.flags|=2048,mr(9,{destroy:void 0},Pp.bind(null,o,h,a,t),null),a},useId:function(){var e=nn(),t=Ze.identifierPrefix;if(ze){var a=vs,o=bs;a=(o&~(1<<32-pt(o)-1)).toString(32)+a,t="_"+t+"R_"+a,a=uc++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=X1++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:qd,useFormState:Kp,useActionState:Kp,useOptimistic:function(e){var t=nn();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Fd.bind(null,ve,!0,a),a.dispatch=t,[e,t]},useMemoCache:Bd,useCacheRefresh:function(){return nn().memoizedState=eS.bind(null,ve)},useEffectEvent:function(e){var t=nn(),a={impl:e};return t.memoizedState=a,function(){if((Pe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Gd={readContext:Ft,use:fc,useCallback:og,useContext:Ft,useEffect:Pd,useImperativeHandle:rg,useInsertionEffect:sg,useLayoutEffect:ig,useMemo:lg,useReducer:hc,useRef:eg,useState:function(){return hc(Vs)},useDebugValue:Hd,useDeferredValue:function(e,t){var a=xt();return cg(a,Xe.memoizedState,e,t)},useTransition:function(){var e=hc(Vs)[0],t=xt().memoizedState;return[typeof e=="boolean"?e:Ro(e),t]},useSyncExternalStore:Lp,useId:hg,useHostTransitionStatus:qd,useFormState:Qp,useActionState:Qp,useOptimistic:function(e,t){var a=xt();return qp(a,Xe,e,t)},useMemoCache:Bd,useCacheRefresh:mg};Gd.useEffectEvent=ng;var vg={readContext:Ft,use:fc,useCallback:og,useContext:Ft,useEffect:Pd,useImperativeHandle:rg,useInsertionEffect:sg,useLayoutEffect:ig,useMemo:lg,useReducer:Od,useRef:eg,useState:function(){return Od(Vs)},useDebugValue:Hd,useDeferredValue:function(e,t){var a=xt();return Xe===null?Vd(a,e,t):cg(a,Xe.memoizedState,e,t)},useTransition:function(){var e=Od(Vs)[0],t=xt().memoizedState;return[typeof e=="boolean"?e:Ro(e),t]},useSyncExternalStore:Lp,useId:hg,useHostTransitionStatus:qd,useFormState:Jp,useActionState:Jp,useOptimistic:function(e,t){var a=xt();return Xe!==null?qp(a,Xe,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Bd,useCacheRefresh:mg};vg.useEffectEvent=ng;function Yd(e,t,a,o){t=e.memoizedState,a=a(o,t),a=a==null?t:v({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Xd={enqueueSetState:function(e,t,a){e=e._reactInternals;var o=_n(),u=xi(o);u.payload=t,a!=null&&(u.callback=a),t=Si(e,u,o),t!==null&&(hn(t,e,o),Eo(t,e,o))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var o=_n(),u=xi(o);u.tag=1,u.payload=t,a!=null&&(u.callback=a),t=Si(e,u,o),t!==null&&(hn(t,e,o),Eo(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=_n(),o=xi(a);o.tag=2,t!=null&&(o.callback=t),t=Si(e,o,a),t!==null&&(hn(t,e,a),Eo(t,e,a))}};function xg(e,t,a,o,u,h,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,g):t.prototype&&t.prototype.isPureReactComponent?!vo(a,o)||!vo(u,h):!0}function Sg(e,t,a,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,o),t.state!==e&&Xd.enqueueReplaceState(t,t.state,null)}function pa(e,t){var a=t;if("ref"in t){a={};for(var o in t)o!=="ref"&&(a[o]=t[o])}if(e=e.defaultProps){a===t&&(a=v({},a));for(var u in e)a[u]===void 0&&(a[u]=e[u])}return a}function wg(e){Xl(e)}function _g(e){console.error(e)}function Cg(e){Xl(e)}function yc(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function jg(e,t,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function Wd(e,t,a){return a=xi(a),a.tag=3,a.payload={element:null},a.callback=function(){yc(e,t)},a}function Tg(e){return e=xi(e),e.tag=3,e}function Eg(e,t,a,o){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var h=o.value;e.payload=function(){return u(h)},e.callback=function(){jg(t,a,o)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){jg(t,a,o),typeof u!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var x=o.stack;this.componentDidCatch(o.value,{componentStack:x!==null?x:""})})}function nS(e,t,a,o,u){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=a.alternate,t!==null&&rr(t,a,u,!0),a=vn.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?Ac():a.alternate===null&&ft===0&&(ft=3),a.flags&=-257,a.flags|=65536,a.lanes=u,o===ic?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([o]):t.add(o),Sf(e,o,u)),!1;case 22:return a.flags|=65536,o===ic?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([o]):a.add(o)),Sf(e,o,u)),!1}throw Error(r(435,a.tag))}return Sf(e,o,u),Ac(),!1}if(ze)return t=vn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,o!==md&&(e=Error(r(422),{cause:o}),wo(On(e,a)))):(o!==md&&(t=Error(r(423),{cause:o}),wo(On(t,a))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,o=On(o,a),u=Wd(e.stateNode,o,u),jd(e,u),ft!==4&&(ft=2)),!1;var h=Error(r(520),{cause:o});if(h=On(h,a),Ho===null?Ho=[h]:Ho.push(h),ft!==4&&(ft=2),t===null)return!0;o=On(o,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=u&-u,a.lanes|=e,e=Wd(a.stateNode,o,e),jd(a,e),!1;case 1:if(t=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Ei===null||!Ei.has(h))))return a.flags|=65536,u&=-u,a.lanes|=u,u=Tg(u),Eg(u,e,a,o),jd(a,u),!1}a=a.return}while(a!==null);return!1}var Kd=Error(r(461)),jt=!1;function Gt(e,t,a,o){t.child=e===null?Rp(t,null,a,o):ha(t,e.child,a,o)}function Mg(e,t,a,o,u){a=a.render;var h=t.ref;if("ref"in o){var g={};for(var x in o)x!=="ref"&&(g[x]=o[x])}else g=o;return ca(t),o=Rd(e,t,a,g,h,u),x=Nd(),e!==null&&!jt?(Dd(e,t,u),$s(e,t,u)):(ze&&x&&fd(t),t.flags|=1,Gt(e,t,o,u),t.child)}function Ag(e,t,a,o,u){if(e===null){var h=a.type;return typeof h=="function"&&!cd(h)&&h.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=h,kg(e,t,h,o,u)):(e=Zl(a.type,null,o,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!af(e,u)){var g=h.memoizedProps;if(a=a.compare,a=a!==null?a:vo,a(g,o)&&e.ref===t.ref)return $s(e,t,u)}return t.flags|=1,e=Os(h,o),e.ref=t.ref,e.return=t,t.child=e}function kg(e,t,a,o,u){if(e!==null){var h=e.memoizedProps;if(vo(h,o)&&e.ref===t.ref)if(jt=!1,t.pendingProps=o=h,af(e,u))(e.flags&131072)!==0&&(jt=!0);else return t.lanes=e.lanes,$s(e,t,u)}return Qd(e,t,a,o,u)}function Rg(e,t,a,o){var u=o.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|a:a,e!==null){for(o=t.child=e.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~h}else o=0,t.child=null;return Ng(e,t,h,a,o)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&nc(t,h!==null?h.cachePool:null),h!==null?zp(t,h):Ed(),Bp(t);else return o=t.lanes=536870912,Ng(e,t,h!==null?h.baseLanes|a:a,a,o)}else h!==null?(nc(t,h.cachePool),zp(t,h),_i(),t.memoizedState=null):(e!==null&&nc(t,null),Ed(),_i());return Gt(e,t,u,a),t.child}function zo(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ng(e,t,a,o,u){var h=Sd();return h=h===null?null:{parent:_t._currentValue,pool:h},t.memoizedState={baseLanes:a,cachePool:h},e!==null&&nc(t,null),Ed(),Bp(t),e!==null&&rr(e,t,o,!0),t.childLanes=u,null}function bc(e,t){return t=xc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Dg(e,t,a){return ha(t,e.child,null,a),e=bc(t,t.pendingProps),e.flags|=2,xn(t),t.memoizedState=null,e}function sS(e,t,a){var o=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ze){if(o.mode==="hidden")return e=bc(t,o),t.lanes=536870912,zo(null,e);if(Ad(t),(e=st)?(e=Fy(e,Pn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:pi!==null?{id:bs,overflow:vs}:null,retryLane:536870912,hydrationErrors:null},a=gp(e),a.return=t,t.child=a,qt=t,st=null)):e=null,e===null)throw yi(t);return t.lanes=536870912,null}return bc(t,o)}var h=e.memoizedState;if(h!==null){var g=h.dehydrated;if(Ad(t),u)if(t.flags&256)t.flags&=-257,t=Dg(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(r(558));else if(jt||rr(e,t,a,!1),u=(a&e.childLanes)!==0,jt||u){if(o=Ze,o!==null&&(g=Dl(o,a),g!==0&&g!==h.retryLane))throw h.retryLane=g,aa(e,g),hn(o,e,g),Kd;Ac(),t=Dg(e,t,a)}else e=h.treeContext,st=Vn(g.nextSibling),qt=t,ze=!0,gi=null,Pn=!1,e!==null&&vp(t,e),t=bc(t,o),t.flags|=4096;return t}return e=Os(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function vc(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Qd(e,t,a,o,u){return ca(t),a=Rd(e,t,a,o,void 0,u),o=Nd(),e!==null&&!jt?(Dd(e,t,u),$s(e,t,u)):(ze&&o&&fd(t),t.flags|=1,Gt(e,t,a,u),t.child)}function zg(e,t,a,o,u,h){return ca(t),t.updateQueue=null,a=Op(t,o,a,u),Up(e),o=Nd(),e!==null&&!jt?(Dd(e,t,h),$s(e,t,h)):(ze&&o&&fd(t),t.flags|=1,Gt(e,t,a,h),t.child)}function Bg(e,t,a,o,u){if(ca(t),t.stateNode===null){var h=nr,g=a.contextType;typeof g=="object"&&g!==null&&(h=Ft(g)),h=new a(o,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Xd,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=o,h.state=t.memoizedState,h.refs={},_d(t),g=a.contextType,h.context=typeof g=="object"&&g!==null?Ft(g):nr,h.state=t.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(Yd(t,a,g,o),h.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(g=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),g!==h.state&&Xd.enqueueReplaceState(h,h.state,null),Ao(t,o,h,u),Mo(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){h=t.stateNode;var x=t.memoizedProps,T=pa(a,x);h.props=T;var N=h.context,H=a.contextType;g=nr,typeof H=="object"&&H!==null&&(g=Ft(H));var Y=a.getDerivedStateFromProps;H=typeof Y=="function"||typeof h.getSnapshotBeforeUpdate=="function",x=t.pendingProps!==x,H||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(x||N!==g)&&Sg(t,h,o,g),vi=!1;var z=t.memoizedState;h.state=z,Ao(t,o,h,u),Mo(),N=t.memoizedState,x||z!==N||vi?(typeof Y=="function"&&(Yd(t,a,Y,o),N=t.memoizedState),(T=vi||xg(t,a,T,o,z,N,g))?(H||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=N),h.props=o,h.state=N,h.context=g,o=T):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{h=t.stateNode,Cd(e,t),g=t.memoizedProps,H=pa(a,g),h.props=H,Y=t.pendingProps,z=h.context,N=a.contextType,T=nr,typeof N=="object"&&N!==null&&(T=Ft(N)),x=a.getDerivedStateFromProps,(N=typeof x=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(g!==Y||z!==T)&&Sg(t,h,o,T),vi=!1,z=t.memoizedState,h.state=z,Ao(t,o,h,u),Mo();var U=t.memoizedState;g!==Y||z!==U||vi||e!==null&&e.dependencies!==null&&ec(e.dependencies)?(typeof x=="function"&&(Yd(t,a,x,o),U=t.memoizedState),(H=vi||xg(t,a,H,o,z,U,T)||e!==null&&e.dependencies!==null&&ec(e.dependencies))?(N||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,U,T),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,U,T)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||g===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=U),h.props=o,h.state=U,h.context=T,o=H):(typeof h.componentDidUpdate!="function"||g===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),o=!1)}return h=o,vc(e,t),o=(t.flags&128)!==0,h||o?(h=t.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&o?(t.child=ha(t,e.child,null,u),t.child=ha(t,null,a,u)):Gt(e,t,a,u),t.memoizedState=h.state,e=t.child):e=$s(e,t,u),e}function Ug(e,t,a,o){return oa(),t.flags|=256,Gt(e,t,a,o),t.child}var Zd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jd(e){return{baseLanes:e,cachePool:jp()}}function ef(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=wn),e}function Og(e,t,a){var o=t.pendingProps,u=!1,h=(t.flags&128)!==0,g;if((g=h)||(g=e!==null&&e.memoizedState===null?!1:(vt.current&2)!==0),g&&(u=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(ze){if(u?wi(t):_i(),(e=st)?(e=Fy(e,Pn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:pi!==null?{id:bs,overflow:vs}:null,retryLane:536870912,hydrationErrors:null},a=gp(e),a.return=t,t.child=a,qt=t,st=null)):e=null,e===null)throw yi(t);return Of(e)?t.lanes=32:t.lanes=536870912,null}var x=o.children;return o=o.fallback,u?(_i(),u=t.mode,x=xc({mode:"hidden",children:x},u),o=ra(o,u,a,null),x.return=t,o.return=t,x.sibling=o,t.child=x,o=t.child,o.memoizedState=Jd(a),o.childLanes=ef(e,g,a),t.memoizedState=Zd,zo(null,o)):(wi(t),tf(t,x))}var T=e.memoizedState;if(T!==null&&(x=T.dehydrated,x!==null)){if(h)t.flags&256?(wi(t),t.flags&=-257,t=nf(e,t,a)):t.memoizedState!==null?(_i(),t.child=e.child,t.flags|=128,t=null):(_i(),x=o.fallback,u=t.mode,o=xc({mode:"visible",children:o.children},u),x=ra(x,u,a,null),x.flags|=2,o.return=t,x.return=t,o.sibling=x,t.child=o,ha(t,e.child,null,a),o=t.child,o.memoizedState=Jd(a),o.childLanes=ef(e,g,a),t.memoizedState=Zd,t=zo(null,o));else if(wi(t),Of(x)){if(g=x.nextSibling&&x.nextSibling.dataset,g)var N=g.dgst;g=N,o=Error(r(419)),o.stack="",o.digest=g,wo({value:o,source:null,stack:null}),t=nf(e,t,a)}else if(jt||rr(e,t,a,!1),g=(a&e.childLanes)!==0,jt||g){if(g=Ze,g!==null&&(o=Dl(g,a),o!==0&&o!==T.retryLane))throw T.retryLane=o,aa(e,o),hn(g,e,o),Kd;Uf(x)||Ac(),t=nf(e,t,a)}else Uf(x)?(t.flags|=192,t.child=e.child,t=null):(e=T.treeContext,st=Vn(x.nextSibling),qt=t,ze=!0,gi=null,Pn=!1,e!==null&&vp(t,e),t=tf(t,o.children),t.flags|=4096);return t}return u?(_i(),x=o.fallback,u=t.mode,T=e.child,N=T.sibling,o=Os(T,{mode:"hidden",children:o.children}),o.subtreeFlags=T.subtreeFlags&65011712,N!==null?x=Os(N,x):(x=ra(x,u,a,null),x.flags|=2),x.return=t,o.return=t,o.sibling=x,t.child=o,zo(null,o),o=t.child,x=e.child.memoizedState,x===null?x=Jd(a):(u=x.cachePool,u!==null?(T=_t._currentValue,u=u.parent!==T?{parent:T,pool:T}:u):u=jp(),x={baseLanes:x.baseLanes|a,cachePool:u}),o.memoizedState=x,o.childLanes=ef(e,g,a),t.memoizedState=Zd,zo(e.child,o)):(wi(t),a=e.child,e=a.sibling,a=Os(a,{mode:"visible",children:o.children}),a.return=t,a.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=a,t.memoizedState=null,a)}function tf(e,t){return t=xc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function xc(e,t){return e=bn(22,e,null,t),e.lanes=0,e}function nf(e,t,a){return ha(t,e.child,null,a),e=tf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lg(e,t,a){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),yd(e.return,t,a)}function sf(e,t,a,o,u,h){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:u,treeForkCount:h}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=o,g.tail=a,g.tailMode=u,g.treeForkCount=h)}function Ig(e,t,a){var o=t.pendingProps,u=o.revealOrder,h=o.tail;o=o.children;var g=vt.current,x=(g&2)!==0;if(x?(g=g&1|2,t.flags|=128):g&=1,ye(vt,g),Gt(e,t,o,a),o=ze?So:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lg(e,a,t);else if(e.tag===19)Lg(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(a=t.child,u=null;a!==null;)e=a.alternate,e!==null&&lc(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=t.child,t.child=null):(u=a.sibling,a.sibling=null),sf(t,!1,u,a,h,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&lc(e)===null){t.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}sf(t,!0,a,null,h,o);break;case"together":sf(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function $s(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ti|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(rr(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,a=Os(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Os(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function af(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ec(e)))}function iS(e,t,a){switch(t.tag){case 3:as(t,t.stateNode.containerInfo),bi(t,_t,e.memoizedState.cache),oa();break;case 27:case 5:Tn(t);break;case 4:as(t,t.stateNode.containerInfo);break;case 10:bi(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Ad(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(wi(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Og(e,t,a):(wi(t),e=$s(e,t,a),e!==null?e.sibling:null);wi(t);break;case 19:var u=(e.flags&128)!==0;if(o=(a&t.childLanes)!==0,o||(rr(e,t,a,!1),o=(a&t.childLanes)!==0),u){if(o)return Ig(e,t,a);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ye(vt,vt.current),o)break;return null;case 22:return t.lanes=0,Rg(e,t,a,t.pendingProps);case 24:bi(t,_t,e.memoizedState.cache)}return $s(e,t,a)}function Pg(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)jt=!0;else{if(!af(e,a)&&(t.flags&128)===0)return jt=!1,iS(e,t,a);jt=(e.flags&131072)!==0}else jt=!1,ze&&(t.flags&1048576)!==0&&bp(t,So,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=da(t.elementType),t.type=e,typeof e=="function")cd(e)?(o=pa(e,o),t.tag=1,t=Bg(null,t,e,o,a)):(t.tag=0,t=Qd(null,t,e,o,a));else{if(e!=null){var u=e.$$typeof;if(u===J){t.tag=11,t=Mg(null,t,e,o,a);break e}else if(u===se){t.tag=14,t=Ag(null,t,e,o,a);break e}}throw t=Qe(e)||e,Error(r(306,t,""))}}return t;case 0:return Qd(e,t,t.type,t.pendingProps,a);case 1:return o=t.type,u=pa(o,t.pendingProps),Bg(e,t,o,u,a);case 3:e:{if(as(t,t.stateNode.containerInfo),e===null)throw Error(r(387));o=t.pendingProps;var h=t.memoizedState;u=h.element,Cd(e,t),Ao(t,o,null,a);var g=t.memoizedState;if(o=g.cache,bi(t,_t,o),o!==h.cache&&bd(t,[_t],a,!0),Mo(),o=g.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=Ug(e,t,o,a);break e}else if(o!==u){u=On(Error(r(424)),t),wo(u),t=Ug(e,t,o,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(st=Vn(e.firstChild),qt=t,ze=!0,gi=null,Pn=!0,a=Rp(t,null,o,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(oa(),o===u){t=$s(e,t,a);break e}Gt(e,t,o,a)}t=t.child}return t;case 26:return vc(e,t),e===null?(a=Qy(t.type,null,t.pendingProps,null))?t.memoizedState=a:ze||(a=t.type,e=t.pendingProps,o=Uc(rn.current).createElement(a),o[gt]=t,o[Vt]=e,Yt(o,a,e),wt(o),t.stateNode=o):t.memoizedState=Qy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Tn(t),e===null&&ze&&(o=t.stateNode=Xy(t.type,t.pendingProps,rn.current),qt=t,Pn=!0,u=st,Ri(t.type)?(Lf=u,st=Vn(o.firstChild)):st=u),Gt(e,t,t.pendingProps.children,a),vc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ze&&((u=o=st)&&(o=zS(o,t.type,t.pendingProps,Pn),o!==null?(t.stateNode=o,qt=t,st=Vn(o.firstChild),Pn=!1,u=!0):u=!1),u||yi(t)),Tn(t),u=t.type,h=t.pendingProps,g=e!==null?e.memoizedProps:null,o=h.children,Df(u,h)?o=null:g!==null&&Df(u,g)&&(t.flags|=32),t.memoizedState!==null&&(u=Rd(e,t,W1,null,null,a),Wo._currentValue=u),vc(e,t),Gt(e,t,o,a),t.child;case 6:return e===null&&ze&&((e=a=st)&&(a=BS(a,t.pendingProps,Pn),a!==null?(t.stateNode=a,qt=t,st=null,e=!0):e=!1),e||yi(t)),null;case 13:return Og(e,t,a);case 4:return as(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=ha(t,null,o,a):Gt(e,t,o,a),t.child;case 11:return Mg(e,t,t.type,t.pendingProps,a);case 7:return Gt(e,t,t.pendingProps,a),t.child;case 8:return Gt(e,t,t.pendingProps.children,a),t.child;case 12:return Gt(e,t,t.pendingProps.children,a),t.child;case 10:return o=t.pendingProps,bi(t,t.type,o.value),Gt(e,t,o.children,a),t.child;case 9:return u=t.type._context,o=t.pendingProps.children,ca(t),u=Ft(u),o=o(u),t.flags|=1,Gt(e,t,o,a),t.child;case 14:return Ag(e,t,t.type,t.pendingProps,a);case 15:return kg(e,t,t.type,t.pendingProps,a);case 19:return Ig(e,t,a);case 31:return sS(e,t,a);case 22:return Rg(e,t,a,t.pendingProps);case 24:return ca(t),o=Ft(_t),e===null?(u=Sd(),u===null&&(u=Ze,h=vd(),u.pooledCache=h,h.refCount++,h!==null&&(u.pooledCacheLanes|=a),u=h),t.memoizedState={parent:o,cache:u},_d(t),bi(t,_t,u)):((e.lanes&a)!==0&&(Cd(e,t),Ao(t,null,null,a),Mo()),u=e.memoizedState,h=t.memoizedState,u.parent!==o?(u={parent:o,cache:o},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),bi(t,_t,o)):(o=h.cache,bi(t,_t,o),o!==u.cache&&bd(t,[_t],a,!0))),Gt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function qs(e){e.flags|=4}function rf(e,t,a,o,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(hy())e.flags|=8192;else throw fa=ic,wd}else e.flags&=-16777217}function Hg(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!n0(t))if(hy())e.flags|=8192;else throw fa=ic,wd}function Sc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Qr():536870912,e.lanes|=t,br|=t)}function Bo(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function it(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(t)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=a,t}function aS(e,t,a){var o=t.pendingProps;switch(hd(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(t),null;case 1:return it(t),null;case 3:return a=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Ps(_t),Ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ar(t)?qs(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,pd())),it(t),null;case 26:var u=t.type,h=t.memoizedState;return e===null?(qs(t),h!==null?(it(t),Hg(t,h)):(it(t),rf(t,u,null,o,a))):h?h!==e.memoizedState?(qs(t),it(t),Hg(t,h)):(it(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&qs(t),it(t),rf(t,u,e,o,a)),null;case 27:if(En(t),a=rn.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&qs(t);else{if(!o){if(t.stateNode===null)throw Error(r(166));return it(t),null}e=Ye.current,ar(t)?xp(t):(e=Xy(u,o,a),t.stateNode=e,qs(t))}return it(t),null;case 5:if(En(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&qs(t);else{if(!o){if(t.stateNode===null)throw Error(r(166));return it(t),null}if(h=Ye.current,ar(t))xp(t);else{var g=Uc(rn.current);switch(h){case 1:h=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:h=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":h=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":h=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":h=g.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?g.createElement("select",{is:o.is}):g.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?g.createElement(u,{is:o.is}):g.createElement(u)}}h[gt]=t,h[Vt]=o;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)h.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=h;e:switch(Yt(h,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&qs(t)}}return it(t),rf(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&qs(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(r(166));if(e=rn.current,ar(t)){if(e=t.stateNode,a=t.memoizedProps,o=null,u=qt,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}e[gt]=t,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Oy(e.nodeValue,a)),e||yi(t,!0)}else e=Uc(e).createTextNode(o),e[gt]=t,t.stateNode=e}return it(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(o=ar(t),a!==null){if(e===null){if(!o)throw Error(r(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[gt]=t}else oa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;it(t),e=!1}else a=pd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(xn(t),t):(xn(t),null);if((t.flags&128)!==0)throw Error(r(558))}return it(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=ar(t),o!==null&&o.dehydrated!==null){if(e===null){if(!u)throw Error(r(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));u[gt]=t}else oa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;it(t),u=!1}else u=pd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(xn(t),t):(xn(t),null)}return xn(t),(t.flags&128)!==0?(t.lanes=a,t):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=t.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==u&&(o.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Sc(t,t.updateQueue),it(t),null);case 4:return Ut(),e===null&&Mf(t.stateNode.containerInfo),it(t),null;case 10:return Ps(t.type),it(t),null;case 19:if(Se(vt),o=t.memoizedState,o===null)return it(t),null;if(u=(t.flags&128)!==0,h=o.rendering,h===null)if(u)Bo(o,!1);else{if(ft!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=lc(e),h!==null){for(t.flags|=128,Bo(o,!1),e=h.updateQueue,t.updateQueue=e,Sc(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)pp(a,e),a=a.sibling;return ye(vt,vt.current&1|2),ze&&Ls(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&Ht()>Tc&&(t.flags|=128,u=!0,Bo(o,!1),t.lanes=4194304)}else{if(!u)if(e=lc(h),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,Sc(t,e),Bo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!ze)return it(t),null}else 2*Ht()-o.renderingStartTime>Tc&&a!==536870912&&(t.flags|=128,u=!0,Bo(o,!1),t.lanes=4194304);o.isBackwards?(h.sibling=t.child,t.child=h):(e=o.last,e!==null?e.sibling=h:t.child=h,o.last=h)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ht(),e.sibling=null,a=vt.current,ye(vt,u?a&1|2:a&1),ze&&Ls(t,o.treeForkCount),e):(it(t),null);case 22:case 23:return xn(t),Md(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(a&536870912)!==0&&(t.flags&128)===0&&(it(t),t.subtreeFlags&6&&(t.flags|=8192)):it(t),a=t.updateQueue,a!==null&&Sc(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==a&&(t.flags|=2048),e!==null&&Se(ua),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Ps(_t),it(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function rS(e,t){switch(hd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ps(_t),Ut(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return En(t),null;case 31:if(t.memoizedState!==null){if(xn(t),t.alternate===null)throw Error(r(340));oa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(xn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));oa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(vt),null;case 4:return Ut(),null;case 10:return Ps(t.type),null;case 22:case 23:return xn(t),Md(),e!==null&&Se(ua),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ps(_t),null;case 25:return null;default:return null}}function Vg(e,t){switch(hd(t),t.tag){case 3:Ps(_t),Ut();break;case 26:case 27:case 5:En(t);break;case 4:Ut();break;case 31:t.memoizedState!==null&&xn(t);break;case 13:xn(t);break;case 19:Se(vt);break;case 10:Ps(t.type);break;case 22:case 23:xn(t),Md(),e!==null&&Se(ua);break;case 24:Ps(_t)}}function Uo(e,t){try{var a=t.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var u=o.next;a=u;do{if((a.tag&e)===e){o=void 0;var h=a.create,g=a.inst;o=h(),g.destroy=o}a=a.next}while(a!==u)}}catch(x){Fe(t,t.return,x)}}function Ci(e,t,a){try{var o=t.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var h=u.next;o=h;do{if((o.tag&e)===e){var g=o.inst,x=g.destroy;if(x!==void 0){g.destroy=void 0,u=t;var T=a,N=x;try{N()}catch(H){Fe(u,T,H)}}}o=o.next}while(o!==h)}}catch(H){Fe(t,t.return,H)}}function $g(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Dp(t,a)}catch(o){Fe(e,e.return,o)}}}function qg(e,t,a){a.props=pa(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Fe(e,t,o)}}function Oo(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(u){Fe(e,t,u)}}function xs(e,t){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(u){Fe(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){Fe(e,t,u)}else a.current=null}function Fg(e){var t=e.type,a=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(u){Fe(e,e.return,u)}}function of(e,t,a){try{var o=e.stateNode;MS(o,e.type,a,t),o[Vt]=t}catch(u){Fe(e,e.return,u)}}function Gg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ri(e.type)||e.tag===4}function lf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ri(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cf(e,t,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Nn));else if(o!==4&&(o===27&&Ri(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(cf(e,t,a),e=e.sibling;e!==null;)cf(e,t,a),e=e.sibling}function wc(e,t,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(o!==4&&(o===27&&Ri(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(wc(e,t,a),e=e.sibling;e!==null;)wc(e,t,a),e=e.sibling}function Yg(e){var t=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);Yt(t,o,a),t[gt]=e,t[Vt]=a}catch(h){Fe(e,e.return,h)}}var Fs=!1,Tt=!1,uf=!1,Xg=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function oS(e,t){if(e=e.containerInfo,Rf=$c,e=rp(e),nd(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var u=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var g=0,x=-1,T=-1,N=0,H=0,Y=e,z=null;t:for(;;){for(var U;Y!==a||u!==0&&Y.nodeType!==3||(x=g+u),Y!==h||o!==0&&Y.nodeType!==3||(T=g+o),Y.nodeType===3&&(g+=Y.nodeValue.length),(U=Y.firstChild)!==null;)z=Y,Y=U;for(;;){if(Y===e)break t;if(z===a&&++N===u&&(x=g),z===h&&++H===o&&(T=g),(U=Y.nextSibling)!==null)break;Y=z,z=Y.parentNode}Y=U}a=x===-1||T===-1?null:{start:x,end:T}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nf={focusedElem:e,selectionRange:a},$c=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){switch(t=Ot,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)u=e[a],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,a=t,u=h.memoizedProps,h=h.memoizedState,o=a.stateNode;try{var re=pa(a.type,u);e=o.getSnapshotBeforeUpdate(re,h),o.__reactInternalSnapshotBeforeUpdate=e}catch(he){Fe(a,a.return,he)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Bf(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Bf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}}function Wg(e,t,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Ys(e,a),o&4&&Uo(5,a);break;case 1:if(Ys(e,a),o&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(g){Fe(a,a.return,g)}else{var u=pa(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Fe(a,a.return,g)}}o&64&&$g(a),o&512&&Oo(a,a.return);break;case 3:if(Ys(e,a),o&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Dp(e,t)}catch(g){Fe(a,a.return,g)}}break;case 27:t===null&&o&4&&Yg(a);case 26:case 5:Ys(e,a),t===null&&o&4&&Fg(a),o&512&&Oo(a,a.return);break;case 12:Ys(e,a);break;case 31:Ys(e,a),o&4&&Zg(e,a);break;case 13:Ys(e,a),o&4&&Jg(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=gS.bind(null,a),US(e,a))));break;case 22:if(o=a.memoizedState!==null||Fs,!o){t=t!==null&&t.memoizedState!==null||Tt,u=Fs;var h=Tt;Fs=o,(Tt=t)&&!h?Xs(e,a,(a.subtreeFlags&8772)!==0):Ys(e,a),Fs=u,Tt=h}break;case 30:break;default:Ys(e,a)}}function Kg(e){var t=e.alternate;t!==null&&(e.alternate=null,Kg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&$a(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var at=null,cn=!1;function Gs(e,t,a){for(a=a.child;a!==null;)Qg(e,t,a),a=a.sibling}function Qg(e,t,a){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(we,a)}catch{}switch(a.tag){case 26:Tt||xs(a,t),Gs(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Tt||xs(a,t);var o=at,u=cn;Ri(a.type)&&(at=a.stateNode,cn=!1),Gs(e,t,a),Go(a.stateNode),at=o,cn=u;break;case 5:Tt||xs(a,t);case 6:if(o=at,u=cn,at=null,Gs(e,t,a),at=o,cn=u,at!==null)if(cn)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(a.stateNode)}catch(h){Fe(a,t,h)}else try{at.removeChild(a.stateNode)}catch(h){Fe(a,t,h)}break;case 18:at!==null&&(cn?(e=at,$y(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Tr(e)):$y(at,a.stateNode));break;case 4:o=at,u=cn,at=a.stateNode.containerInfo,cn=!0,Gs(e,t,a),at=o,cn=u;break;case 0:case 11:case 14:case 15:Ci(2,a,t),Tt||Ci(4,a,t),Gs(e,t,a);break;case 1:Tt||(xs(a,t),o=a.stateNode,typeof o.componentWillUnmount=="function"&&qg(a,t,o)),Gs(e,t,a);break;case 21:Gs(e,t,a);break;case 22:Tt=(o=Tt)||a.memoizedState!==null,Gs(e,t,a),Tt=o;break;default:Gs(e,t,a)}}function Zg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Tr(e)}catch(a){Fe(t,t.return,a)}}}function Jg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Tr(e)}catch(a){Fe(t,t.return,a)}}function lS(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Xg),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Xg),t;default:throw Error(r(435,e.tag))}}function _c(e,t){var a=lS(e);t.forEach(function(o){if(!a.has(o)){a.add(o);var u=yS.bind(null,e,o);o.then(u,u)}})}function un(e,t){var a=t.deletions;if(a!==null)for(var o=0;o<a.length;o++){var u=a[o],h=e,g=t,x=g;e:for(;x!==null;){switch(x.tag){case 27:if(Ri(x.type)){at=x.stateNode,cn=!1;break e}break;case 5:at=x.stateNode,cn=!1;break e;case 3:case 4:at=x.stateNode.containerInfo,cn=!0;break e}x=x.return}if(at===null)throw Error(r(160));Qg(h,g,u),at=null,cn=!1,h=u.alternate,h!==null&&(h.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)ey(t,e),t=t.sibling}var Qn=null;function ey(e,t){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:un(t,e),dn(e),o&4&&(Ci(3,e,e.return),Uo(3,e),Ci(5,e,e.return));break;case 1:un(t,e),dn(e),o&512&&(Tt||a===null||xs(a,a.return)),o&64&&Fs&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var u=Qn;if(un(t,e),dn(e),o&512&&(Tt||a===null||xs(a,a.return)),o&4){var h=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){e:{o=e.type,a=e.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":h=u.getElementsByTagName("title")[0],(!h||h[Gi]||h[gt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=u.createElement(o),u.head.insertBefore(h,u.querySelector("head > title"))),Yt(h,o,a),h[gt]=e,wt(h),o=h;break e;case"link":var g=e0("link","href",u).get(o+(a.href||""));if(g){for(var x=0;x<g.length;x++)if(h=g[x],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(x,1);break t}}h=u.createElement(o),Yt(h,o,a),u.head.appendChild(h);break;case"meta":if(g=e0("meta","content",u).get(o+(a.content||""))){for(x=0;x<g.length;x++)if(h=g[x],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(x,1);break t}}h=u.createElement(o),Yt(h,o,a),u.head.appendChild(h);break;default:throw Error(r(468,o))}h[gt]=e,wt(h),o=h}e.stateNode=o}else t0(u,e.type,e.stateNode);else e.stateNode=Jy(u,o,e.memoizedProps);else h!==o?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,o===null?t0(u,e.type,e.stateNode):Jy(u,o,e.memoizedProps)):o===null&&e.stateNode!==null&&of(e,e.memoizedProps,a.memoizedProps)}break;case 27:un(t,e),dn(e),o&512&&(Tt||a===null||xs(a,a.return)),a!==null&&o&4&&of(e,e.memoizedProps,a.memoizedProps);break;case 5:if(un(t,e),dn(e),o&512&&(Tt||a===null||xs(a,a.return)),e.flags&32){u=e.stateNode;try{bt(u,"")}catch(re){Fe(e,e.return,re)}}o&4&&e.stateNode!=null&&(u=e.memoizedProps,of(e,u,a!==null?a.memoizedProps:u)),o&1024&&(uf=!0);break;case 6:if(un(t,e),dn(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(re){Fe(e,e.return,re)}}break;case 3:if(Ic=null,u=Qn,Qn=Oc(t.containerInfo),un(t,e),Qn=u,dn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Tr(t.containerInfo)}catch(re){Fe(e,e.return,re)}uf&&(uf=!1,ty(e));break;case 4:o=Qn,Qn=Oc(e.stateNode.containerInfo),un(t,e),dn(e),Qn=o;break;case 12:un(t,e),dn(e);break;case 31:un(t,e),dn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,_c(e,o)));break;case 13:un(t,e),dn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(jc=Ht()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,_c(e,o)));break;case 22:u=e.memoizedState!==null;var T=a!==null&&a.memoizedState!==null,N=Fs,H=Tt;if(Fs=N||u,Tt=H||T,un(t,e),Tt=H,Fs=N,dn(e),o&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(a===null||T||Fs||Tt||ga(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){T=a=t;try{if(h=T.stateNode,u)g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{x=T.stateNode;var Y=T.memoizedProps.style,z=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;x.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(re){Fe(T,T.return,re)}}}else if(t.tag===6){if(a===null){T=t;try{T.stateNode.nodeValue=u?"":T.memoizedProps}catch(re){Fe(T,T.return,re)}}}else if(t.tag===18){if(a===null){T=t;try{var U=T.stateNode;u?qy(U,!0):qy(T.stateNode,!1)}catch(re){Fe(T,T.return,re)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,_c(e,a))));break;case 19:un(t,e),dn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,_c(e,o)));break;case 30:break;case 21:break;default:un(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{for(var a,o=e.return;o!==null;){if(Gg(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var u=a.stateNode,h=lf(e);wc(e,h,u);break;case 5:var g=a.stateNode;a.flags&32&&(bt(g,""),a.flags&=-33);var x=lf(e);wc(e,x,g);break;case 3:case 4:var T=a.stateNode.containerInfo,N=lf(e);cf(e,N,T);break;default:throw Error(r(161))}}catch(H){Fe(e,e.return,H)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ty(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ty(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ys(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Wg(e,t.alternate,t),t=t.sibling}function ga(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ci(4,t,t.return),ga(t);break;case 1:xs(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&qg(t,t.return,a),ga(t);break;case 27:Go(t.stateNode);case 26:case 5:xs(t,t.return),ga(t);break;case 22:t.memoizedState===null&&ga(t);break;case 30:ga(t);break;default:ga(t)}e=e.sibling}}function Xs(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,u=e,h=t,g=h.flags;switch(h.tag){case 0:case 11:case 15:Xs(u,h,a),Uo(4,h);break;case 1:if(Xs(u,h,a),o=h,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(N){Fe(o,o.return,N)}if(o=h,u=o.updateQueue,u!==null){var x=o.stateNode;try{var T=u.shared.hiddenCallbacks;if(T!==null)for(u.shared.hiddenCallbacks=null,u=0;u<T.length;u++)Np(T[u],x)}catch(N){Fe(o,o.return,N)}}a&&g&64&&$g(h),Oo(h,h.return);break;case 27:Yg(h);case 26:case 5:Xs(u,h,a),a&&o===null&&g&4&&Fg(h),Oo(h,h.return);break;case 12:Xs(u,h,a);break;case 31:Xs(u,h,a),a&&g&4&&Zg(u,h);break;case 13:Xs(u,h,a),a&&g&4&&Jg(u,h);break;case 22:h.memoizedState===null&&Xs(u,h,a),Oo(h,h.return);break;case 30:break;default:Xs(u,h,a)}t=t.sibling}}function df(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&_o(a))}function ff(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_o(e))}function Zn(e,t,a,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ny(e,t,a,o),t=t.sibling}function ny(e,t,a,o){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Zn(e,t,a,o),u&2048&&Uo(9,t);break;case 1:Zn(e,t,a,o);break;case 3:Zn(e,t,a,o),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_o(e)));break;case 12:if(u&2048){Zn(e,t,a,o),e=t.stateNode;try{var h=t.memoizedProps,g=h.id,x=h.onPostCommit;typeof x=="function"&&x(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){Fe(t,t.return,T)}}else Zn(e,t,a,o);break;case 31:Zn(e,t,a,o);break;case 13:Zn(e,t,a,o);break;case 23:break;case 22:h=t.stateNode,g=t.alternate,t.memoizedState!==null?h._visibility&2?Zn(e,t,a,o):Lo(e,t):h._visibility&2?Zn(e,t,a,o):(h._visibility|=2,pr(e,t,a,o,(t.subtreeFlags&10256)!==0||!1)),u&2048&&df(g,t);break;case 24:Zn(e,t,a,o),u&2048&&ff(t.alternate,t);break;default:Zn(e,t,a,o)}}function pr(e,t,a,o,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,g=t,x=a,T=o,N=g.flags;switch(g.tag){case 0:case 11:case 15:pr(h,g,x,T,u),Uo(8,g);break;case 23:break;case 22:var H=g.stateNode;g.memoizedState!==null?H._visibility&2?pr(h,g,x,T,u):Lo(h,g):(H._visibility|=2,pr(h,g,x,T,u)),u&&N&2048&&df(g.alternate,g);break;case 24:pr(h,g,x,T,u),u&&N&2048&&ff(g.alternate,g);break;default:pr(h,g,x,T,u)}t=t.sibling}}function Lo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,o=t,u=o.flags;switch(o.tag){case 22:Lo(a,o),u&2048&&df(o.alternate,o);break;case 24:Lo(a,o),u&2048&&ff(o.alternate,o);break;default:Lo(a,o)}t=t.sibling}}var Io=8192;function gr(e,t,a){if(e.subtreeFlags&Io)for(e=e.child;e!==null;)sy(e,t,a),e=e.sibling}function sy(e,t,a){switch(e.tag){case 26:gr(e,t,a),e.flags&Io&&e.memoizedState!==null&&XS(a,Qn,e.memoizedState,e.memoizedProps);break;case 5:gr(e,t,a);break;case 3:case 4:var o=Qn;Qn=Oc(e.stateNode.containerInfo),gr(e,t,a),Qn=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Io,Io=16777216,gr(e,t,a),Io=o):gr(e,t,a));break;default:gr(e,t,a)}}function iy(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Po(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var o=t[a];Ot=o,ry(o,e)}iy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ay(e),e=e.sibling}function ay(e){switch(e.tag){case 0:case 11:case 15:Po(e),e.flags&2048&&Ci(9,e,e.return);break;case 3:Po(e);break;case 12:Po(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Cc(e)):Po(e);break;default:Po(e)}}function Cc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var o=t[a];Ot=o,ry(o,e)}iy(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ci(8,t,t.return),Cc(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Cc(t));break;default:Cc(t)}e=e.sibling}}function ry(e,t){for(;Ot!==null;){var a=Ot;switch(a.tag){case 0:case 11:case 15:Ci(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:_o(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ot=o;else e:for(a=e;Ot!==null;){o=Ot;var u=o.sibling,h=o.return;if(Kg(o),o===a){Ot=null;break e}if(u!==null){u.return=h,Ot=u;break e}Ot=h}}}var cS={getCacheForType:function(e){var t=Ft(_t),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Ft(_t).controller.signal}},uS=typeof WeakMap=="function"?WeakMap:Map,Pe=0,Ze=null,Me=null,Ne=0,qe=0,Sn=null,ji=!1,yr=!1,hf=!1,Ws=0,ft=0,Ti=0,ya=0,mf=0,wn=0,br=0,Ho=null,fn=null,pf=!1,jc=0,oy=0,Tc=1/0,Ec=null,Ei=null,Nt=0,Mi=null,vr=null,Ks=0,gf=0,yf=null,ly=null,Vo=0,bf=null;function _n(){return(Pe&2)!==0&&Ne!==0?Ne&-Ne:I.T!==null?Cf():Bu()}function cy(){if(wn===0)if((Ne&536870912)===0||ze){var e=ln;ln<<=1,(ln&3932160)===0&&(ln=262144),wn=e}else wn=536870912;return e=vn.current,e!==null&&(e.flags|=32),wn}function hn(e,t,a){(e===Ze&&(qe===2||qe===9)||e.cancelPendingCommit!==null)&&(xr(e,0),Ai(e,Ne,wn,!1)),ii(e,a),((Pe&2)===0||e!==Ze)&&(e===Ze&&((Pe&2)===0&&(ya|=a),ft===4&&Ai(e,Ne,wn,!1)),Ss(e))}function uy(e,t,a){if((Pe&6)!==0)throw Error(r(327));var o=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Fi(e,t),u=o?hS(e,t):xf(e,t,!0),h=o;do{if(u===0){yr&&!o&&Ai(e,t,0,!1);break}else{if(a=e.current.alternate,h&&!dS(a)){u=xf(e,t,!1),h=!1;continue}if(u===2){if(h=t,e.errorRecoveryDisabledLanes&h)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var x=e;u=Ho;var T=x.current.memoizedState.isDehydrated;if(T&&(xr(x,g).flags|=256),g=xf(x,g,!1),g!==2){if(hf&&!T){x.errorRecoveryDisabledLanes|=h,ya|=h,u=4;break e}h=fn,fn=u,h!==null&&(fn===null?fn=h:fn.push.apply(fn,h))}u=g}if(h=!1,u!==2)continue}}if(u===1){xr(e,0),Ai(e,t,0,!0);break}e:{switch(o=e,h=u,h){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:Ai(o,t,wn,!ji);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(u=jc+300-Ht(),10<u)){if(Ai(o,t,wn,!ji),Kr(o,0,!0)!==0)break e;Ks=t,o.timeoutHandle=Hy(dy.bind(null,o,a,fn,Ec,pf,t,wn,ya,br,ji,h,"Throttled",-0,0),u);break e}dy(o,a,fn,Ec,pf,t,wn,ya,br,ji,h,null,-0,0)}}break}while(!0);Ss(e)}function dy(e,t,a,o,u,h,g,x,T,N,H,Y,z,U){if(e.timeoutHandle=-1,Y=t.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nn},sy(t,h,Y);var re=(h&62914560)===h?jc-Ht():(h&4194048)===h?oy-Ht():0;if(re=WS(Y,re),re!==null){Ks=h,e.cancelPendingCommit=re(vy.bind(null,e,t,h,a,o,u,g,x,T,H,Y,null,z,U)),Ai(e,h,g,!N);return}}vy(e,t,h,a,o,u,g,x,T)}function dS(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var u=a[o],h=u.getSnapshot;u=u.value;try{if(!yn(h(),u))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ai(e,t,a,o){t&=~mf,t&=~ya,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var u=t;0<u;){var h=31-pt(u),g=1<<h;o[h]=-1,u&=~g}a!==0&&Pa(e,a,t)}function Mc(){return(Pe&6)===0?($o(0),!1):!0}function vf(){if(Me!==null){if(qe===0)var e=Me.return;else e=Me,Is=la=null,zd(e),ur=null,jo=0,e=Me;for(;e!==null;)Vg(e.alternate,e),e=e.return;Me=null}}function xr(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,RS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ks=0,vf(),Ze=e,Me=a=Os(e.current,null),Ne=t,qe=0,Sn=null,ji=!1,yr=Fi(e,t),hf=!1,br=wn=mf=ya=Ti=ft=0,fn=Ho=null,pf=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var u=31-pt(o),h=1<<u;t|=e[u],o&=~h}return Ws=t,Wl(),a}function fy(e,t){ve=null,I.H=Do,t===cr||t===sc?(t=Mp(),qe=3):t===wd?(t=Mp(),qe=4):qe=t===Kd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Sn=t,Me===null&&(ft=1,yc(e,On(t,e.current)))}function hy(){var e=vn.current;return e===null?!0:(Ne&4194048)===Ne?Hn===null:(Ne&62914560)===Ne||(Ne&536870912)!==0?e===Hn:!1}function my(){var e=I.H;return I.H=Do,e===null?Do:e}function py(){var e=I.A;return I.A=cS,e}function Ac(){ft=4,ji||(Ne&4194048)!==Ne&&vn.current!==null||(yr=!0),(Ti&134217727)===0&&(ya&134217727)===0||Ze===null||Ai(Ze,Ne,wn,!1)}function xf(e,t,a){var o=Pe;Pe|=2;var u=my(),h=py();(Ze!==e||Ne!==t)&&(Ec=null,xr(e,t)),t=!1;var g=ft;e:do try{if(qe!==0&&Me!==null){var x=Me,T=Sn;switch(qe){case 8:vf(),g=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(t=!0);var N=qe;if(qe=0,Sn=null,Sr(e,x,T,N),a&&yr){g=0;break e}break;default:N=qe,qe=0,Sn=null,Sr(e,x,T,N)}}fS(),g=ft;break}catch(H){fy(e,H)}while(!0);return t&&e.shellSuspendCounter++,Is=la=null,Pe=o,I.H=u,I.A=h,Me===null&&(Ze=null,Ne=0,Wl()),g}function fS(){for(;Me!==null;)gy(Me)}function hS(e,t){var a=Pe;Pe|=2;var o=my(),u=py();Ze!==e||Ne!==t?(Ec=null,Tc=Ht()+500,xr(e,t)):yr=Fi(e,t);e:do try{if(qe!==0&&Me!==null){t=Me;var h=Sn;t:switch(qe){case 1:qe=0,Sn=null,Sr(e,t,h,1);break;case 2:case 9:if(Tp(h)){qe=0,Sn=null,yy(t);break}t=function(){qe!==2&&qe!==9||Ze!==e||(qe=7),Ss(e)},h.then(t,t);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:Tp(h)?(qe=0,Sn=null,yy(t)):(qe=0,Sn=null,Sr(e,t,h,7));break;case 5:var g=null;switch(Me.tag){case 26:g=Me.memoizedState;case 5:case 27:var x=Me;if(g?n0(g):x.stateNode.complete){qe=0,Sn=null;var T=x.sibling;if(T!==null)Me=T;else{var N=x.return;N!==null?(Me=N,kc(N)):Me=null}break t}}qe=0,Sn=null,Sr(e,t,h,5);break;case 6:qe=0,Sn=null,Sr(e,t,h,6);break;case 8:vf(),ft=6;break e;default:throw Error(r(462))}}mS();break}catch(H){fy(e,H)}while(!0);return Is=la=null,I.H=o,I.A=u,Pe=a,Me!==null?0:(Ze=null,Ne=0,Wl(),ft)}function mS(){for(;Me!==null&&!Xr();)gy(Me)}function gy(e){var t=Pg(e.alternate,e,Ws);e.memoizedProps=e.pendingProps,t===null?kc(e):Me=t}function yy(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=zg(a,t,t.pendingProps,t.type,void 0,Ne);break;case 11:t=zg(a,t,t.pendingProps,t.type.render,t.ref,Ne);break;case 5:zd(t);default:Vg(a,t),t=Me=pp(t,Ws),t=Pg(a,t,Ws)}e.memoizedProps=e.pendingProps,t===null?kc(e):Me=t}function Sr(e,t,a,o){Is=la=null,zd(t),ur=null,jo=0;var u=t.return;try{if(nS(e,u,t,a,Ne)){ft=1,yc(e,On(a,e.current)),Me=null;return}}catch(h){if(u!==null)throw Me=u,h;ft=1,yc(e,On(a,e.current)),Me=null;return}t.flags&32768?(ze||o===1?e=!0:yr||(Ne&536870912)!==0?e=!1:(ji=e=!0,(o===2||o===9||o===3||o===6)&&(o=vn.current,o!==null&&o.tag===13&&(o.flags|=16384))),by(t,e)):kc(t)}function kc(e){var t=e;do{if((t.flags&32768)!==0){by(t,ji);return}e=t.return;var a=aS(t.alternate,t,Ws);if(a!==null){Me=a;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);ft===0&&(ft=5)}function by(e,t){do{var a=rS(e.alternate,e);if(a!==null){a.flags&=32767,Me=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Me=e;return}Me=e=a}while(e!==null);ft=6,Me=null}function vy(e,t,a,o,u,h,g,x,T){e.cancelPendingCommit=null;do Rc();while(Nt!==0);if((Pe&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(h=t.lanes|t.childLanes,h|=od,Qm(e,a,h,g,x,T),e===Ze&&(Me=Ze=null,Ne=0),vr=t,Mi=e,Ks=a,gf=h,yf=u,ly=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,bS(si,function(){return Cy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=I.T,I.T=null,u=Z.p,Z.p=2,g=Pe,Pe|=4;try{oS(e,t,a)}finally{Pe=g,Z.p=u,I.T=o}}Nt=1,xy(),Sy(),wy()}}function xy(){if(Nt===1){Nt=0;var e=Mi,t=vr,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=I.T,I.T=null;var o=Z.p;Z.p=2;var u=Pe;Pe|=4;try{ey(t,e);var h=Nf,g=rp(e.containerInfo),x=h.focusedElem,T=h.selectionRange;if(g!==x&&x&&x.ownerDocument&&ap(x.ownerDocument.documentElement,x)){if(T!==null&&nd(x)){var N=T.start,H=T.end;if(H===void 0&&(H=N),"selectionStart"in x)x.selectionStart=N,x.selectionEnd=Math.min(H,x.value.length);else{var Y=x.ownerDocument||document,z=Y&&Y.defaultView||window;if(z.getSelection){var U=z.getSelection(),re=x.textContent.length,he=Math.min(T.start,re),Ke=T.end===void 0?he:Math.min(T.end,re);!U.extend&&he>Ke&&(g=Ke,Ke=he,he=g);var k=ip(x,he),M=ip(x,Ke);if(k&&M&&(U.rangeCount!==1||U.anchorNode!==k.node||U.anchorOffset!==k.offset||U.focusNode!==M.node||U.focusOffset!==M.offset)){var R=Y.createRange();R.setStart(k.node,k.offset),U.removeAllRanges(),he>Ke?(U.addRange(R),U.extend(M.node,M.offset)):(R.setEnd(M.node,M.offset),U.addRange(R))}}}}for(Y=[],U=x;U=U.parentNode;)U.nodeType===1&&Y.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<Y.length;x++){var $=Y[x];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}$c=!!Rf,Nf=Rf=null}finally{Pe=u,Z.p=o,I.T=a}}e.current=t,Nt=2}}function Sy(){if(Nt===2){Nt=0;var e=Mi,t=vr,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=I.T,I.T=null;var o=Z.p;Z.p=2;var u=Pe;Pe|=4;try{Wg(e,t.alternate,t)}finally{Pe=u,Z.p=o,I.T=a}}Nt=3}}function wy(){if(Nt===4||Nt===3){Nt=0,Wr();var e=Mi,t=vr,a=Ks,o=ly;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Nt=5:(Nt=0,vr=Mi=null,_y(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Ei=null),Ha(a),t=t.stateNode,Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(we,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=I.T,u=Z.p,Z.p=2,I.T=null;try{for(var h=e.onRecoverableError,g=0;g<o.length;g++){var x=o[g];h(x.value,{componentStack:x.stack})}}finally{I.T=t,Z.p=u}}(Ks&3)!==0&&Rc(),Ss(e),u=e.pendingLanes,(a&261930)!==0&&(u&42)!==0?e===bf?Vo++:(Vo=0,bf=e):Vo=0,$o(0)}}function _y(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,_o(t)))}function Rc(){return xy(),Sy(),wy(),Cy()}function Cy(){if(Nt!==5)return!1;var e=Mi,t=gf;gf=0;var a=Ha(Ks),o=I.T,u=Z.p;try{Z.p=32>a?32:a,I.T=null,a=yf,yf=null;var h=Mi,g=Ks;if(Nt=0,vr=Mi=null,Ks=0,(Pe&6)!==0)throw Error(r(331));var x=Pe;if(Pe|=4,ay(h.current),ny(h,h.current,g,a),Pe=x,$o(0,!1),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(we,h)}catch{}return!0}finally{Z.p=u,I.T=o,_y(e,t)}}function jy(e,t,a){t=On(a,t),t=Wd(e.stateNode,t,2),e=Si(e,t,2),e!==null&&(ii(e,2),Ss(e))}function Fe(e,t,a){if(e.tag===3)jy(e,e,a);else for(;t!==null;){if(t.tag===3){jy(t,e,a);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ei===null||!Ei.has(o))){e=On(a,e),a=Tg(2),o=Si(t,a,2),o!==null&&(Eg(a,o,t,e),ii(o,2),Ss(o));break}}t=t.return}}function Sf(e,t,a){var o=e.pingCache;if(o===null){o=e.pingCache=new uS;var u=new Set;o.set(t,u)}else u=o.get(t),u===void 0&&(u=new Set,o.set(t,u));u.has(a)||(hf=!0,u.add(a),e=pS.bind(null,e,t,a),t.then(e,e))}function pS(e,t,a){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ze===e&&(Ne&a)===a&&(ft===4||ft===3&&(Ne&62914560)===Ne&&300>Ht()-jc?(Pe&2)===0&&xr(e,0):mf|=a,br===Ne&&(br=0)),Ss(e)}function Ty(e,t){t===0&&(t=Qr()),e=aa(e,t),e!==null&&(ii(e,t),Ss(e))}function gS(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Ty(e,a)}function yS(e,t){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(t),Ty(e,a)}function bS(e,t){return lt(e,t)}var Nc=null,wr=null,wf=!1,Dc=!1,_f=!1,ki=0;function Ss(e){e!==wr&&e.next===null&&(wr===null?Nc=wr=e:wr=wr.next=e),Dc=!0,wf||(wf=!0,xS())}function $o(e,t){if(!_f&&Dc){_f=!0;do for(var a=!1,o=Nc;o!==null;){if(e!==0){var u=o.pendingLanes;if(u===0)var h=0;else{var g=o.suspendedLanes,x=o.pingedLanes;h=(1<<31-pt(42|e)+1)-1,h&=u&~(g&~x),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,ky(o,h))}else h=Ne,h=Kr(o,o===Ze?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||Fi(o,h)||(a=!0,ky(o,h));o=o.next}while(a);_f=!1}}function vS(){Ey()}function Ey(){Dc=wf=!1;var e=0;ki!==0&&kS()&&(e=ki);for(var t=Ht(),a=null,o=Nc;o!==null;){var u=o.next,h=My(o,t);h===0?(o.next=null,a===null?Nc=u:a.next=u,u===null&&(wr=a)):(a=o,(e!==0||(h&3)!==0)&&(Dc=!0)),o=u}Nt!==0&&Nt!==5||$o(e),ki!==0&&(ki=0)}function My(e,t){for(var a=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var g=31-pt(h),x=1<<g,T=u[g];T===-1?((x&a)===0||(x&o)!==0)&&(u[g]=Km(x,t)):T<=t&&(e.expiredLanes|=x),h&=~x}if(t=Ze,a=Ne,a=Kr(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===t&&(qe===2||qe===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&kn(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Fi(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(o!==null&&kn(o),Ha(a)){case 2:case 8:a=os;break;case 32:a=si;break;case 268435456:a=La;break;default:a=si}return o=Ay.bind(null,e),a=lt(a,o),e.callbackPriority=t,e.callbackNode=a,t}return o!==null&&o!==null&&kn(o),e.callbackPriority=2,e.callbackNode=null,2}function Ay(e,t){if(Nt!==0&&Nt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Rc()&&e.callbackNode!==a)return null;var o=Ne;return o=Kr(e,e===Ze?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(uy(e,o,t),My(e,Ht()),e.callbackNode!=null&&e.callbackNode===a?Ay.bind(null,e):null)}function ky(e,t){if(Rc())return null;uy(e,t,!0)}function xS(){NS(function(){(Pe&6)!==0?lt(Oa,vS):Ey()})}function Cf(){if(ki===0){var e=or;e===0&&(e=Ia,Ia<<=1,(Ia&261888)===0&&(Ia=256)),ki=e}return ki}function Ry(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Qi(""+e)}function Ny(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function SS(e,t,a,o,u){if(t==="submit"&&a&&a.stateNode===u){var h=Ry((u[Vt]||null).action),g=o.submitter;g&&(t=(t=g[Vt]||null)?Ry(t.formAction):g.getAttribute("formAction"),t!==null&&(h=t,g=null));var x=new Ka("action","action",null,o,u);e.push({event:x,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ki!==0){var T=g?Ny(u,g):new FormData(u);$d(a,{pending:!0,data:T,method:u.method,action:h},null,T)}}else typeof h=="function"&&(x.preventDefault(),T=g?Ny(u,g):new FormData(u),$d(a,{pending:!0,data:T,method:u.method,action:h},h,T))},currentTarget:u}]})}}for(var jf=0;jf<rd.length;jf++){var Tf=rd[jf],wS=Tf.toLowerCase(),_S=Tf[0].toUpperCase()+Tf.slice(1);Kn(wS,"on"+_S)}Kn(cp,"onAnimationEnd"),Kn(up,"onAnimationIteration"),Kn(dp,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(I1,"onTransitionRun"),Kn(P1,"onTransitionStart"),Kn(H1,"onTransitionCancel"),Kn(fp,"onTransitionEnd"),oi("onMouseEnter",["mouseout","mouseover"]),oi("onMouseLeave",["mouseout","mouseover"]),oi("onPointerEnter",["pointerout","pointerover"]),oi("onPointerLeave",["pointerout","pointerover"]),Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qo));function Dy(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],u=o.event;o=o.listeners;e:{var h=void 0;if(t)for(var g=o.length-1;0<=g;g--){var x=o[g],T=x.instance,N=x.currentTarget;if(x=x.listener,T!==h&&u.isPropagationStopped())break e;h=x,u.currentTarget=N;try{h(u)}catch(H){Xl(H)}u.currentTarget=null,h=T}else for(g=0;g<o.length;g++){if(x=o[g],T=x.instance,N=x.currentTarget,x=x.listener,T!==h&&u.isPropagationStopped())break e;h=x,u.currentTarget=N;try{h(u)}catch(H){Xl(H)}u.currentTarget=null,h=T}}}}function Ae(e,t){var a=t[Va];a===void 0&&(a=t[Va]=new Set);var o=e+"__bubble";a.has(o)||(zy(t,e,2,!1),a.add(o))}function Ef(e,t,a){var o=0;t&&(o|=4),zy(a,e,o,t)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Mf(e){if(!e[zc]){e[zc]=!0,Bl.forEach(function(a){a!=="selectionchange"&&(CS.has(a)||Ef(a,!1,e),Ef(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zc]||(t[zc]=!0,Ef("selectionchange",!1,t))}}function zy(e,t,a,o){switch(c0(t)){case 2:var u=ZS;break;case 8:u=JS;break;default:u=$f}a=u.bind(null,t,a,e),u=void 0,!ms||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(t,a,{capture:!0,passive:u}):e.addEventListener(t,a,!0):u!==void 0?e.addEventListener(t,a,{passive:u}):e.addEventListener(t,a,!1)}function Af(e,t,a,o,u){var h=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var x=o.stateNode.containerInfo;if(x===u)break;if(g===4)for(g=o.return;g!==null;){var T=g.tag;if((T===3||T===4)&&g.stateNode.containerInfo===u)return;g=g.return}for(;x!==null;){if(g=ks(x),g===null)return;if(T=g.tag,T===5||T===6||T===26||T===27){o=h=g;continue e}x=x.parentNode}}o=o.return}co(function(){var N=h,H=Rt(a),Y=[];e:{var z=hp.get(e);if(z!==void 0){var U=Ka,re=e;switch(e){case"keypress":if(Ji(a)===0)break e;case"keydown":case"keyup":U=ql;break;case"focusin":re="focus",U=ho;break;case"focusout":re="blur",U=ho;break;case"beforeblur":case"afterblur":U=ho;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=Pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=Ou;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=Yu;break;case cp:case up:case dp:U=Lu;break;case fp:U=Wu;break;case"scroll":case"scrollend":U=Uu;break;case"wheel":U=Bn;break;case"copy":case"cut":case"paste":U=ea;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Fl;break;case"toggle":case"beforetoggle":U=Qu}var he=(t&4)!==0,Ke=!he&&(e==="scroll"||e==="scrollend"),k=he?z!==null?z+"Capture":null:z;he=[];for(var M=N,R;M!==null;){var $=M;if(R=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||R===null||k===null||($=hs(M,k),$!=null&&he.push(Fo(M,$,R))),Ke)break;M=M.return}0<he.length&&(z=new U(z,re,null,a,H),Y.push({event:z,listeners:he}))}}if((t&7)===0){e:{if(z=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",z&&a!==Ya&&(re=a.relatedTarget||a.fromElement)&&(ks(re)||re[As]))break e;if((U||z)&&(z=H.window===H?H:(z=H.ownerDocument)?z.defaultView||z.parentWindow:window,U?(re=a.relatedTarget||a.toElement,U=N,re=re?ks(re):null,re!==null&&(Ke=d(re),he=re.tag,re!==Ke||he!==5&&he!==27&&he!==6)&&(re=null)):(U=null,re=N),U!==re)){if(he=Pl,$="onMouseLeave",k="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(he=Fl,$="onPointerLeave",k="onPointerEnter",M="pointer"),Ke=U==null?z:ri(U),R=re==null?z:ri(re),z=new he($,M+"leave",U,a,H),z.target=Ke,z.relatedTarget=R,$=null,ks(H)===N&&(he=new he(k,M+"enter",re,a,H),he.target=R,he.relatedTarget=Ke,$=he),Ke=$,U&&re)t:{for(he=jS,k=U,M=re,R=0,$=k;$;$=he($))R++;$=0;for(var ce=M;ce;ce=he(ce))$++;for(;0<R-$;)k=he(k),R--;for(;0<$-R;)M=he(M),$--;for(;R--;){if(k===M||M!==null&&k===M.alternate){he=k;break t}k=he(k),M=he(M)}he=null}else he=null;U!==null&&By(Y,z,U,he,!1),re!==null&&Ke!==null&&By(Y,Ke,re,he,!0)}}e:{if(z=N?ri(N):window,U=z.nodeName&&z.nodeName.toLowerCase(),U==="select"||U==="input"&&z.type==="file")var Oe=Zm;else if(ys(z))if(Jm)Oe=U1;else{Oe=z1;var oe=D1}else U=z.nodeName,!U||U.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?N&&Ga(N.elementType)&&(Oe=Zm):Oe=B1;if(Oe&&(Oe=Oe(e,N))){go(Y,Oe,a,H);break e}oe&&oe(e,z,N),e==="focusout"&&N&&z.type==="number"&&N.memoizedProps.value!=null&&ui(z,"number",z.value)}switch(oe=N?ri(N):window,e){case"focusin":(ys(oe)||oe.contentEditable==="true")&&(Ja=oe,sd=N,xo=null);break;case"focusout":xo=sd=Ja=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,op(Y,a,H);break;case"selectionchange":if(L1)break;case"keydown":case"keyup":op(Y,a,H)}var _e;if(po)e:{switch(e){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Be?me(e,a)&&(De="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(S&&a.locale!=="ko"&&(Be||De!=="onCompositionStart"?De==="onCompositionEnd"&&Be&&(_e=Ll()):(zn=H,Xa="value"in zn?zn.value:zn.textContent,Be=!0)),oe=Bc(N,De),0<oe.length&&(De=new $l(De,e,null,a,H),Y.push({event:De,listeners:oe}),_e?De.data=_e:(_e=$e(a),_e!==null&&(De.data=_e)))),(_e=Ju?gs(e,a):na(e,a))&&(De=Bc(N,"onBeforeInput"),0<De.length&&(oe=new $l("onBeforeInput","beforeinput",null,a,H),Y.push({event:oe,listeners:De}),oe.data=_e)),SS(Y,e,N,a,H)}Dy(Y,t)})}function Fo(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Bc(e,t){for(var a=t+"Capture",o=[];e!==null;){var u=e,h=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||h===null||(u=hs(e,a),u!=null&&o.unshift(Fo(e,u,h)),u=hs(e,t),u!=null&&o.push(Fo(e,u,h))),e.tag===3)return o;e=e.return}return[]}function jS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function By(e,t,a,o,u){for(var h=t._reactName,g=[];a!==null&&a!==o;){var x=a,T=x.alternate,N=x.stateNode;if(x=x.tag,T!==null&&T===o)break;x!==5&&x!==26&&x!==27||N===null||(T=N,u?(N=hs(a,h),N!=null&&g.unshift(Fo(a,N,T))):u||(N=hs(a,h),N!=null&&g.push(Fo(a,N,T)))),a=a.return}g.length!==0&&e.push({event:t,listeners:g})}var TS=/\r\n?/g,ES=/\u0000|\uFFFD/g;function Uy(e){return(typeof e=="string"?e:""+e).replace(TS,`
`).replace(ES,"")}function Oy(e,t){return t=Uy(t),Uy(e)===t}function We(e,t,a,o,u,h){switch(a){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||bt(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&bt(e,""+o);break;case"className":ds(e,"class",o);break;case"tabIndex":ds(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ds(e,a,o);break;case"style":oo(e,o,h);break;case"data":if(t!=="object"){ds(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Qi(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(t!=="input"&&We(e,t,"name",u.name,u,null),We(e,t,"formEncType",u.formEncType,u,null),We(e,t,"formMethod",u.formMethod,u,null),We(e,t,"formTarget",u.formTarget,u,null)):(We(e,t,"encType",u.encType,u,null),We(e,t,"method",u.method,u,null),We(e,t,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Qi(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=Nn);break;case"onScroll":o!=null&&Ae("scroll",e);break;case"onScrollEnd":o!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(u.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Qi(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),Xi(e,"popover",o);break;case"xlinkActuate":Rn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Rn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Rn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Rn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Rn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Rn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Xi(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ul.get(a)||a,Xi(e,a,o))}}function kf(e,t,a,o,u,h){switch(a){case"style":oo(e,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(u.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof o=="string"?bt(e,o):(typeof o=="number"||typeof o=="bigint")&&bt(e,""+o);break;case"onScroll":o!=null&&Ae("scroll",e);break;case"onScrollEnd":o!=null&&Ae("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Nn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!no.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),t=a.slice(2,u?a.length-7:void 0),h=e[Vt]||null,h=h!=null?h[a]:null,typeof h=="function"&&e.removeEventListener(t,h,u),typeof o=="function")){typeof h!="function"&&h!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,o,u);break e}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Xi(e,a,o)}}}function Yt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var o=!1,u=!1,h;for(h in a)if(a.hasOwnProperty(h)){var g=a[h];if(g!=null)switch(h){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:We(e,t,h,g,a,null)}}u&&We(e,t,"srcSet",a.srcSet,a,null),o&&We(e,t,"src",a.src,a,null);return;case"input":Ae("invalid",e);var x=h=g=u=null,T=null,N=null;for(o in a)if(a.hasOwnProperty(o)){var H=a[o];if(H!=null)switch(o){case"name":u=H;break;case"type":g=H;break;case"checked":T=H;break;case"defaultChecked":N=H;break;case"value":h=H;break;case"defaultValue":x=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,t));break;default:We(e,t,o,H,a,null)}}ro(e,h,x,T,N,g,u,!1);return;case"select":Ae("invalid",e),o=g=h=null;for(u in a)if(a.hasOwnProperty(u)&&(x=a[u],x!=null))switch(u){case"value":h=x;break;case"defaultValue":g=x;break;case"multiple":o=x;default:We(e,t,u,x,a,null)}t=h,a=g,e.multiple=!!o,t!=null?Ds(e,!!o,t,!1):a!=null&&Ds(e,!!o,a,!0);return;case"textarea":Ae("invalid",e),h=u=o=null;for(g in a)if(a.hasOwnProperty(g)&&(x=a[g],x!=null))switch(g){case"value":o=x;break;case"defaultValue":u=x;break;case"children":h=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:We(e,t,g,x,a,null)}Wi(e,o,u,h);return;case"option":for(T in a)if(a.hasOwnProperty(T)&&(o=a[T],o!=null))switch(T){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:We(e,t,T,o,a,null)}return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(o=0;o<qo.length;o++)Ae(qo[o],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(N in a)if(a.hasOwnProperty(N)&&(o=a[N],o!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:We(e,t,N,o,a,null)}return;default:if(Ga(t)){for(H in a)a.hasOwnProperty(H)&&(o=a[H],o!==void 0&&kf(e,t,H,o,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(o=a[x],o!=null&&We(e,t,x,o,a,null))}function MS(e,t,a,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,h=null,g=null,x=null,T=null,N=null,H=null;for(U in a){var Y=a[U];if(a.hasOwnProperty(U)&&Y!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":T=Y;default:o.hasOwnProperty(U)||We(e,t,U,null,o,Y)}}for(var z in o){var U=o[z];if(Y=a[z],o.hasOwnProperty(z)&&(U!=null||Y!=null))switch(z){case"type":h=U;break;case"name":u=U;break;case"checked":N=U;break;case"defaultChecked":H=U;break;case"value":g=U;break;case"defaultValue":x=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(137,t));break;default:U!==Y&&We(e,t,z,U,o,Y)}}ci(e,g,x,T,N,H,h,u);return;case"select":U=g=x=z=null;for(h in a)if(T=a[h],a.hasOwnProperty(h)&&T!=null)switch(h){case"value":break;case"multiple":U=T;default:o.hasOwnProperty(h)||We(e,t,h,null,o,T)}for(u in o)if(h=o[u],T=a[u],o.hasOwnProperty(u)&&(h!=null||T!=null))switch(u){case"value":z=h;break;case"defaultValue":x=h;break;case"multiple":g=h;default:h!==T&&We(e,t,u,h,o,T)}t=x,a=g,o=U,z!=null?Ds(e,!!a,z,!1):!!o!=!!a&&(t!=null?Ds(e,!!a,t,!0):Ds(e,!!a,a?[]:"",!1));return;case"textarea":U=z=null;for(x in a)if(u=a[x],a.hasOwnProperty(x)&&u!=null&&!o.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:We(e,t,x,null,o,u)}for(g in o)if(u=o[g],h=a[g],o.hasOwnProperty(g)&&(u!=null||h!=null))switch(g){case"value":z=u;break;case"defaultValue":U=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(r(91));break;default:u!==h&&We(e,t,g,u,o,h)}Te(e,z,U);return;case"option":for(var re in a)if(z=a[re],a.hasOwnProperty(re)&&z!=null&&!o.hasOwnProperty(re))switch(re){case"selected":e.selected=!1;break;default:We(e,t,re,null,o,z)}for(T in o)if(z=o[T],U=a[T],o.hasOwnProperty(T)&&z!==U&&(z!=null||U!=null))switch(T){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:We(e,t,T,z,o,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var he in a)z=a[he],a.hasOwnProperty(he)&&z!=null&&!o.hasOwnProperty(he)&&We(e,t,he,null,o,z);for(N in o)if(z=o[N],U=a[N],o.hasOwnProperty(N)&&z!==U&&(z!=null||U!=null))switch(N){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,t));break;default:We(e,t,N,z,o,U)}return;default:if(Ga(t)){for(var Ke in a)z=a[Ke],a.hasOwnProperty(Ke)&&z!==void 0&&!o.hasOwnProperty(Ke)&&kf(e,t,Ke,void 0,o,z);for(H in o)z=o[H],U=a[H],!o.hasOwnProperty(H)||z===U||z===void 0&&U===void 0||kf(e,t,H,z,o,U);return}}for(var k in a)z=a[k],a.hasOwnProperty(k)&&z!=null&&!o.hasOwnProperty(k)&&We(e,t,k,null,o,z);for(Y in o)z=o[Y],U=a[Y],!o.hasOwnProperty(Y)||z===U||z==null&&U==null||We(e,t,Y,z,o,U)}function Ly(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var u=a[o],h=u.transferSize,g=u.initiatorType,x=u.duration;if(h&&x&&Ly(g)){for(g=0,x=u.responseEnd,o+=1;o<a.length;o++){var T=a[o],N=T.startTime;if(N>x)break;var H=T.transferSize,Y=T.initiatorType;H&&Ly(Y)&&(T=T.responseEnd,g+=H*(T<x?1:(x-N)/(T-N)))}if(--o,t+=8*(h+g)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Rf=null,Nf=null;function Uc(e){return e.nodeType===9?e:e.ownerDocument}function Iy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Py(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Df(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zf=null;function kS(){var e=window.event;return e&&e.type==="popstate"?e===zf?!1:(zf=e,!0):(zf=null,!1)}var Hy=typeof setTimeout=="function"?setTimeout:void 0,RS=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,NS=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(e){return Vy.resolve(null).then(e).catch(DS)}:Hy;function DS(e){setTimeout(function(){throw e})}function Ri(e){return e==="head"}function $y(e,t){var a=t,o=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(u),Tr(t);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Go(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Go(a);for(var h=a.firstChild;h;){var g=h.nextSibling,x=h.nodeName;h[Gi]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&h.rel.toLowerCase()==="stylesheet"||a.removeChild(h),h=g}}else a==="body"&&Go(e.ownerDocument.body);a=u}while(a);Tr(t)}function qy(e,t){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function Bf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Bf(a),$a(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function zS(e,t,a,o){for(;e.nodeType===1;){var u=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Gi])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Vn(e.nextSibling),e===null)break}return null}function BS(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Vn(e.nextSibling),e===null))return null;return e}function Fy(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Vn(e.nextSibling),e===null))return null;return e}function Uf(e){return e.data==="$?"||e.data==="$~"}function Of(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function US(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var o=function(){t(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Vn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Lf=null;function Gy(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Vn(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Yy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Xy(e,t,a){switch(t=Uc(a),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Go(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);$a(e)}var $n=new Map,Wy=new Set;function Oc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Qs=Z.d;Z.d={f:OS,r:LS,D:IS,C:PS,L:HS,m:VS,X:qS,S:$S,M:FS};function OS(){var e=Qs.f(),t=Mc();return e||t}function LS(e){var t=ai(e);t!==null&&t.tag===5&&t.type==="form"?fg(t):Qs.r(e)}var _r=typeof document>"u"?null:document;function Ky(e,t,a){var o=_r;if(o&&typeof t=="string"&&t){var u=Qt(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),Wy.has(u)||(Wy.add(u),e={rel:e,crossOrigin:a,href:t},o.querySelector(u)===null&&(t=o.createElement("link"),Yt(t,"link",e),wt(t),o.head.appendChild(t)))}}function IS(e){Qs.D(e),Ky("dns-prefetch",e,null)}function PS(e,t){Qs.C(e,t),Ky("preconnect",e,t)}function HS(e,t,a){Qs.L(e,t,a);var o=_r;if(o&&e&&t){var u='link[rel="preload"][as="'+Qt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+Qt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+Qt(a.imageSizes)+'"]')):u+='[href="'+Qt(e)+'"]';var h=u;switch(t){case"style":h=Cr(e);break;case"script":h=jr(e)}$n.has(h)||(e=v({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),$n.set(h,e),o.querySelector(u)!==null||t==="style"&&o.querySelector(Yo(h))||t==="script"&&o.querySelector(Xo(h))||(t=o.createElement("link"),Yt(t,"link",e),wt(t),o.head.appendChild(t)))}}function VS(e,t){Qs.m(e,t);var a=_r;if(a&&e){var o=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+Qt(o)+'"][href="'+Qt(e)+'"]',h=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=jr(e)}if(!$n.has(h)&&(e=v({rel:"modulepreload",href:e},t),$n.set(h,e),a.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Xo(h)))return}o=a.createElement("link"),Yt(o,"link",e),wt(o),a.head.appendChild(o)}}}function $S(e,t,a){Qs.S(e,t,a);var o=_r;if(o&&e){var u=Rs(o).hoistableStyles,h=Cr(e);t=t||"default";var g=u.get(h);if(!g){var x={loading:0,preload:null};if(g=o.querySelector(Yo(h)))x.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},a),(a=$n.get(h))&&If(e,a);var T=g=o.createElement("link");wt(T),Yt(T,"link",e),T._p=new Promise(function(N,H){T.onload=N,T.onerror=H}),T.addEventListener("load",function(){x.loading|=1}),T.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Lc(g,t,o)}g={type:"stylesheet",instance:g,count:1,state:x},u.set(h,g)}}}function qS(e,t){Qs.X(e,t);var a=_r;if(a&&e){var o=Rs(a).hoistableScripts,u=jr(e),h=o.get(u);h||(h=a.querySelector(Xo(u)),h||(e=v({src:e,async:!0},t),(t=$n.get(u))&&Pf(e,t),h=a.createElement("script"),wt(h),Yt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(u,h))}}function FS(e,t){Qs.M(e,t);var a=_r;if(a&&e){var o=Rs(a).hoistableScripts,u=jr(e),h=o.get(u);h||(h=a.querySelector(Xo(u)),h||(e=v({src:e,async:!0,type:"module"},t),(t=$n.get(u))&&Pf(e,t),h=a.createElement("script"),wt(h),Yt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(u,h))}}function Qy(e,t,a,o){var u=(u=rn.current)?Oc(u):null;if(!u)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Cr(a.href),a=Rs(u).hoistableStyles,o=a.get(t),o||(o={type:"style",instance:null,count:0,state:null},a.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Cr(a.href);var h=Rs(u).hoistableStyles,g=h.get(e);if(g||(u=u.ownerDocument||u,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,g),(h=u.querySelector(Yo(e)))&&!h._p&&(g.instance=h,g.state.loading=5),$n.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},$n.set(e,a),h||GS(u,e,a,g.state))),t&&o===null)throw Error(r(528,""));return g}if(t&&o!==null)throw Error(r(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=jr(a),a=Rs(u).hoistableScripts,o=a.get(t),o||(o={type:"script",instance:null,count:0,state:null},a.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Cr(e){return'href="'+Qt(e)+'"'}function Yo(e){return'link[rel="stylesheet"]['+e+"]"}function Zy(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function GS(e,t,a,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),Yt(t,"link",a),wt(t),e.head.appendChild(t))}function jr(e){return'[src="'+Qt(e)+'"]'}function Xo(e){return"script[async]"+e}function Jy(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+Qt(a.href)+'"]');if(o)return t.instance=o,wt(o),o;var u=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),wt(o),Yt(o,"style",u),Lc(o,a.precedence,e),t.instance=o;case"stylesheet":u=Cr(a.href);var h=e.querySelector(Yo(u));if(h)return t.state.loading|=4,t.instance=h,wt(h),h;o=Zy(a),(u=$n.get(u))&&If(o,u),h=(e.ownerDocument||e).createElement("link"),wt(h);var g=h;return g._p=new Promise(function(x,T){g.onload=x,g.onerror=T}),Yt(h,"link",o),t.state.loading|=4,Lc(h,a.precedence,e),t.instance=h;case"script":return h=jr(a.src),(u=e.querySelector(Xo(h)))?(t.instance=u,wt(u),u):(o=a,(u=$n.get(h))&&(o=v({},a),Pf(o,u)),e=e.ownerDocument||e,u=e.createElement("script"),wt(u),Yt(u,"link",o),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,Lc(o,a.precedence,e));return t.instance}function Lc(e,t,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,h=u,g=0;g<o.length;g++){var x=o[g];if(x.dataset.precedence===t)h=x;else if(h!==u)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function If(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Pf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ic=null;function e0(e,t,a){if(Ic===null){var o=new Map,u=Ic=new Map;u.set(a,o)}else u=Ic,o=u.get(a),o||(o=new Map,u.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),u=0;u<a.length;u++){var h=a[u];if(!(h[Gi]||h[gt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var g=h.getAttribute(t)||"";g=e+g;var x=o.get(g);x?x.push(h):o.set(g,[h])}}return o}function t0(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function YS(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function n0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function XS(e,t,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var u=Cr(o.href),h=t.querySelector(Yo(u));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Pc.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=h,wt(h);return}h=t.ownerDocument||t,o=Zy(o),(u=$n.get(u))&&If(o,u),h=h.createElement("link"),wt(h);var g=h;g._p=new Promise(function(x,T){g.onload=x,g.onerror=T}),Yt(h,"link",o),a.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Pc.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Hf=0;function WS(e,t){return e.stylesheets&&e.count===0&&Vc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&Vc(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&Hf===0&&(Hf=62500*AS());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Vc(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Hf?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function Pc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Hc=null;function Vc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Hc=new Map,t.forEach(KS,e),Hc=null,Pc.call(e))}function KS(e,t){if(!(t.state.loading&4)){var a=Hc.get(e);if(a)var o=a.get(null);else{a=new Map,Hc.set(e,a);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<u.length;h++){var g=u[h];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),o=g)}o&&a.set(null,o)}u=t.instance,g=u.getAttribute("data-precedence"),h=a.get(g)||o,h===o&&a.set(null,u),a.set(g,u),this.count++,o=Pc.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),h?h.parentNode.insertBefore(u,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var Wo={$$typeof:V,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function QS(e,t,a,o,u,h,g,x,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nl(0),this.hiddenUpdates=Nl(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=h,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function s0(e,t,a,o,u,h,g,x,T,N,H,Y){return e=new QS(e,t,a,g,T,N,H,Y,x),t=1,h===!0&&(t|=24),h=bn(3,null,null,t),e.current=h,h.stateNode=e,t=vd(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:o,isDehydrated:a,cache:t},_d(h),e}function i0(e){return e?(e=nr,e):nr}function a0(e,t,a,o,u,h){u=i0(u),o.context===null?o.context=u:o.pendingContext=u,o=xi(t),o.payload={element:a},h=h===void 0?null:h,h!==null&&(o.callback=h),a=Si(e,o,t),a!==null&&(hn(a,e,t),Eo(a,e,t))}function r0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Vf(e,t){r0(e,t),(e=e.alternate)&&r0(e,t)}function o0(e){if(e.tag===13||e.tag===31){var t=aa(e,67108864);t!==null&&hn(t,e,67108864),Vf(e,67108864)}}function l0(e){if(e.tag===13||e.tag===31){var t=_n();t=Zr(t);var a=aa(e,t);a!==null&&hn(a,e,t),Vf(e,t)}}var $c=!0;function ZS(e,t,a,o){var u=I.T;I.T=null;var h=Z.p;try{Z.p=2,$f(e,t,a,o)}finally{Z.p=h,I.T=u}}function JS(e,t,a,o){var u=I.T;I.T=null;var h=Z.p;try{Z.p=8,$f(e,t,a,o)}finally{Z.p=h,I.T=u}}function $f(e,t,a,o){if($c){var u=qf(o);if(u===null)Af(e,t,o,qc,a),u0(e,o);else if(tw(u,e,t,a,o))o.stopPropagation();else if(u0(e,o),t&4&&-1<ew.indexOf(e)){for(;u!==null;){var h=ai(u);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var g=ls(h.pendingLanes);if(g!==0){var x=h;for(x.pendingLanes|=2,x.entangledLanes|=2;g;){var T=1<<31-pt(g);x.entanglements[1]|=T,g&=~T}Ss(h),(Pe&6)===0&&(Tc=Ht()+500,$o(0))}}break;case 31:case 13:x=aa(h,2),x!==null&&hn(x,h,2),Mc(),Vf(h,2)}if(h=qf(o),h===null&&Af(e,t,o,qc,a),h===u)break;u=h}u!==null&&o.stopPropagation()}else Af(e,t,o,null,a)}}function qf(e){return e=Rt(e),Ff(e)}var qc=null;function Ff(e){if(qc=null,e=ks(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return qc=e,null}function c0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ua()){case Oa:return 2;case os:return 8;case si:case Es:return 32;case La:return 268435456;default:return 32}default:return 32}}var Gf=!1,Ni=null,Di=null,zi=null,Ko=new Map,Qo=new Map,Bi=[],ew="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u0(e,t){switch(e){case"focusin":case"focusout":Ni=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":Ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(t.pointerId)}}function Zo(e,t,a,o,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:a,eventSystemFlags:o,nativeEvent:h,targetContainers:[u]},t!==null&&(t=ai(t),t!==null&&o0(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function tw(e,t,a,o,u){switch(t){case"focusin":return Ni=Zo(Ni,e,t,a,o,u),!0;case"dragenter":return Di=Zo(Di,e,t,a,o,u),!0;case"mouseover":return zi=Zo(zi,e,t,a,o,u),!0;case"pointerover":var h=u.pointerId;return Ko.set(h,Zo(Ko.get(h)||null,e,t,a,o,u)),!0;case"gotpointercapture":return h=u.pointerId,Qo.set(h,Zo(Qo.get(h)||null,e,t,a,o,u)),!0}return!1}function d0(e){var t=ks(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,Jr(e.priority,function(){l0(a)});return}}else if(t===31){if(t=m(a),t!==null){e.blockedOn=t,Jr(e.priority,function(){l0(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=qf(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Ya=o,a.target.dispatchEvent(o),Ya=null}else return t=ai(a),t!==null&&o0(t),e.blockedOn=a,!1;t.shift()}return!0}function f0(e,t,a){Fc(e)&&a.delete(t)}function nw(){Gf=!1,Ni!==null&&Fc(Ni)&&(Ni=null),Di!==null&&Fc(Di)&&(Di=null),zi!==null&&Fc(zi)&&(zi=null),Ko.forEach(f0),Qo.forEach(f0)}function Gc(e,t){e.blockedOn===t&&(e.blockedOn=null,Gf||(Gf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,nw)))}var Yc=null;function h0(e){Yc!==e&&(Yc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Yc===e&&(Yc=null);for(var t=0;t<e.length;t+=3){var a=e[t],o=e[t+1],u=e[t+2];if(typeof o!="function"){if(Ff(o||a)===null)continue;break}var h=ai(a);h!==null&&(e.splice(t,3),t-=3,$d(h,{pending:!0,data:u,method:a.method,action:o},o,u))}}))}function Tr(e){function t(T){return Gc(T,e)}Ni!==null&&Gc(Ni,e),Di!==null&&Gc(Di,e),zi!==null&&Gc(zi,e),Ko.forEach(t),Qo.forEach(t);for(var a=0;a<Bi.length;a++){var o=Bi[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Bi.length&&(a=Bi[0],a.blockedOn===null);)d0(a),a.blockedOn===null&&Bi.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var u=a[o],h=a[o+1],g=u[Vt]||null;if(typeof h=="function")g||h0(a);else if(g){var x=null;if(h&&h.hasAttribute("formAction")){if(u=h,g=h[Vt]||null)x=g.formAction;else if(Ff(u)!==null)continue}else x=g.action;typeof x=="function"?a[o+1]=x:(a.splice(o,3),o-=3),h0(a)}}}function m0(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(g){return u=g})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function Yf(e){this._internalRoot=e}Xc.prototype.render=Yf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var a=t.current,o=_n();a0(a,o,e,t,null,null)},Xc.prototype.unmount=Yf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;a0(e.current,2,null,e,null,null),Mc(),t[As]=null}};function Xc(e){this._internalRoot=e}Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bu();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Bi.length&&t!==0&&t<Bi[a].priority;a++);Bi.splice(a,0,e),a===0&&d0(e)}};var p0=n.version;if(p0!=="19.2.0")throw Error(r(527,p0,"19.2.0"));Z.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var sw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{we=Wc.inject(sw),Ie=Wc}catch{}}return el.createRoot=function(e,t){if(!l(e))throw Error(r(299));var a=!1,o="",u=wg,h=_g,g=Cg;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=s0(e,1,!1,null,null,a,o,null,u,h,g,m0),e[As]=t.current,Mf(e),new Yf(t)},el.hydrateRoot=function(e,t,a){if(!l(e))throw Error(r(299));var o=!1,u="",h=wg,g=_g,x=Cg,T=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.formState!==void 0&&(T=a.formState)),t=s0(e,1,!0,t,a??null,o,u,T,h,g,x,m0),t.context=i0(null),a=t.current,o=_n(),o=Zr(o),u=xi(o),u.callback=null,Si(a,u,o),a=o,t.current.lanes=a,ii(t,a),Ss(t),e[As]=t.current,Mf(e),new Xc(t)},el.version="19.2.0",el}var C0;function Rw(){if(C0)return Kf.exports;C0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),Kf.exports=kw(),Kf.exports}var Nw=Rw();const Dw="modulepreload",zw=function(s){return"/"+s},j0={},Zs=function(n,i,r){let l=Promise.resolve();if(i&&i.length>0){let p=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=f?.nonce||f?.getAttribute("nonce");l=p(i.map(y=>{if(y=zw(y),y in j0)return;j0[y]=!0;const b=y.endsWith(".css"),v=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${v}`))return;const w=document.createElement("link");if(w.rel=b?"stylesheet":Dw,b||(w.as="script"),w.crossOrigin="",w.href=y,m&&w.setAttribute("nonce",m),document.head.appendChild(w),b)return new Promise((E,C)=>{w.addEventListener("load",E),w.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${y}`)))})}))}function d(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return l.then(f=>{for(const m of f||[])m.status==="rejected"&&d(m.reason);return n().catch(d)})},T0=s=>{let n;const i=new Set,r=(y,b)=>{const v=typeof y=="function"?y(n):y;if(!Object.is(v,n)){const w=n;n=b??(typeof v!="object"||v===null)?v:Object.assign({},n,v),i.forEach(E=>E(n,w))}},l=()=>n,m={setState:r,getState:l,getInitialState:()=>p,subscribe:y=>(i.add(y),()=>i.delete(y))},p=n=s(r,l,m);return m},Bw=(s=>s?T0(s):T0),Uw=s=>s;function Ow(s,n=Uw){const i=_a.useSyncExternalStore(s.subscribe,_a.useCallback(()=>n(s.getState()),[s,n]),_a.useCallback(()=>n(s.getInitialState()),[s,n]));return _a.useDebugValue(i),i}const E0=s=>{const n=Bw(s),i=r=>Ow(n,r);return Object.assign(i,n),i},Sl=(s=>s?E0(s):E0);function Sv(s,n){return function(){return s.apply(n,arguments)}}const{toString:Lw}=Object.prototype,{getPrototypeOf:um}=Object,{iterator:_u,toStringTag:wv}=Symbol,Cu=(s=>n=>{const i=Lw.call(n);return s[i]||(s[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),is=s=>(s=s.toLowerCase(),n=>Cu(n)===s),ju=s=>n=>typeof n===s,{isArray:$r}=Array,Ir=ju("undefined");function wl(s){return s!==null&&!Ir(s)&&s.constructor!==null&&!Ir(s.constructor)&&pn(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const _v=is("ArrayBuffer");function Iw(s){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(s):n=s&&s.buffer&&_v(s.buffer),n}const Pw=ju("string"),pn=ju("function"),Cv=ju("number"),_l=s=>s!==null&&typeof s=="object",Hw=s=>s===!0||s===!1,au=s=>{if(Cu(s)!=="object")return!1;const n=um(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(wv in s)&&!(_u in s)},Vw=s=>{if(!_l(s)||wl(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},$w=is("Date"),qw=is("File"),Fw=is("Blob"),Gw=is("FileList"),Yw=s=>_l(s)&&pn(s.pipe),Xw=s=>{let n;return s&&(typeof FormData=="function"&&s instanceof FormData||pn(s.append)&&((n=Cu(s))==="formdata"||n==="object"&&pn(s.toString)&&s.toString()==="[object FormData]"))},Ww=is("URLSearchParams"),[Kw,Qw,Zw,Jw]=["ReadableStream","Request","Response","Headers"].map(is),e_=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cl(s,n,{allOwnKeys:i=!1}={}){if(s===null||typeof s>"u")return;let r,l;if(typeof s!="object"&&(s=[s]),$r(s))for(r=0,l=s.length;r<l;r++)n.call(null,s[r],r,s);else{if(wl(s))return;const d=i?Object.getOwnPropertyNames(s):Object.keys(s),f=d.length;let m;for(r=0;r<f;r++)m=d[r],n.call(null,s[m],m,s)}}function jv(s,n){if(wl(s))return null;n=n.toLowerCase();const i=Object.keys(s);let r=i.length,l;for(;r-- >0;)if(l=i[r],n===l.toLowerCase())return l;return null}const Ca=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Tv=s=>!Ir(s)&&s!==Ca;function Ah(){const{caseless:s,skipUndefined:n}=Tv(this)&&this||{},i={},r=(l,d)=>{const f=s&&jv(i,d)||d;au(i[f])&&au(l)?i[f]=Ah(i[f],l):au(l)?i[f]=Ah({},l):$r(l)?i[f]=l.slice():(!n||!Ir(l))&&(i[f]=l)};for(let l=0,d=arguments.length;l<d;l++)arguments[l]&&Cl(arguments[l],r);return i}const t_=(s,n,i,{allOwnKeys:r}={})=>(Cl(n,(l,d)=>{i&&pn(l)?s[d]=Sv(l,i):s[d]=l},{allOwnKeys:r}),s),n_=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),s_=(s,n,i,r)=>{s.prototype=Object.create(n.prototype,r),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:n.prototype}),i&&Object.assign(s.prototype,i)},i_=(s,n,i,r)=>{let l,d,f;const m={};if(n=n||{},s==null)return n;do{for(l=Object.getOwnPropertyNames(s),d=l.length;d-- >0;)f=l[d],(!r||r(f,s,n))&&!m[f]&&(n[f]=s[f],m[f]=!0);s=i!==!1&&um(s)}while(s&&(!i||i(s,n))&&s!==Object.prototype);return n},a_=(s,n,i)=>{s=String(s),(i===void 0||i>s.length)&&(i=s.length),i-=n.length;const r=s.indexOf(n,i);return r!==-1&&r===i},r_=s=>{if(!s)return null;if($r(s))return s;let n=s.length;if(!Cv(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=s[n];return i},o_=(s=>n=>s&&n instanceof s)(typeof Uint8Array<"u"&&um(Uint8Array)),l_=(s,n)=>{const r=(s&&s[_u]).call(s);let l;for(;(l=r.next())&&!l.done;){const d=l.value;n.call(s,d[0],d[1])}},c_=(s,n)=>{let i;const r=[];for(;(i=s.exec(n))!==null;)r.push(i);return r},u_=is("HTMLFormElement"),d_=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,r,l){return r.toUpperCase()+l}),M0=(({hasOwnProperty:s})=>(n,i)=>s.call(n,i))(Object.prototype),f_=is("RegExp"),Ev=(s,n)=>{const i=Object.getOwnPropertyDescriptors(s),r={};Cl(i,(l,d)=>{let f;(f=n(l,d,s))!==!1&&(r[d]=f||l)}),Object.defineProperties(s,r)},h_=s=>{Ev(s,(n,i)=>{if(pn(s)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const r=s[i];if(pn(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},m_=(s,n)=>{const i={},r=l=>{l.forEach(d=>{i[d]=!0})};return $r(s)?r(s):r(String(s).split(n)),i},p_=()=>{},g_=(s,n)=>s!=null&&Number.isFinite(s=+s)?s:n;function y_(s){return!!(s&&pn(s.append)&&s[wv]==="FormData"&&s[_u])}const b_=s=>{const n=new Array(10),i=(r,l)=>{if(_l(r)){if(n.indexOf(r)>=0)return;if(wl(r))return r;if(!("toJSON"in r)){n[l]=r;const d=$r(r)?[]:{};return Cl(r,(f,m)=>{const p=i(f,l+1);!Ir(p)&&(d[m]=p)}),n[l]=void 0,d}}return r};return i(s,0)},v_=is("AsyncFunction"),x_=s=>s&&(_l(s)||pn(s))&&pn(s.then)&&pn(s.catch),Mv=((s,n)=>s?setImmediate:n?((i,r)=>(Ca.addEventListener("message",({source:l,data:d})=>{l===Ca&&d===i&&r.length&&r.shift()()},!1),l=>{r.push(l),Ca.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",pn(Ca.postMessage)),S_=typeof queueMicrotask<"u"?queueMicrotask.bind(Ca):typeof process<"u"&&process.nextTick||Mv,w_=s=>s!=null&&pn(s[_u]),B={isArray:$r,isArrayBuffer:_v,isBuffer:wl,isFormData:Xw,isArrayBufferView:Iw,isString:Pw,isNumber:Cv,isBoolean:Hw,isObject:_l,isPlainObject:au,isEmptyObject:Vw,isReadableStream:Kw,isRequest:Qw,isResponse:Zw,isHeaders:Jw,isUndefined:Ir,isDate:$w,isFile:qw,isBlob:Fw,isRegExp:f_,isFunction:pn,isStream:Yw,isURLSearchParams:Ww,isTypedArray:o_,isFileList:Gw,forEach:Cl,merge:Ah,extend:t_,trim:e_,stripBOM:n_,inherits:s_,toFlatObject:i_,kindOf:Cu,kindOfTest:is,endsWith:a_,toArray:r_,forEachEntry:l_,matchAll:c_,isHTMLForm:u_,hasOwnProperty:M0,hasOwnProp:M0,reduceDescriptors:Ev,freezeMethods:h_,toObjectSet:m_,toCamelCase:d_,noop:p_,toFiniteNumber:g_,findKey:jv,global:Ca,isContextDefined:Tv,isSpecCompliantForm:y_,toJSONObject:b_,isAsyncFn:v_,isThenable:x_,setImmediate:Mv,asap:S_,isIterable:w_};function xe(s,n,i,r,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),r&&(this.request=r),l&&(this.response=l,this.status=l.status?l.status:null)}B.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}});const Av=xe.prototype,kv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{kv[s]={value:s}});Object.defineProperties(xe,kv);Object.defineProperty(Av,"isAxiosError",{value:!0});xe.from=(s,n,i,r,l,d)=>{const f=Object.create(Av);B.toFlatObject(s,f,function(b){return b!==Error.prototype},y=>y!=="isAxiosError");const m=s&&s.message?s.message:"Error",p=n==null&&s?s.code:n;return xe.call(f,m,p,i,r,l),s&&f.cause==null&&Object.defineProperty(f,"cause",{value:s,configurable:!0}),f.name=s&&s.name||"Error",d&&Object.assign(f,d),f};const __=null;function kh(s){return B.isPlainObject(s)||B.isArray(s)}function Rv(s){return B.endsWith(s,"[]")?s.slice(0,-2):s}function A0(s,n,i){return s?s.concat(n).map(function(l,d){return l=Rv(l),!i&&d?"["+l+"]":l}).join(i?".":""):n}function C_(s){return B.isArray(s)&&!s.some(kh)}const j_=B.toFlatObject(B,{},null,function(n){return/^is[A-Z]/.test(n)});function Tu(s,n,i){if(!B.isObject(s))throw new TypeError("target must be an object");n=n||new FormData,i=B.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,D){return!B.isUndefined(D[A])});const r=i.metaTokens,l=i.visitor||b,d=i.dots,f=i.indexes,p=(i.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(n);if(!B.isFunction(l))throw new TypeError("visitor must be a function");function y(C){if(C===null)return"";if(B.isDate(C))return C.toISOString();if(B.isBoolean(C))return C.toString();if(!p&&B.isBlob(C))throw new xe("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(C)||B.isTypedArray(C)?p&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function b(C,A,D){let P=C;if(C&&!D&&typeof C=="object"){if(B.endsWith(A,"{}"))A=r?A:A.slice(0,-2),C=JSON.stringify(C);else if(B.isArray(C)&&C_(C)||(B.isFileList(C)||B.endsWith(A,"[]"))&&(P=B.toArray(C)))return A=Rv(A),P.forEach(function(V,J){!(B.isUndefined(V)||V===null)&&n.append(f===!0?A0([A],J,d):f===null?A:A+"[]",y(V))}),!1}return kh(C)?!0:(n.append(A0(D,A,d),y(C)),!1)}const v=[],w=Object.assign(j_,{defaultVisitor:b,convertValue:y,isVisitable:kh});function E(C,A){if(!B.isUndefined(C)){if(v.indexOf(C)!==-1)throw Error("Circular reference detected in "+A.join("."));v.push(C),B.forEach(C,function(P,Q){(!(B.isUndefined(P)||P===null)&&l.call(n,P,B.isString(Q)?Q.trim():Q,A,w))===!0&&E(P,A?A.concat(Q):[Q])}),v.pop()}}if(!B.isObject(s))throw new TypeError("data must be an object");return E(s),n}function k0(s){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function dm(s,n){this._pairs=[],s&&Tu(s,this,n)}const Nv=dm.prototype;Nv.append=function(n,i){this._pairs.push([n,i])};Nv.toString=function(n){const i=n?function(r){return n.call(this,r,k0)}:k0;return this._pairs.map(function(l){return i(l[0])+"="+i(l[1])},"").join("&")};function T_(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Dv(s,n,i){if(!n)return s;const r=i&&i.encode||T_;B.isFunction(i)&&(i={serialize:i});const l=i&&i.serialize;let d;if(l?d=l(n,i):d=B.isURLSearchParams(n)?n.toString():new dm(n,i).toString(r),d){const f=s.indexOf("#");f!==-1&&(s=s.slice(0,f)),s+=(s.indexOf("?")===-1?"?":"&")+d}return s}class R0{constructor(){this.handlers=[]}use(n,i,r){return this.handlers.push({fulfilled:n,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){B.forEach(this.handlers,function(r){r!==null&&n(r)})}}const zv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},E_=typeof URLSearchParams<"u"?URLSearchParams:dm,M_=typeof FormData<"u"?FormData:null,A_=typeof Blob<"u"?Blob:null,k_={isBrowser:!0,classes:{URLSearchParams:E_,FormData:M_,Blob:A_},protocols:["http","https","file","blob","url","data"]},fm=typeof window<"u"&&typeof document<"u",Rh=typeof navigator=="object"&&navigator||void 0,R_=fm&&(!Rh||["ReactNative","NativeScript","NS"].indexOf(Rh.product)<0),N_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",D_=fm&&window.location.href||"http://localhost",z_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:fm,hasStandardBrowserEnv:R_,hasStandardBrowserWebWorkerEnv:N_,navigator:Rh,origin:D_},Symbol.toStringTag,{value:"Module"})),en={...z_,...k_};function B_(s,n){return Tu(s,new en.classes.URLSearchParams,{visitor:function(i,r,l,d){return en.isNode&&B.isBuffer(i)?(this.append(r,i.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...n})}function U_(s){return B.matchAll(/\w+|\[(\w*)]/g,s).map(n=>n[0]==="[]"?"":n[1]||n[0])}function O_(s){const n={},i=Object.keys(s);let r;const l=i.length;let d;for(r=0;r<l;r++)d=i[r],n[d]=s[d];return n}function Bv(s){function n(i,r,l,d){let f=i[d++];if(f==="__proto__")return!0;const m=Number.isFinite(+f),p=d>=i.length;return f=!f&&B.isArray(l)?l.length:f,p?(B.hasOwnProp(l,f)?l[f]=[l[f],r]:l[f]=r,!m):((!l[f]||!B.isObject(l[f]))&&(l[f]=[]),n(i,r,l[f],d)&&B.isArray(l[f])&&(l[f]=O_(l[f])),!m)}if(B.isFormData(s)&&B.isFunction(s.entries)){const i={};return B.forEachEntry(s,(r,l)=>{n(U_(r),l,i,0)}),i}return null}function L_(s,n,i){if(B.isString(s))try{return(n||JSON.parse)(s),B.trim(s)}catch(r){if(r.name!=="SyntaxError")throw r}return(i||JSON.stringify)(s)}const jl={transitional:zv,adapter:["xhr","http","fetch"],transformRequest:[function(n,i){const r=i.getContentType()||"",l=r.indexOf("application/json")>-1,d=B.isObject(n);if(d&&B.isHTMLForm(n)&&(n=new FormData(n)),B.isFormData(n))return l?JSON.stringify(Bv(n)):n;if(B.isArrayBuffer(n)||B.isBuffer(n)||B.isStream(n)||B.isFile(n)||B.isBlob(n)||B.isReadableStream(n))return n;if(B.isArrayBufferView(n))return n.buffer;if(B.isURLSearchParams(n))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let m;if(d){if(r.indexOf("application/x-www-form-urlencoded")>-1)return B_(n,this.formSerializer).toString();if((m=B.isFileList(n))||r.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Tu(m?{"files[]":n}:n,p&&new p,this.formSerializer)}}return d||l?(i.setContentType("application/json",!1),L_(n)):n}],transformResponse:[function(n){const i=this.transitional||jl.transitional,r=i&&i.forcedJSONParsing,l=this.responseType==="json";if(B.isResponse(n)||B.isReadableStream(n))return n;if(n&&B.isString(n)&&(r&&!this.responseType||l)){const f=!(i&&i.silentJSONParsing)&&l;try{return JSON.parse(n,this.parseReviver)}catch(m){if(f)throw m.name==="SyntaxError"?xe.from(m,xe.ERR_BAD_RESPONSE,this,null,this.response):m}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:en.classes.FormData,Blob:en.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],s=>{jl.headers[s]={}});const I_=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),P_=s=>{const n={};let i,r,l;return s&&s.split(`
`).forEach(function(f){l=f.indexOf(":"),i=f.substring(0,l).trim().toLowerCase(),r=f.substring(l+1).trim(),!(!i||n[i]&&I_[i])&&(i==="set-cookie"?n[i]?n[i].push(r):n[i]=[r]:n[i]=n[i]?n[i]+", "+r:r)}),n},N0=Symbol("internals");function tl(s){return s&&String(s).trim().toLowerCase()}function ru(s){return s===!1||s==null?s:B.isArray(s)?s.map(ru):String(s)}function H_(s){const n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(s);)n[r[1]]=r[2];return n}const V_=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Jf(s,n,i,r,l){if(B.isFunction(r))return r.call(this,n,i);if(l&&(n=i),!!B.isString(n)){if(B.isString(r))return n.indexOf(r)!==-1;if(B.isRegExp(r))return r.test(n)}}function $_(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,i,r)=>i.toUpperCase()+r)}function q_(s,n){const i=B.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(s,r+i,{value:function(l,d,f){return this[r].call(this,n,l,d,f)},configurable:!0})})}let gn=class{constructor(n){n&&this.set(n)}set(n,i,r){const l=this;function d(m,p,y){const b=tl(p);if(!b)throw new Error("header name must be a non-empty string");const v=B.findKey(l,b);(!v||l[v]===void 0||y===!0||y===void 0&&l[v]!==!1)&&(l[v||p]=ru(m))}const f=(m,p)=>B.forEach(m,(y,b)=>d(y,b,p));if(B.isPlainObject(n)||n instanceof this.constructor)f(n,i);else if(B.isString(n)&&(n=n.trim())&&!V_(n))f(P_(n),i);else if(B.isObject(n)&&B.isIterable(n)){let m={},p,y;for(const b of n){if(!B.isArray(b))throw TypeError("Object iterator must return a key-value pair");m[y=b[0]]=(p=m[y])?B.isArray(p)?[...p,b[1]]:[p,b[1]]:b[1]}f(m,i)}else n!=null&&d(i,n,r);return this}get(n,i){if(n=tl(n),n){const r=B.findKey(this,n);if(r){const l=this[r];if(!i)return l;if(i===!0)return H_(l);if(B.isFunction(i))return i.call(this,l,r);if(B.isRegExp(i))return i.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=tl(n),n){const r=B.findKey(this,n);return!!(r&&this[r]!==void 0&&(!i||Jf(this,this[r],r,i)))}return!1}delete(n,i){const r=this;let l=!1;function d(f){if(f=tl(f),f){const m=B.findKey(r,f);m&&(!i||Jf(r,r[m],m,i))&&(delete r[m],l=!0)}}return B.isArray(n)?n.forEach(d):d(n),l}clear(n){const i=Object.keys(this);let r=i.length,l=!1;for(;r--;){const d=i[r];(!n||Jf(this,this[d],d,n,!0))&&(delete this[d],l=!0)}return l}normalize(n){const i=this,r={};return B.forEach(this,(l,d)=>{const f=B.findKey(r,d);if(f){i[f]=ru(l),delete i[d];return}const m=n?$_(d):String(d).trim();m!==d&&delete i[d],i[m]=ru(l),r[m]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const i=Object.create(null);return B.forEach(this,(r,l)=>{r!=null&&r!==!1&&(i[l]=n&&B.isArray(r)?r.join(", "):r)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,i])=>n+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...i){const r=new this(n);return i.forEach(l=>r.set(l)),r}static accessor(n){const r=(this[N0]=this[N0]={accessors:{}}).accessors,l=this.prototype;function d(f){const m=tl(f);r[m]||(q_(l,f),r[m]=!0)}return B.isArray(n)?n.forEach(d):d(n),this}};gn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(gn.prototype,({value:s},n)=>{let i=n[0].toUpperCase()+n.slice(1);return{get:()=>s,set(r){this[i]=r}}});B.freezeMethods(gn);function eh(s,n){const i=this||jl,r=n||i,l=gn.from(r.headers);let d=r.data;return B.forEach(s,function(m){d=m.call(i,d,l.normalize(),n?n.status:void 0)}),l.normalize(),d}function Uv(s){return!!(s&&s.__CANCEL__)}function qr(s,n,i){xe.call(this,s??"canceled",xe.ERR_CANCELED,n,i),this.name="CanceledError"}B.inherits(qr,xe,{__CANCEL__:!0});function Ov(s,n,i){const r=i.config.validateStatus;!i.status||!r||r(i.status)?s(i):n(new xe("Request failed with status code "+i.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function F_(s){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return n&&n[1]||""}function G_(s,n){s=s||10;const i=new Array(s),r=new Array(s);let l=0,d=0,f;return n=n!==void 0?n:1e3,function(p){const y=Date.now(),b=r[d];f||(f=y),i[l]=p,r[l]=y;let v=d,w=0;for(;v!==l;)w+=i[v++],v=v%s;if(l=(l+1)%s,l===d&&(d=(d+1)%s),y-f<n)return;const E=b&&y-b;return E?Math.round(w*1e3/E):void 0}}function Y_(s,n){let i=0,r=1e3/n,l,d;const f=(y,b=Date.now())=>{i=b,l=null,d&&(clearTimeout(d),d=null),s(...y)};return[(...y)=>{const b=Date.now(),v=b-i;v>=r?f(y,b):(l=y,d||(d=setTimeout(()=>{d=null,f(l)},r-v)))},()=>l&&f(l)]}const pu=(s,n,i=3)=>{let r=0;const l=G_(50,250);return Y_(d=>{const f=d.loaded,m=d.lengthComputable?d.total:void 0,p=f-r,y=l(p),b=f<=m;r=f;const v={loaded:f,total:m,progress:m?f/m:void 0,bytes:p,rate:y||void 0,estimated:y&&m&&b?(m-f)/y:void 0,event:d,lengthComputable:m!=null,[n?"download":"upload"]:!0};s(v)},i)},D0=(s,n)=>{const i=s!=null;return[r=>n[0]({lengthComputable:i,total:s,loaded:r}),n[1]]},z0=s=>(...n)=>B.asap(()=>s(...n)),X_=en.hasStandardBrowserEnv?((s,n)=>i=>(i=new URL(i,en.origin),s.protocol===i.protocol&&s.host===i.host&&(n||s.port===i.port)))(new URL(en.origin),en.navigator&&/(msie|trident)/i.test(en.navigator.userAgent)):()=>!0,W_=en.hasStandardBrowserEnv?{write(s,n,i,r,l,d,f){if(typeof document>"u")return;const m=[`${s}=${encodeURIComponent(n)}`];B.isNumber(i)&&m.push(`expires=${new Date(i).toUTCString()}`),B.isString(r)&&m.push(`path=${r}`),B.isString(l)&&m.push(`domain=${l}`),d===!0&&m.push("secure"),B.isString(f)&&m.push(`SameSite=${f}`),document.cookie=m.join("; ")},read(s){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+s+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(s){this.write(s,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function K_(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function Q_(s,n){return n?s.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):s}function Lv(s,n,i){let r=!K_(n);return s&&(r||i==!1)?Q_(s,n):n}const B0=s=>s instanceof gn?{...s}:s;function za(s,n){n=n||{};const i={};function r(y,b,v,w){return B.isPlainObject(y)&&B.isPlainObject(b)?B.merge.call({caseless:w},y,b):B.isPlainObject(b)?B.merge({},b):B.isArray(b)?b.slice():b}function l(y,b,v,w){if(B.isUndefined(b)){if(!B.isUndefined(y))return r(void 0,y,v,w)}else return r(y,b,v,w)}function d(y,b){if(!B.isUndefined(b))return r(void 0,b)}function f(y,b){if(B.isUndefined(b)){if(!B.isUndefined(y))return r(void 0,y)}else return r(void 0,b)}function m(y,b,v){if(v in n)return r(y,b);if(v in s)return r(void 0,y)}const p={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:m,headers:(y,b,v)=>l(B0(y),B0(b),v,!0)};return B.forEach(Object.keys({...s,...n}),function(b){const v=p[b]||l,w=v(s[b],n[b],b);B.isUndefined(w)&&v!==m||(i[b]=w)}),i}const Iv=s=>{const n=za({},s);let{data:i,withXSRFToken:r,xsrfHeaderName:l,xsrfCookieName:d,headers:f,auth:m}=n;if(n.headers=f=gn.from(f),n.url=Dv(Lv(n.baseURL,n.url,n.allowAbsoluteUrls),s.params,s.paramsSerializer),m&&f.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),B.isFormData(i)){if(en.hasStandardBrowserEnv||en.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(B.isFunction(i.getHeaders)){const p=i.getHeaders(),y=["content-type","content-length"];Object.entries(p).forEach(([b,v])=>{y.includes(b.toLowerCase())&&f.set(b,v)})}}if(en.hasStandardBrowserEnv&&(r&&B.isFunction(r)&&(r=r(n)),r||r!==!1&&X_(n.url))){const p=l&&d&&W_.read(d);p&&f.set(l,p)}return n},Z_=typeof XMLHttpRequest<"u",J_=Z_&&function(s){return new Promise(function(i,r){const l=Iv(s);let d=l.data;const f=gn.from(l.headers).normalize();let{responseType:m,onUploadProgress:p,onDownloadProgress:y}=l,b,v,w,E,C;function A(){E&&E(),C&&C(),l.cancelToken&&l.cancelToken.unsubscribe(b),l.signal&&l.signal.removeEventListener("abort",b)}let D=new XMLHttpRequest;D.open(l.method.toUpperCase(),l.url,!0),D.timeout=l.timeout;function P(){if(!D)return;const V=gn.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),G={data:!m||m==="text"||m==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:V,config:s,request:D};Ov(function(se){i(se),A()},function(se){r(se),A()},G),D=null}"onloadend"in D?D.onloadend=P:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(P)},D.onabort=function(){D&&(r(new xe("Request aborted",xe.ECONNABORTED,s,D)),D=null)},D.onerror=function(J){const G=J&&J.message?J.message:"Network Error",ee=new xe(G,xe.ERR_NETWORK,s,D);ee.event=J||null,r(ee),D=null},D.ontimeout=function(){let J=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const G=l.transitional||zv;l.timeoutErrorMessage&&(J=l.timeoutErrorMessage),r(new xe(J,G.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,s,D)),D=null},d===void 0&&f.setContentType(null),"setRequestHeader"in D&&B.forEach(f.toJSON(),function(J,G){D.setRequestHeader(G,J)}),B.isUndefined(l.withCredentials)||(D.withCredentials=!!l.withCredentials),m&&m!=="json"&&(D.responseType=l.responseType),y&&([w,C]=pu(y,!0),D.addEventListener("progress",w)),p&&D.upload&&([v,E]=pu(p),D.upload.addEventListener("progress",v),D.upload.addEventListener("loadend",E)),(l.cancelToken||l.signal)&&(b=V=>{D&&(r(!V||V.type?new qr(null,s,D):V),D.abort(),D=null)},l.cancelToken&&l.cancelToken.subscribe(b),l.signal&&(l.signal.aborted?b():l.signal.addEventListener("abort",b)));const Q=F_(l.url);if(Q&&en.protocols.indexOf(Q)===-1){r(new xe("Unsupported protocol "+Q+":",xe.ERR_BAD_REQUEST,s));return}D.send(d||null)})},eC=(s,n)=>{const{length:i}=s=s?s.filter(Boolean):[];if(n||i){let r=new AbortController,l;const d=function(y){if(!l){l=!0,m();const b=y instanceof Error?y:this.reason;r.abort(b instanceof xe?b:new qr(b instanceof Error?b.message:b))}};let f=n&&setTimeout(()=>{f=null,d(new xe(`timeout ${n} of ms exceeded`,xe.ETIMEDOUT))},n);const m=()=>{s&&(f&&clearTimeout(f),f=null,s.forEach(y=>{y.unsubscribe?y.unsubscribe(d):y.removeEventListener("abort",d)}),s=null)};s.forEach(y=>y.addEventListener("abort",d));const{signal:p}=r;return p.unsubscribe=()=>B.asap(m),p}},tC=function*(s,n){let i=s.byteLength;if(i<n){yield s;return}let r=0,l;for(;r<i;)l=r+n,yield s.slice(r,l),r=l},nC=async function*(s,n){for await(const i of sC(s))yield*tC(i,n)},sC=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const n=s.getReader();try{for(;;){const{done:i,value:r}=await n.read();if(i)break;yield r}}finally{await n.cancel()}},U0=(s,n,i,r)=>{const l=nC(s,n);let d=0,f,m=p=>{f||(f=!0,r&&r(p))};return new ReadableStream({async pull(p){try{const{done:y,value:b}=await l.next();if(y){m(),p.close();return}let v=b.byteLength;if(i){let w=d+=v;i(w)}p.enqueue(new Uint8Array(b))}catch(y){throw m(y),y}},cancel(p){return m(p),l.return()}},{highWaterMark:2})},O0=64*1024,{isFunction:Kc}=B,iC=(({Request:s,Response:n})=>({Request:s,Response:n}))(B.global),{ReadableStream:L0,TextEncoder:I0}=B.global,P0=(s,...n)=>{try{return!!s(...n)}catch{return!1}},aC=s=>{s=B.merge.call({skipUndefined:!0},iC,s);const{fetch:n,Request:i,Response:r}=s,l=n?Kc(n):typeof fetch=="function",d=Kc(i),f=Kc(r);if(!l)return!1;const m=l&&Kc(L0),p=l&&(typeof I0=="function"?(C=>A=>C.encode(A))(new I0):async C=>new Uint8Array(await new i(C).arrayBuffer())),y=d&&m&&P0(()=>{let C=!1;const A=new i(en.origin,{body:new L0,method:"POST",get duplex(){return C=!0,"half"}}).headers.has("Content-Type");return C&&!A}),b=f&&m&&P0(()=>B.isReadableStream(new r("").body)),v={stream:b&&(C=>C.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(C=>{!v[C]&&(v[C]=(A,D)=>{let P=A&&A[C];if(P)return P.call(A);throw new xe(`Response type '${C}' is not supported`,xe.ERR_NOT_SUPPORT,D)})});const w=async C=>{if(C==null)return 0;if(B.isBlob(C))return C.size;if(B.isSpecCompliantForm(C))return(await new i(en.origin,{method:"POST",body:C}).arrayBuffer()).byteLength;if(B.isArrayBufferView(C)||B.isArrayBuffer(C))return C.byteLength;if(B.isURLSearchParams(C)&&(C=C+""),B.isString(C))return(await p(C)).byteLength},E=async(C,A)=>{const D=B.toFiniteNumber(C.getContentLength());return D??w(A)};return async C=>{let{url:A,method:D,data:P,signal:Q,cancelToken:V,timeout:J,onDownloadProgress:G,onUploadProgress:ee,responseType:se,headers:W,withCredentials:le="same-origin",fetchOptions:ue}=Iv(C),Ce=n||fetch;se=se?(se+"").toLowerCase():"text";let Re=eC([Q,V&&V.toAbortSignal()],J),Ve=null;const Qe=Re&&Re.unsubscribe&&(()=>{Re.unsubscribe()});let Ee;try{if(ee&&y&&D!=="get"&&D!=="head"&&(Ee=await E(W,P))!==0){let Ue=new i(A,{method:"POST",body:P,duplex:"half"}),Se;if(B.isFormData(P)&&(Se=Ue.headers.get("content-type"))&&W.setContentType(Se),Ue.body){const[ye,Ye]=D0(Ee,pu(z0(ee)));P=U0(Ue.body,O0,ye,Ye)}}B.isString(le)||(le=le?"include":"omit");const I=d&&"credentials"in i.prototype,Z={...ue,signal:Re,method:D.toUpperCase(),headers:W.normalize().toJSON(),body:P,duplex:"half",credentials:I?le:void 0};Ve=d&&new i(A,Z);let ne=await(d?Ce(Ve,ue):Ce(A,Z));const ge=b&&(se==="stream"||se==="response");if(b&&(G||ge&&Qe)){const Ue={};["status","statusText","headers"].forEach(At=>{Ue[At]=ne[At]});const Se=B.toFiniteNumber(ne.headers.get("content-length")),[ye,Ye]=G&&D0(Se,pu(z0(G),!0))||[];ne=new r(U0(ne.body,O0,ye,()=>{Ye&&Ye(),Qe&&Qe()}),Ue)}se=se||"text";let je=await v[B.findKey(v,se)||"text"](ne,C);return!ge&&Qe&&Qe(),await new Promise((Ue,Se)=>{Ov(Ue,Se,{data:je,headers:gn.from(ne.headers),status:ne.status,statusText:ne.statusText,config:C,request:Ve})})}catch(I){throw Qe&&Qe(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,C,Ve),{cause:I.cause||I}):xe.from(I,I&&I.code,C,Ve)}}},rC=new Map,Pv=s=>{let n=s&&s.env||{};const{fetch:i,Request:r,Response:l}=n,d=[r,l,i];let f=d.length,m=f,p,y,b=rC;for(;m--;)p=d[m],y=b.get(p),y===void 0&&b.set(p,y=m?new Map:aC(n)),b=y;return y};Pv();const hm={http:__,xhr:J_,fetch:{get:Pv}};B.forEach(hm,(s,n)=>{if(s){try{Object.defineProperty(s,"name",{value:n})}catch{}Object.defineProperty(s,"adapterName",{value:n})}});const H0=s=>`- ${s}`,oC=s=>B.isFunction(s)||s===null||s===!1;function lC(s,n){s=B.isArray(s)?s:[s];const{length:i}=s;let r,l;const d={};for(let f=0;f<i;f++){r=s[f];let m;if(l=r,!oC(r)&&(l=hm[(m=String(r)).toLowerCase()],l===void 0))throw new xe(`Unknown adapter '${m}'`);if(l&&(B.isFunction(l)||(l=l.get(n))))break;d[m||"#"+f]=l}if(!l){const f=Object.entries(d).map(([p,y])=>`adapter ${p} `+(y===!1?"is not supported by the environment":"is not available in the build"));let m=i?f.length>1?`since :
`+f.map(H0).join(`
`):" "+H0(f[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return l}const Hv={getAdapter:lC,adapters:hm};function th(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new qr(null,s)}function V0(s){return th(s),s.headers=gn.from(s.headers),s.data=eh.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),Hv.getAdapter(s.adapter||jl.adapter,s)(s).then(function(r){return th(s),r.data=eh.call(s,s.transformResponse,r),r.headers=gn.from(r.headers),r},function(r){return Uv(r)||(th(s),r&&r.response&&(r.response.data=eh.call(s,s.transformResponse,r.response),r.response.headers=gn.from(r.response.headers))),Promise.reject(r)})}const Vv="1.13.2",Eu={};["object","boolean","number","function","string","symbol"].forEach((s,n)=>{Eu[s]=function(r){return typeof r===s||"a"+(n<1?"n ":" ")+s}});const $0={};Eu.transitional=function(n,i,r){function l(d,f){return"[Axios v"+Vv+"] Transitional option '"+d+"'"+f+(r?". "+r:"")}return(d,f,m)=>{if(n===!1)throw new xe(l(f," has been removed"+(i?" in "+i:"")),xe.ERR_DEPRECATED);return i&&!$0[f]&&($0[f]=!0,console.warn(l(f," has been deprecated since v"+i+" and will be removed in the near future"))),n?n(d,f,m):!0}};Eu.spelling=function(n){return(i,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function cC(s,n,i){if(typeof s!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const r=Object.keys(s);let l=r.length;for(;l-- >0;){const d=r[l],f=n[d];if(f){const m=s[d],p=m===void 0||f(m,d,s);if(p!==!0)throw new xe("option "+d+" must be "+p,xe.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new xe("Unknown option "+d,xe.ERR_BAD_OPTION)}}const ou={assertOptions:cC,validators:Eu},ws=ou.validators;let Ea=class{constructor(n){this.defaults=n||{},this.interceptors={request:new R0,response:new R0}}async request(n,i){try{return await this._request(n,i)}catch(r){if(r instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const d=l.stack?l.stack.replace(/^.+\n/,""):"";try{r.stack?d&&!String(r.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+d):r.stack=d}catch{}}throw r}}_request(n,i){typeof n=="string"?(i=i||{},i.url=n):i=n||{},i=za(this.defaults,i);const{transitional:r,paramsSerializer:l,headers:d}=i;r!==void 0&&ou.assertOptions(r,{silentJSONParsing:ws.transitional(ws.boolean),forcedJSONParsing:ws.transitional(ws.boolean),clarifyTimeoutError:ws.transitional(ws.boolean)},!1),l!=null&&(B.isFunction(l)?i.paramsSerializer={serialize:l}:ou.assertOptions(l,{encode:ws.function,serialize:ws.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),ou.assertOptions(i,{baseUrl:ws.spelling("baseURL"),withXsrfToken:ws.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let f=d&&B.merge(d.common,d[i.method]);d&&B.forEach(["delete","get","head","post","put","patch","common"],C=>{delete d[C]}),i.headers=gn.concat(f,d);const m=[];let p=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(i)===!1||(p=p&&A.synchronous,m.unshift(A.fulfilled,A.rejected))});const y=[];this.interceptors.response.forEach(function(A){y.push(A.fulfilled,A.rejected)});let b,v=0,w;if(!p){const C=[V0.bind(this),void 0];for(C.unshift(...m),C.push(...y),w=C.length,b=Promise.resolve(i);v<w;)b=b.then(C[v++],C[v++]);return b}w=m.length;let E=i;for(;v<w;){const C=m[v++],A=m[v++];try{E=C(E)}catch(D){A.call(this,D);break}}try{b=V0.call(this,E)}catch(C){return Promise.reject(C)}for(v=0,w=y.length;v<w;)b=b.then(y[v++],y[v++]);return b}getUri(n){n=za(this.defaults,n);const i=Lv(n.baseURL,n.url,n.allowAbsoluteUrls);return Dv(i,n.params,n.paramsSerializer)}};B.forEach(["delete","get","head","options"],function(n){Ea.prototype[n]=function(i,r){return this.request(za(r||{},{method:n,url:i,data:(r||{}).data}))}});B.forEach(["post","put","patch"],function(n){function i(r){return function(d,f,m){return this.request(za(m||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}Ea.prototype[n]=i(),Ea.prototype[n+"Form"]=i(!0)});let uC=class $v{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(d){i=d});const r=this;this.promise.then(l=>{if(!r._listeners)return;let d=r._listeners.length;for(;d-- >0;)r._listeners[d](l);r._listeners=null}),this.promise.then=l=>{let d;const f=new Promise(m=>{r.subscribe(m),d=m}).then(l);return f.cancel=function(){r.unsubscribe(d)},f},n(function(d,f,m){r.reason||(r.reason=new qr(d,f,m),i(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=r=>{n.abort(r)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new $v(function(l){n=l}),cancel:n}}};function dC(s){return function(i){return s.apply(null,i)}}function fC(s){return B.isObject(s)&&s.isAxiosError===!0}const Nh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Nh).forEach(([s,n])=>{Nh[n]=s});function qv(s){const n=new Ea(s),i=Sv(Ea.prototype.request,n);return B.extend(i,Ea.prototype,n,{allOwnKeys:!0}),B.extend(i,n,null,{allOwnKeys:!0}),i.create=function(l){return qv(za(s,l))},i}const St=qv(jl);St.Axios=Ea;St.CanceledError=qr;St.CancelToken=uC;St.isCancel=Uv;St.VERSION=Vv;St.toFormData=Tu;St.AxiosError=xe;St.Cancel=St.CanceledError;St.all=function(n){return Promise.all(n)};St.spread=dC;St.isAxiosError=fC;St.mergeConfig=za;St.AxiosHeaders=gn;St.formToJSON=s=>Bv(B.isHTMLForm(s)?new FormData(s):s);St.getAdapter=Hv.getAdapter;St.HttpStatusCode=Nh;St.default=St;const{Axios:Q4,AxiosError:Z4,CanceledError:J4,isCancel:eN,CancelToken:tN,VERSION:nN,all:sN,Cancel:iN,isAxiosError:aN,spread:rN,toFormData:oN,AxiosHeaders:lN,HttpStatusCode:cN,formToJSON:uN,getAdapter:dN,mergeConfig:fN}=St,hC="https://your-domain.com/api",fe=St.create({baseURL:hC,headers:{"Content-Type":"application/json"},withCredentials:!0});fe.interceptors.request.use(s=>{const n=localStorage.getItem("token");return n&&(console.log("[API] Adding token to request:",s.url,"Token:",n.substring(0,20)+"..."),s.headers.Authorization=`Bearer ${n}`),s.data instanceof FormData&&(console.log("[API] FormData detected, removing Content-Type header for:",s.url),delete s.headers["Content-Type"]),s});fe.interceptors.response.use(s=>s,s=>(s.response?.status===401?(console.warn("[API] 401 Unauthorized - logging out user"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"):s.response?.status===400&&console.error("[API] 400 Bad Request:",s.response?.data),Promise.reject(s)));const Pi={login:async s=>{const n=await fe.post("/auth/login",s);return n.data?.data||n.data},register:async s=>{const n=await fe.post("/auth/register",s);return n.data?.data||n.data},sendOTP:async s=>(await fe.post(`/otp/send-to-email?email=${encodeURIComponent(s)}`)).data,updatePassword:async(s,n)=>(await fe.put("/auth/update-password",{oldPassword:s,newPassword:n})).data,resetPasswordByEmail:async(s,n,i)=>(await fe.put("/auth/reset-password-by-email",{email:s,password:n,otp:i})).data,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")}};function Bt(s,n="An error occurred"){if(s.response?.data?.error?.message)return s.response.data.error.message;if(s.response?.data?.message)return s.response.data.message;if(s.response?.data?.validationErrors){const i=s.response.data.validationErrors,r=Object.values(i)[0];if(Array.isArray(r)&&r.length>0)return r[0]}return s.message?s.message:n}function Fv(s){return s.response?.data?.error?.code?s.response.data.error.code:null}function mC(s){return Fv(s)==="Chat.Ban.UserBanned"}function pC(s){switch(Fv(s)){case"Chat.Ban.UserBanned":return"You are banned from this chat and cannot perform this action.";case"Chat.Ban.AlreadyBanned":return"This user is already banned from this chat.";case"Chat.Ban.CannotBanSelf":return"You cannot ban yourself.";case"Chat.Ban.CannotBanOwner":return"You cannot ban the owner of this chat.";default:return Bt(s,"An error occurred")}}const gC=()=>{try{return localStorage.getItem("token")}catch{return null}},yC=()=>{try{const s=localStorage.getItem("user");return s?JSON.parse(s):null}catch{return null}},tt=Sl(s=>({user:null,token:null,isLoading:!1,error:null,initialized:!1,initializeAuth:async()=>{const n=yC(),i=gC();if(console.log("[authStore] Initializing auth:",{hasUser:!!n,hasToken:!!i,user:n}),i&&n)try{console.log("[authStore] Validating stored token...");const{userService:r}=await Zs(async()=>{const{userService:d}=await Promise.resolve().then(()=>vh);return{userService:d}},void 0),l=await r.getCurrentUser();console.log("[authStore] Token is valid, user:",l),s({user:l,token:i,initialized:!0})}catch(r){console.warn("[authStore] Stored token is invalid, clearing auth:",r?.message),localStorage.removeItem("token"),localStorage.removeItem("user"),s({user:null,token:null,initialized:!0})}else s({user:n,token:i,initialized:!0})},login:async n=>{s({isLoading:!0,error:null});try{console.log("[authStore] Logging in...");const i=await Pi.login(n);if(console.log("[authStore] Token received:",i?i.substring(0,20)+"...":"No token"),!i)throw new Error("No token received from login");localStorage.setItem("token",i),console.log("[authStore] Fetching user profile from /users/me...");const{userService:r}=await Zs(async()=>{const{userService:d}=await Promise.resolve().then(()=>vh);return{userService:d}},void 0),l=await r.getCurrentUser();!l.email&&n.credential.includes("@")&&(l.email=n.credential),console.log("[authStore] User profile fetched:",l),localStorage.setItem("user",JSON.stringify(l)),console.log("[authStore] Updating state with user and token..."),s({user:l,token:i,isLoading:!1}),console.log("[authStore] Login complete, state updated")}catch(i){const r=Bt(i,"Login failed");throw console.error("[authStore] Login error:",r,i),s({error:r,isLoading:!1}),i}},register:async(n,i,r,l)=>{s({isLoading:!0,error:null});try{console.log("[authStore] Registering user...");const d=await Pi.register({email:n,username:i,password:r,otpCode:l});if(console.log("[authStore] Token received:",d?d.substring(0,20)+"...":"No token"),!d)throw new Error("No token received from registration");localStorage.setItem("token",d),console.log("[authStore] Fetching user profile from /users/me...");const{userService:f}=await Zs(async()=>{const{userService:p}=await Promise.resolve().then(()=>vh);return{userService:p}},void 0),m=await f.getCurrentUser();m.email||(m.email=n),console.log("[authStore] User profile fetched:",m),localStorage.setItem("user",JSON.stringify(m)),console.log("[authStore] Updating state with user and token..."),s({user:m,token:d,isLoading:!1}),console.log("[authStore] Registration complete, state updated")}catch(d){const f=Bt(d,"Registration failed");throw console.error("[authStore] Registration error:",f,d),s({error:f,isLoading:!1}),d}},logout:()=>{Pi.logout(),s({user:null,token:null})},setUser:n=>{localStorage.setItem("user",JSON.stringify(n)),s({user:n})},clearError:()=>s({error:null})})),Tl=()=>{const s=tt(v=>v.user),n=tt(v=>v.token),i=tt(v=>v.isLoading),r=tt(v=>v.initialized),l=tt(v=>v.error),d=tt(v=>v.login),f=tt(v=>v.register),m=tt(v=>v.logout),p=tt(v=>v.setUser),y=tt(v=>v.clearError),b=tt(v=>v.initializeAuth);return{user:s,token:n,isLoading:i,initialized:r,error:l,login:d,register:f,logout:m,setUser:p,clearError:y,initializeAuth:b,isAuthenticated:!!n&&!!s}},bC=({children:s})=>{const{isAuthenticated:n,isLoading:i,initialized:r}=Tl();return console.log("[ProtectedRoute] Current state:",{isAuthenticated:n,isLoading:i,initialized:r}),i||!r?c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"var(--background)",color:"var(--text)"},children:c.jsx("div",{children:"Loading..."})}):n?c.jsx(c.Fragment,{children:s}):(console.warn("[ProtectedRoute] Not authenticated, redirecting to login"),c.jsx(kr,{to:"/login",replace:!0}))},mm=_.createContext({});function pm(s){const n=_.useRef(null);return n.current===null&&(n.current=s()),n.current}const gm=typeof window<"u",Gv=gm?_.useLayoutEffect:_.useEffect,Mu=_.createContext(null);function ym(s,n){s.indexOf(n)===-1&&s.push(n)}function bm(s,n){const i=s.indexOf(n);i>-1&&s.splice(i,1)}const ei=(s,n,i)=>i>n?n:i<s?s:i;let vm=()=>{};const ti={},Yv=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function Xv(s){return typeof s=="object"&&s!==null}const Wv=s=>/^0[^.\s]+$/u.test(s);function xm(s){let n;return()=>(n===void 0&&(n=s()),n)}const Yn=s=>s,vC=(s,n)=>i=>n(s(i)),El=(...s)=>s.reduce(vC),ml=(s,n,i)=>{const r=n-s;return r===0?1:(i-s)/r};class Sm{constructor(){this.subscriptions=[]}add(n){return ym(this.subscriptions,n),()=>bm(this.subscriptions,n)}notify(n,i,r){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](n,i,r);else for(let d=0;d<l;d++){const f=this.subscriptions[d];f&&f(n,i,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const js=s=>s*1e3,Gn=s=>s/1e3;function Kv(s,n){return n?s*(1e3/n):0}const Qv=(s,n,i)=>(((1-3*i+3*n)*s+(3*i-6*n))*s+3*n)*s,xC=1e-7,SC=12;function wC(s,n,i,r,l){let d,f,m=0;do f=n+(i-n)/2,d=Qv(f,r,l)-s,d>0?i=f:n=f;while(Math.abs(d)>xC&&++m<SC);return f}function Ml(s,n,i,r){if(s===n&&i===r)return Yn;const l=d=>wC(d,0,1,s,i);return d=>d===0||d===1?d:Qv(l(d),n,r)}const Zv=s=>n=>n<=.5?s(2*n)/2:(2-s(2*(1-n)))/2,Jv=s=>n=>1-s(1-n),ex=Ml(.33,1.53,.69,.99),wm=Jv(ex),tx=Zv(wm),nx=s=>(s*=2)<1?.5*wm(s):.5*(2-Math.pow(2,-10*(s-1))),_m=s=>1-Math.sin(Math.acos(s)),sx=Jv(_m),ix=Zv(_m),_C=Ml(.42,0,1,1),CC=Ml(0,0,.58,1),ax=Ml(.42,0,.58,1),jC=s=>Array.isArray(s)&&typeof s[0]!="number",rx=s=>Array.isArray(s)&&typeof s[0]=="number",TC={linear:Yn,easeIn:_C,easeInOut:ax,easeOut:CC,circIn:_m,circInOut:ix,circOut:sx,backIn:wm,backInOut:tx,backOut:ex,anticipate:nx},EC=s=>typeof s=="string",q0=s=>{if(rx(s)){vm(s.length===4);const[n,i,r,l]=s;return Ml(n,i,r,l)}else if(EC(s))return TC[s];return s},Qc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function MC(s,n){let i=new Set,r=new Set,l=!1,d=!1;const f=new WeakSet;let m={delta:0,timestamp:0,isProcessing:!1};function p(b){f.has(b)&&(y.schedule(b),s()),b(m)}const y={schedule:(b,v=!1,w=!1)=>{const C=w&&l?i:r;return v&&f.add(b),C.has(b)||C.add(b),b},cancel:b=>{r.delete(b),f.delete(b)},process:b=>{if(m=b,l){d=!0;return}l=!0,[i,r]=[r,i],i.forEach(p),i.clear(),l=!1,d&&(d=!1,y.process(b))}};return y}const AC=40;function ox(s,n){let i=!1,r=!0;const l={delta:0,timestamp:0,isProcessing:!1},d=()=>i=!0,f=Qc.reduce((V,J)=>(V[J]=MC(d),V),{}),{setup:m,read:p,resolveKeyframes:y,preUpdate:b,update:v,preRender:w,render:E,postRender:C}=f,A=()=>{const V=ti.useManualTiming?l.timestamp:performance.now();i=!1,ti.useManualTiming||(l.delta=r?1e3/60:Math.max(Math.min(V-l.timestamp,AC),1)),l.timestamp=V,l.isProcessing=!0,m.process(l),p.process(l),y.process(l),b.process(l),v.process(l),w.process(l),E.process(l),C.process(l),l.isProcessing=!1,i&&n&&(r=!1,s(A))},D=()=>{i=!0,r=!0,l.isProcessing||s(A)};return{schedule:Qc.reduce((V,J)=>{const G=f[J];return V[J]=(ee,se=!1,W=!1)=>(i||D(),G.schedule(ee,se,W)),V},{}),cancel:V=>{for(let J=0;J<Qc.length;J++)f[Qc[J]].cancel(V)},state:l,steps:f}}const{schedule:rt,cancel:Hi,state:Xt,steps:nh}=ox(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yn,!0);let lu;function kC(){lu=void 0}const mn={now:()=>(lu===void 0&&mn.set(Xt.isProcessing||ti.useManualTiming?Xt.timestamp:performance.now()),lu),set:s=>{lu=s,queueMicrotask(kC)}},lx=s=>n=>typeof n=="string"&&n.startsWith(s),cx=lx("--"),RC=lx("var(--"),Cm=s=>RC(s)?NC.test(s.split("/*")[0].trim()):!1,NC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fr={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},pl={...Fr,transform:s=>ei(0,1,s)},Zc={...Fr,default:1},ll=s=>Math.round(s*1e5)/1e5,jm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DC(s){return s==null}const zC=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Tm=(s,n)=>i=>!!(typeof i=="string"&&zC.test(i)&&i.startsWith(s)||n&&!DC(i)&&Object.prototype.hasOwnProperty.call(i,n)),ux=(s,n,i)=>r=>{if(typeof r!="string")return r;const[l,d,f,m]=r.match(jm);return{[s]:parseFloat(l),[n]:parseFloat(d),[i]:parseFloat(f),alpha:m!==void 0?parseFloat(m):1}},BC=s=>ei(0,255,s),sh={...Fr,transform:s=>Math.round(BC(s))},ja={test:Tm("rgb","red"),parse:ux("red","green","blue"),transform:({red:s,green:n,blue:i,alpha:r=1})=>"rgba("+sh.transform(s)+", "+sh.transform(n)+", "+sh.transform(i)+", "+ll(pl.transform(r))+")"};function UC(s){let n="",i="",r="",l="";return s.length>5?(n=s.substring(1,3),i=s.substring(3,5),r=s.substring(5,7),l=s.substring(7,9)):(n=s.substring(1,2),i=s.substring(2,3),r=s.substring(3,4),l=s.substring(4,5),n+=n,i+=i,r+=r,l+=l),{red:parseInt(n,16),green:parseInt(i,16),blue:parseInt(r,16),alpha:l?parseInt(l,16)/255:1}}const Dh={test:Tm("#"),parse:UC,transform:ja.transform},Al=s=>({test:n=>typeof n=="string"&&n.endsWith(s)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${s}`}),Oi=Al("deg"),Ts=Al("%"),pe=Al("px"),OC=Al("vh"),LC=Al("vw"),F0={...Ts,parse:s=>Ts.parse(s)/100,transform:s=>Ts.transform(s*100)},Rr={test:Tm("hsl","hue"),parse:ux("hue","saturation","lightness"),transform:({hue:s,saturation:n,lightness:i,alpha:r=1})=>"hsla("+Math.round(s)+", "+Ts.transform(ll(n))+", "+Ts.transform(ll(i))+", "+ll(pl.transform(r))+")"},Et={test:s=>ja.test(s)||Dh.test(s)||Rr.test(s),parse:s=>ja.test(s)?ja.parse(s):Rr.test(s)?Rr.parse(s):Dh.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?ja.transform(s):Rr.transform(s),getAnimatableNone:s=>{const n=Et.parse(s);return n.alpha=0,Et.transform(n)}},IC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function PC(s){return isNaN(s)&&typeof s=="string"&&(s.match(jm)?.length||0)+(s.match(IC)?.length||0)>0}const dx="number",fx="color",HC="var",VC="var(",G0="${}",$C=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gl(s){const n=s.toString(),i=[],r={color:[],number:[],var:[]},l=[];let d=0;const m=n.replace($C,p=>(Et.test(p)?(r.color.push(d),l.push(fx),i.push(Et.parse(p))):p.startsWith(VC)?(r.var.push(d),l.push(HC),i.push(p)):(r.number.push(d),l.push(dx),i.push(parseFloat(p))),++d,G0)).split(G0);return{values:i,split:m,indexes:r,types:l}}function hx(s){return gl(s).values}function mx(s){const{split:n,types:i}=gl(s),r=n.length;return l=>{let d="";for(let f=0;f<r;f++)if(d+=n[f],l[f]!==void 0){const m=i[f];m===dx?d+=ll(l[f]):m===fx?d+=Et.transform(l[f]):d+=l[f]}return d}}const qC=s=>typeof s=="number"?0:Et.test(s)?Et.getAnimatableNone(s):s;function FC(s){const n=hx(s);return mx(s)(n.map(qC))}const Vi={test:PC,parse:hx,createTransformer:mx,getAnimatableNone:FC};function ih(s,n,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?s+(n-s)*6*i:i<1/2?n:i<2/3?s+(n-s)*(2/3-i)*6:s}function GC({hue:s,saturation:n,lightness:i,alpha:r}){s/=360,n/=100,i/=100;let l=0,d=0,f=0;if(!n)l=d=f=i;else{const m=i<.5?i*(1+n):i+n-i*n,p=2*i-m;l=ih(p,m,s+1/3),d=ih(p,m,s),f=ih(p,m,s-1/3)}return{red:Math.round(l*255),green:Math.round(d*255),blue:Math.round(f*255),alpha:r}}function gu(s,n){return i=>i>0?n:s}const ut=(s,n,i)=>s+(n-s)*i,ah=(s,n,i)=>{const r=s*s,l=i*(n*n-r)+r;return l<0?0:Math.sqrt(l)},YC=[Dh,ja,Rr],XC=s=>YC.find(n=>n.test(s));function Y0(s){const n=XC(s);if(!n)return!1;let i=n.parse(s);return n===Rr&&(i=GC(i)),i}const X0=(s,n)=>{const i=Y0(s),r=Y0(n);if(!i||!r)return gu(s,n);const l={...i};return d=>(l.red=ah(i.red,r.red,d),l.green=ah(i.green,r.green,d),l.blue=ah(i.blue,r.blue,d),l.alpha=ut(i.alpha,r.alpha,d),ja.transform(l))},zh=new Set(["none","hidden"]);function WC(s,n){return zh.has(s)?i=>i<=0?s:n:i=>i>=1?n:s}function KC(s,n){return i=>ut(s,n,i)}function Em(s){return typeof s=="number"?KC:typeof s=="string"?Cm(s)?gu:Et.test(s)?X0:JC:Array.isArray(s)?px:typeof s=="object"?Et.test(s)?X0:QC:gu}function px(s,n){const i=[...s],r=i.length,l=s.map((d,f)=>Em(d)(d,n[f]));return d=>{for(let f=0;f<r;f++)i[f]=l[f](d);return i}}function QC(s,n){const i={...s,...n},r={};for(const l in i)s[l]!==void 0&&n[l]!==void 0&&(r[l]=Em(s[l])(s[l],n[l]));return l=>{for(const d in r)i[d]=r[d](l);return i}}function ZC(s,n){const i=[],r={color:0,var:0,number:0};for(let l=0;l<n.values.length;l++){const d=n.types[l],f=s.indexes[d][r[d]],m=s.values[f]??0;i[l]=m,r[d]++}return i}const JC=(s,n)=>{const i=Vi.createTransformer(n),r=gl(s),l=gl(n);return r.indexes.var.length===l.indexes.var.length&&r.indexes.color.length===l.indexes.color.length&&r.indexes.number.length>=l.indexes.number.length?zh.has(s)&&!l.values.length||zh.has(n)&&!r.values.length?WC(s,n):El(px(ZC(r,l),l.values),i):gu(s,n)};function gx(s,n,i){return typeof s=="number"&&typeof n=="number"&&typeof i=="number"?ut(s,n,i):Em(s)(s,n)}const e2=s=>{const n=({timestamp:i})=>s(i);return{start:(i=!0)=>rt.update(n,i),stop:()=>Hi(n),now:()=>Xt.isProcessing?Xt.timestamp:mn.now()}},yx=(s,n,i=10)=>{let r="";const l=Math.max(Math.round(n/i),2);for(let d=0;d<l;d++)r+=Math.round(s(d/(l-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},yu=2e4;function Mm(s){let n=0;const i=50;let r=s.next(n);for(;!r.done&&n<yu;)n+=i,r=s.next(n);return n>=yu?1/0:n}function t2(s,n=100,i){const r=i({...s,keyframes:[0,n]}),l=Math.min(Mm(r),yu);return{type:"keyframes",ease:d=>r.next(l*d).value/n,duration:Gn(l)}}const n2=5;function bx(s,n,i){const r=Math.max(n-n2,0);return Kv(i-s(r),n-r)}const mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},rh=.001;function s2({duration:s=mt.duration,bounce:n=mt.bounce,velocity:i=mt.velocity,mass:r=mt.mass}){let l,d,f=1-n;f=ei(mt.minDamping,mt.maxDamping,f),s=ei(mt.minDuration,mt.maxDuration,Gn(s)),f<1?(l=y=>{const b=y*f,v=b*s,w=b-i,E=Bh(y,f),C=Math.exp(-v);return rh-w/E*C},d=y=>{const v=y*f*s,w=v*i+i,E=Math.pow(f,2)*Math.pow(y,2)*s,C=Math.exp(-v),A=Bh(Math.pow(y,2),f);return(-l(y)+rh>0?-1:1)*((w-E)*C)/A}):(l=y=>{const b=Math.exp(-y*s),v=(y-i)*s+1;return-rh+b*v},d=y=>{const b=Math.exp(-y*s),v=(i-y)*(s*s);return b*v});const m=5/s,p=a2(l,d,m);if(s=js(s),isNaN(p))return{stiffness:mt.stiffness,damping:mt.damping,duration:s};{const y=Math.pow(p,2)*r;return{stiffness:y,damping:f*2*Math.sqrt(r*y),duration:s}}}const i2=12;function a2(s,n,i){let r=i;for(let l=1;l<i2;l++)r=r-s(r)/n(r);return r}function Bh(s,n){return s*Math.sqrt(1-n*n)}const r2=["duration","bounce"],o2=["stiffness","damping","mass"];function W0(s,n){return n.some(i=>s[i]!==void 0)}function l2(s){let n={velocity:mt.velocity,stiffness:mt.stiffness,damping:mt.damping,mass:mt.mass,isResolvedFromDuration:!1,...s};if(!W0(s,o2)&&W0(s,r2))if(s.visualDuration){const i=s.visualDuration,r=2*Math.PI/(i*1.2),l=r*r,d=2*ei(.05,1,1-(s.bounce||0))*Math.sqrt(l);n={...n,mass:mt.mass,stiffness:l,damping:d}}else{const i=s2(s);n={...n,...i,mass:mt.mass},n.isResolvedFromDuration=!0}return n}function bu(s=mt.visualDuration,n=mt.bounce){const i=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:n}:s;let{restSpeed:r,restDelta:l}=i;const d=i.keyframes[0],f=i.keyframes[i.keyframes.length-1],m={done:!1,value:d},{stiffness:p,damping:y,mass:b,duration:v,velocity:w,isResolvedFromDuration:E}=l2({...i,velocity:-Gn(i.velocity||0)}),C=w||0,A=y/(2*Math.sqrt(p*b)),D=f-d,P=Gn(Math.sqrt(p/b)),Q=Math.abs(D)<5;r||(r=Q?mt.restSpeed.granular:mt.restSpeed.default),l||(l=Q?mt.restDelta.granular:mt.restDelta.default);let V;if(A<1){const G=Bh(P,A);V=ee=>{const se=Math.exp(-A*P*ee);return f-se*((C+A*P*D)/G*Math.sin(G*ee)+D*Math.cos(G*ee))}}else if(A===1)V=G=>f-Math.exp(-P*G)*(D+(C+P*D)*G);else{const G=P*Math.sqrt(A*A-1);V=ee=>{const se=Math.exp(-A*P*ee),W=Math.min(G*ee,300);return f-se*((C+A*P*D)*Math.sinh(W)+G*D*Math.cosh(W))/G}}const J={calculatedDuration:E&&v||null,next:G=>{const ee=V(G);if(E)m.done=G>=v;else{let se=G===0?C:0;A<1&&(se=G===0?js(C):bx(V,G,ee));const W=Math.abs(se)<=r,le=Math.abs(f-ee)<=l;m.done=W&&le}return m.value=m.done?f:ee,m},toString:()=>{const G=Math.min(Mm(J),yu),ee=yx(se=>J.next(G*se).value,G,30);return G+"ms "+ee},toTransition:()=>{}};return J}bu.applyToOptions=s=>{const n=t2(s,100,bu);return s.ease=n.ease,s.duration=js(n.duration),s.type="keyframes",s};function Uh({keyframes:s,velocity:n=0,power:i=.8,timeConstant:r=325,bounceDamping:l=10,bounceStiffness:d=500,modifyTarget:f,min:m,max:p,restDelta:y=.5,restSpeed:b}){const v=s[0],w={done:!1,value:v},E=W=>m!==void 0&&W<m||p!==void 0&&W>p,C=W=>m===void 0?p:p===void 0||Math.abs(m-W)<Math.abs(p-W)?m:p;let A=i*n;const D=v+A,P=f===void 0?D:f(D);P!==D&&(A=P-v);const Q=W=>-A*Math.exp(-W/r),V=W=>P+Q(W),J=W=>{const le=Q(W),ue=V(W);w.done=Math.abs(le)<=y,w.value=w.done?P:ue};let G,ee;const se=W=>{E(w.value)&&(G=W,ee=bu({keyframes:[w.value,C(w.value)],velocity:bx(V,W,w.value),damping:l,stiffness:d,restDelta:y,restSpeed:b}))};return se(0),{calculatedDuration:null,next:W=>{let le=!1;return!ee&&G===void 0&&(le=!0,J(W),se(W)),G!==void 0&&W>=G?ee.next(W-G):(!le&&J(W),w)}}}function c2(s,n,i){const r=[],l=i||ti.mix||gx,d=s.length-1;for(let f=0;f<d;f++){let m=l(s[f],s[f+1]);if(n){const p=Array.isArray(n)?n[f]||Yn:n;m=El(p,m)}r.push(m)}return r}function u2(s,n,{clamp:i=!0,ease:r,mixer:l}={}){const d=s.length;if(vm(d===n.length),d===1)return()=>n[0];if(d===2&&n[0]===n[1])return()=>n[1];const f=s[0]===s[1];s[0]>s[d-1]&&(s=[...s].reverse(),n=[...n].reverse());const m=c2(n,r,l),p=m.length,y=b=>{if(f&&b<s[0])return n[0];let v=0;if(p>1)for(;v<s.length-2&&!(b<s[v+1]);v++);const w=ml(s[v],s[v+1],b);return m[v](w)};return i?b=>y(ei(s[0],s[d-1],b)):y}function d2(s,n){const i=s[s.length-1];for(let r=1;r<=n;r++){const l=ml(0,n,r);s.push(ut(i,1,l))}}function f2(s){const n=[0];return d2(n,s.length-1),n}function h2(s,n){return s.map(i=>i*n)}function m2(s,n){return s.map(()=>n||ax).splice(0,s.length-1)}function cl({duration:s=300,keyframes:n,times:i,ease:r="easeInOut"}){const l=jC(r)?r.map(q0):q0(r),d={done:!1,value:n[0]},f=h2(i&&i.length===n.length?i:f2(n),s),m=u2(f,n,{ease:Array.isArray(l)?l:m2(n,l)});return{calculatedDuration:s,next:p=>(d.value=m(p),d.done=p>=s,d)}}const p2=s=>s!==null;function Am(s,{repeat:n,repeatType:i="loop"},r,l=1){const d=s.filter(p2),m=l<0||n&&i!=="loop"&&n%2===1?0:d.length-1;return!m||r===void 0?d[m]:r}const g2={decay:Uh,inertia:Uh,tween:cl,keyframes:cl,spring:bu};function vx(s){typeof s.type=="string"&&(s.type=g2[s.type])}class km{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,i){return this.finished.then(n,i)}}const y2=s=>s/100;class Rm extends km{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:i}=this.options;i&&i.updatedAt!==mn.now()&&this.tick(mn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;vx(n);const{type:i=cl,repeat:r=0,repeatDelay:l=0,repeatType:d,velocity:f=0}=n;let{keyframes:m}=n;const p=i||cl;p!==cl&&typeof m[0]!="number"&&(this.mixKeyframes=El(y2,gx(m[0],m[1])),m=[0,100]);const y=p({...n,keyframes:m});d==="mirror"&&(this.mirroredGenerator=p({...n,keyframes:[...m].reverse(),velocity:-f})),y.calculatedDuration===null&&(y.calculatedDuration=Mm(y));const{calculatedDuration:b}=y;this.calculatedDuration=b,this.resolvedDuration=b+l,this.totalDuration=this.resolvedDuration*(r+1)-l,this.generator=y}updateTime(n){const i=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=i}tick(n,i=!1){const{generator:r,totalDuration:l,mixKeyframes:d,mirroredGenerator:f,resolvedDuration:m,calculatedDuration:p}=this;if(this.startTime===null)return r.next(0);const{delay:y=0,keyframes:b,repeat:v,repeatType:w,repeatDelay:E,type:C,onUpdate:A,finalKeyframe:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-l/this.speed,this.startTime)),i?this.currentTime=n:this.updateTime(n);const P=this.currentTime-y*(this.playbackSpeed>=0?1:-1),Q=this.playbackSpeed>=0?P<0:P>l;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let V=this.currentTime,J=r;if(v){const W=Math.min(this.currentTime,l)/m;let le=Math.floor(W),ue=W%1;!ue&&W>=1&&(ue=1),ue===1&&le--,le=Math.min(le,v+1),!!(le%2)&&(w==="reverse"?(ue=1-ue,E&&(ue-=E/m)):w==="mirror"&&(J=f)),V=ei(0,1,ue)*m}const G=Q?{done:!1,value:b[0]}:J.next(V);d&&(G.value=d(G.value));let{done:ee}=G;!Q&&p!==null&&(ee=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const se=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ee);return se&&C!==Uh&&(G.value=Am(b,this.options,D,this.speed)),A&&A(G.value),se&&this.finish(),G}then(n,i){return this.finished.then(n,i)}get duration(){return Gn(this.calculatedDuration)}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+Gn(n)}get time(){return Gn(this.currentTime)}set time(n){n=js(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(mn.now());const i=this.playbackSpeed!==n;this.playbackSpeed=n,i&&(this.time=Gn(this.currentTime))}play(){if(this.isStopped)return;const{driver:n=e2,startTime:i}=this.options;this.driver||(this.driver=n(l=>this.tick(l))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=i??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(mn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),n.observe(this)}}function b2(s){for(let n=1;n<s.length;n++)s[n]??(s[n]=s[n-1])}const Ta=s=>s*180/Math.PI,Oh=s=>{const n=Ta(Math.atan2(s[1],s[0]));return Lh(n)},v2={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:Oh,rotateZ:Oh,skewX:s=>Ta(Math.atan(s[1])),skewY:s=>Ta(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},Lh=s=>(s=s%360,s<0&&(s+=360),s),K0=Oh,Q0=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),Z0=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),x2={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Q0,scaleY:Z0,scale:s=>(Q0(s)+Z0(s))/2,rotateX:s=>Lh(Ta(Math.atan2(s[6],s[5]))),rotateY:s=>Lh(Ta(Math.atan2(-s[2],s[0]))),rotateZ:K0,rotate:K0,skewX:s=>Ta(Math.atan(s[4])),skewY:s=>Ta(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function Ih(s){return s.includes("scale")?1:0}function Ph(s,n){if(!s||s==="none")return Ih(n);const i=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,l;if(i)r=x2,l=i;else{const m=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=v2,l=m}if(!l)return Ih(n);const d=r[n],f=l[1].split(",").map(w2);return typeof d=="function"?d(f):f[d]}const S2=(s,n)=>{const{transform:i="none"}=getComputedStyle(s);return Ph(i,n)};function w2(s){return parseFloat(s.trim())}const Gr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Yr=new Set(Gr),J0=s=>s===Fr||s===pe,_2=new Set(["x","y","z"]),C2=Gr.filter(s=>!_2.has(s));function j2(s){const n=[];return C2.forEach(i=>{const r=s.getValue(i);r!==void 0&&(n.push([i,r.get()]),r.set(i.startsWith("scale")?1:0))}),n}const Ma={width:({x:s},{paddingLeft:n="0",paddingRight:i="0"})=>s.max-s.min-parseFloat(n)-parseFloat(i),height:({y:s},{paddingTop:n="0",paddingBottom:i="0"})=>s.max-s.min-parseFloat(n)-parseFloat(i),top:(s,{top:n})=>parseFloat(n),left:(s,{left:n})=>parseFloat(n),bottom:({y:s},{top:n})=>parseFloat(n)+(s.max-s.min),right:({x:s},{left:n})=>parseFloat(n)+(s.max-s.min),x:(s,{transform:n})=>Ph(n,"x"),y:(s,{transform:n})=>Ph(n,"y")};Ma.translateX=Ma.x;Ma.translateY=Ma.y;const Aa=new Set;let Hh=!1,Vh=!1,$h=!1;function xx(){if(Vh){const s=Array.from(Aa).filter(r=>r.needsMeasurement),n=new Set(s.map(r=>r.element)),i=new Map;n.forEach(r=>{const l=j2(r);l.length&&(i.set(r,l),r.render())}),s.forEach(r=>r.measureInitialState()),n.forEach(r=>{r.render();const l=i.get(r);l&&l.forEach(([d,f])=>{r.getValue(d)?.set(f)})}),s.forEach(r=>r.measureEndState()),s.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Vh=!1,Hh=!1,Aa.forEach(s=>s.complete($h)),Aa.clear()}function Sx(){Aa.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(Vh=!0)})}function T2(){$h=!0,Sx(),xx(),$h=!1}class Nm{constructor(n,i,r,l,d,f=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=i,this.name=r,this.motionValue=l,this.element=d,this.isAsync=f}scheduleResolve(){this.state="scheduled",this.isAsync?(Aa.add(this),Hh||(Hh=!0,rt.read(Sx),rt.resolveKeyframes(xx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:i,element:r,motionValue:l}=this;if(n[0]===null){const d=l?.get(),f=n[n.length-1];if(d!==void 0)n[0]=d;else if(r&&i){const m=r.readValue(i,f);m!=null&&(n[0]=m)}n[0]===void 0&&(n[0]=f),l&&d===void 0&&l.set(n[0])}b2(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),Aa.delete(this)}cancel(){this.state==="scheduled"&&(Aa.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const E2=s=>s.startsWith("--");function M2(s,n,i){E2(n)?s.style.setProperty(n,i):s.style[n]=i}const A2=xm(()=>window.ScrollTimeline!==void 0),k2={};function R2(s,n){const i=xm(s);return()=>k2[n]??i()}const wx=R2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),al=([s,n,i,r])=>`cubic-bezier(${s}, ${n}, ${i}, ${r})`,eb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:al([0,.65,.55,1]),circOut:al([.55,0,1,.45]),backIn:al([.31,.01,.66,-.59]),backOut:al([.33,1.53,.69,.99])};function _x(s,n){if(s)return typeof s=="function"?wx()?yx(s,n):"ease-out":rx(s)?al(s):Array.isArray(s)?s.map(i=>_x(i,n)||eb.easeOut):eb[s]}function N2(s,n,i,{delay:r=0,duration:l=300,repeat:d=0,repeatType:f="loop",ease:m="easeOut",times:p}={},y=void 0){const b={[n]:i};p&&(b.offset=p);const v=_x(m,l);Array.isArray(v)&&(b.easing=v);const w={delay:r,duration:l,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:d+1,direction:f==="reverse"?"alternate":"normal"};return y&&(w.pseudoElement=y),s.animate(b,w)}function Cx(s){return typeof s=="function"&&"applyToOptions"in s}function D2({type:s,...n}){return Cx(s)&&wx()?s.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class z2 extends km{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:i,name:r,keyframes:l,pseudoElement:d,allowFlatten:f=!1,finalKeyframe:m,onComplete:p}=n;this.isPseudoElement=!!d,this.allowFlatten=f,this.options=n,vm(typeof n.type!="string");const y=D2(n);this.animation=N2(i,r,l,y,d),y.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!d){const b=Am(l,this.options,m,this.speed);this.updateMotionValue?this.updateMotionValue(b):M2(i,r,b),this.animation.cancel()}p?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const n=this.animation.effect?.getComputedTiming?.().duration||0;return Gn(Number(n))}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+Gn(n)}get time(){return Gn(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=js(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:i}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,n&&A2()?(this.animation.timeline=n,Yn):i(this)}}const jx={anticipate:nx,backInOut:tx,circInOut:ix};function B2(s){return s in jx}function U2(s){typeof s.ease=="string"&&B2(s.ease)&&(s.ease=jx[s.ease])}const tb=10;class O2 extends z2{constructor(n){U2(n),vx(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:i,onUpdate:r,onComplete:l,element:d,...f}=this.options;if(!i)return;if(n!==void 0){i.set(n);return}const m=new Rm({...f,autoplay:!1}),p=js(this.finishedTime??this.time);i.setWithVelocity(m.sample(p-tb).value,m.sample(p).value,tb),m.stop()}}const nb=(s,n)=>n==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Vi.test(s)||s==="0")&&!s.startsWith("url("));function L2(s){const n=s[0];if(s.length===1)return!0;for(let i=0;i<s.length;i++)if(s[i]!==n)return!0}function I2(s,n,i,r){const l=s[0];if(l===null)return!1;if(n==="display"||n==="visibility")return!0;const d=s[s.length-1],f=nb(l,n),m=nb(d,n);return!f||!m?!1:L2(s)||(i==="spring"||Cx(i))&&r}function qh(s){s.duration=0,s.type="keyframes"}const P2=new Set(["opacity","clipPath","filter","transform"]),H2=xm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function V2(s){const{motionValue:n,name:i,repeatDelay:r,repeatType:l,damping:d,type:f}=s;if(!(n?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:p,transformTemplate:y}=n.owner.getProps();return H2()&&i&&P2.has(i)&&(i!=="transform"||!y)&&!p&&!r&&l!=="mirror"&&d!==0&&f!=="inertia"}const $2=40;class q2 extends km{constructor({autoplay:n=!0,delay:i=0,type:r="keyframes",repeat:l=0,repeatDelay:d=0,repeatType:f="loop",keyframes:m,name:p,motionValue:y,element:b,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=mn.now();const w={autoplay:n,delay:i,type:r,repeat:l,repeatDelay:d,repeatType:f,name:p,motionValue:y,element:b,...v},E=b?.KeyframeResolver||Nm;this.keyframeResolver=new E(m,(C,A,D)=>this.onKeyframesResolved(C,A,w,!D),p,y,b),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(n,i,r,l){this.keyframeResolver=void 0;const{name:d,type:f,velocity:m,delay:p,isHandoff:y,onUpdate:b}=r;this.resolvedAt=mn.now(),I2(n,d,f,m)||((ti.instantAnimations||!p)&&b?.(Am(n,r,i)),n[0]=n[n.length-1],qh(r),r.repeat=0);const w={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>$2?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:i,...r,keyframes:n},E=!y&&V2(w)?new O2({...w,element:w.motionValue.owner.current}):new Rm(w);E.finished.then(()=>this.notifyFinished()).catch(Yn),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(n,i){return this.finished.finally(n).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),T2()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const F2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function G2(s){const n=F2.exec(s);if(!n)return[,];const[,i,r,l]=n;return[`--${i??r}`,l]}function Tx(s,n,i=1){const[r,l]=G2(s);if(!r)return;const d=window.getComputedStyle(n).getPropertyValue(r);if(d){const f=d.trim();return Yv(f)?parseFloat(f):f}return Cm(l)?Tx(l,n,i+1):l}function Dm(s,n){return s?.[n]??s?.default??s}const Ex=new Set(["width","height","top","left","right","bottom",...Gr]),Y2={test:s=>s==="auto",parse:s=>s},Mx=s=>n=>n.test(s),Ax=[Fr,pe,Ts,Oi,LC,OC,Y2],sb=s=>Ax.find(Mx(s));function X2(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||Wv(s):!0}const W2=new Set(["brightness","contrast","saturate","opacity"]);function K2(s){const[n,i]=s.slice(0,-1).split("(");if(n==="drop-shadow")return s;const[r]=i.match(jm)||[];if(!r)return s;const l=i.replace(r,"");let d=W2.has(n)?1:0;return r!==i&&(d*=100),n+"("+d+l+")"}const Q2=/\b([a-z-]*)\(.*?\)/gu,Fh={...Vi,getAnimatableNone:s=>{const n=s.match(Q2);return n?n.map(K2).join(" "):s}},ib={...Fr,transform:Math.round},Z2={rotate:Oi,rotateX:Oi,rotateY:Oi,rotateZ:Oi,scale:Zc,scaleX:Zc,scaleY:Zc,scaleZ:Zc,skew:Oi,skewX:Oi,skewY:Oi,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:pl,originX:F0,originY:F0,originZ:pe},zm={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,backgroundPositionX:pe,backgroundPositionY:pe,...Z2,zIndex:ib,fillOpacity:pl,strokeOpacity:pl,numOctaves:ib},J2={...zm,color:Et,backgroundColor:Et,outlineColor:Et,fill:Et,stroke:Et,borderColor:Et,borderTopColor:Et,borderRightColor:Et,borderBottomColor:Et,borderLeftColor:Et,filter:Fh,WebkitFilter:Fh},kx=s=>J2[s];function Rx(s,n){let i=kx(s);return i!==Fh&&(i=Vi),i.getAnimatableNone?i.getAnimatableNone(n):void 0}const ej=new Set(["auto","none","0"]);function tj(s,n,i){let r=0,l;for(;r<s.length&&!l;){const d=s[r];typeof d=="string"&&!ej.has(d)&&gl(d).values.length&&(l=s[r]),r++}if(l&&i)for(const d of n)s[d]=Rx(i,l)}class nj extends Nm{constructor(n,i,r,l,d){super(n,i,r,l,d,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:i,name:r}=this;if(!i||!i.current)return;super.readKeyframes();for(let p=0;p<n.length;p++){let y=n[p];if(typeof y=="string"&&(y=y.trim(),Cm(y))){const b=Tx(y,i.current);b!==void 0&&(n[p]=b),p===n.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!Ex.has(r)||n.length!==2)return;const[l,d]=n,f=sb(l),m=sb(d);if(f!==m)if(J0(f)&&J0(m))for(let p=0;p<n.length;p++){const y=n[p];typeof y=="string"&&(n[p]=parseFloat(y))}else Ma[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:i}=this,r=[];for(let l=0;l<n.length;l++)(n[l]===null||X2(n[l]))&&r.push(l);r.length&&tj(n,r,i)}measureInitialState(){const{element:n,unresolvedKeyframes:i,name:r}=this;if(!n||!n.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ma[r](n.measureViewportBox(),window.getComputedStyle(n.current)),i[0]=this.measuredOrigin;const l=i[i.length-1];l!==void 0&&n.getValue(r,l).jump(l,!1)}measureEndState(){const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const l=n.getValue(i);l&&l.jump(this.measuredOrigin,!1);const d=r.length-1,f=r[d];r[d]=Ma[i](n.measureViewportBox(),window.getComputedStyle(n.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),this.removedTransforms?.length&&this.removedTransforms.forEach(([m,p])=>{n.getValue(m).set(p)}),this.resolveNoneKeyframes()}}function sj(s,n,i){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let r=document;const l=i?.[s]??r.querySelectorAll(s);return l?Array.from(l):[]}return Array.from(s)}const Nx=(s,n)=>n&&typeof s=="number"?n.transform(s):s;function Dx(s){return Xv(s)&&"offsetHeight"in s}const ab=30,ij=s=>!isNaN(parseFloat(s));class aj{constructor(n,i={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const l=mn.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty()},this.hasAnimated=!1,this.setCurrent(n),this.owner=i.owner}setCurrent(n){this.current=n,this.updatedAt=mn.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=ij(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,i){this.events[n]||(this.events[n]=new Sm);const r=this.events[n].add(i);return n==="change"?()=>{r(),rt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,i){this.passiveEffect=n,this.stopPassiveEffect=i}set(n){this.passiveEffect?this.passiveEffect(n,this.updateAndNotify):this.updateAndNotify(n)}setWithVelocity(n,i,r){this.set(i),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-r}jump(n,i=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>ab)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,ab);return Kv(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(n){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=n(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Pr(s,n){return new aj(s,n)}const{schedule:Bm}=ox(queueMicrotask,!1),es={x:!1,y:!1};function zx(){return es.x||es.y}function rj(s){return s==="x"||s==="y"?es[s]?null:(es[s]=!0,()=>{es[s]=!1}):es.x||es.y?null:(es.x=es.y=!0,()=>{es.x=es.y=!1})}function Bx(s,n){const i=sj(s),r=new AbortController,l={passive:!0,...n,signal:r.signal};return[i,l,()=>r.abort()]}function rb(s){return!(s.pointerType==="touch"||zx())}function oj(s,n,i={}){const[r,l,d]=Bx(s,i),f=m=>{if(!rb(m))return;const{target:p}=m,y=n(p,m);if(typeof y!="function"||!p)return;const b=v=>{rb(v)&&(y(v),p.removeEventListener("pointerleave",b))};p.addEventListener("pointerleave",b,l)};return r.forEach(m=>{m.addEventListener("pointerenter",f,l)}),d}const Ux=(s,n)=>n?s===n?!0:Ux(s,n.parentElement):!1,Um=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,lj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function cj(s){return lj.has(s.tagName)||s.tabIndex!==-1}const cu=new WeakSet;function ob(s){return n=>{n.key==="Enter"&&s(n)}}function oh(s,n){s.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const uj=(s,n)=>{const i=s.currentTarget;if(!i)return;const r=ob(()=>{if(cu.has(i))return;oh(i,"down");const l=ob(()=>{oh(i,"up")}),d=()=>oh(i,"cancel");i.addEventListener("keyup",l,n),i.addEventListener("blur",d,n)});i.addEventListener("keydown",r,n),i.addEventListener("blur",()=>i.removeEventListener("keydown",r),n)};function lb(s){return Um(s)&&!zx()}function dj(s,n,i={}){const[r,l,d]=Bx(s,i),f=m=>{const p=m.currentTarget;if(!lb(m))return;cu.add(p);const y=n(p,m),b=(E,C)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",w),cu.has(p)&&cu.delete(p),lb(E)&&typeof y=="function"&&y(E,{success:C})},v=E=>{b(E,p===window||p===document||i.useGlobalTarget||Ux(p,E.target))},w=E=>{b(E,!1)};window.addEventListener("pointerup",v,l),window.addEventListener("pointercancel",w,l)};return r.forEach(m=>{(i.useGlobalTarget?window:m).addEventListener("pointerdown",f,l),Dx(m)&&(m.addEventListener("focus",y=>uj(y,l)),!cj(m)&&!m.hasAttribute("tabindex")&&(m.tabIndex=0))}),d}function Ox(s){return Xv(s)&&"ownerSVGElement"in s}function fj(s){return Ox(s)&&s.tagName==="svg"}const tn=s=>!!(s&&s.getVelocity),hj=[...Ax,Et,Vi],mj=s=>hj.find(Mx(s)),Om=_.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function cb(s,n){if(typeof s=="function")return s(n);s!=null&&(s.current=n)}function pj(...s){return n=>{let i=!1;const r=s.map(l=>{const d=cb(l,n);return!i&&typeof d=="function"&&(i=!0),d});if(i)return()=>{for(let l=0;l<r.length;l++){const d=r[l];typeof d=="function"?d():cb(s[l],null)}}}}function gj(...s){return _.useCallback(pj(...s),s)}class yj extends _.Component{getSnapshotBeforeUpdate(n){const i=this.props.childRef.current;if(i&&n.isPresent&&!this.props.isPresent){const r=i.offsetParent,l=Dx(r)&&r.offsetWidth||0,d=this.props.sizeRef.current;d.height=i.offsetHeight||0,d.width=i.offsetWidth||0,d.top=i.offsetTop,d.left=i.offsetLeft,d.right=l-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function bj({children:s,isPresent:n,anchorX:i,root:r}){const l=_.useId(),d=_.useRef(null),f=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:m}=_.useContext(Om),p=gj(d,s?.ref);return _.useInsertionEffect(()=>{const{width:y,height:b,top:v,left:w,right:E}=f.current;if(n||!d.current||!y||!b)return;const C=i==="left"?`left: ${w}`:`right: ${E}`;d.current.dataset.motionPopId=l;const A=document.createElement("style");m&&(A.nonce=m);const D=r??document.head;return D.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${b}px !important;
            ${C}px !important;
            top: ${v}px !important;
          }
        `),()=>{D.contains(A)&&D.removeChild(A)}},[n]),c.jsx(yj,{isPresent:n,childRef:d,sizeRef:f,children:_.cloneElement(s,{ref:p})})}const vj=({children:s,initial:n,isPresent:i,onExitComplete:r,custom:l,presenceAffectsLayout:d,mode:f,anchorX:m,root:p})=>{const y=pm(xj),b=_.useId();let v=!0,w=_.useMemo(()=>(v=!1,{id:b,initial:n,isPresent:i,custom:l,onExitComplete:E=>{y.set(E,!0);for(const C of y.values())if(!C)return;r&&r()},register:E=>(y.set(E,!1),()=>y.delete(E))}),[i,y,r]);return d&&v&&(w={...w}),_.useMemo(()=>{y.forEach((E,C)=>y.set(C,!1))},[i]),_.useEffect(()=>{!i&&!y.size&&r&&r()},[i]),f==="popLayout"&&(s=c.jsx(bj,{isPresent:i,anchorX:m,root:p,children:s})),c.jsx(Mu.Provider,{value:w,children:s})};function xj(){return new Map}function Lx(s=!0){const n=_.useContext(Mu);if(n===null)return[!0,null];const{isPresent:i,onExitComplete:r,register:l}=n,d=_.useId();_.useEffect(()=>{if(s)return l(d)},[s]);const f=_.useCallback(()=>s&&r&&r(d),[d,r,s]);return!i&&r?[!1,f]:[!0]}const Jc=s=>s.key||"";function ub(s){const n=[];return _.Children.forEach(s,i=>{_.isValidElement(i)&&n.push(i)}),n}const sn=({children:s,custom:n,initial:i=!0,onExitComplete:r,presenceAffectsLayout:l=!0,mode:d="sync",propagate:f=!1,anchorX:m="left",root:p})=>{const[y,b]=Lx(f),v=_.useMemo(()=>ub(s),[s]),w=f&&!y?[]:v.map(Jc),E=_.useRef(!0),C=_.useRef(v),A=pm(()=>new Map),[D,P]=_.useState(v),[Q,V]=_.useState(v);Gv(()=>{E.current=!1,C.current=v;for(let ee=0;ee<Q.length;ee++){const se=Jc(Q[ee]);w.includes(se)?A.delete(se):A.get(se)!==!0&&A.set(se,!1)}},[Q,w.length,w.join("-")]);const J=[];if(v!==D){let ee=[...v];for(let se=0;se<Q.length;se++){const W=Q[se],le=Jc(W);w.includes(le)||(ee.splice(se,0,W),J.push(W))}return d==="wait"&&J.length&&(ee=J),V(ub(ee)),P(v),null}const{forceRender:G}=_.useContext(mm);return c.jsx(c.Fragment,{children:Q.map(ee=>{const se=Jc(ee),W=f&&!y?!1:v===Q||w.includes(se),le=()=>{if(A.has(se))A.set(se,!0);else return;let ue=!0;A.forEach(Ce=>{Ce||(ue=!1)}),ue&&(G?.(),V(C.current),f&&b?.(),r&&r())};return c.jsx(vj,{isPresent:W,initial:!E.current||i?void 0:!1,custom:n,presenceAffectsLayout:l,mode:d,root:p,onExitComplete:W?void 0:le,anchorX:m,children:ee},se)})})},Ix=_.createContext({strict:!1}),db={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hr={};for(const s in db)Hr[s]={isEnabled:n=>db[s].some(i=>!!n[i])};function Sj(s){for(const n in s)Hr[n]={...Hr[n],...s[n]}}const wj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vu(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||wj.has(s)}let Px=s=>!vu(s);function _j(s){typeof s=="function"&&(Px=n=>n.startsWith("on")?!vu(n):s(n))}try{_j(require("@emotion/is-prop-valid").default)}catch{}function Cj(s,n,i){const r={};for(const l in s)l==="values"&&typeof s.values=="object"||(Px(l)||i===!0&&vu(l)||!n&&!vu(l)||s.draggable&&l.startsWith("onDrag"))&&(r[l]=s[l]);return r}const Au=_.createContext({});function ku(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function yl(s){return typeof s=="string"||Array.isArray(s)}const Lm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Im=["initial",...Lm];function Ru(s){return ku(s.animate)||Im.some(n=>yl(s[n]))}function Hx(s){return!!(Ru(s)||s.variants)}function jj(s,n){if(Ru(s)){const{initial:i,animate:r}=s;return{initial:i===!1||yl(i)?i:void 0,animate:yl(r)?r:void 0}}return s.inherit!==!1?n:{}}function Tj(s){const{initial:n,animate:i}=jj(s,_.useContext(Au));return _.useMemo(()=>({initial:n,animate:i}),[fb(n),fb(i)])}function fb(s){return Array.isArray(s)?s.join(" "):s}function hb(s,n){return n.max===n.min?0:s/(n.max-n.min)*100}const nl={correct:(s,n)=>{if(!n.target)return s;if(typeof s=="string")if(pe.test(s))s=parseFloat(s);else return s;const i=hb(s,n.target.x),r=hb(s,n.target.y);return`${i}% ${r}%`}},Ej={correct:(s,{treeScale:n,projectionDelta:i})=>{const r=s,l=Vi.parse(s);if(l.length>5)return r;const d=Vi.createTransformer(s),f=typeof l[0]!="number"?1:0,m=i.x.scale*n.x,p=i.y.scale*n.y;l[0+f]/=m,l[1+f]/=p;const y=ut(m,p,.5);return typeof l[2+f]=="number"&&(l[2+f]/=y),typeof l[3+f]=="number"&&(l[3+f]/=y),d(l)}},Gh={borderRadius:{...nl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:nl,borderTopRightRadius:nl,borderBottomLeftRadius:nl,borderBottomRightRadius:nl,boxShadow:Ej};function Vx(s,{layout:n,layoutId:i}){return Yr.has(s)||s.startsWith("origin")||(n||i!==void 0)&&(!!Gh[s]||s==="opacity")}const Mj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Aj=Gr.length;function kj(s,n,i){let r="",l=!0;for(let d=0;d<Aj;d++){const f=Gr[d],m=s[f];if(m===void 0)continue;let p=!0;if(typeof m=="number"?p=m===(f.startsWith("scale")?1:0):p=parseFloat(m)===0,!p||i){const y=Nx(m,zm[f]);if(!p){l=!1;const b=Mj[f]||f;r+=`${b}(${y}) `}i&&(n[f]=y)}}return r=r.trim(),i?r=i(n,l?"":r):l&&(r="none"),r}function Pm(s,n,i){const{style:r,vars:l,transformOrigin:d}=s;let f=!1,m=!1;for(const p in n){const y=n[p];if(Yr.has(p)){f=!0;continue}else if(cx(p)){l[p]=y;continue}else{const b=Nx(y,zm[p]);p.startsWith("origin")?(m=!0,d[p]=b):r[p]=b}}if(n.transform||(f||i?r.transform=kj(n,s.transform,i):r.transform&&(r.transform="none")),m){const{originX:p="50%",originY:y="50%",originZ:b=0}=d;r.transformOrigin=`${p} ${y} ${b}`}}const Hm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $x(s,n,i){for(const r in n)!tn(n[r])&&!Vx(r,i)&&(s[r]=n[r])}function Rj({transformTemplate:s},n){return _.useMemo(()=>{const i=Hm();return Pm(i,n,s),Object.assign({},i.vars,i.style)},[n])}function Nj(s,n){const i=s.style||{},r={};return $x(r,i,s),Object.assign(r,Rj(s,n)),r}function Dj(s,n){const i={},r=Nj(s,n);return s.drag&&s.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(i.tabIndex=0),i.style=r,i}const zj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Bj={offset:"strokeDashoffset",array:"strokeDasharray"};function Uj(s,n,i=1,r=0,l=!0){s.pathLength=1;const d=l?zj:Bj;s[d.offset]=pe.transform(-r);const f=pe.transform(n),m=pe.transform(i);s[d.array]=`${f} ${m}`}function qx(s,{attrX:n,attrY:i,attrScale:r,pathLength:l,pathSpacing:d=1,pathOffset:f=0,...m},p,y,b){if(Pm(s,m,y),p){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:v,style:w}=s;v.transform&&(w.transform=v.transform,delete v.transform),(w.transform||v.transformOrigin)&&(w.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),w.transform&&(w.transformBox=b?.transformBox??"fill-box",delete v.transformBox),n!==void 0&&(v.x=n),i!==void 0&&(v.y=i),r!==void 0&&(v.scale=r),l!==void 0&&Uj(v,l,d,f,!1)}const Fx=()=>({...Hm(),attrs:{}}),Gx=s=>typeof s=="string"&&s.toLowerCase()==="svg";function Oj(s,n,i,r){const l=_.useMemo(()=>{const d=Fx();return qx(d,n,Gx(r),s.transformTemplate,s.style),{...d.attrs,style:{...d.style}}},[n]);if(s.style){const d={};$x(d,s.style,s),l.style={...d,...l.style}}return l}const Lj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Vm(s){return typeof s!="string"||s.includes("-")?!1:!!(Lj.indexOf(s)>-1||/[A-Z]/u.test(s))}function Ij(s,n,i,{latestValues:r},l,d=!1){const m=(Vm(s)?Oj:Dj)(n,r,l,s),p=Cj(n,typeof s=="string",d),y=s!==_.Fragment?{...p,...m,ref:i}:{},{children:b}=n,v=_.useMemo(()=>tn(b)?b.get():b,[b]);return _.createElement(s,{...y,children:v})}function mb(s){const n=[{},{}];return s?.values.forEach((i,r)=>{n[0][r]=i.get(),n[1][r]=i.getVelocity()}),n}function $m(s,n,i,r){if(typeof n=="function"){const[l,d]=mb(r);n=n(i!==void 0?i:s.custom,l,d)}if(typeof n=="string"&&(n=s.variants&&s.variants[n]),typeof n=="function"){const[l,d]=mb(r);n=n(i!==void 0?i:s.custom,l,d)}return n}function uu(s){return tn(s)?s.get():s}function Pj({scrapeMotionValuesFromProps:s,createRenderState:n},i,r,l){return{latestValues:Hj(i,r,l,s),renderState:n()}}function Hj(s,n,i,r){const l={},d=r(s,{});for(const w in d)l[w]=uu(d[w]);let{initial:f,animate:m}=s;const p=Ru(s),y=Hx(s);n&&y&&!p&&s.inherit!==!1&&(f===void 0&&(f=n.initial),m===void 0&&(m=n.animate));let b=i?i.initial===!1:!1;b=b||f===!1;const v=b?m:f;if(v&&typeof v!="boolean"&&!ku(v)){const w=Array.isArray(v)?v:[v];for(let E=0;E<w.length;E++){const C=$m(s,w[E]);if(C){const{transitionEnd:A,transition:D,...P}=C;for(const Q in P){let V=P[Q];if(Array.isArray(V)){const J=b?V.length-1:0;V=V[J]}V!==null&&(l[Q]=V)}for(const Q in A)l[Q]=A[Q]}}}return l}const Yx=s=>(n,i)=>{const r=_.useContext(Au),l=_.useContext(Mu),d=()=>Pj(s,n,r,l);return i?d():pm(d)};function qm(s,n,i){const{style:r}=s,l={};for(const d in r)(tn(r[d])||n.style&&tn(n.style[d])||Vx(d,s)||i?.getValue(d)?.liveStyle!==void 0)&&(l[d]=r[d]);return l}const Vj=Yx({scrapeMotionValuesFromProps:qm,createRenderState:Hm});function Xx(s,n,i){const r=qm(s,n,i);for(const l in s)if(tn(s[l])||tn(n[l])){const d=Gr.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;r[d]=s[l]}return r}const $j=Yx({scrapeMotionValuesFromProps:Xx,createRenderState:Fx}),qj=Symbol.for("motionComponentSymbol");function Nr(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function Fj(s,n,i){return _.useCallback(r=>{r&&s.onMount&&s.onMount(r),n&&(r?n.mount(r):n.unmount()),i&&(typeof i=="function"?i(r):Nr(i)&&(i.current=r))},[n])}const Fm=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Gj="framerAppearId",Wx="data-"+Fm(Gj),Kx=_.createContext({});function Yj(s,n,i,r,l){const{visualElement:d}=_.useContext(Au),f=_.useContext(Ix),m=_.useContext(Mu),p=_.useContext(Om).reducedMotion,y=_.useRef(null);r=r||f.renderer,!y.current&&r&&(y.current=r(s,{visualState:n,parent:d,props:i,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:p}));const b=y.current,v=_.useContext(Kx);b&&!b.projection&&l&&(b.type==="html"||b.type==="svg")&&Xj(y.current,i,l,v);const w=_.useRef(!1);_.useInsertionEffect(()=>{b&&w.current&&b.update(i,m)});const E=i[Wx],C=_.useRef(!!E&&!window.MotionHandoffIsComplete?.(E)&&window.MotionHasOptimisedAnimation?.(E));return Gv(()=>{b&&(w.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),C.current&&b.animationState&&b.animationState.animateChanges())}),_.useEffect(()=>{b&&(!C.current&&b.animationState&&b.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(E)}),C.current=!1),b.enteringChildren=void 0)}),b}function Xj(s,n,i,r){const{layoutId:l,layout:d,drag:f,dragConstraints:m,layoutScroll:p,layoutRoot:y,layoutCrossfade:b}=n;s.projection=new i(s.latestValues,n["data-framer-portal-id"]?void 0:Qx(s.parent)),s.projection.setOptions({layoutId:l,layout:d,alwaysMeasureLayout:!!f||m&&Nr(m),visualElement:s,animationType:typeof d=="string"?d:"both",initialPromotionConfig:r,crossfade:b,layoutScroll:p,layoutRoot:y})}function Qx(s){if(s)return s.options.allowProjection!==!1?s.projection:Qx(s.parent)}function lh(s,{forwardMotionProps:n=!1}={},i,r){i&&Sj(i);const l=Vm(s)?$j:Vj;function d(m,p){let y;const b={..._.useContext(Om),...m,layoutId:Wj(m)},{isStatic:v}=b,w=Tj(m),E=l(m,v);if(!v&&gm){Kj();const C=Qj(b);y=C.MeasureLayout,w.visualElement=Yj(s,E,b,r,C.ProjectionNode)}return c.jsxs(Au.Provider,{value:w,children:[y&&w.visualElement?c.jsx(y,{visualElement:w.visualElement,...b}):null,Ij(s,m,Fj(E,w.visualElement,p),E,v,n)]})}d.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const f=_.forwardRef(d);return f[qj]=s,f}function Wj({layoutId:s}){const n=_.useContext(mm).id;return n&&s!==void 0?n+"-"+s:s}function Kj(s,n){_.useContext(Ix).strict}function Qj(s){const{drag:n,layout:i}=Hr;if(!n&&!i)return{};const r={...n,...i};return{MeasureLayout:n?.isEnabled(s)||i?.isEnabled(s)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Zj(s,n){if(typeof Proxy>"u")return lh;const i=new Map,r=(d,f)=>lh(d,f,s,n),l=(d,f)=>r(d,f);return new Proxy(l,{get:(d,f)=>f==="create"?r:(i.has(f)||i.set(f,lh(f,void 0,s,n)),i.get(f))})}function Zx({top:s,left:n,right:i,bottom:r}){return{x:{min:n,max:i},y:{min:s,max:r}}}function Jj({x:s,y:n}){return{top:n.min,right:s.max,bottom:n.max,left:s.min}}function eT(s,n){if(!n)return s;const i=n({x:s.left,y:s.top}),r=n({x:s.right,y:s.bottom});return{top:i.y,left:i.x,bottom:r.y,right:r.x}}function ch(s){return s===void 0||s===1}function Yh({scale:s,scaleX:n,scaleY:i}){return!ch(s)||!ch(n)||!ch(i)}function xa(s){return Yh(s)||Jx(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function Jx(s){return pb(s.x)||pb(s.y)}function pb(s){return s&&s!=="0%"}function xu(s,n,i){const r=s-i,l=n*r;return i+l}function gb(s,n,i,r,l){return l!==void 0&&(s=xu(s,l,r)),xu(s,i,r)+n}function Xh(s,n=0,i=1,r,l){s.min=gb(s.min,n,i,r,l),s.max=gb(s.max,n,i,r,l)}function e1(s,{x:n,y:i}){Xh(s.x,n.translate,n.scale,n.originPoint),Xh(s.y,i.translate,i.scale,i.originPoint)}const yb=.999999999999,bb=1.0000000000001;function tT(s,n,i,r=!1){const l=i.length;if(!l)return;n.x=n.y=1;let d,f;for(let m=0;m<l;m++){d=i[m],f=d.projectionDelta;const{visualElement:p}=d.options;p&&p.props.style&&p.props.style.display==="contents"||(r&&d.options.layoutScroll&&d.scroll&&d!==d.root&&zr(s,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),f&&(n.x*=f.x.scale,n.y*=f.y.scale,e1(s,f)),r&&xa(d.latestValues)&&zr(s,d.latestValues))}n.x<bb&&n.x>yb&&(n.x=1),n.y<bb&&n.y>yb&&(n.y=1)}function Dr(s,n){s.min=s.min+n,s.max=s.max+n}function vb(s,n,i,r,l=.5){const d=ut(s.min,s.max,l);Xh(s,n,i,d,r)}function zr(s,n){vb(s.x,n.x,n.scaleX,n.scale,n.originX),vb(s.y,n.y,n.scaleY,n.scale,n.originY)}function t1(s,n){return Zx(eT(s.getBoundingClientRect(),n))}function nT(s,n,i){const r=t1(s,i),{scroll:l}=n;return l&&(Dr(r.x,l.offset.x),Dr(r.y,l.offset.y)),r}const xb=()=>({translate:0,scale:1,origin:0,originPoint:0}),Br=()=>({x:xb(),y:xb()}),Sb=()=>({min:0,max:0}),Dt=()=>({x:Sb(),y:Sb()}),Wh={current:null},n1={current:!1};function sT(){if(n1.current=!0,!!gm)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),n=()=>Wh.current=s.matches;s.addEventListener("change",n),n()}else Wh.current=!1}const iT=new WeakMap;function aT(s,n,i){for(const r in n){const l=n[r],d=i[r];if(tn(l))s.addValue(r,l);else if(tn(d))s.addValue(r,Pr(l,{owner:s}));else if(d!==l)if(s.hasValue(r)){const f=s.getValue(r);f.liveStyle===!0?f.jump(l):f.hasAnimated||f.set(l)}else{const f=s.getStaticValue(r);s.addValue(r,Pr(f!==void 0?f:l,{owner:s}))}}for(const r in i)n[r]===void 0&&s.removeValue(r);return n}const wb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class rT{scrapeMotionValuesFromProps(n,i,r){return{}}constructor({parent:n,props:i,presenceContext:r,reducedMotionConfig:l,blockInitialAnimation:d,visualState:f},m={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Nm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=mn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,rt.render(this.render,!1,!0))};const{latestValues:p,renderState:y}=f;this.latestValues=p,this.baseTarget={...p},this.initialValues=i.initial?{...p}:{},this.renderState=y,this.parent=n,this.props=i,this.presenceContext=r,this.depth=n?n.depth+1:0,this.reducedMotionConfig=l,this.options=m,this.blockInitialAnimation=!!d,this.isControllingVariants=Ru(i),this.isVariantNode=Hx(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:b,...v}=this.scrapeMotionValuesFromProps(i,{},this);for(const w in v){const E=v[w];p[w]!==void 0&&tn(E)&&E.set(p[w])}}mount(n){this.current=n,iT.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,r)=>this.bindToMotionValue(r,i)),n1.current||sT(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Wh.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Hi(this.notifyUpdate),Hi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(n){this.children.add(n),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(n)}removeChild(n){this.children.delete(n),this.enteringChildren&&this.enteringChildren.delete(n)}bindToMotionValue(n,i){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const r=Yr.has(n);r&&this.onBindTransform&&this.onBindTransform();const l=i.on("change",f=>{this.latestValues[n]=f,this.props.onUpdate&&rt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let d;window.MotionCheckAppearSync&&(d=window.MotionCheckAppearSync(this,n,i)),this.valueSubscriptions.set(n,()=>{l(),d&&d(),i.owner&&i.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in Hr){const i=Hr[n];if(!i)continue;const{isEnabled:r,Feature:l}=i;if(!this.features[n]&&l&&r(this.props)&&(this.features[n]=new l(this)),this.features[n]){const d=this.features[n];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,i){this.latestValues[n]=i}update(n,i){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let r=0;r<wb.length;r++){const l=wb[r];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const d="on"+l,f=n[d];f&&(this.propEventSubscriptions[l]=this.on(l,f))}this.prevMotionValues=aT(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(n),()=>i.variantChildren.delete(n)}addValue(n,i){const r=this.values.get(n);i!==r&&(r&&this.removeValue(n),this.bindToMotionValue(n,i),this.values.set(n,i),this.latestValues[n]=i.get())}removeValue(n){this.values.delete(n);const i=this.valueSubscriptions.get(n);i&&(i(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,i){if(this.props.values&&this.props.values[n])return this.props.values[n];let r=this.values.get(n);return r===void 0&&i!==void 0&&(r=Pr(i===null?void 0:i,{owner:this}),this.addValue(n,r)),r}readValue(n,i){let r=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return r!=null&&(typeof r=="string"&&(Yv(r)||Wv(r))?r=parseFloat(r):!mj(r)&&Vi.test(i)&&(r=Rx(n,i)),this.setBaseTarget(n,tn(r)?r.get():r)),tn(r)?r.get():r}setBaseTarget(n,i){this.baseTarget[n]=i}getBaseTarget(n){const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const d=$m(this.props,i,this.presenceContext?.custom);d&&(r=d[n])}if(i&&r!==void 0)return r;const l=this.getBaseTargetFromProps(this.props,n);return l!==void 0&&!tn(l)?l:this.initialValues[n]!==void 0&&r===void 0?void 0:this.baseTarget[n]}on(n,i){return this.events[n]||(this.events[n]=new Sm),this.events[n].add(i)}notify(n,...i){this.events[n]&&this.events[n].notify(...i)}scheduleRenderMicrotask(){Bm.render(this.render)}}class s1 extends rT{constructor(){super(...arguments),this.KeyframeResolver=nj}sortInstanceNodePosition(n,i){return n.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(n,i){return n.style?n.style[i]:void 0}removeValueFromRenderState(n,{vars:i,style:r}){delete i[n],delete r[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;tn(n)&&(this.childSubscription=n.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function i1(s,{style:n,vars:i},r,l){const d=s.style;let f;for(f in n)d[f]=n[f];l?.applyProjectionStyles(d,r);for(f in i)d.setProperty(f,i[f])}function oT(s){return window.getComputedStyle(s)}class lT extends s1{constructor(){super(...arguments),this.type="html",this.renderInstance=i1}readValueFromInstance(n,i){if(Yr.has(i))return this.projection?.isProjecting?Ih(i):S2(n,i);{const r=oT(n),l=(cx(i)?r.getPropertyValue(i):r[i])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(n,{transformPagePoint:i}){return t1(n,i)}build(n,i,r){Pm(n,i,r.transformTemplate)}scrapeMotionValuesFromProps(n,i,r){return qm(n,i,r)}}const a1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cT(s,n,i,r){i1(s,n,void 0,r);for(const l in n.attrs)s.setAttribute(a1.has(l)?l:Fm(l),n.attrs[l])}class uT extends s1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt}getBaseTargetFromProps(n,i){return n[i]}readValueFromInstance(n,i){if(Yr.has(i)){const r=kx(i);return r&&r.default||0}return i=a1.has(i)?i:Fm(i),n.getAttribute(i)}scrapeMotionValuesFromProps(n,i,r){return Xx(n,i,r)}build(n,i,r){qx(n,i,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(n,i,r,l){cT(n,i,r,l)}mount(n){this.isSVGTag=Gx(n.tagName),super.mount(n)}}const dT=(s,n)=>Vm(s)?new uT(n):new lT(n,{allowProjection:s!==_.Fragment});function Ur(s,n,i){const r=s.getProps();return $m(r,n,i!==void 0?i:r.custom,s)}const Kh=s=>Array.isArray(s);function fT(s,n,i){s.hasValue(n)?s.getValue(n).set(i):s.addValue(n,Pr(i))}function hT(s){return Kh(s)?s[s.length-1]||0:s}function mT(s,n){const i=Ur(s,n);let{transitionEnd:r={},transition:l={},...d}=i||{};d={...d,...r};for(const f in d){const m=hT(d[f]);fT(s,f,m)}}function pT(s){return!!(tn(s)&&s.add)}function Qh(s,n){const i=s.getValue("willChange");if(pT(i))return i.add(n);if(!i&&ti.WillChange){const r=new ti.WillChange("auto");s.addValue("willChange",r),r.add(n)}}function r1(s){return s.props[Wx]}const gT=s=>s!==null;function yT(s,{repeat:n,repeatType:i="loop"},r){const l=s.filter(gT),d=n&&i!=="loop"&&n%2===1?0:l.length-1;return l[d]}const bT={type:"spring",stiffness:500,damping:25,restSpeed:10},vT=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),xT={type:"keyframes",duration:.8},ST={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wT=(s,{keyframes:n})=>n.length>2?xT:Yr.has(s)?s.startsWith("scale")?vT(n[1]):bT:ST;function _T({when:s,delay:n,delayChildren:i,staggerChildren:r,staggerDirection:l,repeat:d,repeatType:f,repeatDelay:m,from:p,elapsed:y,...b}){return!!Object.keys(b).length}const Gm=(s,n,i,r={},l,d)=>f=>{const m=Dm(r,s)||{},p=m.delay||r.delay||0;let{elapsed:y=0}=r;y=y-js(p);const b={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:n.getVelocity(),...m,delay:-y,onUpdate:w=>{n.set(w),m.onUpdate&&m.onUpdate(w)},onComplete:()=>{f(),m.onComplete&&m.onComplete()},name:s,motionValue:n,element:d?void 0:l};_T(m)||Object.assign(b,wT(s,b)),b.duration&&(b.duration=js(b.duration)),b.repeatDelay&&(b.repeatDelay=js(b.repeatDelay)),b.from!==void 0&&(b.keyframes[0]=b.from);let v=!1;if((b.type===!1||b.duration===0&&!b.repeatDelay)&&(qh(b),b.delay===0&&(v=!0)),(ti.instantAnimations||ti.skipAnimations)&&(v=!0,qh(b),b.delay=0),b.allowFlatten=!m.type&&!m.ease,v&&!d&&n.get()!==void 0){const w=yT(b.keyframes,m);if(w!==void 0){rt.update(()=>{b.onUpdate(w),b.onComplete()});return}}return m.isSync?new Rm(b):new q2(b)};function CT({protectedKeys:s,needsAnimating:n},i){const r=s.hasOwnProperty(i)&&n[i]!==!0;return n[i]=!1,r}function o1(s,n,{delay:i=0,transitionOverride:r,type:l}={}){let{transition:d=s.getDefaultTransition(),transitionEnd:f,...m}=n;r&&(d=r);const p=[],y=l&&s.animationState&&s.animationState.getState()[l];for(const b in m){const v=s.getValue(b,s.latestValues[b]??null),w=m[b];if(w===void 0||y&&CT(y,b))continue;const E={delay:i,...Dm(d||{},b)},C=v.get();if(C!==void 0&&!v.isAnimating&&!Array.isArray(w)&&w===C&&!E.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const P=r1(s);if(P){const Q=window.MotionHandoffAnimation(P,b,rt);Q!==null&&(E.startTime=Q,A=!0)}}Qh(s,b),v.start(Gm(b,v,w,s.shouldReduceMotion&&Ex.has(b)?{type:!1}:E,s,A));const D=v.animation;D&&p.push(D)}return f&&Promise.all(p).then(()=>{rt.update(()=>{f&&mT(s,f)})}),p}function l1(s,n,i,r=0,l=1){const d=Array.from(s).sort((y,b)=>y.sortNodePosition(b)).indexOf(n),f=s.size,m=(f-1)*r;return typeof i=="function"?i(d,f):l===1?d*r:m-d*r}function Zh(s,n,i={}){const r=Ur(s,n,i.type==="exit"?s.presenceContext?.custom:void 0);let{transition:l=s.getDefaultTransition()||{}}=r||{};i.transitionOverride&&(l=i.transitionOverride);const d=r?()=>Promise.all(o1(s,r,i)):()=>Promise.resolve(),f=s.variantChildren&&s.variantChildren.size?(p=0)=>{const{delayChildren:y=0,staggerChildren:b,staggerDirection:v}=l;return jT(s,n,p,y,b,v,i)}:()=>Promise.resolve(),{when:m}=l;if(m){const[p,y]=m==="beforeChildren"?[d,f]:[f,d];return p().then(()=>y())}else return Promise.all([d(),f(i.delay)])}function jT(s,n,i=0,r=0,l=0,d=1,f){const m=[];for(const p of s.variantChildren)p.notify("AnimationStart",n),m.push(Zh(p,n,{...f,delay:i+(typeof r=="function"?0:r)+l1(s.variantChildren,p,r,l,d)}).then(()=>p.notify("AnimationComplete",n)));return Promise.all(m)}function TT(s,n,i={}){s.notify("AnimationStart",n);let r;if(Array.isArray(n)){const l=n.map(d=>Zh(s,d,i));r=Promise.all(l)}else if(typeof n=="string")r=Zh(s,n,i);else{const l=typeof n=="function"?Ur(s,n,i.custom):n;r=Promise.all(o1(s,l,i))}return r.then(()=>{s.notify("AnimationComplete",n)})}function c1(s,n){if(!Array.isArray(n))return!1;const i=n.length;if(i!==s.length)return!1;for(let r=0;r<i;r++)if(n[r]!==s[r])return!1;return!0}const ET=Im.length;function u1(s){if(!s)return;if(!s.isControllingVariants){const i=s.parent?u1(s.parent)||{}:{};return s.props.initial!==void 0&&(i.initial=s.props.initial),i}const n={};for(let i=0;i<ET;i++){const r=Im[i],l=s.props[r];(yl(l)||l===!1)&&(n[r]=l)}return n}const MT=[...Lm].reverse(),AT=Lm.length;function kT(s){return n=>Promise.all(n.map(({animation:i,options:r})=>TT(s,i,r)))}function RT(s){let n=kT(s),i=_b(),r=!0;const l=p=>(y,b)=>{const v=Ur(s,b,p==="exit"?s.presenceContext?.custom:void 0);if(v){const{transition:w,transitionEnd:E,...C}=v;y={...y,...C,...E}}return y};function d(p){n=p(s)}function f(p){const{props:y}=s,b=u1(s.parent)||{},v=[],w=new Set;let E={},C=1/0;for(let D=0;D<AT;D++){const P=MT[D],Q=i[P],V=y[P]!==void 0?y[P]:b[P],J=yl(V),G=P===p?Q.isActive:null;G===!1&&(C=D);let ee=V===b[P]&&V!==y[P]&&J;if(ee&&r&&s.manuallyAnimateOnMount&&(ee=!1),Q.protectedKeys={...E},!Q.isActive&&G===null||!V&&!Q.prevProp||ku(V)||typeof V=="boolean")continue;const se=NT(Q.prevProp,V);let W=se||P===p&&Q.isActive&&!ee&&J||D>C&&J,le=!1;const ue=Array.isArray(V)?V:[V];let Ce=ue.reduce(l(P),{});G===!1&&(Ce={});const{prevResolvedValues:Re={}}=Q,Ve={...Re,...Ce},Qe=Z=>{W=!0,w.has(Z)&&(le=!0,w.delete(Z)),Q.needsAnimating[Z]=!0;const ne=s.getValue(Z);ne&&(ne.liveStyle=!1)};for(const Z in Ve){const ne=Ce[Z],ge=Re[Z];if(E.hasOwnProperty(Z))continue;let je=!1;Kh(ne)&&Kh(ge)?je=!c1(ne,ge):je=ne!==ge,je?ne!=null?Qe(Z):w.add(Z):ne!==void 0&&w.has(Z)?Qe(Z):Q.protectedKeys[Z]=!0}Q.prevProp=V,Q.prevResolvedValues=Ce,Q.isActive&&(E={...E,...Ce}),r&&s.blockInitialAnimation&&(W=!1);const Ee=ee&&se;W&&(!Ee||le)&&v.push(...ue.map(Z=>{const ne={type:P};if(typeof Z=="string"&&r&&!Ee&&s.manuallyAnimateOnMount&&s.parent){const{parent:ge}=s,je=Ur(ge,Z);if(ge.enteringChildren&&je){const{delayChildren:Ue}=je.transition||{};ne.delay=l1(ge.enteringChildren,s,Ue)}}return{animation:Z,options:ne}}))}if(w.size){const D={};if(typeof y.initial!="boolean"){const P=Ur(s,Array.isArray(y.initial)?y.initial[0]:y.initial);P&&P.transition&&(D.transition=P.transition)}w.forEach(P=>{const Q=s.getBaseTarget(P),V=s.getValue(P);V&&(V.liveStyle=!0),D[P]=Q??null}),v.push({animation:D})}let A=!!v.length;return r&&(y.initial===!1||y.initial===y.animate)&&!s.manuallyAnimateOnMount&&(A=!1),r=!1,A?n(v):Promise.resolve()}function m(p,y){if(i[p].isActive===y)return Promise.resolve();s.variantChildren?.forEach(v=>v.animationState?.setActive(p,y)),i[p].isActive=y;const b=f(p);for(const v in i)i[v].protectedKeys={};return b}return{animateChanges:f,setActive:m,setAnimateFunction:d,getState:()=>i,reset:()=>{i=_b()}}}function NT(s,n){return typeof n=="string"?n!==s:Array.isArray(n)?!c1(n,s):!1}function ba(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _b(){return{animate:ba(!0),whileInView:ba(),whileHover:ba(),whileTap:ba(),whileDrag:ba(),whileFocus:ba(),exit:ba()}}class $i{constructor(n){this.isMounted=!1,this.node=n}update(){}}class DT extends $i{constructor(n){super(n),n.animationState||(n.animationState=RT(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();ku(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:i}=this.node.prevProps||{};n!==i&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let zT=0;class BT extends $i{constructor(){super(...arguments),this.id=zT++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===r)return;const l=this.node.animationState.setActive("exit",!n);i&&!n&&l.then(()=>{i(this.id)})}mount(){const{register:n,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const UT={animation:{Feature:DT},exit:{Feature:BT}};function bl(s,n,i,r={passive:!0}){return s.addEventListener(n,i,r),()=>s.removeEventListener(n,i)}function kl(s){return{point:{x:s.pageX,y:s.pageY}}}const OT=s=>n=>Um(n)&&s(n,kl(n));function ul(s,n,i,r){return bl(s,n,OT(i),r)}const d1=1e-4,LT=1-d1,IT=1+d1,f1=.01,PT=0-f1,HT=0+f1;function an(s){return s.max-s.min}function VT(s,n,i){return Math.abs(s-n)<=i}function Cb(s,n,i,r=.5){s.origin=r,s.originPoint=ut(n.min,n.max,s.origin),s.scale=an(i)/an(n),s.translate=ut(i.min,i.max,s.origin)-s.originPoint,(s.scale>=LT&&s.scale<=IT||isNaN(s.scale))&&(s.scale=1),(s.translate>=PT&&s.translate<=HT||isNaN(s.translate))&&(s.translate=0)}function dl(s,n,i,r){Cb(s.x,n.x,i.x,r?r.originX:void 0),Cb(s.y,n.y,i.y,r?r.originY:void 0)}function jb(s,n,i){s.min=i.min+n.min,s.max=s.min+an(n)}function $T(s,n,i){jb(s.x,n.x,i.x),jb(s.y,n.y,i.y)}function Tb(s,n,i){s.min=n.min-i.min,s.max=s.min+an(n)}function Su(s,n,i){Tb(s.x,n.x,i.x),Tb(s.y,n.y,i.y)}function qn(s){return[s("x"),s("y")]}const h1=({current:s})=>s?s.ownerDocument.defaultView:null,Eb=(s,n)=>Math.abs(s-n);function qT(s,n){const i=Eb(s.x,n.x),r=Eb(s.y,n.y);return Math.sqrt(i**2+r**2)}class m1{constructor(n,i,{transformPagePoint:r,contextWindow:l=window,dragSnapToOrigin:d=!1,distanceThreshold:f=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=dh(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,C=qT(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!C)return;const{point:A}=w,{timestamp:D}=Xt;this.history.push({...A,timestamp:D});const{onStart:P,onMove:Q}=this.handlers;E||(P&&P(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),Q&&Q(this.lastMoveEvent,w)},this.handlePointerMove=(w,E)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=uh(E,this.transformPagePoint),rt.update(this.updatePoint,!0)},this.handlePointerUp=(w,E)=>{this.end();const{onEnd:C,onSessionEnd:A,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=dh(w.type==="pointercancel"?this.lastMoveEventInfo:uh(E,this.transformPagePoint),this.history);this.startEvent&&C&&C(w,P),A&&A(w,P)},!Um(n))return;this.dragSnapToOrigin=d,this.handlers=i,this.transformPagePoint=r,this.distanceThreshold=f,this.contextWindow=l||window;const m=kl(n),p=uh(m,this.transformPagePoint),{point:y}=p,{timestamp:b}=Xt;this.history=[{...y,timestamp:b}];const{onSessionStart:v}=i;v&&v(n,dh(p,this.history)),this.removeListeners=El(ul(this.contextWindow,"pointermove",this.handlePointerMove),ul(this.contextWindow,"pointerup",this.handlePointerUp),ul(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),Hi(this.updatePoint)}}function uh(s,n){return n?{point:n(s.point)}:s}function Mb(s,n){return{x:s.x-n.x,y:s.y-n.y}}function dh({point:s},n){return{point:s,delta:Mb(s,p1(n)),offset:Mb(s,FT(n)),velocity:GT(n,.1)}}function FT(s){return s[0]}function p1(s){return s[s.length-1]}function GT(s,n){if(s.length<2)return{x:0,y:0};let i=s.length-1,r=null;const l=p1(s);for(;i>=0&&(r=s[i],!(l.timestamp-r.timestamp>js(n)));)i--;if(!r)return{x:0,y:0};const d=Gn(l.timestamp-r.timestamp);if(d===0)return{x:0,y:0};const f={x:(l.x-r.x)/d,y:(l.y-r.y)/d};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function YT(s,{min:n,max:i},r){return n!==void 0&&s<n?s=r?ut(n,s,r.min):Math.max(s,n):i!==void 0&&s>i&&(s=r?ut(i,s,r.max):Math.min(s,i)),s}function Ab(s,n,i){return{min:n!==void 0?s.min+n:void 0,max:i!==void 0?s.max+i-(s.max-s.min):void 0}}function XT(s,{top:n,left:i,bottom:r,right:l}){return{x:Ab(s.x,i,l),y:Ab(s.y,n,r)}}function kb(s,n){let i=n.min-s.min,r=n.max-s.max;return n.max-n.min<s.max-s.min&&([i,r]=[r,i]),{min:i,max:r}}function WT(s,n){return{x:kb(s.x,n.x),y:kb(s.y,n.y)}}function KT(s,n){let i=.5;const r=an(s),l=an(n);return l>r?i=ml(n.min,n.max-r,s.min):r>l&&(i=ml(s.min,s.max-l,n.min)),ei(0,1,i)}function QT(s,n){const i={};return n.min!==void 0&&(i.min=n.min-s.min),n.max!==void 0&&(i.max=n.max-s.min),i}const Jh=.35;function ZT(s=Jh){return s===!1?s=0:s===!0&&(s=Jh),{x:Rb(s,"left","right"),y:Rb(s,"top","bottom")}}function Rb(s,n,i){return{min:Nb(s,n),max:Nb(s,i)}}function Nb(s,n){return typeof s=="number"?s:s[n]||0}const JT=new WeakMap;class e5{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:i=!1,distanceThreshold:r}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const d=v=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(kl(v).point)},f=(v,w)=>{const{drag:E,dragPropagation:C,onDragStart:A}=this.getProps();if(E&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=rj(E),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qn(P=>{let Q=this.getAxisMotionValue(P).get()||0;if(Ts.test(Q)){const{projection:V}=this.visualElement;if(V&&V.layout){const J=V.layout.layoutBox[P];J&&(Q=an(J)*(parseFloat(Q)/100))}}this.originPoint[P]=Q}),A&&rt.postRender(()=>A(v,w)),Qh(this.visualElement,"transform");const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},m=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w;const{dragPropagation:E,dragDirectionLock:C,onDirectionLock:A,onDrag:D}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:P}=w;if(C&&this.currentDirection===null){this.currentDirection=t5(P),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",w.point,P),this.updateAxis("y",w.point,P),this.visualElement.render(),D&&D(v,w)},p=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w,this.stop(v,w),this.latestPointerEvent=null,this.latestPanInfo=null},y=()=>qn(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:b}=this.getProps();this.panSession=new m1(n,{onSessionStart:d,onStart:f,onMove:m,onSessionEnd:p,resumeAnimation:y},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:b,distanceThreshold:r,contextWindow:h1(this.visualElement)})}stop(n,i){const r=n||this.latestPointerEvent,l=i||this.latestPanInfo,d=this.isDragging;if(this.cancel(),!d||!l||!r)return;const{velocity:f}=l;this.startAnimation(f);const{onDragEnd:m}=this.getProps();m&&rt.postRender(()=>m(r,l))}cancel(){this.isDragging=!1;const{projection:n,animationState:i}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(n,i,r){const{drag:l}=this.getProps();if(!r||!eu(n,l,this.currentDirection))return;const d=this.getAxisMotionValue(n);let f=this.originPoint[n]+r[n];this.constraints&&this.constraints[n]&&(f=YT(f,this.constraints[n],this.elastic[n])),d.set(f)}resolveConstraints(){const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,l=this.constraints;n&&Nr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=XT(r.layoutBox,n):this.constraints=!1,this.elastic=ZT(i),l!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&qn(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=QT(r.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:i}=this.getProps();if(!n||!Nr(n))return!1;const r=n.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const d=nT(r,l.root,this.visualElement.getTransformPagePoint());let f=WT(l.layout.layoutBox,d);if(i){const m=i(Jj(f));this.hasMutatedConstraints=!!m,m&&(f=Zx(m))}return f}startAnimation(n){const{drag:i,dragMomentum:r,dragElastic:l,dragTransition:d,dragSnapToOrigin:f,onDragTransitionEnd:m}=this.getProps(),p=this.constraints||{},y=qn(b=>{if(!eu(b,i,this.currentDirection))return;let v=p&&p[b]||{};f&&(v={min:0,max:0});const w=l?200:1e6,E=l?40:1e7,C={type:"inertia",velocity:r?n[b]:0,bounceStiffness:w,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...d,...v};return this.startAxisValueAnimation(b,C)});return Promise.all(y).then(m)}startAxisValueAnimation(n,i){const r=this.getAxisMotionValue(n);return Qh(this.visualElement,n),r.start(Gm(n,r,0,i,this.visualElement,!1))}stopAnimation(){qn(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){qn(n=>this.getAxisMotionValue(n).animation?.pause())}getAnimationState(n){return this.getAxisMotionValue(n).animation?.state}getAxisMotionValue(n){const i=`_drag${n.toUpperCase()}`,r=this.visualElement.getProps(),l=r[i];return l||this.visualElement.getValue(n,(r.initial?r.initial[n]:void 0)||0)}snapToCursor(n){qn(i=>{const{drag:r}=this.getProps();if(!eu(i,r,this.currentDirection))return;const{projection:l}=this.visualElement,d=this.getAxisMotionValue(i);if(l&&l.layout){const{min:f,max:m}=l.layout.layoutBox[i];d.set(n[i]-ut(f,m,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:i}=this.getProps(),{projection:r}=this.visualElement;if(!Nr(i)||!r||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};qn(f=>{const m=this.getAxisMotionValue(f);if(m&&this.constraints!==!1){const p=m.get();l[f]=KT({min:p,max:p},this.constraints[f])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),qn(f=>{if(!eu(f,n,null))return;const m=this.getAxisMotionValue(f),{min:p,max:y}=this.constraints[f];m.set(ut(p,y,l[f]))})}addListeners(){if(!this.visualElement.current)return;JT.set(this.visualElement,this);const n=this.visualElement.current,i=ul(n,"pointerdown",p=>{const{drag:y,dragListener:b=!0}=this.getProps();y&&b&&this.start(p)}),r=()=>{const{dragConstraints:p}=this.getProps();Nr(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,d=l.addEventListener("measure",r);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),rt.read(r);const f=bl(window,"resize",()=>this.scalePositionWithinConstraints()),m=l.addEventListener("didUpdate",(({delta:p,hasLayoutChanged:y})=>{this.isDragging&&y&&(qn(b=>{const v=this.getAxisMotionValue(b);v&&(this.originPoint[b]+=p[b].translate,v.set(v.get()+p[b].translate))}),this.visualElement.render())}));return()=>{f(),i(),d(),m&&m()}}getProps(){const n=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:r=!1,dragPropagation:l=!1,dragConstraints:d=!1,dragElastic:f=Jh,dragMomentum:m=!0}=n;return{...n,drag:i,dragDirectionLock:r,dragPropagation:l,dragConstraints:d,dragElastic:f,dragMomentum:m}}}function eu(s,n,i){return(n===!0||n===s)&&(i===null||i===s)}function t5(s,n=10){let i=null;return Math.abs(s.y)>n?i="y":Math.abs(s.x)>n&&(i="x"),i}class n5 extends $i{constructor(n){super(n),this.removeGroupControls=Yn,this.removeListeners=Yn,this.controls=new e5(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Db=s=>(n,i)=>{s&&rt.postRender(()=>s(n,i))};class s5 extends $i{constructor(){super(...arguments),this.removePointerDownListener=Yn}onPointerDown(n){this.session=new m1(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:h1(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:i,onPan:r,onPanEnd:l}=this.node.getProps();return{onSessionStart:Db(n),onStart:Db(i),onMove:r,onEnd:(d,f)=>{delete this.session,l&&rt.postRender(()=>l(d,f))}}}mount(){this.removePointerDownListener=ul(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const du={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let fh=!1;class i5 extends _.Component{componentDidMount(){const{visualElement:n,layoutGroup:i,switchLayoutGroup:r,layoutId:l}=this.props,{projection:d}=n;d&&(i.group&&i.group.add(d),r&&r.register&&l&&r.register(d),fh&&d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),du.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:i,visualElement:r,drag:l,isPresent:d}=this.props,{projection:f}=r;return f&&(f.isPresent=d,fh=!0,l||n.layoutDependency!==i||i===void 0||n.isPresent!==d?f.willUpdate():this.safeToRemove(),n.isPresent!==d&&(d?f.promote():f.relegate()||rt.postRender(()=>{const m=f.getStack();(!m||!m.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),Bm.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:i,switchLayoutGroup:r}=this.props,{projection:l}=n;fh=!0,l&&(l.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(l),r&&r.deregister&&r.deregister(l))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function g1(s){const[n,i]=Lx(),r=_.useContext(mm);return c.jsx(i5,{...s,layoutGroup:r,switchLayoutGroup:_.useContext(Kx),isPresent:n,safeToRemove:i})}function a5(s,n,i){const r=tn(s)?s:Pr(s);return r.start(Gm("",r,n,i)),r.animation}const r5=(s,n)=>s.depth-n.depth;class o5{constructor(){this.children=[],this.isDirty=!1}add(n){ym(this.children,n),this.isDirty=!0}remove(n){bm(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(r5),this.isDirty=!1,this.children.forEach(n)}}function l5(s,n){const i=mn.now(),r=({timestamp:l})=>{const d=l-i;d>=n&&(Hi(r),s(d-n))};return rt.setup(r,!0),()=>Hi(r)}const y1=["TopLeft","TopRight","BottomLeft","BottomRight"],c5=y1.length,zb=s=>typeof s=="string"?parseFloat(s):s,Bb=s=>typeof s=="number"||pe.test(s);function u5(s,n,i,r,l,d){l?(s.opacity=ut(0,i.opacity??1,d5(r)),s.opacityExit=ut(n.opacity??1,0,f5(r))):d&&(s.opacity=ut(n.opacity??1,i.opacity??1,r));for(let f=0;f<c5;f++){const m=`border${y1[f]}Radius`;let p=Ub(n,m),y=Ub(i,m);if(p===void 0&&y===void 0)continue;p||(p=0),y||(y=0),p===0||y===0||Bb(p)===Bb(y)?(s[m]=Math.max(ut(zb(p),zb(y),r),0),(Ts.test(y)||Ts.test(p))&&(s[m]+="%")):s[m]=y}(n.rotate||i.rotate)&&(s.rotate=ut(n.rotate||0,i.rotate||0,r))}function Ub(s,n){return s[n]!==void 0?s[n]:s.borderRadius}const d5=b1(0,.5,sx),f5=b1(.5,.95,Yn);function b1(s,n,i){return r=>r<s?0:r>n?1:i(ml(s,n,r))}function Ob(s,n){s.min=n.min,s.max=n.max}function Jn(s,n){Ob(s.x,n.x),Ob(s.y,n.y)}function Lb(s,n){s.translate=n.translate,s.scale=n.scale,s.originPoint=n.originPoint,s.origin=n.origin}function Ib(s,n,i,r,l){return s-=n,s=xu(s,1/i,r),l!==void 0&&(s=xu(s,1/l,r)),s}function h5(s,n=0,i=1,r=.5,l,d=s,f=s){if(Ts.test(n)&&(n=parseFloat(n),n=ut(f.min,f.max,n/100)-f.min),typeof n!="number")return;let m=ut(d.min,d.max,r);s===d&&(m-=n),s.min=Ib(s.min,n,i,m,l),s.max=Ib(s.max,n,i,m,l)}function Pb(s,n,[i,r,l],d,f){h5(s,n[i],n[r],n[l],n.scale,d,f)}const m5=["x","scaleX","originX"],p5=["y","scaleY","originY"];function Hb(s,n,i,r){Pb(s.x,n,m5,i?i.x:void 0,r?r.x:void 0),Pb(s.y,n,p5,i?i.y:void 0,r?r.y:void 0)}function Vb(s){return s.translate===0&&s.scale===1}function v1(s){return Vb(s.x)&&Vb(s.y)}function $b(s,n){return s.min===n.min&&s.max===n.max}function g5(s,n){return $b(s.x,n.x)&&$b(s.y,n.y)}function qb(s,n){return Math.round(s.min)===Math.round(n.min)&&Math.round(s.max)===Math.round(n.max)}function x1(s,n){return qb(s.x,n.x)&&qb(s.y,n.y)}function Fb(s){return an(s.x)/an(s.y)}function Gb(s,n){return s.translate===n.translate&&s.scale===n.scale&&s.originPoint===n.originPoint}class y5{constructor(){this.members=[]}add(n){ym(this.members,n),n.scheduleRender()}remove(n){if(bm(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(n){const i=this.members.findIndex(l=>n===l);if(i===0)return!1;let r;for(let l=i;l>=0;l--){const d=this.members[l];if(d.isPresent!==!1){r=d;break}}return r?(this.promote(r),!0):!1}promote(n,i){const r=this.lead;if(n!==r&&(this.prevLead=r,this.lead=n,n.show(),r)){r.instance&&r.scheduleRender(),n.scheduleRender(),n.resumeFrom=r,i&&(n.resumeFrom.preserveOpacity=!0),r.snapshot&&(n.snapshot=r.snapshot,n.snapshot.latestValues=r.animationValues||r.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:l}=n.options;l===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:i,resumingFrom:r}=n;i.onExitComplete&&i.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function b5(s,n,i){let r="";const l=s.x.translate/n.x,d=s.y.translate/n.y,f=i?.z||0;if((l||d||f)&&(r=`translate3d(${l}px, ${d}px, ${f}px) `),(n.x!==1||n.y!==1)&&(r+=`scale(${1/n.x}, ${1/n.y}) `),i){const{transformPerspective:y,rotate:b,rotateX:v,rotateY:w,skewX:E,skewY:C}=i;y&&(r=`perspective(${y}px) ${r}`),b&&(r+=`rotate(${b}deg) `),v&&(r+=`rotateX(${v}deg) `),w&&(r+=`rotateY(${w}deg) `),E&&(r+=`skewX(${E}deg) `),C&&(r+=`skewY(${C}deg) `)}const m=s.x.scale*n.x,p=s.y.scale*n.y;return(m!==1||p!==1)&&(r+=`scale(${m}, ${p})`),r||"none"}const hh=["","X","Y","Z"],v5=1e3;let x5=0;function mh(s,n,i,r){const{latestValues:l}=n;l[s]&&(i[s]=l[s],n.setStaticValue(s,0),r&&(r[s]=0))}function S1(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:n}=s.options;if(!n)return;const i=r1(n);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:l,layoutId:d}=s.options;window.MotionCancelOptimisedAnimation(i,"transform",rt,!(l||d))}const{parent:r}=s;r&&!r.hasCheckedOptimisedAppear&&S1(r)}function w1({attachResizeListener:s,defaultParent:n,measureScroll:i,checkIsScrollRoot:r,resetTransform:l}){return class{constructor(f={},m=n?.()){this.id=x5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(_5),this.nodes.forEach(E5),this.nodes.forEach(M5),this.nodes.forEach(C5)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=m?m.root||m:this,this.path=m?[...m.path,m]:[],this.parent=m,this.depth=m?m.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new o5)}addEventListener(f,m){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new Sm),this.eventHandlers.get(f).add(m)}notifyListeners(f,...m){const p=this.eventHandlers.get(f);p&&p.notify(...m)}hasListeners(f){return this.eventHandlers.has(f)}mount(f){if(this.instance)return;this.isSVG=Ox(f)&&!fj(f),this.instance=f;const{layoutId:m,layout:p,visualElement:y}=this.options;if(y&&!y.current&&y.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(p||m)&&(this.isLayoutDirty=!0),s){let b,v=0;const w=()=>this.root.updateBlockedByResize=!1;rt.read(()=>{v=window.innerWidth}),s(f,()=>{const E=window.innerWidth;E!==v&&(v=E,this.root.updateBlockedByResize=!0,b&&b(),b=l5(w,250),du.hasAnimatedSinceResize&&(du.hasAnimatedSinceResize=!1,this.nodes.forEach(Wb)))})}m&&this.root.registerSharedNode(m,this),this.options.animate!==!1&&y&&(m||p)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:v,hasRelativeLayoutChanged:w,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||y.getDefaultTransition()||D5,{onLayoutAnimationStart:A,onLayoutAnimationComplete:D}=y.getProps(),P=!this.targetLayout||!x1(this.targetLayout,E),Q=!v&&w;if(this.options.layoutRoot||this.resumeFrom||Q||v&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const V={...Dm(C,"layout"),onPlay:A,onComplete:D};(y.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V),this.setAnimationOrigin(b,Q)}else v||Wb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Hi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(A5),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&S1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let b=0;b<this.path.length;b++){const v=this.path[b];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:m,layout:p}=this.options;if(m===void 0&&!p)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Yb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Xb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(T5),this.nodes.forEach(S5),this.nodes.forEach(w5)):this.nodes.forEach(Xb),this.clearAllSnapshots();const m=mn.now();Xt.delta=ei(0,1e3/60,m-Xt.timestamp),Xt.timestamp=m,Xt.isProcessing=!0,nh.update.process(Xt),nh.preRender.process(Xt),nh.render.process(Xt),Xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Bm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(j5),this.sharedNodes.forEach(k5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!an(this.snapshot.measuredBox.x)&&!an(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:m}=this.options;m&&m.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let m=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(m=!1),m&&this.instance){const p=r(this.instance);this.scroll={animationId:this.root.animationId,phase:f,isRoot:p,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!l)return;const f=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,m=this.projectionDelta&&!v1(this.projectionDelta),p=this.getTransformTemplate(),y=p?p(this.latestValues,""):void 0,b=y!==this.prevTransformTemplateValue;f&&this.instance&&(m||xa(this.latestValues)||b)&&(l(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const m=this.measurePageBox();let p=this.removeElementScroll(m);return f&&(p=this.removeTransform(p)),z5(p),{animationId:this.root.animationId,measuredBox:m,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:f}=this.options;if(!f)return Dt();const m=f.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(B5))){const{scroll:y}=this.root;y&&(Dr(m.x,y.offset.x),Dr(m.y,y.offset.y))}return m}removeElementScroll(f){const m=Dt();if(Jn(m,f),this.scroll?.wasRoot)return m;for(let p=0;p<this.path.length;p++){const y=this.path[p],{scroll:b,options:v}=y;y!==this.root&&b&&v.layoutScroll&&(b.wasRoot&&Jn(m,f),Dr(m.x,b.offset.x),Dr(m.y,b.offset.y))}return m}applyTransform(f,m=!1){const p=Dt();Jn(p,f);for(let y=0;y<this.path.length;y++){const b=this.path[y];!m&&b.options.layoutScroll&&b.scroll&&b!==b.root&&zr(p,{x:-b.scroll.offset.x,y:-b.scroll.offset.y}),xa(b.latestValues)&&zr(p,b.latestValues)}return xa(this.latestValues)&&zr(p,this.latestValues),p}removeTransform(f){const m=Dt();Jn(m,f);for(let p=0;p<this.path.length;p++){const y=this.path[p];if(!y.instance||!xa(y.latestValues))continue;Yh(y.latestValues)&&y.updateSnapshot();const b=Dt(),v=y.measurePageBox();Jn(b,v),Hb(m,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,b)}return xa(this.latestValues)&&Hb(m,this.latestValues),m}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){const m=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=m.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=m.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=m.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==m;if(!(f||p&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:b,layoutId:v}=this.options;if(!this.layout||!(b||v))return;this.resolvedRelativeTargetAt=Xt.timestamp;const w=this.getClosestProjectingParent();w&&this.linkedParentVersion!==w.layoutVersion&&!w.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(w&&w.layout?this.createRelativeTarget(w,this.layout.layoutBox,w.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$T(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Jn(this.target,this.layout.layoutBox),e1(this.target,this.targetDelta)):Jn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?this.createRelativeTarget(w,this.target,w.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Yh(this.parent.latestValues)||Jx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(f,m,p){this.relativeParent=f,this.linkedParentVersion=f.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),Su(this.relativeTargetOrigin,m,p),Jn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const f=this.getLead(),m=!!this.resumingFrom||this!==f;let p=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(p=!1),m&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Xt.timestamp&&(p=!1),p)return;const{layout:y,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||b))return;Jn(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,w=this.treeScale.y;tT(this.layoutCorrected,this.treeScale,this.path,m),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=Dt());const{target:E}=f;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Lb(this.prevProjectionDelta.x,this.projectionDelta.x),Lb(this.prevProjectionDelta.y,this.projectionDelta.y)),dl(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==w||!Gb(this.projectionDelta.x,this.prevProjectionDelta.x)||!Gb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){if(this.options.visualElement?.scheduleRender(),f){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Br(),this.projectionDelta=Br(),this.projectionDeltaWithTransform=Br()}setAnimationOrigin(f,m=!1){const p=this.snapshot,y=p?p.latestValues:{},b={...this.latestValues},v=Br();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!m;const w=Dt(),E=p?p.source:void 0,C=this.layout?this.layout.source:void 0,A=E!==C,D=this.getStack(),P=!D||D.members.length<=1,Q=!!(A&&!P&&this.options.crossfade===!0&&!this.path.some(N5));this.animationProgress=0;let V;this.mixTargetDelta=J=>{const G=J/1e3;Kb(v.x,f.x,G),Kb(v.y,f.y,G),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Su(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),R5(this.relativeTarget,this.relativeTargetOrigin,w,G),V&&g5(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=Dt()),Jn(V,this.relativeTarget)),A&&(this.animationValues=b,u5(b,y,this.latestValues,G,Q,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Hi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rt.update(()=>{du.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Pr(0)),this.currentAnimation=a5(this.motionValue,[0,1e3],{...f,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),f.onUpdate&&f.onUpdate(m)},onStop:()=>{},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(v5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:m,target:p,layout:y,latestValues:b}=f;if(!(!m||!p||!y)){if(this!==f&&this.layout&&y&&_1(this.options.animationType,this.layout.layoutBox,y.layoutBox)){p=this.target||Dt();const v=an(this.layout.layoutBox.x);p.x.min=f.target.x.min,p.x.max=p.x.min+v;const w=an(this.layout.layoutBox.y);p.y.min=f.target.y.min,p.y.max=p.y.min+w}Jn(m,p),zr(m,b),dl(this.projectionDeltaWithTransform,this.layoutCorrected,m,b)}}registerSharedNode(f,m){this.sharedNodes.has(f)||this.sharedNodes.set(f,new y5),this.sharedNodes.get(f).add(m);const y=m.options.initialPromotionConfig;m.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(m):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){const{layoutId:f}=this.options;return f?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:f}=this.options;return f?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:m,preserveFollowOpacity:p}={}){const y=this.getStack();y&&y.promote(this,p),f&&(this.projectionDelta=void 0,this.needsReset=!0),m&&this.setOptions({transition:m})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetSkewAndRotation(){const{visualElement:f}=this.options;if(!f)return;let m=!1;const{latestValues:p}=f;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(m=!0),!m)return;const y={};p.z&&mh("z",f,y,this.animationValues);for(let b=0;b<hh.length;b++)mh(`rotate${hh[b]}`,f,y,this.animationValues),mh(`skew${hh[b]}`,f,y,this.animationValues);f.render();for(const b in y)f.setStaticValue(b,y[b]),this.animationValues&&(this.animationValues[b]=y[b]);f.scheduleRender()}applyProjectionStyles(f,m){if(!this.instance||this.isSVG)return;if(!this.isVisible){f.visibility="hidden";return}const p=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,f.visibility="",f.opacity="",f.pointerEvents=uu(m?.pointerEvents)||"",f.transform=p?p(this.latestValues,""):"none";return}const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=uu(m?.pointerEvents)||""),this.hasProjected&&!xa(this.latestValues)&&(f.transform=p?p({},""):"none",this.hasProjected=!1);return}f.visibility="";const b=y.animationValues||y.latestValues;this.applyTransformsToTarget();let v=b5(this.projectionDeltaWithTransform,this.treeScale,b);p&&(v=p(b,v)),f.transform=v;const{x:w,y:E}=this.projectionDelta;f.transformOrigin=`${w.origin*100}% ${E.origin*100}% 0`,y.animationValues?f.opacity=y===this?b.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:b.opacityExit:f.opacity=y===this?b.opacity!==void 0?b.opacity:"":b.opacityExit!==void 0?b.opacityExit:0;for(const C in Gh){if(b[C]===void 0)continue;const{correct:A,applyTo:D,isCSSVariable:P}=Gh[C],Q=v==="none"?b[C]:A(b[C],y);if(D){const V=D.length;for(let J=0;J<V;J++)f[D[J]]=Q}else P?this.options.visualElement.renderState.vars[C]=Q:f[C]=Q}this.options.layoutId&&(f.pointerEvents=y===this?uu(m?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>f.currentAnimation?.stop()),this.root.nodes.forEach(Yb),this.root.sharedNodes.clear()}}}function S5(s){s.updateLayout()}function w5(s){const n=s.resumeFrom?.snapshot||s.snapshot;if(s.isLead()&&s.layout&&n&&s.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=s.layout,{animationType:l}=s.options,d=n.source!==s.layout.source;l==="size"?qn(b=>{const v=d?n.measuredBox[b]:n.layoutBox[b],w=an(v);v.min=i[b].min,v.max=v.min+w}):_1(l,n.layoutBox,i)&&qn(b=>{const v=d?n.measuredBox[b]:n.layoutBox[b],w=an(i[b]);v.max=v.min+w,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[b].max=s.relativeTarget[b].min+w)});const f=Br();dl(f,i,n.layoutBox);const m=Br();d?dl(m,s.applyTransform(r,!0),n.measuredBox):dl(m,i,n.layoutBox);const p=!v1(f);let y=!1;if(!s.resumeFrom){const b=s.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:v,layout:w}=b;if(v&&w){const E=Dt();Su(E,n.layoutBox,v.layoutBox);const C=Dt();Su(C,i,w.layoutBox),x1(E,C)||(y=!0),b.options.layoutRoot&&(s.relativeTarget=C,s.relativeTargetOrigin=E,s.relativeParent=b)}}}s.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:m,layoutDelta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:y})}else if(s.isLead()){const{onExitComplete:i}=s.options;i&&i()}s.options.transition=void 0}function _5(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function C5(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function j5(s){s.clearSnapshot()}function Yb(s){s.clearMeasurements()}function Xb(s){s.isLayoutDirty=!1}function T5(s){const{visualElement:n}=s.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),s.resetTransform()}function Wb(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function E5(s){s.resolveTargetDelta()}function M5(s){s.calcProjection()}function A5(s){s.resetSkewAndRotation()}function k5(s){s.removeLeadSnapshot()}function Kb(s,n,i){s.translate=ut(n.translate,0,i),s.scale=ut(n.scale,1,i),s.origin=n.origin,s.originPoint=n.originPoint}function Qb(s,n,i,r){s.min=ut(n.min,i.min,r),s.max=ut(n.max,i.max,r)}function R5(s,n,i,r){Qb(s.x,n.x,i.x,r),Qb(s.y,n.y,i.y,r)}function N5(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const D5={duration:.45,ease:[.4,0,.1,1]},Zb=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),Jb=Zb("applewebkit/")&&!Zb("chrome/")?Math.round:Yn;function ev(s){s.min=Jb(s.min),s.max=Jb(s.max)}function z5(s){ev(s.x),ev(s.y)}function _1(s,n,i){return s==="position"||s==="preserve-aspect"&&!VT(Fb(n),Fb(i),.2)}function B5(s){return s!==s.root&&s.scroll?.wasRoot}const U5=w1({attachResizeListener:(s,n)=>bl(s,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ph={current:void 0},C1=w1({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!ph.current){const s=new U5({});s.mount(window),s.setOptions({layoutScroll:!0}),ph.current=s}return ph.current},resetTransform:(s,n)=>{s.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),O5={pan:{Feature:s5},drag:{Feature:n5,ProjectionNode:C1,MeasureLayout:g1}};function tv(s,n,i){const{props:r}=s;s.animationState&&r.whileHover&&s.animationState.setActive("whileHover",i==="Start");const l="onHover"+i,d=r[l];d&&rt.postRender(()=>d(n,kl(n)))}class L5 extends $i{mount(){const{current:n}=this.node;n&&(this.unmount=oj(n,(i,r)=>(tv(this.node,r,"Start"),l=>tv(this.node,l,"End"))))}unmount(){}}class I5 extends $i{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=El(bl(this.node.current,"focus",()=>this.onFocus()),bl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function nv(s,n,i){const{props:r}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&r.whileTap&&s.animationState.setActive("whileTap",i==="Start");const l="onTap"+(i==="End"?"":i),d=r[l];d&&rt.postRender(()=>d(n,kl(n)))}class P5 extends $i{mount(){const{current:n}=this.node;n&&(this.unmount=dj(n,(i,r)=>(nv(this.node,r,"Start"),(l,{success:d})=>nv(this.node,l,d?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const em=new WeakMap,gh=new WeakMap,H5=s=>{const n=em.get(s.target);n&&n(s)},V5=s=>{s.forEach(H5)};function $5({root:s,...n}){const i=s||document;gh.has(i)||gh.set(i,{});const r=gh.get(i),l=JSON.stringify(n);return r[l]||(r[l]=new IntersectionObserver(V5,{root:s,...n})),r[l]}function q5(s,n,i){const r=$5(n);return em.set(s,i),r.observe(s),()=>{em.delete(s),r.unobserve(s)}}const F5={some:0,all:1};class G5 extends $i{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:i,margin:r,amount:l="some",once:d}=n,f={root:i?i.current:void 0,rootMargin:r,threshold:typeof l=="number"?l:F5[l]},m=p=>{const{isIntersecting:y}=p;if(this.isInView===y||(this.isInView=y,d&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:b,onViewportLeave:v}=this.node.getProps(),w=y?b:v;w&&w(p)};return q5(this.node.current,f,m)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:i}=this.node;["amount","margin","root"].some(Y5(n,i))&&this.startObserver()}unmount(){}}function Y5({viewport:s={}},{viewport:n={}}={}){return i=>s[i]!==n[i]}const X5={inView:{Feature:G5},tap:{Feature:P5},focus:{Feature:I5},hover:{Feature:L5}},W5={layout:{ProjectionNode:C1,MeasureLayout:g1}},K5={...UT,...X5,...O5,...W5},X=Zj(K5,dT),yh=s=>{const[n,i]=_.useState(!1);return _.useEffect(()=>{const r=window.matchMedia(s);r.matches!==n&&i(r.matches);const l=()=>i(r.matches);return r.addEventListener("change",l),()=>r.removeEventListener("change",l)},[n,s]),n},Q5=()=>{const[s,n]=_.useState({x:0,y:0}),[i,r]=_.useState(!1),[l,d]=_.useState(!1),[f,m]=_.useState(!1);return _.useEffect(()=>{const p=E=>{n({x:E.clientX,y:E.clientY}),d(!0);const A=E.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');r(!!A)},y=()=>m(!0),b=()=>m(!1),v=()=>d(!1),w=()=>d(!0);return document.addEventListener("mousemove",p),document.addEventListener("mousedown",y),document.addEventListener("mouseup",b),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",w),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mousedown",y),document.removeEventListener("mouseup",b),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",w)}},[]),l?c.jsxs(c.Fragment,{children:[c.jsx(X.div,{style:{position:"fixed",left:s.x,top:s.y,width:i?40:12,height:i?40:12,borderRadius:"50%",background:i?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:i?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${f?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),c.jsx(X.div,{style:{position:"fixed",left:s.x,top:s.y,width:i?50:32,height:i?50:32,borderRadius:"50%",border:`1.5px solid ${i?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"},animate:{x:s.x-s.x,y:s.y-s.y},transition:{type:"spring",stiffness:150,damping:15,mass:.1}})]}):null},Z5=`
  /* Custom scrollbar - only for devices with fine pointer (mouse) */
  @media (pointer: fine) {
    /* Hide default cursor on landing page */
    .landing-page-custom-cursor {
      cursor: none !important;
    }
    .landing-page-custom-cursor * {
      cursor: none !important;
    }

    /* Custom Scrollbar for html/body */
    html:has(.landing-page-custom-cursor)::-webkit-scrollbar,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.landing-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    /* Firefox scrollbar */
    html:has(.landing-page-custom-cursor),
    body:has(.landing-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  /* Touch devices - use default cursor and scrollbar */
  @media (pointer: coarse) {
    .landing-page-custom-cursor {
      cursor: auto !important;
    }
    .landing-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,ts={page:{background:"#050505",fontFamily:'"DM Sans", sans-serif',color:"#f1f5f9",minHeight:"100vh",overflowX:"hidden"},h1:{fontFamily:'"Syne", sans-serif',color:"#ffffff",fontSize:"clamp(2.5rem, 8vw, 4.5rem)",fontWeight:700,lineHeight:1.1,marginBottom:"1.5rem"},h2:{fontFamily:'"Syne", sans-serif',color:"#f1f5f9",fontSize:"clamp(2rem, 5vw, 3rem)",fontWeight:700,lineHeight:1.2,marginBottom:"1.5rem"},h3:{fontFamily:'"Syne", sans-serif',color:"#f1f5f9",fontSize:"1.25rem",fontWeight:700,lineHeight:1.4,marginBottom:"0.75rem"},text:{color:"#94a3b8",fontSize:"1rem",lineHeight:1.7,marginBottom:0},textLarge:{color:"#94a3b8",fontSize:"1.125rem",lineHeight:1.7,marginBottom:0},gradientText:{background:"linear-gradient(135deg, #10b981 0%, #14b8a6 50%, #34d399 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"}},J5=({delay:s,duration:n,size:i,left:r,top:l})=>c.jsx(X.div,{className:"absolute rounded-full",style:{width:i,height:i,left:r,top:l,background:"radial-gradient(circle, rgba(16,185,129,0.4) 0%, transparent 70%)",filter:"blur(1px)"},animate:{y:[-20,20,-20],x:[-10,10,-10],opacity:[.3,.6,.3],scale:[1,1.2,1]},transition:{duration:n,delay:s,repeat:1/0,ease:"easeInOut"}}),Mr=({size:s,color:n,delay:i,x:r,y:l})=>c.jsx(X.div,{style:{position:"absolute",left:r,top:l},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1,y:[0,-15,0]},transition:{opacity:{duration:.6,delay:i},scale:{duration:.6,delay:i},y:{duration:3,delay:i+.5,repeat:1/0,ease:"easeInOut"}},children:c.jsxs("div",{style:{position:"relative",width:s,height:s,transformStyle:"preserve-3d",transform:"rotateX(-20deg) rotateY(45deg)"},children:[c.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(135deg, ${n} 0%, ${n}99 100%)`,transform:`translateZ(${s/2}px)`,borderRadius:8,boxShadow:`0 0 30px ${n}66`}}),c.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(180deg, ${n}cc 0%, ${n}66 100%)`,transform:`rotateX(-90deg) translateZ(${s/2}px)`,borderRadius:8}}),c.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(90deg, ${n}99 0%, ${n}44 100%)`,transform:`rotateY(90deg) translateZ(${s/2}px)`,borderRadius:8}})]})}),eE=({icon:s,title:n,description:i})=>c.jsx(X.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.5},whileHover:{y:-8,scale:1.02},style:{position:"relative"},children:c.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"1rem",padding:"2rem",height:"100%",background:"linear-gradient(145deg, rgba(20,20,20,0.95) 0%, rgba(10,10,10,0.98) 100%)",border:"1px solid rgba(16,185,129,0.2)"},children:[c.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"3.5rem",height:"3.5rem",borderRadius:"0.75rem",marginBottom:"1.5rem",background:"linear-gradient(135deg, rgba(16,185,129,0.2) 0%, rgba(20,184,166,0.1) 100%)",border:"1px solid rgba(16,185,129,0.3)"},children:c.jsx(s,{style:{width:"1.75rem",height:"1.75rem",color:"#34d399"}})}),c.jsx("h3",{style:ts.h3,children:n}),c.jsx("p",{style:ts.text,children:i})]})}),tE=()=>{const s=_.useRef(null),n=yh("(max-width: 640px)"),i=yh("(max-width: 1024px)"),r=yh("(pointer: fine)");_.useEffect(()=>{const f="landing-page-custom-styles";if(!document.getElementById(f)){const m=document.createElement("style");m.id=f,m.textContent=Z5,document.head.appendChild(m)}return()=>{const m=document.getElementById(f);m&&m.remove()}},[]);const l=Array.from({length:20},(f,m)=>({id:m,delay:Math.random()*2,duration:4+Math.random()*3,size:4+Math.random()*8,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`})),d=[{icon:cw,title:"Real-time Messaging",description:"Lightning-fast message delivery with live typing indicators. Your conversations flow naturally without any delays."},{icon:Or,title:"End-to-End Security",description:"Your conversations stay private with military-grade encryption. Only you and your recipients can read your messages."},{icon:Lt,title:"Group Collaboration",description:"Create channels, manage groups, and share files seamlessly. Perfect for teams of any size."}];return c.jsxs("div",{ref:s,className:r?"landing-page-custom-cursor":"",style:ts.page,children:[r&&c.jsx(Q5,{}),c.jsx("div",{className:"fixed inset-0 pointer-events-none",style:{background:`
            radial-gradient(ellipse 80% 50% at 20% -10%, rgba(16,185,129,0.15) 0%, transparent 50%),
            radial-gradient(ellipse 60% 40% at 80% 10%, rgba(20,184,166,0.1) 0%, transparent 50%),
            radial-gradient(ellipse 50% 30% at 50% 100%, rgba(16,185,129,0.08) 0%, transparent 50%)
          `}}),c.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:l.map(f=>c.jsx(J5,{...f},f.id))}),c.jsx(X.nav,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},style:{position:"fixed",top:0,left:0,right:0,zIndex:50,backdropFilter:"blur(12px)",background:"rgba(5,5,5,0.85)",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:c.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"0.875rem 1rem":"1rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsxs(Cs,{to:"/",style:{display:"flex",alignItems:"center",gap:n?"0.5rem":"0.75rem",textDecoration:"none"},children:[c.jsx("div",{style:{width:n?"2rem":"2.5rem",height:n?"2rem":"2.5rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",boxShadow:"0 0 20px rgba(16,185,129,0.4)"},children:c.jsx(fl,{style:{width:n?"1rem":"1.25rem",height:n?"1rem":"1.25rem",color:"#ffffff"}})}),c.jsx("span",{style:{fontSize:n?"1rem":"1.25rem",fontWeight:700,color:"#ffffff",fontFamily:'"Syne", sans-serif'},children:"Simpchat"})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:n?"0.5rem":"0.75rem"},children:[c.jsx(Cs,{to:"/login",style:{padding:n?"0.375rem 0.625rem":"0.5rem 1rem",fontSize:n?"0.813rem":"0.875rem",fontWeight:600,color:"#10b981",textDecoration:"none",borderRadius:"0.5rem",transition:"all 0.2s ease"},children:"Sign In"}),c.jsx(Cs,{to:"/register",style:{display:"inline-flex",alignItems:"center",gap:"0.375rem",padding:n?"0.5rem 0.875rem":"0.625rem 1.25rem",fontSize:n?"0.813rem":"0.875rem",fontWeight:600,borderRadius:"0.5rem",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",color:"#050505",textDecoration:"none",boxShadow:"0 0 20px rgba(16,185,129,0.3)",transition:"all 0.2s ease"},children:"Get Started"})]})]})}),c.jsxs("section",{style:{position:"relative",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"5rem"},children:[c.jsx("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"3rem 1rem":"5rem 1.5rem"},children:c.jsxs("div",{style:{display:"grid",gridTemplateColumns:i?"1fr":"repeat(2, 1fr)",gap:i?"2rem":"4rem",alignItems:"center"},children:[c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx(X.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},style:{marginBottom:"1.5rem"},children:c.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:500,background:"rgba(16,185,129,0.1)",border:"1px solid rgba(16,185,129,0.3)",color:"#10b981"},children:[c.jsx(jh,{style:{width:"1rem",height:"1rem"}}),"Simple. Secure. Seamless."]})}),c.jsxs(X.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},style:ts.h1,children:[c.jsx("span",{style:{color:"#ffffff"},children:"Connect."}),c.jsx("br",{}),c.jsx("span",{style:ts.gradientText,children:"Chat."}),c.jsx("br",{}),c.jsx("span",{style:{color:"#ffffff"},children:"Simplify."})]}),c.jsx(X.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},style:{...ts.textLarge,marginBottom:"2.5rem",maxWidth:"32rem",margin:"0 auto 2.5rem auto"},children:"Experience real-time messaging reimagined. Simpchat brings you instant communication with uncompromising security and elegant simplicity."}),c.jsxs(X.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},style:{display:"flex",flexDirection:"row",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[c.jsxs(Cs,{to:"/register",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.875rem 1.75rem",fontSize:"0.938rem",fontWeight:600,borderRadius:"0.75rem",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",color:"#050505",boxShadow:"0 0 25px rgba(16,185,129,0.35)",textDecoration:"none",transition:"all 0.3s ease"},children:["Start Chatting Free",c.jsx(Na,{style:{width:"1.125rem",height:"1.125rem"}})]}),c.jsx(Cs,{to:"/login",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.875rem 1.75rem",fontSize:"0.938rem",fontWeight:600,borderRadius:"0.75rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.15)",color:"#f1f5f9",textDecoration:"none",transition:"all 0.3s ease"},children:"Open App"})]}),c.jsxs(X.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.7},style:{display:"flex",flexDirection:n?"column":"row",alignItems:"center",gap:n?"0.75rem":"2rem",marginTop:"2.5rem",justifyContent:"center"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(im,{style:{width:"1rem",height:"1rem",color:"#34d399"}}),c.jsx("span",{style:{fontSize:n?"0.813rem":"0.875rem",color:"#64748b"},children:"End-to-end encrypted"})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(am,{style:{width:"1rem",height:"1rem",color:"#34d399"}}),c.jsx("span",{style:{fontSize:n?"0.813rem":"0.875rem",color:"#64748b"},children:"Real-time notifications"})]})]})]}),!i&&c.jsx("div",{style:{position:"relative",height:"500px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:[c.jsx("div",{style:{position:"absolute",width:"20rem",height:"20rem",borderRadius:"50%",background:"radial-gradient(circle, rgba(16,185,129,0.25) 0%, transparent 70%)",filter:"blur(40px)"}}),c.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",perspective:"1000px"},children:[c.jsx(Mr,{size:100,color:"#10b981",delay:0,x:180,y:120}),c.jsx(Mr,{size:70,color:"#14b8a6",delay:.2,x:280,y:180}),c.jsx(Mr,{size:50,color:"#34d399",delay:.4,x:220,y:250}),c.jsx(Mr,{size:80,color:"#10b981",delay:.3,x:120,y:200}),c.jsx(Mr,{size:60,color:"#0d9488",delay:.5,x:300,y:280}),c.jsx(Mr,{size:40,color:"#14b8a6",delay:.6,x:160,y:300})]}),c.jsx(X.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.8},style:{position:"absolute",top:"25%",right:"2.5rem"},children:c.jsx("div",{style:{padding:"1rem 1.5rem",borderRadius:"1rem",borderBottomRightRadius:"0.375rem",background:"linear-gradient(135deg, rgba(16,185,129,0.2) 0%, rgba(16,185,129,0.1) 100%)",border:"1px solid rgba(16,185,129,0.3)",backdropFilter:"blur(10px)"},children:c.jsx("p",{style:{fontSize:"0.875rem",fontWeight:500,color:"#6ee7b7",margin:0},children:"Hey! Welcome to Simpchat"})})}),c.jsx(X.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:1},style:{position:"absolute",bottom:"25%",left:"2.5rem"},children:c.jsx("div",{style:{padding:"1rem 1.5rem",borderRadius:"1rem",borderBottomLeftRadius:"0.375rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",backdropFilter:"blur(10px)"},children:c.jsx("p",{style:{fontSize:"0.875rem",fontWeight:500,color:"#cbd5e1",margin:0},children:"Thanks! This is amazing"})})})]})})]})}),c.jsxs(X.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},style:{position:"absolute",bottom:"2.5rem",left:"50%",transform:"translateX(-50%)",cursor:"pointer"},onClick:()=>document.getElementById("features")?.scrollIntoView({behavior:"smooth"}),children:[c.jsx(X.div,{animate:{y:[0,10,0]},transition:{duration:1.5,repeat:1/0},style:{width:"2rem",height:"3.5rem",borderRadius:"9999px",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:"0.625rem",border:"2px solid rgba(255,255,255,0.25)",background:"rgba(255,255,255,0.03)"},children:c.jsx(X.div,{animate:{y:[0,8,0],opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},style:{width:"0.5rem",height:"1rem",borderRadius:"9999px",background:"linear-gradient(180deg, #10b981 0%, #14b8a6 100%)",boxShadow:"0 0 8px rgba(16,185,129,0.5)"}})}),c.jsx("p",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.4)",marginTop:"0.5rem",textAlign:"center",fontWeight:500},children:"Scroll"})]})]}),c.jsx("section",{id:"features",style:{position:"relative",padding:n?"4rem 0":"8rem 0"},children:c.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"0 1rem":"0 1.5rem"},children:[c.jsxs(X.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},style:{textAlign:"center",marginBottom:"4rem"},children:[c.jsxs("h2",{style:ts.h2,children:["Built for"," ",c.jsx("span",{style:ts.gradientText,children:"Modern Teams"})]}),c.jsx("p",{style:{...ts.textLarge,maxWidth:"42rem",margin:"0 auto"},children:"Everything you need for seamless communication, wrapped in an elegant interface that stays out of your way."})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",gap:n?"1rem":"1.5rem"},children:d.map((f,m)=>c.jsx(eE,{...f,index:m},f.title))})]})}),c.jsx("section",{style:{position:"relative",padding:n?"4rem 0":"8rem 0"},children:c.jsx("div",{style:{maxWidth:"56rem",margin:"0 auto",padding:n?"0 1rem":"0 1.5rem",textAlign:"center"},children:c.jsxs(X.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},style:{position:"relative",borderRadius:n?"1rem":"1.5rem",padding:n?"2.5rem 1.5rem":"4rem 3rem",overflow:"hidden",background:"linear-gradient(145deg, rgba(16,185,129,0.1) 0%, rgba(5,5,5,0.9) 100%)",border:"1px solid rgba(16,185,129,0.2)"},children:[c.jsx("div",{style:{position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",width:"100%",height:"50%",background:"radial-gradient(ellipse at center top, rgba(16,185,129,0.15) 0%, transparent 70%)"}}),c.jsx("h2",{style:{...ts.h2,position:"relative"},children:"Ready to simplify your conversations?"}),c.jsx("p",{style:{...ts.textLarge,position:"relative",maxWidth:"32rem",margin:"0 auto 2.5rem auto"},children:"Join thousands of users who have already made the switch to simpler, more secure messaging."}),c.jsxs(Cs,{to:"/register",style:{position:"relative",display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",fontSize:"1rem",fontWeight:600,borderRadius:"0.75rem",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",color:"#050505",boxShadow:"0 0 40px rgba(16,185,129,0.4)",textDecoration:"none"},children:["Get Started  It's Free",c.jsx(Na,{style:{width:"1.25rem",height:"1.25rem"}})]})]})})}),c.jsx("footer",{style:{position:"relative",padding:n?"2rem 0":"3rem 0",borderTop:"1px solid rgba(255,255,255,0.05)"},children:c.jsx("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"0 1rem":"0 1.5rem"},children:c.jsxs("div",{style:{display:"flex",flexDirection:n?"column":"row",alignItems:"center",justifyContent:n?"center":"space-between",gap:n?"1rem":"1.5rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.jsx("div",{style:{width:"2rem",height:"2rem",borderRadius:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)"},children:c.jsx(fl,{style:{width:"1rem",height:"1rem",color:"#ffffff"}})}),c.jsx("span",{style:{fontSize:"1.125rem",fontWeight:700,color:"#ffffff",fontFamily:'"Syne", sans-serif'},children:"Simpchat"})]}),c.jsxs("p",{style:{fontSize:"0.875rem",color:"#64748b",margin:0},children:[" ",new Date().getFullYear()," Simpchat. All rights reserved."]})]})})})]})},nE="_authContainer_1u6uv_47",sE="_orb_1u6uv_99",iE="_orb1_1u6uv_117",aE="_orb2_1u6uv_135",rE="_orb3_1u6uv_153",oE="_authCard_1u6uv_175",lE="_header_1u6uv_213",cE="_iconWrapper_1u6uv_225",uE="_title_1u6uv_257",dE="_subtitle_1u6uv_277",fE="_errorAlert_1u6uv_293",hE="_successAlert_1u6uv_343",mE="_form_1u6uv_393",pE="_inputGroup_1u6uv_401",gE="_label_1u6uv_409",yE="_inputWrapper_1u6uv_425",bE="_input_1u6uv_401",vE="_inputPassword_1u6uv_507",xE="_togglePassword_1u6uv_515",SE="_forgotLink_1u6uv_555",wE="_submitBtn_1u6uv_599",_E="_footer_1u6uv_689",CE="_backBtn_1u6uv_747",jE="_verifiedBadge_1u6uv_789",TE="_otpInput_1u6uv_837",EE="_resendSection_1u6uv_855",ME="_resendBtn_1u6uv_879",AE="_spinner_1u6uv_923",O={authContainer:nE,orb:sE,orb1:iE,orb2:aE,orb3:rE,authCard:oE,header:lE,iconWrapper:cE,title:uE,subtitle:dE,errorAlert:fE,successAlert:hE,form:mE,inputGroup:pE,label:gE,inputWrapper:yE,input:bE,inputPassword:vE,togglePassword:xE,forgotLink:SE,submitBtn:wE,footer:_E,backBtn:CE,verifiedBadge:jE,otpInput:TE,resendSection:EE,resendBtn:ME,spinner:AE},kE=()=>{const s=sm(),{login:n,isLoading:i,error:r,clearError:l}=Tl(),[d,f]=_.useState(""),[m,p]=_.useState(""),[y,b]=_.useState(!1),v=async w=>{w.preventDefault(),l();try{console.log("[LoginForm] Starting login..."),await n({credential:d,password:m});const E=tt.getState();console.log("[LoginForm] Login successful. Auth state:",{hasToken:!!E.token,hasUser:!!E.user,isLoading:E.isLoading}),E.token&&E.user?(console.log("[LoginForm] Auth state verified, navigating to dashboard..."),s("/dashboard-new")):console.error("[LoginForm] Login completed but auth state not set!")}catch(E){console.error("[LoginForm] Login error:",E)}};return c.jsxs("div",{className:O.authContainer,children:[c.jsx("div",{className:`${O.orb} ${O.orb1}`}),c.jsx("div",{className:`${O.orb} ${O.orb2}`}),c.jsx("div",{className:`${O.orb} ${O.orb3}`}),c.jsxs("div",{className:O.authCard,children:[c.jsxs("div",{className:O.header,children:[c.jsx("div",{className:O.iconWrapper,children:c.jsx(fl,{size:32,color:"#ffffff"})}),c.jsx("h1",{className:O.title,children:"Sign In"}),c.jsx("p",{className:O.subtitle,children:"Welcome back to Simpchat"})]}),r&&c.jsxs("div",{className:O.errorAlert,children:[c.jsx(Da,{size:20}),c.jsx("p",{children:r})]}),c.jsxs("form",{onSubmit:v,className:O.form,children:[c.jsxs("div",{className:O.inputGroup,children:[c.jsx("label",{htmlFor:"credential",className:O.label,children:"Email or Username"}),c.jsx("input",{id:"credential",type:"text",value:d,onChange:w=>f(w.target.value),placeholder:"john@example.com",required:!0,disabled:i,className:O.input})]}),c.jsxs("div",{className:O.inputGroup,children:[c.jsx("label",{htmlFor:"password",className:O.label,children:"Password"}),c.jsxs("div",{className:O.inputWrapper,children:[c.jsx("input",{id:"password",type:y?"text":"password",value:m,onChange:w=>p(w.target.value),placeholder:"",required:!0,disabled:i,className:`${O.input} ${O.inputPassword}`}),c.jsx("button",{type:"button",onClick:()=>b(!y),disabled:i,className:O.togglePassword,children:y?c.jsx(hl,{size:20}):c.jsx(Lr,{size:20})})]})]}),c.jsx("div",{className:O.forgotLink,children:c.jsx(Cs,{to:"/forgot-password",children:"Forgot password?"})}),c.jsx("button",{type:"submit",disabled:i||!d||!m,className:O.submitBtn,children:i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:O.spinner}),"Signing in..."]}):c.jsxs(c.Fragment,{children:["Sign In",c.jsx(Na,{size:20})]})})]}),c.jsxs("div",{className:O.footer,children:[c.jsx("p",{children:"Don't have an account?"}),c.jsx(Cs,{to:"/register",children:"Create Account "})]})]})]})},RE=s=>{const[n,i]=_.useState(!1);return _.useEffect(()=>{const r=window.matchMedia(s);r.matches!==n&&i(r.matches);const l=()=>i(r.matches);return r.addEventListener("change",l),()=>r.removeEventListener("change",l)},[n,s]),n},NE=()=>{const[s,n]=_.useState({x:0,y:0}),[i,r]=_.useState(!1),[l,d]=_.useState(!1),[f,m]=_.useState(!1);return _.useEffect(()=>{const p=E=>{n({x:E.clientX,y:E.clientY}),d(!0);const A=E.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');r(!!A)},y=()=>m(!0),b=()=>m(!1),v=()=>d(!1),w=()=>d(!0);return document.addEventListener("mousemove",p),document.addEventListener("mousedown",y),document.addEventListener("mouseup",b),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",w),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mousedown",y),document.removeEventListener("mouseup",b),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",w)}},[]),l?c.jsxs(c.Fragment,{children:[c.jsx(X.div,{style:{position:"fixed",left:s.x,top:s.y,width:i?40:12,height:i?40:12,borderRadius:"50%",background:i?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:i?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${f?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),c.jsx(X.div,{style:{position:"fixed",left:s.x,top:s.y,width:i?50:32,height:i?50:32,borderRadius:"50%",border:`1.5px solid ${i?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"}})]}):null},DE=`
  @media (pointer: fine) {
    .auth-page-custom-cursor {
      cursor: none !important;
    }
    .auth-page-custom-cursor * {
      cursor: none !important;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    html:has(.auth-page-custom-cursor),
    body:has(.auth-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  @media (pointer: coarse) {
    .auth-page-custom-cursor {
      cursor: auto !important;
    }
    .auth-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,zE=()=>{const s=RE("(pointer: fine)");return _.useEffect(()=>{const n="auth-page-custom-styles";if(!document.getElementById(n)){const i=document.createElement("style");i.id=n,i.textContent=DE,document.head.appendChild(i)}return()=>{const i=document.getElementById(n);i&&i.remove()}},[]),c.jsxs("div",{className:s?"auth-page-custom-cursor":"",children:[s&&c.jsx(NE,{}),c.jsx(kE,{})]})},BE=s=>{const n=typeof s=="string"?new Date(s):s,r=new Date().getTime()-n.getTime(),l=Math.floor(r/6e4),d=Math.floor(r/36e5),f=Math.floor(r/864e5);return l<1?"just now":l<60?`${l}m ago`:d<24?`${d}h ago`:f<7?`${f}d ago`:n.toLocaleDateString()},UE=s=>(typeof s=="string"?new Date(s):s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),sv=(s,n)=>s.length<=n?s:s.substring(0,n)+"...",Fn=s=>{if(!s||s==="undefined"||s==="null")return"?";const n=String(s).trim();if(!n||n.length===0)return"?";const i=n.split(/\s+/).filter(r=>r.length>0);return i.length===0?"?":i.length===1?i[0][0]?.toUpperCase()||"?":i.map(r=>r[0]).join("").toUpperCase().slice(0,2)||"?"},j1=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),et=s=>{if(s)return s.replace("simpchat.filestorage:9000","localhost:9000").replace("localhost:9000","localhost:9000")},T1=s=>{if(!s)return"Unknown";const n=new Date(s),r=new Date().getTime()-n.getTime(),l=Math.floor(r/6e4),d=Math.floor(r/36e5),f=Math.floor(r/864e5);if(l<1)return"just now";if(l===1)return"1 minute ago";if(l<60)return`${l} minutes ago`;if(d===1)return"1 hour ago";if(d<24)return`${d} hours ago`;if(f===1)return`Yesterday at ${n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`;if(f<7){const m=n.toLocaleDateString([],{weekday:"long"}),p=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`${m} at ${p}`}return n.toLocaleDateString([],{month:"short",day:"numeric",year:"numeric"})},OE=()=>{const s=sm(),{register:n,isLoading:i}=Tl(),[r,l]=_.useState("email"),[d,f]=_.useState(""),[m,p]=_.useState(""),[y,b]=_.useState(""),[v,w]=_.useState(""),[E,C]=_.useState(""),[A,D]=_.useState(!1),[P,Q]=_.useState(!1),[V,J]=_.useState(""),[G,ee]=_.useState(!1),se=async ue=>{if(ue.preventDefault(),J(""),!j1(d)){J("Please enter a valid email address");return}ee(!0);try{await Pi.sendOTP(d),l("complete")}catch(Ce){J(Bt(Ce,"Failed to send verification code"))}finally{ee(!1)}},W=async ue=>{if(ue.preventDefault(),J(""),!m.trim()){J("Username is required");return}if(m.length<3){J("Username must be at least 3 characters");return}if(y.length<5){J("Password must be at least 5 characters");return}if(y!==v){J("Passwords do not match");return}if(!E.trim()){J("Verification code is required");return}try{console.log("[RegisterForm] Registering user..."),await n(d,m,y,E);const Ce=tt.getState();console.log("[RegisterForm] Registration successful. Auth state:",{hasToken:!!Ce.token,hasUser:!!Ce.user,isLoading:Ce.isLoading}),Ce.token&&Ce.user?(console.log("[RegisterForm] Auth state verified, navigating to dashboard..."),s("/dashboard-new")):console.error("[RegisterForm] Registration completed but auth state not set!")}catch(Ce){J(Bt(Ce,"Registration failed"))}},le=async()=>{J(""),ee(!0);try{await Pi.sendOTP(d)}catch(ue){J(Bt(ue,"Failed to resend code"))}finally{ee(!1)}};return r==="email"?c.jsxs("div",{className:O.authContainer,children:[c.jsx("div",{className:`${O.orb} ${O.orb1}`}),c.jsx("div",{className:`${O.orb} ${O.orb2}`}),c.jsx("div",{className:`${O.orb} ${O.orb3}`}),c.jsxs("div",{className:O.authCard,children:[c.jsxs("div",{className:O.header,children:[c.jsx("div",{className:O.iconWrapper,children:c.jsx(fl,{size:32,color:"#ffffff"})}),c.jsx("h1",{className:O.title,children:"Create Account"}),c.jsx("p",{className:O.subtitle,children:"Join Simpchat today"})]}),V&&c.jsxs("div",{className:O.errorAlert,children:[c.jsx(Da,{size:20}),c.jsx("p",{children:V})]}),c.jsxs("form",{onSubmit:se,className:O.form,children:[c.jsxs("div",{className:O.inputGroup,children:[c.jsx("label",{htmlFor:"email",className:O.label,children:"Email Address"}),c.jsx("input",{id:"email",type:"email",value:d,onChange:ue=>f(ue.target.value),placeholder:"you@example.com",required:!0,disabled:G,className:O.input})]}),c.jsx("button",{type:"submit",disabled:G||!d,className:O.submitBtn,children:G?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:O.spinner}),"Sending..."]}):c.jsxs(c.Fragment,{children:["Continue",c.jsx(Na,{size:20})]})})]}),c.jsxs("div",{className:O.footer,children:[c.jsx("p",{children:"Already have an account?"}),c.jsx(Cs,{to:"/login",children:"Sign In "})]})]})]}):c.jsxs("div",{className:O.authContainer,children:[c.jsx("div",{className:`${O.orb} ${O.orb1}`}),c.jsx("div",{className:`${O.orb} ${O.orb2}`}),c.jsx("div",{className:`${O.orb} ${O.orb3}`}),c.jsxs("div",{className:O.authCard,children:[c.jsxs("div",{className:O.header,style:{textAlign:"left"},children:[c.jsxs("button",{onClick:()=>l("email"),className:O.backBtn,children:[c.jsx(yv,{size:16}),"Back"]}),c.jsx("h1",{className:O.title,style:{textAlign:"left"},children:"Complete Profile"}),c.jsxs("div",{className:O.verifiedBadge,children:[c.jsx(Th,{size:16}),c.jsxs("p",{children:["Email verified: ",d]})]})]}),V&&c.jsxs("div",{className:O.errorAlert,children:[c.jsx(Da,{size:20}),c.jsx("p",{children:V})]}),c.jsxs("form",{onSubmit:W,className:O.form,children:[c.jsxs("div",{className:O.inputGroup,children:[c.jsx("label",{htmlFor:"username",className:O.label,children:"Username"}),c.jsx("input",{id:"username",type:"text",value:m,onChange:ue=>p(ue.target.value),placeholder:"johndoe",required:!0,disabled:i,className:O.input})]}),c.jsxs("div",{className:O.inputGroup,children:[c.jsx("label",{htmlFor:"password",className:O.label,children:"Password"}),c.jsxs("div",{className:O.inputWrapper,children:[c.jsx("input",{id:"password",type:A?"text":"password",value:y,onChange:ue=>b(ue.target.value),placeholder:"",required:!0,disabled:i,className:`${O.input} ${O.inputPassword}`}),c.jsx("button",{type:"button",onClick:()=>D(!A),disabled:i,className:O.togglePassword,children:A?c.jsx(hl,{size:20}):c.jsx(Lr,{size:20})})]})]}),c.jsxs("div",{className:O.inputGroup,children:[c.jsx("label",{htmlFor:"confirm-password",className:O.label,children:"Confirm Password"}),c.jsxs("div",{className:O.inputWrapper,children:[c.jsx("input",{id:"confirm-password",type:P?"text":"password",value:v,onChange:ue=>w(ue.target.value),placeholder:"",required:!0,disabled:i,className:`${O.input} ${O.inputPassword}`}),c.jsx("button",{type:"button",onClick:()=>Q(!P),disabled:i,className:O.togglePassword,children:P?c.jsx(hl,{size:20}):c.jsx(Lr,{size:20})})]})]}),c.jsxs("div",{className:O.inputGroup,children:[c.jsx("label",{htmlFor:"otp-code",className:O.label,children:"Verification Code"}),c.jsx("input",{id:"otp-code",type:"text",value:E,onChange:ue=>C(ue.target.value),placeholder:"000000",required:!0,disabled:i,className:`${O.input} ${O.otpInput}`})]}),c.jsx("button",{type:"submit",disabled:i||!m||!y||!v||!E,className:O.submitBtn,children:i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:O.spinner}),"Creating..."]}):c.jsxs(c.Fragment,{children:["Create Account",c.jsx(Na,{size:20})]})})]}),c.jsxs("div",{className:O.resendSection,children:[c.jsx("p",{children:"Didn't get the code?"}),c.jsx("button",{onClick:le,disabled:G,className:O.resendBtn,children:G?"Resending...":"Resend Code"})]})]})]})},LE=s=>{const[n,i]=_.useState(!1);return _.useEffect(()=>{const r=window.matchMedia(s);r.matches!==n&&i(r.matches);const l=()=>i(r.matches);return r.addEventListener("change",l),()=>r.removeEventListener("change",l)},[n,s]),n},IE=()=>{const[s,n]=_.useState({x:0,y:0}),[i,r]=_.useState(!1),[l,d]=_.useState(!1),[f,m]=_.useState(!1);return _.useEffect(()=>{const p=E=>{n({x:E.clientX,y:E.clientY}),d(!0);const A=E.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');r(!!A)},y=()=>m(!0),b=()=>m(!1),v=()=>d(!1),w=()=>d(!0);return document.addEventListener("mousemove",p),document.addEventListener("mousedown",y),document.addEventListener("mouseup",b),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",w),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mousedown",y),document.removeEventListener("mouseup",b),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",w)}},[]),l?c.jsxs(c.Fragment,{children:[c.jsx(X.div,{style:{position:"fixed",left:s.x,top:s.y,width:i?40:12,height:i?40:12,borderRadius:"50%",background:i?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:i?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${f?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),c.jsx(X.div,{style:{position:"fixed",left:s.x,top:s.y,width:i?50:32,height:i?50:32,borderRadius:"50%",border:`1.5px solid ${i?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"}})]}):null},PE=`
  @media (pointer: fine) {
    .auth-page-custom-cursor {
      cursor: none !important;
    }
    .auth-page-custom-cursor * {
      cursor: none !important;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    html:has(.auth-page-custom-cursor),
    body:has(.auth-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  @media (pointer: coarse) {
    .auth-page-custom-cursor {
      cursor: auto !important;
    }
    .auth-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,HE=()=>{const s=LE("(pointer: fine)");return _.useEffect(()=>{const n="auth-page-custom-styles";if(!document.getElementById(n)){const i=document.createElement("style");i.id=n,i.textContent=PE,document.head.appendChild(i)}return()=>{const i=document.getElementById(n);i&&i.remove()}},[]),c.jsxs("div",{className:s?"auth-page-custom-cursor":"",children:[s&&c.jsx(IE,{}),c.jsx(OE,{})]})},VE=()=>{const s=sm(),[n,i]=_.useState("email"),[r,l]=_.useState(""),[d,f]=_.useState(""),[m,p]=_.useState(""),[y,b]=_.useState(""),[v,w]=_.useState(!1),[E,C]=_.useState(!1),[A,D]=_.useState(""),[P,Q]=_.useState(""),[V,J]=_.useState(!1),G=async W=>{if(W.preventDefault(),D(""),!j1(r)){D("Please enter a valid email address");return}J(!0);try{await Pi.sendOTP(r),i("reset")}catch(le){D(Bt(le,"Failed to send verification code"))}finally{J(!1)}},ee=async W=>{if(W.preventDefault(),D(""),Q(""),d.length<5){D("Password must be at least 5 characters");return}if(d!==m){D("Passwords do not match");return}if(!y.trim()){D("Verification code is required");return}J(!0);try{await Pi.resetPasswordByEmail(r,d,y),Q("Password reset successfully! Redirecting to login..."),setTimeout(()=>{s("/login")},2e3)}catch(le){D(Bt(le,"Failed to reset password"))}finally{J(!1)}},se=async()=>{D(""),J(!0);try{await Pi.sendOTP(r)}catch(W){D(Bt(W,"Failed to resend code"))}finally{J(!1)}};return n==="email"?c.jsxs("div",{className:O.authContainer,children:[c.jsx("div",{className:`${O.orb} ${O.orb1}`}),c.jsx("div",{className:`${O.orb} ${O.orb2}`}),c.jsx("div",{className:`${O.orb} ${O.orb3}`}),c.jsxs("div",{className:O.authCard,children:[c.jsxs("div",{className:O.header,children:[c.jsx("div",{className:O.iconWrapper,children:c.jsx(uw,{size:32,color:"#ffffff"})}),c.jsx("h1",{className:O.title,children:"Forgot Password"}),c.jsx("p",{className:O.subtitle,children:"Enter your email to reset your password"})]}),A&&c.jsxs("div",{className:O.errorAlert,children:[c.jsx(Da,{size:20}),c.jsx("p",{children:A})]}),c.jsxs("form",{onSubmit:G,className:O.form,children:[c.jsxs("div",{className:O.inputGroup,children:[c.jsx("label",{htmlFor:"email",className:O.label,children:"Email Address"}),c.jsx("input",{id:"email",type:"email",value:r,onChange:W=>l(W.target.value),placeholder:"you@example.com",required:!0,disabled:V,className:O.input})]}),c.jsx("button",{type:"submit",disabled:V||!r,className:O.submitBtn,children:V?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:O.spinner}),"Sending..."]}):c.jsxs(c.Fragment,{children:["Send Reset Code",c.jsx(Na,{size:20})]})})]}),c.jsxs("div",{className:O.footer,children:[c.jsx("p",{children:"Remember your password?"}),c.jsx(Cs,{to:"/login",children:"Back to Sign In "})]})]})]}):c.jsxs("div",{className:O.authContainer,children:[c.jsx("div",{className:`${O.orb} ${O.orb1}`}),c.jsx("div",{className:`${O.orb} ${O.orb2}`}),c.jsx("div",{className:`${O.orb} ${O.orb3}`}),c.jsxs("div",{className:O.authCard,children:[c.jsxs("div",{className:O.header,style:{textAlign:"left"},children:[c.jsxs("button",{onClick:()=>i("email"),className:O.backBtn,children:[c.jsx(yv,{size:16}),"Back"]}),c.jsx("h1",{className:O.title,style:{textAlign:"left"},children:"Reset Password"}),c.jsxs("div",{className:O.verifiedBadge,children:[c.jsx(Th,{size:16}),c.jsxs("p",{children:["Code sent to: ",r]})]})]}),P&&c.jsxs("div",{className:O.successAlert,children:[c.jsx(Th,{size:20}),c.jsx("p",{children:P})]}),A&&c.jsxs("div",{className:O.errorAlert,children:[c.jsx(Da,{size:20}),c.jsx("p",{children:A})]}),c.jsxs("form",{onSubmit:ee,className:O.form,children:[c.jsxs("div",{className:O.inputGroup,children:[c.jsx("label",{htmlFor:"password",className:O.label,children:"New Password"}),c.jsxs("div",{className:O.inputWrapper,children:[c.jsx("input",{id:"password",type:v?"text":"password",value:d,onChange:W=>f(W.target.value),placeholder:"",required:!0,disabled:V||!!P,className:`${O.input} ${O.inputPassword}`}),c.jsx("button",{type:"button",onClick:()=>w(!v),disabled:V||!!P,className:O.togglePassword,children:v?c.jsx(hl,{size:20}):c.jsx(Lr,{size:20})})]})]}),c.jsxs("div",{className:O.inputGroup,children:[c.jsx("label",{htmlFor:"confirm-password",className:O.label,children:"Confirm New Password"}),c.jsxs("div",{className:O.inputWrapper,children:[c.jsx("input",{id:"confirm-password",type:E?"text":"password",value:m,onChange:W=>p(W.target.value),placeholder:"",required:!0,disabled:V||!!P,className:`${O.input} ${O.inputPassword}`}),c.jsx("button",{type:"button",onClick:()=>C(!E),disabled:V||!!P,className:O.togglePassword,children:E?c.jsx(hl,{size:20}):c.jsx(Lr,{size:20})})]})]}),c.jsxs("div",{className:O.inputGroup,children:[c.jsx("label",{htmlFor:"otp-code",className:O.label,children:"Verification Code"}),c.jsx("input",{id:"otp-code",type:"text",value:y,onChange:W=>b(W.target.value),placeholder:"000000",required:!0,disabled:V||!!P,className:`${O.input} ${O.otpInput}`})]}),c.jsx("button",{type:"submit",disabled:V||!d||!m||!y||!!P,className:O.submitBtn,children:V?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:O.spinner}),"Resetting..."]}):c.jsxs(c.Fragment,{children:["Reset Password",c.jsx(Na,{size:20})]})})]}),!P&&c.jsxs("div",{className:O.resendSection,children:[c.jsx("p",{children:"Didn't get the code?"}),c.jsx("button",{onClick:se,disabled:V,className:O.resendBtn,children:V?"Resending...":"Resend Code"})]})]})]})},$E=s=>{const[n,i]=_.useState(!1);return _.useEffect(()=>{const r=window.matchMedia(s);r.matches!==n&&i(r.matches);const l=()=>i(r.matches);return r.addEventListener("change",l),()=>r.removeEventListener("change",l)},[n,s]),n},qE=()=>{const[s,n]=_.useState({x:0,y:0}),[i,r]=_.useState(!1),[l,d]=_.useState(!1),[f,m]=_.useState(!1);return _.useEffect(()=>{const p=E=>{n({x:E.clientX,y:E.clientY}),d(!0);const A=E.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');r(!!A)},y=()=>m(!0),b=()=>m(!1),v=()=>d(!1),w=()=>d(!0);return document.addEventListener("mousemove",p),document.addEventListener("mousedown",y),document.addEventListener("mouseup",b),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",w),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mousedown",y),document.removeEventListener("mouseup",b),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",w)}},[]),l?c.jsxs(c.Fragment,{children:[c.jsx(X.div,{style:{position:"fixed",left:s.x,top:s.y,width:i?40:12,height:i?40:12,borderRadius:"50%",background:i?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:i?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${f?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),c.jsx(X.div,{style:{position:"fixed",left:s.x,top:s.y,width:i?50:32,height:i?50:32,borderRadius:"50%",border:`1.5px solid ${i?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"}})]}):null},FE=`
  @media (pointer: fine) {
    .auth-page-custom-cursor {
      cursor: none !important;
    }
    .auth-page-custom-cursor * {
      cursor: none !important;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    html:has(.auth-page-custom-cursor),
    body:has(.auth-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  @media (pointer: coarse) {
    .auth-page-custom-cursor {
      cursor: auto !important;
    }
    .auth-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,GE=()=>{const s=$E("(pointer: fine)");return _.useEffect(()=>{const n="auth-page-custom-styles";if(!document.getElementById(n)){const i=document.createElement("style");i.id=n,i.textContent=FE,document.head.appendChild(i)}return()=>{const i=document.getElementById(n);i&&i.remove()}},[]),c.jsxs("div",{className:s?"auth-page-custom-cursor":"",children:[s&&c.jsx(qE,{}),c.jsx(VE,{})]})},YE=s=>{if(!s)return"channel";const n=String(s).toLowerCase().trim();return n==="conversation"||n==="dm"||n==="directmessage"?"dm":n==="group"?"group":(n==="channel"||console.warn("[Normalizer] Unknown chat type:",s,"defaulting to channel"),"channel")},rl=s=>{if(!s)return{};console.log("[Normalizer] Raw chat data:",{id:s.id,name:s.name,participantsCount:s.participantsCount,ParticipantsCount:s.ParticipantsCount,membersLength:s.members?.length});let n;s.privacy!==null&&s.privacy!==void 0&&(typeof s.privacy=="number"?n=s.privacy===0?"public":"private":typeof s.privacy=="string"&&(n=s.privacy.toLowerCase()));const i={id:s.id,name:s.name||"Unknown",type:YE(s.type),avatar:et(s.avatarUrl||s.AvatarUrl||s.avatar||s.profileImage),description:s.description||"",privacy:n,members:(s.members||[]).map(r=>{const l=r.user?{...r.user,id:r.user.id||r.user.userId||r.userId,avatar:et(r.user.avatarUrl||r.user.AvatarUrl||r.user.avatar||r.user.profileImage)}:{id:r.userId||r.id,username:r.username||"Unknown",email:"",avatar:et(r.avatarUrl||r.AvatarUrl||r.avatar),onlineStatus:"offline",lastSeen:new Date().toISOString()};return{id:r.id||r.userId||r.user?.id,userId:r.userId||r.id||r.user?.id,user:l,joinedAt:r.joinedAt,role:r.role||"member"}}),lastMessage:s.lastMessage?{id:s.lastMessage.id,content:s.lastMessage.content,createdAt:s.lastMessage.createdAt||s.lastMessage.sentAt||new Date().toISOString(),senderId:s.lastMessage.senderId,senderUsername:s.lastMessage.senderUsername,fileUrl:et(s.lastMessage.fileUrl),replyId:s.lastMessage.replyId,isSeen:s.lastMessage.isSeen??!1}:void 0,unreadCount:s.unreadCount!==void 0?s.unreadCount:s.notificationsCount||0,createdAt:s.created||s.createdAt||new Date().toISOString(),updatedAt:s.userLastMessage||s.updatedAt||s.createdAt||new Date().toISOString(),messages:s.messages?s.messages.map(r=>({...r,fileUrl:et(r.fileUrl),senderAvatarUrl:et(r.senderAvatarUrl),isSeen:r.isSeen??r.IsSeen??!1,seenAt:r.seenAt??r.SeenAt,isCurrentUser:r.isCurrentUser??r.IsCurrentUser??!1})):void 0,participantsCount:s.participantsCount??s.ParticipantsCount,participantsOnline:s.participantsOnline??s.ParticipantsOnline,notificationsCount:s.notificationsCount??s.NotificationsCount,isOnline:s.isOnline??s.IsOnline??!1,createdById:s.createdById??s.CreatedById??s.ownerId??s.OwnerId};return console.log("[Normalizer] Normalized chat result:",{id:i.id,name:i.name,participantsCount:i.participantsCount,createdById:i.createdById,membersCount:i.members?.length}),i},tm=s=>{if(!s)return{};console.log("[Normalizer] Normalizing user:",s),console.log("[Normalizer] User description fields:",{description:s.description,Description:s.Description,bio:s.bio});const n=s.userId||s.id||s.entityId||s.EntityId;let i="offline";return typeof s.onlineStatus=="string"?i=s.onlineStatus.toLowerCase()||"offline":typeof s.isOnline=="boolean"&&(i=s.isOnline?"online":"offline"),{id:n,username:s.username||s.displayName||s.name||"Unknown",email:s.email||"",avatar:et(s.avatarUrl||s.AvatarUrl||s.avatar||s.profileImage),bio:s.description||s.Description||s.bio||"",onlineStatus:i,lastSeen:s.lastSeen||new Date().toISOString(),addMePolicy:s.addMePolicy||"everyone"}},XE=s=>Array.isArray(s)?s.map(n=>rl(n)):(console.warn("[Normalizer] Expected array of chats, got:",typeof s),[]),iv=s=>Array.isArray(s)?s.map(n=>tm(n)):(console.warn("[Normalizer] Expected array of users, got:",typeof s),[]),Je={getAllChats:async()=>{const s=await fe.get("/chats/me");console.log("[ChatService] Raw API response:",s.data);const n=s.data?.data||s.data;console.log("[ChatService] Extracted rawChats:",n),console.log("[ChatService] First chat participantsCount:",n?.[0]?.participantsCount);const i=XE(n);return console.log("[ChatService] After normalization, first chat participantsCount:",i?.[0]?.participantsCount),i},getChat:async s=>{const n=await fe.get(`/chats/${s}`),i=n.data?.data||n.data;return console.log("[ChatService] getChat raw response:",{chatId:s,rawChat:i,hasMembers:!!i?.members,membersLength:i?.members?.length,members:i?.members}),rl(i)},getChatProfile:async s=>{const n=await fe.get(`/chats/${s}/profile`),i=n.data?.data||n.data;return console.log("[ChatService] getChatProfile raw response:",{chatId:s,rawChat:i,hasMembers:!!i?.members,membersLength:i?.members?.length,hasParticipants:!!i?.participants,participantsLength:i?.participants?.length,createdById:i?.createdById,ownerId:i?.ownerId,CreatedById:i?.CreatedById,OwnerId:i?.OwnerId}),rl(i)},createGroup:async s=>{console.log("[ChatService] createGroup called"),console.log("[ChatService] FormData contents:");for(const[r,l]of s.entries())console.log(`  ${r}:`,l instanceof File?`File(${l.name}, ${l.size} bytes)`:l);const n=await fe.post("/groups",s);console.log("[ChatService] createGroup raw response:",n),console.log("[ChatService] createGroup response.data:",n.data);const i=n.data?.data||n.data;return console.log("[ChatService] createGroup rawChat:",i),rl(i)},createChannel:async s=>{console.log("[ChatService] createChannel called"),console.log("[ChatService] FormData contents:");for(const[r,l]of s.entries())console.log(`  ${r}:`,l instanceof File?`File(${l.name}, ${l.size} bytes)`:l);const n=await fe.post("/channels",s);console.log("[ChatService] createChannel raw response:",n),console.log("[ChatService] createChannel response.data:",n.data);const i=n.data?.data||n.data;return console.log("[ChatService] createChannel rawChat:",i),rl(i)},updateChat:async(s,n,i)=>{const r=n==="group"?"/groups":"/channels";console.log("[ChatService] updateChat FormData contents:");for(const[d,f]of i.entries())console.log(`  ${d}:`,f instanceof File?`File(${f.name}, ${f.size} bytes)`:f);const l=await fe.put(r,i,{params:{chatId:s},headers:{"Content-Type":void 0}});return console.log("[ChatService] updateChat response:",l.data),l.data?.data||l.data},deleteChat:async(s,n)=>{const i=n==="group"?"/groups":"/channels",r=await fe.delete(i,{params:{chatId:s}});return r.data?.data||r.data},deleteConversation:async s=>{const n=await fe.delete("/conversations",{params:{conversationId:s}});return n.data?.data||n.data},joinChat:async(s,n)=>{const i=n==="group"?"/groups/join":"/channels/join",r=n==="group"?"groupId":"channelId",l=await fe.post(i,null,{params:{[r]:s}});return l.data?.data||l.data},leaveChat:async(s,n)=>{const i=n==="group"?"/groups/leave":"/channels/leave",r=await fe.post(i,null,{params:{chatId:s}});return r.data?.data||r.data},searchChats:async s=>{const n=await fe.post("/chats/search",{pageNumber:1,pageSize:10,searchTerm:s});console.log("[ChatService] searchChats full response:",n);const i=n.data?.data;if(!Array.isArray(i))return console.warn("[ChatService] Search returned non-array data:",i),[];const r=i.map(l=>{const d=l.type||l.chatType,f=String(d).toLowerCase().trim();let m="channel";return f==="conversation"||f==="dm"||f==="directmessage"?m="dm":f==="group"?m="group":f==="channel"&&(m="channel"),{id:l.id||l.entityId,name:l.name||l.displayName||"Unknown",type:m,avatar:et(l.avatarUrl||l.avatar||l.profileImage),description:l.description||"",memberCount:l.memberCount||l.participantsCount||0}});return console.log("[ChatService] Normalized search results:",r),r},banUser:async(s,n)=>{const i=await fe.post(`/chats/ban/${n}`,null,{params:{chatId:s}});return i.data?.data||i.data},unbanUser:async(s,n)=>{const i=await fe.post(`/chats/unban/${n}`,null,{params:{chatId:s}});return i.data?.data||i.data},getBannedUsers:async s=>{const n=await fe.get(`/chats/${s}/banned-users`);return n.data?.data||n.data||[]},addMemberToGroup:async(s,n)=>{const i=await fe.post("/groups/add-member",null,{params:{chatId:s,addingUserId:n}});return i.data?.data||i.data},addMemberToChannel:async(s,n)=>{const i=await fe.post("/channels/add-member",null,{params:{chatId:s,addingUserId:n}});return i.data?.data||i.data},removeMemberFromGroup:async(s,n)=>{const i=await fe.post("/groups/remove-member",null,{params:{chatId:s,removingUserId:n}});return i.data?.data||i.data},removeMemberFromChannel:async(s,n)=>{const i=await fe.post("/channels/remove-member",null,{params:{chatId:s,removingUserId:n}});return i.data?.data||i.data},updateChatPrivacy:async(s,n)=>{const i=n==="public"?0:1,r=await fe.put("/chats/privacy-type",null,{params:{chatId:s,privacyType:i}});return r.data?.data||r.data},addUserPermission:async(s,n,i)=>{const r=await fe.post("/chats/add-user-permission",null,{params:{chatId:s,addingUserId:n,permissionName:i}});return r.data?.data||r.data},createOrGetDM:async(s,n)=>{try{if(console.log("[ChatService] createOrGetDM called with:",{recipientId:s,recipientIdType:typeof s,initialMessage:n,isRecipientIdValid:s&&s!=="undefined"}),!s||s==="undefined")throw new Error(`Invalid recipientId: ${s}`);const i=await Je.getAllChats();console.log("[ChatService] Fetched chats, looking for existing DM with recipient:",s);let r;for(const l of i)if(console.log("[ChatService] Checking chat:",{chatId:l.id,type:l.type,memberCount:l.members?.length||0}),l.type==="dm")if(l.members&&l.members.length>0){if(l.members.some(f=>{const m=f.userId===s||f.id===s||f.user?.id===s;return m&&console.log("[ChatService] Found matching member:",f),m})){r=l;break}}else{console.log("[ChatService] Members array empty for DM, fetching full details for chat:",l.id);try{const d=await Je.getChat(l.id);if(console.log("[ChatService] Full chat details:",{id:d.id,memberCount:d.members?.length||0,members:d.members?.map(f=>({userId:f.userId,id:f.id}))}),d.members&&d.members.length>0&&d.members.some(m=>{const p=m.userId===s||m.id===s||m.user?.id===s;return p&&console.log("[ChatService] Found matching member in full chat:",m),p})){r=d;break}}catch(d){console.error("[ChatService] Error fetching full chat details:",d)}}if(console.log("[ChatService] DM chat found:",r?.id||"NOT FOUND"),r&&n){console.log("[ChatService] Sending to existing DM with chatId:",r.id);const l=new FormData;return l.append("chatId",r.id),l.append("content",n),console.log("[ChatService] FormData entries:",{chatId:r.id,content:n}),await fe.post("/messages/",l,{headers:{"Content-Type":void 0}}),console.log("[ChatService] Message sent to existing DM:",r.id),r}if(!r&&n){console.log("[ChatService] Creating new DM conversation with user:",s);const l=new FormData;l.append("receiverId",s),l.append("content",n),console.log("[ChatService] FormData entries for new DM:",{receiverId:s,content:n});const d=await fe.post("/messages/",l,{headers:{"Content-Type":void 0}});console.log("[ChatService] Message sent to new DM, conversation auto-created. Response:",d);const m=(await Je.getAllChats()).find(p=>p.type==="dm"&&p.members?.some(y=>y.id===s||y.userId===s));return console.log("[ChatService] Newly created DM:",m?.id||"NOT FOUND"),m}return console.log("[ChatService] No action taken (no message to send)"),r}catch(i){throw console.error("[ChatService] Error in createOrGetDM:",i),i}}},WE=Object.freeze(Object.defineProperty({__proto__:null,chatService:Je},Symbol.toStringTag,{value:"Module"})),KE={"":"Like","":"Love","":"Laugh","":"Sad","":"Angry"},Li={sendMessage:async s=>{try{console.log("[MessageService] sendMessage called"),console.log("[MessageService] FormData entries:");for(const[i,r]of s.entries())r instanceof File?console.log(`  ${i}: File(${r.name}, ${r.size} bytes, ${r.type})`):console.log(`  ${i}: ${r}`);const n=await fe.post("/messages",s,{headers:{"Content-Type":void 0}});return console.log("[MessageService] Response:",n.data),n.data?.data||n.data}catch(n){throw console.error("[MessageService] Error sending message:",n),n}},editMessage:async(s,n)=>{const i=new FormData;i.append("Content",n);const r=await fe.put(`/messages/${s}`,i,{headers:{"Content-Type":void 0}});return r.data?.data||r.data},deleteMessage:async s=>{const n=await fe.delete(`/messages/${s}`);return n.data?.data||n.data},toggleReaction:async(s,n)=>{const i=await fe.post(`/messages/${s}/reactions/${n}`);return i.data?.data??i.data},toggleReactionByEmoji:async(s,n)=>{const i=KE[n];if(!i)throw new Error(`Unknown emoji: ${n}`);return Li.toggleReaction(s,i)},getReactions:async s=>{const n=await fe.get(`/messages/${s}/reactions`);return n.data?.data||n.data||[]},pinMessage:async s=>{const n=await fe.post(`/messages/${s}/pin`);return n.data?.data||n.data},unpinMessage:async s=>{const n=await fe.post(`/messages/${s}/unpin`);return n.data?.data||n.data},getPinnedMessages:async s=>{const n=await fe.get(`/messages/pinned/${s}`);return n.data?.data||n.data}},Cn=Sl((s,n)=>({chats:[],currentChat:null,messages:[],pinnedMessages:new Map,chatPermissions:new Map,isLoadingChats:!1,isLoadingMessages:!1,isLoadingPinned:!1,permissionsLoading:!1,error:null,typingUsers:new Map,onlineUsers:new Map,userLastSeen:new Map,blockedByUsers:new Set,usersYouBlocked:new Set,loadChats:async()=>{s({isLoadingChats:!0,error:null});try{const i=await Je.getAllChats();console.log("[ChatStore] Chats from API (already normalized):",i),console.log("[ChatStore] Sample chat participantsCount:",i[0]?.participantsCount,i[0]?.name),s({chats:i,isLoadingChats:!1})}catch(i){const r=Bt(i,"Failed to load chats");console.error("[ChatStore] Error loading chats:",i),s({error:r,isLoadingChats:!1})}},setCurrentChat:i=>{console.log("[ChatStore] setCurrentChat called with:",{chatId:i?.id,chatName:i?.name,participantsCount:i?.participantsCount,membersLength:i?.members?.length}),s({currentChat:i})},setMessages:i=>{s({messages:i})},loadMessages:async(i,r=1)=>{s({isLoadingMessages:!0,error:null});try{const{chatService:l}=await Zs(async()=>{const{chatService:m}=await Promise.resolve().then(()=>WE);return{chatService:m}},void 0),[d,f]=await Promise.all([l.getChat(i),l.getChatProfile(i)]);s(m=>({currentChat:m.currentChat?.id===i?{...m.currentChat,...f,messages:d.messages}:m.currentChat,messages:d.messages||[],isLoadingMessages:!1}))}catch(l){const d=Bt(l,"Failed to load messages");s({error:d,isLoadingMessages:!1})}},sendMessage:async(i,r,l,d,f)=>{s({error:null});try{const m=i&&i.startsWith("temp_dm_"),p=m?null:i,y=m?i.replace("temp_dm_",""):r;if(console.log("[ChatStore] sendMessage - isTempChat:",m,"actualChatId:",p,"actualReceiverId:",y),d){const b=new FormData;p&&b.append("chatId",p),y&&b.append("receiverId",y),l&&b.append("content",l),f&&b.append("replyId",f),b.append("file",d),await Li.sendMessage(b)}else await(await Zs(()=>Promise.resolve().then(()=>uv),void 0).then(v=>v.signalRService)).sendMessage(p,l,y||void 0,f||null)}catch(m){const p=Bt(m,"Failed to send message");s({error:p})}},editMessage:async(i,r)=>{s({error:null});try{await Li.editMessage(i,r),s(l=>({messages:l.messages.map(d=>d.messageId===i?{...d,content:r,isEdited:!0}:d)}))}catch(l){const d=Bt(l,"Failed to edit message");s({error:d})}},deleteMessage:async i=>{s({error:null});try{await Li.deleteMessage(i),s(r=>({messages:r.messages.filter(l=>l.messageId!==i)}))}catch(r){const l=Bt(r,"Failed to delete message");s({error:l})}},toggleReaction:async(i,r)=>{s({error:null});try{return await Li.toggleReactionByEmoji(i,r)}catch(l){const d=Bt(l,"Failed to toggle reaction");return s({error:d}),!1}},clearError:()=>s({error:null}),loadPinnedMessages:async i=>{s({isLoadingPinned:!0});try{const r=await Li.getPinnedMessages(i);s(l=>{const d=new Map(l.pinnedMessages);return d.set(i,r||[]),{pinnedMessages:d,isLoadingPinned:!1}})}catch(r){console.error("[ChatStore] Error loading pinned messages:",r),s({isLoadingPinned:!1})}},pinMessage:async i=>{try{await Li.pinMessage(i)}catch(r){const l=Bt(r,"Failed to pin message");throw s({error:l}),r}},unpinMessage:async i=>{try{await Li.unpinMessage(i)}catch(r){const l=Bt(r,"Failed to unpin message");throw s({error:l}),r}},getPinnedMessages:i=>n().pinnedMessages.get(i)||[],loadPermissions:async i=>{const{user:r}=tt.getState();if(console.log("[loadPermissions] Called with:",{chatId:i,userId:r?.id,username:r?.username}),!r||!i){console.log("[loadPermissions] Early return - no user or chatId");return}s({permissionsLoading:!0});try{const{permissionService:l}=await Zs(async()=>{const{permissionService:p}=await import("./permission.service-9Ilapnf8.js");return{permissionService:p}},__vite__mapDeps([0,1,2]));console.log("[loadPermissions] Calling API: GET /permissions/",i,"/user/",r.id);const d=await l.getUserPermissions(i,r.id);console.log("[loadPermissions] API response:",d);const f=d?.permissions||d||[],m=Array.isArray(f)?f.map(p=>p.permissionName||p.name||p):[];console.log("[ChatStore] Loaded permissions for chat",i,":",m),s(p=>({chatPermissions:new Map(p.chatPermissions).set(i,m),permissionsLoading:!1}))}catch(l){console.error("[ChatStore] Failed to load permissions:",l),s(d=>({chatPermissions:new Map(d.chatPermissions).set(i,[]),permissionsLoading:!1}))}},hasPermission:(i,r)=>{const{currentChat:l,chatPermissions:d}=n(),{user:f}=tt.getState();if(console.log("[hasPermission] Checking permission:",{chatId:i,permission:r,currentChatId:l?.id,currentChatType:l?.type,userId:f?.id,createdById:l?.createdById,membersCount:l?.members?.length}),l?.type==="dm")return["SendMessage","PinMessages"].includes(r)?(console.log("[hasPermission] DM chat - allowing:",r),!0):!1;if(l&&f&&l.createdById===f.id)return console.log("[hasPermission] User is chat creator - granting all permissions"),!0;if(l&&f&&l.members){const y=l.members.find(v=>v.userId===f.id);console.log("[hasPermission] Current member:",{found:!!y,memberId:y?.userId,role:y?.role});const b=y?.role?.toLowerCase();if(b==="admin"||b==="owner")return console.log("[hasPermission] User has admin/owner role - granting all permissions"),!0}const m=d.get(i)||[],p=m.includes(r);return console.log("[hasPermission] Checking cached permissions:",{cachedPermissions:m,hasPermission:p}),p},clearPermissions:i=>{s(i?r=>{const l=new Map(r.chatPermissions);return l.delete(i),{chatPermissions:l}}:{chatPermissions:new Map})},grantPermission:(i,r)=>{console.log("[ChatStore] Granting permission:",{chatId:i,permissionName:r}),s(l=>{const d=new Map(l.chatPermissions),f=d.get(i)||[];return f.includes(r)||d.set(i,[...f,r]),{chatPermissions:d}})},revokePermission:(i,r)=>{console.log("[ChatStore] Revoking permission:",{chatId:i,permissionName:r}),s(l=>{const d=new Map(l.chatPermissions),f=d.get(i)||[];return d.set(i,f.filter(m=>m!==r)),{chatPermissions:d}})},isUserOnline:i=>n().onlineUsers.get(i)||!1,getUserLastSeen:i=>n().userLastSeen.get(i),getOnlineMembersCount:i=>{const r=n().chats.find(f=>f.id===i);if(!r||!r.members)return 0;let l=0;const d=n().onlineUsers;for(const f of r.members)d.get(f.userId)&&l++;return l},setInitialPresenceStates:i=>{console.log("[ChatStore] Setting initial presence states for",Object.keys(i).length,"users"),console.log("[ChatStore] Raw presence states:",i);const r=new Map,l=new Map;Object.entries(i).forEach(([d,f])=>{console.log(`[ChatStore] Processing user ${d}, state:`,f,"type:",typeof f),typeof f=="boolean"?(r.set(d,f),console.log(`[ChatStore] Set user ${d} to ${f?"online":"offline"}`)):(r.set(d,f.isOnline),f.lastSeen&&l.set(d,f.lastSeen),console.log(`[ChatStore] Set user ${d} to ${f.isOnline?"online":"offline"}, lastSeen: ${f.lastSeen||"none"}`))}),s({onlineUsers:r,userLastSeen:l}),console.log("[ChatStore] Presence states initialized:",{online:Array.from(r.entries()).filter(([d,f])=>f).length,total:r.size,onlineUserIds:Array.from(r.entries()).filter(([d,f])=>f).map(([d])=>d)})},handleReceiveMessage:i=>{console.log("[ChatStore] Received message:",i);const r=tt.getState().user?.id;s(l=>{if(l.currentChat&&i.chatId===l.currentChat.id&&!l.messages.some(f=>f.messageId===i.messageId)){const f={messageId:i.messageId,chatId:i.chatId,senderId:i.senderId,senderUsername:i.senderUsername||"Unknown",senderAvatarUrl:i.senderAvatarUrl,content:i.content,fileUrl:i.fileUrl,replyId:i.replyId,sentAt:i.sentAt,isSeen:i.isSeen??!1,seenAt:i.seenAt,isNotificated:!1,notificationId:"",messageReactions:[],isCurrentUser:i.senderId===r};return console.log("[ChatStore] Added new message to state, isCurrentUser:",f.isCurrentUser),{messages:[...l.messages,f]}}return{}}),s(l=>({chats:l.chats.map(d=>d.id===i.chatId?{...d,lastMessage:{id:i.messageId,chatId:i.chatId,senderId:i.senderId,sender:{id:i.senderId,username:i.senderUsername||"Unknown"},content:i.content||"",fileUrl:i.fileUrl,reactions:[],edited:!1,createdAt:i.sentAt||new Date().toISOString()},updatedAt:i.sentAt||new Date().toISOString()}:d).sort((d,f)=>new Date(f.updatedAt||0).getTime()-new Date(d.updatedAt||0).getTime())}))},handleMessageEdited:i=>{console.log("[ChatStore] Message edited:",i),s(r=>({messages:r.messages.map(l=>l.messageId===i.messageId?{...l,content:i.content}:l)}))},handleMessageDeleted:i=>{console.log("[ChatStore] Message deleted:",i),s(r=>({messages:r.messages.filter(l=>l.messageId!==i.messageId)}))},handleReactionAdded:i=>{console.log("[ChatStore] Reaction added event received:",i);const r=n();console.log("[ChatStore] Current messages count:",r.messages.length),console.log("[ChatStore] Looking for messageId:",i.messageId);const l=r.messages.find(d=>d.messageId===i.messageId);if(console.log("[ChatStore] Found message:",l?"YES":"NO"),l){let d=i.userName||"";if(!d&&i.userId){const f=tt.getState().user;f&&f.id===i.userId&&(d=f.username||"You")}s(f=>({messages:f.messages.map(m=>m.messageId===i.messageId?{...m,messageReactions:[...m.messageReactions||[],{reactionType:i.reactionType,userId:i.userId,userName:d}]}:m)})),console.log("[ChatStore] Reaction added to message with userName:",d)}},handleReactionRemoved:i=>{console.log("[ChatStore] Reaction removed:",i),s(r=>({messages:r.messages.map(l=>l.messageId===i.messageId?{...l,messageReactions:(l.messageReactions||[]).filter(d=>!(d.userId===i.userId&&d.reactionType===i.reactionType))}:l)}))},handleUserOnline:i=>{console.log("[ChatStore] User online:",i),s(r=>{const l=new Map(r.onlineUsers);l.set(i.userId,!0);const d=new Map(r.userLastSeen);return d.delete(i.userId),{onlineUsers:l,userLastSeen:d,chats:r.chats.map(f=>f.members?.some(p=>p.userId===i.userId)?{...f,isOnline:f.type==="dm"?!0:f.isOnline,members:f.members?.map(p=>p.userId===i.userId?{...p,user:{...p.user,onlineStatus:"online",lastSeen:""}}:p)}:f)}})},handleUserOffline:i=>{console.log("[ChatStore] User offline:",i),s(r=>{const l=new Map(r.onlineUsers);l.set(i.userId,!1);const d=new Map(r.userLastSeen);return i.lastSeen&&d.set(i.userId,i.lastSeen),{onlineUsers:l,userLastSeen:d,chats:r.chats.map(f=>f.members?.some(p=>p.userId===i.userId)?{...f,isOnline:f.type==="dm"?!1:f.isOnline,members:f.members?.map(p=>p.userId===i.userId?{...p,user:{...p.user,onlineStatus:"offline",lastSeen:i.lastSeen}}:p)}:f)}})},handleUserTyping:i=>{console.log("[ChatStore] User typing:",i),s(r=>{const l=new Map(r.typingUsers);return l.set(`${i.chatId}-${i.userId}`,{userId:i.userId,timestamp:Date.now()}),{typingUsers:l}}),setTimeout(()=>{s(r=>{const l=new Map(r.typingUsers);return l.delete(`${i.chatId}-${i.userId}`),{typingUsers:l}})},3e3)},handleUserStoppedTyping:i=>{console.log("[ChatStore] User stopped typing:",i),s(r=>{const l=new Map(r.typingUsers);return l.delete(`${i.chatId}-${i.userId}`),{typingUsers:l}})},handleMessagePinned:i=>{console.log("[ChatStore] Message pinned:",i),s(r=>({messages:r.messages.map(l=>l.messageId===i.messageId?{...l,isPinned:!0,pinnedAt:i.pinnedAt,pinnedById:i.pinnedById,pinnedByUsername:i.pinnedByUsername}:l)})),n().loadPinnedMessages(i.chatId)},handleMessageUnpinned:i=>{console.log("[ChatStore] Message unpinned:",i),s(r=>({messages:r.messages.map(l=>l.messageId===i.messageId?{...l,isPinned:!1,pinnedAt:void 0,pinnedById:void 0,pinnedByUsername:void 0}:l)})),s(r=>{const l=new Map(r.pinnedMessages),d=l.get(i.chatId)||[];return l.set(i.chatId,d.filter(f=>f.messageId!==i.messageId)),{pinnedMessages:l}})},handleAddedToChat:i=>{console.log("[ChatStore] Added to chat:",i),n().loadChats()},handleNewConversation:i=>{console.log("[ChatStore] New conversation:",i),n().loadChats()},handleConversationCreated:async i=>{console.log("[ChatStore] Conversation created (sender notification):",i);const l=n().currentChat;if(l&&l.id.startsWith("temp_dm_")&&l.id.includes(i.receiverId)){console.log("[ChatStore] Switching from temp chat to real conversation:",i.conversationId),await n().loadChats();const f=n().chats.find(m=>m.id===i.conversationId);if(f){console.log("[ChatStore] Found new conversation, switching to it:",f.id),s({currentChat:f});try{await(await Zs(()=>Promise.resolve().then(()=>uv),void 0).then(p=>p.signalRService)).joinChat(f.id)}catch(m){console.error("[ChatStore] Failed to join new chat:",m)}}}else n().loadChats()},handlePermissionGranted:i=>{console.log("[ChatStore] Permission granted:",i);const{user:r}=tt.getState();r&&i.userId===r.id&&s(l=>{const d=new Map(l.chatPermissions),f=d.get(i.chatId)||[];return f.includes(i.permissionName)||d.set(i.chatId,[...f,i.permissionName]),{chatPermissions:d}})},handlePermissionRevoked:i=>{console.log("[ChatStore] Permission revoked:",i);const{user:r}=tt.getState();r&&i.userId===r.id&&s(l=>{const d=new Map(l.chatPermissions),f=d.get(i.chatId)||[];return d.set(i.chatId,f.filter(m=>m!==i.permissionName)),{chatPermissions:d}})},handleAllPermissionsRevoked:i=>{console.log("[ChatStore] All permissions revoked:",i);const{user:r}=tt.getState();r&&i.userId===r.id&&s(l=>{const d=new Map(l.chatPermissions);return d.set(i.chatId,[]),{chatPermissions:d}})},handleUserBlockedYou:i=>{console.log("[ChatStore] User blocked you:",i),s(r=>{const l=new Set(r.blockedByUsers);return l.add(i.blockerId),{blockedByUsers:l}})},handleYouBlockedUser:i=>{console.log("[ChatStore] You blocked user:",i),i.blockedUserId&&s(r=>{const l=new Set(r.usersYouBlocked);return l.add(i.blockedUserId),{usersYouBlocked:l}})},handleUserUnblockedYou:i=>{console.log("[ChatStore] User unblocked you:",i),s(r=>{const l=new Set(r.blockedByUsers);return l.delete(i.unblockerId),{blockedByUsers:l}})},handleYouUnblockedUser:i=>{console.log("[ChatStore] You unblocked user:",i),i.unblockedUserId&&s(r=>{const l=new Set(r.usersYouBlocked);return l.delete(i.unblockedUserId),{usersYouBlocked:l}})},handleChatDeleted:i=>{console.log("[ChatStore] Chat deleted:",i);const r=n();s({chats:r.chats.filter(l=>l.id!==i.chatId),currentChat:r.currentChat?.id===i.chatId?null:r.currentChat,messages:r.currentChat?.id===i.chatId?[]:r.messages}),s(l=>{const d=new Map(l.chatPermissions);return d.delete(i.chatId),{chatPermissions:d}})},handleRemovedFromChat:i=>{console.log("[ChatStore] Removed from chat:",i);const r=n();s({chats:r.chats.filter(l=>l.id!==i.chatId),currentChat:r.currentChat?.id===i.chatId?null:r.currentChat,messages:r.currentChat?.id===i.chatId?[]:r.messages}),s(l=>{const d=new Map(l.chatPermissions);return d.delete(i.chatId),{chatPermissions:d}})},handleMessagesMarkedSeen:i=>{console.log("[ChatStore] Messages marked as seen:",i);const r=n();r.currentChat&&i.chatId===r.currentChat.id&&s({messages:r.messages.map(d=>i.messageIds.includes(d.messageId)?{...d,isSeen:!0,seenAt:i.seenAt}:d)});const l=tt.getState().user?.id;l&&i.seenByUserId===l&&s(d=>({chats:d.chats.map(f=>f.id===i.chatId?{...f,unreadCount:Math.max(0,(f.unreadCount||0)-i.messageIds.length)}:f),currentChat:d.currentChat?.id===i.chatId?{...d.currentChat,unreadCount:Math.max(0,(d.currentChat.unreadCount||0)-i.messageIds.length)}:d.currentChat}))},resetUnreadCount:i=>{console.log("[ChatStore] Resetting unread count for chat:",i),s(r=>({chats:r.chats.map(l=>l.id===i?{...l,unreadCount:0}:l),currentChat:r.currentChat?.id===i?{...r.currentChat,unreadCount:0}:r.currentChat}))},isBlockedBy:i=>n().blockedByUsers.has(i),hasBlocked:i=>n().usersYouBlocked.has(i),addBlockedUser:i=>{console.log("[ChatStore] Adding blocked user:",i),s(r=>{const l=new Set(r.usersYouBlocked);return l.add(i),{usersYouBlocked:l}})},removeBlockedUser:i=>{console.log("[ChatStore] Removing blocked user:",i),s(r=>{const l=new Set(r.usersYouBlocked);return l.delete(i),{usersYouBlocked:l}})}})),QE=()=>{const s=localStorage.getItem("simpchat-theme");return s==="dark"||s==="light"?s:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},bh=s=>{s==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("simpchat-theme",s)},ZE=Sl(s=>{const n=QE();return bh(n),{theme:n,toggleTheme:()=>{s(i=>{const r=i.theme==="light"?"dark":"light";return bh(r),{theme:r}})},setTheme:i=>{bh(i),s({theme:i})}}}),JE=()=>localStorage.getItem("simpchat-fancy-animations")!=="false",eM=Sl(s=>({fancyAnimations:JE(),toggleFancyAnimations:()=>{s(n=>{const i=!n.fancyAnimations;return localStorage.setItem("simpchat-fancy-animations",String(i)),{fancyAnimations:i}})},setFancyAnimations:n=>{localStorage.setItem("simpchat-fancy-animations",String(n)),s({fancyAnimations:n})}})),Wt={getCurrentUser:async()=>{const s=await fe.get("/users/me"),n=s.data?.data||s.data;return tm(n)},updateProfile:async s=>{console.log("[UserService] updateProfile called"),console.log("[UserService] FormData contents:");for(const[i,r]of s.entries())console.log(`  ${i}:`,r instanceof File?`File(${r.name}, ${r.size} bytes)`:r);const n=await fe.put("/users/me",s);return console.log("[UserService] updateProfile response:",n),Wt.getCurrentUser()},searchUsers:async s=>{const n=await fe.get(`/users/search/${encodeURIComponent(s)}`),i=n.data?.data||n.data;return iv(i)},getUserProfile:async s=>{const n=await fe.get(`/users/${s}`);console.log("[UserService] getUserProfile raw response:",n.data);const i=n.data?.data||n.data;return console.log("[UserService] getUserProfile rawUser:",i),console.log("[UserService] getUserProfile description:",i?.description,i?.Description),tm(i)},updateLastSeen:async()=>{const s=await fe.put("/users/last-seen");return s.data?.data||s.data},getAllUsers:async()=>{const s=await fe.get("/users"),n=s.data?.data||s.data;return iv(n)},deleteUser:async s=>{const n=await fe.delete(`/users/${s}`);return n.data?.data||n.data},blockUser:async s=>{const n=await fe.post(`/users/blocks/${s}`);return n.data?.data||n.data},unblockUser:async s=>{const n=await fe.delete(`/users/blocks/${s}`);return n.data?.data||n.data},getBlockedUsers:async()=>{const s=await fe.get("/users/blocks");return s.data?.data||s.data||[]},getBlockStatus:async s=>(await fe.get(`/users/blocks/${s}/status`)).data?.isBlocked||!1,getMutualBlockStatus:async s=>{const n=await fe.get(`/users/blocks/${s}/mutual-status`);return{iBlockedThem:n.data?.iBlockedThem||!1,theyBlockedMe:n.data?.theyBlockedMe||!1}}},vh=Object.freeze(Object.defineProperty({__proto__:null,userService:Wt},Symbol.toStringTag,{value:"Module"}));class ka extends Error{constructor(n,i){const r=new.target.prototype;super(`${n}: Status code '${i}'`),this.statusCode=i,this.__proto__=r}}class Ym extends Error{constructor(n="A timeout occurred."){const i=new.target.prototype;super(n),this.__proto__=i}}class ss extends Error{constructor(n="An abort occurred."){const i=new.target.prototype;super(n),this.__proto__=i}}class tM extends Error{constructor(n,i){const r=new.target.prototype;super(n),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=r}}class nM extends Error{constructor(n,i){const r=new.target.prototype;super(n),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=r}}class sM extends Error{constructor(n,i){const r=new.target.prototype;super(n),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=r}}class av extends Error{constructor(n){const i=new.target.prototype;super(n),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}}class iM extends Error{constructor(n,i){const r=new.target.prototype;super(n),this.innerErrors=i,this.__proto__=r}}class E1{constructor(n,i,r){this.statusCode=n,this.statusText=i,this.content=r}}class Nu{get(n,i){return this.send({...i,method:"GET",url:n})}post(n,i){return this.send({...i,method:"POST",url:n})}delete(n,i){return this.send({...i,method:"DELETE",url:n})}getCookieString(n){return""}}var q;(function(s){s[s.Trace=0]="Trace",s[s.Debug=1]="Debug",s[s.Information=2]="Information",s[s.Warning=3]="Warning",s[s.Error=4]="Error",s[s.Critical=5]="Critical",s[s.None=6]="None"})(q||(q={}));class vl{constructor(){}log(n,i){}}vl.instance=new vl;const aM="10.0.0";class Mt{static isRequired(n,i){if(n==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(n,i){if(!n||n.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(n,i,r){if(!(n in i))throw new Error(`Unknown ${r} value: ${n}.`)}}class ct{static get isBrowser(){return!ct.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!ct.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!ct.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function xl(s,n){let i="";return Ba(s)?(i=`Binary data of length ${s.byteLength}`,n&&(i+=`. Content: '${rM(s)}'`)):typeof s=="string"&&(i=`String data of length ${s.length}`,n&&(i+=`. Content: '${s}'`)),i}function rM(s){const n=new Uint8Array(s);let i="";return n.forEach(r=>{const l=r<16?"0":"";i+=`0x${l}${r.toString(16)} `}),i.substring(0,i.length-1)}function Ba(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}async function M1(s,n,i,r,l,d){const f={},[m,p]=Vr();f[m]=p,s.log(q.Trace,`(${n} transport) sending data. ${xl(l,d.logMessageContent)}.`);const y=Ba(l)?"arraybuffer":"text",b=await i.post(r,{content:l,headers:{...f,...d.headers},responseType:y,timeout:d.timeout,withCredentials:d.withCredentials});s.log(q.Trace,`(${n} transport) request complete. Response status: ${b.statusCode}.`)}function oM(s){return s===void 0?new wu(q.Information):s===null?vl.instance:s.log!==void 0?s:new wu(s)}class lM{constructor(n,i){this._subject=n,this._observer=i}dispose(){const n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}}class wu{constructor(n){this._minLevel=n,this.out=console}log(n,i){if(n>=this._minLevel){const r=`[${new Date().toISOString()}] ${q[n]}: ${i}`;switch(n){case q.Critical:case q.Error:this.out.error(r);break;case q.Warning:this.out.warn(r);break;case q.Information:this.out.info(r);break;default:this.out.log(r);break}}}}function Vr(){let s="X-SignalR-User-Agent";return ct.isNode&&(s="User-Agent"),[s,cM(aM,uM(),fM(),dM())]}function cM(s,n,i,r){let l="Microsoft SignalR/";const d=s.split(".");return l+=`${d[0]}.${d[1]}`,l+=` (${s}; `,n&&n!==""?l+=`${n}; `:l+="Unknown OS; ",l+=`${i}`,r?l+=`; ${r}`:l+="; Unknown Runtime Version",l+=")",l}function uM(){if(ct.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function dM(){if(ct.isNode)return process.versions.node}function fM(){return ct.isNode?"NodeJS":"Browser"}function xh(s){return s.stack?s.stack:s.message?s.message:`${s}`}function hM(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class mM extends Nu{constructor(n){if(super(),this._logger=n,typeof fetch>"u"||ct.isNode){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(i("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=i("node-fetch"):this._fetchType=fetch,this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(hM());if(typeof AbortController>"u"){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}async send(n){if(n.abortSignal&&n.abortSignal.aborted)throw new ss;if(!n.method)throw new Error("No method defined.");if(!n.url)throw new Error("No url defined.");const i=new this._abortControllerType;let r;n.abortSignal&&(n.abortSignal.onabort=()=>{i.abort(),r=new ss});let l=null;if(n.timeout){const p=n.timeout;l=setTimeout(()=>{i.abort(),this._logger.log(q.Warning,"Timeout from HTTP request."),r=new Ym},p)}n.content===""&&(n.content=void 0),n.content&&(n.headers=n.headers||{},Ba(n.content)?n.headers["Content-Type"]="application/octet-stream":n.headers["Content-Type"]="text/plain;charset=UTF-8");let d;try{d=await this._fetchType(n.url,{body:n.content,cache:"no-cache",credentials:n.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...n.headers},method:n.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(p){throw r||(this._logger.log(q.Warning,`Error from HTTP request. ${p}.`),p)}finally{l&&clearTimeout(l),n.abortSignal&&(n.abortSignal.onabort=null)}if(!d.ok){const p=await rv(d,"text");throw new ka(p||d.statusText,d.status)}const m=await rv(d,n.responseType);return new E1(d.status,d.statusText,m)}getCookieString(n){let i="";return ct.isNode&&this._jar&&this._jar.getCookies(n,(r,l)=>i=l.join("; ")),i}}function rv(s,n){let i;switch(n){case"arraybuffer":i=s.arrayBuffer();break;case"text":i=s.text();break;case"blob":case"document":case"json":throw new Error(`${n} is not supported.`);default:i=s.text();break}return i}class pM extends Nu{constructor(n){super(),this._logger=n}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new ss):n.method?n.url?new Promise((i,r)=>{const l=new XMLHttpRequest;l.open(n.method,n.url,!0),l.withCredentials=n.withCredentials===void 0?!0:n.withCredentials,l.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.content===""&&(n.content=void 0),n.content&&(Ba(n.content)?l.setRequestHeader("Content-Type","application/octet-stream"):l.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const d=n.headers;d&&Object.keys(d).forEach(f=>{l.setRequestHeader(f,d[f])}),n.responseType&&(l.responseType=n.responseType),n.abortSignal&&(n.abortSignal.onabort=()=>{l.abort(),r(new ss)}),n.timeout&&(l.timeout=n.timeout),l.onload=()=>{n.abortSignal&&(n.abortSignal.onabort=null),l.status>=200&&l.status<300?i(new E1(l.status,l.statusText,l.response||l.responseText)):r(new ka(l.response||l.responseText||l.statusText,l.status))},l.onerror=()=>{this._logger.log(q.Warning,`Error from HTTP request. ${l.status}: ${l.statusText}.`),r(new ka(l.statusText,l.status))},l.ontimeout=()=>{this._logger.log(q.Warning,"Timeout from HTTP request."),r(new Ym)},l.send(n.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class gM extends Nu{constructor(n){if(super(),typeof fetch<"u"||ct.isNode)this._httpClient=new mM(n);else if(typeof XMLHttpRequest<"u")this._httpClient=new pM(n);else throw new Error("No usable HttpClient found.")}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new ss):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(n){return this._httpClient.getCookieString(n)}}class jn{static write(n){return`${n}${jn.RecordSeparator}`}static parse(n){if(n[n.length-1]!==jn.RecordSeparator)throw new Error("Message is incomplete.");const i=n.split(jn.RecordSeparator);return i.pop(),i}}jn.RecordSeparatorCode=30;jn.RecordSeparator=String.fromCharCode(jn.RecordSeparatorCode);class yM{writeHandshakeRequest(n){return jn.write(JSON.stringify(n))}parseHandshakeResponse(n){let i,r;if(Ba(n)){const m=new Uint8Array(n),p=m.indexOf(jn.RecordSeparatorCode);if(p===-1)throw new Error("Message is incomplete.");const y=p+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(m.slice(0,y))),r=m.byteLength>y?m.slice(y).buffer:null}else{const m=n,p=m.indexOf(jn.RecordSeparator);if(p===-1)throw new Error("Message is incomplete.");const y=p+1;i=m.substring(0,y),r=m.length>y?m.substring(y):null}const l=jn.parse(i),d=JSON.parse(l[0]);if(d.type)throw new Error("Expected a handshake response from the server.");return[r,d]}}var be;(function(s){s[s.Invocation=1]="Invocation",s[s.StreamItem=2]="StreamItem",s[s.Completion=3]="Completion",s[s.StreamInvocation=4]="StreamInvocation",s[s.CancelInvocation=5]="CancelInvocation",s[s.Ping=6]="Ping",s[s.Close=7]="Close",s[s.Ack=8]="Ack",s[s.Sequence=9]="Sequence"})(be||(be={}));class bM{constructor(){this.observers=[]}next(n){for(const i of this.observers)i.next(n)}error(n){for(const i of this.observers)i.error&&i.error(n)}complete(){for(const n of this.observers)n.complete&&n.complete()}subscribe(n){return this.observers.push(n),new lM(this,n)}}class vM{constructor(n,i,r){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=n,this._connection=i,this._bufferSize=r}async _send(n){const i=this._protocol.writeMessage(n);let r=Promise.resolve();if(this._isInvocationMessage(n)){this._totalMessageCount++;let l=()=>{},d=()=>{};Ba(i)?this._bufferedByteCount+=i.byteLength:this._bufferedByteCount+=i.length,this._bufferedByteCount>=this._bufferSize&&(r=new Promise((f,m)=>{l=f,d=m})),this._messages.push(new xM(i,this._totalMessageCount,l,d))}try{this._reconnectInProgress||await this._connection.send(i)}catch{this._disconnected()}await r}_ack(n){let i=-1;for(let r=0;r<this._messages.length;r++){const l=this._messages[r];if(l._id<=n.sequenceId)i=r,Ba(l._message)?this._bufferedByteCount-=l._message.byteLength:this._bufferedByteCount-=l._message.length,l._resolver();else if(this._bufferedByteCount<this._bufferSize)l._resolver();else break}i!==-1&&(this._messages=this._messages.slice(i+1))}_shouldProcessMessage(n){if(this._waitForSequenceMessage)return n.type!==be.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(n))return!0;const i=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,i<=this._latestReceivedSequenceId?(i===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=i,this._ackTimer(),!0)}_resetSequence(n){if(n.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=n.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const n=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:be.Sequence,sequenceId:n}));const i=this._messages;for(const r of i)await this._connection.send(r._message);this._reconnectInProgress=!1}_dispose(n){n??(n=new Error("Unable to reconnect to server."));for(const i of this._messages)i._rejector(n)}_isInvocationMessage(n){switch(n.type){case be.Invocation:case be.StreamItem:case be.Completion:case be.StreamInvocation:case be.CancelInvocation:return!0;case be.Close:case be.Sequence:case be.Ping:case be.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:be.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class xM{constructor(n,i,r,l){this._message=n,this._id=i,this._resolver=r,this._rejector=l}}const SM=30*1e3,wM=15*1e3,_M=1e5;var Ge;(function(s){s.Disconnected="Disconnected",s.Connecting="Connecting",s.Connected="Connected",s.Disconnecting="Disconnecting",s.Reconnecting="Reconnecting"})(Ge||(Ge={}));class Xm{static create(n,i,r,l,d,f,m){return new Xm(n,i,r,l,d,f,m)}constructor(n,i,r,l,d,f,m){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(q.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Mt.isRequired(n,"connection"),Mt.isRequired(i,"logger"),Mt.isRequired(r,"protocol"),this.serverTimeoutInMilliseconds=d??SM,this.keepAliveIntervalInMilliseconds=f??wM,this._statefulReconnectBufferSize=m??_M,this._logger=i,this._protocol=r,this.connection=n,this._reconnectPolicy=l,this._handshakeProtocol=new yM,this.connection.onreceive=p=>this._processIncomingData(p),this.connection.onclose=p=>this._connectionClosed(p),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Ge.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:be.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(n){if(this._connectionState!==Ge.Disconnected&&this._connectionState!==Ge.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Ge.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Ge.Connecting,this._logger.log(q.Debug,"Starting HubConnection.");try{await this._startInternal(),ct.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Ge.Connected,this._connectionStarted=!0,this._logger.log(q.Debug,"HubConnection connected successfully.")}catch(n){return this._connectionState=Ge.Disconnected,this._logger.log(q.Debug,`HubConnection failed to start successfully because of error '${n}'.`),Promise.reject(n)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const n=new Promise((i,r)=>{this._handshakeResolver=i,this._handshakeRejecter=r});await this.connection.start(this._protocol.transferFormat);try{let i=this._protocol.version;this.connection.features.reconnect||(i=1);const r={protocol:this._protocol.name,version:i};if(this._logger.log(q.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(r)),this._logger.log(q.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await n,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new vM(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(i){throw this._logger.log(q.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(i),i}}async stop(){const n=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await n}catch{}}_stopInternal(n){if(this._connectionState===Ge.Disconnected)return this._logger.log(q.Debug,`Call to HubConnection.stop(${n}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===Ge.Disconnecting)return this._logger.log(q.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const i=this._connectionState;return this._connectionState=Ge.Disconnecting,this._logger.log(q.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(q.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(i===Ge.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=n||new ss("The connection was stopped before the hub handshake could complete."),this.connection.stop(n))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(n,...i){const[r,l]=this._replaceStreamingParams(i),d=this._createStreamInvocation(n,i,l);let f;const m=new bM;return m.cancelCallback=()=>{const p=this._createCancelInvocation(d.invocationId);return delete this._callbacks[d.invocationId],f.then(()=>this._sendWithProtocol(p))},this._callbacks[d.invocationId]=(p,y)=>{if(y){m.error(y);return}else p&&(p.type===be.Completion?p.error?m.error(new Error(p.error)):m.complete():m.next(p.item))},f=this._sendWithProtocol(d).catch(p=>{m.error(p),delete this._callbacks[d.invocationId]}),this._launchStreams(r,f),m}_sendMessage(n){return this._resetKeepAliveInterval(),this.connection.send(n)}_sendWithProtocol(n){return this._messageBuffer?this._messageBuffer._send(n):this._sendMessage(this._protocol.writeMessage(n))}send(n,...i){const[r,l]=this._replaceStreamingParams(i),d=this._sendWithProtocol(this._createInvocation(n,i,!0,l));return this._launchStreams(r,d),d}invoke(n,...i){const[r,l]=this._replaceStreamingParams(i),d=this._createInvocation(n,i,!1,l);return new Promise((m,p)=>{this._callbacks[d.invocationId]=(b,v)=>{if(v){p(v);return}else b&&(b.type===be.Completion?b.error?p(new Error(b.error)):m(b.result):p(new Error(`Unexpected message type: ${b.type}`)))};const y=this._sendWithProtocol(d).catch(b=>{p(b),delete this._callbacks[d.invocationId]});this._launchStreams(r,y)})}on(n,i){!n||!i||(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),this._methods[n].indexOf(i)===-1&&this._methods[n].push(i))}off(n,i){if(!n)return;n=n.toLowerCase();const r=this._methods[n];if(r)if(i){const l=r.indexOf(i);l!==-1&&(r.splice(l,1),r.length===0&&delete this._methods[n])}else delete this._methods[n]}onclose(n){n&&this._closedCallbacks.push(n)}onreconnecting(n){n&&this._reconnectingCallbacks.push(n)}onreconnected(n){n&&this._reconnectedCallbacks.push(n)}_processIncomingData(n){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(n=this._processHandshakeResponse(n),this._receivedHandshakeResponse=!0),n){const i=this._protocol.parseMessages(n,this._logger);for(const r of i)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(r)))switch(r.type){case be.Invocation:this._invokeClientMethod(r).catch(l=>{this._logger.log(q.Error,`Invoke client method threw error: ${xh(l)}`)});break;case be.StreamItem:case be.Completion:{const l=this._callbacks[r.invocationId];if(l){r.type===be.Completion&&delete this._callbacks[r.invocationId];try{l(r)}catch(d){this._logger.log(q.Error,`Stream callback threw error: ${xh(d)}`)}}break}case be.Ping:break;case be.Close:{this._logger.log(q.Information,"Close message received from server.");const l=r.error?new Error("Server returned an error on close: "+r.error):void 0;r.allowReconnect===!0?this.connection.stop(l):this._stopPromise=this._stopInternal(l);break}case be.Ack:this._messageBuffer&&this._messageBuffer._ack(r);break;case be.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(r);break;default:this._logger.log(q.Warning,`Invalid message type: ${r.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(n){let i,r;try{[r,i]=this._handshakeProtocol.parseHandshakeResponse(n)}catch(l){const d="Error parsing handshake response: "+l;this._logger.log(q.Error,d);const f=new Error(d);throw this._handshakeRejecter(f),f}if(i.error){const l="Server returned handshake error: "+i.error;this._logger.log(q.Error,l);const d=new Error(l);throw this._handshakeRejecter(d),d}else this._logger.log(q.Debug,"Server handshake complete.");return this._handshakeResolver(),r}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!this.connection.features||!this.connection.features.inherentKeepAlive){this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds);let n=this._nextKeepAlive-new Date().getTime();if(n<0){this._connectionState===Ge.Connected&&this._trySendPingMessage();return}this._pingServerHandle===void 0&&(n<0&&(n=0),this._pingServerHandle=setTimeout(async()=>{this._connectionState===Ge.Connected&&await this._trySendPingMessage()},n))}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(n){const i=n.target.toLowerCase(),r=this._methods[i];if(!r){this._logger.log(q.Warning,`No client method with the name '${i}' found.`),n.invocationId&&(this._logger.log(q.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)));return}const l=r.slice(),d=!!n.invocationId;let f,m,p;for(const y of l)try{const b=f;f=await y.apply(this,n.arguments),d&&f&&b&&(this._logger.log(q.Error,`Multiple results provided for '${i}'. Sending error to server.`),p=this._createCompletionMessage(n.invocationId,"Client provided multiple results.",null)),m=void 0}catch(b){m=b,this._logger.log(q.Error,`A callback for the method '${i}' threw error '${b}'.`)}p?await this._sendWithProtocol(p):d?(m?p=this._createCompletionMessage(n.invocationId,`${m}`,null):f!==void 0?p=this._createCompletionMessage(n.invocationId,null,f):(this._logger.log(q.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),p=this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(p)):f&&this._logger.log(q.Error,`Result given for '${i}' method but server is not expecting a result.`)}_connectionClosed(n){this._logger.log(q.Debug,`HubConnection.connectionClosed(${n}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||n||new ss("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(n||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Ge.Disconnecting?this._completeClose(n):this._connectionState===Ge.Connected&&this._reconnectPolicy?this._reconnect(n):this._connectionState===Ge.Connected&&this._completeClose(n)}_completeClose(n){if(this._connectionStarted){this._connectionState=Ge.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(n??new Error("Connection closed.")),this._messageBuffer=void 0),ct.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[n]))}catch(i){this._logger.log(q.Error,`An onclose callback called with error '${n}' threw error '${i}'.`)}}}async _reconnect(n){const i=Date.now();let r=0,l=n!==void 0?n:new Error("Attempting to reconnect due to a unknown error."),d=this._getNextRetryDelay(r,0,l);if(d===null){this._logger.log(q.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(n);return}if(this._connectionState=Ge.Reconnecting,n?this._logger.log(q.Information,`Connection reconnecting because of error '${n}'.`):this._logger.log(q.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(f=>f.apply(this,[n]))}catch(f){this._logger.log(q.Error,`An onreconnecting callback called with error '${n}' threw error '${f}'.`)}if(this._connectionState!==Ge.Reconnecting){this._logger.log(q.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;d!==null;){if(this._logger.log(q.Information,`Reconnect attempt number ${r+1} will start in ${d} ms.`),await new Promise(f=>{this._reconnectDelayHandle=setTimeout(f,d)}),this._reconnectDelayHandle=void 0,this._connectionState!==Ge.Reconnecting){this._logger.log(q.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Ge.Connected,this._logger.log(q.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(f=>f.apply(this,[this.connection.connectionId]))}catch(f){this._logger.log(q.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${f}'.`)}return}catch(f){if(this._logger.log(q.Information,`Reconnect attempt failed because of error '${f}'.`),this._connectionState!==Ge.Reconnecting){this._logger.log(q.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===Ge.Disconnecting&&this._completeClose();return}r++,l=f instanceof Error?f:new Error(f.toString()),d=this._getNextRetryDelay(r,Date.now()-i,l)}}this._logger.log(q.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${r} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(n,i,r){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:n,retryReason:r})}catch(l){return this._logger.log(q.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${n}, ${i}) threw error '${l}'.`),null}}_cancelCallbacksWithError(n){const i=this._callbacks;this._callbacks={},Object.keys(i).forEach(r=>{const l=i[r];try{l(null,n)}catch(d){this._logger.log(q.Error,`Stream 'error' callback called with '${n}' threw error: ${xh(d)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(n,i,r,l){if(r)return l.length!==0?{target:n,arguments:i,streamIds:l,type:be.Invocation}:{target:n,arguments:i,type:be.Invocation};{const d=this._invocationId;return this._invocationId++,l.length!==0?{target:n,arguments:i,invocationId:d.toString(),streamIds:l,type:be.Invocation}:{target:n,arguments:i,invocationId:d.toString(),type:be.Invocation}}}_launchStreams(n,i){if(n.length!==0){i||(i=Promise.resolve());for(const r in n)n[r].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(r)))},error:l=>{let d;l instanceof Error?d=l.message:l&&l.toString?d=l.toString():d="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(r,d)))},next:l=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(r,l)))}})}}_replaceStreamingParams(n){const i=[],r=[];for(let l=0;l<n.length;l++){const d=n[l];if(this._isObservable(d)){const f=this._invocationId;this._invocationId++,i[f]=d,r.push(f.toString()),n.splice(l,1)}}return[i,r]}_isObservable(n){return n&&n.subscribe&&typeof n.subscribe=="function"}_createStreamInvocation(n,i,r){const l=this._invocationId;return this._invocationId++,r.length!==0?{target:n,arguments:i,invocationId:l.toString(),streamIds:r,type:be.StreamInvocation}:{target:n,arguments:i,invocationId:l.toString(),type:be.StreamInvocation}}_createCancelInvocation(n){return{invocationId:n,type:be.CancelInvocation}}_createStreamItemMessage(n,i){return{invocationId:n,item:i,type:be.StreamItem}}_createCompletionMessage(n,i,r){return i?{error:i,invocationId:n,type:be.Completion}:{invocationId:n,result:r,type:be.Completion}}_createCloseMessage(){return{type:be.Close}}async _trySendPingMessage(){try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}}const CM=[0,2e3,1e4,3e4,null];class ov{constructor(n){this._retryDelays=n!==void 0?[...n,null]:CM}nextRetryDelayInMilliseconds(n){return this._retryDelays[n.previousRetryCount]}}class Ra{}Ra.Authorization="Authorization";Ra.Cookie="Cookie";class jM extends Nu{constructor(n,i){super(),this._innerClient=n,this._accessTokenFactory=i}async send(n){let i=!0;this._accessTokenFactory&&(!this._accessToken||n.url&&n.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(n);const r=await this._innerClient.send(n);return i&&r.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(n),await this._innerClient.send(n)):r}_setAuthorizationHeader(n){n.headers||(n.headers={}),this._accessToken?n.headers[Ra.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&n.headers[Ra.Authorization]&&delete n.headers[Ra.Authorization]}getCookieString(n){return this._innerClient.getCookieString(n)}}var ht;(function(s){s[s.None=0]="None",s[s.WebSockets=1]="WebSockets",s[s.ServerSentEvents=2]="ServerSentEvents",s[s.LongPolling=4]="LongPolling"})(ht||(ht={}));var Jt;(function(s){s[s.Text=1]="Text",s[s.Binary=2]="Binary"})(Jt||(Jt={}));let TM=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class lv{get pollAborted(){return this._pollAbort.aborted}constructor(n,i,r){this._httpClient=n,this._logger=i,this._pollAbort=new TM,this._options=r,this._running=!1,this.onreceive=null,this.onclose=null}async connect(n,i){if(Mt.isRequired(n,"url"),Mt.isRequired(i,"transferFormat"),Mt.isIn(i,Jt,"transferFormat"),this._url=n,this._logger.log(q.Trace,"(LongPolling transport) Connecting."),i===Jt.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[r,l]=Vr(),d={[r]:l,...this._options.headers},f={abortSignal:this._pollAbort.signal,headers:d,timeout:1e5,withCredentials:this._options.withCredentials};i===Jt.Binary&&(f.responseType="arraybuffer");const m=`${n}&_=${Date.now()}`;this._logger.log(q.Trace,`(LongPolling transport) polling: ${m}.`);const p=await this._httpClient.get(m,f);p.statusCode!==200?(this._logger.log(q.Error,`(LongPolling transport) Unexpected response code: ${p.statusCode}.`),this._closeError=new ka(p.statusText||"",p.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,f)}async _poll(n,i){try{for(;this._running;)try{const r=`${n}&_=${Date.now()}`;this._logger.log(q.Trace,`(LongPolling transport) polling: ${r}.`);const l=await this._httpClient.get(r,i);l.statusCode===204?(this._logger.log(q.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):l.statusCode!==200?(this._logger.log(q.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new ka(l.statusText||"",l.statusCode),this._running=!1):l.content?(this._logger.log(q.Trace,`(LongPolling transport) data received. ${xl(l.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(l.content)):this._logger.log(q.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(r){this._running?r instanceof Ym?this._logger.log(q.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=r,this._running=!1):this._logger.log(q.Trace,`(LongPolling transport) Poll errored after shutdown: ${r.message}`)}}finally{this._logger.log(q.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(n){return this._running?M1(this._logger,"LongPolling",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(q.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(q.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const n={},[i,r]=Vr();n[i]=r;const l={headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let d;try{await this._httpClient.delete(this._url,l)}catch(f){d=f}d?d instanceof ka&&(d.statusCode===404?this._logger.log(q.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(q.Trace,`(LongPolling transport) Error sending a DELETE request: ${d}`)):this._logger.log(q.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(q.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let n="(LongPolling transport) Firing onclose event.";this._closeError&&(n+=" Error: "+this._closeError),this._logger.log(q.Trace,n),this.onclose(this._closeError)}}}class EM{constructor(n,i,r,l){this._httpClient=n,this._accessToken=i,this._logger=r,this._options=l,this.onreceive=null,this.onclose=null}async connect(n,i){return Mt.isRequired(n,"url"),Mt.isRequired(i,"transferFormat"),Mt.isIn(i,Jt,"transferFormat"),this._logger.log(q.Trace,"(SSE transport) Connecting."),this._url=n,this._accessToken&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((r,l)=>{let d=!1;if(i!==Jt.Text){l(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let f;if(ct.isBrowser||ct.isWebWorker)f=new this._options.EventSource(n,{withCredentials:this._options.withCredentials});else{const m=this._httpClient.getCookieString(n),p={};p.Cookie=m;const[y,b]=Vr();p[y]=b,f=new this._options.EventSource(n,{withCredentials:this._options.withCredentials,headers:{...p,...this._options.headers}})}try{f.onmessage=m=>{if(this.onreceive)try{this._logger.log(q.Trace,`(SSE transport) data received. ${xl(m.data,this._options.logMessageContent)}.`),this.onreceive(m.data)}catch(p){this._close(p);return}},f.onerror=m=>{d?this._close():l(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},f.onopen=()=>{this._logger.log(q.Information,`SSE connected to ${this._url}`),this._eventSource=f,d=!0,r()}}catch(m){l(m);return}})}async send(n){return this._eventSource?M1(this._logger,"SSE",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}class MM{constructor(n,i,r,l,d,f){this._logger=r,this._accessTokenFactory=i,this._logMessageContent=l,this._webSocketConstructor=d,this._httpClient=n,this.onreceive=null,this.onclose=null,this._headers=f}async connect(n,i){Mt.isRequired(n,"url"),Mt.isRequired(i,"transferFormat"),Mt.isIn(i,Jt,"transferFormat"),this._logger.log(q.Trace,"(WebSockets transport) Connecting.");let r;return this._accessTokenFactory&&(r=await this._accessTokenFactory()),new Promise((l,d)=>{n=n.replace(/^http/,"ws");let f;const m=this._httpClient.getCookieString(n);let p=!1;if(ct.isNode||ct.isReactNative){const y={},[b,v]=Vr();y[b]=v,r&&(y[Ra.Authorization]=`Bearer ${r}`),m&&(y[Ra.Cookie]=m),f=new this._webSocketConstructor(n,void 0,{headers:{...y,...this._headers}})}else r&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(r)}`);f||(f=new this._webSocketConstructor(n)),i===Jt.Binary&&(f.binaryType="arraybuffer"),f.onopen=y=>{this._logger.log(q.Information,`WebSocket connected to ${n}.`),this._webSocket=f,p=!0,l()},f.onerror=y=>{let b=null;typeof ErrorEvent<"u"&&y instanceof ErrorEvent?b=y.error:b="There was an error with the transport",this._logger.log(q.Information,`(WebSockets transport) ${b}.`)},f.onmessage=y=>{if(this._logger.log(q.Trace,`(WebSockets transport) data received. ${xl(y.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(y.data)}catch(b){this._close(b);return}},f.onclose=y=>{if(p)this._close(y);else{let b=null;typeof ErrorEvent<"u"&&y instanceof ErrorEvent?b=y.error:b="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",d(new Error(b))}}})}send(n){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(q.Trace,`(WebSockets transport) sending data. ${xl(n,this._logMessageContent)}.`),this._webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(n){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(q.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(n)&&(n.wasClean===!1||n.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${n.code} (${n.reason||"no reason given"}).`)):n instanceof Error?this.onclose(n):this.onclose())}_isCloseEvent(n){return n&&typeof n.wasClean=="boolean"&&typeof n.code=="number"}}const cv=100;class AM{constructor(n,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Mt.isRequired(n,"url"),this._logger=oM(i.logger),this.baseUrl=this._resolveUrl(n),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let r=null,l=null;if(ct.isNode&&typeof require<"u"){const d=typeof __webpack_require__=="function"?__non_webpack_require__:require;r=d("ws"),l=d("eventsource")}!ct.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:ct.isNode&&!i.WebSocket&&r&&(i.WebSocket=r),!ct.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:ct.isNode&&!i.EventSource&&typeof l<"u"&&(i.EventSource=l),this._httpClient=new jM(i.httpClient||new gM(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}async start(n){if(n=n||Jt.Binary,Mt.isIn(n,Jt,"transferFormat"),this._logger.log(q.Debug,`Starting connection with transfer format '${Jt[n]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(n),await this._startInternalPromise,this._connectionState==="Disconnecting"){const i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(q.Error,i),await this._stopPromise,Promise.reject(new ss(i))}else if(this._connectionState!=="Connected"){const i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(q.Error,i),Promise.reject(new ss(i))}this._connectionStarted=!0}send(n){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Wm(this.transport)),this._sendQueue.send(n))}async stop(n){if(this._connectionState==="Disconnected")return this._logger.log(q.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(q.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),await this._stopInternal(n),await this._stopPromise}async _stopInternal(n){this._stopError=n;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(i){this._logger.log(q.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(q.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(n){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===ht.WebSockets)this.transport=this._constructTransport(ht.WebSockets),await this._startTransport(i,n);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let r=null,l=0;do{if(r=await this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new ss("The connection was stopped during negotiation.");if(r.error)throw new Error(r.error);if(r.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(r.url&&(i=r.url),r.accessToken){const d=r.accessToken;this._accessTokenFactory=()=>d,this._httpClient._accessToken=d,this._httpClient._accessTokenFactory=void 0}l++}while(r.url&&l<cv);if(l===cv&&r.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(i,this._options.transport,r,n)}this.transport instanceof lv&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(q.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(r){return this._logger.log(q.Error,"Failed to start the connection: "+r),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(r)}}async _getNegotiationResponse(n){const i={},[r,l]=Vr();i[r]=l;const d=this._resolveNegotiateUrl(n);this._logger.log(q.Debug,`Sending negotiation request: ${d}.`);try{const f=await this._httpClient.post(d,{content:"",headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(f.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${f.statusCode}'`));const m=JSON.parse(f.content);return(!m.negotiateVersion||m.negotiateVersion<1)&&(m.connectionToken=m.connectionId),m.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new av("Client didn't negotiate Stateful Reconnect but the server did.")):m}catch(f){let m="Failed to complete negotiation with the server: "+f;return f instanceof ka&&f.statusCode===404&&(m=m+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(q.Error,m),Promise.reject(new av(m))}}_createConnectUrl(n,i){return i?n+(n.indexOf("?")===-1?"?":"&")+`id=${i}`:n}async _createTransport(n,i,r,l){let d=this._createConnectUrl(n,r.connectionToken);if(this._isITransport(i)){this._logger.log(q.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,await this._startTransport(d,l),this.connectionId=r.connectionId;return}const f=[],m=r.availableTransports||[];let p=r;for(const y of m){const b=this._resolveTransportOrError(y,i,l,p?.useStatefulReconnect===!0);if(b instanceof Error)f.push(`${y.transport} failed:`),f.push(b);else if(this._isITransport(b)){if(this.transport=b,!p){try{p=await this._getNegotiationResponse(n)}catch(v){return Promise.reject(v)}d=this._createConnectUrl(n,p.connectionToken)}try{await this._startTransport(d,l),this.connectionId=p.connectionId;return}catch(v){if(this._logger.log(q.Error,`Failed to start the transport '${y.transport}': ${v}`),p=void 0,f.push(new sM(`${y.transport} failed: ${v}`,ht[y.transport])),this._connectionState!=="Connecting"){const w="Failed to select transport before stop() was called.";return this._logger.log(q.Debug,w),Promise.reject(new ss(w))}}}}return f.length>0?Promise.reject(new iM(`Unable to connect to the server with any of the available transports. ${f.join(" ")}`,f)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(n){switch(n){case ht.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new MM(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case ht.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new EM(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case ht.LongPolling:return new lv(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${n}.`)}}_startTransport(n,i){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async r=>{let l=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(n,i),await this.features.resend()}catch{l=!0}else{this._stopConnection(r);return}l&&this._stopConnection(r)}:this.transport.onclose=r=>this._stopConnection(r),this.transport.connect(n,i)}_resolveTransportOrError(n,i,r,l){const d=ht[n.transport];if(d==null)return this._logger.log(q.Debug,`Skipping transport '${n.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${n.transport}' because it is not supported by this client.`);if(kM(i,d))if(n.transferFormats.map(m=>Jt[m]).indexOf(r)>=0){if(d===ht.WebSockets&&!this._options.WebSocket||d===ht.ServerSentEvents&&!this._options.EventSource)return this._logger.log(q.Debug,`Skipping transport '${ht[d]}' because it is not supported in your environment.'`),new tM(`'${ht[d]}' is not supported in your environment.`,d);this._logger.log(q.Debug,`Selecting transport '${ht[d]}'.`);try{return this.features.reconnect=d===ht.WebSockets?l:void 0,this._constructTransport(d)}catch(m){return m}}else return this._logger.log(q.Debug,`Skipping transport '${ht[d]}' because it does not support the requested transfer format '${Jt[r]}'.`),new Error(`'${ht[d]}' does not support ${Jt[r]}.`);else return this._logger.log(q.Debug,`Skipping transport '${ht[d]}' because it was disabled by the client.`),new nM(`'${ht[d]}' is disabled by the client.`,d)}_isITransport(n){return n&&typeof n=="object"&&"connect"in n}_stopConnection(n){if(this._logger.log(q.Debug,`HttpConnection.stopConnection(${n}) called while in state ${this._connectionState}.`),this.transport=void 0,n=this._stopError||n,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(q.Debug,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(q.Warning,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${n}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),n?this._logger.log(q.Error,`Connection disconnected with error '${n}'.`):this._logger.log(q.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(q.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(n)}catch(i){this._logger.log(q.Error,`HttpConnection.onclose(${n}) threw error '${i}'.`)}}}_resolveUrl(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(!ct.isBrowser)throw new Error(`Cannot resolve '${n}'.`);const i=window.document.createElement("a");return i.href=n,this._logger.log(q.Information,`Normalizing '${n}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(n){const i=new URL(n);i.pathname.endsWith("/")?i.pathname+="negotiate":i.pathname+="/negotiate";const r=new URLSearchParams(i.searchParams);return r.has("negotiateVersion")||r.append("negotiateVersion",this._negotiateVersion.toString()),r.has("useStatefulReconnect")?r.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&r.append("useStatefulReconnect","true"),i.search=r.toString(),i.toString()}}function kM(s,n){return!s||(n&s)!==0}class Wm{constructor(n){this._transport=n,this._buffer=[],this._executing=!0,this._sendBufferedData=new tu,this._transportResult=new tu,this._sendLoopPromise=this._sendLoop()}send(n){return this._bufferData(n),this._transportResult||(this._transportResult=new tu),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(n){if(this._buffer.length&&typeof this._buffer[0]!=typeof n)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof n}`);this._buffer.push(n),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new tu;const n=this._transportResult;this._transportResult=void 0;const i=typeof this._buffer[0]=="string"?this._buffer.join(""):Wm._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(i),n.resolve()}catch(r){n.reject(r)}}}static _concatBuffers(n){const i=n.map(d=>d.byteLength).reduce((d,f)=>d+f),r=new Uint8Array(i);let l=0;for(const d of n)r.set(new Uint8Array(d),l),l+=d.byteLength;return r.buffer}}class tu{constructor(){this.promise=new Promise((n,i)=>[this._resolver,this._rejecter]=[n,i])}resolve(){this._resolver()}reject(n){this._rejecter(n)}}const RM="json";class NM{constructor(){this.name=RM,this.version=2,this.transferFormat=Jt.Text}parseMessages(n,i){if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];i===null&&(i=vl.instance);const r=jn.parse(n),l=[];for(const d of r){const f=JSON.parse(d);if(typeof f.type!="number")throw new Error("Invalid payload.");switch(f.type){case be.Invocation:this._isInvocationMessage(f);break;case be.StreamItem:this._isStreamItemMessage(f);break;case be.Completion:this._isCompletionMessage(f);break;case be.Ping:break;case be.Close:break;case be.Ack:this._isAckMessage(f);break;case be.Sequence:this._isSequenceMessage(f);break;default:i.log(q.Information,"Unknown message type '"+f.type+"' ignored.");continue}l.push(f)}return l}writeMessage(n){return jn.write(JSON.stringify(n))}_isInvocationMessage(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message."),n.invocationId!==void 0&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message."),this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}_isAckMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(n,i){if(typeof n!="string"||n==="")throw new Error(i)}}const DM={trace:q.Trace,debug:q.Debug,info:q.Information,information:q.Information,warn:q.Warning,warning:q.Warning,error:q.Error,critical:q.Critical,none:q.None};function zM(s){const n=DM[s.toLowerCase()];if(typeof n<"u")return n;throw new Error(`Unknown log level: ${s}`)}class BM{configureLogging(n){if(Mt.isRequired(n,"logging"),UM(n))this.logger=n;else if(typeof n=="string"){const i=zM(n);this.logger=new wu(i)}else this.logger=new wu(n);return this}withUrl(n,i){return Mt.isRequired(n,"url"),Mt.isNotEmpty(n,"url"),this.url=n,typeof i=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...i}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:i},this}withHubProtocol(n){return Mt.isRequired(n,"protocol"),this.protocol=n,this}withAutomaticReconnect(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return n?Array.isArray(n)?this.reconnectPolicy=new ov(n):this.reconnectPolicy=n:this.reconnectPolicy=new ov,this}withServerTimeout(n){return Mt.isRequired(n,"milliseconds"),this._serverTimeoutInMilliseconds=n,this}withKeepAliveInterval(n){return Mt.isRequired(n,"milliseconds"),this._keepAliveIntervalInMilliseconds=n,this}withStatefulReconnect(n){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=n?.bufferSize,this}build(){const n=this.httpConnectionOptions||{};if(n.logger===void 0&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const i=new AM(this.url,n);return Xm.create(i,this.logger||vl.instance,this.protocol||new NM,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function UM(s){return s.log!==void 0}class OM{connection=null;eventHandlers={};reconnectAttempts=0;maxReconnectAttempts=5;isManualDisconnect=!1;constructor(){const i="https://your-domain.com/api".replace("/api","/hubs/chat");this.connection=new BM().withUrl(i,{accessTokenFactory:()=>localStorage.getItem("token")||"",skipNegotiation:!1,withCredentials:!0,transport:ht.WebSockets|ht.ServerSentEvents|ht.LongPolling}).withAutomaticReconnect({nextRetryDelayInMilliseconds:r=>r.previousRetryCount>=this.maxReconnectAttempts?null:Math.min(1e3*Math.pow(2,r.previousRetryCount),32e3)}).configureLogging(q.Information).build(),this.setupConnectionHandlers(),this.setupEventListeners()}setupConnectionHandlers(){this.connection&&(this.connection.onreconnecting(n=>{console.warn("SignalR reconnecting...",n),this.reconnectAttempts++}),this.connection.onreconnected(n=>{console.log("SignalR reconnected:",n),this.reconnectAttempts=0,this.rejoinChats()}),this.connection.onclose(n=>{console.error("SignalR connection closed:",n),!this.isManualDisconnect&&this.reconnectAttempts<this.maxReconnectAttempts&&setTimeout(()=>this.start(),5e3)}))}setupEventListeners(){this.connection&&(this.connection.on("UserOnline",n=>{console.log("[SignalR] UserOnline event received:",n),this.eventHandlers.onUserOnline?.(n)}),this.connection.on("UserOffline",n=>{console.log("[SignalR] UserOffline event received:",n),this.eventHandlers.onUserOffline?.(n)}),this.connection.on("ReceiveMessage",n=>{this.eventHandlers.onReceiveMessage?.(n)}),this.connection.on("MessageEdited",n=>{this.eventHandlers.onMessageEdited?.(n)}),this.connection.on("MessageDeleted",n=>{this.eventHandlers.onMessageDeleted?.(n)}),this.connection.on("ReactionAdded",n=>{console.log("[SignalR] ReactionAdded event received:",n),this.eventHandlers.onReactionAdded?.(n)}),this.connection.on("ReactionRemoved",n=>{console.log("[SignalR] ReactionRemoved event received:",n),this.eventHandlers.onReactionRemoved?.(n)}),this.connection.on("UserTyping",n=>{this.eventHandlers.onUserTyping?.(n)}),this.connection.on("UserStoppedTyping",n=>{this.eventHandlers.onUserStoppedTyping?.(n)}),this.connection.on("NewNotification",n=>{this.eventHandlers.onNewNotification?.(n)}),this.connection.on("NotificationsMarkedSeen",n=>{this.eventHandlers.onNotificationsMarkedSeen?.(n)}),this.connection.on("MessagePinned",n=>{this.eventHandlers.onMessagePinned?.(n)}),this.connection.on("MessageUnpinned",n=>{this.eventHandlers.onMessageUnpinned?.(n)}),this.connection.on("AddedToChat",n=>{console.log("[SignalR] AddedToChat:",n),this.eventHandlers.onAddedToChat?.(n)}),this.connection.on("NewConversation",n=>{console.log("[SignalR] NewConversation:",n),this.eventHandlers.onNewConversation?.(n)}),this.connection.on("ConversationCreated",n=>{console.log("[SignalR] ConversationCreated:",n),this.eventHandlers.onConversationCreated?.(n)}),this.connection.on("PermissionGranted",n=>{console.log("[SignalR] PermissionGranted:",n),this.eventHandlers.onPermissionGranted?.(n)}),this.connection.on("PermissionRevoked",n=>{console.log("[SignalR] PermissionRevoked:",n),this.eventHandlers.onPermissionRevoked?.(n)}),this.connection.on("AllPermissionsRevoked",n=>{console.log("[SignalR] AllPermissionsRevoked:",n),this.eventHandlers.onAllPermissionsRevoked?.(n)}),this.connection.on("UserBlockedYou",n=>{console.log("[SignalR] UserBlockedYou:",n),this.eventHandlers.onUserBlockedYou?.(n)}),this.connection.on("YouBlockedUser",n=>{console.log("[SignalR] YouBlockedUser:",n),this.eventHandlers.onYouBlockedUser?.(n)}),this.connection.on("UserUnblockedYou",n=>{console.log("[SignalR] UserUnblockedYou:",n),this.eventHandlers.onUserUnblockedYou?.(n)}),this.connection.on("YouUnblockedUser",n=>{console.log("[SignalR] YouUnblockedUser:",n),this.eventHandlers.onYouUnblockedUser?.(n)}),this.connection.on("ChatDeleted",n=>{console.log("[SignalR] ChatDeleted:",n),this.eventHandlers.onChatDeleted?.(n)}),this.connection.on("RemovedFromChat",n=>{console.log("[SignalR] RemovedFromChat:",n),this.eventHandlers.onRemovedFromChat?.(n)}),this.connection.on("MessagesMarkedSeen",n=>{console.log("[SignalR] MessagesMarkedSeen:",n),this.eventHandlers.onMessagesMarkedSeen?.(n)}),this.connection.on("Error",n=>{console.error("SignalR Error:",n),this.eventHandlers.onError?.(n)}))}setEventHandlers(n){this.eventHandlers={...this.eventHandlers,...n}}async start(){if(this.connection)try{this.connection.state===Ge.Disconnected&&(this.isManualDisconnect=!1,await this.connection.start(),console.log("SignalR Connected:",this.connection.connectionId))}catch(n){throw console.error("Error starting SignalR connection:",n),n}}async getPresenceStates(n){if(!this.connection||this.connection.state!==Ge.Connected)return console.warn("Cannot fetch presence states: not connected"),{};try{const i=await this.connection.invoke("GetPresenceStates",n);return console.log(`Fetched initial presence states for ${n.length} users`),i}catch(i){return console.error("Error fetching presence states:",i),{}}}async stop(){if(this.connection)try{this.isManualDisconnect=!0,await this.connection.stop(),console.log("SignalR Disconnected")}catch(n){console.error("Error stopping SignalR connection:",n)}}getConnectionState(){return this.connection?.state||Ge.Disconnected}isConnected(){return this.connection?.state===Ge.Connected}activeChats=new Set;async joinChat(n){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("JoinChat",n),this.activeChats.add(n),console.log("Joined chat:",n)}catch(i){throw console.error("Error joining chat:",i),i}}async leaveChat(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("LeaveChat",n),this.activeChats.delete(n),console.log("Left chat:",n)}catch(i){console.error("Error leaving chat:",i)}}async rejoinChats(){const n=Array.from(this.activeChats);for(const i of n)try{await this.connection?.invoke("JoinChat",i)}catch(r){console.error("Error rejoining chat:",i,r)}}async sendMessage(n,i,r=null,l=null){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("SendMessage",{chatId:n,content:i,receiverId:r,replyId:l})}catch(d){throw console.error("Error sending message:",d),d}}async editMessage(n,i,r){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("EditMessage",n,i,r)}catch(l){throw console.error("Error editing message:",l),l}}async deleteMessage(n,i){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("DeleteMessage",n,i)}catch(r){throw console.error("Error deleting message:",r),r}}async addReaction(n,i,r){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("AddReaction",n,i,r)}catch(l){throw console.error("Error adding reaction:",l),l}}async removeReaction(n,i){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("RemoveReaction",n,i)}catch(r){throw console.error("Error removing reaction:",r),r}}async sendTyping(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("Typing",n)}catch(i){console.error("Error sending typing indicator:",i)}}async sendStopTyping(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("StopTyping",n)}catch(i){console.error("Error sending stop typing indicator:",i)}}async markNotificationsAsSeen(n){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("MarkAsSeen",n)}catch(i){throw console.error("Error marking notifications as seen:",i),i}}markSeenDebounceTimers=new Map;async markMessagesAsSeen(n){if(!this.connection||!this.isConnected())return;const i=this.markSeenDebounceTimers.get(n);return i&&clearTimeout(i),new Promise(r=>{const l=setTimeout(async()=>{if(this.markSeenDebounceTimers.delete(n),!this.connection||!this.isConnected()){r();return}try{await this.connection.invoke("MarkMessagesAsSeen",n)}catch(d){d?.message?.includes("connection being closed")||console.error("Error marking messages as seen:",d)}r()},300);this.markSeenDebounceTimers.set(n,l)})}}const Js=new OM,uv=Object.freeze(Object.defineProperty({__proto__:null,signalRService:Js},Symbol.toStringTag,{value:"Module"})),dv=[],A1=s=>{const n=Cn(m=>m.permissionsLoading),i=Cn(m=>m.currentChat),r=tt(m=>m.user),l=Cn(m=>s?m.chatPermissions.get(s)??dv:dv),d=(()=>{if(!s||!i||!r)return!1;if(i.createdById===r.id)return!0;const p=i.members?.find(y=>y.userId===r.id)?.role?.toLowerCase();return p==="admin"||p==="owner"})(),f=m=>d?!0:l.includes(m);return i?.type==="dm"?{canSendMessage:!0,canAddUsers:!1,canPinMessages:!0,canManageMessages:!1,canManageBans:!1,canManageChatInfo:!1,canManageUsers:!1,isLoading:!1}:s?{canSendMessage:f("SendMessage"),canAddUsers:f("AddUsers"),canPinMessages:f("PinMessages"),canManageMessages:f("ManageMessages"),canManageBans:f("ManageBans"),canManageChatInfo:f("ManageChatInfo"),canManageUsers:f("ManageUsers"),isLoading:n}:{canSendMessage:!1,canAddUsers:!1,canPinMessages:!1,canManageMessages:!1,canManageBans:!1,canManageChatInfo:!1,canManageUsers:!1,isLoading:!1}},LM="_overlay_1w6vq_69",IM="_fadeIn_1w6vq_1",PM="_closing_1w6vq_85",HM="_fadeOut_1w6vq_1",VM="_modal_1w6vq_90",$M="_slideUp_1w6vq_1",qM="_slideDown_1w6vq_1",FM="_header_1w6vq_109",GM="_headerContent_1w6vq_118",YM="_headerIcon_1w6vq_124",XM="_title_1w6vq_136",WM="_subtitle_1w6vq_144",KM="_closeBtn_1w6vq_150",QM="_content_1w6vq_173",ZM="_userCard_1w6vq_197",JM="_userAvatar_1w6vq_208",eA="_userInfo_1w6vq_229",tA="_userName_1w6vq_234",nA="_userRole_1w6vq_241",sA="_roleBadge_1w6vq_246",iA="_admin_1w6vq_255",aA="_moderator_1w6vq_261",rA="_member_1w6vq_267",oA="_permissionStats_1w6vq_273",lA="_statNumber_1w6vq_281",cA="_statLabel_1w6vq_287",uA="_loadingState_1w6vq_293",dA="_loadingSpinner_1w6vq_298",fA="_spin_1w6vq_302",hA="_skeletonList_1w6vq_313",mA="_skeletonItem_1w6vq_319",pA="_skeletonIcon_1w6vq_329",gA="_shimmer_1w6vq_1",yA="_skeletonText_1w6vq_338",bA="_skeletonLine_1w6vq_342",vA="_skeletonToggle_1w6vq_355",xA="_permissionsList_1w6vq_365",SA="_category_1w6vq_372",wA="_categoryHeader_1w6vq_376",_A="_categoryLabel_1w6vq_384",CA="_categoryCount_1w6vq_392",jA="_categoryItems_1w6vq_398",TA="_permissionItem_1w6vq_405",EA="_granted_1w6vq_421",MA="_updating_1w6vq_431",AA="_permissionIcon_1w6vq_436",kA="_permissionInfo_1w6vq_454",RA="_permissionLabel_1w6vq_459",NA="_permissionDescription_1w6vq_466",DA="_toggleSwitch_1w6vq_473",zA="_toggleTrack_1w6vq_483",BA="_on_1w6vq_492",UA="_toggleThumb_1w6vq_497",OA="_footer_1w6vq_523",LA="_footerInfo_1w6vq_532",IA="_doneButton_1w6vq_544",PA="_pulse_1w6vq_1",de={overlay:LM,fadeIn:IM,closing:PM,fadeOut:HM,modal:VM,slideUp:$M,slideDown:qM,header:FM,headerContent:GM,headerIcon:YM,title:XM,subtitle:WM,closeBtn:KM,content:QM,userCard:ZM,userAvatar:JM,userInfo:eA,userName:tA,userRole:nA,roleBadge:sA,admin:iA,moderator:aA,member:rA,permissionStats:oA,statNumber:lA,statLabel:cA,loadingState:uA,loadingSpinner:dA,spin:fA,skeletonList:hA,skeletonItem:mA,skeletonIcon:pA,shimmer:gA,skeletonText:yA,skeletonLine:bA,skeletonToggle:vA,permissionsList:xA,category:SA,categoryHeader:wA,categoryLabel:_A,categoryCount:CA,categoryItems:jA,permissionItem:TA,granted:EA,updating:MA,permissionIcon:AA,permissionInfo:kA,permissionLabel:RA,permissionDescription:NA,toggleSwitch:DA,toggleTrack:zA,on:BA,toggleThumb:UA,footer:OA,footerInfo:LA,doneButton:IA,pulse:PA},fv=[{name:"SendMessage",label:"Send Messages",description:"Allow sending messages in this chat",icon:c.jsx(fl,{size:18}),category:"messaging"},{name:"ManageMessages",label:"Manage Messages",description:"Edit or delete messages from other users",icon:c.jsx(Eh,{size:18}),category:"moderation"},{name:"AddUsers",label:"Add Users",description:"Invite new members to this chat",icon:c.jsx(il,{size:18}),category:"management"},{name:"ManageUsers",label:"Manage Users",description:"Remove members and manage their roles",icon:c.jsx(Lt,{size:18}),category:"management"},{name:"ManageChatInfo",label:"Manage Chat Info",description:"Edit chat name, description, and avatar",icon:c.jsx(Eh,{size:18}),category:"management"},{name:"ManageBans",label:"Manage Bans",description:"Ban or unban users from this chat",icon:c.jsx(Ii,{size:18}),category:"moderation"},{name:"PinMessages",label:"Pin Messages",description:"Pin important messages for all members",icon:c.jsx(Mh,{size:18}),category:"messaging"}],Sh={messaging:{label:"Messaging",order:1},moderation:{label:"Moderation",order:2},management:{label:"Management",order:3}},k1=({isOpen:s,onClose:n,chatId:i,member:r,onPermissionsChanged:l})=>{const[d,f]=_.useState([]),[m,p]=_.useState(!1),[y,b]=_.useState(null),[v,w]=_.useState(!1);_.useEffect(()=>{s&&(E(),w(!1))},[s,i,r.userId]);const E=async()=>{p(!0);try{const{permissionService:G}=await Zs(async()=>{const{permissionService:le}=await import("./permission.service-9Ilapnf8.js");return{permissionService:le}},__vite__mapDeps([0,1,2])),ee=await G.getUserPermissions(i,r.userId),se=ee?.permissions||ee,W=Array.isArray(se)?se.map(le=>le.permissionName||le.name||le):[];f(W)}catch(G){console.error("Failed to load permissions:",G),f([])}finally{p(!1)}},C=async G=>{const ee=d.includes(G);b(G);const W=tt.getState().user?.id===r.userId;try{const{permissionService:le}=await Zs(async()=>{const{permissionService:ue}=await import("./permission.service-9Ilapnf8.js");return{permissionService:ue}},__vite__mapDeps([0,1,2]));ee?(await le.revokePermission(i,r.userId,G),f(d.filter(ue=>ue!==G)),W&&Cn.getState().revokePermission(i,G)):(await le.grantPermission(i,r.userId,G),f([...d,G]),W&&Cn.getState().grantPermission(i,G)),await l()}catch(le){console.error("Failed to update permission:",le)}finally{b(null)}},A=()=>{w(!0),setTimeout(()=>{n(),w(!1)},200)};if(!s)return null;const D=G=>G.slice(0,2).toUpperCase(),P=fv.reduce((G,ee)=>(G[ee.category]||(G[ee.category]=[]),G[ee.category].push(ee),G),{}),Q=Object.entries(P).sort(([G],[ee])=>Sh[G].order-Sh[ee].order),V=d.length,J=fv.length;return c.jsx("div",{className:`${de.overlay} ${v?de.closing:""}`,onClick:A,children:c.jsxs("div",{className:`${de.modal} ${v?de.closing:""}`,onClick:G=>G.stopPropagation(),children:[c.jsxs("div",{className:de.header,children:[c.jsxs("div",{className:de.headerContent,children:[c.jsx("div",{className:de.headerIcon,children:c.jsx(Or,{size:20})}),c.jsxs("div",{children:[c.jsx("h2",{className:de.title,children:"Manage Permissions"}),c.jsx("p",{className:de.subtitle,children:"Configure access for this member"})]})]}),c.jsx("button",{onClick:A,className:de.closeBtn,"aria-label":"Close",children:""})]}),c.jsxs("div",{className:de.content,children:[c.jsxs("div",{className:de.userCard,children:[c.jsx("div",{className:de.userAvatar,children:r.user.avatarUrl?c.jsx("img",{src:r.user.avatarUrl,alt:r.user.username}):D(r.user.username)}),c.jsxs("div",{className:de.userInfo,children:[c.jsx("div",{className:de.userName,children:r.user.username}),c.jsx("div",{className:de.userRole,children:c.jsx("span",{className:`${de.roleBadge} ${de[r.role]}`,children:r.role.charAt(0).toUpperCase()+r.role.slice(1)})})]}),c.jsxs("div",{className:de.permissionStats,children:[c.jsx("div",{className:de.statNumber,children:V}),c.jsxs("div",{className:de.statLabel,children:["of ",J]})]})]}),m?c.jsxs("div",{className:de.loadingState,children:[c.jsx("div",{className:de.loadingSpinner,children:c.jsx(zt,{size:32,className:de.spin})}),c.jsx("p",{children:"Loading permissions..."}),c.jsx("div",{className:de.skeletonList,children:[1,2,3,4].map(G=>c.jsxs("div",{className:de.skeletonItem,children:[c.jsx("div",{className:de.skeletonIcon}),c.jsxs("div",{className:de.skeletonText,children:[c.jsx("div",{className:de.skeletonLine,style:{width:"60%"}}),c.jsx("div",{className:de.skeletonLine,style:{width:"80%"}})]}),c.jsx("div",{className:de.skeletonToggle})]},G))})]}):c.jsx("div",{className:de.permissionsList,children:Q.map(([G,ee],se)=>c.jsxs("div",{className:de.category,style:{animationDelay:`${se*.1}s`},children:[c.jsxs("div",{className:de.categoryHeader,children:[c.jsx("span",{className:de.categoryLabel,children:Sh[G].label}),c.jsxs("span",{className:de.categoryCount,children:[ee.filter(W=>d.includes(W.name)).length," / ",ee.length]})]}),c.jsx("div",{className:de.categoryItems,children:ee.map((W,le)=>{const ue=d.includes(W.name),Ce=y===W.name;return c.jsxs("div",{className:`${de.permissionItem} ${ue?de.granted:""} ${Ce?de.updating:""}`,style:{animationDelay:`${se*.1+le*.05}s`},children:[c.jsx("div",{className:de.permissionIcon,children:W.icon}),c.jsxs("div",{className:de.permissionInfo,children:[c.jsx("div",{className:de.permissionLabel,children:W.label}),c.jsx("div",{className:de.permissionDescription,children:W.description})]}),c.jsx("button",{className:`${de.toggleSwitch} ${ue?de.on:de.off}`,onClick:()=>C(W.name),disabled:Ce,children:c.jsx("div",{className:de.toggleTrack,children:c.jsx("div",{className:de.toggleThumb,children:Ce&&c.jsx(zt,{size:12,className:de.spin})})})})]},W.name)})})]},G))})]}),c.jsxs("div",{className:de.footer,children:[c.jsxs("div",{className:de.footerInfo,children:[c.jsx(Or,{size:14}),c.jsx("span",{children:"Changes take effect immediately"})]}),c.jsx("button",{onClick:A,className:de.doneButton,children:"Done"})]})]})})},ke={surface:"#0a0a0a",surfaceElevated:"#0f0f0f",surfaceHover:"#151515",border:"#1a1a1a",borderLight:"#252525",primaryHover:"#0d9668",danger:"#ef4444",dangerHover:"#dc2626",dangerMuted:"rgba(239, 68, 68, 0.15)",warning:"#f59e0b",warningHover:"#d97706",warningMuted:"rgba(245, 158, 11, 0.15)",info:"#10b981",infoHover:"#0d9668",infoMuted:"rgba(16, 185, 129, 0.15)",success:"#10b981",successMuted:"rgba(16, 185, 129, 0.15)",text:"#ffffff",textSecondary:"#a1a1aa",textMuted:"#71717a"},HA=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M5.5 3.21V20.8l4.75-4.73 2.99 6.73L15.5 21.6l-3-6.7h6z'/%3E%3Cpath fill='%23064e3b' d='M6.5 5.61v11.68l3.38-3.37.37-.37.48 1.07 1.93 4.35 1.07-.47L11.8 14.1l-.48-1.07H16z'/%3E%3C/svg%3E") 5 3, default`,wh=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M9 2.5a2.5 2.5 0 0 1 5 0v7.996l3.904-.74a2.095 2.095 0 0 1 2.537 2.466L19.5 17.5a6 6 0 0 1-6 6H11a7 7 0 0 1-7-7V9a2 2 0 1 1 4 0v3.5h1z'/%3E%3Cpath fill='%23064e3b' d='M10 2.5V14h-.5a1.5 1.5 0 0 1-1.5-1.5V9a1 1 0 1 0-2 0v7.5a6 6 0 0 0 6 6h2.5a5 5 0 0 0 5-5l.941-5.278a1.095 1.095 0 0 0-1.324-1.288l-4.117.78V2.5a1.5 1.5 0 0 0-3 0z'/%3E%3C/svg%3E") 9 4, pointer`,VA=s=>{switch(s){case"danger":return{iconBg:ke.dangerMuted,iconBorder:`${ke.danger}30`,iconColor:ke.danger,buttonBg:ke.danger,buttonHover:ke.dangerHover,glow:`0 0 60px ${ke.dangerMuted}`};case"warning":return{iconBg:ke.warningMuted,iconBorder:`${ke.warning}30`,iconColor:ke.warning,buttonBg:ke.warning,buttonHover:ke.warningHover,glow:`0 0 60px ${ke.warningMuted}`};case"success":return{iconBg:ke.successMuted,iconBorder:`${ke.success}30`,iconColor:ke.success,buttonBg:ke.success,buttonHover:ke.primaryHover,glow:`0 0 60px ${ke.successMuted}`};case"info":default:return{iconBg:ke.infoMuted,iconBorder:`${ke.info}30`,iconColor:ke.info,buttonBg:ke.info,buttonHover:ke.infoHover,glow:`0 0 60px ${ke.infoMuted}`}}},$A=(s,n)=>{switch(s){case"delete":return c.jsx(lm,{size:28,color:n});case"ban":return c.jsx(Ii,{size:28,color:n});case"leave":return c.jsx(om,{size:28,color:n});case"shield":return c.jsx(Or,{size:28,color:n});case"success":return c.jsx(bv,{size:28,color:n});case"info":return c.jsx(rm,{size:28,color:n});case"warning":default:return c.jsx(dw,{size:28,color:n})}},qA={hidden:{opacity:0},visible:{opacity:1}},FA={hidden:{opacity:0,scale:.9,y:20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:25,stiffness:400,mass:.8}},exit:{opacity:0,scale:.9,y:20,transition:{duration:.15,ease:"easeOut"}}},GA={hidden:{scale:0,rotate:-180},visible:{scale:1,rotate:0,transition:{type:"spring",damping:15,stiffness:400,delay:.1}}},YA={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{delay:.15,duration:.2}}},XA={hidden:{opacity:0},visible:{opacity:1,transition:{delay:.2,duration:.2}}},WA=({isOpen:s,title:n,message:i,confirmText:r="Confirm",cancelText:l="Cancel",variant:d="danger",icon:f="warning",onConfirm:m,onCancel:p})=>{const y=VA(d);return c.jsx(sn,{children:s&&c.jsxs(X.div,{variants:qA,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.2},onClick:p,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",cursor:HA},children:[c.jsx("div",{style:{position:"absolute",inset:0,backgroundImage:`
              linear-gradient(rgba(16, 185, 129, 0.02) 1px, transparent 1px),
              linear-gradient(90deg, rgba(16, 185, 129, 0.02) 1px, transparent 1px)
            `,backgroundSize:"50px 50px",pointerEvents:"none"}}),c.jsxs(X.div,{variants:FA,initial:"hidden",animate:"visible",exit:"exit",onClick:b=>b.stopPropagation(),style:{position:"relative",width:"100%",maxWidth:"420px",background:`linear-gradient(180deg, ${ke.surfaceElevated} 0%, ${ke.surface} 100%)`,border:`1px solid ${ke.border}`,borderRadius:"20px",boxShadow:`
                0 25px 50px -12px rgba(0, 0, 0, 0.5),
                0 0 0 1px ${ke.borderLight},
                ${y.glow}
              `,overflow:"hidden"},children:[c.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"3px",background:`linear-gradient(90deg, transparent, ${y.iconColor}, transparent)`}}),c.jsx(X.button,{whileHover:{scale:1.1,backgroundColor:ke.surfaceHover},whileTap:{scale:.9},onClick:p,style:{position:"absolute",top:"16px",right:"16px",width:"32px",height:"32px",borderRadius:"8px",border:"none",background:"transparent",cursor:wh,display:"flex",alignItems:"center",justifyContent:"center",color:ke.textMuted,zIndex:1},children:c.jsx(It,{size:18})}),c.jsxs("div",{style:{padding:"32px 28px 28px"},children:[c.jsx(X.div,{variants:GA,style:{width:"72px",height:"72px",borderRadius:"20px",background:y.iconBg,border:`1px solid ${y.iconBorder}`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",boxShadow:`0 8px 32px ${y.iconBg}`},children:$A(f,y.iconColor)}),c.jsxs(X.div,{variants:YA,style:{textAlign:"center"},children:[c.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"20px",fontWeight:700,color:ke.text,letterSpacing:"-0.02em"},children:n}),c.jsx("p",{style:{margin:0,fontSize:"14px",lineHeight:1.7,color:ke.textSecondary,maxWidth:"320px",marginLeft:"auto",marginRight:"auto"},children:i})]}),c.jsxs(X.div,{variants:XA,style:{display:"flex",gap:"12px",marginTop:"28px"},children:[c.jsx(X.button,{whileHover:{scale:1.02,backgroundColor:ke.surfaceHover,borderColor:ke.borderLight,boxShadow:"none"},whileTap:{scale:.98},onClick:p,style:{flex:1,padding:"14px 24px",borderRadius:"12px",border:`1px solid ${ke.border}`,background:ke.surfaceElevated,color:ke.textSecondary,fontSize:"14px",fontWeight:600,cursor:wh,transition:"all 0.2s ease",outline:"none",boxShadow:"none"},children:l}),c.jsx(X.button,{whileHover:{scale:1.02,boxShadow:`0 8px 32px ${y.iconBg}`},whileTap:{scale:.98},onClick:m,style:{flex:1,padding:"14px 24px",borderRadius:"12px",border:"none",background:`linear-gradient(135deg, ${y.buttonBg} 0%, ${y.buttonHover} 100%)`,color:"white",fontSize:"14px",fontWeight:600,cursor:wh,boxShadow:`0 4px 16px ${y.iconBg}`,transition:"all 0.2s ease"},children:r})]})]})]})]})})};let sl=null;const fu={init:s=>{sl=s},show:s=>new Promise(n=>{if(sl){let i=s.icon;if(!i)switch(s.variant){case"danger":i="delete";break;case"warning":i="warning";break;case"success":i="success";break;case"info":default:i="info";break}sl({isOpen:!0,title:s.title,message:s.message,confirmText:s.confirmText||"Confirm",cancelText:s.cancelText||"Cancel",variant:s.variant||"danger",icon:i||"warning",callback:n})}else console.warn("[ConfirmModal] Store not initialized"),n(!1)}),close:s=>{sl&&sl(n=>(n.callback&&n.callback(s),{...n,isOpen:!1,callback:null}))}},ns=fu.show,KA=()=>{const[s,n]=_a.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",variant:"danger",icon:"warning",callback:null});return _a.useEffect(()=>{fu.init(n)},[]),c.jsx(WA,{isOpen:s.isOpen,title:s.title,message:s.message,confirmText:s.confirmText,cancelText:s.cancelText,variant:s.variant,icon:s.icon,onConfirm:()=>fu.close(!0),onCancel:()=>fu.close(!1)})},te={bg:"#050505",surface:"#0a0a0a",surfaceElevated:"#0f0f0f",surfaceHover:"#151515",border:"#1a1a1a",primary:"#10b981",primaryHover:"#0d9668",primaryMuted:"rgba(16, 185, 129, 0.15)",danger:"#ef4444",dangerMuted:"rgba(239, 68, 68, 0.15)",text:"#ffffff",textSecondary:"#a1a1aa",textMuted:"#71717a"},QA=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M5.5 3.21V20.8l4.75-4.73 2.99 6.73L15.5 21.6l-3-6.7h6z'/%3E%3Cpath fill='%23064e3b' d='M6.5 5.61v11.68l3.38-3.37.37-.37.48 1.07 1.93 4.35 1.07-.47L11.8 14.1l-.48-1.07H16z'/%3E%3C/svg%3E") 5 3, default`,ZA=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M9 2.5a2.5 2.5 0 0 1 5 0v7.996l3.904-.74a2.095 2.095 0 0 1 2.537 2.466L19.5 17.5a6 6 0 0 1-6 6H11a7 7 0 0 1-7-7V9a2 2 0 1 1 4 0v3.5h1z'/%3E%3Cpath fill='%23064e3b' d='M10 2.5V14h-.5a1.5 1.5 0 0 1-1.5-1.5V9a1 1 0 1 0-2 0v7.5a6 6 0 0 0 6 6h2.5a5 5 0 0 0 5-5l.941-5.278a1.095 1.095 0 0 0-1.324-1.288l-4.117.78V2.5a1.5 1.5 0 0 0-3 0z'/%3E%3C/svg%3E") 9 4, pointer`,JA=`
  /* Custom Emerald Cursor Styles */
  .user-profile-modal-overlay {
    cursor: ${QA};
  }
  .user-profile-modal-overlay * {
    cursor: inherit;
  }
  .user-profile-modal-overlay button,
  .user-profile-modal-overlay a,
  .user-profile-modal-overlay [role="button"],
  .user-profile-modal-overlay input[type="submit"],
  .user-profile-modal-overlay input[type="button"],
  .user-profile-modal-overlay .clickable {
    cursor: ${ZA};
  }
  .user-profile-modal-overlay input[type="text"],
  .user-profile-modal-overlay input[type="email"],
  .user-profile-modal-overlay input[type="password"],
  .user-profile-modal-overlay input[type="search"],
  .user-profile-modal-overlay textarea {
    cursor: text;
  }

  /* Scrollbar Styles */
  .user-profile-modal-content::-webkit-scrollbar {
    width: 8px;
  }
  .user-profile-modal-content::-webkit-scrollbar-track {
    background: ${te.surface};
    border-radius: 4px;
  }
  .user-profile-modal-content::-webkit-scrollbar-thumb {
    background: ${te.primary};
    border-radius: 4px;
    border: 2px solid ${te.surface};
  }
  .user-profile-modal-content::-webkit-scrollbar-thumb:hover {
    background: ${te.primaryHover};
  }

  /* Matrix Animation Keyframes */
  @keyframes user-matrix-flicker {
    0%, 100% { opacity: 0.1; }
    50% { opacity: 0.4; }
  }

  @keyframes user-matrix-fall {
    0% { transform: translateY(-100%); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateY(100%); opacity: 0; }
  }

  @keyframes user-matrix-glow {
    0%, 100% { filter: brightness(1) drop-shadow(0 0 2px ${te.primary}); }
    50% { filter: brightness(1.3) drop-shadow(0 0 8px ${te.primary}); }
  }

  .user-matrix-container .user-matrix-cell {
    background: ${te.primary};
    opacity: 0.18;
    border-radius: 2px;
    transition: all 0.2s ease;
    animation: user-matrix-flicker 2s ease-in-out infinite;
    animation-delay: calc(var(--cell-index) * 0.02s);
  }

  .user-matrix-container .user-matrix-cell:nth-child(3n) {
    opacity: 0.32;
    animation-duration: 1.5s;
    box-shadow: 0 0 3px ${te.primary};
  }
  .user-matrix-container .user-matrix-cell:nth-child(5n) {
    opacity: 0.42;
    animation-duration: 1.8s;
    box-shadow: 0 0 4px ${te.primary};
  }
  .user-matrix-container .user-matrix-cell:nth-child(7n+1) {
    opacity: 0.25;
    animation-duration: 2.2s;
  }
  .user-matrix-container .user-matrix-cell:nth-child(11n) {
    opacity: 0.55;
    box-shadow: 0 0 6px ${te.primary}, 0 0 10px ${te.primary};
    animation-duration: 1.2s;
  }

  .user-matrix-container .user-matrix-rain {
    position: absolute;
    width: 2px;
    background: linear-gradient(to bottom, transparent, ${te.primary}, transparent);
    pointer-events: none;
    animation: user-matrix-fall 2s linear infinite;
  }

  .user-matrix-container .user-avatar-wrapper {
    animation: user-matrix-glow 3s ease-in-out infinite;
  }
`;if(typeof document<"u"&&!document.getElementById("user-profile-scrollbar-styles")){const s=document.createElement("style");s.id="user-profile-scrollbar-styles",s.textContent=JA,document.head.appendChild(s)}const e3={hidden:{opacity:0},visible:{opacity:1}},t3={hidden:{opacity:0,scale:.95,y:20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:25,stiffness:300}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.15}}},n3={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}},Ar={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},s3=({children:s,enabled:n=!0})=>c.jsxs("div",{className:"user-matrix-container",style:{position:"relative",background:te.bg,borderRadius:"16px",overflow:"hidden",marginBottom:"20px",border:`1px solid ${te.border}`},children:[n&&c.jsx("div",{style:{position:"absolute",inset:0,display:"grid",gridTemplateColumns:"repeat(15, 1fr)",gridTemplateRows:"repeat(12, 1fr)",gap:"3px",padding:"12px",pointerEvents:"none",zIndex:0},children:Array.from({length:180}).map((f,m)=>c.jsx("div",{className:"user-matrix-cell",style:{"--cell-index":m}},m))}),n&&Array.from({length:8}).map((f,m)=>c.jsx("div",{className:"user-matrix-rain",style:{left:`${10+m*80/8}%`,height:"40px",animationDelay:`${m*.15}s`}},`rain-${m}`)),c.jsx("div",{style:{position:"relative",zIndex:1,padding:"24px"},children:s})]}),i3=({isOpen:s,onClose:n,userId:i,onSendMessage:r,onBlockUser:l,onUnblockUser:d,fancyAnimations:f=!0})=>{const[m,p]=_.useState(null),[y,b]=_.useState(!1),[v,w]=_.useState(null),[E,C]=_.useState(!1),[A,D]=_.useState(!1),[P,Q]=_.useState(!1),{isUserOnline:V,getUserLastSeen:J,usersYouBlocked:G,blockedByUsers:ee}=Cn();_.useEffect(()=>{s&&i&&(se(),W())},[s,i]),_.useEffect(()=>{if(!s||!i)return;const Ee=G.has(i),I=ee.has(i);Ee!==E&&C(Ee),I!==A&&D(I)},[s,i,G,ee]);const se=async()=>{b(!0),w(null);try{const Ee=await Wt.getUserProfile(i);p(Ee)}catch(Ee){console.error("[UserProfileViewer] Error loading profile:",Ee),w(Ee.response?.data?.message||"Failed to load user profile")}finally{b(!1)}},W=async()=>{Q(!0);try{const Ee=await Wt.getMutualBlockStatus(i);C(Ee.iBlockedThem),D(Ee.theyBlockedMe)}catch(Ee){console.error("[UserProfileViewer] Error checking block status:",Ee),C(!1),D(!1)}finally{Q(!1)}},le=()=>{r&&(r(i),n())},ue=async()=>{if(!l)return;await ns({title:"Block User",message:`Are you sure you want to block ${m?.username||"this user"}? They won't be able to message you.`,confirmText:"Block",cancelText:"Cancel",variant:"danger"})&&(l(i),C(!0))},Ce=async()=>{if(!d)return;await ns({title:"Unblock User",message:`Are you sure you want to unblock ${m?.username||"this user"}? They will be able to message you again.`,confirmText:"Unblock",cancelText:"Cancel",variant:"success",icon:"success"})&&(d(i),C(!1))},Re=E||A,Ve=m?V(m.id):!1,Qe=m?J(m.id):void 0;return c.jsx(sn,{children:s&&c.jsx(X.div,{className:"user-profile-modal-overlay",variants:e3,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.2},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:n,children:c.jsxs(X.div,{variants:t3,initial:"hidden",animate:"visible",exit:"exit",style:{background:te.surface,borderRadius:"16px",border:`1px solid ${te.border}`,maxWidth:"420px",width:"100%",maxHeight:"85vh",display:"flex",flexDirection:"column",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",overflow:"hidden"},onClick:Ee=>Ee.stopPropagation(),children:[c.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${te.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",background:te.bg},children:[c.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:700,color:te.text,letterSpacing:"-0.02em"},children:"User Profile"}),c.jsx(X.button,{whileHover:{scale:1.1,backgroundColor:te.surfaceHover},whileTap:{scale:.9},onClick:n,"aria-label":"Close",style:{background:"transparent",border:"none",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",color:te.textMuted},children:c.jsx(It,{size:20,style:{flexShrink:0,minWidth:20}})})]}),c.jsxs("div",{className:"user-profile-modal-content",style:{overflowY:"auto",flex:1,padding:"24px"},children:[y&&c.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:te.textMuted},children:[c.jsx(X.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{width:"40px",height:"40px",border:`3px solid ${te.border}`,borderTopColor:te.primary,borderRadius:"50%",margin:"0 auto 16px"}}),"Loading profile..."]}),v&&c.jsx("div",{style:{textAlign:"center",padding:"60px 20px",color:te.danger,backgroundColor:te.dangerMuted,borderRadius:"12px"},children:v}),!y&&!v&&m&&c.jsxs(X.div,{variants:n3,initial:"hidden",animate:"visible",children:[c.jsx(s3,{enabled:f,children:c.jsxs(X.div,{variants:Ar,style:{textAlign:"center"},children:[c.jsxs("div",{className:"user-avatar-wrapper",style:{position:"relative",display:"inline-block",marginBottom:"16px"},children:[m.avatar?c.jsx("img",{src:m.avatar,alt:m.username,style:{width:"120px",height:"120px",borderRadius:"50%",objectFit:"cover",border:`3px solid ${Ve?te.primary:te.border}`,boxShadow:Ve?`0 0 30px ${te.primaryMuted}`:"none"}}):c.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:`linear-gradient(135deg, ${te.primary} 0%, ${te.primaryHover} 100%)`,color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"48px",fontWeight:700,boxShadow:`0 0 30px ${te.primaryMuted}`},children:m.username.charAt(0).toUpperCase()}),c.jsx("div",{style:{position:"absolute",bottom:"6px",right:"6px",width:"24px",height:"24px",borderRadius:"50%",background:Ve?te.primary:te.textMuted,border:`3px solid ${te.bg}`,boxShadow:Ve?`0 0 12px ${te.primary}`:"none"}})]}),c.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"24px",fontWeight:700,color:te.text,letterSpacing:"-0.02em",textShadow:`0 0 20px ${te.primaryMuted}`},children:m.username}),c.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"6px 14px",borderRadius:"20px",background:Ve?te.primaryMuted:"rgba(15, 15, 15, 0.8)",border:`1px solid ${Ve?`${te.primary}30`:te.border}`,backdropFilter:"blur(4px)"},children:[c.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:Ve?te.primary:te.textMuted,boxShadow:Ve?`0 0 8px ${te.primary}`:"none"}}),c.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:Ve?te.primary:te.textMuted},children:Ve?"Online":Qe?`Last seen ${T1(Qe)}`:"Offline"})]})]})}),c.jsxs(X.div,{variants:Ar,style:{padding:"16px",background:te.surfaceElevated,borderRadius:"12px",marginBottom:"16px",border:`1px solid ${te.border}`},children:[c.jsx("h4",{style:{margin:"0 0 10px 0",fontSize:"12px",fontWeight:700,color:te.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"About"}),c.jsx("p",{style:{margin:0,fontSize:"14px",color:m.bio?te.textSecondary:te.textMuted,lineHeight:"1.6",fontStyle:m.bio?"normal":"italic"},children:m.bio||"No bio set"})]}),m.email&&c.jsxs(X.div,{variants:Ar,style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",background:te.surfaceElevated,borderRadius:"12px",marginBottom:"12px",border:`1px solid ${te.border}`},children:[c.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:te.primaryMuted,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(fw,{size:18,color:te.primary,style:{flexShrink:0,minWidth:18}})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"12px",color:te.textMuted,marginBottom:"2px"},children:"Email"}),c.jsx("div",{style:{fontSize:"14px",color:te.text,fontWeight:500},children:m.email})]})]}),m.createdAt&&c.jsxs(X.div,{variants:Ar,style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",background:te.surfaceElevated,borderRadius:"12px",marginBottom:"16px",border:`1px solid ${te.border}`},children:[c.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:te.primaryMuted,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(vv,{size:18,color:te.primary,style:{flexShrink:0,minWidth:18}})}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"12px",color:te.textMuted,marginBottom:"2px"},children:"Member Since"}),c.jsx("div",{style:{fontSize:"14px",color:te.text,fontWeight:500},children:new Date(m.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),!P&&(A||E)&&c.jsxs(X.div,{variants:Ar,style:{padding:"14px 16px",background:te.dangerMuted,borderRadius:"12px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px",border:`1px solid ${te.danger}30`},children:[c.jsx(Ii,{size:20,color:te.danger,style:{flexShrink:0,minWidth:20}}),c.jsx("span",{style:{fontSize:"14px",color:te.danger,fontWeight:500},children:A&&E?"You have blocked each other":A?"This user has blocked you":"You have blocked this user"})]}),c.jsxs(X.div,{variants:Ar,style:{display:"flex",gap:"12px",flexDirection:"column"},children:[r&&c.jsxs(X.button,{whileHover:Re?{}:{scale:1.02},whileTap:Re?{}:{scale:.98},onClick:le,disabled:Re||P,style:{width:"100%",padding:"14px 20px",background:Re?te.surfaceElevated:te.primary,color:Re?te.textMuted:"white",border:Re?`1px solid ${te.border}`:"none",borderRadius:"12px",cursor:Re?"not-allowed":"pointer",fontSize:"15px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",opacity:Re?.6:1,boxShadow:Re?"none":`0 0 20px ${te.primaryMuted}`},children:[c.jsx(iu,{size:20,style:{flexShrink:0,minWidth:20}}),Re?"Cannot Message":"Send Message"]}),E?d&&c.jsxs(X.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:Ce,style:{width:"100%",padding:"14px 20px",background:te.primaryMuted,color:te.primary,border:`1px solid ${te.primary}30`,borderRadius:"12px",cursor:"pointer",fontSize:"15px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[c.jsx(hw,{size:20,style:{flexShrink:0,minWidth:20}}),"Unblock User"]}):l&&c.jsxs(X.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:ue,style:{width:"100%",padding:"14px 20px",background:te.dangerMuted,color:te.danger,border:`1px solid ${te.danger}30`,borderRadius:"12px",cursor:"pointer",fontSize:"15px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[c.jsx(hu,{size:20,style:{flexShrink:0,minWidth:20}}),"Block User"]})]})]})]})]})})})},L={bg:"#030303",surface:"#080808",surfaceElevated:"#0c0c0c",surfaceHover:"#121212",surfaceActive:"#181818",border:"#1a1a1a",borderLight:"#222222",primary:"#10b981",primaryHover:"#0d9668",primaryMuted:"rgba(16, 185, 129, 0.12)",primaryGlow:"rgba(16, 185, 129, 0.25)",danger:"#ef4444",dangerMuted:"rgba(239, 68, 68, 0.12)",warning:"#f59e0b",warningMuted:"rgba(245, 158, 11, 0.12)",info:"#3b82f6",infoMuted:"rgba(59, 130, 246, 0.12)",text:"#fafafa",textSecondary:"#a1a1aa",textMuted:"#71717a",online:"#22c55e",offline:"#71717a"},a3=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M5.5 3.21V20.8l4.75-4.73 2.99 6.73L15.5 21.6l-3-6.7h6z'/%3E%3Cpath fill='%23064e3b' d='M6.5 5.61v11.68l3.38-3.37.37-.37.48 1.07 1.93 4.35 1.07-.47L11.8 14.1l-.48-1.07H16z'/%3E%3C/svg%3E") 4 2, default`,r3=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M9 2.5a2.5 2.5 0 0 1 5 0v7.996l3.904-.74a2.095 2.095 0 0 1 2.537 2.466L19.5 17.5a6 6 0 0 1-6 6H11a7 7 0 0 1-7-7V9a2 2 0 1 1 4 0v3.5h1z'/%3E%3Cpath fill='%23064e3b' d='M10 2.5V14h-.5a1.5 1.5 0 0 1-1.5-1.5V9a1 1 0 1 0-2 0v7.5a6 6 0 0 0 6 6h2.5a5 5 0 0 0 5-5l.941-5.278a1.095 1.095 0 0 0-1.324-1.288l-4.117.78V2.5a1.5 1.5 0 0 0-3 0z'/%3E%3C/svg%3E") 7 3, pointer`,hv="group-profile-modal-styles";if(typeof document<"u"&&!document.getElementById(hv)){const s=document.createElement("style");s.id=hv,s.textContent=`
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

    .gpm-overlay {
      cursor: ${a3};
    }
    .gpm-overlay * {
      cursor: inherit;
    }
    .gpm-overlay button,
    .gpm-overlay a,
    .gpm-overlay [role="button"],
    .gpm-overlay .gpm-clickable {
      cursor: ${r3} !important;
    }
    .gpm-overlay input[type="text"],
    .gpm-overlay input[type="search"],
    .gpm-overlay textarea {
      cursor: text !important;
    }

    .gpm-scrollable::-webkit-scrollbar {
      width: 6px;
    }
    .gpm-scrollable::-webkit-scrollbar-track {
      background: transparent;
    }
    .gpm-scrollable::-webkit-scrollbar-thumb {
      background: ${L.primary};
      border-radius: 3px;
    }
    .gpm-scrollable::-webkit-scrollbar-thumb:hover {
      background: ${L.primaryHover};
    }

    .gpm-scrollable {
      scrollbar-width: thin;
      scrollbar-color: ${L.primary} transparent;
    }

    @keyframes gpm-pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    @keyframes gpm-glow {
      0%, 100% { box-shadow: 0 0 20px ${L.primaryGlow}; }
      50% { box-shadow: 0 0 40px ${L.primaryGlow}; }
    }

    @keyframes matrix-fall {
      0% { transform: translateY(-100%); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(100%); opacity: 0; }
    }

    @keyframes matrix-flicker {
      0%, 100% { opacity: 0.1; }
      50% { opacity: 0.4; }
    }

    @keyframes matrix-glow-pulse {
      0%, 100% { filter: brightness(1) drop-shadow(0 0 2px ${L.primary}); }
      50% { filter: brightness(1.5) drop-shadow(0 0 6px ${L.primary}); }
    }

    .matrix-grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      grid-template-rows: repeat(8, 1fr);
      gap: 2px;
      position: absolute;
      inset: 0;
      padding: 8px;
      overflow: hidden;
    }

    .matrix-cell {
      background: ${L.primary};
      opacity: 0.18;
      border-radius: 2px;
      transition: all 0.2s ease;
      animation: matrix-flicker 2s ease-in-out infinite;
      animation-delay: calc(var(--cell-index) * 0.02s);
    }

    .matrix-cell:nth-child(3n) {
      opacity: 0.32;
      animation-duration: 1.5s;
      box-shadow: 0 0 3px ${L.primary};
    }

    .matrix-cell:nth-child(5n) {
      opacity: 0.42;
      animation-duration: 1.8s;
      box-shadow: 0 0 4px ${L.primary};
    }

    .matrix-cell:nth-child(7n+1) {
      opacity: 0.25;
      animation-duration: 2.2s;
    }

    .matrix-cell:nth-child(11n) {
      opacity: 0.55;
      box-shadow: 0 0 6px ${L.primary}, 0 0 10px ${L.primary};
      animation-duration: 1.2s;
    }

    .matrix-rain {
      position: absolute;
      width: 2px;
      background: linear-gradient(to bottom, transparent, ${L.primary}, transparent);
      pointer-events: none;
      animation: matrix-fall 2s linear infinite;
    }

    .avatar-wrapper {
      animation: matrix-glow-pulse 3s ease-in-out infinite;
    }
  `,document.head.appendChild(s)}const o3={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.15,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.1,ease:"easeIn"}}},l3={hidden:{opacity:0,scale:.98,y:10},visible:{opacity:1,scale:1,y:0,transition:{duration:.15,ease:"easeOut"}},exit:{opacity:0,scale:.98,y:5,transition:{duration:.1,ease:"easeIn"}}},nu={hidden:{opacity:1},visible:{opacity:1}},Sa={hidden:{opacity:1,x:0},visible:{opacity:1,x:0}},_h={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.1,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.08,ease:"easeIn"}}},c3=({type:s,message:n,onDismiss:i})=>{if(_.useEffect(()=>{const f=setTimeout(i,4e3);return()=>clearTimeout(f)},[i]),!s)return null;const r=s==="success"?L.primaryMuted:s==="error"?L.dangerMuted:L.infoMuted,l=s==="success"?L.primary:s==="error"?L.danger:L.info,d=s==="success"?pw:s==="error"?Da:Lr;return c.jsxs(X.div,{initial:{opacity:0,y:-5,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-5,height:0},transition:{duration:.1,ease:"easeOut"},style:{background:r,borderRadius:8,padding:"10px 14px",marginBottom:12,display:"flex",alignItems:"center",gap:10,border:`1px solid ${l}20`},children:[c.jsx(d,{size:16,color:l,style:{flexShrink:0,minWidth:16}}),c.jsx("span",{style:{flex:1,fontSize:13,color:l,fontWeight:500},children:n}),c.jsx("button",{onClick:i,style:{background:"none",border:"none",padding:4,display:"flex",color:l,opacity:.7},className:"gpm-clickable",children:c.jsx(It,{size:14,style:{flexShrink:0,minWidth:14}})})]})},u3=({privacy:s,size:n="md"})=>{const i=s==="public",r=n==="sm"?12:14,l=n==="sm"?"4px 8px":"6px 12px",d=n==="sm"?11:12;return c.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6,padding:l,borderRadius:20,background:i?L.primaryMuted:L.warningMuted,border:`1px solid ${i?L.primary:L.warning}30`},children:[i?c.jsx(xv,{size:r,color:L.primary,style:{flexShrink:0,minWidth:r}}):c.jsx(im,{size:r,color:L.warning,style:{flexShrink:0,minWidth:r}}),c.jsx("span",{style:{fontSize:d,fontWeight:600,color:i?L.primary:L.warning,textTransform:"uppercase",letterSpacing:"0.5px"},children:i?"Public":"Private"})]})},d3=({role:s})=>{const n={admin:{icon:bw,color:"#fbbf24",bg:"rgba(251, 191, 36, 0.15)",label:"Admin"},moderator:{icon:Or,color:"#60a5fa",bg:"rgba(96, 165, 250, 0.15)",label:"Mod"},member:{icon:mu,color:L.textMuted,bg:L.surfaceHover,label:"Member"}}[s]||{icon:mu,color:L.textMuted,bg:L.surfaceHover,label:s},i=n.icon;return c.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"3px 8px",borderRadius:4,background:n.bg,border:`1px solid ${n.color}20`},children:[c.jsx(i,{size:11,color:n.color,style:{flexShrink:0,minWidth:11}}),c.jsx("span",{style:{fontSize:10,fontWeight:600,color:n.color,textTransform:"uppercase"},children:n.label})]})},f3=({children:s,enabled:n=!0})=>c.jsxs("div",{className:"matrix-container",style:{position:"relative",margin:"-20px -20px 24px -20px",padding:"28px 20px",borderRadius:"0 0 16px 16px",background:`linear-gradient(180deg, ${L.bg} 0%, ${L.surface} 100%)`,overflow:"hidden"},children:[n&&c.jsx("div",{className:"matrix-grid",style:{position:"absolute",inset:0,display:"grid",gridTemplateColumns:"repeat(15, 1fr)",gridTemplateRows:"repeat(12, 1fr)",gap:3,padding:10,opacity:.8},children:Array.from({length:180}).map((l,d)=>c.jsx("div",{className:"matrix-cell",style:{"--cell-index":d}},d))}),n&&Array.from({length:12}).map((l,d)=>c.jsx("div",{className:"matrix-rain",style:{left:`${5+d*8}%`,height:"40%",animationDelay:`${d*.15}s`}},`rain-${d}`)),c.jsx("div",{style:{position:"relative",zIndex:2,textAlign:"center"},children:s}),c.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"60%",background:`radial-gradient(ellipse at 50% 0%, ${L.primary}15 0%, transparent 70%)`,pointerEvents:"none"}}),c.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:40,background:`linear-gradient(to top, ${L.surface}, transparent)`,pointerEvents:"none"}}),c.jsx("div",{style:{position:"absolute",inset:0,borderRadius:"0 0 16px 16px",border:`1px solid ${L.primary}20`,pointerEvents:"none"}})]}),h3=({member:s,isOnline:n,lastSeen:i,isCurrentUser:r,canManage:l,onViewProfile:d,onKick:f,onBan:m,onManagePermissions:p})=>{const[y,b]=_.useState(!1);return c.jsxs(X.div,{variants:Sa,style:{display:"flex",alignItems:"center",padding:"12px 14px",background:L.surfaceElevated,borderRadius:10,border:`1px solid ${L.border}`,transition:"background 0.1s, border-color 0.1s",position:"relative"},whileHover:{background:L.surfaceHover,borderColor:L.borderLight,transition:{duration:.1}},onHoverStart:()=>b(!0),onHoverEnd:()=>b(!1),children:[c.jsxs("div",{className:"gpm-clickable",onClick:d,style:{position:"relative",marginRight:12},children:[s.user.avatar?c.jsx("img",{src:et(s.user.avatar),alt:s.user.username,style:{width:44,height:44,borderRadius:"50%",objectFit:"cover",border:`2px solid ${n?L.online:L.border}`}}):c.jsx("div",{style:{width:44,height:44,borderRadius:"50%",background:`linear-gradient(135deg, ${L.primary}40, ${L.primary}20)`,display:"flex",alignItems:"center",justifyContent:"center",border:`2px solid ${n?L.online:L.border}`,color:L.primary,fontWeight:600,fontSize:16},children:Fn(s.user.username)}),c.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:12,height:12,borderRadius:"50%",background:n?L.online:L.offline,border:`2px solid ${L.surfaceElevated}`}})]}),c.jsxs("div",{style:{flex:1,minWidth:0},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:2},children:[c.jsxs("span",{className:"gpm-clickable",onClick:d,style:{fontSize:14,fontWeight:600,color:L.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[s.user.username,r&&c.jsx("span",{style:{color:L.textMuted,fontWeight:400},children:" (you)"})]}),c.jsx(d3,{role:s.role})]}),c.jsx("div",{style:{fontSize:12,color:L.textMuted},children:n?c.jsx("span",{style:{color:L.online},children:" Online"}):i?`Last seen ${T1(i)}`:"Offline"})]}),c.jsx(sn,{children:y&&l&&!r&&s.role!=="admin"&&c.jsxs(X.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.08},style:{display:"flex",gap:6},children:[p&&c.jsx("button",{onClick:p,className:"gpm-clickable",title:"Manage Permissions",style:{width:32,height:32,borderRadius:6,background:L.infoMuted,border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:L.info,transition:"all 0.15s"},children:c.jsx(gw,{size:16,strokeWidth:2.5,style:{flexShrink:0,minWidth:16}})}),f&&c.jsx("button",{onClick:f,className:"gpm-clickable",title:"Remove Member",style:{width:32,height:32,borderRadius:6,background:L.warningMuted,border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:L.warning,transition:"all 0.15s"},children:c.jsx(yw,{size:16,strokeWidth:2.5,style:{flexShrink:0,minWidth:16}})}),m&&c.jsx("button",{onClick:m,className:"gpm-clickable",title:"Ban Member",style:{width:32,height:32,borderRadius:6,background:L.dangerMuted,border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:L.danger,transition:"all 0.15s"},children:c.jsx(Ii,{size:16,strokeWidth:2.5,style:{flexShrink:0,minWidth:16}})})]})})]})},va=({icon:s,label:n,onClick:i,variant:r="default",disabled:l,loading:d})=>{const f=r==="danger"?L.dangerMuted:r==="primary"?L.primaryMuted:L.surfaceHover,m=r==="danger"?L.danger:r==="primary"?L.primary:L.text,p=r==="danger"?L.danger:r==="primary"?L.primary:L.surfaceActive,y=r==="danger"||r==="primary"?"#fff":L.text;return c.jsxs(X.button,{onClick:i,disabled:l||d,className:"gpm-clickable",style:{display:"flex",alignItems:"center",gap:10,width:"100%",padding:"12px 16px",background:f,border:`1px solid ${m}20`,borderRadius:10,color:m,fontSize:14,fontWeight:500,opacity:l?.5:1,transition:"background 0.1s, color 0.1s"},whileHover:l?{}:{background:p,color:y,transition:{duration:.1}},whileTap:l?{}:{scale:.98,transition:{duration:.05}},children:[d?c.jsx(zt,{size:18,className:"animate-spin"}):s,c.jsx("span",{children:n}),c.jsx(cm,{size:16,style:{marginLeft:"auto",opacity:.5,flexShrink:0,minWidth:16}})]})},m3=({isOpen:s,onClose:n,chat:i,currentUserId:r,onEditGroup:l,onDeleteGroup:d,onLeaveGroup:f,onKickMember:m,onViewUserProfile:p,onBanMember:y,onUnbanMember:b,onUpdatePrivacy:v,fancyAnimations:w=!0})=>{const[E,C]=_.useState(null),[A,D]=_.useState(!1),[P,Q]=_.useState("main"),[V,J]=_.useState(""),[G,ee]=_.useState(""),[se,W]=_.useState([]),[le,ue]=_.useState(!1),[Ce,Re]=_.useState(!1),[Ve,Qe]=_.useState(!1),[Ee,I]=_.useState([]),[Z,ne]=_.useState(!1),[ge,je]=_.useState({type:null,message:""}),[Ue,Se]=_.useState(!1),[ye,Ye]=_.useState(null),[At,rn]=_.useState(!1),{isUserOnline:Xn,getUserLastSeen:as,loadChats:Ut,setInitialPresenceStates:Tn}=Cn(),{canAddUsers:En,canManageChatInfo:Wn,canManageBans:Mn,canManageUsers:kt}=A1(i?.id),ot=E?.members.find(K=>K.userId===r)?.role==="admin",Pt=E?.members.some(K=>K.userId===r),An=E?.members.filter(K=>Xn(K.userId)).length||0,rs=E?.members.filter(K=>{if(!V.trim())return!0;const we=V.toLowerCase();return K.user.username.toLowerCase().includes(we)||K.user.email?.toLowerCase().includes(we)})||[],lt=(K,we)=>{je({type:K,message:we})},kn=async()=>{D(!0);try{const K=await Je.getChatProfile(i.id);C(K);const we=K.members?.map(Ie=>Ie.userId)||[];if(we.length>0)try{const Ie=await Js.getPresenceStates(we);Object.keys(Ie).length>0&&Tn(Ie)}catch(Ie){console.error("Failed to fetch presence:",Ie)}}catch(K){lt("error",K.response?.data?.message||"Failed to load profile")}finally{D(!1)}},Xr=async()=>{if(!(!i?.id||!ot&&!Mn)){ne(!0);try{const K=await Je.getBannedUsers(i.id);I(K)}catch{lt("error","Failed to load banned users")}finally{ne(!1)}}};_.useEffect(()=>{s&&i.id&&(Qe(!1),Q("main"),kn())},[s,i.id]),_.useEffect(()=>{E&&i&&s&&(i.name!==E.name||i.description!==E.description||i.avatar!==E.avatar)&&C(we=>we?{...we,name:i.name||we.name,description:i.description??we.description,avatar:i.avatar??we.avatar}:null)},[i.name,i.description,i.avatar,s]),_.useEffect(()=>{P==="banned"&&(ot||Mn)&&Xr()},[P,ot,Mn]);const Wr=async()=>{if(!(!i||!i.type)){Re(!0);try{await Je.joinChat(i.id,i.type),lt("success",`Successfully joined the ${i.type}!`),await Ut(),await kn()}catch(K){mC(K)?(Qe(!0),lt("error",pC(K))):lt("error",Bt(K,"Failed to join"))}finally{Re(!1)}}},Ht=async K=>{if(!m)return;const we=E?.members.find(He=>He.userId===K);await ns({title:"Remove Member",message:`Remove ${we?.user.username||"this member"} from the ${i.type}?`,confirmText:"Remove",cancelText:"Cancel",variant:"danger"})&&(C(He=>He?{...He,members:He.members.filter(pt=>pt.userId!==K)}:null),lt("success",`${we?.user.username} has been removed`),m(K))},Ua=async K=>{if(!y)return;const we=E?.members.find(He=>He.userId===K);await ns({title:"Ban Member",message:`Ban ${we?.user.username||"this member"}? They won't be able to rejoin.`,confirmText:"Ban",cancelText:"Cancel",variant:"danger"})&&(C(He=>He?{...He,members:He.members.filter(pt=>pt.userId!==K)}:null),lt("success",`${we?.user.username} has been banned`),await y(K))},Oa=async(K,we)=>{if(!b)return;if(await ns({title:"Unban User",message:`Unban ${we}? They will be able to rejoin.`,confirmText:"Unban",cancelText:"Cancel",variant:"info"}))try{await b(K),I(He=>He.filter(pt=>pt.userId!==K)),lt("success",`${we} has been unbanned`)}catch{lt("error","Failed to unban user")}},os=async()=>{if(!v||!E)return;const K=E.privacy==="public"?"private":"public";if(await ns({title:`Make ${i.type} ${K}?`,message:K==="private"?"Only invited members will be able to join.":"Anyone can find and join this chat.",confirmText:"Confirm",cancelText:"Cancel",variant:"info"})){rn(!0);try{await v(K),C(Ie=>Ie?{...Ie,privacy:K}:null)}catch{lt("error","Failed to update privacy")}finally{rn(!1)}}},si=async()=>{if(!f)return;const K=i.type==="channel";await ns({title:`Leave ${K?"Channel":"Group"}?`,message:`Are you sure you want to leave "${E?.name||i.name}"? You can rejoin later if it's public.`,confirmText:"Leave",cancelText:"Cancel",variant:"danger"})&&f()},Es=async()=>{if(!d)return;const K=i.type==="channel";await ns({title:`Delete ${K?"Channel":"Group"}?`,message:`Are you sure you want to permanently delete "${E?.name||i.name}"? This action cannot be undone and all messages will be lost.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger"})&&d()};_.useEffect(()=>{if(!G.trim()){W([]),ue(!1);return}ue(!0);const K=setTimeout(async()=>{try{const we=await Wt.searchUsers(G.trim()),Ie=new Set(E?.members?.map(He=>He.userId)||[]);W(we.filter(He=>!Ie.has(He.id)))}catch(we){console.error("Search failed:",we),W([])}finally{ue(!1)}},300);return()=>clearTimeout(K)},[G,E?.members]);const La=async K=>{try{i.type==="group"?await Je.addMemberToGroup(i.id,K):await Je.addMemberToChannel(i.id,K),lt("success","Member added successfully"),ee(""),W([]),await kn()}catch(we){lt("error",Bt(we,"Failed to add member"))}},on=i.type==="channel";return c.jsxs(c.Fragment,{children:[c.jsx(sn,{children:s&&c.jsx(X.div,{className:"gpm-overlay",variants:o3,initial:"hidden",animate:"visible",exit:"exit",onClick:n,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:20},children:c.jsxs(X.div,{variants:l3,onClick:K=>K.stopPropagation(),style:{width:"100%",maxWidth:520,maxHeight:"85vh",background:L.surface,borderRadius:16,border:`1px solid ${L.border}`,boxShadow:`0 0 0 1px ${L.border}, 0 25px 80px -20px rgba(0, 0, 0, 0.8)`,display:"flex",flexDirection:"column",overflow:"hidden"},children:[c.jsxs("div",{style:{padding:"16px 20px",borderBottom:`1px solid ${L.border}`,display:"flex",alignItems:"center",gap:12,background:L.bg},children:[P!=="main"&&c.jsx(X.button,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1},whileHover:{backgroundColor:L.surfaceActive,transition:{duration:.1}},whileTap:{scale:.95,transition:{duration:.05}},onClick:()=>Q("main"),className:"gpm-clickable",style:{width:32,height:32,borderRadius:8,background:L.surfaceHover,border:`1px solid ${L.border}`,display:"flex",alignItems:"center",justifyContent:"center",color:L.text},children:c.jsx(cm,{size:18,style:{transform:"rotate(180deg)",flexShrink:0,minWidth:18}})}),c.jsx("div",{style:{flex:1},children:c.jsxs("h2",{style:{margin:0,fontSize:16,fontWeight:600,color:L.text,letterSpacing:"-0.01em"},children:[P==="main"&&`${on?"Channel":"Group"} Profile`,P==="members"&&"Members",P==="banned"&&"Banned Users",P==="addMember"&&"Add Member"]})}),c.jsx(X.button,{whileHover:{backgroundColor:L.surfaceActive,transition:{duration:.1}},whileTap:{scale:.95,transition:{duration:.05}},onClick:n,className:"gpm-clickable",style:{width:32,height:32,borderRadius:8,background:L.surfaceHover,border:`1px solid ${L.border}`,display:"flex",alignItems:"center",justifyContent:"center",color:L.textMuted,transition:"background 0.1s"},children:c.jsx(It,{size:16,style:{flexShrink:0,minWidth:16}})})]}),c.jsxs("div",{className:"gpm-scrollable",style:{flex:1,overflowY:"auto",padding:20},children:[c.jsx(sn,{children:ge.type&&c.jsx(c3,{type:ge.type,message:ge.message,onDismiss:()=>je({type:null,message:""})})}),c.jsx(sn,{mode:"wait",children:A?c.jsxs(X.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:60,gap:16},children:[c.jsx(X.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:c.jsx(zt,{size:32,color:L.primary})}),c.jsx("span",{style:{color:L.textMuted,fontSize:14},children:"Loading..."})]},"loading"):P==="main"?c.jsxs(X.div,{variants:nu,initial:"hidden",animate:"visible",exit:"hidden",children:[c.jsx(X.div,{variants:Sa,children:c.jsxs(f3,{enabled:w,children:[c.jsx("div",{style:{width:100,height:100,borderRadius:"50%",margin:"0 auto 16px",background:E?.avatar?"none":`linear-gradient(135deg, ${L.primary}60, ${L.primary}30)`,display:"flex",alignItems:"center",justifyContent:"center",border:`3px solid ${L.primary}50`,overflow:"hidden",boxShadow:`0 0 25px ${L.primaryGlow}`},children:E?.avatar?c.jsx("img",{src:et(E.avatar),alt:E.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):on?c.jsx(_s,{size:42,color:L.primary,style:{flexShrink:0,minWidth:42}}):c.jsx(Lt,{size:42,color:L.primary,style:{flexShrink:0,minWidth:42}})}),c.jsx("h3",{style:{margin:"0 0 8px",fontSize:22,fontWeight:700,color:L.text,letterSpacing:"-0.02em"},children:E?.name||i.name}),c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,marginBottom:8},children:[c.jsx(u3,{privacy:E?.privacy||"private"}),c.jsxs("span",{style:{fontSize:13,color:L.textSecondary,display:"flex",alignItems:"center",gap:6},children:[c.jsx(Lt,{size:14,style:{flexShrink:0,minWidth:14}}),E?.members.length||0," members",c.jsxs("span",{style:{color:L.online},children:[" ",An," online"]})]})]}),E?.description&&c.jsx("p",{style:{margin:"12px 0 0",fontSize:14,color:L.textSecondary,lineHeight:1.5,maxWidth:360,marginLeft:"auto",marginRight:"auto"},children:E.description}),E?.createdAt&&c.jsxs("div",{style:{marginTop:12,fontSize:12,color:L.textMuted,display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[c.jsx(vv,{size:12,style:{flexShrink:0,minWidth:12}}),"Created ",new Date(E.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})}),!Pt&&!Ve&&c.jsx(X.div,{variants:Sa,style:{marginBottom:20},children:c.jsxs(X.button,{onClick:Wr,disabled:Ce,className:"gpm-clickable",style:{width:"100%",padding:"14px 20px",background:L.primary,border:"none",borderRadius:10,color:"#fff",fontSize:15,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:10,transition:"box-shadow 0.1s"},whileHover:{boxShadow:`0 0 20px ${L.primaryGlow}`,transition:{duration:.1}},whileTap:{scale:.98,transition:{duration:.05}},children:[Ce?c.jsx(zt,{size:18,className:"animate-spin"}):c.jsx(il,{size:18}),Ce?"Joining...":`Join ${on?"Channel":"Group"}`]})}),Ve&&c.jsxs(X.div,{variants:Sa,style:{padding:16,background:L.dangerMuted,borderRadius:10,border:`1px solid ${L.danger}30`,marginBottom:20,textAlign:"center"},children:[c.jsx(Ii,{size:24,color:L.danger,style:{marginBottom:8}}),c.jsxs("p",{style:{margin:0,fontSize:14,color:L.danger,fontWeight:500},children:["You are banned from this ",i.type]})]}),c.jsxs(X.div,{variants:Sa,style:{display:"flex",flexDirection:"column",gap:8},children:[c.jsx(va,{icon:c.jsx(Lt,{size:18,style:{flexShrink:0,minWidth:18}}),label:`View Members (${E?.members.length||0})`,onClick:()=>Q("members")}),(ot||En)&&Pt&&c.jsx(va,{icon:c.jsx(il,{size:18,style:{flexShrink:0,minWidth:18}}),label:"Add Member",onClick:()=>Q("addMember"),variant:"primary"}),(ot||Wn)&&Pt&&c.jsx(va,{icon:E?.privacy==="public"?c.jsx(im,{size:18,style:{flexShrink:0,minWidth:18}}):c.jsx(xv,{size:18,style:{flexShrink:0,minWidth:18}}),label:`Make ${E?.privacy==="public"?"Private":"Public"}`,onClick:os,loading:At}),(ot||Wn)&&Pt&&l&&c.jsx(va,{icon:c.jsx(mw,{size:18,style:{flexShrink:0,minWidth:18}}),label:`Edit ${on?"Channel":"Group"}`,onClick:l}),(ot||Mn)&&Pt&&c.jsx(va,{icon:c.jsx(Ii,{size:18,style:{flexShrink:0,minWidth:18}}),label:"Banned Users",onClick:()=>Q("banned")}),Pt&&f&&c.jsx(va,{icon:c.jsx(om,{size:18,style:{flexShrink:0,minWidth:18}}),label:`Leave ${on?"Channel":"Group"}`,onClick:si,variant:"danger"}),ot&&d&&c.jsx(va,{icon:c.jsx(lm,{size:18,style:{flexShrink:0,minWidth:18}}),label:`Delete ${on?"Channel":"Group"}`,onClick:Es,variant:"danger"})]})]},"main"):P==="members"?c.jsxs(X.div,{variants:_h,initial:"hidden",animate:"visible",exit:"exit",children:[c.jsxs("div",{style:{marginBottom:16,position:"relative"},children:[c.jsx(ol,{size:16,color:L.textMuted,style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",flexShrink:0,minWidth:16}}),c.jsx("input",{type:"text",placeholder:"Search members...",value:V,onChange:K=>J(K.target.value),style:{width:"100%",padding:"12px 14px 12px 42px",background:L.surfaceElevated,border:`1px solid ${L.border}`,borderRadius:10,color:L.text,fontSize:14,outline:"none",transition:"border-color 0.2s"},onFocus:K=>K.target.style.borderColor=L.primary,onBlur:K=>K.target.style.borderColor=L.border})]}),c.jsxs(X.div,{variants:nu,initial:"hidden",animate:"visible",style:{display:"flex",flexDirection:"column",gap:8},children:[rs.map(K=>c.jsx(h3,{member:K,isOnline:Xn(K.userId),lastSeen:as(K.userId),isCurrentUser:K.userId===r,canManage:ot||kt||Mn,onViewProfile:()=>p?.(K.userId),onKick:(ot||kt)&&K.role!=="admin"?()=>Ht(K.userId):void 0,onBan:(ot||Mn)&&K.role!=="admin"?()=>Ua(K.userId):void 0,onManagePermissions:ot&&K.role!=="admin"?()=>{Ye(K),Se(!0)}:void 0},K.userId)),rs.length===0&&c.jsx("div",{style:{textAlign:"center",padding:40,color:L.textMuted},children:"No members found"})]})]},"members"):P==="banned"?c.jsx(X.div,{variants:_h,initial:"hidden",animate:"visible",exit:"exit",children:Z?c.jsx("div",{style:{textAlign:"center",padding:40},children:c.jsx(zt,{size:24,color:L.primary,className:"animate-spin"})}):Ee.length===0?c.jsxs("div",{style:{textAlign:"center",padding:40,color:L.textMuted},children:[c.jsx(Ii,{size:32,style:{marginBottom:12,opacity:.5}}),c.jsx("p",{children:"No banned users"})]}):c.jsx(X.div,{variants:nu,initial:"hidden",animate:"visible",style:{display:"flex",flexDirection:"column",gap:8},children:Ee.map(K=>c.jsxs(X.div,{variants:Sa,style:{display:"flex",alignItems:"center",padding:"12px 14px",background:L.surfaceElevated,borderRadius:10,border:`1px solid ${L.border}`},children:[K.avatarUrl?c.jsx("img",{src:et(K.avatarUrl),alt:K.username,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover",marginRight:12}}):c.jsx("div",{style:{width:40,height:40,borderRadius:"50%",background:L.dangerMuted,display:"flex",alignItems:"center",justifyContent:"center",marginRight:12,color:L.danger,fontWeight:600},children:Fn(K.username)}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontSize:14,fontWeight:600,color:L.text},children:K.username}),c.jsxs("div",{style:{fontSize:12,color:L.textMuted},children:["Banned ",new Date(K.bannedAt).toLocaleDateString()]})]}),c.jsx("button",{onClick:()=>Oa(K.userId,K.username),className:"gpm-clickable",style:{padding:"8px 14px",background:L.primaryMuted,border:`1px solid ${L.primary}30`,borderRadius:6,color:L.primary,fontSize:13,fontWeight:500},children:"Unban"})]},K.userId))})},"banned"):P==="addMember"?c.jsxs(X.div,{variants:_h,initial:"hidden",animate:"visible",exit:"exit",children:[c.jsxs("div",{style:{marginBottom:16,position:"relative"},children:[c.jsx(ol,{size:16,color:L.textMuted,style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",flexShrink:0,minWidth:16}}),c.jsx("input",{type:"text",placeholder:"Search users to add...",value:G,onChange:K=>ee(K.target.value),style:{width:"100%",padding:"12px 14px 12px 42px",background:L.surfaceElevated,border:`1px solid ${L.border}`,borderRadius:10,color:L.text,fontSize:14,outline:"none",transition:"border-color 0.2s"},onFocus:K=>K.target.style.borderColor=L.primary,onBlur:K=>K.target.style.borderColor=L.border})]}),le?c.jsx("div",{style:{textAlign:"center",padding:40},children:c.jsx(zt,{size:24,color:L.primary,className:"animate-spin"})}):se.length>0?c.jsx(X.div,{variants:nu,initial:"hidden",animate:"visible",style:{display:"flex",flexDirection:"column",gap:8},children:se.map(K=>c.jsxs(X.div,{variants:Sa,style:{display:"flex",alignItems:"center",padding:"12px 14px",background:L.surfaceElevated,borderRadius:10,border:`1px solid ${L.border}`},children:[K.avatar?c.jsx("img",{src:et(K.avatar),alt:K.username,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover",marginRight:12}}):c.jsx("div",{style:{width:40,height:40,borderRadius:"50%",background:L.primaryMuted,display:"flex",alignItems:"center",justifyContent:"center",marginRight:12,color:L.primary,fontWeight:600},children:Fn(K.username)}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontSize:14,fontWeight:600,color:L.text},children:K.username}),K.email&&c.jsx("div",{style:{fontSize:12,color:L.textMuted},children:K.email})]}),c.jsxs("button",{onClick:()=>La(K.id),className:"gpm-clickable",style:{padding:"8px 14px",background:L.primary,border:"none",borderRadius:6,color:"#fff",fontSize:13,fontWeight:500,display:"flex",alignItems:"center",gap:6},children:[c.jsx(il,{size:14}),"Add"]})]},K.id))}):G.trim()?c.jsx("div",{style:{textAlign:"center",padding:40,color:L.textMuted},children:"No users found"}):c.jsxs("div",{style:{textAlign:"center",padding:40,color:L.textMuted},children:[c.jsx(il,{size:32,style:{marginBottom:12,opacity:.5}}),c.jsx("p",{children:"Type to search for users"})]})]},"addMember"):null})]})]})})}),Ue&&ye&&c.jsx(k1,{isOpen:Ue,onClose:()=>{Se(!1),Ye(null)},chatId:i.id,member:ye,onPermissionsChanged:async()=>{await kn()}})]})},p3=({isOpen:s,onClose:n,isDarkMode:i=!1})=>{const[r,l]=_.useState([]),[d,f]=_.useState(!1),[m,p]=_.useState(null);_.useEffect(()=>{s&&y()},[s]);const y=async()=>{f(!0);try{const v=await Wt.getBlockedUsers();l(v||[])}catch(v){console.error("Failed to load blocked users:",v)}finally{f(!1)}},b=async v=>{if(await ns({title:"Unblock User",message:`Are you sure you want to unblock ${v.username}? They will be able to message you again.`,confirmText:"Unblock",cancelText:"Cancel",variant:"success",icon:"success"})){p(v.userId);try{await Wt.unblockUser(v.userId),l(E=>E.filter(C=>C.userId!==v.userId))}catch(E){console.error("Failed to unblock user:",E)}finally{p(null)}}};return s?c.jsxs(c.Fragment,{children:[c.jsx("div",{onClick:n,style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998}}),c.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"480px",maxHeight:"80vh",backgroundColor:i?"#1e293b":"#ffffff",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:`1px solid ${i?"#334155":"#e2e8f0"}`},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[c.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"#dc2626",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(hu,{size:20,color:"white"})}),c.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:700,color:i?"#f1f5f9":"#1e293b"},children:"Blocked Users"})]}),c.jsx("button",{onClick:n,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",color:i?"#94a3b8":"#64748b",transition:"background-color 0.2s"},onMouseEnter:v=>{v.currentTarget.style.backgroundColor=i?"#334155":"#f1f5f9"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor="transparent"},children:c.jsx(It,{size:20})})]}),c.jsx("div",{style:{flex:1,overflow:"auto",padding:"16px 24px"},children:d?c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 0",color:i?"#94a3b8":"#64748b"},children:"Loading..."}):r.length===0?c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 0",color:i?"#94a3b8":"#64748b"},children:[c.jsx(hu,{size:48,style:{marginBottom:"16px",opacity:.5}}),c.jsx("p",{style:{margin:0,fontSize:"14px"},children:"You haven't blocked any users"})]}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:r.map(v=>c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:i?"#334155":"#f8fafc",borderRadius:"12px",border:`1px solid ${i?"#475569":"#e2e8f0"}`},children:[c.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"50%",overflow:"hidden",flexShrink:0},children:v.avatarUrl?c.jsx("img",{src:et(v.avatarUrl),alt:v.username,style:{width:"100%",height:"100%",objectFit:"cover"}}):c.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#6366f1",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600,fontSize:"16px"},children:Fn(v.username)})}),c.jsxs("div",{style:{flex:1,minWidth:0},children:[c.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:i?"#f1f5f9":"#1e293b",marginBottom:"2px"},children:v.username}),c.jsxs("div",{style:{fontSize:"12px",color:i?"#94a3b8":"#64748b"},children:["Blocked ",new Date(v.blockedAt).toLocaleDateString()]})]}),c.jsxs("button",{onClick:()=>b(v),disabled:m===v.userId,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",backgroundColor:i?"#475569":"#e2e8f0",color:i?"#f1f5f9":"#1e293b",border:"none",borderRadius:"8px",cursor:m===v.userId?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,opacity:m===v.userId?.6:1,transition:"all 0.2s"},onMouseEnter:w=>{m!==v.userId&&(w.currentTarget.style.backgroundColor="#10b981",w.currentTarget.style.color="white")},onMouseLeave:w=>{m!==v.userId&&(w.currentTarget.style.backgroundColor=i?"#475569":"#e2e8f0",w.currentTarget.style.color=i?"#f1f5f9":"#1e293b")},children:[c.jsx(vw,{size:14}),m===v.userId?"Unblocking...":"Unblock"]})]},v.userId))})}),c.jsx("div",{style:{padding:"16px 24px",borderTop:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",justifyContent:"flex-end"},children:c.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:i?"#334155":"#e2e8f0",color:i?"#f1f5f9":"#1e293b",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,transition:"background-color 0.2s"},onMouseEnter:v=>{v.currentTarget.style.backgroundColor=i?"#475569":"#cbd5e1"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor=i?"#334155":"#e2e8f0"},children:"Close"})})]})]}):null},g3="_dashboardContainer_1tsyi_47",y3="_togglePanelBtn_1tsyi_111",b3="_clickable_1tsyi_213",v3="_chatItem_1tsyi_215",x3="_searchResultItem_1tsyi_217",S3="_mainWrapper_1tsyi_267",w3="_sidebar_1tsyi_283",_3="_searchSection_1tsyi_307",C3="_searchContainer_1tsyi_315",j3="_searchWrapper_1tsyi_323",T3="_searchIcon_1tsyi_335",E3="_searchInput_1tsyi_363",M3="_clearSearch_1tsyi_499",A3="_searchDropdown_1tsyi_557",k3="_dropdownHeader_1tsyi_587",R3="_resultAvatar_1tsyi_689",N3="_resultInfo_1tsyi_755",D3="_resultName_1tsyi_769",z3="_resultUsername_1tsyi_791",B3="_resultType_1tsyi_811",U3="_resultTypeIcon_1tsyi_823",O3="_group_1tsyi_849",L3="_channel_1tsyi_859",I3="_noResults_1tsyi_921",P3="_chatList_1tsyi_969",H3="_sidebarFooter_1tsyi_1017",V3="_settingsButton_1tsyi_1029",$3="_userStatus_1tsyi_1069",q3="_userInfo_1tsyi_1077",F3="_userAvatar_1tsyi_1089",G3="_userDetails_1tsyi_1129",Y3="_userName_1tsyi_1143",X3="_active_1tsyi_1203",W3="_chatAvatar_1tsyi_1219",K3="_chatOnlineStatus_1tsyi_1293",Q3="_chatInfo_1tsyi_1331",Z3="_chatNameRow_1tsyi_1341",J3="_chatName_1tsyi_1341",ek="_chatTime_1tsyi_1373",tk="_chatPreviewRow_1tsyi_1387",nk="_chatPreview_1tsyi_1387",sk="_unreadBadge_1tsyi_1419",ik="_mainContent_1tsyi_1451",ak="_mobileHeader_1tsyi_1471",rk="_mobileTitle_1tsyi_1489",ok="_mobileMenuBtn_1tsyi_1501",lk="_emptyState_1tsyi_1559",ck="_emptyStateIcon_1tsyi_1579",uk="_emptyStateTitle_1tsyi_1617",dk="_emptyStateText_1tsyi_1631",fk="_rightPanel_1tsyi_1649",hk="_collapsed_1tsyi_1671",mk="_rightPanelHeader_1tsyi_1687",pk="_rightPanelTitle_1tsyi_1703",gk="_closePanel_1tsyi_1717",yk="_rightPanelContent_1tsyi_1773",bk="_panelPlaceholder_1tsyi_1811",vk="_mobileOverlay_1tsyi_1945",xk="_visible_1tsyi_1969",Sk="_open_1tsyi_2041",wk="_loadingChats_1tsyi_2211",_k="_noChats_1tsyi_2213",Ck="_loadingMessages_1tsyi_2215",jk="_noMessages_1tsyi_2217",Tk="_spinner_1tsyi_2275",Ek="_chatViewContainer_1tsyi_2303",Mk="_chatHeader_1tsyi_2319",Ak="_chatHeaderLeft_1tsyi_2339",kk="_chatHeaderAvatar_1tsyi_2351",Rk="_chatHeaderInfo_1tsyi_2423",Nk="_chatHeaderName_1tsyi_2435",Dk="_chatHeaderStatus_1tsyi_2449",zk="_chatHeaderRight_1tsyi_2459",Bk="_chatHeaderBtn_1tsyi_2471",Uk="_messagesContainer_1tsyi_2511",Ok="_message_1tsyi_2511",Lk="_own_1tsyi_2575",Ik="_messageAvatar_1tsyi_2585",Pk="_messageBubble_1tsyi_2629",Hk="_messageSender_1tsyi_2677",Vk="_messageText_1tsyi_2703",$k="_messageTime_1tsyi_2727",qk="_seenIndicator_1tsyi_2757",Fk="_seen_1tsyi_2757",Gk="_delivered_1tsyi_2781",Yk="_messageAttachment_1tsyi_2809",Xk="_attachmentImage_1tsyi_2817",Wk="_attachmentLink_1tsyi_2831",Kk="_messageInputContainer_1tsyi_2901",Qk="_inputDisabledNotice_1tsyi_2915",Zk="_filePreview_1tsyi_2939",Jk="_fileName_1tsyi_2959",eR="_removeFile_1tsyi_2975",tR="_messageInputRow_1tsyi_3035",nR="_fileInput_1tsyi_3047",sR="_attachBtn_1tsyi_3055",iR="_messageInput_1tsyi_2901",aR="_sendBtn_1tsyi_3229",rR="_panelDetails_1tsyi_3309",oR="_panelAvatar_1tsyi_3325",lR="_panelName_1tsyi_3389",cR="_panelType_1tsyi_3403",uR="_panelDescription_1tsyi_3419",dR="_panelMemberCount_1tsyi_3435",fR="_replyPreview_1tsyi_3475",hR="_replyAuthor_1tsyi_3553",mR="_replyContent_1tsyi_3573",pR="_messageReactions_1tsyi_3603",gR="_reactionBadge_1tsyi_3617",yR="_messageFooter_1tsyi_3743",bR="_editedLabel_1tsyi_3759",vR="_contextMenu_1tsyi_3813",xR="_contextReactions_1tsyi_3835",SR="_contextReactionBtn_1tsyi_3849",wR="_contextDivider_1tsyi_3889",_R="_contextMenuItem_1tsyi_3901",CR="_danger_1tsyi_3959",jR="_highlighted_1tsyi_3989",TR="_scrollToBottomBtn_1tsyi_3999",ER="_replyBar_1tsyi_4067",MR="_replyBarContent_1tsyi_4089",AR="_replyBarIcon_1tsyi_4105",kR="_replyBarInfo_1tsyi_4127",RR="_replyBarLabel_1tsyi_4141",NR="_replyBarText_1tsyi_4153",DR="_replyBarClose_1tsyi_4171",zR="_editBar_1tsyi_4229",BR="_editBarContent_1tsyi_4251",UR="_editBarIcon_1tsyi_4267",OR="_editBarInfo_1tsyi_4289",LR="_editBarLabel_1tsyi_4303",IR="_editBarText_1tsyi_4315",PR="_editBarClose_1tsyi_4333",HR="_pinnedBar_1tsyi_4479",VR="_pinnedBarHeader_1tsyi_4491",$R="_pinnedBarLeft_1tsyi_4523",qR="_pinnedBarChevron_1tsyi_4549",FR="_expanded_1tsyi_4559",GR="_pinnedBarContent_1tsyi_4567",YR="_pinnedLoading_1tsyi_4577",XR="_pinnedItem_1tsyi_4591",WR="_pinnedItemInfo_1tsyi_4625",KR="_pinnedItemSender_1tsyi_4641",QR="_pinnedItemPreview_1tsyi_4653",ZR="_pinnedItemJump_1tsyi_4669",JR="_panelClickHint_1tsyi_4731",e4="_modalBackdrop_1tsyi_4747",t4="_subModal_1tsyi_6409",n4="_subModalHeader_1tsyi_6435",s4="_subModalSearch_1tsyi_6517",i4="_subModalContent_1tsyi_6569",a4="_subModalLoading_1tsyi_6599",r4="_subModalEmpty_1tsyi_6627",o4="_subModalItem_1tsyi_6641",l4="_subModalItemAvatar_1tsyi_6667",c4="_subModalItemInfo_1tsyi_6715",u4="_subModalItemName_1tsyi_6729",d4="_subModalItemMeta_1tsyi_6741",f4="_subModalItemBtn_1tsyi_6751",h4="_unban_1tsyi_6783",j={dashboardContainer:g3,togglePanelBtn:y3,clickable:b3,chatItem:v3,searchResultItem:x3,mainWrapper:S3,sidebar:w3,searchSection:_3,searchContainer:C3,searchWrapper:j3,searchIcon:T3,searchInput:E3,clearSearch:M3,searchDropdown:A3,dropdownHeader:k3,resultAvatar:R3,resultInfo:N3,resultName:D3,resultUsername:z3,resultType:B3,resultTypeIcon:U3,group:O3,channel:L3,noResults:I3,chatList:P3,sidebarFooter:H3,settingsButton:V3,userStatus:$3,userInfo:q3,userAvatar:F3,userDetails:G3,userName:Y3,active:X3,chatAvatar:W3,chatOnlineStatus:K3,chatInfo:Q3,chatNameRow:Z3,chatName:J3,chatTime:ek,chatPreviewRow:tk,chatPreview:nk,unreadBadge:sk,mainContent:ik,mobileHeader:ak,mobileTitle:rk,mobileMenuBtn:ok,emptyState:lk,emptyStateIcon:ck,emptyStateTitle:uk,emptyStateText:dk,rightPanel:fk,collapsed:hk,rightPanelHeader:mk,rightPanelTitle:pk,closePanel:gk,rightPanelContent:yk,panelPlaceholder:bk,mobileOverlay:vk,visible:xk,open:Sk,loadingChats:wk,noChats:_k,loadingMessages:Ck,noMessages:jk,spinner:Tk,chatViewContainer:Ek,chatHeader:Mk,chatHeaderLeft:Ak,chatHeaderAvatar:kk,chatHeaderInfo:Rk,chatHeaderName:Nk,chatHeaderStatus:Dk,chatHeaderRight:zk,chatHeaderBtn:Bk,messagesContainer:Uk,message:Ok,own:Lk,messageAvatar:Ik,messageBubble:Pk,messageSender:Hk,messageText:Vk,messageTime:$k,seenIndicator:qk,seen:Fk,delivered:Gk,messageAttachment:Yk,attachmentImage:Xk,attachmentLink:Wk,messageInputContainer:Kk,inputDisabledNotice:Qk,filePreview:Zk,fileName:Jk,removeFile:eR,messageInputRow:tR,fileInput:nR,attachBtn:sR,messageInput:iR,sendBtn:aR,panelDetails:rR,panelAvatar:oR,panelName:lR,panelType:cR,panelDescription:uR,panelMemberCount:dR,replyPreview:fR,replyAuthor:hR,replyContent:mR,messageReactions:pR,reactionBadge:gR,messageFooter:yR,editedLabel:bR,contextMenu:vR,contextReactions:xR,contextReactionBtn:SR,contextDivider:wR,contextMenuItem:_R,danger:CR,highlighted:jR,scrollToBottomBtn:TR,replyBar:ER,replyBarContent:MR,replyBarIcon:AR,replyBarInfo:kR,replyBarLabel:RR,replyBarText:NR,replyBarClose:DR,editBar:zR,editBarContent:BR,editBarIcon:UR,editBarInfo:OR,editBarLabel:LR,editBarText:IR,editBarClose:PR,pinnedBar:HR,pinnedBarHeader:VR,pinnedBarLeft:$R,pinnedBarChevron:qR,expanded:FR,pinnedBarContent:GR,pinnedLoading:YR,pinnedItem:XR,pinnedItemInfo:WR,pinnedItemSender:KR,pinnedItemPreview:QR,pinnedItemJump:ZR,panelClickHint:JR,modalBackdrop:e4,subModal:t4,subModalHeader:n4,subModalSearch:s4,subModalContent:i4,subModalLoading:a4,subModalEmpty:r4,subModalItem:o4,subModalItemAvatar:l4,subModalItemInfo:c4,subModalItemName:u4,subModalItemMeta:d4,subModalItemBtn:f4,unban:h4},m4=s=>{if(!s||s==="undefined"||s==="null")return"?";const n=String(s).trim();if(!n||n.length===0)return"?";const i=n.split(/\s+/).filter(r=>r.length>0);return i.length===0?"?":i.length===1?i[0][0]?.toUpperCase()||"?":i.map(r=>r[0]).join("").toUpperCase().slice(0,2)||"?"},p4=({isOpen:s,onClose:n,isDarkMode:i=!1})=>{const[r,l]=_.useState([]),[d,f]=_.useState(!1),[m,p]=_.useState(""),[y,b]=_.useState(null);_.useEffect(()=>{s&&v()},[s]);const v=async()=>{f(!0),b(null);try{const C=await Wt.getAllUsers();l(C)}catch(C){console.error("Failed to load users:",C),C.response?.status===403?b("Access denied. You need admin privileges to view this panel."):b("Failed to load users. Please try again.")}finally{f(!1)}},w=async(C,A)=>{if(await ns({title:"Delete User",message:`Are you sure you want to delete user "${A}"? This action cannot be undone and all their data will be permanently deleted.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",icon:"delete"}))try{await Wt.deleteUser(C),await v()}catch(P){console.error("Failed to delete user:",P)}},E=r.filter(C=>C.username.toLowerCase().includes(m.toLowerCase())||C.email.toLowerCase().includes(m.toLowerCase()));return s?c.jsx("div",{className:`${j.modalOverlay} ${i?j.darkMode:""}`,onClick:n,children:c.jsxs("div",{className:j.modal,onClick:C=>C.stopPropagation(),style:{maxWidth:"900px",width:"90%"},children:[c.jsxs("div",{className:j.modalHeader,children:[c.jsx("h2",{children:" Admin Panel - User Management"}),c.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),c.jsxs("div",{className:j.modalBody,style:{maxHeight:"70vh",overflowY:"auto"},children:[y&&c.jsx("div",{style:{padding:"12px",backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)",borderRadius:"6px",color:"#d32f2f",marginBottom:"16px"},children:y}),c.jsx("div",{className:j.formGroup,style:{marginBottom:"16px"},children:c.jsx("input",{type:"text",placeholder:"Search users by username or email...",value:m,onChange:C=>p(C.target.value),className:j.formInput,style:{margin:0}})}),d?c.jsx("div",{className:j.loadingState,children:"Loading users..."}):E.length===0?c.jsx("div",{className:j.emptyState,children:m?"No users match your search":"No users found"}):c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[c.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"6px",fontWeight:600,fontSize:"14px",color:"var(--text)"},children:["Total Users: ",E.length]}),c.jsx("div",{style:{overflowX:"auto"},children:c.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"var(--surface)",borderRadius:"8px",overflow:"hidden"},children:[c.jsx("thead",{children:c.jsxs("tr",{style:{backgroundColor:"var(--background)",borderBottom:"2px solid var(--border)"},children:[c.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"User"}),c.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Email"}),c.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Status"}),c.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Actions"})]})}),c.jsx("tbody",{children:E.map(C=>c.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",transition:"background-color 0.2s"},onMouseEnter:A=>{A.currentTarget.style.backgroundColor="var(--background)"},onMouseLeave:A=>{A.currentTarget.style.backgroundColor="transparent"},children:[c.jsx("td",{style:{padding:"12px"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[C.avatar?c.jsx("img",{src:C.avatar,alt:C.username,style:{width:"36px",height:"36px",borderRadius:"50%",objectFit:"cover"}}):c.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:"var(--accent)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"14px"},children:m4(C.username)}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:C.username}),C.bio&&c.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:C.bio})]})]})}),c.jsx("td",{style:{padding:"12px",fontSize:"13px",color:"var(--text-secondary)"},children:C.email}),c.jsx("td",{style:{padding:"12px"},children:c.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:600,backgroundColor:C.onlineStatus==="online"?"rgba(16, 185, 129, 0.15)":C.onlineStatus==="away"?"rgba(245, 158, 11, 0.15)":"rgba(107, 114, 128, 0.15)",color:C.onlineStatus==="online"?"#10b981":C.onlineStatus==="away"?"#f59e0b":"#6b7280"},children:C.onlineStatus})}),c.jsx("td",{style:{padding:"12px",textAlign:"center"},children:c.jsx("button",{onClick:()=>w(C.id,C.username),style:{padding:"6px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:A=>{A.currentTarget.style.opacity="0.9",A.currentTarget.style.transform="scale(1.05)"},onMouseLeave:A=>{A.currentTarget.style.opacity="1",A.currentTarget.style.transform="scale(1)"},children:" Delete"})})]},C.id))})]})})]})]}),c.jsxs("div",{className:j.modalFooter,children:[c.jsx("button",{onClick:v,className:j.secondaryButton,disabled:d,children:" Refresh"}),c.jsx("button",{onClick:n,className:j.primaryButton,children:"Close"})]})]})}):null},ae={abyss:"#050505",obsidian:"#0a0a0a",charcoal:"#0f0f0f",slate:"#151515",border:"#1a1a1a",borderLight:"#252525",surfaceHover:"#1c1c1c",emerald:"#10b981",emeraldBright:"#34d399",emeraldDark:"#059669",emeraldGlow:"rgba(16, 185, 129, 0.4)",sapphire:"#3b82f6",amethyst:"#8b5cf6",amber:"#f59e0b",ruby:"#ef4444",rubyDark:"#dc2626",indigo:"#6366f1",text:"#ffffff",textSecondary:"#a1a1aa",textMuted:"#71717a",textDim:"#52525b"},g4=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M5.5 3.21V20.8l4.75-4.73 2.99 6.73L15.5 21.6l-3-6.7h6z'/%3E%3Cpath fill='%23064e3b' d='M6.5 5.61v11.68l3.38-3.37.37-.37.48 1.07 1.93 4.35 1.07-.47L11.8 14.1l-.48-1.07H16z'/%3E%3C/svg%3E") 5 3, default`,y4=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M9 2.5a2.5 2.5 0 0 1 5 0v7.996l3.904-.74a2.095 2.095 0 0 1 2.537 2.466L19.5 17.5a6 6 0 0 1-6 6H11a7 7 0 0 1-7-7V9a2 2 0 1 1 4 0v3.5h1z'/%3E%3Cpath fill='%23064e3b' d='M10 2.5V14h-.5a1.5 1.5 0 0 1-1.5-1.5V9a1 1 0 1 0-2 0v7.5a6 6 0 0 0 6 6h2.5a5 5 0 0 0 5-5l.941-5.278a1.095 1.095 0 0 0-1.324-1.288l-4.117.78V2.5a1.5 1.5 0 0 0-3 0z'/%3E%3C/svg%3E") 9 4, pointer`,b4=`
  @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

  .settings-panel-overlay {
    cursor: ${g4};
  }
  .settings-panel-overlay * {
    cursor: inherit;
  }
  .settings-panel-overlay button,
  .settings-panel-overlay [role="button"],
  .settings-panel-overlay .clickable {
    cursor: ${y4};
  }

  .settings-panel-content::-webkit-scrollbar {
    width: 6px;
  }
  .settings-panel-content::-webkit-scrollbar-track {
    background: ${ae.obsidian};
  }
  .settings-panel-content::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, ${ae.emerald}, ${ae.emeraldDark});
    border-radius: 3px;
  }
  .settings-panel-content::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, ${ae.emeraldBright}, ${ae.emerald});
  }

  @keyframes settings-matrix-pulse {
    0%, 100% { opacity: 0.08; transform: scale(1); }
    50% { opacity: 0.25; transform: scale(1.05); }
  }

  @keyframes settings-glow-breathe {
    0%, 100% { filter: drop-shadow(0 0 2px ${ae.emeraldGlow}); }
    50% { filter: drop-shadow(0 0 8px ${ae.emeraldGlow}); }
  }

  @keyframes settings-shimmer {
    0% { background-position: -200% center; }
    100% { background-position: 200% center; }
  }

  @keyframes emerald-pulse {
    0%, 100% { box-shadow: 0 0 0 0 ${ae.emeraldGlow}; }
    50% { box-shadow: 0 0 20px 5px ${ae.emeraldGlow}; }
  }
`;if(typeof document<"u"&&!document.getElementById("settings-panel-styles")){const s=document.createElement("style");s.id="settings-panel-styles",s.textContent=b4,document.head.appendChild(s)}const v4={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3,ease:[.22,1,.36,1]}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}}},x4={hidden:{x:"-100%",opacity:.8},visible:{x:0,opacity:1,transition:{type:"spring",damping:30,stiffness:300,mass:.8}},exit:{x:"-100%",opacity:.5,transition:{duration:.25,ease:[.4,0,1,1]}}},S4={hidden:{opacity:0},visible:s=>({opacity:1,transition:{delay:.1+s*.08,duration:.4,ease:"easeOut"}})},nm={hidden:{opacity:0,x:-20,scale:.95},visible:s=>({opacity:1,x:0,scale:1,transition:{delay:.15+s*.04,duration:.35,ease:[.22,1,.36,1]}})},w4=({enabled:s})=>{const n=_.useMemo(()=>{const i=[];for(let d=0;d<240;d++)i.push({id:d,delay:Math.random()*3,duration:1.5+Math.random()*2,opacity:.05+Math.random()*.15});return i},[]);return s?c.jsx("div",{style:{position:"absolute",inset:0,overflow:"hidden",pointerEvents:"none",zIndex:0},children:c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gap:"4px",padding:"20px",height:"100%"},children:n.map(i=>c.jsx(X.div,{initial:{opacity:0},animate:{opacity:[i.opacity*.3,i.opacity,i.opacity*.3],scale:[1,1.1,1]},transition:{duration:i.duration,delay:i.delay,repeat:1/0,ease:"easeInOut"},style:{background:ae.emerald,borderRadius:"2px",aspectRatio:"1"}},i.id))})}):null},mv=({isOn:s,onToggle:n,label:i,icon:r,iconOff:l})=>c.jsxs(X.button,{onClick:n,whileHover:{scale:1.01},whileTap:{scale:.99},style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"14px 16px",background:ae.charcoal,border:`1px solid ${ae.border}`,borderRadius:"14px",fontFamily:"'Outfit', sans-serif",transition:"all 0.2s ease"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px"},children:[c.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:s?`linear-gradient(135deg, ${ae.emerald}, ${ae.emeraldDark})`:ae.slate,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:s?`0 0 20px ${ae.emeraldGlow}, inset 0 1px 0 rgba(255,255,255,0.1)`:"inset 0 1px 0 rgba(255,255,255,0.05)",transition:"all 0.3s ease"},children:c.jsx(X.div,{animate:{rotate:s?0:180},transition:{duration:.3},children:s?r:l||r})}),c.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:ae.text},children:i})]}),c.jsx("div",{style:{width:"52px",height:"28px",borderRadius:"14px",background:s?`linear-gradient(90deg, ${ae.emeraldDark}, ${ae.emerald})`:ae.obsidian,border:`1px solid ${s?ae.emerald:ae.borderLight}`,padding:"2px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:s?`0 0 12px ${ae.emeraldGlow}`:"inset 0 2px 4px rgba(0,0,0,0.3)"},children:c.jsx(X.div,{animate:{x:s?24:0},transition:{type:"spring",stiffness:500,damping:30},style:{width:"22px",height:"22px",borderRadius:"11px",background:s?"#fff":ae.textMuted,boxShadow:s?"0 2px 8px rgba(0,0,0,0.3)":"0 1px 3px rgba(0,0,0,0.2)"}})})]}),pv=({icon:s,label:n,color:i,onClick:r,index:l})=>{const[d,f]=_a.useState(!1);return c.jsxs(X.button,{custom:l,variants:nm,initial:"hidden",animate:"visible",onClick:r,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),whileHover:{x:4},whileTap:{scale:.98},style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"12px 14px",background:d?ae.surfaceHover:"transparent",border:"none",borderRadius:"12px",fontFamily:"'Outfit', sans-serif",transition:"background 0.15s ease"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px"},children:[c.jsx("div",{style:{width:"38px",height:"38px",borderRadius:"11px",background:`linear-gradient(135deg, ${i}20, ${i}10)`,border:`1px solid ${i}30`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:d?`0 0 16px ${i}40, inset 0 1px 0 rgba(255,255,255,0.1)`:`0 0 0 ${i}00`,transition:"all 0.25s ease"},children:c.jsx("div",{style:{color:i,transition:"transform 0.2s ease",transform:d?"scale(1.1)":"scale(1)"},children:s})}),c.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:ae.text,transition:"color 0.15s ease"},children:n})]}),c.jsx(X.div,{animate:{x:d?0:-4,opacity:d?1:0},transition:{duration:.15},children:c.jsx(cm,{size:16,color:ae.textMuted})})]})},Ch=({title:s,index:n})=>c.jsxs(X.div,{custom:n,variants:S4,initial:"hidden",animate:"visible",style:{display:"flex",alignItems:"center",gap:"10px",padding:"0 14px",marginBottom:"8px",marginTop:n>0?"24px":"0"},children:[c.jsx("span",{style:{fontSize:"11px",fontWeight:600,fontFamily:"'JetBrains Mono', monospace",textTransform:"uppercase",letterSpacing:"1.5px",color:ae.textDim},children:s}),c.jsx("div",{style:{flex:1,height:"1px",background:`linear-gradient(90deg, ${ae.border}, transparent)`}})]}),_4=({isOpen:s,onClose:n,onCreateGroup:i,onCreateChannel:r,onEditProfile:l,onShowNotifications:d,onShowAdminPanel:f,onShowBlockedUsers:m,isDarkMode:p,onToggleDarkMode:y,onLogout:b,fancyAnimations:v,onToggleFancyAnimations:w})=>{_.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]);const E=[{icon:c.jsx(Lt,{size:18}),label:"New Group",color:ae.sapphire,onClick:i},{icon:c.jsx(_s,{size:18}),label:"New Channel",color:ae.amethyst,onClick:r}],C=[{icon:c.jsx(mu,{size:18}),label:"Edit Profile",color:ae.emerald,onClick:l},{icon:c.jsx(am,{size:18}),label:"Notifications",color:ae.ruby,onClick:d},{icon:c.jsx(hu,{size:18}),label:"Blocked Users",color:ae.rubyDark,onClick:m},{icon:c.jsx(Or,{size:18}),label:"Admin Panel",color:ae.indigo,onClick:f}];return c.jsx(sn,{children:s&&c.jsxs(X.div,{className:"settings-panel-overlay",variants:v4,initial:"hidden",animate:"visible",exit:"exit",style:{position:"fixed",inset:0,zIndex:9999,display:"flex"},children:[c.jsx(X.div,{onClick:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(8px)"}}),c.jsxs(X.div,{variants:x4,initial:"hidden",animate:"visible",exit:"exit",style:{position:"relative",width:"340px",height:"100vh",background:`linear-gradient(180deg, ${ae.obsidian} 0%, ${ae.abyss} 100%)`,borderRight:`1px solid ${ae.border}`,boxShadow:`
                4px 0 24px rgba(0, 0, 0, 0.5),
                0 0 1px ${ae.emeraldGlow}
              `,display:"flex",flexDirection:"column",overflow:"hidden"},children:[c.jsx(w4,{enabled:v}),c.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:`linear-gradient(90deg, transparent, ${ae.emerald}, transparent)`,opacity:.6}}),c.jsx(X.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.3},style:{position:"relative",zIndex:1,padding:"20px 20px 16px",borderBottom:`1px solid ${ae.border}`,background:`linear-gradient(180deg, ${ae.charcoal}80 0%, transparent 100%)`},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[c.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:`linear-gradient(135deg, ${ae.emerald}, ${ae.emeraldDark})`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 0 20px ${ae.emeraldGlow}`},children:c.jsx(jh,{size:18,color:"#fff"})}),c.jsxs("div",{children:[c.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,fontFamily:"'Outfit', sans-serif",color:ae.text,letterSpacing:"-0.02em"},children:"Settings"}),c.jsx("p",{style:{margin:0,fontSize:"12px",fontFamily:"'JetBrains Mono', monospace",color:ae.textMuted},children:"Customize your experience"})]})]}),c.jsx(X.button,{onClick:n,whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},style:{width:"32px",height:"32px",borderRadius:"8px",border:`1px solid ${ae.border}`,background:ae.charcoal,display:"flex",alignItems:"center",justifyContent:"center",color:ae.textSecondary,transition:"all 0.2s ease"},children:c.jsx(It,{size:16})})]})}),c.jsxs("div",{className:"settings-panel-content",style:{position:"relative",zIndex:1,flex:1,overflowY:"auto",overflowX:"hidden",padding:"20px 16px"},children:[c.jsx(Ch,{title:"Create",index:0}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:E.map((A,D)=>c.jsx(pv,{icon:A.icon,label:A.label,color:A.color,onClick:()=>{A.onClick(),n()},index:D},A.label))}),c.jsx(Ch,{title:"Account",index:1}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:C.map((A,D)=>c.jsx(pv,{icon:A.icon,label:A.label,color:A.color,onClick:()=>{A.onClick(),n()},index:D+E.length},A.label))}),c.jsx(Ch,{title:"Preferences",index:2}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[c.jsx(X.div,{custom:C.length+E.length,variants:nm,initial:"hidden",animate:"visible",children:c.jsx(mv,{isOn:p,onToggle:y,label:p?"Dark Mode":"Light Mode",icon:c.jsx(Sw,{size:18,color:"#fff"}),iconOff:c.jsx(xw,{size:18,color:ae.amber})})}),c.jsx(X.div,{custom:C.length+E.length+1,variants:nm,initial:"hidden",animate:"visible",children:c.jsx(mv,{isOn:v,onToggle:w,label:"Fancy Animations",icon:c.jsx(jh,{size:18,color:"#fff"})})})]}),c.jsx("div",{style:{height:"24px"}})]}),c.jsxs(X.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},style:{position:"relative",zIndex:1,padding:"16px 20px 24px",borderTop:`1px solid ${ae.border}`,background:`linear-gradient(180deg, transparent 0%, ${ae.abyss}80 100%)`},children:[c.jsxs(X.button,{onClick:b,whileHover:{scale:1.02},whileTap:{scale:.98},style:{width:"100%",padding:"14px",borderRadius:"12px",border:`1px solid ${ae.ruby}40`,background:`linear-gradient(135deg, ${ae.ruby}15, ${ae.rubyDark}10)`,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",fontFamily:"'Outfit', sans-serif",fontSize:"14px",fontWeight:600,color:ae.ruby,transition:"all 0.2s ease"},onMouseEnter:A=>{A.currentTarget.style.background=`linear-gradient(135deg, ${ae.ruby}25, ${ae.rubyDark}20)`,A.currentTarget.style.borderColor=`${ae.ruby}60`,A.currentTarget.style.boxShadow=`0 0 20px ${ae.ruby}30`},onMouseLeave:A=>{A.currentTarget.style.background=`linear-gradient(135deg, ${ae.ruby}15, ${ae.rubyDark}10)`,A.currentTarget.style.borderColor=`${ae.ruby}40`,A.currentTarget.style.boxShadow="none"},children:[c.jsx(om,{size:18}),c.jsx("span",{children:"Sign Out"})]}),c.jsx("p",{style:{margin:"12px 0 0",textAlign:"center",fontSize:"11px",fontFamily:"'JetBrains Mono', monospace",color:ae.textDim},children:"SimpChat v1.0"})]}),c.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"1px",background:`linear-gradient(90deg, transparent, ${ae.emerald}40, transparent)`}})]})]})})},C4=()=>{const{user:s,logout:n}=tt(),{theme:i,toggleTheme:r}=ZE(),{fancyAnimations:l,toggleFancyAnimations:d}=eM(),f=i==="dark",{chats:m,currentChat:p,messages:y,isLoadingChats:b,isLoadingMessages:v,setCurrentChat:w,loadChats:E,loadMessages:C,sendMessage:A,isUserOnline:D,deleteMessage:P,editMessage:Q,isBlockedBy:V,hasBlocked:J,loadPinnedMessages:G,getPinnedMessages:ee,unpinMessage:se,isLoadingPinned:W,addBlockedUser:le,removeBlockedUser:ue,setInitialPresenceStates:Ce}=Cn(),{canSendMessage:Re}=A1(p?.id),Ve=()=>{if(!p||p.type!=="dm"||!s)return null;const S=p.members?.find(F=>(F.userId||F.id)!==s.id);return S?.userId||S?.id||null},Qe=Ve(),Ee=Qe?V(Qe):!1,I=Qe?J(Qe):!1,Z=Ee||I,[ne,ge]=_.useState(""),[je,Ue]=_.useState(!1),[Se,ye]=_.useState([]),[Ye,At]=_.useState(!1),[rn,Xn]=_.useState(()=>window.innerWidth>768),[as,Ut]=_.useState(!1),[Tn,En]=_.useState(""),[Wn,Mn]=_.useState(!1),[kt,ni]=_.useState(null),[ot,Pt]=_.useState(null),[An,rs]=_.useState(null),[lt,kn]=_.useState(null),[Xr,Wr]=_.useState(!1),[Ht,Ua]=_.useState(!1),[Oa,os]=_.useState(!1),[si,Es]=_.useState(!1),[La,on]=_.useState(!1),[K,we]=_.useState(!1),[Ie,He]=_.useState(!1),[pt,Rl]=_.useState(!1),[Du,Ms]=_.useState(!1),[Ia,ln]=_.useState(!1),[qi,ls]=_.useState(null),[Kr,Fi]=_.useState(null),[Km,Qr]=_.useState(!1),[Nl,ii]=_.useState(null),[Qm,Pa]=_.useState(!1),[zu,Dl]=_.useState(!1),[Zr,Ha]=_.useState(null),[Bu,Jr]=_.useState(!1),[cs,gt]=_.useState(!1),[Vt,As]=_.useState(""),[Va,eo]=_.useState([]),[zl,to]=_.useState(!1),[Gi,$a]=_.useState(!1),[ks,ai]=_.useState([]),[ri,Rs]=_.useState(!1),[wt,Bl]=_.useState(!1),[no,Ns]=_.useState(null),[oi,Yi]=_.useState(!1),[us,so]=_.useState(""),[io,Xi]=_.useState(""),[ds,Rn]=_.useState(null),[$t,ao]=_.useState(null),[yt,qa]=_.useState(!1),[Kt,li]=_.useState(""),[Fa,Qt]=_.useState(""),[ci,ro]=_.useState(null),[ui,Ds]=_.useState(null),[Te,Wi]=_.useState(!1),[bt,Ki]=_.useState("public"),[zs,oo]=_.useState(""),[Ga,Ul]=_.useState(""),[Ol,Qi]=_.useState(null),[Nn,Ya]=_.useState(null),[Rt,Bs]=_.useState(!1),[fs,lo]=_.useState(!1),Zi=_.useRef(null),co=_.useRef(null),hs=_.useRef(null),Dn=_.useRef(null),ms=_.useRef(null),di=_.useRef(null),zn=_.useRef(null),Xa=_.useRef(null),fi=_.useRef(null);_.useEffect(()=>{m.length===0&&E()},[]),_.useEffect(()=>{const S=()=>{const F=window.innerWidth<=768;F||Ut(!1),F&&Xn(!1)};return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]),_.useEffect(()=>{const S=F=>{Zi.current&&!Zi.current.contains(F.target)&&Ue(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]),_.useEffect(()=>{p&&p.id!==Xa.current&&(Xa.current=p.id,C(p.id),G(p.id),Js.joinChat(p.id),Js.markMessagesAsSeen(p.id).catch(S=>{console.warn("[DashboardLayout] Failed to mark messages as seen:",S)}),Cn.getState().resetUnreadCount(p.id),lo(!1))},[p?.id]),_.useEffect(()=>{hs.current&&hs.current.scrollIntoView({behavior:"smooth"})},[y.length]),_.useEffect(()=>{const S=F=>{fi.current&&!fi.current.contains(F.target)&&Pt(null)};return ot&&document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[ot]),_.useEffect(()=>{const S=Dn.current;if(!S)return;const F=()=>{const{scrollTop:ie,scrollHeight:me,clientHeight:$e}=S,Be=me-ie-$e<100;Wr(!Be)};return S.addEventListener("scroll",F),()=>S.removeEventListener("scroll",F)},[p?.id]);const Ll=(S,F)=>{S.preventDefault(),S.stopPropagation(),Pt({messageId:F.messageId,x:S.clientX,y:S.clientY})},Ji=async(S,F)=>{try{await Cn.getState().toggleReaction(S,F)}catch(ie){console.error("Failed to toggle reaction:",ie)}Pt(null)},Wa=S=>{rs(S),Pt(null),di.current?.focus()},Il=S=>{kn(S),En(S.content||""),Pt(null),di.current?.focus()},Zt=async S=>{if(await ns({title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger",icon:"delete"})){try{await P(S)}catch(ie){console.error("Failed to delete message:",ie)}Pt(null)}},Us=async S=>{try{S.isPinned?await se(S.messageId):await Cn.getState().pinMessage(S.messageId)}catch(F){console.error("Failed to toggle pin:",F)}Pt(null)},Ka=()=>{hs.current?.scrollIntoView({behavior:"smooth"})},hi=S=>{const F=document.getElementById(`msg-${S}`);F&&(F.scrollIntoView({behavior:"smooth",block:"center"}),F.classList.add(j.highlighted),setTimeout(()=>F.classList.remove(j.highlighted),2e3))},Uu=["","","","",""],Qa={Like:"",Love:"",Laugh:"",Sad:"",Angry:""},uo=_.useCallback(S=>{if(ge(S),!S.trim()){ye([]),At(!1);return}zn.current&&clearTimeout(zn.current),At(!0),zn.current=setTimeout(async()=>{try{const[F,ie]=await Promise.all([Wt.searchUsers(S).catch(()=>[]),Je.searchChats(S).catch(()=>[])]),me=F.map(nt=>({id:nt.id,name:nt.username,type:"user",avatar:nt.avatar,username:nt.username})),$e=ie.filter(nt=>{const ys=nt.type||nt.chatType;return ys!=="dm"&&ys!==0}).map(nt=>({id:nt.id||nt.entityId,name:nt.name||nt.displayName,type:nt.type==="group"||nt.chatType===1?"group":nt.type==="channel"||nt.chatType===2?"channel":"group",avatar:nt.avatar||nt.avatarUrl})),Be=[...me,...$e],gs=new Set,na=Be.filter(nt=>{const ys=`${nt.type}-${nt.name.toLowerCase()}`;return gs.has(ys)?!1:(gs.add(ys),!0)});na.sort((nt,ys)=>{const go={user:0,group:1,channel:2};return go[nt.type]-go[ys.type]}),ye(na)}catch(F){console.error("Search failed:",F),ye([])}finally{At(!1)}},300)},[]),mi=m.filter(S=>S.name.toLowerCase().includes(ne.toLowerCase())),Za=je&&ne.length>0,Pl=()=>{ge(""),ye([]),co.current?.focus()},fo=async S=>{if(ge(""),ye([]),Ue(!1),S.type==="user")ea(S.id),ln(!0);else{const F=m.find(ie=>ie.id===S.id);if(F)w(F),Ut(!1);else try{const ie=await Je.getChatProfile(S.id);Ha(ie);const me={id:S.id,name:S.name,type:S.type,avatar:S.avatar,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),unreadCount:0,members:[]};w(me),Ms(!0)}catch(ie){console.error("Failed to load profile:",ie)}}},Ou=S=>{if(p?.id===S.id){Ut(!1);return}w(S),Ut(!1)},Hl=async S=>{if(S&&(S.preventDefault(),S.stopPropagation()),console.log("[DashboardLayout] handleSendMessage called",{hasText:!!Tn.trim(),hasFile:!!kt,fileName:kt?.name,chatId:p?.id}),!Tn.trim()&&!kt||!p||Wn){console.log("[DashboardLayout] Skipping send - validation failed");return}Mn(!0);try{if(lt){await Q(lt.messageId,Tn.trim()),kn(null),En("");return}let F;if(p.id.startsWith("temp_dm_"))F=p.id.replace("temp_dm_",""),console.log("[DashboardLayout] Temp chat detected, using receiverId:",F);else if(p.type==="dm"&&p.members){const me=p.members.find($e=>($e.userId||$e.id)!==s?.id);F=me?.userId||me?.id}console.log("[DashboardLayout] Sending message...",{chatId:p.id,receiverId:F,hasFile:!!kt,replyId:An?.messageId}),await A(p.id,F,Tn.trim(),kt||void 0,An?.messageId),console.log("[DashboardLayout] Message sent successfully"),En(""),ni(null),rs(null),ms.current&&(ms.current.value="")}catch(F){console.error("[DashboardLayout] Failed to send message:",F)}finally{console.log("[DashboardLayout] Send complete, resetting isSending"),Mn(!1)}},ho=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),Hl())},Vl=S=>{if(S.type!=="dm")return!1;if(!S.members||!s)return S.isOnline||!1;const F=S.members.find(me=>(me.userId||me.id)!==s.id);if(!F)return!1;const ie=F.userId||F.id;return D(ie)},Lu=S=>{if(S.lastMessage){const F=S.lastMessage.content||"";if(S.lastMessage.fileUrl&&!F)return" Attachment";if(F)return sv(F,40)}return"No messages yet"},Iu=S=>S.lastMessage?.createdAt&&(S.lastMessage.content||S.lastMessage.fileUrl)?BE(S.lastMessage.createdAt):"",ea=async S=>{ls(S),Qr(!0),ii(null);try{const F=await Wt.getUserProfile(S);Fi(F);const ie=await Wt.getMutualBlockStatus(S);Pa(ie.iBlockedThem),Dl(ie.theyBlockedMe)}catch(F){ii(F.response?.data?.message||"Failed to load profile")}finally{Qr(!1)}},Pu=async S=>{try{await Wt.blockUser(S),le(S),Pa(!0)}catch(F){console.error("Failed to block user:",F)}},$l=async S=>{try{await Wt.unblockUser(S),ue(S),Pa(!1)}catch(F){console.error("Failed to unblock user:",F)}},Hu=async S=>{try{const F=m.find(Be=>Be.type!=="dm"?!1:Be.members&&Be.members.length>0?Be.members.some(gs=>(gs.userId||gs.id)===S):!1);if(F){w(F),ln(!1),Ut(!1);return}for(const Be of m.filter(gs=>gs.type==="dm"))if(!Be.members||Be.members.length===0)try{if((await Je.getChatProfile(Be.id)).members?.some(na=>na.userId===S||na.user?.id===S)){w(Be),ln(!1),Ut(!1);return}}catch{}console.log("[DashboardLayout] No existing DM found, creating temporary blank chat for:",S);let ie="User",me;try{const Be=await Wt.getUserProfile(S);ie=Be.username||"User",me=Be.avatar,console.log("[DashboardLayout] Fetched user profile for blank chat:",ie)}catch(Be){console.error("[DashboardLayout] Failed to fetch user profile:",Be)}const $e={id:`temp_dm_${S}`,name:ie,type:"dm",avatar:me,description:"",privacy:"private",members:[],unreadCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("[DashboardLayout] Created blank chat:",$e.id,$e.name),w($e),ln(!1),Ut(!1)}catch(F){console.error("Failed to start conversation:",F),console.error("Failed to start conversation")}},ps=async S=>{Jr(!0);try{const F=await Je.getChatProfile(S);Ha(F);const ie=F.members?.map(me=>me.userId)||[];if(ie.length>0)try{const me=await Js.getPresenceStates(ie);Object.keys(me).length>0&&Ce(me)}catch(me){console.error("Failed to load presence states:",me)}}catch(F){console.error("Failed to load group profile:",F)}finally{Jr(!1)}},Vu=async S=>{if(As(S),!S.trim()){eo([]);return}to(!0);try{const F=await Wt.searchUsers(S),ie=new Set(Zr?.members?.map($e=>$e.userId)||[]),me=F.filter($e=>!ie.has($e.id));eo(me)}catch(F){console.error("Failed to search users:",F)}finally{to(!1)}},$u=async S=>{if(p)try{p.type==="group"?await Je.addMemberToGroup(p.id,S):p.type==="channel"&&await Je.addMemberToChannel(p.id,S),gt(!1),As(""),eo([]),await ps(p.id)}catch(F){console.error("Failed to add member:",F)}},mo=async S=>{if(p)try{p.type==="group"?await Je.removeMemberFromGroup(p.id,S):p.type==="channel"&&await Je.removeMemberFromChannel(p.id,S),await ps(p.id)}catch(F){console.error("Failed to remove member:",F)}},qu=async S=>{if(p)try{await Je.banUser(p.id,S),await ps(p.id)}catch(F){console.error("Failed to ban member:",F)}},ql=async(S,F)=>{if(p)try{await Je.unbanUser(p.id,S),await Fu()}catch(ie){console.error("Failed to unban member:",ie)}},Fu=async()=>{if(p){Rs(!0);try{const S=await Je.getBannedUsers(p.id);ai(S)}catch(S){console.error("Failed to load banned users:",S)}finally{Rs(!1)}}},Fl=async()=>{if(p)try{await Je.leaveChat(p.id,p.type),Ms(!1),w(null),E()}catch(S){console.error("Failed to leave:",S)}},Gu=async()=>{if(p)try{await Je.deleteChat(p.id,p.type),Ms(!1),w(null),E()}catch(S){console.error("Failed to delete:",S)}},Yu=async S=>{if(p)try{await Je.updateChatPrivacy(p.id,S),w({...p,privacy:S}),ps(p.id)}catch(F){console.error("Failed to update privacy:",F)}},Xu=()=>{p&&(so(p.name||""),Xi(p.description||""),Rn(null),ao(p.avatar?et(p.avatar)??null:null),Yi(!0))},Wu=S=>{const F=S.target.files?.[0];if(F){Rn(F);const ie=new FileReader;ie.onloadend=()=>{ao(ie.result)},ie.readAsDataURL(F)}},Ku=async()=>{if(!(!p||!us.trim())){qa(!0);try{const S=new FormData;S.append("Name",us.trim()),S.append("Description",io.trim()),ds&&(S.append("file",ds),console.log("[EditGroup] Appending avatar file:",ds.name,ds.size,"bytes")),console.log("[EditGroup] Sending update for chat:",p.id,p.type),await Je.updateChat(p.id,p.type,S);const F={...p,name:us.trim(),description:io.trim(),...ds&&$t?{avatar:$t}:{}};w(F),Yi(!1),E(),setTimeout(()=>{ps(p.id)},300)}catch(S){console.error("Failed to update group:",S)}finally{qa(!1)}}},Bn=()=>{li(""),Qt(""),ro(null),Ds(null),Ki("public")},Gl=S=>{const F=S.target.files?.[0];if(F){ro(F);const ie=new FileReader;ie.onloadend=()=>{Ds(ie.result)},ie.readAsDataURL(F)}},Qu=async()=>{if(console.log("[DashboardLayout] handleCreateGroup called"),console.log("[DashboardLayout] createGroupName:",Kt),!Kt.trim()){console.log("[DashboardLayout] Group name is empty, returning");return}Wi(!0);try{const S=new FormData;S.append("Name",Kt.trim()),S.append("Description",Fa.trim()),S.append("PrivacyType",bt==="public"?"Public":"Private"),ci&&S.append("file",ci),console.log("[DashboardLayout] FormData contents:");for(const[ie,me]of S.entries())console.log(`  ${ie}:`,me instanceof File?`File(${me.name})`:me);console.log("[DashboardLayout] Calling chatService.createGroup...");const F=await Je.createGroup(S);console.log("[DashboardLayout] createGroup response:",F),os(!1),Bn(),await E(),F&&w(F),console.log("[DashboardLayout] Group created successfully!")}catch(S){console.error("[DashboardLayout] Failed to create group:",S)}finally{Wi(!1)}},Zu=async()=>{if(Kt.trim()){Wi(!0);try{const S=new FormData;S.append("Name",Kt.trim()),S.append("Description",Fa.trim()),S.append("PrivacyType",bt==="public"?"Public":"Private"),ci&&S.append("file",ci);const F=await Je.createChannel(S);Es(!1),Bn(),await E(),F&&w(F)}catch(S){console.error("Failed to create channel:",S)}finally{Wi(!1)}}},po=()=>{oo(s?.username||""),Ul(s?.bio||""),Qi(null),Ya(s?.avatar?et(s.avatar)??null:null),on(!0)},ta=S=>{const F=S.target.files?.[0];if(F){Qi(F);const ie=new FileReader;ie.onloadend=()=>{Ya(ie.result)},ie.readAsDataURL(F)}},Ju=async()=>{if(zs.trim()){Bs(!0);try{const S=new FormData;S.append("Username",zs.trim()),S.append("Description",Ga.trim()),Ol&&S.append("file",Ol);const F=await Wt.updateProfile(S);F&&tt.getState().setUser(F),on(!1)}catch(S){console.error("Failed to update profile:",S)}finally{Bs(!1)}}};return c.jsxs("div",{className:j.dashboardContainer,children:[c.jsx("div",{className:`${j.mobileOverlay} ${as?j.visible:""}`,onClick:()=>Ut(!1)}),c.jsxs("div",{className:j.mainWrapper,children:[c.jsxs("aside",{className:`${j.sidebar} ${as?j.open:""}`,children:[c.jsx("div",{className:j.searchSection,ref:Zi,children:c.jsxs("div",{className:j.searchContainer,children:[c.jsxs("div",{className:j.searchWrapper,children:[c.jsx("input",{ref:co,type:"text",className:j.searchInput,placeholder:"Search...",value:ne,onChange:S=>uo(S.target.value),onFocus:()=>Ue(!0)}),c.jsx(ol,{className:j.searchIcon,size:15,strokeWidth:2}),ne&&c.jsx("button",{className:j.clearSearch,onClick:Pl,"aria-label":"Clear",type:"button",children:c.jsx(It,{size:12,strokeWidth:2})})]}),Za&&c.jsx("div",{className:j.searchDropdown,children:Ye?c.jsxs("div",{className:j.noResults,children:[c.jsx(zt,{size:18,className:j.spinner}),c.jsx("span",{children:"Searching..."})]}):Se.length>0?c.jsxs(c.Fragment,{children:[Se.filter(S=>S.type==="user").length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:j.dropdownHeader,children:[c.jsx(Lt,{size:12}),"Users"]}),Se.filter(S=>S.type==="user").map(S=>c.jsxs("button",{className:j.searchResultItem,onClick:()=>fo(S),type:"button",children:[c.jsx("div",{className:j.resultAvatar,children:S.avatar?c.jsx("img",{src:et(S.avatar),alt:S.name}):Fn(S.name)}),c.jsxs("div",{className:j.resultInfo,children:[c.jsx("span",{className:j.resultName,children:S.name}),c.jsxs("span",{className:j.resultUsername,children:["@",S.username||S.name]})]}),c.jsx("div",{className:j.resultTypeIcon,children:c.jsx(Lt,{size:14})})]},`user-${S.id}`))]}),Se.filter(S=>S.type==="group").length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:j.dropdownHeader,children:[c.jsx(Lt,{size:12}),"Groups"]}),Se.filter(S=>S.type==="group").map(S=>c.jsxs("button",{className:j.searchResultItem,onClick:()=>fo(S),type:"button",children:[c.jsx("div",{className:`${j.resultAvatar} ${j.group}`,children:S.avatar?c.jsx("img",{src:et(S.avatar),alt:S.name}):c.jsx(Lt,{size:16})}),c.jsxs("div",{className:j.resultInfo,children:[c.jsx("span",{className:j.resultName,children:S.name}),c.jsx("span",{className:j.resultType,children:"Group"})]}),c.jsx("div",{className:`${j.resultTypeIcon} ${j.group}`,children:c.jsx(Lt,{size:14})})]},`group-${S.id}`))]}),Se.filter(S=>S.type==="channel").length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:j.dropdownHeader,children:[c.jsx(_s,{size:12}),"Channels"]}),Se.filter(S=>S.type==="channel").map(S=>c.jsxs("button",{className:j.searchResultItem,onClick:()=>fo(S),type:"button",children:[c.jsx("div",{className:`${j.resultAvatar} ${j.channel}`,children:S.avatar?c.jsx("img",{src:et(S.avatar),alt:S.name}):c.jsx(_s,{size:16})}),c.jsxs("div",{className:j.resultInfo,children:[c.jsx("span",{className:j.resultName,children:S.name}),c.jsx("span",{className:j.resultType,children:"Channel"})]}),c.jsx("div",{className:`${j.resultTypeIcon} ${j.channel}`,children:c.jsx(_s,{size:14})})]},`channel-${S.id}`))]})]}):c.jsxs("div",{className:j.noResults,children:[c.jsx(ol,{size:18,strokeWidth:1.5}),c.jsx("span",{children:"No results found"})]})})]})}),c.jsx("div",{className:j.chatList,children:b?c.jsxs("div",{className:j.loadingChats,children:[c.jsx(zt,{size:24,className:j.spinner}),c.jsx("span",{children:"Loading chats..."})]}):mi.length===0?c.jsxs("div",{className:j.noChats,children:[c.jsx(iu,{size:24,strokeWidth:1.5}),c.jsx("span",{children:"No conversations yet"})]}):mi.map(S=>c.jsxs("div",{className:`${j.chatItem} ${p?.id===S.id?j.active:""}`,onClick:()=>Ou(S),children:[c.jsxs("div",{className:`${j.chatAvatar} ${S.type!=="dm"?j.group:""}`,children:[S.avatar?c.jsx("img",{src:et(S.avatar),alt:S.name}):S.type==="group"?c.jsx(Lt,{size:18,strokeWidth:2}):S.type==="channel"?c.jsx(_s,{size:18,strokeWidth:2}):Fn(S.name),S.type==="dm"&&Vl(S)&&c.jsx("div",{className:j.chatOnlineStatus})]}),c.jsxs("div",{className:j.chatInfo,children:[c.jsxs("div",{className:j.chatNameRow,children:[c.jsx("span",{className:j.chatName,children:S.name}),c.jsx("span",{className:j.chatTime,children:Iu(S)})]}),c.jsxs("div",{className:j.chatPreviewRow,children:[c.jsx("span",{className:j.chatPreview,children:Lu(S)}),S.unreadCount>0&&c.jsx("span",{className:j.unreadBadge,children:S.unreadCount})]})]})]},S.id))}),c.jsx("div",{className:j.sidebarFooter,children:c.jsxs("button",{className:j.settingsButton,onClick:()=>Ua(!0),type:"button",children:[c.jsxs("div",{className:j.userInfo,children:[c.jsx("div",{className:j.userAvatar,children:s?.avatar?c.jsx("img",{src:et(s.avatar),alt:s.username}):Fn(s?.username||"U")}),c.jsxs("div",{className:j.userDetails,children:[c.jsx("span",{className:j.userName,children:s?.username||"User"}),c.jsx("span",{className:j.userStatus,children:"Online"})]})]}),c.jsx(Eh,{size:18,strokeWidth:2})]})})]}),c.jsxs("main",{className:j.mainContent,children:[c.jsxs("div",{className:j.mobileHeader,children:[c.jsx("button",{className:j.mobileMenuBtn,onClick:()=>Ut(!as),"aria-label":"Toggle menu",type:"button",children:c.jsx(ww,{size:20,strokeWidth:2})}),c.jsx("span",{className:j.mobileTitle,children:p?p.name:"Messages"})]}),p?c.jsxs("div",{className:j.chatViewContainer,children:[c.jsxs("div",{className:j.chatHeader,children:[c.jsxs("div",{className:j.chatHeaderLeft,children:[c.jsx("div",{className:`${j.chatHeaderAvatar} ${p.type!=="dm"?j.group:""}`,children:p.avatar?c.jsx("img",{src:et(p.avatar),alt:p.name}):p.type==="group"?c.jsx(Lt,{size:20,strokeWidth:2}):p.type==="channel"?c.jsx(_s,{size:20,strokeWidth:2}):Fn(p.name)}),c.jsxs("div",{className:j.chatHeaderInfo,children:[c.jsx("h3",{className:j.chatHeaderName,children:p.name}),c.jsx("span",{className:j.chatHeaderStatus,children:p.type==="dm"?Vl(p)?"Online":"Offline":`${p.members?.length||p.participantsCount||0} members`})]})]}),c.jsx("div",{className:j.chatHeaderRight,children:p.type!=="dm"&&c.jsx("button",{className:j.chatHeaderBtn,onClick:()=>{Ms(!0),ps(p.id)},title:`${p.type==="channel"?"Channel":"Group"} Info`,type:"button",children:c.jsx(rm,{size:18,strokeWidth:2,style:{flexShrink:0,minWidth:18}})})})]}),(()=>{const S=ee(p.id);return S.length===0?null:c.jsxs("div",{className:j.pinnedBar,children:[c.jsxs("button",{className:j.pinnedBarHeader,onClick:()=>lo(!fs),type:"button",children:[c.jsxs("div",{className:j.pinnedBarLeft,children:[c.jsx(Mh,{size:14}),c.jsxs("span",{children:[S.length," pinned message",S.length!==1?"s":""]})]}),c.jsx(g0,{size:16,className:`${j.pinnedBarChevron} ${fs?j.expanded:""}`})]}),c.jsx(sn,{children:fs&&c.jsx(X.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:j.pinnedBarContent,children:W?c.jsx("div",{className:j.pinnedLoading,children:c.jsx(zt,{size:16,className:j.spinner})}):S.map(F=>c.jsxs("div",{className:j.pinnedItem,children:[c.jsxs("div",{className:j.pinnedItemInfo,children:[c.jsx("span",{className:j.pinnedItemSender,children:F.senderUsername}),c.jsx("span",{className:j.pinnedItemPreview,children:F.content?sv(F.content,50):F.fileUrl?"Attachment":"Empty"})]}),c.jsx("button",{className:j.pinnedItemJump,onClick:()=>hi(F.messageId),type:"button",children:"Jump"})]},F.messageId))})})]})})(),c.jsxs("div",{className:j.messagesContainer,ref:Dn,children:[v?c.jsxs("div",{className:j.loadingMessages,children:[c.jsx(zt,{size:24,className:j.spinner}),c.jsx("span",{children:"Loading messages..."})]}):y.length===0?c.jsxs("div",{className:j.noMessages,children:[c.jsx(iu,{size:24,strokeWidth:1.5}),c.jsx("span",{children:"No messages yet. Start the conversation!"})]}):y.map((S,F)=>c.jsxs("div",{id:`msg-${S.messageId}`,className:`${j.message} ${S.isCurrentUser?j.own:""}`,children:[!S.isCurrentUser&&c.jsx("div",{className:j.messageAvatar,onClick:()=>{S.senderId&&(ea(S.senderId),ln(!0))},style:{cursor:"pointer"},title:`View ${S.senderUsername}'s profile`,children:S.senderAvatarUrl?c.jsx("img",{src:et(S.senderAvatarUrl),alt:S.senderUsername}):Fn(S.senderUsername)}),c.jsxs("div",{className:j.messageBubble,onContextMenu:ie=>Ll(ie,S),onClick:ie=>{if("ontouchstart"in window&&ie.detail===1){const me=ie.target;if(me.closest("button")||me.closest("a")||me.closest(`.${j.replyPreview}`))return;ie.preventDefault(),Pt({messageId:S.messageId,x:ie.clientX,y:ie.clientY})}},children:[!S.isCurrentUser&&p.type!=="dm"&&c.jsx("span",{className:j.messageSender,onClick:ie=>{ie.stopPropagation(),S.senderId&&(ea(S.senderId),ln(!0))},style:{cursor:"pointer"},title:`View ${S.senderUsername}'s profile`,children:S.senderUsername}),S.replyId&&(()=>{const ie=y.find(me=>me.messageId===S.replyId);return c.jsxs("div",{className:j.replyPreview,onClick:()=>ie&&hi(S.replyId),children:[c.jsx(Xf,{size:12}),c.jsx("span",{className:j.replyAuthor,children:ie?.senderUsername||"Unknown"}),c.jsxs("span",{className:j.replyContent,children:[ie?.content?.substring(0,40)||(ie?.fileUrl?" File":"Deleted"),ie?.content&&ie.content.length>40?"...":""]})]})})(),S.fileUrl&&c.jsx("div",{className:j.messageAttachment,children:/\.(jpg|jpeg|png|gif|webp)$/i.test(S.fileUrl)?c.jsx("img",{src:et(S.fileUrl),alt:"Attachment",className:j.attachmentImage}):c.jsxs("a",{href:et(S.fileUrl),target:"_blank",rel:"noopener noreferrer",className:j.attachmentLink,children:[c.jsx(y0,{size:14}),c.jsx("span",{children:"View Attachment"})]})}),S.content&&c.jsx("p",{className:j.messageText,children:S.content}),S.messageReactions&&S.messageReactions.length>0&&(()=>{const ie=S.messageReactions.reduce((me,$e)=>{const Be=$e.reactionType||$e.type||"Like";return me[Be]||(me[Be]={count:0,users:[]}),me[Be].count++,me[Be].users.push($e.userName||$e.userId||"User"),me},{});return c.jsx("div",{className:j.messageReactions,children:Object.entries(ie).map(([me,$e])=>c.jsxs("button",{className:j.reactionBadge,onClick:()=>Ji(S.messageId,Qa[me]||""),title:$e.users.join(", "),children:[Qa[me]||"",$e.count>1&&c.jsx("span",{children:$e.count})]},me))})})(),c.jsxs("div",{className:j.messageFooter,children:[c.jsxs("span",{className:j.messageTime,children:[UE(S.sentAt),S.editedAt&&c.jsx("span",{className:j.editedLabel,children:" (edited)"})]}),"isSeen"in S&&c.jsx("span",{className:`${j.seenIndicator} ${S.isSeen?j.seen:j.delivered}`,children:S.isSeen?"":""})]}),ot?.messageId===S.messageId&&(()=>{const ie=F>=y.length-3,me=180,$e=220;return c.jsxs("div",{ref:fi,className:j.contextMenu,style:{position:"fixed",top:ie?Math.max(10,ot.y-$e):Math.min(ot.y,window.innerHeight-$e-10),left:Math.max(10,ot.x-me)},children:[c.jsx("div",{className:j.contextReactions,children:Uu.map(Be=>c.jsx("button",{className:j.contextReactionBtn,onClick:()=>Ji(S.messageId,Be),children:Be},Be))}),c.jsx("div",{className:j.contextDivider}),c.jsxs("button",{className:j.contextMenuItem,onClick:()=>Wa(S),children:[c.jsx(Xf,{size:14})," Reply"]}),c.jsxs("button",{className:j.contextMenuItem,onClick:()=>Us(S),children:[c.jsx(Mh,{size:14})," ",S.isPinned?"Unpin":"Pin"]}),S.isCurrentUser&&c.jsxs("button",{className:j.contextMenuItem,onClick:()=>Il(S),children:[c.jsx(b0,{size:14})," Edit"]}),S.isCurrentUser&&c.jsxs("button",{className:`${j.contextMenuItem} ${j.danger}`,onClick:()=>Zt(S.messageId),children:[c.jsx(lm,{size:14})," Delete"]})]})})()]})]},S.messageId)),c.jsx("div",{ref:hs})]}),Xr&&c.jsx("button",{className:j.scrollToBottomBtn,onClick:Ka,type:"button","aria-label":"Scroll to bottom",children:c.jsx(g0,{size:18})}),c.jsx("div",{className:j.messageInputContainer,children:Z?c.jsx("div",{className:j.inputDisabledNotice,children:c.jsx("span",{children:I?"You have blocked this user. Unblock to send messages.":"You cannot message this user."})}):!Re&&p.type!=="dm"?c.jsx("div",{className:j.inputDisabledNotice,children:c.jsx("span",{children:"You don't have permission to send messages in this chat."})}):c.jsxs(c.Fragment,{children:[An&&c.jsxs("div",{className:j.replyBar,children:[c.jsxs("div",{className:j.replyBarContent,children:[c.jsx("div",{className:j.replyBarIcon,children:c.jsx(Xf,{size:14})}),c.jsxs("div",{className:j.replyBarInfo,children:[c.jsxs("span",{className:j.replyBarLabel,children:["Replying to ",An.senderUsername]}),c.jsxs("span",{className:j.replyBarText,children:[An.content?.substring(0,50)||" Attachment",An.content&&An.content.length>50?"...":""]})]})]}),c.jsx("button",{className:j.replyBarClose,onClick:()=>rs(null),type:"button",children:c.jsx(It,{size:14})})]}),lt&&c.jsxs("div",{className:j.editBar,children:[c.jsxs("div",{className:j.editBarContent,children:[c.jsx("div",{className:j.editBarIcon,children:c.jsx(b0,{size:14})}),c.jsxs("div",{className:j.editBarInfo,children:[c.jsx("span",{className:j.editBarLabel,children:"Editing message"}),c.jsxs("span",{className:j.editBarText,children:[lt.content?.substring(0,50)||"",lt.content&&lt.content.length>50?"...":""]})]})]}),c.jsx("button",{className:j.editBarClose,onClick:()=>{kn(null),En("")},type:"button",children:c.jsx(It,{size:14})})]}),kt&&c.jsxs("div",{className:j.filePreview,children:[c.jsx("span",{className:j.fileName,children:kt.name}),c.jsx("button",{className:j.removeFile,onClick:()=>{ni(null),ms.current&&(ms.current.value="")},children:c.jsx(It,{size:14})})]}),c.jsxs("div",{className:j.messageInputRow,children:[c.jsx("input",{type:"file",ref:ms,className:j.fileInput,onChange:S=>{S.preventDefault(),S.stopPropagation();const F=S.target.files?.[0]||null;console.log("[DashboardLayout] File selected:",F?.name,F?.size),ni(F)}}),c.jsx("button",{className:j.attachBtn,onClick:()=>ms.current?.click(),type:"button",children:c.jsx(y0,{size:18,strokeWidth:2})}),c.jsx("input",{type:"text",className:j.messageInput,placeholder:"Type a message...",value:Tn,onChange:S=>En(S.target.value),onKeyPress:ho,disabled:Wn}),c.jsx("button",{className:j.sendBtn,onClick:S=>Hl(S),disabled:!Tn.trim()&&!kt||Wn,type:"button",children:Wn?c.jsx(zt,{size:18,className:j.spinner}):c.jsx(_w,{size:18,strokeWidth:2})})]})]})})]}):c.jsxs("div",{className:j.emptyState,children:[c.jsx("div",{className:j.emptyStateIcon,children:c.jsx(iu,{size:32,strokeWidth:1.5})}),c.jsx("h2",{className:j.emptyStateTitle,children:"Select a conversation"}),c.jsx("p",{className:j.emptyStateText,children:"Choose a chat from the sidebar to start messaging"})]}),!rn&&p&&c.jsx("button",{className:j.togglePanelBtn,onClick:()=>Xn(!0),"aria-label":"Open panel",type:"button",children:c.jsx(Cw,{size:16,strokeWidth:2})})]}),c.jsxs("aside",{className:`${j.rightPanel} ${rn?"":j.collapsed}`,children:[c.jsxs("div",{className:j.rightPanelHeader,children:[c.jsx("span",{className:j.rightPanelTitle,children:"Details"}),c.jsx("button",{className:j.closePanel,onClick:()=>Xn(!1),"aria-label":"Close panel",type:"button",children:c.jsx(It,{size:16,strokeWidth:2})})]}),c.jsx("div",{className:j.rightPanelContent,children:p?c.jsxs("div",{className:`${j.panelDetails} ${j.clickable}`,onClick:()=>{if(console.log("[DashboardLayout] Panel details clicked",{chatType:p.type,members:p.members,currentUserId:s?.id}),p.type==="dm"){const S=Ve();console.log("[DashboardLayout] DM profile click, otherUserId:",S),S?(ln(!0),ea(S)):console.warn("[DashboardLayout] Could not find other user in DM")}else(p.type==="group"||p.type==="channel")&&(Ms(!0),ps(p.id))},children:[c.jsx("div",{className:j.panelAvatar,children:p.avatar?c.jsx("img",{src:et(p.avatar),alt:p.name}):p.type==="group"?c.jsx(Lt,{size:32,strokeWidth:1.5}):p.type==="channel"?c.jsx(_s,{size:32,strokeWidth:1.5}):c.jsx("span",{children:Fn(p.name)})}),c.jsx("h3",{className:j.panelName,children:p.name}),c.jsx("p",{className:j.panelType,children:p.type==="dm"?"Direct Message":p.type==="group"?"Group Chat":"Channel"}),p.description&&c.jsx("p",{className:j.panelDescription,children:p.description}),p.type!=="dm"&&c.jsxs("div",{className:j.panelMemberCount,children:[c.jsx(Lt,{size:16}),c.jsxs("span",{children:[p.members?.length||p.participantsCount||0," members"]})]}),c.jsx("p",{className:j.panelClickHint,children:p.type==="dm"?"Click to view profile":"Click to view details"})]}):c.jsxs("div",{className:j.panelPlaceholder,children:[c.jsx(Lt,{size:28,strokeWidth:1.5}),c.jsx("p",{children:"Select a conversation to view details"})]})})]})]}),c.jsx(_4,{isOpen:Ht,onClose:()=>Ua(!1),onCreateGroup:()=>{Bn(),os(!0)},onCreateChannel:()=>{Bn(),Es(!0)},onEditProfile:po,onShowNotifications:()=>we(!0),onShowAdminPanel:()=>He(!0),onShowBlockedUsers:()=>Rl(!0),isDarkMode:f,onToggleDarkMode:r,onLogout:n,fancyAnimations:l,onToggleFancyAnimations:d}),qi&&c.jsx(i3,{isOpen:Ia,onClose:()=>{ln(!1),ls(null)},userId:qi,onSendMessage:S=>{Hu(S)},onBlockUser:S=>{Pu(S)},onUnblockUser:S=>{$l(S)},fancyAnimations:l}),p&&p.type!=="dm"&&c.jsx(m3,{isOpen:Du,onClose:()=>Ms(!1),chat:p,currentUserId:s?.id||"",onEditGroup:Xu,onDeleteGroup:Gu,onLeaveGroup:Fl,onKickMember:mo,onViewUserProfile:S=>{Ms(!1),ea(S),ln(!0)},onBanMember:async S=>{await qu(S)},onUnbanMember:async S=>{await ql(S)},onUpdatePrivacy:async S=>{await Yu(S)},fancyAnimations:l}),c.jsx(sn,{children:oi&&p&&c.jsx(X.div,{className:j.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Yi(!1),children:c.jsxs(X.div,{className:j.subModal,style:{maxWidth:"400px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:j.subModalHeader,children:[c.jsxs("h3",{children:["Edit ",p.type==="channel"?"Channel":"Group"]}),c.jsx("button",{onClick:()=>Yi(!1),type:"button",disabled:yt,children:c.jsx(It,{size:18})})]}),c.jsxs("div",{className:j.subModalContent,style:{padding:"20px",position:"relative"},children:[yt&&c.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.4)",borderRadius:"0 0 12px 12px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(2px)"},children:c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",color:"var(--dash-text)"},children:[c.jsx(zt,{size:32,className:j.spinner,style:{color:"var(--dash-primary)"}}),c.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"Saving changes..."})]})}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"24px",opacity:yt?.5:1,pointerEvents:yt?"none":"auto"},children:[c.jsxs("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"var(--dash-surface-elevated)",border:"2px solid var(--dash-border-light)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:yt?"not-allowed":"pointer",position:"relative"},onClick:()=>!yt&&document.getElementById("editGroupAvatarInput")?.click(),children:[$t?c.jsx("img",{src:$t,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):p.type==="channel"?c.jsx(_s,{size:40,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}):c.jsx(Lt,{size:40,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}),c.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",padding:"4px",textAlign:"center",fontSize:"11px",color:"var(--dash-text)"},children:"Change"})]}),c.jsx("input",{type:"file",id:"editGroupAvatarInput",accept:"image/*",style:{display:"none"},onChange:Wu}),c.jsx("span",{style:{fontSize:"12px",color:"var(--dash-text-muted)",marginTop:"8px"},children:"Click to change avatar"})]}),c.jsxs("div",{style:{marginBottom:"16px",opacity:yt?.5:1},children:[c.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"6px"},children:"Name"}),c.jsx("input",{type:"text",value:us,onChange:S=>so(S.target.value),placeholder:`${p.type==="channel"?"Channel":"Group"} name`,disabled:yt,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",cursor:yt?"not-allowed":"text"}})]}),c.jsxs("div",{style:{marginBottom:"24px",opacity:yt?.5:1},children:[c.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"6px"},children:"Description"}),c.jsx("textarea",{value:io,onChange:S=>Xi(S.target.value),placeholder:"Add a description...",rows:3,disabled:yt,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",resize:"none",cursor:yt?"not-allowed":"text"}})]}),c.jsxs("div",{style:{display:"flex",gap:"12px",opacity:yt?.5:1},children:[c.jsx("button",{onClick:()=>Yi(!1),disabled:yt,style:{flex:1,padding:"10px 16px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",fontWeight:500,cursor:yt?"not-allowed":"pointer"},children:"Cancel"}),c.jsx("button",{onClick:Ku,disabled:yt||!us.trim(),style:{flex:1,padding:"10px 16px",background:"var(--dash-primary)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"14px",fontWeight:500,cursor:yt||!us.trim()?"not-allowed":"pointer",opacity:yt||!us.trim()?.6:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:yt?c.jsxs(c.Fragment,{children:[c.jsx(zt,{size:16,className:j.spinner}),"Saving..."]}):"Save Changes"})]})]})]})})}),c.jsx(sn,{children:cs&&c.jsx(X.div,{className:j.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>gt(!1),children:c.jsxs(X.div,{className:j.subModal,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:j.subModalHeader,children:[c.jsx("h3",{children:"Add Member"}),c.jsx("button",{onClick:()=>gt(!1),type:"button",children:c.jsx(It,{size:18})})]}),c.jsxs("div",{className:j.subModalSearch,children:[c.jsx(ol,{size:14}),c.jsx("input",{type:"text",placeholder:"Search users to add...",value:Vt,onChange:S=>Vu(S.target.value),autoFocus:!0})]}),c.jsxs("div",{className:j.subModalContent,children:[zl&&c.jsxs("div",{className:j.subModalLoading,children:[c.jsx(zt,{size:20,className:j.spinner}),c.jsx("span",{children:"Searching..."})]}),!zl&&Vt&&Va.length===0&&c.jsx("div",{className:j.subModalEmpty,children:"No users found"}),Va.map(S=>c.jsxs("div",{className:j.subModalItem,children:[c.jsx("div",{className:j.subModalItemAvatar,children:S.avatar?c.jsx("img",{src:et(S.avatar),alt:S.username}):c.jsx("span",{children:Fn(S.username)})}),c.jsx("div",{className:j.subModalItemInfo,children:c.jsx("span",{className:j.subModalItemName,children:S.username})}),c.jsx("button",{className:j.subModalItemBtn,onClick:()=>$u(S.id),type:"button",children:"Add"})]},S.id))]})]})})}),c.jsx(sn,{children:Gi&&c.jsx(X.div,{className:j.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>$a(!1),children:c.jsxs(X.div,{className:j.subModal,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:j.subModalHeader,children:[c.jsxs("h3",{children:[c.jsx(Ii,{size:18}),"Banned Users"]}),c.jsx("button",{onClick:()=>$a(!1),type:"button",children:c.jsx(It,{size:18})})]}),c.jsxs("div",{className:j.subModalContent,children:[ri&&c.jsxs("div",{className:j.subModalLoading,children:[c.jsx(zt,{size:20,className:j.spinner}),c.jsx("span",{children:"Loading..."})]}),!ri&&ks.length===0&&c.jsx("div",{className:j.subModalEmpty,children:"No banned users"}),ks.map(S=>c.jsxs("div",{className:j.subModalItem,children:[c.jsx("div",{className:j.subModalItemAvatar,children:S.avatarUrl?c.jsx("img",{src:et(S.avatarUrl),alt:S.username}):c.jsx("span",{children:Fn(S.username)})}),c.jsxs("div",{className:j.subModalItemInfo,children:[c.jsx("span",{className:j.subModalItemName,children:S.username}),c.jsxs("span",{className:j.subModalItemMeta,children:["Banned ",new Date(S.bannedAt).toLocaleDateString()]})]}),c.jsx("button",{className:`${j.subModalItemBtn} ${j.unban}`,onClick:()=>ql(S.userId,S.username),type:"button",children:"Unban"})]},S.userId))]})]})})}),p&&no&&c.jsx(k1,{isOpen:wt,onClose:()=>{Bl(!1),Ns(null)},chatId:p.id,member:no,onPermissionsChanged:async()=>{p&&await ps(p.id)}}),c.jsx(sn,{children:Oa&&c.jsx(X.div,{className:j.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{Te||(os(!1),Bn())},children:c.jsxs(X.div,{className:j.subModal,style:{maxWidth:"420px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:j.subModalHeader,children:[c.jsx("h3",{children:"Create Group"}),c.jsx("button",{onClick:()=>{Te||(os(!1),Bn())},type:"button",disabled:Te,children:c.jsx(It,{size:18})})]}),c.jsxs("div",{className:j.subModalContent,style:{padding:"20px",position:"relative"},children:[Te&&c.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.4)",borderRadius:"0 0 12px 12px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(2px)"},children:c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",color:"var(--dash-text)"},children:[c.jsx(zt,{size:32,className:j.spinner,style:{color:"var(--dash-primary)"}}),c.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"Creating group..."})]})}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px",opacity:Te?.5:1},children:[c.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"var(--dash-surface-elevated)",border:"2px solid var(--dash-border-light)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:Te?"not-allowed":"pointer",position:"relative"},onClick:()=>!Te&&document.getElementById("createGroupAvatarInput")?.click(),children:[ui?c.jsx("img",{src:ui,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):c.jsx(Lt,{size:32,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}),c.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",padding:"3px",textAlign:"center",fontSize:"10px",color:"var(--dash-text)"},children:"Add Photo"})]}),c.jsx("input",{type:"file",id:"createGroupAvatarInput",accept:"image/*",style:{display:"none"},onChange:Gl})]}),c.jsxs("div",{style:{marginBottom:"14px",opacity:Te?.5:1},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Group Name *"}),c.jsx("input",{type:"text",value:Kt,onChange:S=>li(S.target.value),placeholder:"Enter group name",disabled:Te,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none"}})]}),c.jsxs("div",{style:{marginBottom:"14px",opacity:Te?.5:1},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Description"}),c.jsx("textarea",{value:Fa,onChange:S=>Qt(S.target.value),placeholder:"Add a description (optional)",rows:2,disabled:Te,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",resize:"none"}})]}),c.jsxs("div",{style:{marginBottom:"20px",opacity:Te?.5:1},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"8px"},children:"Privacy"}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{type:"button",onClick:()=>Ki("public"),disabled:Te,style:{flex:1,padding:"10px",background:bt==="public"?"var(--dash-primary)":"var(--dash-surface)",border:`1px solid ${bt==="public"?"var(--dash-primary)":"var(--dash-border)"}`,borderRadius:"8px",color:bt==="public"?"#fff":"var(--dash-text)",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Public"}),c.jsx("button",{type:"button",onClick:()=>Ki("private"),disabled:Te,style:{flex:1,padding:"10px",background:bt==="private"?"var(--dash-primary)":"var(--dash-surface)",border:`1px solid ${bt==="private"?"var(--dash-primary)":"var(--dash-border)"}`,borderRadius:"8px",color:bt==="private"?"#fff":"var(--dash-text)",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Private"})]})]}),c.jsxs("div",{style:{display:"flex",gap:"10px"},children:[c.jsx("button",{onClick:()=>{os(!1),Bn()},disabled:Te,style:{flex:1,padding:"10px 16px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Cancel"}),c.jsx("button",{onClick:Qu,disabled:Te||!Kt.trim(),style:{flex:1,padding:"10px 16px",background:"var(--dash-primary)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"14px",fontWeight:500,cursor:Te||!Kt.trim()?"not-allowed":"pointer",opacity:Te||!Kt.trim()?.6:1},children:"Create Group"})]})]})]})})}),c.jsx(sn,{children:si&&c.jsx(X.div,{className:j.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{Te||(Es(!1),Bn())},children:c.jsxs(X.div,{className:j.subModal,style:{maxWidth:"420px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:j.subModalHeader,children:[c.jsx("h3",{children:"Create Channel"}),c.jsx("button",{onClick:()=>{Te||(Es(!1),Bn())},type:"button",disabled:Te,children:c.jsx(It,{size:18})})]}),c.jsxs("div",{className:j.subModalContent,style:{padding:"20px",position:"relative"},children:[Te&&c.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.4)",borderRadius:"0 0 12px 12px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(2px)"},children:c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",color:"var(--dash-text)"},children:[c.jsx(zt,{size:32,className:j.spinner,style:{color:"var(--dash-primary)"}}),c.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"Creating channel..."})]})}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px",opacity:Te?.5:1},children:[c.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"var(--dash-surface-elevated)",border:"2px solid var(--dash-border-light)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:Te?"not-allowed":"pointer",position:"relative"},onClick:()=>!Te&&document.getElementById("createChannelAvatarInput")?.click(),children:[ui?c.jsx("img",{src:ui,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):c.jsx(_s,{size:32,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}),c.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",padding:"3px",textAlign:"center",fontSize:"10px",color:"var(--dash-text)"},children:"Add Photo"})]}),c.jsx("input",{type:"file",id:"createChannelAvatarInput",accept:"image/*",style:{display:"none"},onChange:Gl})]}),c.jsxs("div",{style:{marginBottom:"14px",opacity:Te?.5:1},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Channel Name *"}),c.jsx("input",{type:"text",value:Kt,onChange:S=>li(S.target.value),placeholder:"Enter channel name",disabled:Te,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none"}})]}),c.jsxs("div",{style:{marginBottom:"14px",opacity:Te?.5:1},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Description"}),c.jsx("textarea",{value:Fa,onChange:S=>Qt(S.target.value),placeholder:"Add a description (optional)",rows:2,disabled:Te,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",resize:"none"}})]}),c.jsxs("div",{style:{marginBottom:"20px",opacity:Te?.5:1},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"8px"},children:"Privacy"}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{type:"button",onClick:()=>Ki("public"),disabled:Te,style:{flex:1,padding:"10px",background:bt==="public"?"var(--dash-primary)":"var(--dash-surface)",border:`1px solid ${bt==="public"?"var(--dash-primary)":"var(--dash-border)"}`,borderRadius:"8px",color:bt==="public"?"#fff":"var(--dash-text)",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Public"}),c.jsx("button",{type:"button",onClick:()=>Ki("private"),disabled:Te,style:{flex:1,padding:"10px",background:bt==="private"?"var(--dash-primary)":"var(--dash-surface)",border:`1px solid ${bt==="private"?"var(--dash-primary)":"var(--dash-border)"}`,borderRadius:"8px",color:bt==="private"?"#fff":"var(--dash-text)",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Private"})]})]}),c.jsxs("div",{style:{display:"flex",gap:"10px"},children:[c.jsx("button",{onClick:()=>{Es(!1),Bn()},disabled:Te,style:{flex:1,padding:"10px 16px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Cancel"}),c.jsx("button",{onClick:Zu,disabled:Te||!Kt.trim(),style:{flex:1,padding:"10px 16px",background:"var(--dash-primary)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"14px",fontWeight:500,cursor:Te||!Kt.trim()?"not-allowed":"pointer",opacity:Te||!Kt.trim()?.6:1},children:"Create Channel"})]})]})]})})}),c.jsx(sn,{children:La&&c.jsx(X.div,{className:j.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{Rt||on(!1)},children:c.jsxs(X.div,{className:j.subModal,style:{maxWidth:"420px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:j.subModalHeader,children:[c.jsx("h3",{children:"Edit Profile"}),c.jsx("button",{onClick:()=>{Rt||on(!1)},type:"button",disabled:Rt,children:c.jsx(It,{size:18})})]}),c.jsxs("div",{className:j.subModalContent,style:{padding:"20px",position:"relative"},children:[Rt&&c.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.4)",borderRadius:"0 0 12px 12px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(2px)"},children:c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",color:"var(--dash-text)"},children:[c.jsx(zt,{size:32,className:j.spinner,style:{color:"var(--dash-primary)"}}),c.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"Saving profile..."})]})}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px",opacity:Rt?.5:1},children:[c.jsxs("div",{style:{width:"90px",height:"90px",borderRadius:"50%",background:"var(--dash-surface-elevated)",border:"2px solid var(--dash-border-light)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:Rt?"not-allowed":"pointer",position:"relative"},onClick:()=>!Rt&&document.getElementById("editProfileAvatarInput")?.click(),children:[Nn?c.jsx("img",{src:Nn,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):c.jsx(mu,{size:36,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}),c.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",padding:"3px",textAlign:"center",fontSize:"10px",color:"var(--dash-text)"},children:"Change Photo"})]}),c.jsx("input",{type:"file",id:"editProfileAvatarInput",accept:"image/*",style:{display:"none"},onChange:ta})]}),c.jsxs("div",{style:{marginBottom:"14px",opacity:Rt?.5:1},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Username *"}),c.jsx("input",{type:"text",value:zs,onChange:S=>oo(S.target.value),placeholder:"Enter username",disabled:Rt,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none"}})]}),c.jsxs("div",{style:{marginBottom:"20px",opacity:Rt?.5:1},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Bio"}),c.jsx("textarea",{value:Ga,onChange:S=>Ul(S.target.value),placeholder:"Tell us about yourself (optional)",rows:3,disabled:Rt,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",resize:"none"}})]}),c.jsxs("div",{style:{display:"flex",gap:"10px"},children:[c.jsx("button",{onClick:()=>on(!1),disabled:Rt,style:{flex:1,padding:"10px 16px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Cancel"}),c.jsx("button",{onClick:Ju,disabled:Rt||!zs.trim(),style:{flex:1,padding:"10px 16px",background:"var(--dash-primary)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"14px",fontWeight:500,cursor:Rt||!zs.trim()?"not-allowed":"pointer",opacity:Rt||!zs.trim()?.6:1},children:"Save Changes"})]})]})]})})}),c.jsx(sn,{children:K&&c.jsx(X.div,{className:j.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>we(!1),children:c.jsxs(X.div,{className:j.subModal,style:{maxWidth:"400px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:j.subModalHeader,children:[c.jsx("h3",{children:"Notifications"}),c.jsx("button",{onClick:()=>we(!1),type:"button",children:c.jsx(It,{size:18})})]}),c.jsxs("div",{className:j.subModalContent,style:{padding:"24px",textAlign:"center"},children:[c.jsx(am,{size:48,style:{color:"var(--dash-primary)",marginBottom:"16px"}}),c.jsx("p",{style:{color:"var(--dash-text-secondary)",fontSize:"14px"},children:"No new notifications"})]})]})})}),c.jsx(p4,{isOpen:Ie,onClose:()=>He(!1),isDarkMode:f}),c.jsx(p3,{isOpen:pt,onClose:()=>Rl(!1),isDarkMode:f})]})},su={getNotifications:async()=>{try{console.log("[NotificationService] Fetching notifications from GET /notifications");const s=await fe.get("/notifications");console.log("[NotificationService] Raw API Response:",{status:s.status,statusText:s.statusText,data:s.data});let n=[];s.data?.success&&s.data?.data?(n=s.data.data,console.log("[NotificationService] Got notifications from response.data.data:",n.length,"items")):s.data&&Array.isArray(s.data)?(n=s.data,console.log("[NotificationService] Response is direct array:",n.length,"items")):(console.log("[NotificationService] Unexpected response format:",s.data),n=[]);const i=Array.isArray(n)?n.map(r=>({id:r.notificationId||r.id,chatId:r.chatId,messageId:r.messageId,chatName:r.chatName||"",chatAvatar:r.chatAvatar||"",senderName:r.senderName||"",content:r.content||"",fileUrl:r.fileUrl,sentTime:r.sentTime||new Date().toISOString(),seen:r.seen!==void 0?r.seen:!1})):[];return console.log("[NotificationService] Returning",i.length,"normalized notifications"),i}catch(s){return console.error("[NotificationService] Failed to fetch notifications:",s.message),console.error("[NotificationService] Error details:",{status:s.response?.status,statusText:s.response?.statusText,data:s.response?.data,url:s.config?.url}),[]}},markAsSeen:async s=>{try{console.log("[NotificationService] Marking notification as seen:",s);const n=await fe.put(`/notifications/seen?notificationId=${s}`);return console.log("[NotificationService] Mark as seen response:",n.data),n.data?.data||n.data}catch(n){throw console.error("[NotificationService] Failed to mark notification as seen:",n),console.error("[NotificationService] Error details:",{status:n.response?.status,statusText:n.response?.statusText,data:n.response?.data}),n}},markMultipleAsSeen:async s=>{try{if(!Array.isArray(s)||s.length===0)return console.warn("[NotificationService] No notification IDs provided"),{success:!0};console.log("[NotificationService] Marking multiple notifications as seen:",s),console.log("[NotificationService] Notification IDs (type, count):",typeof s[0],s.length);const n={notificationIds:s};console.log("[NotificationService] Request body:",JSON.stringify(n));const i=await fe.put("/notifications/seen/batch",n);return console.log("[NotificationService] Mark multiple response:",{status:i.status,statusText:i.statusText,data:i.data}),i.data?.success||i.status===200?(console.log("[NotificationService] Successfully marked",s.length,"notifications as seen"),i.data||{success:!0}):(console.warn("[NotificationService] Response indicates potential issue:",i.data),i.data||{success:!0})}catch(n){throw console.error("[NotificationService] Failed to mark multiple notifications as seen:",n),console.error("[NotificationService] Full error details:",{message:n.message,status:n.response?.status,statusText:n.response?.statusText,responseData:n.response?.data,requestData:n.config?.data,headers:n.config?.headers}),n}},markAllAsSeen:async()=>{try{const s=await fe.put("/notifications/seen/all");return s.data?.data||s.data}catch(s){throw console.warn("[NotificationService] PUT /notifications/seen/all may not be implemented:",s),s}}},j4=Sl(s=>({notifications:[],isLoading:!1,error:null,loadNotifications:async()=>{s({isLoading:!0,error:null});try{const n=await su.getNotifications();s({notifications:n,isLoading:!1})}catch(n){const i=n.response?.data?.message||"Failed to load notifications";s({error:i,isLoading:!1})}},markAsSeen:async n=>{s({error:null});try{await su.markAsSeen(n),s(i=>({notifications:i.notifications.map(r=>r.id===n?{...r,seen:!0}:r)}))}catch(i){const r=i.response?.data?.message||"Failed to mark notification as seen";s({error:r})}},markMultipleAsSeen:async n=>{s({error:null});try{await su.markMultipleAsSeen(n),s(i=>({notifications:i.notifications.map(r=>n.includes(r.id)?{...r,seen:!0}:r)}))}catch(i){const r=i.response?.data?.message||"Failed to mark notifications as seen";s({error:r})}},markAllAsSeen:async()=>{s({error:null});try{await su.markAllAsSeen(),s(n=>({notifications:n.notifications.map(i=>({...i,seen:!0}))}))}catch(n){const i=n.response?.data?.message||"Failed to mark all notifications as seen";s({error:i})}},clearError:()=>s({error:null}),handleNewNotification:n=>{console.log("[NotificationStore] New notification:",n),s(i=>{const r={id:n.messageId,messageId:n.messageId,chatId:n.chatId,chatName:n.chatName,chatAvatar:n.chatAvatar,senderName:n.senderName,content:n.content,sentTime:n.sentTime,seen:!1,fileUrl:n.fileUrl};return i.notifications.some(d=>d.chatId===r.chatId&&d.sentTime===r.sentTime)?i:{notifications:[r,...i.notifications]}})}})),T4="_container_nzeaj_52",E4="_toast_nzeaj_64",M4="_slideIn_nzeaj_1",A4="_glowPulse_nzeaj_1",k4="_exit_nzeaj_84",R4="_slideOut_nzeaj_1",N4="_success_nzeaj_89",D4="_error_nzeaj_97",z4="_warning_nzeaj_105",B4="_info_nzeaj_113",U4="_iconWrapper_nzeaj_120",O4="_iconBounce_nzeaj_1",L4="_message_nzeaj_134",I4="_closeBtn_nzeaj_143",P4="_progressBar_nzeaj_168",H4="_progressShrink_nzeaj_1",wa={container:T4,toast:E4,slideIn:M4,glowPulse:A4,exit:k4,slideOut:R4,success:N4,error:D4,warning:z4,info:B4,iconWrapper:U4,iconBounce:O4,message:L4,closeBtn:I4,progressBar:P4,progressShrink:H4},V4=({toast:s,onClose:n})=>{const[i,r]=_.useState(!1);_.useEffect(()=>{const f=s.duration||4e3,m=setTimeout(()=>{r(!0)},f-300),p=setTimeout(()=>{n(s.id)},f);return()=>{clearTimeout(m),clearTimeout(p)}},[s.id,s.duration,n]);const l=()=>{r(!0),setTimeout(()=>n(s.id),300)},d=()=>{switch(s.type){case"success":return c.jsx(bv,{size:22});case"error":return c.jsx(jw,{size:22});case"warning":return c.jsx(Da,{size:22});case"info":return c.jsx(rm,{size:22})}};return c.jsxs("div",{className:`${wa.toast} ${wa[s.type]} ${i?wa.exit:""}`,children:[c.jsx("div",{className:wa.iconWrapper,children:d()}),c.jsx("span",{className:wa.message,children:s.message}),c.jsx("button",{onClick:l,"aria-label":"Close",style:{background:"rgba(255, 255, 255, 0.15)",border:"none",borderRadius:"6px",color:"#ffffff",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"8px",fontSize:"16px",fontWeight:"bold",lineHeight:1},children:""}),c.jsx("div",{className:wa.progressBar,style:{animationDuration:`${s.duration||4e3}ms`}})]})},$4=({toasts:s,onClose:n})=>c.jsx("div",{className:wa.container,children:s.map(i=>c.jsx(V4,{toast:i,onClose:n},i.id))});class q4{toasts=[];listeners=[];subscribe(n){return this.listeners.push(n),()=>{this.listeners=this.listeners.filter(i=>i!==n)}}notify(){this.listeners.forEach(n=>n([...this.toasts]))}show(n,i,r){const l=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,d={id:l,type:n,message:i,duration:r};return this.toasts.push(d),this.notify(),l}success(n,i){return this.show("success",n,i)}error(n,i){return this.show("error",n,i||5e3)}warning(n,i){return this.show("warning",n,i)}info(n,i){return this.show("info",n,i)}remove(n){this.toasts=this.toasts.filter(i=>i.id!==n),this.notify()}getToasts(){return[...this.toasts]}}const gv=new q4;function F4(){const{isAuthenticated:s}=Tl();return console.log("[AppRoutes] Rendering with isAuthenticated:",s),c.jsxs(lw,{children:[c.jsx(Er,{path:"/",element:s?c.jsx(kr,{to:"/dashboard",replace:!0}):c.jsx(tE,{})}),c.jsx(Er,{path:"/login",element:s?c.jsx(kr,{to:"/dashboard",replace:!0}):c.jsx(zE,{})}),c.jsx(Er,{path:"/register",element:s?c.jsx(kr,{to:"/dashboard",replace:!0}):c.jsx(HE,{})}),c.jsx(Er,{path:"/forgot-password",element:s?c.jsx(kr,{to:"/dashboard",replace:!0}):c.jsx(GE,{})}),c.jsx(Er,{path:"/dashboard",element:c.jsx(bC,{children:c.jsx(C4,{})})}),c.jsx(Er,{path:"*",element:c.jsx(kr,{to:"/",replace:!0})})]})}function G4(){const{isAuthenticated:s}=Tl(),[n,i]=_.useState([]);_.useEffect(()=>gv.subscribe(i),[]);const r=l=>{gv.remove(l)};_.useEffect(()=>{(async()=>{console.log("[App] Initializing auth from localStorage..."),await tt.getState().initializeAuth(),console.log("[App] Auth initialization complete")})()},[]),_.useEffect(()=>{if(!s){console.log("[App] Not authenticated, skipping SignalR initialization");return}console.log("[App] Setting up SignalR event handlers...");const l=Cn.getState(),d=j4.getState();return Js.setEventHandlers({onUserOnline:m=>{l.handleUserOnline(m)},onUserOffline:m=>{l.handleUserOffline({...m,lastSeen:m.lastSeen||new Date().toISOString()})},onReceiveMessage:m=>{l.handleReceiveMessage(m)},onMessageEdited:m=>{l.handleMessageEdited(m)},onMessageDeleted:m=>{l.handleMessageDeleted(m)},onReactionAdded:m=>{l.handleReactionAdded(m)},onReactionRemoved:m=>{l.handleReactionRemoved(m)},onUserTyping:m=>{l.handleUserTyping(m)},onUserStoppedTyping:m=>{l.handleUserStoppedTyping(m)},onNewNotification:m=>{d.handleNewNotification(m)},onMessagePinned:m=>{l.handleMessagePinned(m)},onMessageUnpinned:m=>{l.handleMessageUnpinned(m)},onAddedToChat:m=>{l.handleAddedToChat(m)},onNewConversation:m=>{l.handleNewConversation(m)},onConversationCreated:m=>{l.handleConversationCreated(m)},onPermissionGranted:m=>{l.handlePermissionGranted(m)},onPermissionRevoked:m=>{l.handlePermissionRevoked(m)},onAllPermissionsRevoked:m=>{l.handleAllPermissionsRevoked(m)},onUserBlockedYou:m=>{l.handleUserBlockedYou(m)},onYouBlockedUser:m=>{l.handleYouBlockedUser(m)},onUserUnblockedYou:m=>{l.handleUserUnblockedYou(m)},onYouUnblockedUser:m=>{l.handleYouUnblockedUser(m)},onChatDeleted:m=>{l.handleChatDeleted(m)},onRemovedFromChat:m=>{l.handleRemovedFromChat(m)},onMessagesMarkedSeen:m=>{l.handleMessagesMarkedSeen(m)},onError:m=>{console.error("[App] SignalR Error:",m)}}),(async()=>{try{console.log("[App] Starting SignalR connection..."),await Js.start(),console.log("[App] SignalR connected successfully");const m=Cn.getState();m.chats.length===0&&(console.log("[App] Loading chats before fetching presence states..."),await m.loadChats());const p=new Set;m.chats.forEach(b=>{b.members&&b.members.forEach(v=>{const w=v.userId||v.id||v.user?.id;w&&p.add(w)})});const y=Array.from(p);if(y.length>0){console.log("[App] Fetching presence states for",y.length,"users:",y);try{const b=await Js.getPresenceStates(y);console.log("[App] Received presence states:",b),console.log("[App] Presence states type check:",typeof b,Object.keys(b).length,"keys"),m.setInitialPresenceStates(b),console.log("[App] Presence states initialized successfully"),console.log("[App] OnlineUsers map after init:",m.onlineUsers)}catch(b){console.error("[App] Failed to fetch initial presence states:",b)}}else console.log("[App] No user IDs available from chat list - presence will be fetched when chats are opened")}catch(m){console.error("[App] Failed to start SignalR:",m)}})(),()=>{console.log("[App] Stopping SignalR connection..."),Js.stop()}},[s]);try{return c.jsxs(c.Fragment,{children:[c.jsx(ow,{children:c.jsx(F4,{})}),c.jsx($4,{toasts:n,onClose:r}),c.jsx(KA,{})]})}catch(l){return console.error("App Error:",l),c.jsxs("div",{style:{padding:"20px",color:"red"},children:[c.jsx("h1",{children:"Error Loading Application"}),c.jsx("p",{children:"Check browser console for details"}),c.jsx("pre",{children:String(l)})]})}}const R1=document.getElementById("root");if(!R1)throw new Error("Root element not found");console.log("React app starting...");Nw.createRoot(R1).render(c.jsx(_.StrictMode,{children:c.jsx(G4,{})}));console.log("React app rendered");export{fe as a};
