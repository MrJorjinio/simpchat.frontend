const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/permission.service-mWIygohH.js","assets/vendor-DW-3xwEg.js","assets/ui-BGxkcZ3b.js","assets/reaction.service-CAOHlSPG.js"])))=>i.map(i=>d[i]);
import{a as L_,b as I_,R as ya,N as Vs,u as lp,r as w,L as dc,g as Jx,B as P_,c as V_,d as Is}from"./vendor-DW-3xwEg.js";import{C as mi,E as fr,a as pr,A as Zs,b as eb,c as wf,I as H_,d as F_,e as q_,T as G_,f as $_,U as Y_,S as Js,L as fc,M as X_,g as Cf,h as tb,i as hr,B as Ws,P as Tf,j as W_,k as K_,l as cp,m as nb,K as Q_,n as Z_,o as J_,p as ab,q as mr,X as ib,r as ew,s as tw,t as nw,u as aw,v as iw,R as sw,w as ow,x as rw,y as lw,z as cw,D as uw}from"./ui-BGxkcZ3b.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();var qd={exports:{}},tr={};var Fy;function dw(){if(Fy)return tr;Fy=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(o,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var h in l)h!=="key"&&(u[h]=l[h])}else u=l;return l=u.ref,{$$typeof:t,type:o,key:f,ref:l!==void 0?l:null,props:u}}return tr.Fragment=n,tr.jsx=i,tr.jsxs=i,tr}var qy;function fw(){return qy||(qy=1,qd.exports=dw()),qd.exports}var c=fw(),Gd={exports:{}},nr={},$d={exports:{}},Yd={};var Gy;function pw(){return Gy||(Gy=1,(function(t){function n(N,ee){var ie=N.length;N.push(ee);e:for(;0<ie;){var ve=ie-1>>>1,Me=N[ve];if(0<l(Me,ee))N[ve]=ee,N[ie]=Me,ie=ve;else break e}}function i(N){return N.length===0?null:N[0]}function o(N){if(N.length===0)return null;var ee=N[0],ie=N.pop();if(ie!==ee){N[0]=ie;e:for(var ve=0,Me=N.length,ge=Me>>>1;ve<ge;){var Ne=2*(ve+1)-1,be=N[Ne],Z=Ne+1,ue=N[Z];if(0>l(be,ie))Z<Me&&0>l(ue,be)?(N[ve]=ue,N[Z]=ie,ve=Z):(N[ve]=be,N[Ne]=ie,ve=Ne);else if(Z<Me&&0>l(ue,ie))N[ve]=ue,N[Z]=ie,ve=Z;else break e}}return ee}function l(N,ee){var ie=N.sortIndex-ee.sortIndex;return ie!==0?ie:N.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var f=Date,h=f.now();t.unstable_now=function(){return f.now()-h}}var m=[],g=[],v=1,x=null,S=3,C=!1,_=!1,k=!1,j=!1,D=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function U(N){for(var ee=i(g);ee!==null;){if(ee.callback===null)o(g);else if(ee.startTime<=N)o(g),ee.sortIndex=ee.expirationTime,n(m,ee);else break;ee=i(g)}}function P(N){if(k=!1,U(N),!_)if(i(m)!==null)_=!0,Q||(Q=!0,$e());else{var ee=i(g);ee!==null&&Oe(P,ee.startTime-N)}}var Q=!1,ne=-1,W=5,ce=-1;function se(){return j?!0:!(t.unstable_now()-ce<W)}function Ee(){if(j=!1,Q){var N=t.unstable_now();ce=N;var ee=!0;try{e:{_=!1,k&&(k=!1,L(ne),ne=-1),C=!0;var ie=S;try{t:{for(U(N),x=i(m);x!==null&&!(x.expirationTime>N&&se());){var ve=x.callback;if(typeof ve=="function"){x.callback=null,S=x.priorityLevel;var Me=ve(x.expirationTime<=N);if(N=t.unstable_now(),typeof Me=="function"){x.callback=Me,U(N),ee=!0;break t}x===i(m)&&o(m),U(N)}else o(m);x=i(m)}if(x!==null)ee=!0;else{var ge=i(g);ge!==null&&Oe(P,ge.startTime-N),ee=!1}}break e}finally{x=null,S=ie,C=!1}ee=void 0}}finally{ee?$e():Q=!1}}}var $e;if(typeof E=="function")$e=function(){E(Ee)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Ae=de.port2;de.port1.onmessage=Ee,$e=function(){Ae.postMessage(null)}}else $e=function(){D(Ee,0)};function Oe(N,ee){ne=D(function(){N(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(N){switch(S){case 1:case 2:case 3:var ee=3;break;default:ee=S}var ie=S;S=ee;try{return N()}finally{S=ie}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(N,ee){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var ie=S;S=N;try{return ee()}finally{S=ie}},t.unstable_scheduleCallback=function(N,ee,ie){var ve=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ve+ie:ve):ie=ve,N){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=ie+Me,N={id:v++,callback:ee,priorityLevel:N,startTime:ie,expirationTime:Me,sortIndex:-1},ie>ve?(N.sortIndex=ie,n(g,N),i(m)===null&&N===i(g)&&(k?(L(ne),ne=-1):k=!0,Oe(P,ie-ve))):(N.sortIndex=Me,n(m,N),_||C||(_=!0,Q||(Q=!0,$e()))),N},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(N){var ee=S;return function(){var ie=S;S=ee;try{return N.apply(this,arguments)}finally{S=ie}}}})(Yd)),Yd}var $y;function hw(){return $y||($y=1,$d.exports=pw()),$d.exports}var Yy;function mw(){if(Yy)return nr;Yy=1;var t=hw(),n=L_(),i=I_();function o(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var a=e,s=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(s=a.return),e=a.return;while(e)}return a.tag===3?s:null}function f(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function h(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(o(188))}function g(e){var a=e.alternate;if(!a){if(a=u(e),a===null)throw Error(o(188));return a!==e?null:e}for(var s=e,r=a;;){var d=s.return;if(d===null)break;var p=d.alternate;if(p===null){if(r=d.return,r!==null){s=r;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===s)return m(d),e;if(p===r)return m(d),a;p=p.sibling}throw Error(o(188))}if(s.return!==r.return)s=d,r=p;else{for(var y=!1,b=d.child;b;){if(b===s){y=!0,s=d,r=p;break}if(b===r){y=!0,r=d,s=p;break}b=b.sibling}if(!y){for(b=p.child;b;){if(b===s){y=!0,s=p,r=d;break}if(b===r){y=!0,r=p,s=d;break}b=b.sibling}if(!y)throw Error(o(189))}}if(s.alternate!==r)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:a}function v(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=v(e),a!==null)return a;e=e.sibling}return null}var x=Object.assign,S=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),E=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),ce=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),Ee=Symbol.iterator;function $e(e){return e===null||typeof e!="object"?null:(e=Ee&&e[Ee]||e["@@iterator"],typeof e=="function"?e:null)}var de=Symbol.for("react.client.reference");function Ae(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===de?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k:return"Fragment";case D:return"Profiler";case j:return"StrictMode";case P:return"Suspense";case Q:return"SuspenseList";case ce:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case E:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case U:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ne:return a=e.displayName||null,a!==null?a:Ae(e.type)||"Memo";case W:a=e._payload,e=e._init;try{return Ae(e(a))}catch{}}return null}var Oe=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},ve=[],Me=-1;function ge(e){return{current:e}}function Ne(e){0>Me||(e.current=ve[Me],ve[Me]=null,Me--)}function be(e,a){Me++,ve[Me]=e.current,e.current=a}var Z=ge(null),ue=ge(null),re=ge(null),Yt=ge(null);function Et(e,a){switch(be(re,a),be(ue,e),be(Z,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?fy(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=fy(a),e=py(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ne(Z),be(Z,e)}function Jt(){Ne(Z),Ne(ue),Ne(re)}function We(e){e.memoizedState!==null&&be(Yt,e);var a=Z.current,s=py(a,e.type);a!==s&&(be(ue,e),be(Z,s))}function en(e){ue.current===e&&(Ne(Z),Ne(ue)),Yt.current===e&&(Ne(Yt),Qo._currentValue=ie)}var Tt,Xt;function Bt(e){if(Tt===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);Tt=a&&a[1]||"",Xt=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tt+e+Xt}var un=!1;function tn(e,a){if(!e||un)return"";un=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(a){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(H){var I=H}Reflect.construct(e,[],K)}else{try{K.call()}catch(H){I=H}e.call(K.prototype)}}else{try{throw Error()}catch(H){I=H}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(H){if(H&&I&&typeof H.stack=="string")return[H.stack,I.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=r.DetermineComponentFrameRoot(),y=p[0],b=p[1];if(y&&b){var T=y.split(`
`),O=b.split(`
`);for(d=r=0;r<T.length&&!T[r].includes("DetermineComponentFrameRoot");)r++;for(;d<O.length&&!O[d].includes("DetermineComponentFrameRoot");)d++;if(r===T.length||d===O.length)for(r=T.length-1,d=O.length-1;1<=r&&0<=d&&T[r]!==O[d];)d--;for(;1<=r&&0<=d;r--,d--)if(T[r]!==O[d]){if(r!==1||d!==1)do if(r--,d--,0>d||T[r]!==O[d]){var G=`
`+T[r].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=r&&0<=d);break}}}finally{un=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Bt(s):""}function Sn(e,a){switch(e.tag){case 26:case 27:case 5:return Bt(e.type);case 16:return Bt("Lazy");case 13:return e.child!==a&&a!==null?Bt("Suspense Fallback"):Bt("Suspense");case 19:return Bt("SuspenseList");case 0:case 15:return tn(e.type,!1);case 11:return tn(e.type.render,!1);case 1:return tn(e.type,!0);case 31:return Bt("Activity");default:return""}}function nn(e){try{var a="",s=null;do a+=Sn(e,s),s=e,e=e.return;while(e);return a}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var dn=Object.prototype.hasOwnProperty,mt=t.unstable_scheduleCallback,fn=t.unstable_cancelCallback,Wt=t.unstable_shouldYield,at=t.unstable_requestPaint,ae=t.unstable_now,pe=t.unstable_getCurrentPriorityLevel,it=t.unstable_ImmediatePriority,tt=t.unstable_UserBlockingPriority,$=t.unstable_NormalPriority,ct=t.unstable_LowPriority,B=t.unstable_IdlePriority,q=t.log,he=t.unstable_setDisableYieldValue,Te=null,Re=null;function ut(e){if(typeof q=="function"&&he(e),Re&&typeof Re.setStrictMode=="function")try{Re.setStrictMode(Te,e)}catch{}}var gt=Math.clz32?Math.clz32:uo,_n=Math.log,ba=Math.LN2;function uo(e){return e>>>=0,e===0?32:31-(_n(e)/ba|0)|0}var Ji=256,es=262144,xi=4194304;function J(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function te(e,a,s){var r=e.pendingLanes;if(r===0)return 0;var d=0,p=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var b=r&134217727;return b!==0?(r=b&~p,r!==0?d=J(r):(y&=b,y!==0?d=J(y):s||(s=b&~e,s!==0&&(d=J(s))))):(b=r&~p,b!==0?d=J(b):y!==0?d=J(y):s||(s=r&~e,s!==0&&(d=J(s)))),d===0?0:a!==0&&a!==d&&(a&p)===0&&(p=d&-d,s=a&-a,p>=s||p===32&&(s&4194048)!==0)?a:d}function me(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function je(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xe(){var e=xi;return xi<<=1,(xi&62914560)===0&&(xi=4194304),e}function Se(e){for(var a=[],s=0;31>s;s++)a.push(e);return a}function Be(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function le(e,a,s,r,d,p){var y=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var b=e.entanglements,T=e.expirationTimes,O=e.hiddenUpdates;for(s=y&~s;0<s;){var G=31-gt(s),K=1<<G;b[G]=0,T[G]=-1;var I=O[G];if(I!==null)for(O[G]=null,G=0;G<I.length;G++){var H=I[G];H!==null&&(H.lane&=-536870913)}s&=~K}r!==0&&Ze(e,r,0),p!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=p&~(y&~a))}function Ze(e,a,s){e.pendingLanes|=a,e.suspendedLanes&=~a;var r=31-gt(a);e.entangledLanes|=a,e.entanglements[r]=e.entanglements[r]|1073741824|s&261930}function Ie(e,a){var s=e.entangledLanes|=a;for(e=e.entanglements;s;){var r=31-gt(s),d=1<<r;d&a|e[r]&a&&(e[r]|=a),s&=~d}}function st(e,a){var s=a&-a;return s=(s&42)!==0?1:Nn(s),(s&(e.suspendedLanes|a))!==0?0:s}function Nn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function pn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Lt(){var e=ee.p;return e!==0?e:(e=window.event,e===void 0?32:Oy(e.type))}function Sa(e,a){var s=ee.p;try{return ee.p=e,a()}finally{ee.p=s}}var Fa=Math.random().toString(36).slice(2),an="__reactFiber$"+Fa,wn="__reactProps$"+Fa,ts="__reactContainer$"+Fa,zc="__reactEvents$"+Fa,AS="__reactListeners$"+Fa,kS="__reactHandles$"+Fa,Jp="__reactResources$"+Fa,fo="__reactMarker$"+Fa;function Oc(e){delete e[an],delete e[wn],delete e[zc],delete e[AS],delete e[kS]}function ns(e){var a=e[an];if(a)return a;for(var s=e.parentNode;s;){if(a=s[ts]||s[an]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(e=by(e);e!==null;){if(s=e[an])return s;e=by(e)}return a}e=s,s=e.parentNode}return null}function as(e){if(e=e[an]||e[ts]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function po(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(o(33))}function is(e){var a=e[Jp];return a||(a=e[Jp]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Kt(e){e[fo]=!0}var eh=new Set,th={};function bi(e,a){ss(e,a),ss(e+"Capture",a)}function ss(e,a){for(th[e]=a,e=0;e<a.length;e++)eh.add(a[e])}var ES=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nh={},ah={};function MS(e){return dn.call(ah,e)?!0:dn.call(nh,e)?!1:ES.test(e)?ah[e]=!0:(nh[e]=!0,!1)}function Ur(e,a,s){if(MS(a))if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var r=a.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+s)}}function zr(e,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+s)}}function _a(e,a,s,r){if(r===null)e.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(a,s,""+r)}}function qn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ih(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function RS(e,a,s){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,p=r.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return d.call(this)},set:function(y){s=""+y,p.call(this,y)}}),Object.defineProperty(e,a,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Bc(e){if(!e._valueTracker){var a=ih(e)?"checked":"value";e._valueTracker=RS(e,a,""+e[a])}}function sh(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var s=a.getValue(),r="";return e&&(r=ih(e)?e.checked?"true":"false":e.value),e=r,e!==s?(a.setValue(e),!0):!1}function Or(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var DS=/[\n"\\]/g;function Gn(e){return e.replace(DS,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Lc(e,a,s,r,d,p,y,b){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),a!=null?y==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+qn(a)):e.value!==""+qn(a)&&(e.value=""+qn(a)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),a!=null?Ic(e,y,qn(a)):s!=null?Ic(e,y,qn(s)):r!=null&&e.removeAttribute("value"),d==null&&p!=null&&(e.defaultChecked=!!p),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+qn(b):e.removeAttribute("name")}function oh(e,a,s,r,d,p,y,b){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),a!=null||s!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){Bc(e);return}s=s!=null?""+qn(s):"",a=a!=null?""+qn(a):s,b||a===e.value||(e.value=a),e.defaultValue=a}r=r??d,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=b?e.checked:!!r,e.defaultChecked=!!r,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),Bc(e)}function Ic(e,a,s){a==="number"&&Or(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function os(e,a,s,r){if(e=e.options,a){a={};for(var d=0;d<s.length;d++)a["$"+s[d]]=!0;for(s=0;s<e.length;s++)d=a.hasOwnProperty("$"+e[s].value),e[s].selected!==d&&(e[s].selected=d),d&&r&&(e[s].defaultSelected=!0)}else{for(s=""+qn(s),a=null,d=0;d<e.length;d++){if(e[d].value===s){e[d].selected=!0,r&&(e[d].defaultSelected=!0);return}a!==null||e[d].disabled||(a=e[d])}a!==null&&(a.selected=!0)}}function rh(e,a,s){if(a!=null&&(a=""+qn(a),a!==e.value&&(e.value=a),s==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=s!=null?""+qn(s):""}function lh(e,a,s,r){if(a==null){if(r!=null){if(s!=null)throw Error(o(92));if(Oe(r)){if(1<r.length)throw Error(o(93));r=r[0]}s=r}s==null&&(s=""),a=s}s=qn(a),e.defaultValue=s,r=e.textContent,r===s&&r!==""&&r!==null&&(e.value=r),Bc(e)}function rs(e,a){if(a){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=a;return}}e.textContent=a}var NS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ch(e,a,s){var r=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?r?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":r?e.setProperty(a,s):typeof s!="number"||s===0||NS.has(a)?a==="float"?e.cssFloat=s:e[a]=(""+s).trim():e[a]=s+"px"}function uh(e,a,s){if(a!=null&&typeof a!="object")throw Error(o(62));if(e=e.style,s!=null){for(var r in s)!s.hasOwnProperty(r)||a!=null&&a.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var d in a)r=a[d],a.hasOwnProperty(d)&&s[d]!==r&&ch(e,d,r)}else for(var p in a)a.hasOwnProperty(p)&&ch(e,p,a[p])}function Pc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var US=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Br(e){return zS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function wa(){}var Vc=null;function Hc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ls=null,cs=null;function dh(e){var a=as(e);if(a&&(e=a.stateNode)){var s=e[wn]||null;e:switch(e=a.stateNode,a.type){case"input":if(Lc(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Gn(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var r=s[a];if(r!==e&&r.form===e.form){var d=r[wn]||null;if(!d)throw Error(o(90));Lc(r,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(a=0;a<s.length;a++)r=s[a],r.form===e.form&&sh(r)}break e;case"textarea":rh(e,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&os(e,!!s.multiple,a,!1)}}}var Fc=!1;function fh(e,a,s){if(Fc)return e(a,s);Fc=!0;try{var r=e(a);return r}finally{if(Fc=!1,(ls!==null||cs!==null)&&(Cl(),ls&&(a=ls,e=cs,cs=ls=null,dh(a),e)))for(a=0;a<e.length;a++)dh(e[a])}}function ho(e,a){var s=e.stateNode;if(s===null)return null;var r=s[wn]||null;if(r===null)return null;s=r[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,a,typeof s));return s}var Ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qc=!1;if(Ca)try{var mo={};Object.defineProperty(mo,"passive",{get:function(){qc=!0}}),window.addEventListener("test",mo,mo),window.removeEventListener("test",mo,mo)}catch{qc=!1}var qa=null,Gc=null,Lr=null;function ph(){if(Lr)return Lr;var e,a=Gc,s=a.length,r,d="value"in qa?qa.value:qa.textContent,p=d.length;for(e=0;e<s&&a[e]===d[e];e++);var y=s-e;for(r=1;r<=y&&a[s-r]===d[p-r];r++);return Lr=d.slice(e,1<r?1-r:void 0)}function Ir(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function Pr(){return!0}function hh(){return!1}function Cn(e){function a(s,r,d,p,y){this._reactName=s,this._targetInst=d,this.type=r,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(s=e[b],this[b]=s?s(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Pr:hh,this.isPropagationStopped=hh,this}return x(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Pr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Pr)},persist:function(){},isPersistent:Pr}),a}var Si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vr=Cn(Si),go=x({},Si,{view:0,detail:0}),OS=Cn(go),$c,Yc,yo,Hr=x({},go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yo&&(yo&&e.type==="mousemove"?($c=e.screenX-yo.screenX,Yc=e.screenY-yo.screenY):Yc=$c=0,yo=e),$c)},movementY:function(e){return"movementY"in e?e.movementY:Yc}}),mh=Cn(Hr),BS=x({},Hr,{dataTransfer:0}),LS=Cn(BS),IS=x({},go,{relatedTarget:0}),Xc=Cn(IS),PS=x({},Si,{animationName:0,elapsedTime:0,pseudoElement:0}),VS=Cn(PS),HS=x({},Si,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),FS=Cn(HS),qS=x({},Si,{data:0}),gh=Cn(qS),GS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$S={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XS(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=YS[e])?!!a[e]:!1}function Wc(){return XS}var WS=x({},go,{key:function(e){if(e.key){var a=GS[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Ir(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$S[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wc,charCode:function(e){return e.type==="keypress"?Ir(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ir(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),KS=Cn(WS),QS=x({},Hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yh=Cn(QS),ZS=x({},go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wc}),JS=Cn(ZS),e1=x({},Si,{propertyName:0,elapsedTime:0,pseudoElement:0}),t1=Cn(e1),n1=x({},Hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),a1=Cn(n1),i1=x({},Si,{newState:0,oldState:0}),s1=Cn(i1),o1=[9,13,27,32],Kc=Ca&&"CompositionEvent"in window,vo=null;Ca&&"documentMode"in document&&(vo=document.documentMode);var r1=Ca&&"TextEvent"in window&&!vo,vh=Ca&&(!Kc||vo&&8<vo&&11>=vo),xh=" ",bh=!1;function Sh(e,a){switch(e){case"keyup":return o1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _h(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var us=!1;function l1(e,a){switch(e){case"compositionend":return _h(a);case"keypress":return a.which!==32?null:(bh=!0,xh);case"textInput":return e=a.data,e===xh&&bh?null:e;default:return null}}function c1(e,a){if(us)return e==="compositionend"||!Kc&&Sh(e,a)?(e=ph(),Lr=Gc=qa=null,us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vh&&a.locale!=="ko"?null:a.data;default:return null}}var u1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wh(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!u1[e.type]:a==="textarea"}function Ch(e,a,s,r){ls?cs?cs.push(r):cs=[r]:ls=r,a=Rl(a,"onChange"),0<a.length&&(s=new Vr("onChange","change",null,s,r),e.push({event:s,listeners:a}))}var xo=null,bo=null;function d1(e){oy(e,0)}function Fr(e){var a=po(e);if(sh(a))return e}function Th(e,a){if(e==="change")return a}var jh=!1;if(Ca){var Qc;if(Ca){var Zc="oninput"in document;if(!Zc){var Ah=document.createElement("div");Ah.setAttribute("oninput","return;"),Zc=typeof Ah.oninput=="function"}Qc=Zc}else Qc=!1;jh=Qc&&(!document.documentMode||9<document.documentMode)}function kh(){xo&&(xo.detachEvent("onpropertychange",Eh),bo=xo=null)}function Eh(e){if(e.propertyName==="value"&&Fr(bo)){var a=[];Ch(a,bo,e,Hc(e)),fh(d1,a)}}function f1(e,a,s){e==="focusin"?(kh(),xo=a,bo=s,xo.attachEvent("onpropertychange",Eh)):e==="focusout"&&kh()}function p1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fr(bo)}function h1(e,a){if(e==="click")return Fr(a)}function m1(e,a){if(e==="input"||e==="change")return Fr(a)}function g1(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var Un=typeof Object.is=="function"?Object.is:g1;function So(e,a){if(Un(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var s=Object.keys(e),r=Object.keys(a);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var d=s[r];if(!dn.call(a,d)||!Un(e[d],a[d]))return!1}return!0}function Mh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rh(e,a){var s=Mh(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=a&&r>=a)return{node:s,offset:a-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Mh(s)}}function Dh(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Dh(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Nh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=Or(e.document);a instanceof e.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)e=a.contentWindow;else break;a=Or(e.document)}return a}function Jc(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var y1=Ca&&"documentMode"in document&&11>=document.documentMode,ds=null,eu=null,_o=null,tu=!1;function Uh(e,a,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;tu||ds==null||ds!==Or(r)||(r=ds,"selectionStart"in r&&Jc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_o&&So(_o,r)||(_o=r,r=Rl(eu,"onSelect"),0<r.length&&(a=new Vr("onSelect","select",null,a,s),e.push({event:a,listeners:r}),a.target=ds)))}function _i(e,a){var s={};return s[e.toLowerCase()]=a.toLowerCase(),s["Webkit"+e]="webkit"+a,s["Moz"+e]="moz"+a,s}var fs={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionrun:_i("Transition","TransitionRun"),transitionstart:_i("Transition","TransitionStart"),transitioncancel:_i("Transition","TransitionCancel"),transitionend:_i("Transition","TransitionEnd")},nu={},zh={};Ca&&(zh=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function wi(e){if(nu[e])return nu[e];if(!fs[e])return e;var a=fs[e],s;for(s in a)if(a.hasOwnProperty(s)&&s in zh)return nu[e]=a[s];return e}var Oh=wi("animationend"),Bh=wi("animationiteration"),Lh=wi("animationstart"),v1=wi("transitionrun"),x1=wi("transitionstart"),b1=wi("transitioncancel"),Ih=wi("transitionend"),Ph=new Map,au="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");au.push("scrollEnd");function ia(e,a){Ph.set(e,a),bi(a,[e])}var qr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},$n=[],ps=0,iu=0;function Gr(){for(var e=ps,a=iu=ps=0;a<e;){var s=$n[a];$n[a++]=null;var r=$n[a];$n[a++]=null;var d=$n[a];$n[a++]=null;var p=$n[a];if($n[a++]=null,r!==null&&d!==null){var y=r.pending;y===null?d.next=d:(d.next=y.next,y.next=d),r.pending=d}p!==0&&Vh(s,d,p)}}function $r(e,a,s,r){$n[ps++]=e,$n[ps++]=a,$n[ps++]=s,$n[ps++]=r,iu|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function su(e,a,s,r){return $r(e,a,s,r),Yr(e)}function Ci(e,a){return $r(e,null,null,a),Yr(e)}function Vh(e,a,s){e.lanes|=s;var r=e.alternate;r!==null&&(r.lanes|=s);for(var d=!1,p=e.return;p!==null;)p.childLanes|=s,r=p.alternate,r!==null&&(r.childLanes|=s),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(d=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,d&&a!==null&&(d=31-gt(s),e=p.hiddenUpdates,r=e[d],r===null?e[d]=[a]:r.push(a),a.lane=s|536870912),p):null}function Yr(e){if(50<qo)throw qo=0,hd=null,Error(o(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var hs={};function S1(e,a,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(e,a,s,r){return new S1(e,a,s,r)}function ou(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ta(e,a){var s=e.alternate;return s===null?(s=zn(e.tag,a,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=a,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Hh(e,a){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,a=s.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function Xr(e,a,s,r,d,p){var y=0;if(r=e,typeof e=="function")ou(e)&&(y=1);else if(typeof e=="string")y=j_(e,s,Z.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ce:return e=zn(31,s,a,d),e.elementType=ce,e.lanes=p,e;case k:return Ti(s.children,d,p,a);case j:y=8,d|=24;break;case D:return e=zn(12,s,a,d|2),e.elementType=D,e.lanes=p,e;case P:return e=zn(13,s,a,d),e.elementType=P,e.lanes=p,e;case Q:return e=zn(19,s,a,d),e.elementType=Q,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case E:y=10;break e;case L:y=9;break e;case U:y=11;break e;case ne:y=14;break e;case W:y=16,r=null;break e}y=29,s=Error(o(130,e===null?"null":typeof e,"")),r=null}return a=zn(y,s,a,d),a.elementType=e,a.type=r,a.lanes=p,a}function Ti(e,a,s,r){return e=zn(7,e,r,a),e.lanes=s,e}function ru(e,a,s){return e=zn(6,e,null,a),e.lanes=s,e}function Fh(e){var a=zn(18,null,null,0);return a.stateNode=e,a}function lu(e,a,s){return a=zn(4,e.children!==null?e.children:[],e.key,a),a.lanes=s,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var qh=new WeakMap;function Yn(e,a){if(typeof e=="object"&&e!==null){var s=qh.get(e);return s!==void 0?s:(a={value:e,source:a,stack:nn(a)},qh.set(e,a),a)}return{value:e,source:a,stack:nn(a)}}var ms=[],gs=0,Wr=null,wo=0,Xn=[],Wn=0,Ga=null,da=1,fa="";function ja(e,a){ms[gs++]=wo,ms[gs++]=Wr,Wr=e,wo=a}function Gh(e,a,s){Xn[Wn++]=da,Xn[Wn++]=fa,Xn[Wn++]=Ga,Ga=e;var r=da;e=fa;var d=32-gt(r)-1;r&=~(1<<d),s+=1;var p=32-gt(a)+d;if(30<p){var y=d-d%5;p=(r&(1<<y)-1).toString(32),r>>=y,d-=y,da=1<<32-gt(a)+d|s<<d|r,fa=p+e}else da=1<<p|s<<d|r,fa=e}function cu(e){e.return!==null&&(ja(e,1),Gh(e,1,0))}function uu(e){for(;e===Wr;)Wr=ms[--gs],ms[gs]=null,wo=ms[--gs],ms[gs]=null;for(;e===Ga;)Ga=Xn[--Wn],Xn[Wn]=null,fa=Xn[--Wn],Xn[Wn]=null,da=Xn[--Wn],Xn[Wn]=null}function $h(e,a){Xn[Wn++]=da,Xn[Wn++]=fa,Xn[Wn++]=Ga,da=a.id,fa=a.overflow,Ga=e}var sn=null,bt=null,Ke=!1,$a=null,Kn=!1,du=Error(o(519));function Ya(e){var a=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Co(Yn(a,e)),du}function Yh(e){var a=e.stateNode,s=e.type,r=e.memoizedProps;switch(a[an]=e,a[wn]=r,s){case"dialog":Ge("cancel",a),Ge("close",a);break;case"iframe":case"object":case"embed":Ge("load",a);break;case"video":case"audio":for(s=0;s<$o.length;s++)Ge($o[s],a);break;case"source":Ge("error",a);break;case"img":case"image":case"link":Ge("error",a),Ge("load",a);break;case"details":Ge("toggle",a);break;case"input":Ge("invalid",a),oh(a,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Ge("invalid",a);break;case"textarea":Ge("invalid",a),lh(a,r.value,r.defaultValue,r.children)}s=r.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||r.suppressHydrationWarning===!0||uy(a.textContent,s)?(r.popover!=null&&(Ge("beforetoggle",a),Ge("toggle",a)),r.onScroll!=null&&Ge("scroll",a),r.onScrollEnd!=null&&Ge("scrollend",a),r.onClick!=null&&(a.onclick=wa),a=!0):a=!1,a||Ya(e,!0)}function Xh(e){for(sn=e.return;sn;)switch(sn.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:sn=sn.return}}function ys(e){if(e!==sn)return!1;if(!Ke)return Xh(e),Ke=!0,!1;var a=e.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Ed(e.type,e.memoizedProps)),s=!s),s&&bt&&Ya(e),Xh(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));bt=xy(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));bt=xy(e)}else a===27?(a=bt,ri(e.type)?(e=Ud,Ud=null,bt=e):bt=a):bt=sn?Zn(e.stateNode.nextSibling):null;return!0}function ji(){bt=sn=null,Ke=!1}function fu(){var e=$a;return e!==null&&(kn===null?kn=e:kn.push.apply(kn,e),$a=null),e}function Co(e){$a===null?$a=[e]:$a.push(e)}var pu=ge(null),Ai=null,Aa=null;function Xa(e,a,s){be(pu,a._currentValue),a._currentValue=s}function ka(e){e._currentValue=pu.current,Ne(pu)}function hu(e,a,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,r!==null&&(r.childLanes|=a)):r!==null&&(r.childLanes&a)!==a&&(r.childLanes|=a),e===s)break;e=e.return}}function mu(e,a,s,r){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var p=d.dependencies;if(p!==null){var y=d.child;p=p.firstContext;e:for(;p!==null;){var b=p;p=d;for(var T=0;T<a.length;T++)if(b.context===a[T]){p.lanes|=s,b=p.alternate,b!==null&&(b.lanes|=s),hu(p.return,s,e),r||(y=null);break e}p=b.next}}else if(d.tag===18){if(y=d.return,y===null)throw Error(o(341));y.lanes|=s,p=y.alternate,p!==null&&(p.lanes|=s),hu(y,s,e),y=null}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===e){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}}function vs(e,a,s,r){e=null;for(var d=a,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var y=d.alternate;if(y===null)throw Error(o(387));if(y=y.memoizedProps,y!==null){var b=d.type;Un(d.pendingProps.value,y.value)||(e!==null?e.push(b):e=[b])}}else if(d===Yt.current){if(y=d.alternate,y===null)throw Error(o(387));y.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Qo):e=[Qo])}d=d.return}e!==null&&mu(a,e,s,r),a.flags|=262144}function Kr(e){for(e=e.firstContext;e!==null;){if(!Un(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ki(e){Ai=e,Aa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function on(e){return Wh(Ai,e)}function Qr(e,a){return Ai===null&&ki(e),Wh(e,a)}function Wh(e,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},Aa===null){if(e===null)throw Error(o(308));Aa=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else Aa=Aa.next=a;return s}var _1=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(s,r){e.push(r)}};this.abort=function(){a.aborted=!0,e.forEach(function(s){return s()})}},w1=t.unstable_scheduleCallback,C1=t.unstable_NormalPriority,It={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gu(){return{controller:new _1,data:new Map,refCount:0}}function To(e){e.refCount--,e.refCount===0&&w1(C1,function(){e.controller.abort()})}var jo=null,yu=0,xs=0,bs=null;function T1(e,a){if(jo===null){var s=jo=[];yu=0,xs=bd(),bs={status:"pending",value:void 0,then:function(r){s.push(r)}}}return yu++,a.then(Kh,Kh),a}function Kh(){if(--yu===0&&jo!==null){bs!==null&&(bs.status="fulfilled");var e=jo;jo=null,xs=0,bs=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function j1(e,a){var s=[],r={status:"pending",value:null,reason:null,then:function(d){s.push(d)}};return e.then(function(){r.status="fulfilled",r.value=a;for(var d=0;d<s.length;d++)(0,s[d])(a)},function(d){for(r.status="rejected",r.reason=d,d=0;d<s.length;d++)(0,s[d])(void 0)}),r}var Qh=N.S;N.S=function(e,a){Ug=ae(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&T1(e,a),Qh!==null&&Qh(e,a)};var Ei=ge(null);function vu(){var e=Ei.current;return e!==null?e:yt.pooledCache}function Zr(e,a){a===null?be(Ei,Ei.current):be(Ei,a.pool)}function Zh(){var e=vu();return e===null?null:{parent:It._currentValue,pool:e}}var Ss=Error(o(460)),xu=Error(o(474)),Jr=Error(o(542)),el={then:function(){}};function Jh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function em(e,a,s){switch(s=e[s],s===void 0?e.push(a):s!==a&&(a.then(wa,wa),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,nm(e),e;default:if(typeof a.status=="string")a.then(wa,wa);else{if(e=yt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=a,e.status="pending",e.then(function(r){if(a.status==="pending"){var d=a;d.status="fulfilled",d.value=r}},function(r){if(a.status==="pending"){var d=a;d.status="rejected",d.reason=r}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,nm(e),e}throw Ri=a,Ss}}function Mi(e){try{var a=e._init;return a(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Ri=s,Ss):s}}var Ri=null;function tm(){if(Ri===null)throw Error(o(459));var e=Ri;return Ri=null,e}function nm(e){if(e===Ss||e===Jr)throw Error(o(483))}var _s=null,Ao=0;function tl(e){var a=Ao;return Ao+=1,_s===null&&(_s=[]),em(_s,e,a)}function ko(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function nl(e,a){throw a.$$typeof===S?Error(o(525)):(e=Object.prototype.toString.call(a),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function am(e){function a(R,A){if(e){var z=R.deletions;z===null?(R.deletions=[A],R.flags|=16):z.push(A)}}function s(R,A){if(!e)return null;for(;A!==null;)a(R,A),A=A.sibling;return null}function r(R){for(var A=new Map;R!==null;)R.key!==null?A.set(R.key,R):A.set(R.index,R),R=R.sibling;return A}function d(R,A){return R=Ta(R,A),R.index=0,R.sibling=null,R}function p(R,A,z){return R.index=z,e?(z=R.alternate,z!==null?(z=z.index,z<A?(R.flags|=67108866,A):z):(R.flags|=67108866,A)):(R.flags|=1048576,A)}function y(R){return e&&R.alternate===null&&(R.flags|=67108866),R}function b(R,A,z,Y){return A===null||A.tag!==6?(A=ru(z,R.mode,Y),A.return=R,A):(A=d(A,z),A.return=R,A)}function T(R,A,z,Y){var _e=z.type;return _e===k?G(R,A,z.props.children,Y,z.key):A!==null&&(A.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===W&&Mi(_e)===A.type)?(A=d(A,z.props),ko(A,z),A.return=R,A):(A=Xr(z.type,z.key,z.props,null,R.mode,Y),ko(A,z),A.return=R,A)}function O(R,A,z,Y){return A===null||A.tag!==4||A.stateNode.containerInfo!==z.containerInfo||A.stateNode.implementation!==z.implementation?(A=lu(z,R.mode,Y),A.return=R,A):(A=d(A,z.children||[]),A.return=R,A)}function G(R,A,z,Y,_e){return A===null||A.tag!==7?(A=Ti(z,R.mode,Y,_e),A.return=R,A):(A=d(A,z),A.return=R,A)}function K(R,A,z){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=ru(""+A,R.mode,z),A.return=R,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case C:return z=Xr(A.type,A.key,A.props,null,R.mode,z),ko(z,A),z.return=R,z;case _:return A=lu(A,R.mode,z),A.return=R,A;case W:return A=Mi(A),K(R,A,z)}if(Oe(A)||$e(A))return A=Ti(A,R.mode,z,null),A.return=R,A;if(typeof A.then=="function")return K(R,tl(A),z);if(A.$$typeof===E)return K(R,Qr(R,A),z);nl(R,A)}return null}function I(R,A,z,Y){var _e=A!==null?A.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return _e!==null?null:b(R,A,""+z,Y);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case C:return z.key===_e?T(R,A,z,Y):null;case _:return z.key===_e?O(R,A,z,Y):null;case W:return z=Mi(z),I(R,A,z,Y)}if(Oe(z)||$e(z))return _e!==null?null:G(R,A,z,Y,null);if(typeof z.then=="function")return I(R,A,tl(z),Y);if(z.$$typeof===E)return I(R,A,Qr(R,z),Y);nl(R,z)}return null}function H(R,A,z,Y,_e){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return R=R.get(z)||null,b(A,R,""+Y,_e);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case C:return R=R.get(Y.key===null?z:Y.key)||null,T(A,R,Y,_e);case _:return R=R.get(Y.key===null?z:Y.key)||null,O(A,R,Y,_e);case W:return Y=Mi(Y),H(R,A,z,Y,_e)}if(Oe(Y)||$e(Y))return R=R.get(z)||null,G(A,R,Y,_e,null);if(typeof Y.then=="function")return H(R,A,z,tl(Y),_e);if(Y.$$typeof===E)return H(R,A,z,Qr(A,Y),_e);nl(A,Y)}return null}function fe(R,A,z,Y){for(var _e=null,Je=null,ye=A,He=A=0,Xe=null;ye!==null&&He<z.length;He++){ye.index>He?(Xe=ye,ye=null):Xe=ye.sibling;var et=I(R,ye,z[He],Y);if(et===null){ye===null&&(ye=Xe);break}e&&ye&&et.alternate===null&&a(R,ye),A=p(et,A,He),Je===null?_e=et:Je.sibling=et,Je=et,ye=Xe}if(He===z.length)return s(R,ye),Ke&&ja(R,He),_e;if(ye===null){for(;He<z.length;He++)ye=K(R,z[He],Y),ye!==null&&(A=p(ye,A,He),Je===null?_e=ye:Je.sibling=ye,Je=ye);return Ke&&ja(R,He),_e}for(ye=r(ye);He<z.length;He++)Xe=H(ye,R,He,z[He],Y),Xe!==null&&(e&&Xe.alternate!==null&&ye.delete(Xe.key===null?He:Xe.key),A=p(Xe,A,He),Je===null?_e=Xe:Je.sibling=Xe,Je=Xe);return e&&ye.forEach(function(fi){return a(R,fi)}),Ke&&ja(R,He),_e}function ke(R,A,z,Y){if(z==null)throw Error(o(151));for(var _e=null,Je=null,ye=A,He=A=0,Xe=null,et=z.next();ye!==null&&!et.done;He++,et=z.next()){ye.index>He?(Xe=ye,ye=null):Xe=ye.sibling;var fi=I(R,ye,et.value,Y);if(fi===null){ye===null&&(ye=Xe);break}e&&ye&&fi.alternate===null&&a(R,ye),A=p(fi,A,He),Je===null?_e=fi:Je.sibling=fi,Je=fi,ye=Xe}if(et.done)return s(R,ye),Ke&&ja(R,He),_e;if(ye===null){for(;!et.done;He++,et=z.next())et=K(R,et.value,Y),et!==null&&(A=p(et,A,He),Je===null?_e=et:Je.sibling=et,Je=et);return Ke&&ja(R,He),_e}for(ye=r(ye);!et.done;He++,et=z.next())et=H(ye,R,He,et.value,Y),et!==null&&(e&&et.alternate!==null&&ye.delete(et.key===null?He:et.key),A=p(et,A,He),Je===null?_e=et:Je.sibling=et,Je=et);return e&&ye.forEach(function(B_){return a(R,B_)}),Ke&&ja(R,He),_e}function pt(R,A,z,Y){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case C:e:{for(var _e=z.key;A!==null;){if(A.key===_e){if(_e=z.type,_e===k){if(A.tag===7){s(R,A.sibling),Y=d(A,z.props.children),Y.return=R,R=Y;break e}}else if(A.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===W&&Mi(_e)===A.type){s(R,A.sibling),Y=d(A,z.props),ko(Y,z),Y.return=R,R=Y;break e}s(R,A);break}else a(R,A);A=A.sibling}z.type===k?(Y=Ti(z.props.children,R.mode,Y,z.key),Y.return=R,R=Y):(Y=Xr(z.type,z.key,z.props,null,R.mode,Y),ko(Y,z),Y.return=R,R=Y)}return y(R);case _:e:{for(_e=z.key;A!==null;){if(A.key===_e)if(A.tag===4&&A.stateNode.containerInfo===z.containerInfo&&A.stateNode.implementation===z.implementation){s(R,A.sibling),Y=d(A,z.children||[]),Y.return=R,R=Y;break e}else{s(R,A);break}else a(R,A);A=A.sibling}Y=lu(z,R.mode,Y),Y.return=R,R=Y}return y(R);case W:return z=Mi(z),pt(R,A,z,Y)}if(Oe(z))return fe(R,A,z,Y);if($e(z)){if(_e=$e(z),typeof _e!="function")throw Error(o(150));return z=_e.call(z),ke(R,A,z,Y)}if(typeof z.then=="function")return pt(R,A,tl(z),Y);if(z.$$typeof===E)return pt(R,A,Qr(R,z),Y);nl(R,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,A!==null&&A.tag===6?(s(R,A.sibling),Y=d(A,z),Y.return=R,R=Y):(s(R,A),Y=ru(z,R.mode,Y),Y.return=R,R=Y),y(R)):s(R,A)}return function(R,A,z,Y){try{Ao=0;var _e=pt(R,A,z,Y);return _s=null,_e}catch(ye){if(ye===Ss||ye===Jr)throw ye;var Je=zn(29,ye,null,R.mode);return Je.lanes=Y,Je.return=R,Je}finally{}}}var Di=am(!0),im=am(!1),Wa=!1;function bu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Su(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ka(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Qa(e,a,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(nt&2)!==0){var d=r.pending;return d===null?a.next=a:(a.next=d.next,d.next=a),r.pending=a,a=Yr(e),Vh(e,null,s),a}return $r(e,r,a,s),Yr(e)}function Eo(e,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var r=a.lanes;r&=e.pendingLanes,s|=r,a.lanes=s,Ie(e,s)}}function _u(e,a){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var d=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var y={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};p===null?d=p=y:p=p.next=y,s=s.next}while(s!==null);p===null?d=p=a:p=p.next=a}else d=p=a;s={baseState:r.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:r.shared,callbacks:r.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=a:e.next=a,s.lastBaseUpdate=a}var wu=!1;function Mo(){if(wu){var e=bs;if(e!==null)throw e}}function Ro(e,a,s,r){wu=!1;var d=e.updateQueue;Wa=!1;var p=d.firstBaseUpdate,y=d.lastBaseUpdate,b=d.shared.pending;if(b!==null){d.shared.pending=null;var T=b,O=T.next;T.next=null,y===null?p=O:y.next=O,y=T;var G=e.alternate;G!==null&&(G=G.updateQueue,b=G.lastBaseUpdate,b!==y&&(b===null?G.firstBaseUpdate=O:b.next=O,G.lastBaseUpdate=T))}if(p!==null){var K=d.baseState;y=0,G=O=T=null,b=p;do{var I=b.lane&-536870913,H=I!==b.lane;if(H?(Ye&I)===I:(r&I)===I){I!==0&&I===xs&&(wu=!0),G!==null&&(G=G.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var fe=e,ke=b;I=a;var pt=s;switch(ke.tag){case 1:if(fe=ke.payload,typeof fe=="function"){K=fe.call(pt,K,I);break e}K=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ke.payload,I=typeof fe=="function"?fe.call(pt,K,I):fe,I==null)break e;K=x({},K,I);break e;case 2:Wa=!0}}I=b.callback,I!==null&&(e.flags|=64,H&&(e.flags|=8192),H=d.callbacks,H===null?d.callbacks=[I]:H.push(I))}else H={lane:I,tag:b.tag,payload:b.payload,callback:b.callback,next:null},G===null?(O=G=H,T=K):G=G.next=H,y|=I;if(b=b.next,b===null){if(b=d.shared.pending,b===null)break;H=b,b=H.next,H.next=null,d.lastBaseUpdate=H,d.shared.pending=null}}while(!0);G===null&&(T=K),d.baseState=T,d.firstBaseUpdate=O,d.lastBaseUpdate=G,p===null&&(d.shared.lanes=0),ni|=y,e.lanes=y,e.memoizedState=K}}function sm(e,a){if(typeof e!="function")throw Error(o(191,e));e.call(a)}function om(e,a){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)sm(s[e],a)}var ws=ge(null),al=ge(0);function rm(e,a){e=Ba,be(al,e),be(ws,a),Ba=e|a.baseLanes}function Cu(){be(al,Ba),be(ws,ws.current)}function Tu(){Ba=al.current,Ne(ws),Ne(al)}var On=ge(null),Qn=null;function Za(e){var a=e.alternate;be(Ut,Ut.current&1),be(On,e),Qn===null&&(a===null||ws.current!==null||a.memoizedState!==null)&&(Qn=e)}function ju(e){be(Ut,Ut.current),be(On,e),Qn===null&&(Qn=e)}function lm(e){e.tag===22?(be(Ut,Ut.current),be(On,e),Qn===null&&(Qn=e)):Ja()}function Ja(){be(Ut,Ut.current),be(On,On.current)}function Bn(e){Ne(On),Qn===e&&(Qn=null),Ne(Ut)}var Ut=ge(0);function il(e){for(var a=e;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Dd(s)||Nd(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ea=0,Pe=null,dt=null,Pt=null,sl=!1,Cs=!1,Ni=!1,ol=0,Do=0,Ts=null,A1=0;function Mt(){throw Error(o(321))}function Au(e,a){if(a===null)return!1;for(var s=0;s<a.length&&s<e.length;s++)if(!Un(e[s],a[s]))return!1;return!0}function ku(e,a,s,r,d,p){return Ea=p,Pe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,N.H=e===null||e.memoizedState===null?Gm:Fu,Ni=!1,p=s(r,d),Ni=!1,Cs&&(p=um(a,s,r,d)),cm(e),p}function cm(e){N.H=zo;var a=dt!==null&&dt.next!==null;if(Ea=0,Pt=dt=Pe=null,sl=!1,Do=0,Ts=null,a)throw Error(o(300));e===null||Vt||(e=e.dependencies,e!==null&&Kr(e)&&(Vt=!0))}function um(e,a,s,r){Pe=e;var d=0;do{if(Cs&&(Ts=null),Do=0,Cs=!1,25<=d)throw Error(o(301));if(d+=1,Pt=dt=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}N.H=$m,p=a(s,r)}while(Cs);return p}function k1(){var e=N.H,a=e.useState()[0];return a=typeof a.then=="function"?No(a):a,e=e.useState()[0],(dt!==null?dt.memoizedState:null)!==e&&(Pe.flags|=1024),a}function Eu(){var e=ol!==0;return ol=0,e}function Mu(e,a,s){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~s}function Ru(e){if(sl){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}sl=!1}Ea=0,Pt=dt=Pe=null,Cs=!1,Do=ol=0,Ts=null}function yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Pe.memoizedState=Pt=e:Pt=Pt.next=e,Pt}function zt(){if(dt===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=dt.next;var a=Pt===null?Pe.memoizedState:Pt.next;if(a!==null)Pt=a,dt=e;else{if(e===null)throw Pe.alternate===null?Error(o(467)):Error(o(310));dt=e,e={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Pt===null?Pe.memoizedState=Pt=e:Pt=Pt.next=e}return Pt}function rl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function No(e){var a=Do;return Do+=1,Ts===null&&(Ts=[]),e=em(Ts,e,a),a=Pe,(Pt===null?a.memoizedState:Pt.next)===null&&(a=a.alternate,N.H=a===null||a.memoizedState===null?Gm:Fu),e}function ll(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return No(e);if(e.$$typeof===E)return on(e)}throw Error(o(438,String(e)))}function Du(e){var a=null,s=Pe.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var r=Pe.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(a={data:r.data.map(function(d){return d.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=rl(),Pe.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(e),r=0;r<e;r++)s[r]=se;return a.index++,s}function Ma(e,a){return typeof a=="function"?a(e):a}function cl(e){var a=zt();return Nu(a,dt,e)}function Nu(e,a,s){var r=e.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=s;var d=e.baseQueue,p=r.pending;if(p!==null){if(d!==null){var y=d.next;d.next=p.next,p.next=y}a.baseQueue=d=p,r.pending=null}if(p=e.baseState,d===null)e.memoizedState=p;else{a=d.next;var b=y=null,T=null,O=a,G=!1;do{var K=O.lane&-536870913;if(K!==O.lane?(Ye&K)===K:(Ea&K)===K){var I=O.revertLane;if(I===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),K===xs&&(G=!0);else if((Ea&I)===I){O=O.next,I===xs&&(G=!0);continue}else K={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},T===null?(b=T=K,y=p):T=T.next=K,Pe.lanes|=I,ni|=I;K=O.action,Ni&&s(p,K),p=O.hasEagerState?O.eagerState:s(p,K)}else I={lane:K,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},T===null?(b=T=I,y=p):T=T.next=I,Pe.lanes|=K,ni|=K;O=O.next}while(O!==null&&O!==a);if(T===null?y=p:T.next=b,!Un(p,e.memoizedState)&&(Vt=!0,G&&(s=bs,s!==null)))throw s;e.memoizedState=p,e.baseState=y,e.baseQueue=T,r.lastRenderedState=p}return d===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Uu(e){var a=zt(),s=a.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var r=s.dispatch,d=s.pending,p=a.memoizedState;if(d!==null){s.pending=null;var y=d=d.next;do p=e(p,y.action),y=y.next;while(y!==d);Un(p,a.memoizedState)||(Vt=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),s.lastRenderedState=p}return[p,r]}function dm(e,a,s){var r=Pe,d=zt(),p=Ke;if(p){if(s===void 0)throw Error(o(407));s=s()}else s=a();var y=!Un((dt||d).memoizedState,s);if(y&&(d.memoizedState=s,Vt=!0),d=d.queue,Bu(hm.bind(null,r,d,e),[e]),d.getSnapshot!==a||y||Pt!==null&&Pt.memoizedState.tag&1){if(r.flags|=2048,js(9,{destroy:void 0},pm.bind(null,r,d,s,a),null),yt===null)throw Error(o(349));p||(Ea&127)!==0||fm(r,a,s)}return s}function fm(e,a,s){e.flags|=16384,e={getSnapshot:a,value:s},a=Pe.updateQueue,a===null?(a=rl(),Pe.updateQueue=a,a.stores=[e]):(s=a.stores,s===null?a.stores=[e]:s.push(e))}function pm(e,a,s,r){a.value=s,a.getSnapshot=r,mm(a)&&gm(e)}function hm(e,a,s){return s(function(){mm(a)&&gm(e)})}function mm(e){var a=e.getSnapshot;e=e.value;try{var s=a();return!Un(e,s)}catch{return!0}}function gm(e){var a=Ci(e,2);a!==null&&En(a,e,2)}function zu(e){var a=yn();if(typeof e=="function"){var s=e;if(e=s(),Ni){ut(!0);try{s()}finally{ut(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:e},a}function ym(e,a,s,r){return e.baseState=s,Nu(e,dt,typeof r=="function"?r:Ma)}function E1(e,a,s,r,d){if(fl(e))throw Error(o(485));if(e=a.action,e!==null){var p={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){p.listeners.push(y)}};N.T!==null?s(!0):p.isTransition=!1,r(p),s=a.pending,s===null?(p.next=a.pending=p,vm(a,p)):(p.next=s.next,a.pending=s.next=p)}}function vm(e,a){var s=a.action,r=a.payload,d=e.state;if(a.isTransition){var p=N.T,y={};N.T=y;try{var b=s(d,r),T=N.S;T!==null&&T(y,b),xm(e,a,b)}catch(O){Ou(e,a,O)}finally{p!==null&&y.types!==null&&(p.types=y.types),N.T=p}}else try{p=s(d,r),xm(e,a,p)}catch(O){Ou(e,a,O)}}function xm(e,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(r){bm(e,a,r)},function(r){return Ou(e,a,r)}):bm(e,a,s)}function bm(e,a,s){a.status="fulfilled",a.value=s,Sm(a),e.state=s,a=e.pending,a!==null&&(s=a.next,s===a?e.pending=null:(s=s.next,a.next=s,vm(e,s)))}function Ou(e,a,s){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do a.status="rejected",a.reason=s,Sm(a),a=a.next;while(a!==r)}e.action=null}function Sm(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function _m(e,a){return a}function wm(e,a){if(Ke){var s=yt.formState;if(s!==null){e:{var r=Pe;if(Ke){if(bt){t:{for(var d=bt,p=Kn;d.nodeType!==8;){if(!p){d=null;break t}if(d=Zn(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){bt=Zn(d.nextSibling),r=d.data==="F!";break e}}Ya(r)}r=!1}r&&(a=s[0])}}return s=yn(),s.memoizedState=s.baseState=a,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_m,lastRenderedState:a},s.queue=r,s=Hm.bind(null,Pe,r),r.dispatch=s,r=zu(!1),p=Hu.bind(null,Pe,!1,r.queue),r=yn(),d={state:a,dispatch:null,action:e,pending:null},r.queue=d,s=E1.bind(null,Pe,d,p,s),d.dispatch=s,r.memoizedState=e,[a,s,!1]}function Cm(e){var a=zt();return Tm(a,dt,e)}function Tm(e,a,s){if(a=Nu(e,a,_m)[0],e=cl(Ma)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var r=No(a)}catch(y){throw y===Ss?Jr:y}else r=a;a=zt();var d=a.queue,p=d.dispatch;return s!==a.memoizedState&&(Pe.flags|=2048,js(9,{destroy:void 0},M1.bind(null,d,s),null)),[r,p,e]}function M1(e,a){e.action=a}function jm(e){var a=zt(),s=dt;if(s!==null)return Tm(a,s,e);zt(),a=a.memoizedState,s=zt();var r=s.queue.dispatch;return s.memoizedState=e,[a,r,!1]}function js(e,a,s,r){return e={tag:e,create:s,deps:r,inst:a,next:null},a=Pe.updateQueue,a===null&&(a=rl(),Pe.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,a.lastEffect=e),e}function Am(){return zt().memoizedState}function ul(e,a,s,r){var d=yn();Pe.flags|=e,d.memoizedState=js(1|a,{destroy:void 0},s,r===void 0?null:r)}function dl(e,a,s,r){var d=zt();r=r===void 0?null:r;var p=d.memoizedState.inst;dt!==null&&r!==null&&Au(r,dt.memoizedState.deps)?d.memoizedState=js(a,p,s,r):(Pe.flags|=e,d.memoizedState=js(1|a,p,s,r))}function km(e,a){ul(8390656,8,e,a)}function Bu(e,a){dl(2048,8,e,a)}function R1(e){Pe.flags|=4;var a=Pe.updateQueue;if(a===null)a=rl(),Pe.updateQueue=a,a.events=[e];else{var s=a.events;s===null?a.events=[e]:s.push(e)}}function Em(e){var a=zt().memoizedState;return R1({ref:a,nextImpl:e}),function(){if((nt&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}function Mm(e,a){return dl(4,2,e,a)}function Rm(e,a){return dl(4,4,e,a)}function Dm(e,a){if(typeof a=="function"){e=e();var s=a(e);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function Nm(e,a,s){s=s!=null?s.concat([e]):null,dl(4,4,Dm.bind(null,a,e),s)}function Lu(){}function Um(e,a){var s=zt();a=a===void 0?null:a;var r=s.memoizedState;return a!==null&&Au(a,r[1])?r[0]:(s.memoizedState=[e,a],e)}function zm(e,a){var s=zt();a=a===void 0?null:a;var r=s.memoizedState;if(a!==null&&Au(a,r[1]))return r[0];if(r=e(),Ni){ut(!0);try{e()}finally{ut(!1)}}return s.memoizedState=[r,a],r}function Iu(e,a,s){return s===void 0||(Ea&1073741824)!==0&&(Ye&261930)===0?e.memoizedState=a:(e.memoizedState=s,e=Og(),Pe.lanes|=e,ni|=e,s)}function Om(e,a,s,r){return Un(s,a)?s:ws.current!==null?(e=Iu(e,s,r),Un(e,a)||(Vt=!0),e):(Ea&42)===0||(Ea&1073741824)!==0&&(Ye&261930)===0?(Vt=!0,e.memoizedState=s):(e=Og(),Pe.lanes|=e,ni|=e,a)}function Bm(e,a,s,r,d){var p=ee.p;ee.p=p!==0&&8>p?p:8;var y=N.T,b={};N.T=b,Hu(e,!1,a,s);try{var T=d(),O=N.S;if(O!==null&&O(b,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var G=j1(T,r);Uo(e,a,G,Pn(e))}else Uo(e,a,r,Pn(e))}catch(K){Uo(e,a,{then:function(){},status:"rejected",reason:K},Pn())}finally{ee.p=p,y!==null&&b.types!==null&&(y.types=b.types),N.T=y}}function D1(){}function Pu(e,a,s,r){if(e.tag!==5)throw Error(o(476));var d=Lm(e).queue;Bm(e,d,a,ie,s===null?D1:function(){return Im(e),s(r)})}function Lm(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:ie},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:s},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Im(e){var a=Lm(e);a.next===null&&(a=e.alternate.memoizedState),Uo(e,a.next.queue,{},Pn())}function Vu(){return on(Qo)}function Pm(){return zt().memoizedState}function Vm(){return zt().memoizedState}function N1(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var s=Pn();e=Ka(s);var r=Qa(a,e,s);r!==null&&(En(r,a,s),Eo(r,a,s)),a={cache:gu()},e.payload=a;return}a=a.return}}function U1(e,a,s){var r=Pn();s={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},fl(e)?Fm(a,s):(s=su(e,a,s,r),s!==null&&(En(s,e,r),qm(s,a,r)))}function Hm(e,a,s){var r=Pn();Uo(e,a,s,r)}function Uo(e,a,s,r){var d={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(fl(e))Fm(a,d);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var y=a.lastRenderedState,b=p(y,s);if(d.hasEagerState=!0,d.eagerState=b,Un(b,y))return $r(e,a,d,0),yt===null&&Gr(),!1}catch{}finally{}if(s=su(e,a,d,r),s!==null)return En(s,e,r),qm(s,a,r),!0}return!1}function Hu(e,a,s,r){if(r={lane:2,revertLane:bd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},fl(e)){if(a)throw Error(o(479))}else a=su(e,s,r,2),a!==null&&En(a,e,2)}function fl(e){var a=e.alternate;return e===Pe||a!==null&&a===Pe}function Fm(e,a){Cs=sl=!0;var s=e.pending;s===null?a.next=a:(a.next=s.next,s.next=a),e.pending=a}function qm(e,a,s){if((s&4194048)!==0){var r=a.lanes;r&=e.pendingLanes,s|=r,a.lanes=s,Ie(e,s)}}var zo={readContext:on,use:ll,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};zo.useEffectEvent=Mt;var Gm={readContext:on,use:ll,useCallback:function(e,a){return yn().memoizedState=[e,a===void 0?null:a],e},useContext:on,useEffect:km,useImperativeHandle:function(e,a,s){s=s!=null?s.concat([e]):null,ul(4194308,4,Dm.bind(null,a,e),s)},useLayoutEffect:function(e,a){return ul(4194308,4,e,a)},useInsertionEffect:function(e,a){ul(4,2,e,a)},useMemo:function(e,a){var s=yn();a=a===void 0?null:a;var r=e();if(Ni){ut(!0);try{e()}finally{ut(!1)}}return s.memoizedState=[r,a],r},useReducer:function(e,a,s){var r=yn();if(s!==void 0){var d=s(a);if(Ni){ut(!0);try{s(a)}finally{ut(!1)}}}else d=a;return r.memoizedState=r.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},r.queue=e,e=e.dispatch=U1.bind(null,Pe,e),[r.memoizedState,e]},useRef:function(e){var a=yn();return e={current:e},a.memoizedState=e},useState:function(e){e=zu(e);var a=e.queue,s=Hm.bind(null,Pe,a);return a.dispatch=s,[e.memoizedState,s]},useDebugValue:Lu,useDeferredValue:function(e,a){var s=yn();return Iu(s,e,a)},useTransition:function(){var e=zu(!1);return e=Bm.bind(null,Pe,e.queue,!0,!1),yn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,s){var r=Pe,d=yn();if(Ke){if(s===void 0)throw Error(o(407));s=s()}else{if(s=a(),yt===null)throw Error(o(349));(Ye&127)!==0||fm(r,a,s)}d.memoizedState=s;var p={value:s,getSnapshot:a};return d.queue=p,km(hm.bind(null,r,p,e),[e]),r.flags|=2048,js(9,{destroy:void 0},pm.bind(null,r,p,s,a),null),s},useId:function(){var e=yn(),a=yt.identifierPrefix;if(Ke){var s=fa,r=da;s=(r&~(1<<32-gt(r)-1)).toString(32)+s,a="_"+a+"R_"+s,s=ol++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=A1++,a="_"+a+"r_"+s.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:Vu,useFormState:wm,useActionState:wm,useOptimistic:function(e){var a=yn();a.memoizedState=a.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=Hu.bind(null,Pe,!0,s),s.dispatch=a,[e,a]},useMemoCache:Du,useCacheRefresh:function(){return yn().memoizedState=N1.bind(null,Pe)},useEffectEvent:function(e){var a=yn(),s={impl:e};return a.memoizedState=s,function(){if((nt&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}},Fu={readContext:on,use:ll,useCallback:Um,useContext:on,useEffect:Bu,useImperativeHandle:Nm,useInsertionEffect:Mm,useLayoutEffect:Rm,useMemo:zm,useReducer:cl,useRef:Am,useState:function(){return cl(Ma)},useDebugValue:Lu,useDeferredValue:function(e,a){var s=zt();return Om(s,dt.memoizedState,e,a)},useTransition:function(){var e=cl(Ma)[0],a=zt().memoizedState;return[typeof e=="boolean"?e:No(e),a]},useSyncExternalStore:dm,useId:Pm,useHostTransitionStatus:Vu,useFormState:Cm,useActionState:Cm,useOptimistic:function(e,a){var s=zt();return ym(s,dt,e,a)},useMemoCache:Du,useCacheRefresh:Vm};Fu.useEffectEvent=Em;var $m={readContext:on,use:ll,useCallback:Um,useContext:on,useEffect:Bu,useImperativeHandle:Nm,useInsertionEffect:Mm,useLayoutEffect:Rm,useMemo:zm,useReducer:Uu,useRef:Am,useState:function(){return Uu(Ma)},useDebugValue:Lu,useDeferredValue:function(e,a){var s=zt();return dt===null?Iu(s,e,a):Om(s,dt.memoizedState,e,a)},useTransition:function(){var e=Uu(Ma)[0],a=zt().memoizedState;return[typeof e=="boolean"?e:No(e),a]},useSyncExternalStore:dm,useId:Pm,useHostTransitionStatus:Vu,useFormState:jm,useActionState:jm,useOptimistic:function(e,a){var s=zt();return dt!==null?ym(s,dt,e,a):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Du,useCacheRefresh:Vm};$m.useEffectEvent=Em;function qu(e,a,s,r){a=e.memoizedState,s=s(r,a),s=s==null?a:x({},a,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Gu={enqueueSetState:function(e,a,s){e=e._reactInternals;var r=Pn(),d=Ka(r);d.payload=a,s!=null&&(d.callback=s),a=Qa(e,d,r),a!==null&&(En(a,e,r),Eo(a,e,r))},enqueueReplaceState:function(e,a,s){e=e._reactInternals;var r=Pn(),d=Ka(r);d.tag=1,d.payload=a,s!=null&&(d.callback=s),a=Qa(e,d,r),a!==null&&(En(a,e,r),Eo(a,e,r))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var s=Pn(),r=Ka(s);r.tag=2,a!=null&&(r.callback=a),a=Qa(e,r,s),a!==null&&(En(a,e,s),Eo(a,e,s))}};function Ym(e,a,s,r,d,p,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,p,y):a.prototype&&a.prototype.isPureReactComponent?!So(s,r)||!So(d,p):!0}function Xm(e,a,s,r){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,r),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,r),a.state!==e&&Gu.enqueueReplaceState(a,a.state,null)}function Ui(e,a){var s=a;if("ref"in a){s={};for(var r in a)r!=="ref"&&(s[r]=a[r])}if(e=e.defaultProps){s===a&&(s=x({},s));for(var d in e)s[d]===void 0&&(s[d]=e[d])}return s}function Wm(e){qr(e)}function Km(e){console.error(e)}function Qm(e){qr(e)}function pl(e,a){try{var s=e.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(r){setTimeout(function(){throw r})}}function Zm(e,a,s){try{var r=e.onCaughtError;r(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function $u(e,a,s){return s=Ka(s),s.tag=3,s.payload={element:null},s.callback=function(){pl(e,a)},s}function Jm(e){return e=Ka(e),e.tag=3,e}function eg(e,a,s,r){var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var p=r.value;e.payload=function(){return d(p)},e.callback=function(){Zm(a,s,r)}}var y=s.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Zm(a,s,r),typeof d!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var b=r.stack;this.componentDidCatch(r.value,{componentStack:b!==null?b:""})})}function z1(e,a,s,r,d){if(s.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(a=s.alternate,a!==null&&vs(a,s,d,!0),s=On.current,s!==null){switch(s.tag){case 31:case 13:return Qn===null?Tl():s.alternate===null&&Rt===0&&(Rt=3),s.flags&=-257,s.flags|=65536,s.lanes=d,r===el?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([r]):a.add(r),yd(e,r,d)),!1;case 22:return s.flags|=65536,r===el?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([r])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([r]):s.add(r)),yd(e,r,d)),!1}throw Error(o(435,s.tag))}return yd(e,r,d),Tl(),!1}if(Ke)return a=On.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=d,r!==du&&(e=Error(o(422),{cause:r}),Co(Yn(e,s)))):(r!==du&&(a=Error(o(423),{cause:r}),Co(Yn(a,s))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,r=Yn(r,s),d=$u(e.stateNode,r,d),_u(e,d),Rt!==4&&(Rt=2)),!1;var p=Error(o(520),{cause:r});if(p=Yn(p,s),Fo===null?Fo=[p]:Fo.push(p),Rt!==4&&(Rt=2),a===null)return!0;r=Yn(r,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,e=d&-d,s.lanes|=e,e=$u(s.stateNode,r,e),_u(s,e),!1;case 1:if(a=s.type,p=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ai===null||!ai.has(p))))return s.flags|=65536,d&=-d,s.lanes|=d,d=Jm(d),eg(d,e,s,r),_u(s,d),!1}s=s.return}while(s!==null);return!1}var Yu=Error(o(461)),Vt=!1;function rn(e,a,s,r){a.child=e===null?im(a,null,s,r):Di(a,e.child,s,r)}function tg(e,a,s,r,d){s=s.render;var p=a.ref;if("ref"in r){var y={};for(var b in r)b!=="ref"&&(y[b]=r[b])}else y=r;return ki(a),r=ku(e,a,s,y,p,d),b=Eu(),e!==null&&!Vt?(Mu(e,a,d),Ra(e,a,d)):(Ke&&b&&cu(a),a.flags|=1,rn(e,a,r,d),a.child)}function ng(e,a,s,r,d){if(e===null){var p=s.type;return typeof p=="function"&&!ou(p)&&p.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=p,ag(e,a,p,r,d)):(e=Xr(s.type,null,r,a,a.mode,d),e.ref=a.ref,e.return=a,a.child=e)}if(p=e.child,!td(e,d)){var y=p.memoizedProps;if(s=s.compare,s=s!==null?s:So,s(y,r)&&e.ref===a.ref)return Ra(e,a,d)}return a.flags|=1,e=Ta(p,r),e.ref=a.ref,e.return=a,a.child=e}function ag(e,a,s,r,d){if(e!==null){var p=e.memoizedProps;if(So(p,r)&&e.ref===a.ref)if(Vt=!1,a.pendingProps=r=p,td(e,d))(e.flags&131072)!==0&&(Vt=!0);else return a.lanes=e.lanes,Ra(e,a,d)}return Xu(e,a,s,r,d)}function ig(e,a,s,r){var d=r.children,p=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|s:s,e!==null){for(r=a.child=e.child,d=0;r!==null;)d=d|r.lanes|r.childLanes,r=r.sibling;r=d&~p}else r=0,a.child=null;return sg(e,a,p,s,r)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&Zr(a,p!==null?p.cachePool:null),p!==null?rm(a,p):Cu(),lm(a);else return r=a.lanes=536870912,sg(e,a,p!==null?p.baseLanes|s:s,s,r)}else p!==null?(Zr(a,p.cachePool),rm(a,p),Ja(),a.memoizedState=null):(e!==null&&Zr(a,null),Cu(),Ja());return rn(e,a,d,s),a.child}function Oo(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function sg(e,a,s,r,d){var p=vu();return p=p===null?null:{parent:It._currentValue,pool:p},a.memoizedState={baseLanes:s,cachePool:p},e!==null&&Zr(a,null),Cu(),lm(a),e!==null&&vs(e,a,r,!0),a.childLanes=d,null}function hl(e,a){return a=gl({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function og(e,a,s){return Di(a,e.child,null,s),e=hl(a,a.pendingProps),e.flags|=2,Bn(a),a.memoizedState=null,e}function O1(e,a,s){var r=a.pendingProps,d=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(Ke){if(r.mode==="hidden")return e=hl(a,r),a.lanes=536870912,Oo(null,e);if(ju(a),(e=bt)?(e=vy(e,Kn),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Ga!==null?{id:da,overflow:fa}:null,retryLane:536870912,hydrationErrors:null},s=Fh(e),s.return=a,a.child=s,sn=a,bt=null)):e=null,e===null)throw Ya(a);return a.lanes=536870912,null}return hl(a,r)}var p=e.memoizedState;if(p!==null){var y=p.dehydrated;if(ju(a),d)if(a.flags&256)a.flags&=-257,a=og(e,a,s);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(o(558));else if(Vt||vs(e,a,s,!1),d=(s&e.childLanes)!==0,Vt||d){if(r=yt,r!==null&&(y=st(r,s),y!==0&&y!==p.retryLane))throw p.retryLane=y,Ci(e,y),En(r,e,y),Yu;Tl(),a=og(e,a,s)}else e=p.treeContext,bt=Zn(y.nextSibling),sn=a,Ke=!0,$a=null,Kn=!1,e!==null&&$h(a,e),a=hl(a,r),a.flags|=4096;return a}return e=Ta(e.child,{mode:r.mode,children:r.children}),e.ref=a.ref,a.child=e,e.return=a,e}function ml(e,a){var s=a.ref;if(s===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(e===null||e.ref!==s)&&(a.flags|=4194816)}}function Xu(e,a,s,r,d){return ki(a),s=ku(e,a,s,r,void 0,d),r=Eu(),e!==null&&!Vt?(Mu(e,a,d),Ra(e,a,d)):(Ke&&r&&cu(a),a.flags|=1,rn(e,a,s,d),a.child)}function rg(e,a,s,r,d,p){return ki(a),a.updateQueue=null,s=um(a,r,s,d),cm(e),r=Eu(),e!==null&&!Vt?(Mu(e,a,p),Ra(e,a,p)):(Ke&&r&&cu(a),a.flags|=1,rn(e,a,s,p),a.child)}function lg(e,a,s,r,d){if(ki(a),a.stateNode===null){var p=hs,y=s.contextType;typeof y=="object"&&y!==null&&(p=on(y)),p=new s(r,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Gu,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=r,p.state=a.memoizedState,p.refs={},bu(a),y=s.contextType,p.context=typeof y=="object"&&y!==null?on(y):hs,p.state=a.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(qu(a,s,y,r),p.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(y=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),y!==p.state&&Gu.enqueueReplaceState(p,p.state,null),Ro(a,r,p,d),Mo(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),r=!0}else if(e===null){p=a.stateNode;var b=a.memoizedProps,T=Ui(s,b);p.props=T;var O=p.context,G=s.contextType;y=hs,typeof G=="object"&&G!==null&&(y=on(G));var K=s.getDerivedStateFromProps;G=typeof K=="function"||typeof p.getSnapshotBeforeUpdate=="function",b=a.pendingProps!==b,G||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b||O!==y)&&Xm(a,p,r,y),Wa=!1;var I=a.memoizedState;p.state=I,Ro(a,r,p,d),Mo(),O=a.memoizedState,b||I!==O||Wa?(typeof K=="function"&&(qu(a,s,K,r),O=a.memoizedState),(T=Wa||Ym(a,s,T,r,I,O,y))?(G||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=r,a.memoizedState=O),p.props=r,p.state=O,p.context=y,r=T):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),r=!1)}else{p=a.stateNode,Su(e,a),y=a.memoizedProps,G=Ui(s,y),p.props=G,K=a.pendingProps,I=p.context,O=s.contextType,T=hs,typeof O=="object"&&O!==null&&(T=on(O)),b=s.getDerivedStateFromProps,(O=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(y!==K||I!==T)&&Xm(a,p,r,T),Wa=!1,I=a.memoizedState,p.state=I,Ro(a,r,p,d),Mo();var H=a.memoizedState;y!==K||I!==H||Wa||e!==null&&e.dependencies!==null&&Kr(e.dependencies)?(typeof b=="function"&&(qu(a,s,b,r),H=a.memoizedState),(G=Wa||Ym(a,s,G,r,I,H,T)||e!==null&&e.dependencies!==null&&Kr(e.dependencies))?(O||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(r,H,T),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(r,H,T)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||y===e.memoizedProps&&I===e.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&I===e.memoizedState||(a.flags|=1024),a.memoizedProps=r,a.memoizedState=H),p.props=r,p.state=H,p.context=T,r=G):(typeof p.componentDidUpdate!="function"||y===e.memoizedProps&&I===e.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&I===e.memoizedState||(a.flags|=1024),r=!1)}return p=r,ml(e,a),r=(a.flags&128)!==0,p||r?(p=a.stateNode,s=r&&typeof s.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,e!==null&&r?(a.child=Di(a,e.child,null,d),a.child=Di(a,null,s,d)):rn(e,a,s,d),a.memoizedState=p.state,e=a.child):e=Ra(e,a,d),e}function cg(e,a,s,r){return ji(),a.flags|=256,rn(e,a,s,r),a.child}var Wu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ku(e){return{baseLanes:e,cachePool:Zh()}}function Qu(e,a,s){return e=e!==null?e.childLanes&~s:0,a&&(e|=In),e}function ug(e,a,s){var r=a.pendingProps,d=!1,p=(a.flags&128)!==0,y;if((y=p)||(y=e!==null&&e.memoizedState===null?!1:(Ut.current&2)!==0),y&&(d=!0,a.flags&=-129),y=(a.flags&32)!==0,a.flags&=-33,e===null){if(Ke){if(d?Za(a):Ja(),(e=bt)?(e=vy(e,Kn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Ga!==null?{id:da,overflow:fa}:null,retryLane:536870912,hydrationErrors:null},s=Fh(e),s.return=a,a.child=s,sn=a,bt=null)):e=null,e===null)throw Ya(a);return Nd(e)?a.lanes=32:a.lanes=536870912,null}var b=r.children;return r=r.fallback,d?(Ja(),d=a.mode,b=gl({mode:"hidden",children:b},d),r=Ti(r,d,s,null),b.return=a,r.return=a,b.sibling=r,a.child=b,r=a.child,r.memoizedState=Ku(s),r.childLanes=Qu(e,y,s),a.memoizedState=Wu,Oo(null,r)):(Za(a),Zu(a,b))}var T=e.memoizedState;if(T!==null&&(b=T.dehydrated,b!==null)){if(p)a.flags&256?(Za(a),a.flags&=-257,a=Ju(e,a,s)):a.memoizedState!==null?(Ja(),a.child=e.child,a.flags|=128,a=null):(Ja(),b=r.fallback,d=a.mode,r=gl({mode:"visible",children:r.children},d),b=Ti(b,d,s,null),b.flags|=2,r.return=a,b.return=a,r.sibling=b,a.child=r,Di(a,e.child,null,s),r=a.child,r.memoizedState=Ku(s),r.childLanes=Qu(e,y,s),a.memoizedState=Wu,a=Oo(null,r));else if(Za(a),Nd(b)){if(y=b.nextSibling&&b.nextSibling.dataset,y)var O=y.dgst;y=O,r=Error(o(419)),r.stack="",r.digest=y,Co({value:r,source:null,stack:null}),a=Ju(e,a,s)}else if(Vt||vs(e,a,s,!1),y=(s&e.childLanes)!==0,Vt||y){if(y=yt,y!==null&&(r=st(y,s),r!==0&&r!==T.retryLane))throw T.retryLane=r,Ci(e,r),En(y,e,r),Yu;Dd(b)||Tl(),a=Ju(e,a,s)}else Dd(b)?(a.flags|=192,a.child=e.child,a=null):(e=T.treeContext,bt=Zn(b.nextSibling),sn=a,Ke=!0,$a=null,Kn=!1,e!==null&&$h(a,e),a=Zu(a,r.children),a.flags|=4096);return a}return d?(Ja(),b=r.fallback,d=a.mode,T=e.child,O=T.sibling,r=Ta(T,{mode:"hidden",children:r.children}),r.subtreeFlags=T.subtreeFlags&65011712,O!==null?b=Ta(O,b):(b=Ti(b,d,s,null),b.flags|=2),b.return=a,r.return=a,r.sibling=b,a.child=r,Oo(null,r),r=a.child,b=e.child.memoizedState,b===null?b=Ku(s):(d=b.cachePool,d!==null?(T=It._currentValue,d=d.parent!==T?{parent:T,pool:T}:d):d=Zh(),b={baseLanes:b.baseLanes|s,cachePool:d}),r.memoizedState=b,r.childLanes=Qu(e,y,s),a.memoizedState=Wu,Oo(e.child,r)):(Za(a),s=e.child,e=s.sibling,s=Ta(s,{mode:"visible",children:r.children}),s.return=a,s.sibling=null,e!==null&&(y=a.deletions,y===null?(a.deletions=[e],a.flags|=16):y.push(e)),a.child=s,a.memoizedState=null,s)}function Zu(e,a){return a=gl({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function gl(e,a){return e=zn(22,e,null,a),e.lanes=0,e}function Ju(e,a,s){return Di(a,e.child,null,s),e=Zu(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function dg(e,a,s){e.lanes|=a;var r=e.alternate;r!==null&&(r.lanes|=a),hu(e.return,a,s)}function ed(e,a,s,r,d,p){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:d,treeForkCount:p}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=r,y.tail=s,y.tailMode=d,y.treeForkCount=p)}function fg(e,a,s){var r=a.pendingProps,d=r.revealOrder,p=r.tail;r=r.children;var y=Ut.current,b=(y&2)!==0;if(b?(y=y&1|2,a.flags|=128):y&=1,be(Ut,y),rn(e,a,r,s),r=Ke?wo:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dg(e,s,a);else if(e.tag===19)dg(e,s,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(s=a.child,d=null;s!==null;)e=s.alternate,e!==null&&il(e)===null&&(d=s),s=s.sibling;s=d,s===null?(d=a.child,a.child=null):(d=s.sibling,s.sibling=null),ed(a,!1,d,s,p,r);break;case"backwards":case"unstable_legacy-backwards":for(s=null,d=a.child,a.child=null;d!==null;){if(e=d.alternate,e!==null&&il(e)===null){a.child=d;break}e=d.sibling,d.sibling=s,s=d,d=e}ed(a,!0,s,null,p,r);break;case"together":ed(a,!1,null,null,void 0,r);break;default:a.memoizedState=null}return a.child}function Ra(e,a,s){if(e!==null&&(a.dependencies=e.dependencies),ni|=a.lanes,(s&a.childLanes)===0)if(e!==null){if(vs(e,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(o(153));if(a.child!==null){for(e=a.child,s=Ta(e,e.pendingProps),a.child=s,s.return=a;e.sibling!==null;)e=e.sibling,s=s.sibling=Ta(e,e.pendingProps),s.return=a;s.sibling=null}return a.child}function td(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&Kr(e)))}function B1(e,a,s){switch(a.tag){case 3:Et(a,a.stateNode.containerInfo),Xa(a,It,e.memoizedState.cache),ji();break;case 27:case 5:We(a);break;case 4:Et(a,a.stateNode.containerInfo);break;case 10:Xa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,ju(a),null;break;case 13:var r=a.memoizedState;if(r!==null)return r.dehydrated!==null?(Za(a),a.flags|=128,null):(s&a.child.childLanes)!==0?ug(e,a,s):(Za(a),e=Ra(e,a,s),e!==null?e.sibling:null);Za(a);break;case 19:var d=(e.flags&128)!==0;if(r=(s&a.childLanes)!==0,r||(vs(e,a,s,!1),r=(s&a.childLanes)!==0),d){if(r)return fg(e,a,s);a.flags|=128}if(d=a.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),be(Ut,Ut.current),r)break;return null;case 22:return a.lanes=0,ig(e,a,s,a.pendingProps);case 24:Xa(a,It,e.memoizedState.cache)}return Ra(e,a,s)}function pg(e,a,s){if(e!==null)if(e.memoizedProps!==a.pendingProps)Vt=!0;else{if(!td(e,s)&&(a.flags&128)===0)return Vt=!1,B1(e,a,s);Vt=(e.flags&131072)!==0}else Vt=!1,Ke&&(a.flags&1048576)!==0&&Gh(a,wo,a.index);switch(a.lanes=0,a.tag){case 16:e:{var r=a.pendingProps;if(e=Mi(a.elementType),a.type=e,typeof e=="function")ou(e)?(r=Ui(e,r),a.tag=1,a=lg(null,a,e,r,s)):(a.tag=0,a=Xu(null,a,e,r,s));else{if(e!=null){var d=e.$$typeof;if(d===U){a.tag=11,a=tg(null,a,e,r,s);break e}else if(d===ne){a.tag=14,a=ng(null,a,e,r,s);break e}}throw a=Ae(e)||e,Error(o(306,a,""))}}return a;case 0:return Xu(e,a,a.type,a.pendingProps,s);case 1:return r=a.type,d=Ui(r,a.pendingProps),lg(e,a,r,d,s);case 3:e:{if(Et(a,a.stateNode.containerInfo),e===null)throw Error(o(387));r=a.pendingProps;var p=a.memoizedState;d=p.element,Su(e,a),Ro(a,r,null,s);var y=a.memoizedState;if(r=y.cache,Xa(a,It,r),r!==p.cache&&mu(a,[It],s,!0),Mo(),r=y.element,p.isDehydrated)if(p={element:r,isDehydrated:!1,cache:y.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=cg(e,a,r,s);break e}else if(r!==d){d=Yn(Error(o(424)),a),Co(d),a=cg(e,a,r,s);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(bt=Zn(e.firstChild),sn=a,Ke=!0,$a=null,Kn=!0,s=im(a,null,r,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(ji(),r===d){a=Ra(e,a,s);break e}rn(e,a,r,s)}a=a.child}return a;case 26:return ml(e,a),e===null?(s=Cy(a.type,null,a.pendingProps,null))?a.memoizedState=s:Ke||(s=a.type,e=a.pendingProps,r=Dl(re.current).createElement(s),r[an]=a,r[wn]=e,ln(r,s,e),Kt(r),a.stateNode=r):a.memoizedState=Cy(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return We(a),e===null&&Ke&&(r=a.stateNode=Sy(a.type,a.pendingProps,re.current),sn=a,Kn=!0,d=bt,ri(a.type)?(Ud=d,bt=Zn(r.firstChild)):bt=d),rn(e,a,a.pendingProps.children,s),ml(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&Ke&&((d=r=bt)&&(r=p_(r,a.type,a.pendingProps,Kn),r!==null?(a.stateNode=r,sn=a,bt=Zn(r.firstChild),Kn=!1,d=!0):d=!1),d||Ya(a)),We(a),d=a.type,p=a.pendingProps,y=e!==null?e.memoizedProps:null,r=p.children,Ed(d,p)?r=null:y!==null&&Ed(d,y)&&(a.flags|=32),a.memoizedState!==null&&(d=ku(e,a,k1,null,null,s),Qo._currentValue=d),ml(e,a),rn(e,a,r,s),a.child;case 6:return e===null&&Ke&&((e=s=bt)&&(s=h_(s,a.pendingProps,Kn),s!==null?(a.stateNode=s,sn=a,bt=null,e=!0):e=!1),e||Ya(a)),null;case 13:return ug(e,a,s);case 4:return Et(a,a.stateNode.containerInfo),r=a.pendingProps,e===null?a.child=Di(a,null,r,s):rn(e,a,r,s),a.child;case 11:return tg(e,a,a.type,a.pendingProps,s);case 7:return rn(e,a,a.pendingProps,s),a.child;case 8:return rn(e,a,a.pendingProps.children,s),a.child;case 12:return rn(e,a,a.pendingProps.children,s),a.child;case 10:return r=a.pendingProps,Xa(a,a.type,r.value),rn(e,a,r.children,s),a.child;case 9:return d=a.type._context,r=a.pendingProps.children,ki(a),d=on(d),r=r(d),a.flags|=1,rn(e,a,r,s),a.child;case 14:return ng(e,a,a.type,a.pendingProps,s);case 15:return ag(e,a,a.type,a.pendingProps,s);case 19:return fg(e,a,s);case 31:return O1(e,a,s);case 22:return ig(e,a,s,a.pendingProps);case 24:return ki(a),r=on(It),e===null?(d=vu(),d===null&&(d=yt,p=gu(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=s),d=p),a.memoizedState={parent:r,cache:d},bu(a),Xa(a,It,d)):((e.lanes&s)!==0&&(Su(e,a),Ro(a,null,null,s),Mo()),d=e.memoizedState,p=a.memoizedState,d.parent!==r?(d={parent:r,cache:r},a.memoizedState=d,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=d),Xa(a,It,r)):(r=p.cache,Xa(a,It,r),r!==d.cache&&mu(a,[It],s,!0))),rn(e,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function Da(e){e.flags|=4}function nd(e,a,s,r,d){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Pg())e.flags|=8192;else throw Ri=el,xu}else e.flags&=-16777217}function hg(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ey(a))if(Pg())e.flags|=8192;else throw Ri=el,xu}function yl(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?xe():536870912,e.lanes|=a,Ms|=a)}function Bo(e,a){if(!Ke)switch(e.tailMode){case"hidden":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function St(e){var a=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(a)for(var d=e.child;d!==null;)s|=d.lanes|d.childLanes,r|=d.subtreeFlags&65011712,r|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)s|=d.lanes|d.childLanes,r|=d.subtreeFlags,r|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=r,e.childLanes=s,a}function L1(e,a,s){var r=a.pendingProps;switch(uu(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(a),null;case 1:return St(a),null;case 3:return s=a.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),ka(It),Jt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ys(a)?Da(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,fu())),St(a),null;case 26:var d=a.type,p=a.memoizedState;return e===null?(Da(a),p!==null?(St(a),hg(a,p)):(St(a),nd(a,d,null,r,s))):p?p!==e.memoizedState?(Da(a),St(a),hg(a,p)):(St(a),a.flags&=-16777217):(e=e.memoizedProps,e!==r&&Da(a),St(a),nd(a,d,e,r,s)),null;case 27:if(en(a),s=re.current,d=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==r&&Da(a);else{if(!r){if(a.stateNode===null)throw Error(o(166));return St(a),null}e=Z.current,ys(a)?Yh(a):(e=Sy(d,r,s),a.stateNode=e,Da(a))}return St(a),null;case 5:if(en(a),d=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==r&&Da(a);else{if(!r){if(a.stateNode===null)throw Error(o(166));return St(a),null}if(p=Z.current,ys(a))Yh(a);else{var y=Dl(re.current);switch(p){case 1:p=y.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=y.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=y.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof r.is=="string"?y.createElement("select",{is:r.is}):y.createElement("select"),r.multiple?p.multiple=!0:r.size&&(p.size=r.size);break;default:p=typeof r.is=="string"?y.createElement(d,{is:r.is}):y.createElement(d)}}p[an]=a,p[wn]=r;e:for(y=a.child;y!==null;){if(y.tag===5||y.tag===6)p.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===a)break e;for(;y.sibling===null;){if(y.return===null||y.return===a)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}a.stateNode=p;e:switch(ln(p,d,r),d){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Da(a)}}return St(a),nd(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,s),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==r&&Da(a);else{if(typeof r!="string"&&a.stateNode===null)throw Error(o(166));if(e=re.current,ys(a)){if(e=a.stateNode,s=a.memoizedProps,r=null,d=sn,d!==null)switch(d.tag){case 27:case 5:r=d.memoizedProps}e[an]=a,e=!!(e.nodeValue===s||r!==null&&r.suppressHydrationWarning===!0||uy(e.nodeValue,s)),e||Ya(a,!0)}else e=Dl(e).createTextNode(r),e[an]=a,a.stateNode=e}return St(a),null;case 31:if(s=a.memoizedState,e===null||e.memoizedState!==null){if(r=ys(a),s!==null){if(e===null){if(!r)throw Error(o(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[an]=a}else ji(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;St(a),e=!1}else s=fu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return a.flags&256?(Bn(a),a):(Bn(a),null);if((a.flags&128)!==0)throw Error(o(558))}return St(a),null;case 13:if(r=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=ys(a),r!==null&&r.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[an]=a}else ji(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;St(a),d=!1}else d=fu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return a.flags&256?(Bn(a),a):(Bn(a),null)}return Bn(a),(a.flags&128)!==0?(a.lanes=s,a):(s=r!==null,e=e!==null&&e.memoizedState!==null,s&&(r=a.child,d=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(d=r.alternate.memoizedState.cachePool.pool),p=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(p=r.memoizedState.cachePool.pool),p!==d&&(r.flags|=2048)),s!==e&&s&&(a.child.flags|=8192),yl(a,a.updateQueue),St(a),null);case 4:return Jt(),e===null&&Cd(a.stateNode.containerInfo),St(a),null;case 10:return ka(a.type),St(a),null;case 19:if(Ne(Ut),r=a.memoizedState,r===null)return St(a),null;if(d=(a.flags&128)!==0,p=r.rendering,p===null)if(d)Bo(r,!1);else{if(Rt!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(p=il(e),p!==null){for(a.flags|=128,Bo(r,!1),e=p.updateQueue,a.updateQueue=e,yl(a,e),a.subtreeFlags=0,e=s,s=a.child;s!==null;)Hh(s,e),s=s.sibling;return be(Ut,Ut.current&1|2),Ke&&ja(a,r.treeForkCount),a.child}e=e.sibling}r.tail!==null&&ae()>_l&&(a.flags|=128,d=!0,Bo(r,!1),a.lanes=4194304)}else{if(!d)if(e=il(p),e!==null){if(a.flags|=128,d=!0,e=e.updateQueue,a.updateQueue=e,yl(a,e),Bo(r,!0),r.tail===null&&r.tailMode==="hidden"&&!p.alternate&&!Ke)return St(a),null}else 2*ae()-r.renderingStartTime>_l&&s!==536870912&&(a.flags|=128,d=!0,Bo(r,!1),a.lanes=4194304);r.isBackwards?(p.sibling=a.child,a.child=p):(e=r.last,e!==null?e.sibling=p:a.child=p,r.last=p)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ae(),e.sibling=null,s=Ut.current,be(Ut,d?s&1|2:s&1),Ke&&ja(a,r.treeForkCount),e):(St(a),null);case 22:case 23:return Bn(a),Tu(),r=a.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(a.flags|=8192):r&&(a.flags|=8192),r?(s&536870912)!==0&&(a.flags&128)===0&&(St(a),a.subtreeFlags&6&&(a.flags|=8192)):St(a),s=a.updateQueue,s!==null&&yl(a,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==s&&(a.flags|=2048),e!==null&&Ne(Ei),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),ka(It),St(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function I1(e,a){switch(uu(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return ka(It),Jt(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return en(a),null;case 31:if(a.memoizedState!==null){if(Bn(a),a.alternate===null)throw Error(o(340));ji()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(Bn(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(o(340));ji()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return Ne(Ut),null;case 4:return Jt(),null;case 10:return ka(a.type),null;case 22:case 23:return Bn(a),Tu(),e!==null&&Ne(Ei),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return ka(It),null;case 25:return null;default:return null}}function mg(e,a){switch(uu(a),a.tag){case 3:ka(It),Jt();break;case 26:case 27:case 5:en(a);break;case 4:Jt();break;case 31:a.memoizedState!==null&&Bn(a);break;case 13:Bn(a);break;case 19:Ne(Ut);break;case 10:ka(a.type);break;case 22:case 23:Bn(a),Tu(),e!==null&&Ne(Ei);break;case 24:ka(It)}}function Lo(e,a){try{var s=a.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var d=r.next;s=d;do{if((s.tag&e)===e){r=void 0;var p=s.create,y=s.inst;r=p(),y.destroy=r}s=s.next}while(s!==d)}}catch(b){rt(a,a.return,b)}}function ei(e,a,s){try{var r=a.updateQueue,d=r!==null?r.lastEffect:null;if(d!==null){var p=d.next;r=p;do{if((r.tag&e)===e){var y=r.inst,b=y.destroy;if(b!==void 0){y.destroy=void 0,d=a;var T=s,O=b;try{O()}catch(G){rt(d,T,G)}}}r=r.next}while(r!==p)}}catch(G){rt(a,a.return,G)}}function gg(e){var a=e.updateQueue;if(a!==null){var s=e.stateNode;try{om(a,s)}catch(r){rt(e,e.return,r)}}}function yg(e,a,s){s.props=Ui(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(r){rt(e,a,r)}}function Io(e,a){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof s=="function"?e.refCleanup=s(r):s.current=r}}catch(d){rt(e,a,d)}}function pa(e,a){var s=e.ref,r=e.refCleanup;if(s!==null)if(typeof r=="function")try{r()}catch(d){rt(e,a,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(d){rt(e,a,d)}else s.current=null}function vg(e){var a=e.type,s=e.memoizedProps,r=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&r.focus();break e;case"img":s.src?r.src=s.src:s.srcSet&&(r.srcset=s.srcSet)}}catch(d){rt(e,e.return,d)}}function ad(e,a,s){try{var r=e.stateNode;r_(r,e.type,s,a),r[wn]=a}catch(d){rt(e,e.return,d)}}function xg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ri(e.type)||e.tag===4}function id(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ri(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sd(e,a,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(e),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=wa));else if(r!==4&&(r===27&&ri(e.type)&&(s=e.stateNode,a=null),e=e.child,e!==null))for(sd(e,a,s),e=e.sibling;e!==null;)sd(e,a,s),e=e.sibling}function vl(e,a,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,a?s.insertBefore(e,a):s.appendChild(e);else if(r!==4&&(r===27&&ri(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(vl(e,a,s),e=e.sibling;e!==null;)vl(e,a,s),e=e.sibling}function bg(e){var a=e.stateNode,s=e.memoizedProps;try{for(var r=e.type,d=a.attributes;d.length;)a.removeAttributeNode(d[0]);ln(a,r,s),a[an]=e,a[wn]=s}catch(p){rt(e,e.return,p)}}var Na=!1,Ht=!1,od=!1,Sg=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function P1(e,a){if(e=e.containerInfo,Ad=Il,e=Nh(e),Jc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var d=r.anchorOffset,p=r.focusNode;r=r.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break e}var y=0,b=-1,T=-1,O=0,G=0,K=e,I=null;t:for(;;){for(var H;K!==s||d!==0&&K.nodeType!==3||(b=y+d),K!==p||r!==0&&K.nodeType!==3||(T=y+r),K.nodeType===3&&(y+=K.nodeValue.length),(H=K.firstChild)!==null;)I=K,K=H;for(;;){if(K===e)break t;if(I===s&&++O===d&&(b=y),I===p&&++G===r&&(T=y),(H=K.nextSibling)!==null)break;K=I,I=K.parentNode}K=H}s=b===-1||T===-1?null:{start:b,end:T}}else s=null}s=s||{start:0,end:0}}else s=null;for(kd={focusedElem:e,selectionRange:s},Il=!1,Qt=a;Qt!==null;)if(a=Qt,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,Qt=e;else for(;Qt!==null;){switch(a=Qt,p=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)d=e[s],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,s=a,d=p.memoizedProps,p=p.memoizedState,r=s.stateNode;try{var fe=Ui(s.type,d);e=r.getSnapshotBeforeUpdate(fe,p),r.__reactInternalSnapshotBeforeUpdate=e}catch(ke){rt(s,s.return,ke)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,s=e.nodeType,s===9)Rd(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Rd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=a.sibling,e!==null){e.return=a.return,Qt=e;break}Qt=a.return}}function _g(e,a,s){var r=s.flags;switch(s.tag){case 0:case 11:case 15:za(e,s),r&4&&Lo(5,s);break;case 1:if(za(e,s),r&4)if(e=s.stateNode,a===null)try{e.componentDidMount()}catch(y){rt(s,s.return,y)}else{var d=Ui(s.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(d,a,e.__reactInternalSnapshotBeforeUpdate)}catch(y){rt(s,s.return,y)}}r&64&&gg(s),r&512&&Io(s,s.return);break;case 3:if(za(e,s),r&64&&(e=s.updateQueue,e!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{om(e,a)}catch(y){rt(s,s.return,y)}}break;case 27:a===null&&r&4&&bg(s);case 26:case 5:za(e,s),a===null&&r&4&&vg(s),r&512&&Io(s,s.return);break;case 12:za(e,s);break;case 31:za(e,s),r&4&&Tg(e,s);break;case 13:za(e,s),r&4&&jg(e,s),r&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=W1.bind(null,s),m_(e,s))));break;case 22:if(r=s.memoizedState!==null||Na,!r){a=a!==null&&a.memoizedState!==null||Ht,d=Na;var p=Ht;Na=r,(Ht=a)&&!p?Oa(e,s,(s.subtreeFlags&8772)!==0):za(e,s),Na=d,Ht=p}break;case 30:break;default:za(e,s)}}function wg(e){var a=e.alternate;a!==null&&(e.alternate=null,wg(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&Oc(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var _t=null,Tn=!1;function Ua(e,a,s){for(s=s.child;s!==null;)Cg(e,a,s),s=s.sibling}function Cg(e,a,s){if(Re&&typeof Re.onCommitFiberUnmount=="function")try{Re.onCommitFiberUnmount(Te,s)}catch{}switch(s.tag){case 26:Ht||pa(s,a),Ua(e,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Ht||pa(s,a);var r=_t,d=Tn;ri(s.type)&&(_t=s.stateNode,Tn=!1),Ua(e,a,s),Xo(s.stateNode),_t=r,Tn=d;break;case 5:Ht||pa(s,a);case 6:if(r=_t,d=Tn,_t=null,Ua(e,a,s),_t=r,Tn=d,_t!==null)if(Tn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(s.stateNode)}catch(p){rt(s,a,p)}else try{_t.removeChild(s.stateNode)}catch(p){rt(s,a,p)}break;case 18:_t!==null&&(Tn?(e=_t,gy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Ls(e)):gy(_t,s.stateNode));break;case 4:r=_t,d=Tn,_t=s.stateNode.containerInfo,Tn=!0,Ua(e,a,s),_t=r,Tn=d;break;case 0:case 11:case 14:case 15:ei(2,s,a),Ht||ei(4,s,a),Ua(e,a,s);break;case 1:Ht||(pa(s,a),r=s.stateNode,typeof r.componentWillUnmount=="function"&&yg(s,a,r)),Ua(e,a,s);break;case 21:Ua(e,a,s);break;case 22:Ht=(r=Ht)||s.memoizedState!==null,Ua(e,a,s),Ht=r;break;default:Ua(e,a,s)}}function Tg(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ls(e)}catch(s){rt(a,a.return,s)}}}function jg(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ls(e)}catch(s){rt(a,a.return,s)}}function V1(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new Sg),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new Sg),a;default:throw Error(o(435,e.tag))}}function xl(e,a){var s=V1(e);a.forEach(function(r){if(!s.has(r)){s.add(r);var d=K1.bind(null,e,r);r.then(d,d)}})}function jn(e,a){var s=a.deletions;if(s!==null)for(var r=0;r<s.length;r++){var d=s[r],p=e,y=a,b=y;e:for(;b!==null;){switch(b.tag){case 27:if(ri(b.type)){_t=b.stateNode,Tn=!1;break e}break;case 5:_t=b.stateNode,Tn=!1;break e;case 3:case 4:_t=b.stateNode.containerInfo,Tn=!0;break e}b=b.return}if(_t===null)throw Error(o(160));Cg(p,y,d),_t=null,Tn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Ag(a,e),a=a.sibling}var sa=null;function Ag(e,a){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jn(a,e),An(e),r&4&&(ei(3,e,e.return),Lo(3,e),ei(5,e,e.return));break;case 1:jn(a,e),An(e),r&512&&(Ht||s===null||pa(s,s.return)),r&64&&Na&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?r:s.concat(r))));break;case 26:var d=sa;if(jn(a,e),An(e),r&512&&(Ht||s===null||pa(s,s.return)),r&4){var p=s!==null?s.memoizedState:null;if(r=e.memoizedState,s===null)if(r===null)if(e.stateNode===null){e:{r=e.type,s=e.memoizedProps,d=d.ownerDocument||d;t:switch(r){case"title":p=d.getElementsByTagName("title")[0],(!p||p[fo]||p[an]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(r),d.head.insertBefore(p,d.querySelector("head > title"))),ln(p,r,s),p[an]=e,Kt(p),r=p;break e;case"link":var y=Ay("link","href",d).get(r+(s.href||""));if(y){for(var b=0;b<y.length;b++)if(p=y[b],p.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&p.getAttribute("rel")===(s.rel==null?null:s.rel)&&p.getAttribute("title")===(s.title==null?null:s.title)&&p.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){y.splice(b,1);break t}}p=d.createElement(r),ln(p,r,s),d.head.appendChild(p);break;case"meta":if(y=Ay("meta","content",d).get(r+(s.content||""))){for(b=0;b<y.length;b++)if(p=y[b],p.getAttribute("content")===(s.content==null?null:""+s.content)&&p.getAttribute("name")===(s.name==null?null:s.name)&&p.getAttribute("property")===(s.property==null?null:s.property)&&p.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&p.getAttribute("charset")===(s.charSet==null?null:s.charSet)){y.splice(b,1);break t}}p=d.createElement(r),ln(p,r,s),d.head.appendChild(p);break;default:throw Error(o(468,r))}p[an]=e,Kt(p),r=p}e.stateNode=r}else ky(d,e.type,e.stateNode);else e.stateNode=jy(d,r,e.memoizedProps);else p!==r?(p===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):p.count--,r===null?ky(d,e.type,e.stateNode):jy(d,r,e.memoizedProps)):r===null&&e.stateNode!==null&&ad(e,e.memoizedProps,s.memoizedProps)}break;case 27:jn(a,e),An(e),r&512&&(Ht||s===null||pa(s,s.return)),s!==null&&r&4&&ad(e,e.memoizedProps,s.memoizedProps);break;case 5:if(jn(a,e),An(e),r&512&&(Ht||s===null||pa(s,s.return)),e.flags&32){d=e.stateNode;try{rs(d,"")}catch(fe){rt(e,e.return,fe)}}r&4&&e.stateNode!=null&&(d=e.memoizedProps,ad(e,d,s!==null?s.memoizedProps:d)),r&1024&&(od=!0);break;case 6:if(jn(a,e),An(e),r&4){if(e.stateNode===null)throw Error(o(162));r=e.memoizedProps,s=e.stateNode;try{s.nodeValue=r}catch(fe){rt(e,e.return,fe)}}break;case 3:if(zl=null,d=sa,sa=Nl(a.containerInfo),jn(a,e),sa=d,An(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{Ls(a.containerInfo)}catch(fe){rt(e,e.return,fe)}od&&(od=!1,kg(e));break;case 4:r=sa,sa=Nl(e.stateNode.containerInfo),jn(a,e),An(e),sa=r;break;case 12:jn(a,e),An(e);break;case 31:jn(a,e),An(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,xl(e,r)));break;case 13:jn(a,e),An(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Sl=ae()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,xl(e,r)));break;case 22:d=e.memoizedState!==null;var T=s!==null&&s.memoizedState!==null,O=Na,G=Ht;if(Na=O||d,Ht=G||T,jn(a,e),Ht=G,Na=O,An(e),r&8192)e:for(a=e.stateNode,a._visibility=d?a._visibility&-2:a._visibility|1,d&&(s===null||T||Na||Ht||zi(e)),s=null,a=e;;){if(a.tag===5||a.tag===26){if(s===null){T=s=a;try{if(p=T.stateNode,d)y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{b=T.stateNode;var K=T.memoizedProps.style,I=K!=null&&K.hasOwnProperty("display")?K.display:null;b.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(fe){rt(T,T.return,fe)}}}else if(a.tag===6){if(s===null){T=a;try{T.stateNode.nodeValue=d?"":T.memoizedProps}catch(fe){rt(T,T.return,fe)}}}else if(a.tag===18){if(s===null){T=a;try{var H=T.stateNode;d?yy(H,!0):yy(T.stateNode,!1)}catch(fe){rt(T,T.return,fe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}r&4&&(r=e.updateQueue,r!==null&&(s=r.retryQueue,s!==null&&(r.retryQueue=null,xl(e,s))));break;case 19:jn(a,e),An(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,xl(e,r)));break;case 30:break;case 21:break;default:jn(a,e),An(e)}}function An(e){var a=e.flags;if(a&2){try{for(var s,r=e.return;r!==null;){if(xg(r)){s=r;break}r=r.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var d=s.stateNode,p=id(e);vl(e,p,d);break;case 5:var y=s.stateNode;s.flags&32&&(rs(y,""),s.flags&=-33);var b=id(e);vl(e,b,y);break;case 3:case 4:var T=s.stateNode.containerInfo,O=id(e);sd(e,O,T);break;default:throw Error(o(161))}}catch(G){rt(e,e.return,G)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function kg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;kg(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function za(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)_g(e,a.alternate,a),a=a.sibling}function zi(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:ei(4,a,a.return),zi(a);break;case 1:pa(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&yg(a,a.return,s),zi(a);break;case 27:Xo(a.stateNode);case 26:case 5:pa(a,a.return),zi(a);break;case 22:a.memoizedState===null&&zi(a);break;case 30:zi(a);break;default:zi(a)}e=e.sibling}}function Oa(e,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var r=a.alternate,d=e,p=a,y=p.flags;switch(p.tag){case 0:case 11:case 15:Oa(d,p,s),Lo(4,p);break;case 1:if(Oa(d,p,s),r=p,d=r.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(O){rt(r,r.return,O)}if(r=p,d=r.updateQueue,d!==null){var b=r.stateNode;try{var T=d.shared.hiddenCallbacks;if(T!==null)for(d.shared.hiddenCallbacks=null,d=0;d<T.length;d++)sm(T[d],b)}catch(O){rt(r,r.return,O)}}s&&y&64&&gg(p),Io(p,p.return);break;case 27:bg(p);case 26:case 5:Oa(d,p,s),s&&r===null&&y&4&&vg(p),Io(p,p.return);break;case 12:Oa(d,p,s);break;case 31:Oa(d,p,s),s&&y&4&&Tg(d,p);break;case 13:Oa(d,p,s),s&&y&4&&jg(d,p);break;case 22:p.memoizedState===null&&Oa(d,p,s),Io(p,p.return);break;case 30:break;default:Oa(d,p,s)}a=a.sibling}}function rd(e,a){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&To(s))}function ld(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&To(e))}function oa(e,a,s,r){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Eg(e,a,s,r),a=a.sibling}function Eg(e,a,s,r){var d=a.flags;switch(a.tag){case 0:case 11:case 15:oa(e,a,s,r),d&2048&&Lo(9,a);break;case 1:oa(e,a,s,r);break;case 3:oa(e,a,s,r),d&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&To(e)));break;case 12:if(d&2048){oa(e,a,s,r),e=a.stateNode;try{var p=a.memoizedProps,y=p.id,b=p.onPostCommit;typeof b=="function"&&b(y,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){rt(a,a.return,T)}}else oa(e,a,s,r);break;case 31:oa(e,a,s,r);break;case 13:oa(e,a,s,r);break;case 23:break;case 22:p=a.stateNode,y=a.alternate,a.memoizedState!==null?p._visibility&2?oa(e,a,s,r):Po(e,a):p._visibility&2?oa(e,a,s,r):(p._visibility|=2,As(e,a,s,r,(a.subtreeFlags&10256)!==0||!1)),d&2048&&rd(y,a);break;case 24:oa(e,a,s,r),d&2048&&ld(a.alternate,a);break;default:oa(e,a,s,r)}}function As(e,a,s,r,d){for(d=d&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=e,y=a,b=s,T=r,O=y.flags;switch(y.tag){case 0:case 11:case 15:As(p,y,b,T,d),Lo(8,y);break;case 23:break;case 22:var G=y.stateNode;y.memoizedState!==null?G._visibility&2?As(p,y,b,T,d):Po(p,y):(G._visibility|=2,As(p,y,b,T,d)),d&&O&2048&&rd(y.alternate,y);break;case 24:As(p,y,b,T,d),d&&O&2048&&ld(y.alternate,y);break;default:As(p,y,b,T,d)}a=a.sibling}}function Po(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=e,r=a,d=r.flags;switch(r.tag){case 22:Po(s,r),d&2048&&rd(r.alternate,r);break;case 24:Po(s,r),d&2048&&ld(r.alternate,r);break;default:Po(s,r)}a=a.sibling}}var Vo=8192;function ks(e,a,s){if(e.subtreeFlags&Vo)for(e=e.child;e!==null;)Mg(e,a,s),e=e.sibling}function Mg(e,a,s){switch(e.tag){case 26:ks(e,a,s),e.flags&Vo&&e.memoizedState!==null&&A_(s,sa,e.memoizedState,e.memoizedProps);break;case 5:ks(e,a,s);break;case 3:case 4:var r=sa;sa=Nl(e.stateNode.containerInfo),ks(e,a,s),sa=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Vo,Vo=16777216,ks(e,a,s),Vo=r):ks(e,a,s));break;default:ks(e,a,s)}}function Rg(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function Ho(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var r=a[s];Qt=r,Ng(r,e)}Rg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Dg(e),e=e.sibling}function Dg(e){switch(e.tag){case 0:case 11:case 15:Ho(e),e.flags&2048&&ei(9,e,e.return);break;case 3:Ho(e);break;case 12:Ho(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,bl(e)):Ho(e);break;default:Ho(e)}}function bl(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var r=a[s];Qt=r,Ng(r,e)}Rg(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:ei(8,a,a.return),bl(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,bl(a));break;default:bl(a)}e=e.sibling}}function Ng(e,a){for(;Qt!==null;){var s=Qt;switch(s.tag){case 0:case 11:case 15:ei(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var r=s.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:To(s.memoizedState.cache)}if(r=s.child,r!==null)r.return=s,Qt=r;else e:for(s=e;Qt!==null;){r=Qt;var d=r.sibling,p=r.return;if(wg(r),r===s){Qt=null;break e}if(d!==null){d.return=p,Qt=d;break e}Qt=p}}}var H1={getCacheForType:function(e){var a=on(It),s=a.data.get(e);return s===void 0&&(s=e(),a.data.set(e,s)),s},cacheSignal:function(){return on(It).controller.signal}},F1=typeof WeakMap=="function"?WeakMap:Map,nt=0,yt=null,qe=null,Ye=0,ot=0,Ln=null,ti=!1,Es=!1,cd=!1,Ba=0,Rt=0,ni=0,Oi=0,ud=0,In=0,Ms=0,Fo=null,kn=null,dd=!1,Sl=0,Ug=0,_l=1/0,wl=null,ai=null,Gt=0,ii=null,Rs=null,La=0,fd=0,pd=null,zg=null,qo=0,hd=null;function Pn(){return(nt&2)!==0&&Ye!==0?Ye&-Ye:N.T!==null?bd():Lt()}function Og(){if(In===0)if((Ye&536870912)===0||Ke){var e=es;es<<=1,(es&3932160)===0&&(es=262144),In=e}else In=536870912;return e=On.current,e!==null&&(e.flags|=32),In}function En(e,a,s){(e===yt&&(ot===2||ot===9)||e.cancelPendingCommit!==null)&&(Ds(e,0),si(e,Ye,In,!1)),Be(e,s),((nt&2)===0||e!==yt)&&(e===yt&&((nt&2)===0&&(Oi|=s),Rt===4&&si(e,Ye,In,!1)),ha(e))}function Bg(e,a,s){if((nt&6)!==0)throw Error(o(327));var r=!s&&(a&127)===0&&(a&e.expiredLanes)===0||me(e,a),d=r?$1(e,a):gd(e,a,!0),p=r;do{if(d===0){Es&&!r&&si(e,a,0,!1);break}else{if(s=e.current.alternate,p&&!q1(s)){d=gd(e,a,!1),p=!1;continue}if(d===2){if(p=a,e.errorRecoveryDisabledLanes&p)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){a=y;e:{var b=e;d=Fo;var T=b.current.memoizedState.isDehydrated;if(T&&(Ds(b,y).flags|=256),y=gd(b,y,!1),y!==2){if(cd&&!T){b.errorRecoveryDisabledLanes|=p,Oi|=p,d=4;break e}p=kn,kn=d,p!==null&&(kn===null?kn=p:kn.push.apply(kn,p))}d=y}if(p=!1,d!==2)continue}}if(d===1){Ds(e,0),si(e,a,0,!0);break}e:{switch(r=e,p=d,p){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:si(r,a,In,!ti);break e;case 2:kn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(d=Sl+300-ae(),10<d)){if(si(r,a,In,!ti),te(r,0,!0)!==0)break e;La=a,r.timeoutHandle=hy(Lg.bind(null,r,s,kn,wl,dd,a,In,Oi,Ms,ti,p,"Throttled",-0,0),d);break e}Lg(r,s,kn,wl,dd,a,In,Oi,Ms,ti,p,null,-0,0)}}break}while(!0);ha(e)}function Lg(e,a,s,r,d,p,y,b,T,O,G,K,I,H){if(e.timeoutHandle=-1,K=a.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wa},Mg(a,p,K);var fe=(p&62914560)===p?Sl-ae():(p&4194048)===p?Ug-ae():0;if(fe=k_(K,fe),fe!==null){La=p,e.cancelPendingCommit=fe($g.bind(null,e,a,p,s,r,d,y,b,T,G,K,null,I,H)),si(e,p,y,!O);return}}$g(e,a,p,s,r,d,y,b,T)}function q1(e){for(var a=e;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var r=0;r<s.length;r++){var d=s[r],p=d.getSnapshot;d=d.value;try{if(!Un(p(),d))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function si(e,a,s,r){a&=~ud,a&=~Oi,e.suspendedLanes|=a,e.pingedLanes&=~a,r&&(e.warmLanes|=a),r=e.expirationTimes;for(var d=a;0<d;){var p=31-gt(d),y=1<<p;r[p]=-1,d&=~y}s!==0&&Ze(e,s,a)}function Cl(){return(nt&6)===0?(Go(0),!1):!0}function md(){if(qe!==null){if(ot===0)var e=qe.return;else e=qe,Aa=Ai=null,Ru(e),_s=null,Ao=0,e=qe;for(;e!==null;)mg(e.alternate,e),e=e.return;qe=null}}function Ds(e,a){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,u_(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),La=0,md(),yt=e,qe=s=Ta(e.current,null),Ye=a,ot=0,Ln=null,ti=!1,Es=me(e,a),cd=!1,Ms=In=ud=Oi=ni=Rt=0,kn=Fo=null,dd=!1,(a&8)!==0&&(a|=a&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=a;0<r;){var d=31-gt(r),p=1<<d;a|=e[d],r&=~p}return Ba=a,Gr(),s}function Ig(e,a){Pe=null,N.H=zo,a===Ss||a===Jr?(a=tm(),ot=3):a===xu?(a=tm(),ot=4):ot=a===Yu?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ln=a,qe===null&&(Rt=1,pl(e,Yn(a,e.current)))}function Pg(){var e=On.current;return e===null?!0:(Ye&4194048)===Ye?Qn===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?e===Qn:!1}function Vg(){var e=N.H;return N.H=zo,e===null?zo:e}function Hg(){var e=N.A;return N.A=H1,e}function Tl(){Rt=4,ti||(Ye&4194048)!==Ye&&On.current!==null||(Es=!0),(ni&134217727)===0&&(Oi&134217727)===0||yt===null||si(yt,Ye,In,!1)}function gd(e,a,s){var r=nt;nt|=2;var d=Vg(),p=Hg();(yt!==e||Ye!==a)&&(wl=null,Ds(e,a)),a=!1;var y=Rt;e:do try{if(ot!==0&&qe!==null){var b=qe,T=Ln;switch(ot){case 8:md(),y=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(a=!0);var O=ot;if(ot=0,Ln=null,Ns(e,b,T,O),s&&Es){y=0;break e}break;default:O=ot,ot=0,Ln=null,Ns(e,b,T,O)}}G1(),y=Rt;break}catch(G){Ig(e,G)}while(!0);return a&&e.shellSuspendCounter++,Aa=Ai=null,nt=r,N.H=d,N.A=p,qe===null&&(yt=null,Ye=0,Gr()),y}function G1(){for(;qe!==null;)Fg(qe)}function $1(e,a){var s=nt;nt|=2;var r=Vg(),d=Hg();yt!==e||Ye!==a?(wl=null,_l=ae()+500,Ds(e,a)):Es=me(e,a);e:do try{if(ot!==0&&qe!==null){a=qe;var p=Ln;t:switch(ot){case 1:ot=0,Ln=null,Ns(e,a,p,1);break;case 2:case 9:if(Jh(p)){ot=0,Ln=null,qg(a);break}a=function(){ot!==2&&ot!==9||yt!==e||(ot=7),ha(e)},p.then(a,a);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:Jh(p)?(ot=0,Ln=null,qg(a)):(ot=0,Ln=null,Ns(e,a,p,7));break;case 5:var y=null;switch(qe.tag){case 26:y=qe.memoizedState;case 5:case 27:var b=qe;if(y?Ey(y):b.stateNode.complete){ot=0,Ln=null;var T=b.sibling;if(T!==null)qe=T;else{var O=b.return;O!==null?(qe=O,jl(O)):qe=null}break t}}ot=0,Ln=null,Ns(e,a,p,5);break;case 6:ot=0,Ln=null,Ns(e,a,p,6);break;case 8:md(),Rt=6;break e;default:throw Error(o(462))}}Y1();break}catch(G){Ig(e,G)}while(!0);return Aa=Ai=null,N.H=r,N.A=d,nt=s,qe!==null?0:(yt=null,Ye=0,Gr(),Rt)}function Y1(){for(;qe!==null&&!Wt();)Fg(qe)}function Fg(e){var a=pg(e.alternate,e,Ba);e.memoizedProps=e.pendingProps,a===null?jl(e):qe=a}function qg(e){var a=e,s=a.alternate;switch(a.tag){case 15:case 0:a=rg(s,a,a.pendingProps,a.type,void 0,Ye);break;case 11:a=rg(s,a,a.pendingProps,a.type.render,a.ref,Ye);break;case 5:Ru(a);default:mg(s,a),a=qe=Hh(a,Ba),a=pg(s,a,Ba)}e.memoizedProps=e.pendingProps,a===null?jl(e):qe=a}function Ns(e,a,s,r){Aa=Ai=null,Ru(a),_s=null,Ao=0;var d=a.return;try{if(z1(e,d,a,s,Ye)){Rt=1,pl(e,Yn(s,e.current)),qe=null;return}}catch(p){if(d!==null)throw qe=d,p;Rt=1,pl(e,Yn(s,e.current)),qe=null;return}a.flags&32768?(Ke||r===1?e=!0:Es||(Ye&536870912)!==0?e=!1:(ti=e=!0,(r===2||r===9||r===3||r===6)&&(r=On.current,r!==null&&r.tag===13&&(r.flags|=16384))),Gg(a,e)):jl(a)}function jl(e){var a=e;do{if((a.flags&32768)!==0){Gg(a,ti);return}e=a.return;var s=L1(a.alternate,a,Ba);if(s!==null){qe=s;return}if(a=a.sibling,a!==null){qe=a;return}qe=a=e}while(a!==null);Rt===0&&(Rt=5)}function Gg(e,a){do{var s=I1(e.alternate,e);if(s!==null){s.flags&=32767,qe=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(e=e.sibling,e!==null)){qe=e;return}qe=e=s}while(e!==null);Rt=6,qe=null}function $g(e,a,s,r,d,p,y,b,T){e.cancelPendingCommit=null;do Al();while(Gt!==0);if((nt&6)!==0)throw Error(o(327));if(a!==null){if(a===e.current)throw Error(o(177));if(p=a.lanes|a.childLanes,p|=iu,le(e,s,p,y,b,T),e===yt&&(qe=yt=null,Ye=0),Rs=a,ii=e,La=s,fd=p,pd=d,zg=r,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Q1($,function(){return Qg(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||r){r=N.T,N.T=null,d=ee.p,ee.p=2,y=nt,nt|=4;try{P1(e,a,s)}finally{nt=y,ee.p=d,N.T=r}}Gt=1,Yg(),Xg(),Wg()}}function Yg(){if(Gt===1){Gt=0;var e=ii,a=Rs,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=N.T,N.T=null;var r=ee.p;ee.p=2;var d=nt;nt|=4;try{Ag(a,e);var p=kd,y=Nh(e.containerInfo),b=p.focusedElem,T=p.selectionRange;if(y!==b&&b&&b.ownerDocument&&Dh(b.ownerDocument.documentElement,b)){if(T!==null&&Jc(b)){var O=T.start,G=T.end;if(G===void 0&&(G=O),"selectionStart"in b)b.selectionStart=O,b.selectionEnd=Math.min(G,b.value.length);else{var K=b.ownerDocument||document,I=K&&K.defaultView||window;if(I.getSelection){var H=I.getSelection(),fe=b.textContent.length,ke=Math.min(T.start,fe),pt=T.end===void 0?ke:Math.min(T.end,fe);!H.extend&&ke>pt&&(y=pt,pt=ke,ke=y);var R=Rh(b,ke),A=Rh(b,pt);if(R&&A&&(H.rangeCount!==1||H.anchorNode!==R.node||H.anchorOffset!==R.offset||H.focusNode!==A.node||H.focusOffset!==A.offset)){var z=K.createRange();z.setStart(R.node,R.offset),H.removeAllRanges(),ke>pt?(H.addRange(z),H.extend(A.node,A.offset)):(z.setEnd(A.node,A.offset),H.addRange(z))}}}}for(K=[],H=b;H=H.parentNode;)H.nodeType===1&&K.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<K.length;b++){var Y=K[b];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Il=!!Ad,kd=Ad=null}finally{nt=d,ee.p=r,N.T=s}}e.current=a,Gt=2}}function Xg(){if(Gt===2){Gt=0;var e=ii,a=Rs,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=N.T,N.T=null;var r=ee.p;ee.p=2;var d=nt;nt|=4;try{_g(e,a.alternate,a)}finally{nt=d,ee.p=r,N.T=s}}Gt=3}}function Wg(){if(Gt===4||Gt===3){Gt=0,at();var e=ii,a=Rs,s=La,r=zg;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Gt=5:(Gt=0,Rs=ii=null,Kg(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(ai=null),pn(s),a=a.stateNode,Re&&typeof Re.onCommitFiberRoot=="function")try{Re.onCommitFiberRoot(Te,a,void 0,(a.current.flags&128)===128)}catch{}if(r!==null){a=N.T,d=ee.p,ee.p=2,N.T=null;try{for(var p=e.onRecoverableError,y=0;y<r.length;y++){var b=r[y];p(b.value,{componentStack:b.stack})}}finally{N.T=a,ee.p=d}}(La&3)!==0&&Al(),ha(e),d=e.pendingLanes,(s&261930)!==0&&(d&42)!==0?e===hd?qo++:(qo=0,hd=e):qo=0,Go(0)}}function Kg(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,To(a)))}function Al(){return Yg(),Xg(),Wg(),Qg()}function Qg(){if(Gt!==5)return!1;var e=ii,a=fd;fd=0;var s=pn(La),r=N.T,d=ee.p;try{ee.p=32>s?32:s,N.T=null,s=pd,pd=null;var p=ii,y=La;if(Gt=0,Rs=ii=null,La=0,(nt&6)!==0)throw Error(o(331));var b=nt;if(nt|=4,Dg(p.current),Eg(p,p.current,y,s),nt=b,Go(0,!1),Re&&typeof Re.onPostCommitFiberRoot=="function")try{Re.onPostCommitFiberRoot(Te,p)}catch{}return!0}finally{ee.p=d,N.T=r,Kg(e,a)}}function Zg(e,a,s){a=Yn(s,a),a=$u(e.stateNode,a,2),e=Qa(e,a,2),e!==null&&(Be(e,2),ha(e))}function rt(e,a,s){if(e.tag===3)Zg(e,e,s);else for(;a!==null;){if(a.tag===3){Zg(a,e,s);break}else if(a.tag===1){var r=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ai===null||!ai.has(r))){e=Yn(s,e),s=Jm(2),r=Qa(a,s,2),r!==null&&(eg(s,r,a,e),Be(r,2),ha(r));break}}a=a.return}}function yd(e,a,s){var r=e.pingCache;if(r===null){r=e.pingCache=new F1;var d=new Set;r.set(a,d)}else d=r.get(a),d===void 0&&(d=new Set,r.set(a,d));d.has(s)||(cd=!0,d.add(s),e=X1.bind(null,e,a,s),a.then(e,e))}function X1(e,a,s){var r=e.pingCache;r!==null&&r.delete(a),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,yt===e&&(Ye&s)===s&&(Rt===4||Rt===3&&(Ye&62914560)===Ye&&300>ae()-Sl?(nt&2)===0&&Ds(e,0):ud|=s,Ms===Ye&&(Ms=0)),ha(e)}function Jg(e,a){a===0&&(a=xe()),e=Ci(e,a),e!==null&&(Be(e,a),ha(e))}function W1(e){var a=e.memoizedState,s=0;a!==null&&(s=a.retryLane),Jg(e,s)}function K1(e,a){var s=0;switch(e.tag){case 31:case 13:var r=e.stateNode,d=e.memoizedState;d!==null&&(s=d.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}r!==null&&r.delete(a),Jg(e,s)}function Q1(e,a){return mt(e,a)}var kl=null,Us=null,vd=!1,El=!1,xd=!1,oi=0;function ha(e){e!==Us&&e.next===null&&(Us===null?kl=Us=e:Us=Us.next=e),El=!0,vd||(vd=!0,J1())}function Go(e,a){if(!xd&&El){xd=!0;do for(var s=!1,r=kl;r!==null;){if(e!==0){var d=r.pendingLanes;if(d===0)var p=0;else{var y=r.suspendedLanes,b=r.pingedLanes;p=(1<<31-gt(42|e)+1)-1,p&=d&~(y&~b),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(s=!0,ay(r,p))}else p=Ye,p=te(r,r===yt?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(p&3)===0||me(r,p)||(s=!0,ay(r,p));r=r.next}while(s);xd=!1}}function Z1(){ey()}function ey(){El=vd=!1;var e=0;oi!==0&&c_()&&(e=oi);for(var a=ae(),s=null,r=kl;r!==null;){var d=r.next,p=ty(r,a);p===0?(r.next=null,s===null?kl=d:s.next=d,d===null&&(Us=s)):(s=r,(e!==0||(p&3)!==0)&&(El=!0)),r=d}Gt!==0&&Gt!==5||Go(e),oi!==0&&(oi=0)}function ty(e,a){for(var s=e.suspendedLanes,r=e.pingedLanes,d=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var y=31-gt(p),b=1<<y,T=d[y];T===-1?((b&s)===0||(b&r)!==0)&&(d[y]=je(b,a)):T<=a&&(e.expiredLanes|=b),p&=~b}if(a=yt,s=Ye,s=te(e,e===a?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,s===0||e===a&&(ot===2||ot===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&fn(r),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||me(e,s)){if(a=s&-s,a===e.callbackPriority)return a;switch(r!==null&&fn(r),pn(s)){case 2:case 8:s=tt;break;case 32:s=$;break;case 268435456:s=B;break;default:s=$}return r=ny.bind(null,e),s=mt(s,r),e.callbackPriority=a,e.callbackNode=s,a}return r!==null&&r!==null&&fn(r),e.callbackPriority=2,e.callbackNode=null,2}function ny(e,a){if(Gt!==0&&Gt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Al()&&e.callbackNode!==s)return null;var r=Ye;return r=te(e,e===yt?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(Bg(e,r,a),ty(e,ae()),e.callbackNode!=null&&e.callbackNode===s?ny.bind(null,e):null)}function ay(e,a){if(Al())return null;Bg(e,a,!0)}function J1(){d_(function(){(nt&6)!==0?mt(it,Z1):ey()})}function bd(){if(oi===0){var e=xs;e===0&&(e=Ji,Ji<<=1,(Ji&261888)===0&&(Ji=256)),oi=e}return oi}function iy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Br(""+e)}function sy(e,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,e.id&&s.setAttribute("form",e.id),a.parentNode.insertBefore(s,a),e=new FormData(e),s.parentNode.removeChild(s),e}function e_(e,a,s,r,d){if(a==="submit"&&s&&s.stateNode===d){var p=iy((d[wn]||null).action),y=r.submitter;y&&(a=(a=y[wn]||null)?iy(a.formAction):y.getAttribute("formAction"),a!==null&&(p=a,y=null));var b=new Vr("action","action",null,r,d);e.push({event:b,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(oi!==0){var T=y?sy(d,y):new FormData(d);Pu(s,{pending:!0,data:T,method:d.method,action:p},null,T)}}else typeof p=="function"&&(b.preventDefault(),T=y?sy(d,y):new FormData(d),Pu(s,{pending:!0,data:T,method:d.method,action:p},p,T))},currentTarget:d}]})}}for(var Sd=0;Sd<au.length;Sd++){var _d=au[Sd],t_=_d.toLowerCase(),n_=_d[0].toUpperCase()+_d.slice(1);ia(t_,"on"+n_)}ia(Oh,"onAnimationEnd"),ia(Bh,"onAnimationIteration"),ia(Lh,"onAnimationStart"),ia("dblclick","onDoubleClick"),ia("focusin","onFocus"),ia("focusout","onBlur"),ia(v1,"onTransitionRun"),ia(x1,"onTransitionStart"),ia(b1,"onTransitionCancel"),ia(Ih,"onTransitionEnd"),ss("onMouseEnter",["mouseout","mouseover"]),ss("onMouseLeave",["mouseout","mouseover"]),ss("onPointerEnter",["pointerout","pointerover"]),ss("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($o));function oy(e,a){a=(a&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],d=r.event;r=r.listeners;e:{var p=void 0;if(a)for(var y=r.length-1;0<=y;y--){var b=r[y],T=b.instance,O=b.currentTarget;if(b=b.listener,T!==p&&d.isPropagationStopped())break e;p=b,d.currentTarget=O;try{p(d)}catch(G){qr(G)}d.currentTarget=null,p=T}else for(y=0;y<r.length;y++){if(b=r[y],T=b.instance,O=b.currentTarget,b=b.listener,T!==p&&d.isPropagationStopped())break e;p=b,d.currentTarget=O;try{p(d)}catch(G){qr(G)}d.currentTarget=null,p=T}}}}function Ge(e,a){var s=a[zc];s===void 0&&(s=a[zc]=new Set);var r=e+"__bubble";s.has(r)||(ry(a,e,2,!1),s.add(r))}function wd(e,a,s){var r=0;a&&(r|=4),ry(s,e,r,a)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Cd(e){if(!e[Ml]){e[Ml]=!0,eh.forEach(function(s){s!=="selectionchange"&&(a_.has(s)||wd(s,!1,e),wd(s,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Ml]||(a[Ml]=!0,wd("selectionchange",!1,a))}}function ry(e,a,s,r){switch(Oy(a)){case 2:var d=R_;break;case 8:d=D_;break;default:d=Id}s=d.bind(null,a,s,e),d=void 0,!qc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(d=!0),r?d!==void 0?e.addEventListener(a,s,{capture:!0,passive:d}):e.addEventListener(a,s,!0):d!==void 0?e.addEventListener(a,s,{passive:d}):e.addEventListener(a,s,!1)}function Td(e,a,s,r,d){var p=r;if((a&1)===0&&(a&2)===0&&r!==null)e:for(;;){if(r===null)return;var y=r.tag;if(y===3||y===4){var b=r.stateNode.containerInfo;if(b===d)break;if(y===4)for(y=r.return;y!==null;){var T=y.tag;if((T===3||T===4)&&y.stateNode.containerInfo===d)return;y=y.return}for(;b!==null;){if(y=ns(b),y===null)return;if(T=y.tag,T===5||T===6||T===26||T===27){r=p=y;continue e}b=b.parentNode}}r=r.return}fh(function(){var O=p,G=Hc(s),K=[];e:{var I=Ph.get(e);if(I!==void 0){var H=Vr,fe=e;switch(e){case"keypress":if(Ir(s)===0)break e;case"keydown":case"keyup":H=KS;break;case"focusin":fe="focus",H=Xc;break;case"focusout":fe="blur",H=Xc;break;case"beforeblur":case"afterblur":H=Xc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=mh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=LS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=JS;break;case Oh:case Bh:case Lh:H=VS;break;case Ih:H=t1;break;case"scroll":case"scrollend":H=OS;break;case"wheel":H=a1;break;case"copy":case"cut":case"paste":H=FS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=yh;break;case"toggle":case"beforetoggle":H=s1}var ke=(a&4)!==0,pt=!ke&&(e==="scroll"||e==="scrollend"),R=ke?I!==null?I+"Capture":null:I;ke=[];for(var A=O,z;A!==null;){var Y=A;if(z=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||z===null||R===null||(Y=ho(A,R),Y!=null&&ke.push(Yo(A,Y,z))),pt)break;A=A.return}0<ke.length&&(I=new H(I,fe,null,s,G),K.push({event:I,listeners:ke}))}}if((a&7)===0){e:{if(I=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",I&&s!==Vc&&(fe=s.relatedTarget||s.fromElement)&&(ns(fe)||fe[ts]))break e;if((H||I)&&(I=G.window===G?G:(I=G.ownerDocument)?I.defaultView||I.parentWindow:window,H?(fe=s.relatedTarget||s.toElement,H=O,fe=fe?ns(fe):null,fe!==null&&(pt=u(fe),ke=fe.tag,fe!==pt||ke!==5&&ke!==27&&ke!==6)&&(fe=null)):(H=null,fe=O),H!==fe)){if(ke=mh,Y="onMouseLeave",R="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(ke=yh,Y="onPointerLeave",R="onPointerEnter",A="pointer"),pt=H==null?I:po(H),z=fe==null?I:po(fe),I=new ke(Y,A+"leave",H,s,G),I.target=pt,I.relatedTarget=z,Y=null,ns(G)===O&&(ke=new ke(R,A+"enter",fe,s,G),ke.target=z,ke.relatedTarget=pt,Y=ke),pt=Y,H&&fe)t:{for(ke=i_,R=H,A=fe,z=0,Y=R;Y;Y=ke(Y))z++;Y=0;for(var _e=A;_e;_e=ke(_e))Y++;for(;0<z-Y;)R=ke(R),z--;for(;0<Y-z;)A=ke(A),Y--;for(;z--;){if(R===A||A!==null&&R===A.alternate){ke=R;break t}R=ke(R),A=ke(A)}ke=null}else ke=null;H!==null&&ly(K,I,H,ke,!1),fe!==null&&pt!==null&&ly(K,pt,fe,ke,!0)}}e:{if(I=O?po(O):window,H=I.nodeName&&I.nodeName.toLowerCase(),H==="select"||H==="input"&&I.type==="file")var Je=Th;else if(wh(I))if(jh)Je=m1;else{Je=p1;var ye=f1}else H=I.nodeName,!H||H.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?O&&Pc(O.elementType)&&(Je=Th):Je=h1;if(Je&&(Je=Je(e,O))){Ch(K,Je,s,G);break e}ye&&ye(e,I,O),e==="focusout"&&O&&I.type==="number"&&O.memoizedProps.value!=null&&Ic(I,"number",I.value)}switch(ye=O?po(O):window,e){case"focusin":(wh(ye)||ye.contentEditable==="true")&&(ds=ye,eu=O,_o=null);break;case"focusout":_o=eu=ds=null;break;case"mousedown":tu=!0;break;case"contextmenu":case"mouseup":case"dragend":tu=!1,Uh(K,s,G);break;case"selectionchange":if(y1)break;case"keydown":case"keyup":Uh(K,s,G)}var He;if(Kc)e:{switch(e){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else us?Sh(e,s)&&(Xe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Xe="onCompositionStart");Xe&&(vh&&s.locale!=="ko"&&(us||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&us&&(He=ph()):(qa=G,Gc="value"in qa?qa.value:qa.textContent,us=!0)),ye=Rl(O,Xe),0<ye.length&&(Xe=new gh(Xe,e,null,s,G),K.push({event:Xe,listeners:ye}),He?Xe.data=He:(He=_h(s),He!==null&&(Xe.data=He)))),(He=r1?l1(e,s):c1(e,s))&&(Xe=Rl(O,"onBeforeInput"),0<Xe.length&&(ye=new gh("onBeforeInput","beforeinput",null,s,G),K.push({event:ye,listeners:Xe}),ye.data=He)),e_(K,e,O,s,G)}oy(K,a)})}function Yo(e,a,s){return{instance:e,listener:a,currentTarget:s}}function Rl(e,a){for(var s=a+"Capture",r=[];e!==null;){var d=e,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=ho(e,s),d!=null&&r.unshift(Yo(e,d,p)),d=ho(e,a),d!=null&&r.push(Yo(e,d,p))),e.tag===3)return r;e=e.return}return[]}function i_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ly(e,a,s,r,d){for(var p=a._reactName,y=[];s!==null&&s!==r;){var b=s,T=b.alternate,O=b.stateNode;if(b=b.tag,T!==null&&T===r)break;b!==5&&b!==26&&b!==27||O===null||(T=O,d?(O=ho(s,p),O!=null&&y.unshift(Yo(s,O,T))):d||(O=ho(s,p),O!=null&&y.push(Yo(s,O,T)))),s=s.return}y.length!==0&&e.push({event:a,listeners:y})}var s_=/\r\n?/g,o_=/\u0000|\uFFFD/g;function cy(e){return(typeof e=="string"?e:""+e).replace(s_,`
`).replace(o_,"")}function uy(e,a){return a=cy(a),cy(e)===a}function ft(e,a,s,r,d,p){switch(s){case"children":typeof r=="string"?a==="body"||a==="textarea"&&r===""||rs(e,r):(typeof r=="number"||typeof r=="bigint")&&a!=="body"&&rs(e,""+r);break;case"className":zr(e,"class",r);break;case"tabIndex":zr(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":zr(e,s,r);break;case"style":uh(e,r,p);break;case"data":if(a!=="object"){zr(e,"data",r);break}case"src":case"href":if(r===""&&(a!=="a"||s!=="href")){e.removeAttribute(s);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(s);break}r=Br(""+r),e.setAttribute(s,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(s==="formAction"?(a!=="input"&&ft(e,a,"name",d.name,d,null),ft(e,a,"formEncType",d.formEncType,d,null),ft(e,a,"formMethod",d.formMethod,d,null),ft(e,a,"formTarget",d.formTarget,d,null)):(ft(e,a,"encType",d.encType,d,null),ft(e,a,"method",d.method,d,null),ft(e,a,"target",d.target,d,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(s);break}r=Br(""+r),e.setAttribute(s,r);break;case"onClick":r!=null&&(e.onclick=wa);break;case"onScroll":r!=null&&Ge("scroll",e);break;case"onScrollEnd":r!=null&&Ge("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(o(61));if(s=r.__html,s!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}s=Br(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(s,""+r):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":r===!0?e.setAttribute(s,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(s,r):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(s,r):e.removeAttribute(s);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(s):e.setAttribute(s,r);break;case"popover":Ge("beforetoggle",e),Ge("toggle",e),Ur(e,"popover",r);break;case"xlinkActuate":_a(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":_a(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":_a(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":_a(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":_a(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":_a(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":_a(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":_a(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":_a(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Ur(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=US.get(s)||s,Ur(e,s,r))}}function jd(e,a,s,r,d,p){switch(s){case"style":uh(e,r,p);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(o(61));if(s=r.__html,s!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"children":typeof r=="string"?rs(e,r):(typeof r=="number"||typeof r=="bigint")&&rs(e,""+r);break;case"onScroll":r!=null&&Ge("scroll",e);break;case"onScrollEnd":r!=null&&Ge("scrollend",e);break;case"onClick":r!=null&&(e.onclick=wa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!th.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(d=s.endsWith("Capture"),a=s.slice(2,d?s.length-7:void 0),p=e[wn]||null,p=p!=null?p[s]:null,typeof p=="function"&&e.removeEventListener(a,p,d),typeof r=="function")){typeof p!="function"&&p!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(a,r,d);break e}s in e?e[s]=r:r===!0?e.setAttribute(s,""):Ur(e,s,r)}}}function ln(e,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",e),Ge("load",e);var r=!1,d=!1,p;for(p in s)if(s.hasOwnProperty(p)){var y=s[p];if(y!=null)switch(p){case"src":r=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:ft(e,a,p,y,s,null)}}d&&ft(e,a,"srcSet",s.srcSet,s,null),r&&ft(e,a,"src",s.src,s,null);return;case"input":Ge("invalid",e);var b=p=y=d=null,T=null,O=null;for(r in s)if(s.hasOwnProperty(r)){var G=s[r];if(G!=null)switch(r){case"name":d=G;break;case"type":y=G;break;case"checked":T=G;break;case"defaultChecked":O=G;break;case"value":p=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(o(137,a));break;default:ft(e,a,r,G,s,null)}}oh(e,p,b,T,O,y,d,!1);return;case"select":Ge("invalid",e),r=y=p=null;for(d in s)if(s.hasOwnProperty(d)&&(b=s[d],b!=null))switch(d){case"value":p=b;break;case"defaultValue":y=b;break;case"multiple":r=b;default:ft(e,a,d,b,s,null)}a=p,s=y,e.multiple=!!r,a!=null?os(e,!!r,a,!1):s!=null&&os(e,!!r,s,!0);return;case"textarea":Ge("invalid",e),p=d=r=null;for(y in s)if(s.hasOwnProperty(y)&&(b=s[y],b!=null))switch(y){case"value":r=b;break;case"defaultValue":d=b;break;case"children":p=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(o(91));break;default:ft(e,a,y,b,s,null)}lh(e,r,d,p);return;case"option":for(T in s)if(s.hasOwnProperty(T)&&(r=s[T],r!=null))switch(T){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:ft(e,a,T,r,s,null)}return;case"dialog":Ge("beforetoggle",e),Ge("toggle",e),Ge("cancel",e),Ge("close",e);break;case"iframe":case"object":Ge("load",e);break;case"video":case"audio":for(r=0;r<$o.length;r++)Ge($o[r],e);break;case"image":Ge("error",e),Ge("load",e);break;case"details":Ge("toggle",e);break;case"embed":case"source":case"link":Ge("error",e),Ge("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in s)if(s.hasOwnProperty(O)&&(r=s[O],r!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:ft(e,a,O,r,s,null)}return;default:if(Pc(a)){for(G in s)s.hasOwnProperty(G)&&(r=s[G],r!==void 0&&jd(e,a,G,r,s,void 0));return}}for(b in s)s.hasOwnProperty(b)&&(r=s[b],r!=null&&ft(e,a,b,r,s,null))}function r_(e,a,s,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,y=null,b=null,T=null,O=null,G=null;for(H in s){var K=s[H];if(s.hasOwnProperty(H)&&K!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":T=K;default:r.hasOwnProperty(H)||ft(e,a,H,null,r,K)}}for(var I in r){var H=r[I];if(K=s[I],r.hasOwnProperty(I)&&(H!=null||K!=null))switch(I){case"type":p=H;break;case"name":d=H;break;case"checked":O=H;break;case"defaultChecked":G=H;break;case"value":y=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(o(137,a));break;default:H!==K&&ft(e,a,I,H,r,K)}}Lc(e,y,b,T,O,G,p,d);return;case"select":H=y=b=I=null;for(p in s)if(T=s[p],s.hasOwnProperty(p)&&T!=null)switch(p){case"value":break;case"multiple":H=T;default:r.hasOwnProperty(p)||ft(e,a,p,null,r,T)}for(d in r)if(p=r[d],T=s[d],r.hasOwnProperty(d)&&(p!=null||T!=null))switch(d){case"value":I=p;break;case"defaultValue":b=p;break;case"multiple":y=p;default:p!==T&&ft(e,a,d,p,r,T)}a=b,s=y,r=H,I!=null?os(e,!!s,I,!1):!!r!=!!s&&(a!=null?os(e,!!s,a,!0):os(e,!!s,s?[]:"",!1));return;case"textarea":H=I=null;for(b in s)if(d=s[b],s.hasOwnProperty(b)&&d!=null&&!r.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ft(e,a,b,null,r,d)}for(y in r)if(d=r[y],p=s[y],r.hasOwnProperty(y)&&(d!=null||p!=null))switch(y){case"value":I=d;break;case"defaultValue":H=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:d!==p&&ft(e,a,y,d,r,p)}rh(e,I,H);return;case"option":for(var fe in s)if(I=s[fe],s.hasOwnProperty(fe)&&I!=null&&!r.hasOwnProperty(fe))switch(fe){case"selected":e.selected=!1;break;default:ft(e,a,fe,null,r,I)}for(T in r)if(I=r[T],H=s[T],r.hasOwnProperty(T)&&I!==H&&(I!=null||H!=null))switch(T){case"selected":e.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:ft(e,a,T,I,r,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in s)I=s[ke],s.hasOwnProperty(ke)&&I!=null&&!r.hasOwnProperty(ke)&&ft(e,a,ke,null,r,I);for(O in r)if(I=r[O],H=s[O],r.hasOwnProperty(O)&&I!==H&&(I!=null||H!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(137,a));break;default:ft(e,a,O,I,r,H)}return;default:if(Pc(a)){for(var pt in s)I=s[pt],s.hasOwnProperty(pt)&&I!==void 0&&!r.hasOwnProperty(pt)&&jd(e,a,pt,void 0,r,I);for(G in r)I=r[G],H=s[G],!r.hasOwnProperty(G)||I===H||I===void 0&&H===void 0||jd(e,a,G,I,r,H);return}}for(var R in s)I=s[R],s.hasOwnProperty(R)&&I!=null&&!r.hasOwnProperty(R)&&ft(e,a,R,null,r,I);for(K in r)I=r[K],H=s[K],!r.hasOwnProperty(K)||I===H||I==null&&H==null||ft(e,a,K,I,r,H)}function dy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function l_(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,s=performance.getEntriesByType("resource"),r=0;r<s.length;r++){var d=s[r],p=d.transferSize,y=d.initiatorType,b=d.duration;if(p&&b&&dy(y)){for(y=0,b=d.responseEnd,r+=1;r<s.length;r++){var T=s[r],O=T.startTime;if(O>b)break;var G=T.transferSize,K=T.initiatorType;G&&dy(K)&&(T=T.responseEnd,y+=G*(T<b?1:(b-O)/(T-O)))}if(--r,a+=8*(p+y)/(d.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ad=null,kd=null;function Dl(e){return e.nodeType===9?e:e.ownerDocument}function fy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function py(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function Ed(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Md=null;function c_(){var e=window.event;return e&&e.type==="popstate"?e===Md?!1:(Md=e,!0):(Md=null,!1)}var hy=typeof setTimeout=="function"?setTimeout:void 0,u_=typeof clearTimeout=="function"?clearTimeout:void 0,my=typeof Promise=="function"?Promise:void 0,d_=typeof queueMicrotask=="function"?queueMicrotask:typeof my<"u"?function(e){return my.resolve(null).then(e).catch(f_)}:hy;function f_(e){setTimeout(function(){throw e})}function ri(e){return e==="head"}function gy(e,a){var s=a,r=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"||s==="/&"){if(r===0){e.removeChild(d),Ls(a);return}r--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")r++;else if(s==="html")Xo(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Xo(s);for(var p=s.firstChild;p;){var y=p.nextSibling,b=p.nodeName;p[fo]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&p.rel.toLowerCase()==="stylesheet"||s.removeChild(p),p=y}}else s==="body"&&Xo(e.ownerDocument.body);s=d}while(s);Ls(a)}function yy(e,a){var s=e;e=0;do{var r=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=r}while(s)}function Rd(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Rd(s),Oc(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function p_(e,a,s,r){for(;e.nodeType===1;){var d=s;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[fo])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=Zn(e.nextSibling),e===null)break}return null}function h_(e,a,s){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Zn(e.nextSibling),e===null))return null;return e}function vy(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Zn(e.nextSibling),e===null))return null;return e}function Dd(e){return e.data==="$?"||e.data==="$~"}function Nd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function m_(e,a){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||s.readyState!=="loading")a();else{var r=function(){a(),s.removeEventListener("DOMContentLoaded",r)};s.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Zn(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var Ud=null;function xy(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(a===0)return Zn(e.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}e=e.nextSibling}return null}function by(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return e;a--}else s!=="/$"&&s!=="/&"||a++}e=e.previousSibling}return null}function Sy(e,a,s){switch(a=Dl(s),e){case"html":if(e=a.documentElement,!e)throw Error(o(452));return e;case"head":if(e=a.head,!e)throw Error(o(453));return e;case"body":if(e=a.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Xo(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Oc(e)}var Jn=new Map,_y=new Set;function Nl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ia=ee.d;ee.d={f:g_,r:y_,D:v_,C:x_,L:b_,m:S_,X:w_,S:__,M:C_};function g_(){var e=Ia.f(),a=Cl();return e||a}function y_(e){var a=as(e);a!==null&&a.tag===5&&a.type==="form"?Im(a):Ia.r(e)}var zs=typeof document>"u"?null:document;function wy(e,a,s){var r=zs;if(r&&typeof a=="string"&&a){var d=Gn(a);d='link[rel="'+e+'"][href="'+d+'"]',typeof s=="string"&&(d+='[crossorigin="'+s+'"]'),_y.has(d)||(_y.add(d),e={rel:e,crossOrigin:s,href:a},r.querySelector(d)===null&&(a=r.createElement("link"),ln(a,"link",e),Kt(a),r.head.appendChild(a)))}}function v_(e){Ia.D(e),wy("dns-prefetch",e,null)}function x_(e,a){Ia.C(e,a),wy("preconnect",e,a)}function b_(e,a,s){Ia.L(e,a,s);var r=zs;if(r&&e&&a){var d='link[rel="preload"][as="'+Gn(a)+'"]';a==="image"&&s&&s.imageSrcSet?(d+='[imagesrcset="'+Gn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(d+='[imagesizes="'+Gn(s.imageSizes)+'"]')):d+='[href="'+Gn(e)+'"]';var p=d;switch(a){case"style":p=Os(e);break;case"script":p=Bs(e)}Jn.has(p)||(e=x({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:e,as:a},s),Jn.set(p,e),r.querySelector(d)!==null||a==="style"&&r.querySelector(Wo(p))||a==="script"&&r.querySelector(Ko(p))||(a=r.createElement("link"),ln(a,"link",e),Kt(a),r.head.appendChild(a)))}}function S_(e,a){Ia.m(e,a);var s=zs;if(s&&e){var r=a&&typeof a.as=="string"?a.as:"script",d='link[rel="modulepreload"][as="'+Gn(r)+'"][href="'+Gn(e)+'"]',p=d;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Bs(e)}if(!Jn.has(p)&&(e=x({rel:"modulepreload",href:e},a),Jn.set(p,e),s.querySelector(d)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ko(p)))return}r=s.createElement("link"),ln(r,"link",e),Kt(r),s.head.appendChild(r)}}}function __(e,a,s){Ia.S(e,a,s);var r=zs;if(r&&e){var d=is(r).hoistableStyles,p=Os(e);a=a||"default";var y=d.get(p);if(!y){var b={loading:0,preload:null};if(y=r.querySelector(Wo(p)))b.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":a},s),(s=Jn.get(p))&&zd(e,s);var T=y=r.createElement("link");Kt(T),ln(T,"link",e),T._p=new Promise(function(O,G){T.onload=O,T.onerror=G}),T.addEventListener("load",function(){b.loading|=1}),T.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Ul(y,a,r)}y={type:"stylesheet",instance:y,count:1,state:b},d.set(p,y)}}}function w_(e,a){Ia.X(e,a);var s=zs;if(s&&e){var r=is(s).hoistableScripts,d=Bs(e),p=r.get(d);p||(p=s.querySelector(Ko(d)),p||(e=x({src:e,async:!0},a),(a=Jn.get(d))&&Od(e,a),p=s.createElement("script"),Kt(p),ln(p,"link",e),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},r.set(d,p))}}function C_(e,a){Ia.M(e,a);var s=zs;if(s&&e){var r=is(s).hoistableScripts,d=Bs(e),p=r.get(d);p||(p=s.querySelector(Ko(d)),p||(e=x({src:e,async:!0,type:"module"},a),(a=Jn.get(d))&&Od(e,a),p=s.createElement("script"),Kt(p),ln(p,"link",e),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},r.set(d,p))}}function Cy(e,a,s,r){var d=(d=re.current)?Nl(d):null;if(!d)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Os(s.href),s=is(d).hoistableStyles,r=s.get(a),r||(r={type:"style",instance:null,count:0,state:null},s.set(a,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Os(s.href);var p=is(d).hoistableStyles,y=p.get(e);if(y||(d=d.ownerDocument||d,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,y),(p=d.querySelector(Wo(e)))&&!p._p&&(y.instance=p,y.state.loading=5),Jn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Jn.set(e,s),p||T_(d,e,s,y.state))),a&&r===null)throw Error(o(528,""));return y}if(a&&r!==null)throw Error(o(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Bs(s),s=is(d).hoistableScripts,r=s.get(a),r||(r={type:"script",instance:null,count:0,state:null},s.set(a,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Os(e){return'href="'+Gn(e)+'"'}function Wo(e){return'link[rel="stylesheet"]['+e+"]"}function Ty(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function T_(e,a,s,r){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?r.loading=1:(a=e.createElement("link"),r.preload=a,a.addEventListener("load",function(){return r.loading|=1}),a.addEventListener("error",function(){return r.loading|=2}),ln(a,"link",s),Kt(a),e.head.appendChild(a))}function Bs(e){return'[src="'+Gn(e)+'"]'}function Ko(e){return"script[async]"+e}function jy(e,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var r=e.querySelector('style[data-href~="'+Gn(s.href)+'"]');if(r)return a.instance=r,Kt(r),r;var d=x({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),Kt(r),ln(r,"style",d),Ul(r,s.precedence,e),a.instance=r;case"stylesheet":d=Os(s.href);var p=e.querySelector(Wo(d));if(p)return a.state.loading|=4,a.instance=p,Kt(p),p;r=Ty(s),(d=Jn.get(d))&&zd(r,d),p=(e.ownerDocument||e).createElement("link"),Kt(p);var y=p;return y._p=new Promise(function(b,T){y.onload=b,y.onerror=T}),ln(p,"link",r),a.state.loading|=4,Ul(p,s.precedence,e),a.instance=p;case"script":return p=Bs(s.src),(d=e.querySelector(Ko(p)))?(a.instance=d,Kt(d),d):(r=s,(d=Jn.get(p))&&(r=x({},s),Od(r,d)),e=e.ownerDocument||e,d=e.createElement("script"),Kt(d),ln(d,"link",r),e.head.appendChild(d),a.instance=d);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(r=a.instance,a.state.loading|=4,Ul(r,s.precedence,e));return a.instance}function Ul(e,a,s){for(var r=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=r.length?r[r.length-1]:null,p=d,y=0;y<r.length;y++){var b=r[y];if(b.dataset.precedence===a)p=b;else if(p!==d)break}p?p.parentNode.insertBefore(e,p.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(e,a.firstChild))}function zd(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function Od(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var zl=null;function Ay(e,a,s){if(zl===null){var r=new Map,d=zl=new Map;d.set(s,r)}else d=zl,r=d.get(s),r||(r=new Map,d.set(s,r));if(r.has(e))return r;for(r.set(e,null),s=s.getElementsByTagName(e),d=0;d<s.length;d++){var p=s[d];if(!(p[fo]||p[an]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var y=p.getAttribute(a)||"";y=e+y;var b=r.get(y);b?b.push(p):r.set(y,[p])}}return r}function ky(e,a,s){e=e.ownerDocument||e,e.head.insertBefore(s,a==="title"?e.querySelector("head > title"):null)}function j_(e,a,s){if(s===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ey(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function A_(e,a,s,r){if(s.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=Os(r.href),p=a.querySelector(Wo(d));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=Ol.bind(e),a.then(e,e)),s.state.loading|=4,s.instance=p,Kt(p);return}p=a.ownerDocument||a,r=Ty(r),(d=Jn.get(d))&&zd(r,d),p=p.createElement("link"),Kt(p);var y=p;y._p=new Promise(function(b,T){y.onload=b,y.onerror=T}),ln(p,"link",r),s.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Ol.bind(e),a.addEventListener("load",s),a.addEventListener("error",s))}}var Bd=0;function k_(e,a){return e.stylesheets&&e.count===0&&Ll(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var r=setTimeout(function(){if(e.stylesheets&&Ll(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+a);0<e.imgBytes&&Bd===0&&(Bd=62500*l_());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ll(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>Bd?50:800)+a);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(d)}}:null}function Ol(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ll(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Bl=null;function Ll(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Bl=new Map,a.forEach(E_,e),Bl=null,Ol.call(e))}function E_(e,a){if(!(a.state.loading&4)){var s=Bl.get(e);if(s)var r=s.get(null);else{s=new Map,Bl.set(e,s);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var y=d[p];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(s.set(y.dataset.precedence,y),r=y)}r&&s.set(null,r)}d=a.instance,y=d.getAttribute("data-precedence"),p=s.get(y)||r,p===r&&s.set(null,d),s.set(y,d),this.count++,r=Ol.bind(this),d.addEventListener("load",r),d.addEventListener("error",r),p?p.parentNode.insertBefore(d,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),a.state.loading|=4}}var Qo={$$typeof:E,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function M_(e,a,s,r,d,p,y,b,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=r,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function My(e,a,s,r,d,p,y,b,T,O,G,K){return e=new M_(e,a,s,y,T,O,G,K,b),a=1,p===!0&&(a|=24),p=zn(3,null,null,a),e.current=p,p.stateNode=e,a=gu(),a.refCount++,e.pooledCache=a,a.refCount++,p.memoizedState={element:r,isDehydrated:s,cache:a},bu(p),e}function Ry(e){return e?(e=hs,e):hs}function Dy(e,a,s,r,d,p){d=Ry(d),r.context===null?r.context=d:r.pendingContext=d,r=Ka(a),r.payload={element:s},p=p===void 0?null:p,p!==null&&(r.callback=p),s=Qa(e,r,a),s!==null&&(En(s,e,a),Eo(s,e,a))}function Ny(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<a?s:a}}function Ld(e,a){Ny(e,a),(e=e.alternate)&&Ny(e,a)}function Uy(e){if(e.tag===13||e.tag===31){var a=Ci(e,67108864);a!==null&&En(a,e,67108864),Ld(e,67108864)}}function zy(e){if(e.tag===13||e.tag===31){var a=Pn();a=Nn(a);var s=Ci(e,a);s!==null&&En(s,e,a),Ld(e,a)}}var Il=!0;function R_(e,a,s,r){var d=N.T;N.T=null;var p=ee.p;try{ee.p=2,Id(e,a,s,r)}finally{ee.p=p,N.T=d}}function D_(e,a,s,r){var d=N.T;N.T=null;var p=ee.p;try{ee.p=8,Id(e,a,s,r)}finally{ee.p=p,N.T=d}}function Id(e,a,s,r){if(Il){var d=Pd(r);if(d===null)Td(e,a,r,Pl,s),By(e,r);else if(U_(d,e,a,s,r))r.stopPropagation();else if(By(e,r),a&4&&-1<N_.indexOf(e)){for(;d!==null;){var p=as(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var y=J(p.pendingLanes);if(y!==0){var b=p;for(b.pendingLanes|=2,b.entangledLanes|=2;y;){var T=1<<31-gt(y);b.entanglements[1]|=T,y&=~T}ha(p),(nt&6)===0&&(_l=ae()+500,Go(0))}}break;case 31:case 13:b=Ci(p,2),b!==null&&En(b,p,2),Cl(),Ld(p,2)}if(p=Pd(r),p===null&&Td(e,a,r,Pl,s),p===d)break;d=p}d!==null&&r.stopPropagation()}else Td(e,a,r,null,s)}}function Pd(e){return e=Hc(e),Vd(e)}var Pl=null;function Vd(e){if(Pl=null,e=ns(e),e!==null){var a=u(e);if(a===null)e=null;else{var s=a.tag;if(s===13){if(e=f(a),e!==null)return e;e=null}else if(s===31){if(e=h(a),e!==null)return e;e=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return Pl=e,null}function Oy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pe()){case it:return 2;case tt:return 8;case $:case ct:return 32;case B:return 268435456;default:return 32}default:return 32}}var Hd=!1,li=null,ci=null,ui=null,Zo=new Map,Jo=new Map,di=[],N_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function By(e,a){switch(e){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":Zo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jo.delete(a.pointerId)}}function er(e,a,s,r,d,p){return e===null||e.nativeEvent!==p?(e={blockedOn:a,domEventName:s,eventSystemFlags:r,nativeEvent:p,targetContainers:[d]},a!==null&&(a=as(a),a!==null&&Uy(a)),e):(e.eventSystemFlags|=r,a=e.targetContainers,d!==null&&a.indexOf(d)===-1&&a.push(d),e)}function U_(e,a,s,r,d){switch(a){case"focusin":return li=er(li,e,a,s,r,d),!0;case"dragenter":return ci=er(ci,e,a,s,r,d),!0;case"mouseover":return ui=er(ui,e,a,s,r,d),!0;case"pointerover":var p=d.pointerId;return Zo.set(p,er(Zo.get(p)||null,e,a,s,r,d)),!0;case"gotpointercapture":return p=d.pointerId,Jo.set(p,er(Jo.get(p)||null,e,a,s,r,d)),!0}return!1}function Ly(e){var a=ns(e.target);if(a!==null){var s=u(a);if(s!==null){if(a=s.tag,a===13){if(a=f(s),a!==null){e.blockedOn=a,Sa(e.priority,function(){zy(s)});return}}else if(a===31){if(a=h(s),a!==null){e.blockedOn=a,Sa(e.priority,function(){zy(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vl(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var s=Pd(e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);Vc=r,s.target.dispatchEvent(r),Vc=null}else return a=as(s),a!==null&&Uy(a),e.blockedOn=s,!1;a.shift()}return!0}function Iy(e,a,s){Vl(e)&&s.delete(a)}function z_(){Hd=!1,li!==null&&Vl(li)&&(li=null),ci!==null&&Vl(ci)&&(ci=null),ui!==null&&Vl(ui)&&(ui=null),Zo.forEach(Iy),Jo.forEach(Iy)}function Hl(e,a){e.blockedOn===a&&(e.blockedOn=null,Hd||(Hd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,z_)))}var Fl=null;function Py(e){Fl!==e&&(Fl=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Fl===e&&(Fl=null);for(var a=0;a<e.length;a+=3){var s=e[a],r=e[a+1],d=e[a+2];if(typeof r!="function"){if(Vd(r||s)===null)continue;break}var p=as(s);p!==null&&(e.splice(a,3),a-=3,Pu(p,{pending:!0,data:d,method:s.method,action:r},r,d))}}))}function Ls(e){function a(T){return Hl(T,e)}li!==null&&Hl(li,e),ci!==null&&Hl(ci,e),ui!==null&&Hl(ui,e),Zo.forEach(a),Jo.forEach(a);for(var s=0;s<di.length;s++){var r=di[s];r.blockedOn===e&&(r.blockedOn=null)}for(;0<di.length&&(s=di[0],s.blockedOn===null);)Ly(s),s.blockedOn===null&&di.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(r=0;r<s.length;r+=3){var d=s[r],p=s[r+1],y=d[wn]||null;if(typeof p=="function")y||Py(s);else if(y){var b=null;if(p&&p.hasAttribute("formAction")){if(d=p,y=p[wn]||null)b=y.formAction;else if(Vd(d)!==null)continue}else b=y.action;typeof b=="function"?s[r+1]=b:(s.splice(r,3),r-=3),Py(s)}}}function Vy(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(y){return d=y})},focusReset:"manual",scroll:"manual"})}function a(){d!==null&&(d(),d=null),r||setTimeout(s,20)}function s(){if(!r&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),d!==null&&(d(),d=null)}}}function Fd(e){this._internalRoot=e}ql.prototype.render=Fd.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(o(409));var s=a.current,r=Pn();Dy(s,r,e,a,null,null)},ql.prototype.unmount=Fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;Dy(e.current,2,null,e,null,null),Cl(),a[ts]=null}};function ql(e){this._internalRoot=e}ql.prototype.unstable_scheduleHydration=function(e){if(e){var a=Lt();e={blockedOn:null,target:e,priority:a};for(var s=0;s<di.length&&a!==0&&a<di[s].priority;s++);di.splice(s,0,e),s===0&&Ly(e)}};var Hy=n.version;if(Hy!=="19.2.0")throw Error(o(527,Hy,"19.2.0"));ee.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(a),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var O_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{Te=Gl.inject(O_),Re=Gl}catch{}}return nr.createRoot=function(e,a){if(!l(e))throw Error(o(299));var s=!1,r="",d=Wm,p=Km,y=Qm;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(r=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=My(e,1,!1,null,null,s,r,null,d,p,y,Vy),e[ts]=a.current,Cd(e),new Fd(a)},nr.hydrateRoot=function(e,a,s){if(!l(e))throw Error(o(299));var r=!1,d="",p=Wm,y=Km,b=Qm,T=null;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.formState!==void 0&&(T=s.formState)),a=My(e,1,!0,a,s??null,r,d,T,p,y,b,Vy),a.context=Ry(null),s=a.current,r=Pn(),r=Nn(r),d=Ka(r),d.callback=null,Qa(s,d,r),s=r,a.current.lanes=s,Be(a,s),ha(a),e[ts]=a.current,Cd(e),new ql(a)},nr.version="19.2.0",nr}var Xy;function gw(){if(Xy)return Gd.exports;Xy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Gd.exports=mw(),Gd.exports}var yw=gw();const vw="modulepreload",xw=function(t){return"/"+t},Wy={},ht=function(n,i,o){let l=Promise.resolve();if(i&&i.length>0){let m=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),h=f?.nonce||f?.getAttribute("nonce");l=m(i.map(g=>{if(g=xw(g),g in Wy)return;Wy[g]=!0;const v=g.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${x}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":vw,v||(S.as="script"),S.crossOrigin="",S.href=g,h&&S.setAttribute("nonce",h),document.head.appendChild(S),v)return new Promise((C,_)=>{S.addEventListener("load",C),S.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return l.then(f=>{for(const h of f||[])h.status==="rejected"&&u(h.reason);return n().catch(u)})},Ky=t=>{let n;const i=new Set,o=(g,v)=>{const x=typeof g=="function"?g(n):g;if(!Object.is(x,n)){const S=n;n=v??(typeof x!="object"||x===null)?x:Object.assign({},n,x),i.forEach(C=>C(n,S))}},l=()=>n,h={setState:o,getState:l,getInitialState:()=>m,subscribe:g=>(i.add(g),()=>i.delete(g))},m=n=t(o,l,h);return h},bw=(t=>t?Ky(t):Ky),Sw=t=>t;function _w(t,n=Sw){const i=ya.useSyncExternalStore(t.subscribe,ya.useCallback(()=>n(t.getState()),[t,n]),ya.useCallback(()=>n(t.getInitialState()),[t,n]));return ya.useDebugValue(i),i}const Qy=t=>{const n=bw(t),i=o=>_w(n,o);return Object.assign(i,n),i},Cc=(t=>t?Qy(t):Qy);function sb(t,n){return function(){return t.apply(n,arguments)}}const{toString:ww}=Object.prototype,{getPrototypeOf:up}=Object,{iterator:Tc,toStringTag:ob}=Symbol,jc=(t=>n=>{const i=ww.call(n);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),ua=t=>(t=t.toLowerCase(),n=>jc(n)===t),Ac=t=>n=>typeof n===t,{isArray:so}=Array,eo=Ac("undefined");function Cr(t){return t!==null&&!eo(t)&&t.constructor!==null&&!eo(t.constructor)&&Rn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const rb=ua("ArrayBuffer");function Cw(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&rb(t.buffer),n}const Tw=Ac("string"),Rn=Ac("function"),lb=Ac("number"),Tr=t=>t!==null&&typeof t=="object",jw=t=>t===!0||t===!1,tc=t=>{if(jc(t)!=="object")return!1;const n=up(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(ob in t)&&!(Tc in t)},Aw=t=>{if(!Tr(t)||Cr(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},kw=ua("Date"),Ew=ua("File"),Mw=ua("Blob"),Rw=ua("FileList"),Dw=t=>Tr(t)&&Rn(t.pipe),Nw=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||Rn(t.append)&&((n=jc(t))==="formdata"||n==="object"&&Rn(t.toString)&&t.toString()==="[object FormData]"))},Uw=ua("URLSearchParams"),[zw,Ow,Bw,Lw]=["ReadableStream","Request","Response","Headers"].map(ua),Iw=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jr(t,n,{allOwnKeys:i=!1}={}){if(t===null||typeof t>"u")return;let o,l;if(typeof t!="object"&&(t=[t]),so(t))for(o=0,l=t.length;o<l;o++)n.call(null,t[o],o,t);else{if(Cr(t))return;const u=i?Object.getOwnPropertyNames(t):Object.keys(t),f=u.length;let h;for(o=0;o<f;o++)h=u[o],n.call(null,t[h],h,t)}}function cb(t,n){if(Cr(t))return null;n=n.toLowerCase();const i=Object.keys(t);let o=i.length,l;for(;o-- >0;)if(l=i[o],n===l.toLowerCase())return l;return null}const Vi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ub=t=>!eo(t)&&t!==Vi;function jf(){const{caseless:t,skipUndefined:n}=ub(this)&&this||{},i={},o=(l,u)=>{const f=t&&cb(i,u)||u;tc(i[f])&&tc(l)?i[f]=jf(i[f],l):tc(l)?i[f]=jf({},l):so(l)?i[f]=l.slice():(!n||!eo(l))&&(i[f]=l)};for(let l=0,u=arguments.length;l<u;l++)arguments[l]&&jr(arguments[l],o);return i}const Pw=(t,n,i,{allOwnKeys:o}={})=>(jr(n,(l,u)=>{i&&Rn(l)?t[u]=sb(l,i):t[u]=l},{allOwnKeys:o}),t),Vw=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Hw=(t,n,i,o)=>{t.prototype=Object.create(n.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),i&&Object.assign(t.prototype,i)},Fw=(t,n,i,o)=>{let l,u,f;const h={};if(n=n||{},t==null)return n;do{for(l=Object.getOwnPropertyNames(t),u=l.length;u-- >0;)f=l[u],(!o||o(f,t,n))&&!h[f]&&(n[f]=t[f],h[f]=!0);t=i!==!1&&up(t)}while(t&&(!i||i(t,n))&&t!==Object.prototype);return n},qw=(t,n,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=n.length;const o=t.indexOf(n,i);return o!==-1&&o===i},Gw=t=>{if(!t)return null;if(so(t))return t;let n=t.length;if(!lb(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=t[n];return i},$w=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&up(Uint8Array)),Yw=(t,n)=>{const o=(t&&t[Tc]).call(t);let l;for(;(l=o.next())&&!l.done;){const u=l.value;n.call(t,u[0],u[1])}},Xw=(t,n)=>{let i;const o=[];for(;(i=t.exec(n))!==null;)o.push(i);return o},Ww=ua("HTMLFormElement"),Kw=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,o,l){return o.toUpperCase()+l}),Zy=(({hasOwnProperty:t})=>(n,i)=>t.call(n,i))(Object.prototype),Qw=ua("RegExp"),db=(t,n)=>{const i=Object.getOwnPropertyDescriptors(t),o={};jr(i,(l,u)=>{let f;(f=n(l,u,t))!==!1&&(o[u]=f||l)}),Object.defineProperties(t,o)},Zw=t=>{db(t,(n,i)=>{if(Rn(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const o=t[i];if(Rn(o)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Jw=(t,n)=>{const i={},o=l=>{l.forEach(u=>{i[u]=!0})};return so(t)?o(t):o(String(t).split(n)),i},eC=()=>{},tC=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function nC(t){return!!(t&&Rn(t.append)&&t[ob]==="FormData"&&t[Tc])}const aC=t=>{const n=new Array(10),i=(o,l)=>{if(Tr(o)){if(n.indexOf(o)>=0)return;if(Cr(o))return o;if(!("toJSON"in o)){n[l]=o;const u=so(o)?[]:{};return jr(o,(f,h)=>{const m=i(f,l+1);!eo(m)&&(u[h]=m)}),n[l]=void 0,u}}return o};return i(t,0)},iC=ua("AsyncFunction"),sC=t=>t&&(Tr(t)||Rn(t))&&Rn(t.then)&&Rn(t.catch),fb=((t,n)=>t?setImmediate:n?((i,o)=>(Vi.addEventListener("message",({source:l,data:u})=>{l===Vi&&u===i&&o.length&&o.shift()()},!1),l=>{o.push(l),Vi.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",Rn(Vi.postMessage)),oC=typeof queueMicrotask<"u"?queueMicrotask.bind(Vi):typeof process<"u"&&process.nextTick||fb,rC=t=>t!=null&&Rn(t[Tc]),V={isArray:so,isArrayBuffer:rb,isBuffer:Cr,isFormData:Nw,isArrayBufferView:Cw,isString:Tw,isNumber:lb,isBoolean:jw,isObject:Tr,isPlainObject:tc,isEmptyObject:Aw,isReadableStream:zw,isRequest:Ow,isResponse:Bw,isHeaders:Lw,isUndefined:eo,isDate:kw,isFile:Ew,isBlob:Mw,isRegExp:Qw,isFunction:Rn,isStream:Dw,isURLSearchParams:Uw,isTypedArray:$w,isFileList:Rw,forEach:jr,merge:jf,extend:Pw,trim:Iw,stripBOM:Vw,inherits:Hw,toFlatObject:Fw,kindOf:jc,kindOfTest:ua,endsWith:qw,toArray:Gw,forEachEntry:Yw,matchAll:Xw,isHTMLForm:Ww,hasOwnProperty:Zy,hasOwnProp:Zy,reduceDescriptors:db,freezeMethods:Zw,toObjectSet:Jw,toCamelCase:Kw,noop:eC,toFiniteNumber:tC,findKey:cb,global:Vi,isContextDefined:ub,isSpecCompliantForm:nC,toJSONObject:aC,isAsyncFn:iC,isThenable:sC,setImmediate:fb,asap:oC,isIterable:rC};function Ve(t,n,i,o,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),o&&(this.request=o),l&&(this.response=l,this.status=l.status?l.status:null)}V.inherits(Ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const pb=Ve.prototype,hb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{hb[t]={value:t}});Object.defineProperties(Ve,hb);Object.defineProperty(pb,"isAxiosError",{value:!0});Ve.from=(t,n,i,o,l,u)=>{const f=Object.create(pb);V.toFlatObject(t,f,function(v){return v!==Error.prototype},g=>g!=="isAxiosError");const h=t&&t.message?t.message:"Error",m=n==null&&t?t.code:n;return Ve.call(f,h,m,i,o,l),t&&f.cause==null&&Object.defineProperty(f,"cause",{value:t,configurable:!0}),f.name=t&&t.name||"Error",u&&Object.assign(f,u),f};const lC=null;function Af(t){return V.isPlainObject(t)||V.isArray(t)}function mb(t){return V.endsWith(t,"[]")?t.slice(0,-2):t}function Jy(t,n,i){return t?t.concat(n).map(function(l,u){return l=mb(l),!i&&u?"["+l+"]":l}).join(i?".":""):n}function cC(t){return V.isArray(t)&&!t.some(Af)}const uC=V.toFlatObject(V,{},null,function(n){return/^is[A-Z]/.test(n)});function kc(t,n,i){if(!V.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,i=V.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,j){return!V.isUndefined(j[k])});const o=i.metaTokens,l=i.visitor||v,u=i.dots,f=i.indexes,m=(i.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(n);if(!V.isFunction(l))throw new TypeError("visitor must be a function");function g(_){if(_===null)return"";if(V.isDate(_))return _.toISOString();if(V.isBoolean(_))return _.toString();if(!m&&V.isBlob(_))throw new Ve("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(_)||V.isTypedArray(_)?m&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function v(_,k,j){let D=_;if(_&&!j&&typeof _=="object"){if(V.endsWith(k,"{}"))k=o?k:k.slice(0,-2),_=JSON.stringify(_);else if(V.isArray(_)&&cC(_)||(V.isFileList(_)||V.endsWith(k,"[]"))&&(D=V.toArray(_)))return k=mb(k),D.forEach(function(E,U){!(V.isUndefined(E)||E===null)&&n.append(f===!0?Jy([k],U,u):f===null?k:k+"[]",g(E))}),!1}return Af(_)?!0:(n.append(Jy(j,k,u),g(_)),!1)}const x=[],S=Object.assign(uC,{defaultVisitor:v,convertValue:g,isVisitable:Af});function C(_,k){if(!V.isUndefined(_)){if(x.indexOf(_)!==-1)throw Error("Circular reference detected in "+k.join("."));x.push(_),V.forEach(_,function(D,L){(!(V.isUndefined(D)||D===null)&&l.call(n,D,V.isString(L)?L.trim():L,k,S))===!0&&C(D,k?k.concat(L):[L])}),x.pop()}}if(!V.isObject(t))throw new TypeError("data must be an object");return C(t),n}function ev(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return n[o]})}function dp(t,n){this._pairs=[],t&&kc(t,this,n)}const gb=dp.prototype;gb.append=function(n,i){this._pairs.push([n,i])};gb.toString=function(n){const i=n?function(o){return n.call(this,o,ev)}:ev;return this._pairs.map(function(l){return i(l[0])+"="+i(l[1])},"").join("&")};function dC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function yb(t,n,i){if(!n)return t;const o=i&&i.encode||dC;V.isFunction(i)&&(i={serialize:i});const l=i&&i.serialize;let u;if(l?u=l(n,i):u=V.isURLSearchParams(n)?n.toString():new dp(n,i).toString(o),u){const f=t.indexOf("#");f!==-1&&(t=t.slice(0,f)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t}class tv{constructor(){this.handlers=[]}use(n,i,o){return this.handlers.push({fulfilled:n,rejected:i,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){V.forEach(this.handlers,function(o){o!==null&&n(o)})}}const vb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fC=typeof URLSearchParams<"u"?URLSearchParams:dp,pC=typeof FormData<"u"?FormData:null,hC=typeof Blob<"u"?Blob:null,mC={isBrowser:!0,classes:{URLSearchParams:fC,FormData:pC,Blob:hC},protocols:["http","https","file","blob","url","data"]},fp=typeof window<"u"&&typeof document<"u",kf=typeof navigator=="object"&&navigator||void 0,gC=fp&&(!kf||["ReactNative","NativeScript","NS"].indexOf(kf.product)<0),yC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",vC=fp&&window.location.href||"http://localhost",xC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:fp,hasStandardBrowserEnv:gC,hasStandardBrowserWebWorkerEnv:yC,navigator:kf,origin:vC},Symbol.toStringTag,{value:"Module"})),mn={...xC,...mC};function bC(t,n){return kc(t,new mn.classes.URLSearchParams,{visitor:function(i,o,l,u){return mn.isNode&&V.isBuffer(i)?(this.append(o,i.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)},...n})}function SC(t){return V.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function _C(t){const n={},i=Object.keys(t);let o;const l=i.length;let u;for(o=0;o<l;o++)u=i[o],n[u]=t[u];return n}function xb(t){function n(i,o,l,u){let f=i[u++];if(f==="__proto__")return!0;const h=Number.isFinite(+f),m=u>=i.length;return f=!f&&V.isArray(l)?l.length:f,m?(V.hasOwnProp(l,f)?l[f]=[l[f],o]:l[f]=o,!h):((!l[f]||!V.isObject(l[f]))&&(l[f]=[]),n(i,o,l[f],u)&&V.isArray(l[f])&&(l[f]=_C(l[f])),!h)}if(V.isFormData(t)&&V.isFunction(t.entries)){const i={};return V.forEachEntry(t,(o,l)=>{n(SC(o),l,i,0)}),i}return null}function wC(t,n,i){if(V.isString(t))try{return(n||JSON.parse)(t),V.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(i||JSON.stringify)(t)}const Ar={transitional:vb,adapter:["xhr","http","fetch"],transformRequest:[function(n,i){const o=i.getContentType()||"",l=o.indexOf("application/json")>-1,u=V.isObject(n);if(u&&V.isHTMLForm(n)&&(n=new FormData(n)),V.isFormData(n))return l?JSON.stringify(xb(n)):n;if(V.isArrayBuffer(n)||V.isBuffer(n)||V.isStream(n)||V.isFile(n)||V.isBlob(n)||V.isReadableStream(n))return n;if(V.isArrayBufferView(n))return n.buffer;if(V.isURLSearchParams(n))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let h;if(u){if(o.indexOf("application/x-www-form-urlencoded")>-1)return bC(n,this.formSerializer).toString();if((h=V.isFileList(n))||o.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return kc(h?{"files[]":n}:n,m&&new m,this.formSerializer)}}return u||l?(i.setContentType("application/json",!1),wC(n)):n}],transformResponse:[function(n){const i=this.transitional||Ar.transitional,o=i&&i.forcedJSONParsing,l=this.responseType==="json";if(V.isResponse(n)||V.isReadableStream(n))return n;if(n&&V.isString(n)&&(o&&!this.responseType||l)){const f=!(i&&i.silentJSONParsing)&&l;try{return JSON.parse(n,this.parseReviver)}catch(h){if(f)throw h.name==="SyntaxError"?Ve.from(h,Ve.ERR_BAD_RESPONSE,this,null,this.response):h}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mn.classes.FormData,Blob:mn.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],t=>{Ar.headers[t]={}});const CC=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),TC=t=>{const n={};let i,o,l;return t&&t.split(`
`).forEach(function(f){l=f.indexOf(":"),i=f.substring(0,l).trim().toLowerCase(),o=f.substring(l+1).trim(),!(!i||n[i]&&CC[i])&&(i==="set-cookie"?n[i]?n[i].push(o):n[i]=[o]:n[i]=n[i]?n[i]+", "+o:o)}),n},nv=Symbol("internals");function ar(t){return t&&String(t).trim().toLowerCase()}function nc(t){return t===!1||t==null?t:V.isArray(t)?t.map(nc):String(t)}function jC(t){const n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=i.exec(t);)n[o[1]]=o[2];return n}const AC=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Xd(t,n,i,o,l){if(V.isFunction(o))return o.call(this,n,i);if(l&&(n=i),!!V.isString(n)){if(V.isString(o))return n.indexOf(o)!==-1;if(V.isRegExp(o))return o.test(n)}}function kC(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,i,o)=>i.toUpperCase()+o)}function EC(t,n){const i=V.toCamelCase(" "+n);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+i,{value:function(l,u,f){return this[o].call(this,n,l,u,f)},configurable:!0})})}let Dn=class{constructor(n){n&&this.set(n)}set(n,i,o){const l=this;function u(h,m,g){const v=ar(m);if(!v)throw new Error("header name must be a non-empty string");const x=V.findKey(l,v);(!x||l[x]===void 0||g===!0||g===void 0&&l[x]!==!1)&&(l[x||m]=nc(h))}const f=(h,m)=>V.forEach(h,(g,v)=>u(g,v,m));if(V.isPlainObject(n)||n instanceof this.constructor)f(n,i);else if(V.isString(n)&&(n=n.trim())&&!AC(n))f(TC(n),i);else if(V.isObject(n)&&V.isIterable(n)){let h={},m,g;for(const v of n){if(!V.isArray(v))throw TypeError("Object iterator must return a key-value pair");h[g=v[0]]=(m=h[g])?V.isArray(m)?[...m,v[1]]:[m,v[1]]:v[1]}f(h,i)}else n!=null&&u(i,n,o);return this}get(n,i){if(n=ar(n),n){const o=V.findKey(this,n);if(o){const l=this[o];if(!i)return l;if(i===!0)return jC(l);if(V.isFunction(i))return i.call(this,l,o);if(V.isRegExp(i))return i.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=ar(n),n){const o=V.findKey(this,n);return!!(o&&this[o]!==void 0&&(!i||Xd(this,this[o],o,i)))}return!1}delete(n,i){const o=this;let l=!1;function u(f){if(f=ar(f),f){const h=V.findKey(o,f);h&&(!i||Xd(o,o[h],h,i))&&(delete o[h],l=!0)}}return V.isArray(n)?n.forEach(u):u(n),l}clear(n){const i=Object.keys(this);let o=i.length,l=!1;for(;o--;){const u=i[o];(!n||Xd(this,this[u],u,n,!0))&&(delete this[u],l=!0)}return l}normalize(n){const i=this,o={};return V.forEach(this,(l,u)=>{const f=V.findKey(o,u);if(f){i[f]=nc(l),delete i[u];return}const h=n?kC(u):String(u).trim();h!==u&&delete i[u],i[h]=nc(l),o[h]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const i=Object.create(null);return V.forEach(this,(o,l)=>{o!=null&&o!==!1&&(i[l]=n&&V.isArray(o)?o.join(", "):o)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,i])=>n+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...i){const o=new this(n);return i.forEach(l=>o.set(l)),o}static accessor(n){const o=(this[nv]=this[nv]={accessors:{}}).accessors,l=this.prototype;function u(f){const h=ar(f);o[h]||(EC(l,f),o[h]=!0)}return V.isArray(n)?n.forEach(u):u(n),this}};Dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(Dn.prototype,({value:t},n)=>{let i=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(o){this[i]=o}}});V.freezeMethods(Dn);function Wd(t,n){const i=this||Ar,o=n||i,l=Dn.from(o.headers);let u=o.data;return V.forEach(t,function(h){u=h.call(i,u,l.normalize(),n?n.status:void 0)}),l.normalize(),u}function bb(t){return!!(t&&t.__CANCEL__)}function oo(t,n,i){Ve.call(this,t??"canceled",Ve.ERR_CANCELED,n,i),this.name="CanceledError"}V.inherits(oo,Ve,{__CANCEL__:!0});function Sb(t,n,i){const o=i.config.validateStatus;!i.status||!o||o(i.status)?t(i):n(new Ve("Request failed with status code "+i.status,[Ve.ERR_BAD_REQUEST,Ve.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function MC(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function RC(t,n){t=t||10;const i=new Array(t),o=new Array(t);let l=0,u=0,f;return n=n!==void 0?n:1e3,function(m){const g=Date.now(),v=o[u];f||(f=g),i[l]=m,o[l]=g;let x=u,S=0;for(;x!==l;)S+=i[x++],x=x%t;if(l=(l+1)%t,l===u&&(u=(u+1)%t),g-f<n)return;const C=v&&g-v;return C?Math.round(S*1e3/C):void 0}}function DC(t,n){let i=0,o=1e3/n,l,u;const f=(g,v=Date.now())=>{i=v,l=null,u&&(clearTimeout(u),u=null),t(...g)};return[(...g)=>{const v=Date.now(),x=v-i;x>=o?f(g,v):(l=g,u||(u=setTimeout(()=>{u=null,f(l)},o-x)))},()=>l&&f(l)]}const pc=(t,n,i=3)=>{let o=0;const l=RC(50,250);return DC(u=>{const f=u.loaded,h=u.lengthComputable?u.total:void 0,m=f-o,g=l(m),v=f<=h;o=f;const x={loaded:f,total:h,progress:h?f/h:void 0,bytes:m,rate:g||void 0,estimated:g&&h&&v?(h-f)/g:void 0,event:u,lengthComputable:h!=null,[n?"download":"upload"]:!0};t(x)},i)},av=(t,n)=>{const i=t!=null;return[o=>n[0]({lengthComputable:i,total:t,loaded:o}),n[1]]},iv=t=>(...n)=>V.asap(()=>t(...n)),NC=mn.hasStandardBrowserEnv?((t,n)=>i=>(i=new URL(i,mn.origin),t.protocol===i.protocol&&t.host===i.host&&(n||t.port===i.port)))(new URL(mn.origin),mn.navigator&&/(msie|trident)/i.test(mn.navigator.userAgent)):()=>!0,UC=mn.hasStandardBrowserEnv?{write(t,n,i,o,l,u,f){if(typeof document>"u")return;const h=[`${t}=${encodeURIComponent(n)}`];V.isNumber(i)&&h.push(`expires=${new Date(i).toUTCString()}`),V.isString(o)&&h.push(`path=${o}`),V.isString(l)&&h.push(`domain=${l}`),u===!0&&h.push("secure"),V.isString(f)&&h.push(`SameSite=${f}`),document.cookie=h.join("; ")},read(t){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function zC(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function OC(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function _b(t,n,i){let o=!zC(n);return t&&(o||i==!1)?OC(t,n):n}const sv=t=>t instanceof Dn?{...t}:t;function Wi(t,n){n=n||{};const i={};function o(g,v,x,S){return V.isPlainObject(g)&&V.isPlainObject(v)?V.merge.call({caseless:S},g,v):V.isPlainObject(v)?V.merge({},v):V.isArray(v)?v.slice():v}function l(g,v,x,S){if(V.isUndefined(v)){if(!V.isUndefined(g))return o(void 0,g,x,S)}else return o(g,v,x,S)}function u(g,v){if(!V.isUndefined(v))return o(void 0,v)}function f(g,v){if(V.isUndefined(v)){if(!V.isUndefined(g))return o(void 0,g)}else return o(void 0,v)}function h(g,v,x){if(x in n)return o(g,v);if(x in t)return o(void 0,g)}const m={url:u,method:u,data:u,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h,headers:(g,v,x)=>l(sv(g),sv(v),x,!0)};return V.forEach(Object.keys({...t,...n}),function(v){const x=m[v]||l,S=x(t[v],n[v],v);V.isUndefined(S)&&x!==h||(i[v]=S)}),i}const wb=t=>{const n=Wi({},t);let{data:i,withXSRFToken:o,xsrfHeaderName:l,xsrfCookieName:u,headers:f,auth:h}=n;if(n.headers=f=Dn.from(f),n.url=yb(_b(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&f.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),V.isFormData(i)){if(mn.hasStandardBrowserEnv||mn.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(V.isFunction(i.getHeaders)){const m=i.getHeaders(),g=["content-type","content-length"];Object.entries(m).forEach(([v,x])=>{g.includes(v.toLowerCase())&&f.set(v,x)})}}if(mn.hasStandardBrowserEnv&&(o&&V.isFunction(o)&&(o=o(n)),o||o!==!1&&NC(n.url))){const m=l&&u&&UC.read(u);m&&f.set(l,m)}return n},BC=typeof XMLHttpRequest<"u",LC=BC&&function(t){return new Promise(function(i,o){const l=wb(t);let u=l.data;const f=Dn.from(l.headers).normalize();let{responseType:h,onUploadProgress:m,onDownloadProgress:g}=l,v,x,S,C,_;function k(){C&&C(),_&&_(),l.cancelToken&&l.cancelToken.unsubscribe(v),l.signal&&l.signal.removeEventListener("abort",v)}let j=new XMLHttpRequest;j.open(l.method.toUpperCase(),l.url,!0),j.timeout=l.timeout;function D(){if(!j)return;const E=Dn.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),P={data:!h||h==="text"||h==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:E,config:t,request:j};Sb(function(ne){i(ne),k()},function(ne){o(ne),k()},P),j=null}"onloadend"in j?j.onloadend=D:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(D)},j.onabort=function(){j&&(o(new Ve("Request aborted",Ve.ECONNABORTED,t,j)),j=null)},j.onerror=function(U){const P=U&&U.message?U.message:"Network Error",Q=new Ve(P,Ve.ERR_NETWORK,t,j);Q.event=U||null,o(Q),j=null},j.ontimeout=function(){let U=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const P=l.transitional||vb;l.timeoutErrorMessage&&(U=l.timeoutErrorMessage),o(new Ve(U,P.clarifyTimeoutError?Ve.ETIMEDOUT:Ve.ECONNABORTED,t,j)),j=null},u===void 0&&f.setContentType(null),"setRequestHeader"in j&&V.forEach(f.toJSON(),function(U,P){j.setRequestHeader(P,U)}),V.isUndefined(l.withCredentials)||(j.withCredentials=!!l.withCredentials),h&&h!=="json"&&(j.responseType=l.responseType),g&&([S,_]=pc(g,!0),j.addEventListener("progress",S)),m&&j.upload&&([x,C]=pc(m),j.upload.addEventListener("progress",x),j.upload.addEventListener("loadend",C)),(l.cancelToken||l.signal)&&(v=E=>{j&&(o(!E||E.type?new oo(null,t,j):E),j.abort(),j=null)},l.cancelToken&&l.cancelToken.subscribe(v),l.signal&&(l.signal.aborted?v():l.signal.addEventListener("abort",v)));const L=MC(l.url);if(L&&mn.protocols.indexOf(L)===-1){o(new Ve("Unsupported protocol "+L+":",Ve.ERR_BAD_REQUEST,t));return}j.send(u||null)})},IC=(t,n)=>{const{length:i}=t=t?t.filter(Boolean):[];if(n||i){let o=new AbortController,l;const u=function(g){if(!l){l=!0,h();const v=g instanceof Error?g:this.reason;o.abort(v instanceof Ve?v:new oo(v instanceof Error?v.message:v))}};let f=n&&setTimeout(()=>{f=null,u(new Ve(`timeout ${n} of ms exceeded`,Ve.ETIMEDOUT))},n);const h=()=>{t&&(f&&clearTimeout(f),f=null,t.forEach(g=>{g.unsubscribe?g.unsubscribe(u):g.removeEventListener("abort",u)}),t=null)};t.forEach(g=>g.addEventListener("abort",u));const{signal:m}=o;return m.unsubscribe=()=>V.asap(h),m}},PC=function*(t,n){let i=t.byteLength;if(i<n){yield t;return}let o=0,l;for(;o<i;)l=o+n,yield t.slice(o,l),o=l},VC=async function*(t,n){for await(const i of HC(t))yield*PC(i,n)},HC=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:i,value:o}=await n.read();if(i)break;yield o}}finally{await n.cancel()}},ov=(t,n,i,o)=>{const l=VC(t,n);let u=0,f,h=m=>{f||(f=!0,o&&o(m))};return new ReadableStream({async pull(m){try{const{done:g,value:v}=await l.next();if(g){h(),m.close();return}let x=v.byteLength;if(i){let S=u+=x;i(S)}m.enqueue(new Uint8Array(v))}catch(g){throw h(g),g}},cancel(m){return h(m),l.return()}},{highWaterMark:2})},rv=64*1024,{isFunction:$l}=V,FC=(({Request:t,Response:n})=>({Request:t,Response:n}))(V.global),{ReadableStream:lv,TextEncoder:cv}=V.global,uv=(t,...n)=>{try{return!!t(...n)}catch{return!1}},qC=t=>{t=V.merge.call({skipUndefined:!0},FC,t);const{fetch:n,Request:i,Response:o}=t,l=n?$l(n):typeof fetch=="function",u=$l(i),f=$l(o);if(!l)return!1;const h=l&&$l(lv),m=l&&(typeof cv=="function"?(_=>k=>_.encode(k))(new cv):async _=>new Uint8Array(await new i(_).arrayBuffer())),g=u&&h&&uv(()=>{let _=!1;const k=new i(mn.origin,{body:new lv,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!k}),v=f&&h&&uv(()=>V.isReadableStream(new o("").body)),x={stream:v&&(_=>_.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!x[_]&&(x[_]=(k,j)=>{let D=k&&k[_];if(D)return D.call(k);throw new Ve(`Response type '${_}' is not supported`,Ve.ERR_NOT_SUPPORT,j)})});const S=async _=>{if(_==null)return 0;if(V.isBlob(_))return _.size;if(V.isSpecCompliantForm(_))return(await new i(mn.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(V.isArrayBufferView(_)||V.isArrayBuffer(_))return _.byteLength;if(V.isURLSearchParams(_)&&(_=_+""),V.isString(_))return(await m(_)).byteLength},C=async(_,k)=>{const j=V.toFiniteNumber(_.getContentLength());return j??S(k)};return async _=>{let{url:k,method:j,data:D,signal:L,cancelToken:E,timeout:U,onDownloadProgress:P,onUploadProgress:Q,responseType:ne,headers:W,withCredentials:ce="same-origin",fetchOptions:se}=wb(_),Ee=n||fetch;ne=ne?(ne+"").toLowerCase():"text";let $e=IC([L,E&&E.toAbortSignal()],U),de=null;const Ae=$e&&$e.unsubscribe&&(()=>{$e.unsubscribe()});let Oe;try{if(Q&&g&&j!=="get"&&j!=="head"&&(Oe=await C(W,D))!==0){let ge=new i(k,{method:"POST",body:D,duplex:"half"}),Ne;if(V.isFormData(D)&&(Ne=ge.headers.get("content-type"))&&W.setContentType(Ne),ge.body){const[be,Z]=av(Oe,pc(iv(Q)));D=ov(ge.body,rv,be,Z)}}V.isString(ce)||(ce=ce?"include":"omit");const N=u&&"credentials"in i.prototype,ee={...se,signal:$e,method:j.toUpperCase(),headers:W.normalize().toJSON(),body:D,duplex:"half",credentials:N?ce:void 0};de=u&&new i(k,ee);let ie=await(u?Ee(de,se):Ee(k,ee));const ve=v&&(ne==="stream"||ne==="response");if(v&&(P||ve&&Ae)){const ge={};["status","statusText","headers"].forEach(ue=>{ge[ue]=ie[ue]});const Ne=V.toFiniteNumber(ie.headers.get("content-length")),[be,Z]=P&&av(Ne,pc(iv(P),!0))||[];ie=new o(ov(ie.body,rv,be,()=>{Z&&Z(),Ae&&Ae()}),ge)}ne=ne||"text";let Me=await x[V.findKey(x,ne)||"text"](ie,_);return!ve&&Ae&&Ae(),await new Promise((ge,Ne)=>{Sb(ge,Ne,{data:Me,headers:Dn.from(ie.headers),status:ie.status,statusText:ie.statusText,config:_,request:de})})}catch(N){throw Ae&&Ae(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new Ve("Network Error",Ve.ERR_NETWORK,_,de),{cause:N.cause||N}):Ve.from(N,N&&N.code,_,de)}}},GC=new Map,Cb=t=>{let n=t&&t.env||{};const{fetch:i,Request:o,Response:l}=n,u=[o,l,i];let f=u.length,h=f,m,g,v=GC;for(;h--;)m=u[h],g=v.get(m),g===void 0&&v.set(m,g=h?new Map:qC(n)),v=g;return g};Cb();const pp={http:lC,xhr:LC,fetch:{get:Cb}};V.forEach(pp,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const dv=t=>`- ${t}`,$C=t=>V.isFunction(t)||t===null||t===!1;function YC(t,n){t=V.isArray(t)?t:[t];const{length:i}=t;let o,l;const u={};for(let f=0;f<i;f++){o=t[f];let h;if(l=o,!$C(o)&&(l=pp[(h=String(o)).toLowerCase()],l===void 0))throw new Ve(`Unknown adapter '${h}'`);if(l&&(V.isFunction(l)||(l=l.get(n))))break;u[h||"#"+f]=l}if(!l){const f=Object.entries(u).map(([m,g])=>`adapter ${m} `+(g===!1?"is not supported by the environment":"is not available in the build"));let h=i?f.length>1?`since :
`+f.map(dv).join(`
`):" "+dv(f[0]):"as no adapter specified";throw new Ve("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return l}const Tb={getAdapter:YC,adapters:pp};function Kd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new oo(null,t)}function fv(t){return Kd(t),t.headers=Dn.from(t.headers),t.data=Wd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Tb.getAdapter(t.adapter||Ar.adapter,t)(t).then(function(o){return Kd(t),o.data=Wd.call(t,t.transformResponse,o),o.headers=Dn.from(o.headers),o},function(o){return bb(o)||(Kd(t),o&&o.response&&(o.response.data=Wd.call(t,t.transformResponse,o.response),o.response.headers=Dn.from(o.response.headers))),Promise.reject(o)})}const jb="1.13.2",Ec={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Ec[t]=function(o){return typeof o===t||"a"+(n<1?"n ":" ")+t}});const pv={};Ec.transitional=function(n,i,o){function l(u,f){return"[Axios v"+jb+"] Transitional option '"+u+"'"+f+(o?". "+o:"")}return(u,f,h)=>{if(n===!1)throw new Ve(l(f," has been removed"+(i?" in "+i:"")),Ve.ERR_DEPRECATED);return i&&!pv[f]&&(pv[f]=!0,console.warn(l(f," has been deprecated since v"+i+" and will be removed in the near future"))),n?n(u,f,h):!0}};Ec.spelling=function(n){return(i,o)=>(console.warn(`${o} is likely a misspelling of ${n}`),!0)};function XC(t,n,i){if(typeof t!="object")throw new Ve("options must be an object",Ve.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let l=o.length;for(;l-- >0;){const u=o[l],f=n[u];if(f){const h=t[u],m=h===void 0||f(h,u,t);if(m!==!0)throw new Ve("option "+u+" must be "+m,Ve.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Ve("Unknown option "+u,Ve.ERR_BAD_OPTION)}}const ac={assertOptions:XC,validators:Ec},ma=ac.validators;let qi=class{constructor(n){this.defaults=n||{},this.interceptors={request:new tv,response:new tv}}async request(n,i){try{return await this._request(n,i)}catch(o){if(o instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const u=l.stack?l.stack.replace(/^.+\n/,""):"";try{o.stack?u&&!String(o.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+u):o.stack=u}catch{}}throw o}}_request(n,i){typeof n=="string"?(i=i||{},i.url=n):i=n||{},i=Wi(this.defaults,i);const{transitional:o,paramsSerializer:l,headers:u}=i;o!==void 0&&ac.assertOptions(o,{silentJSONParsing:ma.transitional(ma.boolean),forcedJSONParsing:ma.transitional(ma.boolean),clarifyTimeoutError:ma.transitional(ma.boolean)},!1),l!=null&&(V.isFunction(l)?i.paramsSerializer={serialize:l}:ac.assertOptions(l,{encode:ma.function,serialize:ma.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),ac.assertOptions(i,{baseUrl:ma.spelling("baseURL"),withXsrfToken:ma.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let f=u&&V.merge(u.common,u[i.method]);u&&V.forEach(["delete","get","head","post","put","patch","common"],_=>{delete u[_]}),i.headers=Dn.concat(f,u);const h=[];let m=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(i)===!1||(m=m&&k.synchronous,h.unshift(k.fulfilled,k.rejected))});const g=[];this.interceptors.response.forEach(function(k){g.push(k.fulfilled,k.rejected)});let v,x=0,S;if(!m){const _=[fv.bind(this),void 0];for(_.unshift(...h),_.push(...g),S=_.length,v=Promise.resolve(i);x<S;)v=v.then(_[x++],_[x++]);return v}S=h.length;let C=i;for(;x<S;){const _=h[x++],k=h[x++];try{C=_(C)}catch(j){k.call(this,j);break}}try{v=fv.call(this,C)}catch(_){return Promise.reject(_)}for(x=0,S=g.length;x<S;)v=v.then(g[x++],g[x++]);return v}getUri(n){n=Wi(this.defaults,n);const i=_b(n.baseURL,n.url,n.allowAbsoluteUrls);return yb(i,n.params,n.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(n){qi.prototype[n]=function(i,o){return this.request(Wi(o||{},{method:n,url:i,data:(o||{}).data}))}});V.forEach(["post","put","patch"],function(n){function i(o){return function(u,f,h){return this.request(Wi(h||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:u,data:f}))}}qi.prototype[n]=i(),qi.prototype[n+"Form"]=i(!0)});let WC=class Ab{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(u){i=u});const o=this;this.promise.then(l=>{if(!o._listeners)return;let u=o._listeners.length;for(;u-- >0;)o._listeners[u](l);o._listeners=null}),this.promise.then=l=>{let u;const f=new Promise(h=>{o.subscribe(h),u=h}).then(l);return f.cancel=function(){o.unsubscribe(u)},f},n(function(u,f,h){o.reason||(o.reason=new oo(u,f,h),i(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=o=>{n.abort(o)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new Ab(function(l){n=l}),cancel:n}}};function KC(t){return function(i){return t.apply(null,i)}}function QC(t){return V.isObject(t)&&t.isAxiosError===!0}const Ef={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ef).forEach(([t,n])=>{Ef[n]=t});function kb(t){const n=new qi(t),i=sb(qi.prototype.request,n);return V.extend(i,qi.prototype,n,{allOwnKeys:!0}),V.extend(i,n,null,{allOwnKeys:!0}),i.create=function(l){return kb(Wi(t,l))},i}const Ot=kb(Ar);Ot.Axios=qi;Ot.CanceledError=oo;Ot.CancelToken=WC;Ot.isCancel=bb;Ot.VERSION=jb;Ot.toFormData=kc;Ot.AxiosError=Ve;Ot.Cancel=Ot.CanceledError;Ot.all=function(n){return Promise.all(n)};Ot.spread=KC;Ot.isAxiosError=QC;Ot.mergeConfig=Wi;Ot.AxiosHeaders=Dn;Ot.formToJSON=t=>xb(V.isHTMLForm(t)?new FormData(t):t);Ot.getAdapter=Tb.getAdapter;Ot.HttpStatusCode=Ef;Ot.default=Ot;const{Axios:vU,AxiosError:xU,CanceledError:bU,isCancel:SU,CancelToken:_U,VERSION:wU,all:CU,Cancel:TU,isAxiosError:jU,spread:AU,toFormData:kU,AxiosHeaders:EU,HttpStatusCode:MU,formToJSON:RU,getAdapter:DU,mergeConfig:NU}=Ot,ZC="https://your-domain.com/api",we=Ot.create({baseURL:ZC,headers:{"Content-Type":"application/json"},withCredentials:!0});we.interceptors.request.use(t=>{const n=localStorage.getItem("token");return n&&(console.log("[API] Adding token to request:",t.url,"Token:",n.substring(0,20)+"..."),t.headers.Authorization=`Bearer ${n}`),t});we.interceptors.response.use(t=>t,t=>(t.response?.status===401?(console.warn("[API] 401 Unauthorized - logging out user"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"):t.response?.status===400&&console.error("[API] 400 Bad Request:",t.response?.data),Promise.reject(t)));const hi={login:async t=>{const n=await we.post("/auth/login",t);return n.data?.data||n.data},register:async t=>{const n=await we.post("/auth/register",t);return n.data?.data||n.data},sendOTP:async t=>(await we.post(`/otp/send-to-email?email=${encodeURIComponent(t)}`)).data,updatePassword:async(t,n)=>(await we.put("/auth/update-password",{oldPassword:t,newPassword:n})).data,resetPasswordByEmail:async(t,n,i)=>(await we.put("/auth/reset-password-by-email",{email:t,password:n,otp:i})).data,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")}};function Ue(t,n="An error occurred"){if(t.response?.data?.error?.message)return t.response.data.error.message;if(t.response?.data?.message)return t.response.data.message;if(t.response?.data?.validationErrors){const i=t.response.data.validationErrors,o=Object.values(i)[0];if(Array.isArray(o)&&o.length>0)return o[0]}return t.message?t.message:n}function kr(t){return t.response?.data?.error?.code?t.response.data.error.code:null}function Mf(t){return kr(t)==="Chat.Ban.UserBanned"}function rr(t){switch(kr(t)){case"Chat.Ban.UserBanned":return"You are banned from this chat and cannot perform this action.";case"Chat.Ban.AlreadyBanned":return"This user is already banned from this chat.";case"Chat.Ban.CannotBanSelf":return"You cannot ban yourself.";case"Chat.Ban.CannotBanOwner":return"You cannot ban the owner of this chat.";default:return Ue(t,"An error occurred")}}function JC(t){const n=kr(t);return n==="UserBan.UserBanned"||n==="UserBan.CannotMessageBannedUser"}function eT(t){return kr(t)==="UserBan.UserBanned"}function tT(t){switch(kr(t)){case"UserBan.UserBanned":return"This user has blocked you. You cannot send them messages.";case"UserBan.CannotMessageBannedUser":return"You have blocked this user. Unblock them to send messages.";case"UserBan.AlreadyBanned":return"You have already blocked this user.";case"UserBan.CannotBanSelf":return"You cannot block yourself.";case"UserBan.NotFound":return"Block record not found.";default:return Ue(t,"An error occurred")}}const nT=()=>{try{return localStorage.getItem("token")}catch{return null}},aT=()=>{try{const t=localStorage.getItem("user");return t?JSON.parse(t):null}catch{return null}},xt=Cc(t=>({user:null,token:null,isLoading:!1,error:null,initialized:!1,initializeAuth:()=>{const n=aT(),i=nT();console.log("[authStore] Initializing auth:",{hasUser:!!n,hasToken:!!i,user:n}),t({user:n,token:i,initialized:!0})},login:async n=>{t({isLoading:!0,error:null});try{console.log("[authStore] Logging in...");const i=await hi.login(n);if(console.log("[authStore] Token received:",i?i.substring(0,20)+"...":"No token"),!i)throw new Error("No token received from login");localStorage.setItem("token",i),console.log("[authStore] Fetching user profile from /users/me...");const{userService:o}=await ht(async()=>{const{userService:u}=await Promise.resolve().then(()=>Hn);return{userService:u}},void 0),l=await o.getCurrentUser();!l.email&&n.credential.includes("@")&&(l.email=n.credential),console.log("[authStore] User profile fetched:",l),localStorage.setItem("user",JSON.stringify(l)),console.log("[authStore] Updating state with user and token..."),t({user:l,token:i,isLoading:!1}),console.log("[authStore] Login complete, state updated")}catch(i){const o=Ue(i,"Login failed");throw console.error("[authStore] Login error:",o,i),t({error:o,isLoading:!1}),i}},register:async(n,i,o,l)=>{t({isLoading:!0,error:null});try{console.log("[authStore] Registering user...");const u=await hi.register({email:n,username:i,password:o,otpCode:l});if(console.log("[authStore] Token received:",u?u.substring(0,20)+"...":"No token"),!u)throw new Error("No token received from registration");localStorage.setItem("token",u),console.log("[authStore] Fetching user profile from /users/me...");const{userService:f}=await ht(async()=>{const{userService:m}=await Promise.resolve().then(()=>Hn);return{userService:m}},void 0),h=await f.getCurrentUser();h.email||(h.email=n),console.log("[authStore] User profile fetched:",h),localStorage.setItem("user",JSON.stringify(h)),console.log("[authStore] Updating state with user and token..."),t({user:h,token:u,isLoading:!1}),console.log("[authStore] Registration complete, state updated")}catch(u){const f=Ue(u,"Registration failed");throw console.error("[authStore] Registration error:",f,u),t({error:f,isLoading:!1}),u}},logout:()=>{hi.logout(),t({user:null,token:null})},setUser:n=>{localStorage.setItem("user",JSON.stringify(n)),t({user:n})},clearError:()=>t({error:null})})),Er=()=>{const t=xt(x=>x.user),n=xt(x=>x.token),i=xt(x=>x.isLoading),o=xt(x=>x.initialized),l=xt(x=>x.error),u=xt(x=>x.login),f=xt(x=>x.register),h=xt(x=>x.logout),m=xt(x=>x.setUser),g=xt(x=>x.clearError),v=xt(x=>x.initializeAuth);return{user:t,token:n,isLoading:i,initialized:o,error:l,login:u,register:f,logout:h,setUser:m,clearError:g,initializeAuth:v,isAuthenticated:!!n&&!!t}},iT=({children:t})=>{const{isAuthenticated:n,isLoading:i,initialized:o}=Er();return console.log("[ProtectedRoute] Current state:",{isAuthenticated:n,isLoading:i,initialized:o}),i?c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"var(--background)",color:"var(--text)"},children:c.jsx("div",{children:"Loading..."})}):n?c.jsx(c.Fragment,{children:t}):(console.warn("[ProtectedRoute] Not authenticated, redirecting to login"),c.jsx(Vs,{to:"/login",replace:!0}))},sT="_authContainer_1b18h_27",oT="_orb_1b18h_53",rT="_orb1_1b18h_69",lT="_orb2_1b18h_85",cT="_orb3_1b18h_101",uT="_authCard_1b18h_121",dT="_header_1b18h_153",fT="_iconWrapper_1b18h_163",pT="_title_1b18h_195",hT="_subtitle_1b18h_209",mT="_errorAlert_1b18h_223",gT="_successAlert_1b18h_273",yT="_form_1b18h_323",vT="_inputGroup_1b18h_331",xT="_label_1b18h_339",bT="_inputWrapper_1b18h_355",ST="_input_1b18h_331",_T="_inputPassword_1b18h_413",wT="_togglePassword_1b18h_421",CT="_forgotLink_1b18h_461",TT="_submitBtn_1b18h_499",jT="_footer_1b18h_587",AT="_backBtn_1b18h_637",kT="_verifiedBadge_1b18h_679",ET="_otpInput_1b18h_727",MT="_resendSection_1b18h_745",RT="_resendBtn_1b18h_769",DT="_spinner_1b18h_813",F={authContainer:sT,orb:oT,orb1:rT,orb2:lT,orb3:cT,authCard:uT,header:dT,iconWrapper:fT,title:pT,subtitle:hT,errorAlert:mT,successAlert:gT,form:yT,inputGroup:vT,label:xT,inputWrapper:bT,input:ST,inputPassword:_T,togglePassword:wT,forgotLink:CT,submitBtn:TT,footer:jT,backBtn:AT,verifiedBadge:kT,otpInput:ET,resendSection:MT,resendBtn:RT,spinner:DT},NT=()=>{const t=lp(),{login:n,isLoading:i,error:o,clearError:l}=Er(),[u,f]=w.useState(""),[h,m]=w.useState(""),[g,v]=w.useState(!1),x=async S=>{S.preventDefault(),l();try{console.log("[LoginForm] Starting login..."),await n({credential:u,password:h});const C=xt.getState();console.log("[LoginForm] Login successful. Auth state:",{hasToken:!!C.token,hasUser:!!C.user,isLoading:C.isLoading}),C.token&&C.user?(console.log("[LoginForm] Auth state verified, navigating to dashboard..."),t("/dashboard")):console.error("[LoginForm] Login completed but auth state not set!")}catch(C){console.error("[LoginForm] Login error:",C)}};return c.jsxs("div",{className:F.authContainer,children:[c.jsx("div",{className:`${F.orb} ${F.orb1}`}),c.jsx("div",{className:`${F.orb} ${F.orb2}`}),c.jsx("div",{className:`${F.orb} ${F.orb3}`}),c.jsxs("div",{className:F.authCard,children:[c.jsxs("div",{className:F.header,children:[c.jsx("div",{className:F.iconWrapper,children:c.jsx("span",{children:""})}),c.jsx("h1",{className:F.title,children:"Sign In"}),c.jsx("p",{className:F.subtitle,children:"Welcome back to Simpchat"})]}),o&&c.jsxs("div",{className:F.errorAlert,children:[c.jsx(mi,{size:20}),c.jsx("p",{children:o})]}),c.jsxs("form",{onSubmit:x,className:F.form,children:[c.jsxs("div",{className:F.inputGroup,children:[c.jsx("label",{htmlFor:"credential",className:F.label,children:"Email or Username"}),c.jsx("input",{id:"credential",type:"text",value:u,onChange:S=>f(S.target.value),placeholder:"john@example.com",required:!0,disabled:i,className:F.input})]}),c.jsxs("div",{className:F.inputGroup,children:[c.jsx("label",{htmlFor:"password",className:F.label,children:"Password"}),c.jsxs("div",{className:F.inputWrapper,children:[c.jsx("input",{id:"password",type:g?"text":"password",value:h,onChange:S=>m(S.target.value),placeholder:"",required:!0,disabled:i,className:`${F.input} ${F.inputPassword}`}),c.jsx("button",{type:"button",onClick:()=>v(!g),disabled:i,className:F.togglePassword,children:g?c.jsx(fr,{size:20}):c.jsx(pr,{size:20})})]})]}),c.jsx("div",{className:F.forgotLink,children:c.jsx(dc,{to:"/forgot-password",children:"Forgot password?"})}),c.jsx("button",{type:"submit",disabled:i||!u||!h,className:F.submitBtn,children:i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:F.spinner}),"Signing in..."]}):c.jsxs(c.Fragment,{children:["Sign In",c.jsx(Zs,{size:20})]})})]}),c.jsxs("div",{className:F.footer,children:[c.jsx("p",{children:"Don't have an account?"}),c.jsx(dc,{to:"/register",children:"Create Account "})]})]})]})},UT=()=>c.jsx("div",{style:{minHeight:"100vh",background:"var(--background)",display:"flex",alignItems:"center",justifyContent:"center",padding:"48px 16px"},children:c.jsx(NT,{})}),Eb=t=>{const n=typeof t=="string"?new Date(t):t,o=new Date().getTime()-n.getTime(),l=Math.floor(o/6e4),u=Math.floor(o/36e5),f=Math.floor(o/864e5);return l<1?"just now":l<60?`${l}m ago`:u<24?`${u}h ago`:f<7?`${f}d ago`:n.toLocaleDateString()},Ki=t=>{if(!t||t==="undefined"||t==="null")return"?";const n=String(t).trim();if(!n||n.length===0)return"?";const i=n.split(/\s+/).filter(o=>o.length>0);return i.length===0?"?":i.length===1?i[0][0]?.toUpperCase()||"?":i.map(o=>o[0]).join("").toUpperCase().slice(0,2)||"?"},Mb=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),vn=t=>{if(t)return t.replace("simpchat.filestorage:9000","localhost:9000").replace("localhost:9000","localhost:9000")},Rf=t=>{if(!t)return"Unknown";const n=new Date(t),o=new Date().getTime()-n.getTime(),l=Math.floor(o/6e4),u=Math.floor(o/36e5),f=Math.floor(o/864e5);if(l<1)return"just now";if(l===1)return"1 minute ago";if(l<60)return`${l} minutes ago`;if(u===1)return"1 hour ago";if(u<24)return`${u} hours ago`;if(f===1)return`Yesterday at ${n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`;if(f<7){const h=n.toLocaleDateString([],{weekday:"long"}),m=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`${h} at ${m}`}return n.toLocaleDateString([],{month:"short",day:"numeric",year:"numeric"})},zT=()=>{const t=lp(),{register:n,isLoading:i}=Er(),[o,l]=w.useState("email"),[u,f]=w.useState(""),[h,m]=w.useState(""),[g,v]=w.useState(""),[x,S]=w.useState(""),[C,_]=w.useState(""),[k,j]=w.useState(!1),[D,L]=w.useState(!1),[E,U]=w.useState(""),[P,Q]=w.useState(!1),ne=async se=>{if(se.preventDefault(),U(""),!Mb(u)){U("Please enter a valid email address");return}Q(!0);try{await hi.sendOTP(u),l("complete")}catch(Ee){U(Ue(Ee,"Failed to send verification code"))}finally{Q(!1)}},W=async se=>{if(se.preventDefault(),U(""),!h.trim()){U("Username is required");return}if(h.length<3){U("Username must be at least 3 characters");return}if(g.length<5){U("Password must be at least 5 characters");return}if(g!==x){U("Passwords do not match");return}if(!C.trim()){U("Verification code is required");return}try{console.log("[RegisterForm] Registering user..."),await n(u,h,g,C);const Ee=xt.getState();console.log("[RegisterForm] Registration successful. Auth state:",{hasToken:!!Ee.token,hasUser:!!Ee.user,isLoading:Ee.isLoading}),Ee.token&&Ee.user?(console.log("[RegisterForm] Auth state verified, navigating to dashboard..."),t("/dashboard")):console.error("[RegisterForm] Registration completed but auth state not set!")}catch(Ee){U(Ue(Ee,"Registration failed"))}},ce=async()=>{U(""),Q(!0);try{await hi.sendOTP(u)}catch(se){U(Ue(se,"Failed to resend code"))}finally{Q(!1)}};return o==="email"?c.jsxs("div",{className:F.authContainer,children:[c.jsx("div",{className:`${F.orb} ${F.orb1}`}),c.jsx("div",{className:`${F.orb} ${F.orb2}`}),c.jsx("div",{className:`${F.orb} ${F.orb3}`}),c.jsxs("div",{className:F.authCard,children:[c.jsxs("div",{className:F.header,children:[c.jsx("div",{className:F.iconWrapper,children:c.jsx("span",{children:""})}),c.jsx("h1",{className:F.title,children:"Create Account"}),c.jsx("p",{className:F.subtitle,children:"Join Simpchat today"})]}),E&&c.jsxs("div",{className:F.errorAlert,children:[c.jsx(mi,{size:20}),c.jsx("p",{children:E})]}),c.jsxs("form",{onSubmit:ne,className:F.form,children:[c.jsxs("div",{className:F.inputGroup,children:[c.jsx("label",{htmlFor:"email",className:F.label,children:"Email Address"}),c.jsx("input",{id:"email",type:"email",value:u,onChange:se=>f(se.target.value),placeholder:"you@example.com",required:!0,disabled:P,className:F.input})]}),c.jsx("button",{type:"submit",disabled:P||!u,className:F.submitBtn,children:P?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:F.spinner}),"Sending..."]}):c.jsxs(c.Fragment,{children:["Continue",c.jsx(Zs,{size:20})]})})]}),c.jsxs("div",{className:F.footer,children:[c.jsx("p",{children:"Already have an account?"}),c.jsx(dc,{to:"/login",children:"Sign In "})]})]})]}):c.jsxs("div",{className:F.authContainer,children:[c.jsx("div",{className:`${F.orb} ${F.orb1}`}),c.jsx("div",{className:`${F.orb} ${F.orb2}`}),c.jsx("div",{className:`${F.orb} ${F.orb3}`}),c.jsxs("div",{className:F.authCard,children:[c.jsxs("div",{className:F.header,style:{textAlign:"left"},children:[c.jsxs("button",{onClick:()=>l("email"),className:F.backBtn,children:[c.jsx(eb,{size:16}),"Back"]}),c.jsx("h1",{className:F.title,style:{textAlign:"left"},children:"Complete Profile"}),c.jsxs("div",{className:F.verifiedBadge,children:[c.jsx(wf,{size:16}),c.jsxs("p",{children:["Email verified: ",u]})]})]}),E&&c.jsxs("div",{className:F.errorAlert,children:[c.jsx(mi,{size:20}),c.jsx("p",{children:E})]}),c.jsxs("form",{onSubmit:W,className:F.form,children:[c.jsxs("div",{className:F.inputGroup,children:[c.jsx("label",{htmlFor:"username",className:F.label,children:"Username"}),c.jsx("input",{id:"username",type:"text",value:h,onChange:se=>m(se.target.value),placeholder:"johndoe",required:!0,disabled:i,className:F.input})]}),c.jsxs("div",{className:F.inputGroup,children:[c.jsx("label",{htmlFor:"password",className:F.label,children:"Password"}),c.jsxs("div",{className:F.inputWrapper,children:[c.jsx("input",{id:"password",type:k?"text":"password",value:g,onChange:se=>v(se.target.value),placeholder:"",required:!0,disabled:i,className:`${F.input} ${F.inputPassword}`}),c.jsx("button",{type:"button",onClick:()=>j(!k),disabled:i,className:F.togglePassword,children:k?c.jsx(fr,{size:20}):c.jsx(pr,{size:20})})]})]}),c.jsxs("div",{className:F.inputGroup,children:[c.jsx("label",{htmlFor:"confirm-password",className:F.label,children:"Confirm Password"}),c.jsxs("div",{className:F.inputWrapper,children:[c.jsx("input",{id:"confirm-password",type:D?"text":"password",value:x,onChange:se=>S(se.target.value),placeholder:"",required:!0,disabled:i,className:`${F.input} ${F.inputPassword}`}),c.jsx("button",{type:"button",onClick:()=>L(!D),disabled:i,className:F.togglePassword,children:D?c.jsx(fr,{size:20}):c.jsx(pr,{size:20})})]})]}),c.jsxs("div",{className:F.inputGroup,children:[c.jsx("label",{htmlFor:"otp-code",className:F.label,children:"Verification Code"}),c.jsx("input",{id:"otp-code",type:"text",value:C,onChange:se=>_(se.target.value),placeholder:"000000",required:!0,disabled:i,className:`${F.input} ${F.otpInput}`})]}),c.jsx("button",{type:"submit",disabled:i||!h||!g||!x||!C,className:F.submitBtn,children:i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:F.spinner}),"Creating..."]}):c.jsxs(c.Fragment,{children:["Create Account",c.jsx(Zs,{size:20})]})})]}),c.jsxs("div",{className:F.resendSection,children:[c.jsx("p",{children:"Didn't get the code?"}),c.jsx("button",{onClick:ce,disabled:P,className:F.resendBtn,children:P?"Resending...":"Resend Code"})]})]})]})},OT=()=>c.jsx("div",{style:{minHeight:"100vh",background:"var(--background)",display:"flex",alignItems:"center",justifyContent:"center",padding:"48px 16px"},children:c.jsx(zT,{})}),BT=()=>{const t=lp(),[n,i]=w.useState("email"),[o,l]=w.useState(""),[u,f]=w.useState(""),[h,m]=w.useState(""),[g,v]=w.useState(""),[x,S]=w.useState(!1),[C,_]=w.useState(!1),[k,j]=w.useState(""),[D,L]=w.useState(""),[E,U]=w.useState(!1),P=async W=>{if(W.preventDefault(),j(""),!Mb(o)){j("Please enter a valid email address");return}U(!0);try{await hi.sendOTP(o),i("reset")}catch(ce){j(Ue(ce,"Failed to send verification code"))}finally{U(!1)}},Q=async W=>{if(W.preventDefault(),j(""),L(""),u.length<5){j("Password must be at least 5 characters");return}if(u!==h){j("Passwords do not match");return}if(!g.trim()){j("Verification code is required");return}U(!0);try{await hi.resetPasswordByEmail(o,u,g),L("Password reset successfully! Redirecting to login..."),setTimeout(()=>{t("/login")},2e3)}catch(ce){j(Ue(ce,"Failed to reset password"))}finally{U(!1)}},ne=async()=>{j(""),U(!0);try{await hi.sendOTP(o)}catch(W){j(Ue(W,"Failed to resend code"))}finally{U(!1)}};return n==="email"?c.jsxs("div",{className:F.authContainer,children:[c.jsx("div",{className:`${F.orb} ${F.orb1}`}),c.jsx("div",{className:`${F.orb} ${F.orb2}`}),c.jsx("div",{className:`${F.orb} ${F.orb3}`}),c.jsxs("div",{className:F.authCard,children:[c.jsxs("div",{className:F.header,children:[c.jsx("div",{className:F.iconWrapper,children:c.jsx("span",{children:""})}),c.jsx("h1",{className:F.title,children:"Forgot Password"}),c.jsx("p",{className:F.subtitle,children:"Enter your email to reset your password"})]}),k&&c.jsxs("div",{className:F.errorAlert,children:[c.jsx(mi,{size:20}),c.jsx("p",{children:k})]}),c.jsxs("form",{onSubmit:P,className:F.form,children:[c.jsxs("div",{className:F.inputGroup,children:[c.jsx("label",{htmlFor:"email",className:F.label,children:"Email Address"}),c.jsx("input",{id:"email",type:"email",value:o,onChange:W=>l(W.target.value),placeholder:"you@example.com",required:!0,disabled:E,className:F.input})]}),c.jsx("button",{type:"submit",disabled:E||!o,className:F.submitBtn,children:E?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:F.spinner}),"Sending..."]}):c.jsxs(c.Fragment,{children:["Send Reset Code",c.jsx(Zs,{size:20})]})})]}),c.jsxs("div",{className:F.footer,children:[c.jsx("p",{children:"Remember your password?"}),c.jsx(dc,{to:"/login",children:"Back to Sign In "})]})]})]}):c.jsxs("div",{className:F.authContainer,children:[c.jsx("div",{className:`${F.orb} ${F.orb1}`}),c.jsx("div",{className:`${F.orb} ${F.orb2}`}),c.jsx("div",{className:`${F.orb} ${F.orb3}`}),c.jsxs("div",{className:F.authCard,children:[c.jsxs("div",{className:F.header,style:{textAlign:"left"},children:[c.jsxs("button",{onClick:()=>i("email"),className:F.backBtn,children:[c.jsx(eb,{size:16}),"Back"]}),c.jsx("h1",{className:F.title,style:{textAlign:"left"},children:"Reset Password"}),c.jsxs("div",{className:F.verifiedBadge,children:[c.jsx(wf,{size:16}),c.jsxs("p",{children:["Code sent to: ",o]})]})]}),D&&c.jsxs("div",{className:F.successAlert,children:[c.jsx(wf,{size:20}),c.jsx("p",{children:D})]}),k&&c.jsxs("div",{className:F.errorAlert,children:[c.jsx(mi,{size:20}),c.jsx("p",{children:k})]}),c.jsxs("form",{onSubmit:Q,className:F.form,children:[c.jsxs("div",{className:F.inputGroup,children:[c.jsx("label",{htmlFor:"password",className:F.label,children:"New Password"}),c.jsxs("div",{className:F.inputWrapper,children:[c.jsx("input",{id:"password",type:x?"text":"password",value:u,onChange:W=>f(W.target.value),placeholder:"",required:!0,disabled:E||!!D,className:`${F.input} ${F.inputPassword}`}),c.jsx("button",{type:"button",onClick:()=>S(!x),disabled:E||!!D,className:F.togglePassword,children:x?c.jsx(fr,{size:20}):c.jsx(pr,{size:20})})]})]}),c.jsxs("div",{className:F.inputGroup,children:[c.jsx("label",{htmlFor:"confirm-password",className:F.label,children:"Confirm New Password"}),c.jsxs("div",{className:F.inputWrapper,children:[c.jsx("input",{id:"confirm-password",type:C?"text":"password",value:h,onChange:W=>m(W.target.value),placeholder:"",required:!0,disabled:E||!!D,className:`${F.input} ${F.inputPassword}`}),c.jsx("button",{type:"button",onClick:()=>_(!C),disabled:E||!!D,className:F.togglePassword,children:C?c.jsx(fr,{size:20}):c.jsx(pr,{size:20})})]})]}),c.jsxs("div",{className:F.inputGroup,children:[c.jsx("label",{htmlFor:"otp-code",className:F.label,children:"Verification Code"}),c.jsx("input",{id:"otp-code",type:"text",value:g,onChange:W=>v(W.target.value),placeholder:"000000",required:!0,disabled:E||!!D,className:`${F.input} ${F.otpInput}`})]}),c.jsx("button",{type:"submit",disabled:E||!u||!h||!g||!!D,className:F.submitBtn,children:E?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:F.spinner}),"Resetting..."]}):c.jsxs(c.Fragment,{children:["Reset Password",c.jsx(Zs,{size:20})]})})]}),!D&&c.jsxs("div",{className:F.resendSection,children:[c.jsx("p",{children:"Didn't get the code?"}),c.jsx("button",{onClick:ne,disabled:E,className:F.resendBtn,children:E?"Resending...":"Resend Code"})]})]})]})},LT=()=>c.jsx("div",{style:{minHeight:"100vh",background:"var(--background)",display:"flex",alignItems:"center",justifyContent:"center",padding:"48px 16px"},children:c.jsx(BT,{})}),IT=t=>{if(!t)return"channel";const n=String(t).toLowerCase().trim();return n==="conversation"||n==="dm"||n==="directmessage"?"dm":n==="group"?"group":(n==="channel"||console.warn("[Normalizer] Unknown chat type:",t,"defaulting to channel"),"channel")},sr=t=>{if(!t)return{};console.log("[Normalizer] Raw chat data:",{id:t.id,name:t.name,participantsCount:t.participantsCount,ParticipantsCount:t.ParticipantsCount,membersLength:t.members?.length});let n;t.privacy!==null&&t.privacy!==void 0&&(typeof t.privacy=="number"?n=t.privacy===0?"public":"private":typeof t.privacy=="string"&&(n=t.privacy.toLowerCase()));const i={id:t.id,name:t.name||"Unknown",type:IT(t.type),avatar:vn(t.avatarUrl||t.AvatarUrl||t.avatar||t.profileImage),description:t.description||"",privacy:n,members:(t.members||[]).map(o=>{const l=o.user?{...o.user,id:o.user.id||o.user.userId||o.userId,avatar:vn(o.user.avatarUrl||o.user.AvatarUrl||o.user.avatar||o.user.profileImage)}:{id:o.userId||o.id,username:o.username||"Unknown",email:"",avatar:vn(o.avatarUrl||o.AvatarUrl||o.avatar),onlineStatus:"offline",lastSeen:new Date().toISOString()};return{id:o.id||o.userId||o.user?.id,userId:o.userId||o.id||o.user?.id,user:l,joinedAt:o.joinedAt,role:o.role||"member"}}),lastMessage:t.lastMessage?{id:t.lastMessage.id,content:t.lastMessage.content,createdAt:t.lastMessage.createdAt||t.lastMessage.sentAt||new Date().toISOString(),senderId:t.lastMessage.senderId,senderUsername:t.lastMessage.senderUsername,fileUrl:vn(t.lastMessage.fileUrl),replyId:t.lastMessage.replyId,isSeen:t.lastMessage.isSeen??!1}:void 0,unreadCount:t.unreadCount!==void 0?t.unreadCount:t.notificationsCount||0,createdAt:t.created||t.createdAt||new Date().toISOString(),updatedAt:t.userLastMessage||t.updatedAt||t.createdAt||new Date().toISOString(),messages:t.messages?t.messages.map(o=>({...o,fileUrl:vn(o.fileUrl),senderAvatarUrl:vn(o.senderAvatarUrl),isSeen:o.isSeen??o.IsSeen??!1,seenAt:o.seenAt??o.SeenAt,isCurrentUser:o.isCurrentUser??o.IsCurrentUser??!1})):void 0,participantsCount:t.participantsCount??t.ParticipantsCount,participantsOnline:t.participantsOnline??t.ParticipantsOnline,notificationsCount:t.notificationsCount??t.NotificationsCount,isOnline:t.isOnline??t.IsOnline??!1,createdById:t.createdById??t.CreatedById??t.ownerId??t.OwnerId};return console.log("[Normalizer] Normalized chat result:",{id:i.id,name:i.name,participantsCount:i.participantsCount,createdById:i.createdById,membersCount:i.members?.length}),i},Df=t=>{if(!t)return{};console.log("[Normalizer] Normalizing user:",t),console.log("[Normalizer] User description fields:",{description:t.description,Description:t.Description,bio:t.bio});const n=t.userId||t.id||t.entityId||t.EntityId;let i="offline";return typeof t.onlineStatus=="string"?i=t.onlineStatus.toLowerCase()||"offline":typeof t.isOnline=="boolean"&&(i=t.isOnline?"online":"offline"),{id:n,username:t.username||t.displayName||t.name||"Unknown",email:t.email||"",avatar:vn(t.avatarUrl||t.AvatarUrl||t.avatar||t.profileImage),bio:t.description||t.Description||t.bio||"",onlineStatus:i,lastSeen:t.lastSeen||new Date().toISOString(),addMePolicy:t.addMePolicy||"everyone"}},PT=t=>Array.isArray(t)?t.map(n=>sr(n)):(console.warn("[Normalizer] Expected array of chats, got:",typeof t),[]),hv=t=>Array.isArray(t)?t.map(n=>Df(n)):(console.warn("[Normalizer] Expected array of users, got:",typeof t),[]),Fe={getAllChats:async()=>{const t=await we.get("/chats/me");console.log("[ChatService] Raw API response:",t.data);const n=t.data?.data||t.data;console.log("[ChatService] Extracted rawChats:",n),console.log("[ChatService] First chat participantsCount:",n?.[0]?.participantsCount);const i=PT(n);return console.log("[ChatService] After normalization, first chat participantsCount:",i?.[0]?.participantsCount),i},getChat:async t=>{const n=await we.get(`/chats/${t}`),i=n.data?.data||n.data;return sr(i)},getChatProfile:async t=>{const n=await we.get(`/chats/${t}/profile`),i=n.data?.data||n.data;return console.log("[ChatService] getChatProfile raw response:",{chatId:t,rawChat:i,hasMembers:!!i?.members,membersLength:i?.members?.length,hasParticipants:!!i?.participants,participantsLength:i?.participants?.length,createdById:i?.createdById,ownerId:i?.ownerId,CreatedById:i?.CreatedById,OwnerId:i?.OwnerId}),sr(i)},createGroup:async t=>{const n=await we.post("/groups",t,{headers:{"Content-Type":"multipart/form-data"}}),i=n.data?.data||n.data;return sr(i)},createChannel:async t=>{const n=await we.post("/channels",t,{headers:{"Content-Type":"multipart/form-data"}}),i=n.data?.data||n.data;return sr(i)},updateChat:async(t,n,i)=>{const o=n==="group"?"/groups":"/channels",l=await we.put(o,i,{headers:{"Content-Type":"multipart/form-data"},params:{chatId:t}});return l.data?.data||l.data},deleteChat:async(t,n)=>{const i=n==="group"?"/groups":"/channels",o=await we.delete(i,{params:{chatId:t}});return o.data?.data||o.data},deleteConversation:async t=>{const n=await we.delete("/conversations",{params:{conversationId:t}});return n.data?.data||n.data},joinChat:async(t,n)=>{const i=n==="group"?"/groups/join":"/channels/join",o=n==="group"?"groupId":"channelId",l=await we.post(i,null,{params:{[o]:t}});return l.data?.data||l.data},leaveChat:async(t,n)=>{const i=n==="group"?"/groups/leave":"/channels/leave",o=await we.post(i,null,{params:{chatId:t}});return o.data?.data||o.data},searchChats:async t=>{const n=await we.post("/chats/search",{pageNumber:1,pageSize:10,searchTerm:t});console.log("[ChatService] searchChats full response:",n);const i=n.data?.data;if(!Array.isArray(i))return console.warn("[ChatService] Search returned non-array data:",i),[];const o=i.map(l=>{const u=l.type||l.chatType,f=String(u).toLowerCase().trim();let h="channel";return f==="conversation"||f==="dm"||f==="directmessage"?h="dm":f==="group"?h="group":f==="channel"&&(h="channel"),{id:l.id||l.entityId,name:l.name||l.displayName||"Unknown",type:h,avatar:vn(l.avatarUrl||l.avatar||l.profileImage),description:l.description||"",memberCount:l.memberCount||l.participantsCount||0}});return console.log("[ChatService] Normalized search results:",o),o},banUser:async(t,n)=>{const i=await we.post(`/chats/ban/${n}`,null,{params:{chatId:t}});return i.data?.data||i.data},unbanUser:async(t,n)=>{const i=await we.post(`/chats/unban/${n}`,null,{params:{chatId:t}});return i.data?.data||i.data},getBannedUsers:async t=>{const n=await we.get(`/chats/${t}/banned-users`);return n.data?.data||n.data||[]},addMemberToGroup:async(t,n)=>{const i=await we.post("/groups/add-member",null,{params:{chatId:t,addingUserId:n}});return i.data?.data||i.data},addMemberToChannel:async(t,n)=>{const i=await we.post("/channels/add-member",null,{params:{chatId:t,addingUserId:n}});return i.data?.data||i.data},removeMemberFromGroup:async(t,n)=>{const i=await we.post("/groups/remove-member",null,{params:{chatId:t,removingUserId:n}});return i.data?.data||i.data},removeMemberFromChannel:async(t,n)=>{const i=await we.post("/channels/remove-member",null,{params:{chatId:t,removingUserId:n}});return i.data?.data||i.data},updateChatPrivacy:async(t,n)=>{const i=n==="public"?0:1,o=await we.put("/chats/privacy-type",null,{params:{chatId:t,privacyType:i}});return o.data?.data||o.data},addUserPermission:async(t,n,i)=>{const o=await we.post("/chats/add-user-permission",null,{params:{chatId:t,addingUserId:n,permissionName:i}});return o.data?.data||o.data},createOrGetDM:async(t,n)=>{try{if(console.log("[ChatService] createOrGetDM called with:",{recipientId:t,recipientIdType:typeof t,initialMessage:n,isRecipientIdValid:t&&t!=="undefined"}),!t||t==="undefined")throw new Error(`Invalid recipientId: ${t}`);const i=await Fe.getAllChats();console.log("[ChatService] Fetched chats, looking for existing DM with recipient:",t);let o;for(const l of i)if(console.log("[ChatService] Checking chat:",{chatId:l.id,type:l.type,memberCount:l.members?.length||0}),l.type==="dm")if(l.members&&l.members.length>0){if(l.members.some(f=>{const h=f.userId===t||f.id===t||f.user?.id===t;return h&&console.log("[ChatService] Found matching member:",f),h})){o=l;break}}else{console.log("[ChatService] Members array empty for DM, fetching full details for chat:",l.id);try{const u=await Fe.getChat(l.id);if(console.log("[ChatService] Full chat details:",{id:u.id,memberCount:u.members?.length||0,members:u.members?.map(f=>({userId:f.userId,id:f.id}))}),u.members&&u.members.length>0&&u.members.some(h=>{const m=h.userId===t||h.id===t||h.user?.id===t;return m&&console.log("[ChatService] Found matching member in full chat:",h),m})){o=u;break}}catch(u){console.error("[ChatService] Error fetching full chat details:",u)}}if(console.log("[ChatService] DM chat found:",o?.id||"NOT FOUND"),o&&n){console.log("[ChatService] Sending to existing DM with chatId:",o.id);const l=new FormData;return l.append("chatId",o.id),l.append("content",n),console.log("[ChatService] FormData entries:",{chatId:o.id,content:n}),await we.post("/messages/",l,{headers:{"Content-Type":"multipart/form-data"}}),console.log("[ChatService] Message sent to existing DM:",o.id),o}if(!o&&n){console.log("[ChatService] Creating new DM conversation with user:",t);const l=new FormData;l.append("receiverId",t),l.append("content",n),console.log("[ChatService] FormData entries for new DM:",{receiverId:t,content:n});const u=await we.post("/messages/",l,{headers:{"Content-Type":"multipart/form-data"}});console.log("[ChatService] Message sent to new DM, conversation auto-created. Response:",u);const h=(await Fe.getAllChats()).find(m=>m.type==="dm"&&m.members?.some(g=>g.id===t||g.userId===t));return console.log("[ChatService] Newly created DM:",h?.id||"NOT FOUND"),h}return console.log("[ChatService] No action taken (no message to send)"),o}catch(i){throw console.error("[ChatService] Error in createOrGetDM:",i),i}}},VT=Object.freeze(Object.defineProperty({__proto__:null,chatService:Fe},Symbol.toStringTag,{value:"Module"})),Rb={"":"Like","":"Love","":"Laugh","":"Sad","":"Angry"},HT={Like:"",Love:"",Laugh:"",Sad:"",Angry:""},FT=[{emoji:"",type:"Like",label:"Like"},{emoji:"",type:"Love",label:"Love"},{emoji:"",type:"Laugh",label:"Laugh"},{emoji:"",type:"Sad",label:"Sad"},{emoji:"",type:"Angry",label:"Angry"}],Pa={sendMessage:async t=>{try{console.log("[MessageService] sendMessage called"),console.log("[MessageService] FormData entries:");for(const[i,o]of t.entries())o instanceof File?console.log(`  ${i}: File(${o.name}, ${o.size} bytes, ${o.type})`):console.log(`  ${i}: ${o}`);const n=await we.post("/messages",t,{headers:{"Content-Type":"multipart/form-data"}});return console.log("[MessageService] Response:",n.data),n.data?.data||n.data}catch(n){throw console.error("[MessageService] Error sending message:",n),n}},editMessage:async(t,n)=>{const i=new FormData;i.append("Content",n);const o=await we.put(`/messages/${t}`,i,{headers:{"Content-Type":"multipart/form-data"}});return o.data?.data||o.data},deleteMessage:async t=>{const n=await we.delete(`/messages/${t}`);return n.data?.data||n.data},toggleReaction:async(t,n)=>{const i=await we.post(`/messages/${t}/reactions/${n}`);return i.data?.data??i.data},toggleReactionByEmoji:async(t,n)=>{const i=Rb[n];if(!i)throw new Error(`Unknown emoji: ${n}`);return Pa.toggleReaction(t,i)},getReactions:async t=>{const n=await we.get(`/messages/${t}/reactions`);return n.data?.data||n.data||[]},pinMessage:async t=>{const n=await we.post(`/messages/${t}/pin`);return n.data?.data||n.data},unpinMessage:async t=>{const n=await we.post(`/messages/${t}/unpin`);return n.data?.data||n.data},getPinnedMessages:async t=>{const n=await we.get(`/messages/pinned/${t}`);return n.data?.data||n.data}},ic=Object.freeze(Object.defineProperty({__proto__:null,AVAILABLE_REACTIONS:FT,EMOJI_TO_REACTION_TYPE:Rb,REACTION_TYPE_TO_EMOJI:HT,messageService:Pa},Symbol.toStringTag,{value:"Module"})),ze=Cc((t,n)=>({chats:[],currentChat:null,messages:[],pinnedMessages:new Map,chatPermissions:new Map,isLoadingChats:!1,isLoadingMessages:!1,isLoadingPinned:!1,permissionsLoading:!1,error:null,typingUsers:new Map,onlineUsers:new Map,userLastSeen:new Map,blockedByUsers:new Set,usersYouBlocked:new Set,loadChats:async()=>{t({isLoadingChats:!0,error:null});try{const i=await Fe.getAllChats();console.log("[ChatStore] Chats from API (already normalized):",i),console.log("[ChatStore] Sample chat participantsCount:",i[0]?.participantsCount,i[0]?.name),t({chats:i,isLoadingChats:!1})}catch(i){const o=Ue(i,"Failed to load chats");console.error("[ChatStore] Error loading chats:",i),t({error:o,isLoadingChats:!1})}},setCurrentChat:i=>{console.log("[ChatStore] setCurrentChat called with:",{chatId:i?.id,chatName:i?.name,participantsCount:i?.participantsCount,membersLength:i?.members?.length}),t({currentChat:i})},setMessages:i=>{t({messages:i})},loadMessages:async(i,o=1)=>{t({isLoadingMessages:!0,error:null});try{const{chatService:l}=await ht(async()=>{const{chatService:f}=await Promise.resolve().then(()=>VT);return{chatService:f}},void 0),u=await l.getChat(i);t({messages:u.messages||[],isLoadingMessages:!1})}catch(l){const u=Ue(l,"Failed to load messages");t({error:u,isLoadingMessages:!1})}},sendMessage:async(i,o,l,u)=>{t({error:null});try{if(u){const f=new FormData;i&&f.append("chatId",i),o&&f.append("receiverId",o),l&&f.append("content",l),f.append("file",u);const h=await Pa.sendMessage(f);t(m=>({messages:[...m.messages,h]}))}else await(await ht(()=>Promise.resolve().then(()=>tp),void 0).then(h=>h.signalRService)).sendMessage(i,l,o||void 0,null)}catch(f){const h=Ue(f,"Failed to send message");t({error:h})}},editMessage:async(i,o)=>{t({error:null});try{const l=await Pa.editMessage(i,o);t(u=>({messages:u.messages.map(f=>f.messageId===i?l:f)}))}catch(l){const u=Ue(l,"Failed to edit message");t({error:u})}},deleteMessage:async i=>{t({error:null});try{await Pa.deleteMessage(i),t(o=>({messages:o.messages.filter(l=>l.messageId!==i)}))}catch(o){const l=Ue(o,"Failed to delete message");t({error:l})}},toggleReaction:async(i,o)=>{t({error:null});try{return await Pa.toggleReactionByEmoji(i,o)}catch(l){const u=Ue(l,"Failed to toggle reaction");return t({error:u}),!1}},clearError:()=>t({error:null}),loadPinnedMessages:async i=>{t({isLoadingPinned:!0});try{const o=await Pa.getPinnedMessages(i);t(l=>{const u=new Map(l.pinnedMessages);return u.set(i,o||[]),{pinnedMessages:u,isLoadingPinned:!1}})}catch(o){console.error("[ChatStore] Error loading pinned messages:",o),t({isLoadingPinned:!1})}},pinMessage:async i=>{try{await Pa.pinMessage(i)}catch(o){const l=Ue(o,"Failed to pin message");throw t({error:l}),o}},unpinMessage:async i=>{try{await Pa.unpinMessage(i)}catch(o){const l=Ue(o,"Failed to unpin message");throw t({error:l}),o}},getPinnedMessages:i=>n().pinnedMessages.get(i)||[],loadPermissions:async i=>{const{user:o}=xt.getState();if(console.log("[loadPermissions] Called with:",{chatId:i,userId:o?.id,username:o?.username}),!o||!i){console.log("[loadPermissions] Early return - no user or chatId");return}t({permissionsLoading:!0});try{const{permissionService:l}=await ht(async()=>{const{permissionService:m}=await import("./permission.service-mWIygohH.js");return{permissionService:m}},__vite__mapDeps([0,1,2]));console.log("[loadPermissions] Calling API: GET /permissions/",i,"/user/",o.id);const u=await l.getUserPermissions(i,o.id);console.log("[loadPermissions] API response:",u);const f=u?.permissions||u||[],h=Array.isArray(f)?f.map(m=>m.permissionName||m.name||m):[];console.log("[ChatStore] Loaded permissions for chat",i,":",h),t(m=>({chatPermissions:new Map(m.chatPermissions).set(i,h),permissionsLoading:!1}))}catch(l){console.error("[ChatStore] Failed to load permissions:",l),t(u=>({chatPermissions:new Map(u.chatPermissions).set(i,[]),permissionsLoading:!1}))}},hasPermission:(i,o)=>{const{currentChat:l,chatPermissions:u}=n(),{user:f}=xt.getState();if(console.log("[hasPermission] Checking permission:",{chatId:i,permission:o,currentChatId:l?.id,currentChatType:l?.type,userId:f?.id,createdById:l?.createdById,membersCount:l?.members?.length}),l?.type==="dm")return["SendMessage","PinMessages"].includes(o)?(console.log("[hasPermission] DM chat - allowing:",o),!0):!1;if(l&&f&&l.createdById===f.id)return console.log("[hasPermission] User is chat creator - granting all permissions"),!0;if(l&&f&&l.members){const g=l.members.find(x=>x.userId===f.id);console.log("[hasPermission] Current member:",{found:!!g,memberId:g?.userId,role:g?.role});const v=g?.role?.toLowerCase();if(v==="admin"||v==="owner")return console.log("[hasPermission] User has admin/owner role - granting all permissions"),!0}const h=u.get(i)||[],m=h.includes(o);return console.log("[hasPermission] Checking cached permissions:",{cachedPermissions:h,hasPermission:m}),m},clearPermissions:i=>{t(i?o=>{const l=new Map(o.chatPermissions);return l.delete(i),{chatPermissions:l}}:{chatPermissions:new Map})},grantPermission:(i,o)=>{console.log("[ChatStore] Granting permission:",{chatId:i,permissionName:o}),t(l=>{const u=new Map(l.chatPermissions),f=u.get(i)||[];return f.includes(o)||u.set(i,[...f,o]),{chatPermissions:u}})},revokePermission:(i,o)=>{console.log("[ChatStore] Revoking permission:",{chatId:i,permissionName:o}),t(l=>{const u=new Map(l.chatPermissions),f=u.get(i)||[];return u.set(i,f.filter(h=>h!==o)),{chatPermissions:u}})},isUserOnline:i=>n().onlineUsers.get(i)||!1,getUserLastSeen:i=>n().userLastSeen.get(i),getOnlineMembersCount:i=>{const o=n().chats.find(f=>f.id===i);if(!o||!o.members)return 0;let l=0;const u=n().onlineUsers;for(const f of o.members)u.get(f.userId)&&l++;return l},setInitialPresenceStates:i=>{console.log("[ChatStore] Setting initial presence states for",Object.keys(i).length,"users"),console.log("[ChatStore] Raw presence states:",i);const o=new Map,l=new Map;Object.entries(i).forEach(([u,f])=>{console.log(`[ChatStore] Processing user ${u}, state:`,f,"type:",typeof f),typeof f=="boolean"?(o.set(u,f),console.log(`[ChatStore] Set user ${u} to ${f?"online":"offline"}`)):(o.set(u,f.isOnline),f.lastSeen&&l.set(u,f.lastSeen),console.log(`[ChatStore] Set user ${u} to ${f.isOnline?"online":"offline"}, lastSeen: ${f.lastSeen||"none"}`))}),t({onlineUsers:o,userLastSeen:l}),console.log("[ChatStore] Presence states initialized:",{online:Array.from(o.entries()).filter(([u,f])=>f).length,total:o.size,onlineUserIds:Array.from(o.entries()).filter(([u,f])=>f).map(([u])=>u)})},handleReceiveMessage:i=>{console.log("[ChatStore] Received message:",i);const o=n(),l=xt.getState().user?.id;if(o.currentChat&&i.chatId===o.currentChat.id&&!o.messages.some(f=>f.messageId===i.messageId)){const f={messageId:i.messageId,chatId:i.chatId,senderId:i.senderId,senderUsername:i.senderUsername||"Unknown",senderAvatarUrl:i.senderAvatarUrl,content:i.content,fileUrl:i.fileUrl,replyId:i.replyId,sentAt:i.sentAt,isSeen:i.isSeen??!1,seenAt:i.seenAt,isNotificated:!1,notificationId:"",messageReactions:[],isCurrentUser:i.senderId===l};t({messages:[...o.messages,f]}),console.log("[ChatStore] Added new message to state, isCurrentUser:",f.isCurrentUser)}n().loadChats()},handleMessageEdited:i=>{console.log("[ChatStore] Message edited:",i),t(o=>({messages:o.messages.map(l=>l.messageId===i.messageId?{...l,content:i.content}:l)}))},handleMessageDeleted:i=>{console.log("[ChatStore] Message deleted:",i),t(o=>({messages:o.messages.filter(l=>l.messageId!==i.messageId)}))},handleReactionAdded:i=>{console.log("[ChatStore] Reaction added event received:",i);const o=n();console.log("[ChatStore] Current messages count:",o.messages.length),console.log("[ChatStore] Looking for messageId:",i.messageId);const l=o.messages.find(u=>u.messageId===i.messageId);console.log("[ChatStore] Found message:",l?"YES":"NO"),l&&(t(u=>({messages:u.messages.map(f=>f.messageId===i.messageId?{...f,messageReactions:[...f.messageReactions||[],{reactionType:i.reactionType,userId:i.userId,userName:""}]}:f)})),console.log("[ChatStore] Reaction added to message"))},handleReactionRemoved:i=>{console.log("[ChatStore] Reaction removed:",i),t(o=>({messages:o.messages.map(l=>l.messageId===i.messageId?{...l,messageReactions:(l.messageReactions||[]).filter(u=>!(u.userId===i.userId&&u.reactionType===i.reactionType))}:l)}))},handleUserOnline:i=>{console.log("[ChatStore] User online:",i),t(o=>{const l=new Map(o.onlineUsers);l.set(i.userId,!0);const u=new Map(o.userLastSeen);return u.delete(i.userId),{onlineUsers:l,userLastSeen:u,chats:o.chats.map(f=>f.members?.some(m=>m.userId===i.userId)?{...f,isOnline:f.type==="dm"?!0:f.isOnline,members:f.members?.map(m=>m.userId===i.userId?{...m,user:{...m.user,onlineStatus:"online",lastSeen:""}}:m)}:f)}})},handleUserOffline:i=>{console.log("[ChatStore] User offline:",i),t(o=>{const l=new Map(o.onlineUsers);l.set(i.userId,!1);const u=new Map(o.userLastSeen);return i.lastSeen&&u.set(i.userId,i.lastSeen),{onlineUsers:l,userLastSeen:u,chats:o.chats.map(f=>f.members?.some(m=>m.userId===i.userId)?{...f,isOnline:f.type==="dm"?!1:f.isOnline,members:f.members?.map(m=>m.userId===i.userId?{...m,user:{...m.user,onlineStatus:"offline",lastSeen:i.lastSeen}}:m)}:f)}})},handleUserTyping:i=>{console.log("[ChatStore] User typing:",i),t(o=>{const l=new Map(o.typingUsers);return l.set(`${i.chatId}-${i.userId}`,{userId:i.userId,timestamp:Date.now()}),{typingUsers:l}}),setTimeout(()=>{t(o=>{const l=new Map(o.typingUsers);return l.delete(`${i.chatId}-${i.userId}`),{typingUsers:l}})},3e3)},handleUserStoppedTyping:i=>{console.log("[ChatStore] User stopped typing:",i),t(o=>{const l=new Map(o.typingUsers);return l.delete(`${i.chatId}-${i.userId}`),{typingUsers:l}})},handleMessagePinned:i=>{console.log("[ChatStore] Message pinned:",i),t(o=>({messages:o.messages.map(l=>l.messageId===i.messageId?{...l,isPinned:!0,pinnedAt:i.pinnedAt,pinnedById:i.pinnedById,pinnedByUsername:i.pinnedByUsername}:l)})),n().loadPinnedMessages(i.chatId)},handleMessageUnpinned:i=>{console.log("[ChatStore] Message unpinned:",i),t(o=>({messages:o.messages.map(l=>l.messageId===i.messageId?{...l,isPinned:!1,pinnedAt:void 0,pinnedById:void 0,pinnedByUsername:void 0}:l)})),t(o=>{const l=new Map(o.pinnedMessages),u=l.get(i.chatId)||[];return l.set(i.chatId,u.filter(f=>f.messageId!==i.messageId)),{pinnedMessages:l}})},handleAddedToChat:i=>{console.log("[ChatStore] Added to chat:",i),n().loadChats()},handleNewConversation:i=>{console.log("[ChatStore] New conversation:",i),n().loadChats()},handleConversationCreated:async i=>{console.log("[ChatStore] Conversation created (sender notification):",i);const l=n().currentChat;if(l&&l.id.startsWith("temp_dm_")&&l.id.includes(i.receiverId)){console.log("[ChatStore] Switching from temp chat to real conversation:",i.conversationId),await n().loadChats();const f=n().chats.find(h=>h.id===i.conversationId);if(f){console.log("[ChatStore] Found new conversation, switching to it:",f.id),t({currentChat:f});try{await(await ht(()=>Promise.resolve().then(()=>tp),void 0).then(m=>m.signalRService)).joinChat(f.id)}catch(h){console.error("[ChatStore] Failed to join new chat:",h)}}}else n().loadChats()},handlePermissionGranted:i=>{console.log("[ChatStore] Permission granted:",i);const{user:o}=xt.getState();o&&i.userId===o.id&&t(l=>{const u=new Map(l.chatPermissions),f=u.get(i.chatId)||[];return f.includes(i.permissionName)||u.set(i.chatId,[...f,i.permissionName]),{chatPermissions:u}})},handlePermissionRevoked:i=>{console.log("[ChatStore] Permission revoked:",i);const{user:o}=xt.getState();o&&i.userId===o.id&&t(l=>{const u=new Map(l.chatPermissions),f=u.get(i.chatId)||[];return u.set(i.chatId,f.filter(h=>h!==i.permissionName)),{chatPermissions:u}})},handleAllPermissionsRevoked:i=>{console.log("[ChatStore] All permissions revoked:",i);const{user:o}=xt.getState();o&&i.userId===o.id&&t(l=>{const u=new Map(l.chatPermissions);return u.set(i.chatId,[]),{chatPermissions:u}})},handleUserBlockedYou:i=>{console.log("[ChatStore] User blocked you:",i),t(o=>{const l=new Set(o.blockedByUsers);return l.add(i.blockerId),{blockedByUsers:l}})},handleYouBlockedUser:i=>{console.log("[ChatStore] You blocked user:",i),i.blockedUserId&&t(o=>{const l=new Set(o.usersYouBlocked);return l.add(i.blockedUserId),{usersYouBlocked:l}})},handleUserUnblockedYou:i=>{console.log("[ChatStore] User unblocked you:",i),t(o=>{const l=new Set(o.blockedByUsers);return l.delete(i.unblockerId),{blockedByUsers:l}})},handleYouUnblockedUser:i=>{console.log("[ChatStore] You unblocked user:",i),i.unblockedUserId&&t(o=>{const l=new Set(o.usersYouBlocked);return l.delete(i.unblockedUserId),{usersYouBlocked:l}})},handleChatDeleted:i=>{console.log("[ChatStore] Chat deleted:",i);const o=n();t({chats:o.chats.filter(l=>l.id!==i.chatId),currentChat:o.currentChat?.id===i.chatId?null:o.currentChat,messages:o.currentChat?.id===i.chatId?[]:o.messages}),t(l=>{const u=new Map(l.chatPermissions);return u.delete(i.chatId),{chatPermissions:u}})},handleRemovedFromChat:i=>{console.log("[ChatStore] Removed from chat:",i);const o=n();t({chats:o.chats.filter(l=>l.id!==i.chatId),currentChat:o.currentChat?.id===i.chatId?null:o.currentChat,messages:o.currentChat?.id===i.chatId?[]:o.messages}),t(l=>{const u=new Map(l.chatPermissions);return u.delete(i.chatId),{chatPermissions:u}})},handleMessagesMarkedSeen:i=>{console.log("[ChatStore] Messages marked as seen:",i);const o=n();o.currentChat&&i.chatId===o.currentChat.id&&t({messages:o.messages.map(u=>i.messageIds.includes(u.messageId)?{...u,isSeen:!0,seenAt:i.seenAt}:u)});const l=xt.getState().user?.id;l&&i.seenByUserId===l&&t(u=>({chats:u.chats.map(f=>f.id===i.chatId?{...f,unreadCount:Math.max(0,(f.unreadCount||0)-i.messageIds.length)}:f),currentChat:u.currentChat?.id===i.chatId?{...u.currentChat,unreadCount:Math.max(0,(u.currentChat.unreadCount||0)-i.messageIds.length)}:u.currentChat}))},resetUnreadCount:i=>{console.log("[ChatStore] Resetting unread count for chat:",i),t(o=>({chats:o.chats.map(l=>l.id===i?{...l,unreadCount:0}:l),currentChat:o.currentChat?.id===i?{...o.currentChat,unreadCount:0}:o.currentChat}))},isBlockedBy:i=>n().blockedByUsers.has(i),hasBlocked:i=>n().usersYouBlocked.has(i),addBlockedUser:i=>{console.log("[ChatStore] Adding blocked user:",i),t(o=>{const l=new Set(o.usersYouBlocked);return l.add(i),{usersYouBlocked:l}})},removeBlockedUser:i=>{console.log("[ChatStore] Removing blocked user:",i),t(o=>{const l=new Set(o.usersYouBlocked);return l.delete(i),{usersYouBlocked:l}})}})),qT=()=>{const t=localStorage.getItem("simpchat-theme");return t==="dark"||t==="light"?t:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},Qd=t=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("simpchat-theme",t)},GT=Cc(t=>{const n=qT();return Qd(n),{theme:n,toggleTheme:()=>{t(i=>{const o=i.theme==="light"?"dark":"light";return Qd(o),{theme:o}})},setTheme:i=>{Qd(i),t({theme:i})}}}),$T="_dashboard_1003y_106",YT="_gradientFlow_1003y_1",XT="_darkMode_1003y_137",WT="_leftPanel_1003y_151",KT="_panelGlow_1003y_1",QT="_panelHeader_1003y_172",ZT="_title_1003y_203",JT="_menuButton_1003y_226",ej="_searchBar_1003y_261",tj="_searchInput_1003y_266",nj="_searchResults_1003y_296",aj="_slideDown_1003y_1",ij="_searchResultItem_1003y_330",sj="_searchResultAvatar_1003y_356",oj="_searchResultInfo_1003y_372",rj="_searchResultName_1003y_377",lj="_searchResultType_1003y_390",cj="_searchResultTypeIcon_1003y_400",uj="_searchLoading_1003y_407",dj="_searchNoResults_1003y_408",fj="_chatList_1003y_421",pj="_emptyState_1003y_455",hj="_loading_1003y_456",mj="_chatItem_1003y_469",gj="_active_1003y_483",yj="_chatAvatar_1003y_511",vj="_avatarFallback_1003y_537",xj="_onlineIndicator_1003y_548",bj="_chatInfo_1003y_564",Sj="_chatHeader_1003y_571",_j="_chatNameWithType_1003y_578",wj="_headerRight_1003y_586",Cj="_chatName_1003y_578",Tj="_chatTypeIcon_1003y_606",jj="_iconDm_1003y_623",Aj="_iconGroup_1003y_634",kj="_iconChannel_1003y_645",Ej="_timestamp_1003y_655",Mj="_chatPreview_1003y_666",Rj="_unreadBadge_1003y_679",Dj="_unreadPulse_1003y_1",Nj="_chatHeader2_1003y_703",Uj="_headerInfo_1003y_720",zj="_headerTitle_1003y_727",Oj="_chatTitle_1003y_733",Bj="_headerChatType_1003y_750",Lj="_headerActions_1003y_760",Ij="_headerButton_1003y_766",Pj="_messagesContainer_1003y_804",Vj="_noMessages_1003y_838",Hj="_welcomeScreen_1003y_850",Fj="_welcomeIcon_1003y_865",qj="_welcomeText_1003y_871",Gj="_welcomeSubtext_1003y_882",$j="_inputArea_1003y_892",Yj="_inputWrapper_1003y_906",Xj="_messageInput_1003y_912",Wj="_sendButton_1003y_952",Kj="_modalOverlay_1003y_999",Qj="_modalFadeIn_1003y_1",Zj="_modal_1003y_999",Jj="_modalSlideUp_1003y_1",eA="_modalHeader_1003y_1031",tA="_closeButton_1003y_1054",nA="_modalBody_1003y_1084",aA="_modalFooter_1003y_1121",iA="_formGroup_1003y_1133",sA="_formInput_1003y_1149",oA="_primaryButton_1003y_1179",rA="_secondaryButton_1003y_1205",lA="_profileContent_1003y_1235",cA="_profileInfo_1003y_1241",uA="_avatarSection_1003y_1247",dA="_largeAvatar_1003y_1253",fA="_profileField_1003y_1274",pA="_loadingState_1003y_1305",hA="_menuDropdown_1003y_1312",mA="_menuItem_1003y_1344",gA="_menuDivider_1003y_1385",yA="_mainContent_1003y_1396",vA="_chatHeaderBar_1003y_1419",xA="_headerLeft_1003y_1434",bA="_headerAvatar_1003y_1441",SA="_headerStatus_1003y_1493",_A="_online_1003y_548",wA="_messageGroup_1003y_1513",CA="_ownMessage_1003y_1521",TA="_messageBubble_1003y_1525",jA="_otherMessage_1003y_1531",AA="_senderAvatar_1003y_1546",kA="_senderName_1003y_1584",EA="_messageContent_1003y_1592",MA="_messageTime_1003y_1599",RA="_attachment_1003y_1607",DA="_reactionsContainer_1003y_1626",NA="_reaction_1003y_1626",UA="_inputField_1003y_1663",zA="_emojiButton_1003y_1700",OA="_attachButton_1003y_1701",BA="_rightPanel_1003y_1731",LA="_chatInfoPanel_1003y_1772",IA="_chatInfoHeader_1003y_1779",PA="_chatInfoAvatar_1003y_1789",VA="_chatInfoName_1003y_1810",HA="_chatInfoType_1003y_1821",FA="_editChatButton_1003y_1831",qA="_infoContent_1003y_1850",GA="_infoSection_1003y_1856",$A="_infoLabel_1003y_1860",YA="_memberList_1003y_1873",XA="_memberItem_1003y_1879",WA="_memberAvatar_1003y_1895",KA="_memberInfo_1003y_1916",QA="_memberName_1003y_1921",ZA="_memberRole_1003y_1934",JA="_memberStatus_1003y_1944",e2="_emptyScreen_1003y_1954",t2="_emptyIcon_1003y_1964",n2="_emptyActions_1003y_1991",a2="_actionButton_1003y_1997",i2="_userSection_1003y_2020",s2="_userAvatar_1003y_2040",o2="_userInfo_1003y_2061",r2="_username_1003y_2066",l2="_userStatus_1003y_2080",c2="_logoutButton_1003y_2090",u2="_hidden_1003y_2122",d2="_truncate_1003y_2126",f2="_mobileMenuButton_1003y_2133",p2="_mobileOverlay_1003y_2138",h2="_mobileOpen_1003y_2190",m2="_borderGlow_1003y_1",g2="_chatItemHoverGlow_1003y_1",y2="_buttonPulse_1003y_1",v2="_inputFocusGlow_1003y_1",x2="_subtleFloat_1003y_1",b2="_messageSlideIn_1003y_1",S2="_shimmer_1003y_1",M={dashboard:$T,gradientFlow:YT,darkMode:XT,leftPanel:WT,panelGlow:KT,panelHeader:QT,title:ZT,menuButton:JT,searchBar:ej,searchInput:tj,searchResults:nj,slideDown:aj,searchResultItem:ij,searchResultAvatar:sj,searchResultInfo:oj,searchResultName:rj,searchResultType:lj,searchResultTypeIcon:cj,searchLoading:uj,searchNoResults:dj,chatList:fj,emptyState:pj,loading:hj,chatItem:mj,active:gj,chatAvatar:yj,avatarFallback:vj,onlineIndicator:xj,chatInfo:bj,chatHeader:Sj,chatNameWithType:_j,headerRight:wj,chatName:Cj,chatTypeIcon:Tj,iconDm:jj,iconGroup:Aj,iconChannel:kj,timestamp:Ej,chatPreview:Mj,unreadBadge:Rj,unreadPulse:Dj,chatHeader2:Nj,headerInfo:Uj,headerTitle:zj,chatTitle:Oj,headerChatType:Bj,headerActions:Lj,headerButton:Ij,messagesContainer:Pj,noMessages:Vj,welcomeScreen:Hj,welcomeIcon:Fj,welcomeText:qj,welcomeSubtext:Gj,inputArea:$j,inputWrapper:Yj,messageInput:Xj,sendButton:Wj,modalOverlay:Kj,modalFadeIn:Qj,modal:Zj,modalSlideUp:Jj,modalHeader:eA,closeButton:tA,modalBody:nA,modalFooter:aA,formGroup:iA,formInput:sA,primaryButton:oA,secondaryButton:rA,profileContent:lA,profileInfo:cA,avatarSection:uA,largeAvatar:dA,profileField:fA,loadingState:pA,menuDropdown:hA,menuItem:mA,menuDivider:gA,mainContent:yA,chatHeaderBar:vA,headerLeft:xA,headerAvatar:bA,headerStatus:SA,online:_A,messageGroup:wA,ownMessage:CA,messageBubble:TA,otherMessage:jA,senderAvatar:AA,senderName:kA,messageContent:EA,messageTime:MA,attachment:RA,reactionsContainer:DA,reaction:NA,inputField:UA,emojiButton:zA,attachButton:OA,rightPanel:BA,chatInfoPanel:LA,chatInfoHeader:IA,chatInfoAvatar:PA,chatInfoName:VA,chatInfoType:HA,editChatButton:FA,infoContent:qA,infoSection:GA,infoLabel:$A,memberList:YA,memberItem:XA,memberAvatar:WA,memberInfo:KA,memberName:QA,memberRole:ZA,memberStatus:JA,emptyScreen:e2,emptyIcon:t2,emptyActions:n2,actionButton:a2,userSection:i2,userAvatar:s2,userInfo:o2,username:r2,userStatus:l2,logoutButton:c2,hidden:u2,truncate:d2,mobileMenuButton:f2,mobileOverlay:p2,mobileOpen:h2,borderGlow:m2,chatItemHoverGlow:g2,buttonPulse:y2,inputFocusGlow:v2,subtleFloat:x2,messageSlideIn:b2,shimmer:S2},ta={getCurrentUser:async()=>{const t=await we.get("/users/me"),n=t.data?.data||t.data;return Df(n)},updateProfile:async t=>(await we.put("/users/me",t,{headers:{"Content-Type":"multipart/form-data"}}),ta.getCurrentUser()),searchUsers:async t=>{const n=await we.get(`/users/search/${encodeURIComponent(t)}`),i=n.data?.data||n.data;return hv(i)},getUserProfile:async t=>{const n=await we.get(`/users/${t}`);console.log("[UserService] getUserProfile raw response:",n.data);const i=n.data?.data||n.data;return console.log("[UserService] getUserProfile rawUser:",i),console.log("[UserService] getUserProfile description:",i?.description,i?.Description),Df(i)},updateLastSeen:async()=>{const t=await we.put("/users/last-seen");return t.data?.data||t.data},getAllUsers:async()=>{const t=await we.get("/users"),n=t.data?.data||t.data;return hv(n)},deleteUser:async t=>{const n=await we.delete(`/users/${t}`);return n.data?.data||n.data},blockUser:async t=>{const n=await we.post(`/users/blocks/${t}`);return n.data?.data||n.data},unblockUser:async t=>{const n=await we.delete(`/users/blocks/${t}`);return n.data?.data||n.data},getBlockedUsers:async()=>{const t=await we.get("/users/blocks");return t.data?.data||t.data||[]},getBlockStatus:async t=>(await we.get(`/users/blocks/${t}/status`)).data?.isBlocked||!1,getMutualBlockStatus:async t=>{const n=await we.get(`/users/blocks/${t}/mutual-status`);return{iBlockedThem:n.data?.iBlockedThem||!1,theyBlockedMe:n.data?.theyBlockedMe||!1}}},Hn=Object.freeze(Object.defineProperty({__proto__:null,userService:ta},Symbol.toStringTag,{value:"Module"})),_2="_container_nzeaj_52",w2="_toast_nzeaj_64",C2="_slideIn_nzeaj_1",T2="_glowPulse_nzeaj_1",j2="_exit_nzeaj_84",A2="_slideOut_nzeaj_1",k2="_success_nzeaj_89",E2="_error_nzeaj_97",M2="_warning_nzeaj_105",R2="_info_nzeaj_113",D2="_iconWrapper_nzeaj_120",N2="_iconBounce_nzeaj_1",U2="_message_nzeaj_134",z2="_closeBtn_nzeaj_143",O2="_progressBar_nzeaj_168",B2="_progressShrink_nzeaj_1",Li={container:_2,toast:w2,slideIn:C2,glowPulse:T2,exit:j2,slideOut:A2,success:k2,error:E2,warning:M2,info:R2,iconWrapper:D2,iconBounce:N2,message:U2,closeBtn:z2,progressBar:O2,progressShrink:B2},L2=({toast:t,onClose:n})=>{const[i,o]=w.useState(!1);w.useEffect(()=>{const f=t.duration||4e3,h=setTimeout(()=>{o(!0)},f-300),m=setTimeout(()=>{n(t.id)},f);return()=>{clearTimeout(h),clearTimeout(m)}},[t.id,t.duration,n]);const l=()=>{o(!0),setTimeout(()=>n(t.id),300)},u=()=>{switch(t.type){case"success":return c.jsx(q_,{size:22});case"error":return c.jsx(F_,{size:22});case"warning":return c.jsx(mi,{size:22});case"info":return c.jsx(H_,{size:22})}};return c.jsxs("div",{className:`${Li.toast} ${Li[t.type]} ${i?Li.exit:""}`,children:[c.jsx("div",{className:Li.iconWrapper,children:u()}),c.jsx("span",{className:Li.message,children:t.message}),c.jsx("button",{onClick:l,"aria-label":"Close",style:{background:"rgba(255, 255, 255, 0.15)",border:"none",borderRadius:"6px",color:"#ffffff",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"8px",fontSize:"16px",fontWeight:"bold",lineHeight:1},children:""}),c.jsx("div",{className:Li.progressBar,style:{animationDuration:`${t.duration||4e3}ms`}})]})},I2=({toasts:t,onClose:n})=>c.jsx("div",{className:Li.container,children:t.map(i=>c.jsx(L2,{toast:i,onClose:n},i.id))});class P2{toasts=[];listeners=[];subscribe(n){return this.listeners.push(n),()=>{this.listeners=this.listeners.filter(i=>i!==n)}}notify(){this.listeners.forEach(n=>n([...this.toasts]))}show(n,i,o){const l=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,u={id:l,type:n,message:i,duration:o};return this.toasts.push(u),this.notify(),l}success(n,i){return this.show("success",n,i)}error(n,i){return this.show("error",n,i||5e3)}warning(n,i){return this.show("warning",n,i)}info(n,i){return this.show("info",n,i)}remove(n){this.toasts=this.toasts.filter(i=>i.id!==n),this.notify()}getToasts(){return[...this.toasts]}}const Hs=new P2,oe={success:(t,n)=>Hs.success(t,n),error:(t,n)=>Hs.error(t,n),warning:(t,n)=>Hs.warning(t,n),info:(t,n)=>Hs.info(t,n)},hp=w.createContext({});function mp(t){const n=w.useRef(null);return n.current===null&&(n.current=t()),n.current}const gp=typeof window<"u",Db=gp?w.useLayoutEffect:w.useEffect,Mc=w.createContext(null);function yp(t,n){t.indexOf(n)===-1&&t.push(n)}function vp(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}const Va=(t,n,i)=>i>n?n:i<t?t:i;let xp=()=>{};const Ha={},Nb=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Ub(t){return typeof t=="object"&&t!==null}const zb=t=>/^0[^.\s]+$/u.test(t);function bp(t){let n;return()=>(n===void 0&&(n=t()),n)}const aa=t=>t,V2=(t,n)=>i=>n(t(i)),Mr=(...t)=>t.reduce(V2),gr=(t,n,i)=>{const o=n-t;return o===0?1:(i-t)/o};class Sp{constructor(){this.subscriptions=[]}add(n){return yp(this.subscriptions,n),()=>vp(this.subscriptions,n)}notify(n,i,o){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](n,i,o);else for(let u=0;u<l;u++){const f=this.subscriptions[u];f&&f(n,i,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const va=t=>t*1e3,na=t=>t/1e3;function Ob(t,n){return n?t*(1e3/n):0}const Bb=(t,n,i)=>(((1-3*i+3*n)*t+(3*i-6*n))*t+3*n)*t,H2=1e-7,F2=12;function q2(t,n,i,o,l){let u,f,h=0;do f=n+(i-n)/2,u=Bb(f,o,l)-t,u>0?i=f:n=f;while(Math.abs(u)>H2&&++h<F2);return f}function Rr(t,n,i,o){if(t===n&&i===o)return aa;const l=u=>q2(u,0,1,t,i);return u=>u===0||u===1?u:Bb(l(u),n,o)}const Lb=t=>n=>n<=.5?t(2*n)/2:(2-t(2*(1-n)))/2,Ib=t=>n=>1-t(1-n),Pb=Rr(.33,1.53,.69,.99),_p=Ib(Pb),Vb=Lb(_p),Hb=t=>(t*=2)<1?.5*_p(t):.5*(2-Math.pow(2,-10*(t-1))),wp=t=>1-Math.sin(Math.acos(t)),Fb=Ib(wp),qb=Lb(wp),G2=Rr(.42,0,1,1),$2=Rr(0,0,.58,1),Gb=Rr(.42,0,.58,1),Y2=t=>Array.isArray(t)&&typeof t[0]!="number",$b=t=>Array.isArray(t)&&typeof t[0]=="number",X2={linear:aa,easeIn:G2,easeInOut:Gb,easeOut:$2,circIn:wp,circInOut:qb,circOut:Fb,backIn:_p,backInOut:Vb,backOut:Pb,anticipate:Hb},W2=t=>typeof t=="string",mv=t=>{if($b(t)){xp(t.length===4);const[n,i,o,l]=t;return Rr(n,i,o,l)}else if(W2(t))return X2[t];return t},Yl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function K2(t,n){let i=new Set,o=new Set,l=!1,u=!1;const f=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function m(v){f.has(v)&&(g.schedule(v),t()),v(h)}const g={schedule:(v,x=!1,S=!1)=>{const _=S&&l?i:o;return x&&f.add(v),_.has(v)||_.add(v),v},cancel:v=>{o.delete(v),f.delete(v)},process:v=>{if(h=v,l){u=!0;return}l=!0,[i,o]=[o,i],i.forEach(m),i.clear(),l=!1,u&&(u=!1,g.process(v))}};return g}const Q2=40;function Yb(t,n){let i=!1,o=!0;const l={delta:0,timestamp:0,isProcessing:!1},u=()=>i=!0,f=Yl.reduce((E,U)=>(E[U]=K2(u),E),{}),{setup:h,read:m,resolveKeyframes:g,preUpdate:v,update:x,preRender:S,render:C,postRender:_}=f,k=()=>{const E=Ha.useManualTiming?l.timestamp:performance.now();i=!1,Ha.useManualTiming||(l.delta=o?1e3/60:Math.max(Math.min(E-l.timestamp,Q2),1)),l.timestamp=E,l.isProcessing=!0,h.process(l),m.process(l),g.process(l),v.process(l),x.process(l),S.process(l),C.process(l),_.process(l),l.isProcessing=!1,i&&n&&(o=!1,t(k))},j=()=>{i=!0,o=!0,l.isProcessing||t(k)};return{schedule:Yl.reduce((E,U)=>{const P=f[U];return E[U]=(Q,ne=!1,W=!1)=>(i||j(),P.schedule(Q,ne,W)),E},{}),cancel:E=>{for(let U=0;U<Yl.length;U++)f[Yl[U]].cancel(E)},state:l,steps:f}}const{schedule:Ct,cancel:gi,state:cn,steps:Zd}=Yb(typeof requestAnimationFrame<"u"?requestAnimationFrame:aa,!0);let sc;function Z2(){sc=void 0}const Mn={now:()=>(sc===void 0&&Mn.set(cn.isProcessing||Ha.useManualTiming?cn.timestamp:performance.now()),sc),set:t=>{sc=t,queueMicrotask(Z2)}},Xb=t=>n=>typeof n=="string"&&n.startsWith(t),Wb=Xb("--"),J2=Xb("var(--"),Cp=t=>J2(t)?ek.test(t.split("/*")[0].trim()):!1,ek=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ro={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yr={...ro,transform:t=>Va(0,1,t)},Xl={...ro,default:1},lr=t=>Math.round(t*1e5)/1e5,Tp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tk(t){return t==null}const nk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,jp=(t,n)=>i=>!!(typeof i=="string"&&nk.test(i)&&i.startsWith(t)||n&&!tk(i)&&Object.prototype.hasOwnProperty.call(i,n)),Kb=(t,n,i)=>o=>{if(typeof o!="string")return o;const[l,u,f,h]=o.match(Tp);return{[t]:parseFloat(l),[n]:parseFloat(u),[i]:parseFloat(f),alpha:h!==void 0?parseFloat(h):1}},ak=t=>Va(0,255,t),Jd={...ro,transform:t=>Math.round(ak(t))},Hi={test:jp("rgb","red"),parse:Kb("red","green","blue"),transform:({red:t,green:n,blue:i,alpha:o=1})=>"rgba("+Jd.transform(t)+", "+Jd.transform(n)+", "+Jd.transform(i)+", "+lr(yr.transform(o))+")"};function ik(t){let n="",i="",o="",l="";return t.length>5?(n=t.substring(1,3),i=t.substring(3,5),o=t.substring(5,7),l=t.substring(7,9)):(n=t.substring(1,2),i=t.substring(2,3),o=t.substring(3,4),l=t.substring(4,5),n+=n,i+=i,o+=o,l+=l),{red:parseInt(n,16),green:parseInt(i,16),blue:parseInt(o,16),alpha:l?parseInt(l,16)/255:1}}const Nf={test:jp("#"),parse:ik,transform:Hi.transform},Dr=t=>({test:n=>typeof n=="string"&&n.endsWith(t)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${t}`}),pi=Dr("deg"),xa=Dr("%"),De=Dr("px"),sk=Dr("vh"),ok=Dr("vw"),gv={...xa,parse:t=>xa.parse(t)/100,transform:t=>xa.transform(t*100)},Fs={test:jp("hsl","hue"),parse:Kb("hue","saturation","lightness"),transform:({hue:t,saturation:n,lightness:i,alpha:o=1})=>"hsla("+Math.round(t)+", "+xa.transform(lr(n))+", "+xa.transform(lr(i))+", "+lr(yr.transform(o))+")"},Ft={test:t=>Hi.test(t)||Nf.test(t)||Fs.test(t),parse:t=>Hi.test(t)?Hi.parse(t):Fs.test(t)?Fs.parse(t):Nf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Hi.transform(t):Fs.transform(t),getAnimatableNone:t=>{const n=Ft.parse(t);return n.alpha=0,Ft.transform(n)}},rk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lk(t){return isNaN(t)&&typeof t=="string"&&(t.match(Tp)?.length||0)+(t.match(rk)?.length||0)>0}const Qb="number",Zb="color",ck="var",uk="var(",yv="${}",dk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vr(t){const n=t.toString(),i=[],o={color:[],number:[],var:[]},l=[];let u=0;const h=n.replace(dk,m=>(Ft.test(m)?(o.color.push(u),l.push(Zb),i.push(Ft.parse(m))):m.startsWith(uk)?(o.var.push(u),l.push(ck),i.push(m)):(o.number.push(u),l.push(Qb),i.push(parseFloat(m))),++u,yv)).split(yv);return{values:i,split:h,indexes:o,types:l}}function Jb(t){return vr(t).values}function e0(t){const{split:n,types:i}=vr(t),o=n.length;return l=>{let u="";for(let f=0;f<o;f++)if(u+=n[f],l[f]!==void 0){const h=i[f];h===Qb?u+=lr(l[f]):h===Zb?u+=Ft.transform(l[f]):u+=l[f]}return u}}const fk=t=>typeof t=="number"?0:Ft.test(t)?Ft.getAnimatableNone(t):t;function pk(t){const n=Jb(t);return e0(t)(n.map(fk))}const yi={test:lk,parse:Jb,createTransformer:e0,getAnimatableNone:pk};function ef(t,n,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(n-t)*6*i:i<1/2?n:i<2/3?t+(n-t)*(2/3-i)*6:t}function hk({hue:t,saturation:n,lightness:i,alpha:o}){t/=360,n/=100,i/=100;let l=0,u=0,f=0;if(!n)l=u=f=i;else{const h=i<.5?i*(1+n):i+n-i*n,m=2*i-h;l=ef(m,h,t+1/3),u=ef(m,h,t),f=ef(m,h,t-1/3)}return{red:Math.round(l*255),green:Math.round(u*255),blue:Math.round(f*255),alpha:o}}function hc(t,n){return i=>i>0?n:t}const kt=(t,n,i)=>t+(n-t)*i,tf=(t,n,i)=>{const o=t*t,l=i*(n*n-o)+o;return l<0?0:Math.sqrt(l)},mk=[Nf,Hi,Fs],gk=t=>mk.find(n=>n.test(t));function vv(t){const n=gk(t);if(!n)return!1;let i=n.parse(t);return n===Fs&&(i=hk(i)),i}const xv=(t,n)=>{const i=vv(t),o=vv(n);if(!i||!o)return hc(t,n);const l={...i};return u=>(l.red=tf(i.red,o.red,u),l.green=tf(i.green,o.green,u),l.blue=tf(i.blue,o.blue,u),l.alpha=kt(i.alpha,o.alpha,u),Hi.transform(l))},Uf=new Set(["none","hidden"]);function yk(t,n){return Uf.has(t)?i=>i<=0?t:n:i=>i>=1?n:t}function vk(t,n){return i=>kt(t,n,i)}function Ap(t){return typeof t=="number"?vk:typeof t=="string"?Cp(t)?hc:Ft.test(t)?xv:Sk:Array.isArray(t)?t0:typeof t=="object"?Ft.test(t)?xv:xk:hc}function t0(t,n){const i=[...t],o=i.length,l=t.map((u,f)=>Ap(u)(u,n[f]));return u=>{for(let f=0;f<o;f++)i[f]=l[f](u);return i}}function xk(t,n){const i={...t,...n},o={};for(const l in i)t[l]!==void 0&&n[l]!==void 0&&(o[l]=Ap(t[l])(t[l],n[l]));return l=>{for(const u in o)i[u]=o[u](l);return i}}function bk(t,n){const i=[],o={color:0,var:0,number:0};for(let l=0;l<n.values.length;l++){const u=n.types[l],f=t.indexes[u][o[u]],h=t.values[f]??0;i[l]=h,o[u]++}return i}const Sk=(t,n)=>{const i=yi.createTransformer(n),o=vr(t),l=vr(n);return o.indexes.var.length===l.indexes.var.length&&o.indexes.color.length===l.indexes.color.length&&o.indexes.number.length>=l.indexes.number.length?Uf.has(t)&&!l.values.length||Uf.has(n)&&!o.values.length?yk(t,n):Mr(t0(bk(o,l),l.values),i):hc(t,n)};function n0(t,n,i){return typeof t=="number"&&typeof n=="number"&&typeof i=="number"?kt(t,n,i):Ap(t)(t,n)}const _k=t=>{const n=({timestamp:i})=>t(i);return{start:(i=!0)=>Ct.update(n,i),stop:()=>gi(n),now:()=>cn.isProcessing?cn.timestamp:Mn.now()}},a0=(t,n,i=10)=>{let o="";const l=Math.max(Math.round(n/i),2);for(let u=0;u<l;u++)o+=Math.round(t(u/(l-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},mc=2e4;function kp(t){let n=0;const i=50;let o=t.next(n);for(;!o.done&&n<mc;)n+=i,o=t.next(n);return n>=mc?1/0:n}function wk(t,n=100,i){const o=i({...t,keyframes:[0,n]}),l=Math.min(kp(o),mc);return{type:"keyframes",ease:u=>o.next(l*u).value/n,duration:na(l)}}const Ck=5;function i0(t,n,i){const o=Math.max(n-Ck,0);return Ob(i-t(o),n-o)}const Nt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},nf=.001;function Tk({duration:t=Nt.duration,bounce:n=Nt.bounce,velocity:i=Nt.velocity,mass:o=Nt.mass}){let l,u,f=1-n;f=Va(Nt.minDamping,Nt.maxDamping,f),t=Va(Nt.minDuration,Nt.maxDuration,na(t)),f<1?(l=g=>{const v=g*f,x=v*t,S=v-i,C=zf(g,f),_=Math.exp(-x);return nf-S/C*_},u=g=>{const x=g*f*t,S=x*i+i,C=Math.pow(f,2)*Math.pow(g,2)*t,_=Math.exp(-x),k=zf(Math.pow(g,2),f);return(-l(g)+nf>0?-1:1)*((S-C)*_)/k}):(l=g=>{const v=Math.exp(-g*t),x=(g-i)*t+1;return-nf+v*x},u=g=>{const v=Math.exp(-g*t),x=(i-g)*(t*t);return v*x});const h=5/t,m=Ak(l,u,h);if(t=va(t),isNaN(m))return{stiffness:Nt.stiffness,damping:Nt.damping,duration:t};{const g=Math.pow(m,2)*o;return{stiffness:g,damping:f*2*Math.sqrt(o*g),duration:t}}}const jk=12;function Ak(t,n,i){let o=i;for(let l=1;l<jk;l++)o=o-t(o)/n(o);return o}function zf(t,n){return t*Math.sqrt(1-n*n)}const kk=["duration","bounce"],Ek=["stiffness","damping","mass"];function bv(t,n){return n.some(i=>t[i]!==void 0)}function Mk(t){let n={velocity:Nt.velocity,stiffness:Nt.stiffness,damping:Nt.damping,mass:Nt.mass,isResolvedFromDuration:!1,...t};if(!bv(t,Ek)&&bv(t,kk))if(t.visualDuration){const i=t.visualDuration,o=2*Math.PI/(i*1.2),l=o*o,u=2*Va(.05,1,1-(t.bounce||0))*Math.sqrt(l);n={...n,mass:Nt.mass,stiffness:l,damping:u}}else{const i=Tk(t);n={...n,...i,mass:Nt.mass},n.isResolvedFromDuration=!0}return n}function gc(t=Nt.visualDuration,n=Nt.bounce){const i=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:n}:t;let{restSpeed:o,restDelta:l}=i;const u=i.keyframes[0],f=i.keyframes[i.keyframes.length-1],h={done:!1,value:u},{stiffness:m,damping:g,mass:v,duration:x,velocity:S,isResolvedFromDuration:C}=Mk({...i,velocity:-na(i.velocity||0)}),_=S||0,k=g/(2*Math.sqrt(m*v)),j=f-u,D=na(Math.sqrt(m/v)),L=Math.abs(j)<5;o||(o=L?Nt.restSpeed.granular:Nt.restSpeed.default),l||(l=L?Nt.restDelta.granular:Nt.restDelta.default);let E;if(k<1){const P=zf(D,k);E=Q=>{const ne=Math.exp(-k*D*Q);return f-ne*((_+k*D*j)/P*Math.sin(P*Q)+j*Math.cos(P*Q))}}else if(k===1)E=P=>f-Math.exp(-D*P)*(j+(_+D*j)*P);else{const P=D*Math.sqrt(k*k-1);E=Q=>{const ne=Math.exp(-k*D*Q),W=Math.min(P*Q,300);return f-ne*((_+k*D*j)*Math.sinh(W)+P*j*Math.cosh(W))/P}}const U={calculatedDuration:C&&x||null,next:P=>{const Q=E(P);if(C)h.done=P>=x;else{let ne=P===0?_:0;k<1&&(ne=P===0?va(_):i0(E,P,Q));const W=Math.abs(ne)<=o,ce=Math.abs(f-Q)<=l;h.done=W&&ce}return h.value=h.done?f:Q,h},toString:()=>{const P=Math.min(kp(U),mc),Q=a0(ne=>U.next(P*ne).value,P,30);return P+"ms "+Q},toTransition:()=>{}};return U}gc.applyToOptions=t=>{const n=wk(t,100,gc);return t.ease=n.ease,t.duration=va(n.duration),t.type="keyframes",t};function Of({keyframes:t,velocity:n=0,power:i=.8,timeConstant:o=325,bounceDamping:l=10,bounceStiffness:u=500,modifyTarget:f,min:h,max:m,restDelta:g=.5,restSpeed:v}){const x=t[0],S={done:!1,value:x},C=W=>h!==void 0&&W<h||m!==void 0&&W>m,_=W=>h===void 0?m:m===void 0||Math.abs(h-W)<Math.abs(m-W)?h:m;let k=i*n;const j=x+k,D=f===void 0?j:f(j);D!==j&&(k=D-x);const L=W=>-k*Math.exp(-W/o),E=W=>D+L(W),U=W=>{const ce=L(W),se=E(W);S.done=Math.abs(ce)<=g,S.value=S.done?D:se};let P,Q;const ne=W=>{C(S.value)&&(P=W,Q=gc({keyframes:[S.value,_(S.value)],velocity:i0(E,W,S.value),damping:l,stiffness:u,restDelta:g,restSpeed:v}))};return ne(0),{calculatedDuration:null,next:W=>{let ce=!1;return!Q&&P===void 0&&(ce=!0,U(W),ne(W)),P!==void 0&&W>=P?Q.next(W-P):(!ce&&U(W),S)}}}function Rk(t,n,i){const o=[],l=i||Ha.mix||n0,u=t.length-1;for(let f=0;f<u;f++){let h=l(t[f],t[f+1]);if(n){const m=Array.isArray(n)?n[f]||aa:n;h=Mr(m,h)}o.push(h)}return o}function Dk(t,n,{clamp:i=!0,ease:o,mixer:l}={}){const u=t.length;if(xp(u===n.length),u===1)return()=>n[0];if(u===2&&n[0]===n[1])return()=>n[1];const f=t[0]===t[1];t[0]>t[u-1]&&(t=[...t].reverse(),n=[...n].reverse());const h=Rk(n,o,l),m=h.length,g=v=>{if(f&&v<t[0])return n[0];let x=0;if(m>1)for(;x<t.length-2&&!(v<t[x+1]);x++);const S=gr(t[x],t[x+1],v);return h[x](S)};return i?v=>g(Va(t[0],t[u-1],v)):g}function Nk(t,n){const i=t[t.length-1];for(let o=1;o<=n;o++){const l=gr(0,n,o);t.push(kt(i,1,l))}}function Uk(t){const n=[0];return Nk(n,t.length-1),n}function zk(t,n){return t.map(i=>i*n)}function Ok(t,n){return t.map(()=>n||Gb).splice(0,t.length-1)}function cr({duration:t=300,keyframes:n,times:i,ease:o="easeInOut"}){const l=Y2(o)?o.map(mv):mv(o),u={done:!1,value:n[0]},f=zk(i&&i.length===n.length?i:Uk(n),t),h=Dk(f,n,{ease:Array.isArray(l)?l:Ok(n,l)});return{calculatedDuration:t,next:m=>(u.value=h(m),u.done=m>=t,u)}}const Bk=t=>t!==null;function Ep(t,{repeat:n,repeatType:i="loop"},o,l=1){const u=t.filter(Bk),h=l<0||n&&i!=="loop"&&n%2===1?0:u.length-1;return!h||o===void 0?u[h]:o}const Lk={decay:Of,inertia:Of,tween:cr,keyframes:cr,spring:gc};function s0(t){typeof t.type=="string"&&(t.type=Lk[t.type])}class Mp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,i){return this.finished.then(n,i)}}const Ik=t=>t/100;class Rp extends Mp{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:i}=this.options;i&&i.updatedAt!==Mn.now()&&this.tick(Mn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;s0(n);const{type:i=cr,repeat:o=0,repeatDelay:l=0,repeatType:u,velocity:f=0}=n;let{keyframes:h}=n;const m=i||cr;m!==cr&&typeof h[0]!="number"&&(this.mixKeyframes=Mr(Ik,n0(h[0],h[1])),h=[0,100]);const g=m({...n,keyframes:h});u==="mirror"&&(this.mirroredGenerator=m({...n,keyframes:[...h].reverse(),velocity:-f})),g.calculatedDuration===null&&(g.calculatedDuration=kp(g));const{calculatedDuration:v}=g;this.calculatedDuration=v,this.resolvedDuration=v+l,this.totalDuration=this.resolvedDuration*(o+1)-l,this.generator=g}updateTime(n){const i=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=i}tick(n,i=!1){const{generator:o,totalDuration:l,mixKeyframes:u,mirroredGenerator:f,resolvedDuration:h,calculatedDuration:m}=this;if(this.startTime===null)return o.next(0);const{delay:g=0,keyframes:v,repeat:x,repeatType:S,repeatDelay:C,type:_,onUpdate:k,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-l/this.speed,this.startTime)),i?this.currentTime=n:this.updateTime(n);const D=this.currentTime-g*(this.playbackSpeed>=0?1:-1),L=this.playbackSpeed>=0?D<0:D>l;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let E=this.currentTime,U=o;if(x){const W=Math.min(this.currentTime,l)/h;let ce=Math.floor(W),se=W%1;!se&&W>=1&&(se=1),se===1&&ce--,ce=Math.min(ce,x+1),!!(ce%2)&&(S==="reverse"?(se=1-se,C&&(se-=C/h)):S==="mirror"&&(U=f)),E=Va(0,1,se)*h}const P=L?{done:!1,value:v[0]}:U.next(E);u&&(P.value=u(P.value));let{done:Q}=P;!L&&m!==null&&(Q=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const ne=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Q);return ne&&_!==Of&&(P.value=Ep(v,this.options,j,this.speed)),k&&k(P.value),ne&&this.finish(),P}then(n,i){return this.finished.then(n,i)}get duration(){return na(this.calculatedDuration)}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+na(n)}get time(){return na(this.currentTime)}set time(n){n=va(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(Mn.now());const i=this.playbackSpeed!==n;this.playbackSpeed=n,i&&(this.time=na(this.currentTime))}play(){if(this.isStopped)return;const{driver:n=_k,startTime:i}=this.options;this.driver||(this.driver=n(l=>this.tick(l))),this.options.onPlay?.();const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=i??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Mn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),n.observe(this)}}function Pk(t){for(let n=1;n<t.length;n++)t[n]??(t[n]=t[n-1])}const Fi=t=>t*180/Math.PI,Bf=t=>{const n=Fi(Math.atan2(t[1],t[0]));return Lf(n)},Vk={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Bf,rotateZ:Bf,skewX:t=>Fi(Math.atan(t[1])),skewY:t=>Fi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Lf=t=>(t=t%360,t<0&&(t+=360),t),Sv=Bf,_v=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),wv=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Hk={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:_v,scaleY:wv,scale:t=>(_v(t)+wv(t))/2,rotateX:t=>Lf(Fi(Math.atan2(t[6],t[5]))),rotateY:t=>Lf(Fi(Math.atan2(-t[2],t[0]))),rotateZ:Sv,rotate:Sv,skewX:t=>Fi(Math.atan(t[4])),skewY:t=>Fi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function If(t){return t.includes("scale")?1:0}function Pf(t,n){if(!t||t==="none")return If(n);const i=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,l;if(i)o=Hk,l=i;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=Vk,l=h}if(!l)return If(n);const u=o[n],f=l[1].split(",").map(qk);return typeof u=="function"?u(f):f[u]}const Fk=(t,n)=>{const{transform:i="none"}=getComputedStyle(t);return Pf(i,n)};function qk(t){return parseFloat(t.trim())}const lo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],co=new Set(lo),Cv=t=>t===ro||t===De,Gk=new Set(["x","y","z"]),$k=lo.filter(t=>!Gk.has(t));function Yk(t){const n=[];return $k.forEach(i=>{const o=t.getValue(i);o!==void 0&&(n.push([i,o.get()]),o.set(i.startsWith("scale")?1:0))}),n}const Gi={width:({x:t},{paddingLeft:n="0",paddingRight:i="0"})=>t.max-t.min-parseFloat(n)-parseFloat(i),height:({y:t},{paddingTop:n="0",paddingBottom:i="0"})=>t.max-t.min-parseFloat(n)-parseFloat(i),top:(t,{top:n})=>parseFloat(n),left:(t,{left:n})=>parseFloat(n),bottom:({y:t},{top:n})=>parseFloat(n)+(t.max-t.min),right:({x:t},{left:n})=>parseFloat(n)+(t.max-t.min),x:(t,{transform:n})=>Pf(n,"x"),y:(t,{transform:n})=>Pf(n,"y")};Gi.translateX=Gi.x;Gi.translateY=Gi.y;const $i=new Set;let Vf=!1,Hf=!1,Ff=!1;function o0(){if(Hf){const t=Array.from($i).filter(o=>o.needsMeasurement),n=new Set(t.map(o=>o.element)),i=new Map;n.forEach(o=>{const l=Yk(o);l.length&&(i.set(o,l),o.render())}),t.forEach(o=>o.measureInitialState()),n.forEach(o=>{o.render();const l=i.get(o);l&&l.forEach(([u,f])=>{o.getValue(u)?.set(f)})}),t.forEach(o=>o.measureEndState()),t.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}Hf=!1,Vf=!1,$i.forEach(t=>t.complete(Ff)),$i.clear()}function r0(){$i.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Hf=!0)})}function Xk(){Ff=!0,r0(),o0(),Ff=!1}class Dp{constructor(n,i,o,l,u,f=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=i,this.name=o,this.motionValue=l,this.element=u,this.isAsync=f}scheduleResolve(){this.state="scheduled",this.isAsync?($i.add(this),Vf||(Vf=!0,Ct.read(r0),Ct.resolveKeyframes(o0))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:i,element:o,motionValue:l}=this;if(n[0]===null){const u=l?.get(),f=n[n.length-1];if(u!==void 0)n[0]=u;else if(o&&i){const h=o.readValue(i,f);h!=null&&(n[0]=h)}n[0]===void 0&&(n[0]=f),l&&u===void 0&&l.set(n[0])}Pk(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),$i.delete(this)}cancel(){this.state==="scheduled"&&($i.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Wk=t=>t.startsWith("--");function Kk(t,n,i){Wk(n)?t.style.setProperty(n,i):t.style[n]=i}const Qk=bp(()=>window.ScrollTimeline!==void 0),Zk={};function Jk(t,n){const i=bp(t);return()=>Zk[n]??i()}const l0=Jk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),or=([t,n,i,o])=>`cubic-bezier(${t}, ${n}, ${i}, ${o})`,Tv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:or([0,.65,.55,1]),circOut:or([.55,0,1,.45]),backIn:or([.31,.01,.66,-.59]),backOut:or([.33,1.53,.69,.99])};function c0(t,n){if(t)return typeof t=="function"?l0()?a0(t,n):"ease-out":$b(t)?or(t):Array.isArray(t)?t.map(i=>c0(i,n)||Tv.easeOut):Tv[t]}function eE(t,n,i,{delay:o=0,duration:l=300,repeat:u=0,repeatType:f="loop",ease:h="easeOut",times:m}={},g=void 0){const v={[n]:i};m&&(v.offset=m);const x=c0(h,l);Array.isArray(x)&&(v.easing=x);const S={delay:o,duration:l,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:u+1,direction:f==="reverse"?"alternate":"normal"};return g&&(S.pseudoElement=g),t.animate(v,S)}function u0(t){return typeof t=="function"&&"applyToOptions"in t}function tE({type:t,...n}){return u0(t)&&l0()?t.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class nE extends Mp{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:i,name:o,keyframes:l,pseudoElement:u,allowFlatten:f=!1,finalKeyframe:h,onComplete:m}=n;this.isPseudoElement=!!u,this.allowFlatten=f,this.options=n,xp(typeof n.type!="string");const g=tE(n);this.animation=eE(i,o,l,g,u),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const v=Ep(l,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(v):Kk(i,o,v),this.animation.cancel()}m?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const n=this.animation.effect?.getComputedTiming?.().duration||0;return na(Number(n))}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+na(n)}get time(){return na(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=va(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:i}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,n&&Qk()?(this.animation.timeline=n,aa):i(this)}}const d0={anticipate:Hb,backInOut:Vb,circInOut:qb};function aE(t){return t in d0}function iE(t){typeof t.ease=="string"&&aE(t.ease)&&(t.ease=d0[t.ease])}const jv=10;class sE extends nE{constructor(n){iE(n),s0(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:i,onUpdate:o,onComplete:l,element:u,...f}=this.options;if(!i)return;if(n!==void 0){i.set(n);return}const h=new Rp({...f,autoplay:!1}),m=va(this.finishedTime??this.time);i.setWithVelocity(h.sample(m-jv).value,h.sample(m).value,jv),h.stop()}}const Av=(t,n)=>n==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(yi.test(t)||t==="0")&&!t.startsWith("url("));function oE(t){const n=t[0];if(t.length===1)return!0;for(let i=0;i<t.length;i++)if(t[i]!==n)return!0}function rE(t,n,i,o){const l=t[0];if(l===null)return!1;if(n==="display"||n==="visibility")return!0;const u=t[t.length-1],f=Av(l,n),h=Av(u,n);return!f||!h?!1:oE(t)||(i==="spring"||u0(i))&&o}function qf(t){t.duration=0,t.type="keyframes"}const lE=new Set(["opacity","clipPath","filter","transform"]),cE=bp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function uE(t){const{motionValue:n,name:i,repeatDelay:o,repeatType:l,damping:u,type:f}=t;if(!(n?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:g}=n.owner.getProps();return cE()&&i&&lE.has(i)&&(i!=="transform"||!g)&&!m&&!o&&l!=="mirror"&&u!==0&&f!=="inertia"}const dE=40;class fE extends Mp{constructor({autoplay:n=!0,delay:i=0,type:o="keyframes",repeat:l=0,repeatDelay:u=0,repeatType:f="loop",keyframes:h,name:m,motionValue:g,element:v,...x}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Mn.now();const S={autoplay:n,delay:i,type:o,repeat:l,repeatDelay:u,repeatType:f,name:m,motionValue:g,element:v,...x},C=v?.KeyframeResolver||Dp;this.keyframeResolver=new C(h,(_,k,j)=>this.onKeyframesResolved(_,k,S,!j),m,g,v),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(n,i,o,l){this.keyframeResolver=void 0;const{name:u,type:f,velocity:h,delay:m,isHandoff:g,onUpdate:v}=o;this.resolvedAt=Mn.now(),rE(n,u,f,h)||((Ha.instantAnimations||!m)&&v?.(Ep(n,o,i)),n[0]=n[n.length-1],qf(o),o.repeat=0);const S={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>dE?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:i,...o,keyframes:n},C=!g&&uE(S)?new sE({...S,element:S.motionValue.owner.current}):new Rp(S);C.finished.then(()=>this.notifyFinished()).catch(aa),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(n,i){return this.finished.finally(n).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Xk()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const pE=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hE(t){const n=pE.exec(t);if(!n)return[,];const[,i,o,l]=n;return[`--${i??o}`,l]}function f0(t,n,i=1){const[o,l]=hE(t);if(!o)return;const u=window.getComputedStyle(n).getPropertyValue(o);if(u){const f=u.trim();return Nb(f)?parseFloat(f):f}return Cp(l)?f0(l,n,i+1):l}function Np(t,n){return t?.[n]??t?.default??t}const p0=new Set(["width","height","top","left","right","bottom",...lo]),mE={test:t=>t==="auto",parse:t=>t},h0=t=>n=>n.test(t),m0=[ro,De,xa,pi,ok,sk,mE],kv=t=>m0.find(h0(t));function gE(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||zb(t):!0}const yE=new Set(["brightness","contrast","saturate","opacity"]);function vE(t){const[n,i]=t.slice(0,-1).split("(");if(n==="drop-shadow")return t;const[o]=i.match(Tp)||[];if(!o)return t;const l=i.replace(o,"");let u=yE.has(n)?1:0;return o!==i&&(u*=100),n+"("+u+l+")"}const xE=/\b([a-z-]*)\(.*?\)/gu,Gf={...yi,getAnimatableNone:t=>{const n=t.match(xE);return n?n.map(vE).join(" "):t}},Ev={...ro,transform:Math.round},bE={rotate:pi,rotateX:pi,rotateY:pi,rotateZ:pi,scale:Xl,scaleX:Xl,scaleY:Xl,scaleZ:Xl,skew:pi,skewX:pi,skewY:pi,distance:De,translateX:De,translateY:De,translateZ:De,x:De,y:De,z:De,perspective:De,transformPerspective:De,opacity:yr,originX:gv,originY:gv,originZ:De},Up={borderWidth:De,borderTopWidth:De,borderRightWidth:De,borderBottomWidth:De,borderLeftWidth:De,borderRadius:De,radius:De,borderTopLeftRadius:De,borderTopRightRadius:De,borderBottomRightRadius:De,borderBottomLeftRadius:De,width:De,maxWidth:De,height:De,maxHeight:De,top:De,right:De,bottom:De,left:De,padding:De,paddingTop:De,paddingRight:De,paddingBottom:De,paddingLeft:De,margin:De,marginTop:De,marginRight:De,marginBottom:De,marginLeft:De,backgroundPositionX:De,backgroundPositionY:De,...bE,zIndex:Ev,fillOpacity:yr,strokeOpacity:yr,numOctaves:Ev},SE={...Up,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:Gf,WebkitFilter:Gf},g0=t=>SE[t];function y0(t,n){let i=g0(t);return i!==Gf&&(i=yi),i.getAnimatableNone?i.getAnimatableNone(n):void 0}const _E=new Set(["auto","none","0"]);function wE(t,n,i){let o=0,l;for(;o<t.length&&!l;){const u=t[o];typeof u=="string"&&!_E.has(u)&&vr(u).values.length&&(l=t[o]),o++}if(l&&i)for(const u of n)t[u]=y0(i,l)}class CE extends Dp{constructor(n,i,o,l,u){super(n,i,o,l,u,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:i,name:o}=this;if(!i||!i.current)return;super.readKeyframes();for(let m=0;m<n.length;m++){let g=n[m];if(typeof g=="string"&&(g=g.trim(),Cp(g))){const v=f0(g,i.current);v!==void 0&&(n[m]=v),m===n.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!p0.has(o)||n.length!==2)return;const[l,u]=n,f=kv(l),h=kv(u);if(f!==h)if(Cv(f)&&Cv(h))for(let m=0;m<n.length;m++){const g=n[m];typeof g=="string"&&(n[m]=parseFloat(g))}else Gi[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:i}=this,o=[];for(let l=0;l<n.length;l++)(n[l]===null||gE(n[l]))&&o.push(l);o.length&&wE(n,o,i)}measureInitialState(){const{element:n,unresolvedKeyframes:i,name:o}=this;if(!n||!n.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Gi[o](n.measureViewportBox(),window.getComputedStyle(n.current)),i[0]=this.measuredOrigin;const l=i[i.length-1];l!==void 0&&n.getValue(o,l).jump(l,!1)}measureEndState(){const{element:n,name:i,unresolvedKeyframes:o}=this;if(!n||!n.current)return;const l=n.getValue(i);l&&l.jump(this.measuredOrigin,!1);const u=o.length-1,f=o[u];o[u]=Gi[i](n.measureViewportBox(),window.getComputedStyle(n.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,m])=>{n.getValue(h).set(m)}),this.resolveNoneKeyframes()}}function TE(t,n,i){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let o=document;const l=i?.[t]??o.querySelectorAll(t);return l?Array.from(l):[]}return Array.from(t)}const v0=(t,n)=>n&&typeof t=="number"?n.transform(t):t;function x0(t){return Ub(t)&&"offsetHeight"in t}const Mv=30,jE=t=>!isNaN(parseFloat(t));class AE{constructor(n,i={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{const l=Mn.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(n),this.owner=i.owner}setCurrent(n){this.current=n,this.updatedAt=Mn.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=jE(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,i){this.events[n]||(this.events[n]=new Sp);const o=this.events[n].add(i);return n==="change"?()=>{o(),Ct.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,i){this.passiveEffect=n,this.stopPassiveEffect=i}set(n){this.passiveEffect?this.passiveEffect(n,this.updateAndNotify):this.updateAndNotify(n)}setWithVelocity(n,i,o){this.set(i),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-o}jump(n,i=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=Mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>Mv)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,Mv);return Ob(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(n){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=n(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function to(t,n){return new AE(t,n)}const{schedule:zp}=Yb(queueMicrotask,!1),la={x:!1,y:!1};function b0(){return la.x||la.y}function kE(t){return t==="x"||t==="y"?la[t]?null:(la[t]=!0,()=>{la[t]=!1}):la.x||la.y?null:(la.x=la.y=!0,()=>{la.x=la.y=!1})}function S0(t,n){const i=TE(t),o=new AbortController,l={passive:!0,...n,signal:o.signal};return[i,l,()=>o.abort()]}function Rv(t){return!(t.pointerType==="touch"||b0())}function EE(t,n,i={}){const[o,l,u]=S0(t,i),f=h=>{if(!Rv(h))return;const{target:m}=h,g=n(m,h);if(typeof g!="function"||!m)return;const v=x=>{Rv(x)&&(g(x),m.removeEventListener("pointerleave",v))};m.addEventListener("pointerleave",v,l)};return o.forEach(h=>{h.addEventListener("pointerenter",f,l)}),u}const _0=(t,n)=>n?t===n?!0:_0(t,n.parentElement):!1,Op=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ME=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function RE(t){return ME.has(t.tagName)||t.tabIndex!==-1}const oc=new WeakSet;function Dv(t){return n=>{n.key==="Enter"&&t(n)}}function af(t,n){t.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const DE=(t,n)=>{const i=t.currentTarget;if(!i)return;const o=Dv(()=>{if(oc.has(i))return;af(i,"down");const l=Dv(()=>{af(i,"up")}),u=()=>af(i,"cancel");i.addEventListener("keyup",l,n),i.addEventListener("blur",u,n)});i.addEventListener("keydown",o,n),i.addEventListener("blur",()=>i.removeEventListener("keydown",o),n)};function Nv(t){return Op(t)&&!b0()}function NE(t,n,i={}){const[o,l,u]=S0(t,i),f=h=>{const m=h.currentTarget;if(!Nv(h))return;oc.add(m);const g=n(m,h),v=(C,_)=>{window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",S),oc.has(m)&&oc.delete(m),Nv(C)&&typeof g=="function"&&g(C,{success:_})},x=C=>{v(C,m===window||m===document||i.useGlobalTarget||_0(m,C.target))},S=C=>{v(C,!1)};window.addEventListener("pointerup",x,l),window.addEventListener("pointercancel",S,l)};return o.forEach(h=>{(i.useGlobalTarget?window:h).addEventListener("pointerdown",f,l),x0(h)&&(h.addEventListener("focus",g=>DE(g,l)),!RE(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),u}function w0(t){return Ub(t)&&"ownerSVGElement"in t}function UE(t){return w0(t)&&t.tagName==="svg"}const gn=t=>!!(t&&t.getVelocity),zE=[...m0,Ft,yi],OE=t=>zE.find(h0(t)),Bp=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Uv(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function BE(...t){return n=>{let i=!1;const o=t.map(l=>{const u=Uv(l,n);return!i&&typeof u=="function"&&(i=!0),u});if(i)return()=>{for(let l=0;l<o.length;l++){const u=o[l];typeof u=="function"?u():Uv(t[l],null)}}}}function LE(...t){return w.useCallback(BE(...t),t)}class IE extends w.Component{getSnapshotBeforeUpdate(n){const i=this.props.childRef.current;if(i&&n.isPresent&&!this.props.isPresent){const o=i.offsetParent,l=x0(o)&&o.offsetWidth||0,u=this.props.sizeRef.current;u.height=i.offsetHeight||0,u.width=i.offsetWidth||0,u.top=i.offsetTop,u.left=i.offsetLeft,u.right=l-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PE({children:t,isPresent:n,anchorX:i,root:o}){const l=w.useId(),u=w.useRef(null),f=w.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=w.useContext(Bp),m=LE(u,t?.ref);return w.useInsertionEffect(()=>{const{width:g,height:v,top:x,left:S,right:C}=f.current;if(n||!u.current||!g||!v)return;const _=i==="left"?`left: ${S}`:`right: ${C}`;u.current.dataset.motionPopId=l;const k=document.createElement("style");h&&(k.nonce=h);const j=o??document.head;return j.appendChild(k),k.sheet&&k.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${v}px !important;
            ${_}px !important;
            top: ${x}px !important;
          }
        `),()=>{j.contains(k)&&j.removeChild(k)}},[n]),c.jsx(IE,{isPresent:n,childRef:u,sizeRef:f,children:w.cloneElement(t,{ref:m})})}const VE=({children:t,initial:n,isPresent:i,onExitComplete:o,custom:l,presenceAffectsLayout:u,mode:f,anchorX:h,root:m})=>{const g=mp(HE),v=w.useId();let x=!0,S=w.useMemo(()=>(x=!1,{id:v,initial:n,isPresent:i,custom:l,onExitComplete:C=>{g.set(C,!0);for(const _ of g.values())if(!_)return;o&&o()},register:C=>(g.set(C,!1),()=>g.delete(C))}),[i,g,o]);return u&&x&&(S={...S}),w.useMemo(()=>{g.forEach((C,_)=>g.set(_,!1))},[i]),w.useEffect(()=>{!i&&!g.size&&o&&o()},[i]),f==="popLayout"&&(t=c.jsx(PE,{isPresent:i,anchorX:h,root:m,children:t})),c.jsx(Mc.Provider,{value:S,children:t})};function HE(){return new Map}function C0(t=!0){const n=w.useContext(Mc);if(n===null)return[!0,null];const{isPresent:i,onExitComplete:o,register:l}=n,u=w.useId();w.useEffect(()=>{if(t)return l(u)},[t]);const f=w.useCallback(()=>t&&o&&o(u),[u,o,t]);return!i&&o?[!1,f]:[!0]}const Wl=t=>t.key||"";function zv(t){const n=[];return w.Children.forEach(t,i=>{w.isValidElement(i)&&n.push(i)}),n}const Ks=({children:t,custom:n,initial:i=!0,onExitComplete:o,presenceAffectsLayout:l=!0,mode:u="sync",propagate:f=!1,anchorX:h="left",root:m})=>{const[g,v]=C0(f),x=w.useMemo(()=>zv(t),[t]),S=f&&!g?[]:x.map(Wl),C=w.useRef(!0),_=w.useRef(x),k=mp(()=>new Map),[j,D]=w.useState(x),[L,E]=w.useState(x);Db(()=>{C.current=!1,_.current=x;for(let Q=0;Q<L.length;Q++){const ne=Wl(L[Q]);S.includes(ne)?k.delete(ne):k.get(ne)!==!0&&k.set(ne,!1)}},[L,S.length,S.join("-")]);const U=[];if(x!==j){let Q=[...x];for(let ne=0;ne<L.length;ne++){const W=L[ne],ce=Wl(W);S.includes(ce)||(Q.splice(ne,0,W),U.push(W))}return u==="wait"&&U.length&&(Q=U),E(zv(Q)),D(x),null}const{forceRender:P}=w.useContext(hp);return c.jsx(c.Fragment,{children:L.map(Q=>{const ne=Wl(Q),W=f&&!g?!1:x===L||S.includes(ne),ce=()=>{if(k.has(ne))k.set(ne,!0);else return;let se=!0;k.forEach(Ee=>{Ee||(se=!1)}),se&&(P?.(),E(_.current),f&&v?.(),o&&o())};return c.jsx(VE,{isPresent:W,initial:!C.current||i?void 0:!1,custom:n,presenceAffectsLayout:l,mode:u,root:m,onExitComplete:W?void 0:ce,anchorX:h,children:Q},ne)})})},T0=w.createContext({strict:!1}),Ov={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},no={};for(const t in Ov)no[t]={isEnabled:n=>Ov[t].some(i=>!!n[i])};function FE(t){for(const n in t)no[n]={...no[n],...t[n]}}const qE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||qE.has(t)}let j0=t=>!yc(t);function GE(t){typeof t=="function"&&(j0=n=>n.startsWith("on")?!yc(n):t(n))}try{GE(require("@emotion/is-prop-valid").default)}catch{}function $E(t,n,i){const o={};for(const l in t)l==="values"&&typeof t.values=="object"||(j0(l)||i===!0&&yc(l)||!n&&!yc(l)||t.draggable&&l.startsWith("onDrag"))&&(o[l]=t[l]);return o}const Rc=w.createContext({});function Dc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function xr(t){return typeof t=="string"||Array.isArray(t)}const Lp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ip=["initial",...Lp];function Nc(t){return Dc(t.animate)||Ip.some(n=>xr(t[n]))}function A0(t){return!!(Nc(t)||t.variants)}function YE(t,n){if(Nc(t)){const{initial:i,animate:o}=t;return{initial:i===!1||xr(i)?i:void 0,animate:xr(o)?o:void 0}}return t.inherit!==!1?n:{}}function XE(t){const{initial:n,animate:i}=YE(t,w.useContext(Rc));return w.useMemo(()=>({initial:n,animate:i}),[Bv(n),Bv(i)])}function Bv(t){return Array.isArray(t)?t.join(" "):t}function Lv(t,n){return n.max===n.min?0:t/(n.max-n.min)*100}const ir={correct:(t,n)=>{if(!n.target)return t;if(typeof t=="string")if(De.test(t))t=parseFloat(t);else return t;const i=Lv(t,n.target.x),o=Lv(t,n.target.y);return`${i}% ${o}%`}},WE={correct:(t,{treeScale:n,projectionDelta:i})=>{const o=t,l=yi.parse(t);if(l.length>5)return o;const u=yi.createTransformer(t),f=typeof l[0]!="number"?1:0,h=i.x.scale*n.x,m=i.y.scale*n.y;l[0+f]/=h,l[1+f]/=m;const g=kt(h,m,.5);return typeof l[2+f]=="number"&&(l[2+f]/=g),typeof l[3+f]=="number"&&(l[3+f]/=g),u(l)}},$f={borderRadius:{...ir,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ir,borderTopRightRadius:ir,borderBottomLeftRadius:ir,borderBottomRightRadius:ir,boxShadow:WE};function k0(t,{layout:n,layoutId:i}){return co.has(t)||t.startsWith("origin")||(n||i!==void 0)&&(!!$f[t]||t==="opacity")}const KE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},QE=lo.length;function ZE(t,n,i){let o="",l=!0;for(let u=0;u<QE;u++){const f=lo[u],h=t[f];if(h===void 0)continue;let m=!0;if(typeof h=="number"?m=h===(f.startsWith("scale")?1:0):m=parseFloat(h)===0,!m||i){const g=v0(h,Up[f]);if(!m){l=!1;const v=KE[f]||f;o+=`${v}(${g}) `}i&&(n[f]=g)}}return o=o.trim(),i?o=i(n,l?"":o):l&&(o="none"),o}function Pp(t,n,i){const{style:o,vars:l,transformOrigin:u}=t;let f=!1,h=!1;for(const m in n){const g=n[m];if(co.has(m)){f=!0;continue}else if(Wb(m)){l[m]=g;continue}else{const v=v0(g,Up[m]);m.startsWith("origin")?(h=!0,u[m]=v):o[m]=v}}if(n.transform||(f||i?o.transform=ZE(n,t.transform,i):o.transform&&(o.transform="none")),h){const{originX:m="50%",originY:g="50%",originZ:v=0}=u;o.transformOrigin=`${m} ${g} ${v}`}}const Vp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function E0(t,n,i){for(const o in n)!gn(n[o])&&!k0(o,i)&&(t[o]=n[o])}function JE({transformTemplate:t},n){return w.useMemo(()=>{const i=Vp();return Pp(i,n,t),Object.assign({},i.vars,i.style)},[n])}function eM(t,n){const i=t.style||{},o={};return E0(o,i,t),Object.assign(o,JE(t,n)),o}function tM(t,n){const i={},o=eM(t,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=o,i}const nM={offset:"stroke-dashoffset",array:"stroke-dasharray"},aM={offset:"strokeDashoffset",array:"strokeDasharray"};function iM(t,n,i=1,o=0,l=!0){t.pathLength=1;const u=l?nM:aM;t[u.offset]=De.transform(-o);const f=De.transform(n),h=De.transform(i);t[u.array]=`${f} ${h}`}function M0(t,{attrX:n,attrY:i,attrScale:o,pathLength:l,pathSpacing:u=1,pathOffset:f=0,...h},m,g,v){if(Pp(t,h,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:S}=t;x.transform&&(S.transform=x.transform,delete x.transform),(S.transform||x.transformOrigin)&&(S.transformOrigin=x.transformOrigin??"50% 50%",delete x.transformOrigin),S.transform&&(S.transformBox=v?.transformBox??"fill-box",delete x.transformBox),n!==void 0&&(x.x=n),i!==void 0&&(x.y=i),o!==void 0&&(x.scale=o),l!==void 0&&iM(x,l,u,f,!1)}const R0=()=>({...Vp(),attrs:{}}),D0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function sM(t,n,i,o){const l=w.useMemo(()=>{const u=R0();return M0(u,n,D0(o),t.transformTemplate,t.style),{...u.attrs,style:{...u.style}}},[n]);if(t.style){const u={};E0(u,t.style,t),l.style={...u,...l.style}}return l}const oM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hp(t){return typeof t!="string"||t.includes("-")?!1:!!(oM.indexOf(t)>-1||/[A-Z]/u.test(t))}function rM(t,n,i,{latestValues:o},l,u=!1){const h=(Hp(t)?sM:tM)(n,o,l,t),m=$E(n,typeof t=="string",u),g=t!==w.Fragment?{...m,...h,ref:i}:{},{children:v}=n,x=w.useMemo(()=>gn(v)?v.get():v,[v]);return w.createElement(t,{...g,children:x})}function Iv(t){const n=[{},{}];return t?.values.forEach((i,o)=>{n[0][o]=i.get(),n[1][o]=i.getVelocity()}),n}function Fp(t,n,i,o){if(typeof n=="function"){const[l,u]=Iv(o);n=n(i!==void 0?i:t.custom,l,u)}if(typeof n=="string"&&(n=t.variants&&t.variants[n]),typeof n=="function"){const[l,u]=Iv(o);n=n(i!==void 0?i:t.custom,l,u)}return n}function rc(t){return gn(t)?t.get():t}function lM({scrapeMotionValuesFromProps:t,createRenderState:n},i,o,l){return{latestValues:cM(i,o,l,t),renderState:n()}}function cM(t,n,i,o){const l={},u=o(t,{});for(const S in u)l[S]=rc(u[S]);let{initial:f,animate:h}=t;const m=Nc(t),g=A0(t);n&&g&&!m&&t.inherit!==!1&&(f===void 0&&(f=n.initial),h===void 0&&(h=n.animate));let v=i?i.initial===!1:!1;v=v||f===!1;const x=v?h:f;if(x&&typeof x!="boolean"&&!Dc(x)){const S=Array.isArray(x)?x:[x];for(let C=0;C<S.length;C++){const _=Fp(t,S[C]);if(_){const{transitionEnd:k,transition:j,...D}=_;for(const L in D){let E=D[L];if(Array.isArray(E)){const U=v?E.length-1:0;E=E[U]}E!==null&&(l[L]=E)}for(const L in k)l[L]=k[L]}}}return l}const N0=t=>(n,i)=>{const o=w.useContext(Rc),l=w.useContext(Mc),u=()=>lM(t,n,o,l);return i?u():mp(u)};function qp(t,n,i){const{style:o}=t,l={};for(const u in o)(gn(o[u])||n.style&&gn(n.style[u])||k0(u,t)||i?.getValue(u)?.liveStyle!==void 0)&&(l[u]=o[u]);return l}const uM=N0({scrapeMotionValuesFromProps:qp,createRenderState:Vp});function U0(t,n,i){const o=qp(t,n,i);for(const l in t)if(gn(t[l])||gn(n[l])){const u=lo.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;o[u]=t[l]}return o}const dM=N0({scrapeMotionValuesFromProps:U0,createRenderState:R0}),fM=Symbol.for("motionComponentSymbol");function qs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function pM(t,n,i){return w.useCallback(o=>{o&&t.onMount&&t.onMount(o),n&&(o?n.mount(o):n.unmount()),i&&(typeof i=="function"?i(o):qs(i)&&(i.current=o))},[n])}const Gp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),hM="framerAppearId",z0="data-"+Gp(hM),O0=w.createContext({});function mM(t,n,i,o,l){const{visualElement:u}=w.useContext(Rc),f=w.useContext(T0),h=w.useContext(Mc),m=w.useContext(Bp).reducedMotion,g=w.useRef(null);o=o||f.renderer,!g.current&&o&&(g.current=o(t,{visualState:n,parent:u,props:i,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const v=g.current,x=w.useContext(O0);v&&!v.projection&&l&&(v.type==="html"||v.type==="svg")&&gM(g.current,i,l,x);const S=w.useRef(!1);w.useInsertionEffect(()=>{v&&S.current&&v.update(i,h)});const C=i[z0],_=w.useRef(!!C&&!window.MotionHandoffIsComplete?.(C)&&window.MotionHasOptimisedAnimation?.(C));return Db(()=>{v&&(S.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),_.current&&v.animationState&&v.animationState.animateChanges())}),w.useEffect(()=>{v&&(!_.current&&v.animationState&&v.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(C)}),_.current=!1),v.enteringChildren=void 0)}),v}function gM(t,n,i,o){const{layoutId:l,layout:u,drag:f,dragConstraints:h,layoutScroll:m,layoutRoot:g,layoutCrossfade:v}=n;t.projection=new i(t.latestValues,n["data-framer-portal-id"]?void 0:B0(t.parent)),t.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!f||h&&qs(h),visualElement:t,animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,crossfade:v,layoutScroll:m,layoutRoot:g})}function B0(t){if(t)return t.options.allowProjection!==!1?t.projection:B0(t.parent)}function sf(t,{forwardMotionProps:n=!1}={},i,o){i&&FE(i);const l=Hp(t)?dM:uM;function u(h,m){let g;const v={...w.useContext(Bp),...h,layoutId:yM(h)},{isStatic:x}=v,S=XE(h),C=l(h,x);if(!x&&gp){vM();const _=xM(v);g=_.MeasureLayout,S.visualElement=mM(t,C,v,o,_.ProjectionNode)}return c.jsxs(Rc.Provider,{value:S,children:[g&&S.visualElement?c.jsx(g,{visualElement:S.visualElement,...v}):null,rM(t,h,pM(C,S.visualElement,m),C,x,n)]})}u.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const f=w.forwardRef(u);return f[fM]=t,f}function yM({layoutId:t}){const n=w.useContext(hp).id;return n&&t!==void 0?n+"-"+t:t}function vM(t,n){w.useContext(T0).strict}function xM(t){const{drag:n,layout:i}=no;if(!n&&!i)return{};const o={...n,...i};return{MeasureLayout:n?.isEnabled(t)||i?.isEnabled(t)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function bM(t,n){if(typeof Proxy>"u")return sf;const i=new Map,o=(u,f)=>sf(u,f,t,n),l=(u,f)=>o(u,f);return new Proxy(l,{get:(u,f)=>f==="create"?o:(i.has(f)||i.set(f,sf(f,void 0,t,n)),i.get(f))})}function L0({top:t,left:n,right:i,bottom:o}){return{x:{min:n,max:i},y:{min:t,max:o}}}function SM({x:t,y:n}){return{top:n.min,right:t.max,bottom:n.max,left:t.min}}function _M(t,n){if(!n)return t;const i=n({x:t.left,y:t.top}),o=n({x:t.right,y:t.bottom});return{top:i.y,left:i.x,bottom:o.y,right:o.x}}function of(t){return t===void 0||t===1}function Yf({scale:t,scaleX:n,scaleY:i}){return!of(t)||!of(n)||!of(i)}function Ii(t){return Yf(t)||I0(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function I0(t){return Pv(t.x)||Pv(t.y)}function Pv(t){return t&&t!=="0%"}function vc(t,n,i){const o=t-i,l=n*o;return i+l}function Vv(t,n,i,o,l){return l!==void 0&&(t=vc(t,l,o)),vc(t,i,o)+n}function Xf(t,n=0,i=1,o,l){t.min=Vv(t.min,n,i,o,l),t.max=Vv(t.max,n,i,o,l)}function P0(t,{x:n,y:i}){Xf(t.x,n.translate,n.scale,n.originPoint),Xf(t.y,i.translate,i.scale,i.originPoint)}const Hv=.999999999999,Fv=1.0000000000001;function wM(t,n,i,o=!1){const l=i.length;if(!l)return;n.x=n.y=1;let u,f;for(let h=0;h<l;h++){u=i[h],f=u.projectionDelta;const{visualElement:m}=u.options;m&&m.props.style&&m.props.style.display==="contents"||(o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&$s(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),f&&(n.x*=f.x.scale,n.y*=f.y.scale,P0(t,f)),o&&Ii(u.latestValues)&&$s(t,u.latestValues))}n.x<Fv&&n.x>Hv&&(n.x=1),n.y<Fv&&n.y>Hv&&(n.y=1)}function Gs(t,n){t.min=t.min+n,t.max=t.max+n}function qv(t,n,i,o,l=.5){const u=kt(t.min,t.max,l);Xf(t,n,i,u,o)}function $s(t,n){qv(t.x,n.x,n.scaleX,n.scale,n.originX),qv(t.y,n.y,n.scaleY,n.scale,n.originY)}function V0(t,n){return L0(_M(t.getBoundingClientRect(),n))}function CM(t,n,i){const o=V0(t,i),{scroll:l}=n;return l&&(Gs(o.x,l.offset.x),Gs(o.y,l.offset.y)),o}const Gv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ys=()=>({x:Gv(),y:Gv()}),$v=()=>({min:0,max:0}),$t=()=>({x:$v(),y:$v()}),Wf={current:null},H0={current:!1};function TM(){if(H0.current=!0,!!gp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),n=()=>Wf.current=t.matches;t.addEventListener("change",n),n()}else Wf.current=!1}const jM=new WeakMap;function AM(t,n,i){for(const o in n){const l=n[o],u=i[o];if(gn(l))t.addValue(o,l);else if(gn(u))t.addValue(o,to(l,{owner:t}));else if(u!==l)if(t.hasValue(o)){const f=t.getValue(o);f.liveStyle===!0?f.jump(l):f.hasAnimated||f.set(l)}else{const f=t.getStaticValue(o);t.addValue(o,to(f!==void 0?f:l,{owner:t}))}}for(const o in i)n[o]===void 0&&t.removeValue(o);return n}const Yv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kM{scrapeMotionValuesFromProps(n,i,o){return{}}constructor({parent:n,props:i,presenceContext:o,reducedMotionConfig:l,blockInitialAnimation:u,visualState:f},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Dp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=Mn.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,Ct.render(this.render,!1,!0))};const{latestValues:m,renderState:g}=f;this.latestValues=m,this.baseTarget={...m},this.initialValues=i.initial?{...m}:{},this.renderState=g,this.parent=n,this.props=i,this.presenceContext=o,this.depth=n?n.depth+1:0,this.reducedMotionConfig=l,this.options=h,this.blockInitialAnimation=!!u,this.isControllingVariants=Nc(i),this.isVariantNode=A0(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:v,...x}=this.scrapeMotionValuesFromProps(i,{},this);for(const S in x){const C=x[S];m[S]!==void 0&&gn(C)&&C.set(m[S])}}mount(n){this.current=n,jM.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,o)=>this.bindToMotionValue(o,i)),H0.current||TM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Wf.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),gi(this.notifyUpdate),gi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(n){this.children.add(n),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(n)}removeChild(n){this.children.delete(n),this.enteringChildren&&this.enteringChildren.delete(n)}bindToMotionValue(n,i){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const o=co.has(n);o&&this.onBindTransform&&this.onBindTransform();const l=i.on("change",f=>{this.latestValues[n]=f,this.props.onUpdate&&Ct.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,n,i)),this.valueSubscriptions.set(n,()=>{l(),u&&u(),i.owner&&i.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in no){const i=no[n];if(!i)continue;const{isEnabled:o,Feature:l}=i;if(!this.features[n]&&l&&o(this.props)&&(this.features[n]=new l(this)),this.features[n]){const u=this.features[n];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$t()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,i){this.latestValues[n]=i}update(n,i){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let o=0;o<Yv.length;o++){const l=Yv[o];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const u="on"+l,f=n[u];f&&(this.propEventSubscriptions[l]=this.on(l,f))}this.prevMotionValues=AM(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(n),()=>i.variantChildren.delete(n)}addValue(n,i){const o=this.values.get(n);i!==o&&(o&&this.removeValue(n),this.bindToMotionValue(n,i),this.values.set(n,i),this.latestValues[n]=i.get())}removeValue(n){this.values.delete(n);const i=this.valueSubscriptions.get(n);i&&(i(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,i){if(this.props.values&&this.props.values[n])return this.props.values[n];let o=this.values.get(n);return o===void 0&&i!==void 0&&(o=to(i===null?void 0:i,{owner:this}),this.addValue(n,o)),o}readValue(n,i){let o=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return o!=null&&(typeof o=="string"&&(Nb(o)||zb(o))?o=parseFloat(o):!OE(o)&&yi.test(i)&&(o=y0(n,i)),this.setBaseTarget(n,gn(o)?o.get():o)),gn(o)?o.get():o}setBaseTarget(n,i){this.baseTarget[n]=i}getBaseTarget(n){const{initial:i}=this.props;let o;if(typeof i=="string"||typeof i=="object"){const u=Fp(this.props,i,this.presenceContext?.custom);u&&(o=u[n])}if(i&&o!==void 0)return o;const l=this.getBaseTargetFromProps(this.props,n);return l!==void 0&&!gn(l)?l:this.initialValues[n]!==void 0&&o===void 0?void 0:this.baseTarget[n]}on(n,i){return this.events[n]||(this.events[n]=new Sp),this.events[n].add(i)}notify(n,...i){this.events[n]&&this.events[n].notify(...i)}scheduleRenderMicrotask(){zp.render(this.render)}}class F0 extends kM{constructor(){super(...arguments),this.KeyframeResolver=CE}sortInstanceNodePosition(n,i){return n.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(n,i){return n.style?n.style[i]:void 0}removeValueFromRenderState(n,{vars:i,style:o}){delete i[n],delete o[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;gn(n)&&(this.childSubscription=n.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function q0(t,{style:n,vars:i},o,l){const u=t.style;let f;for(f in n)u[f]=n[f];l?.applyProjectionStyles(u,o);for(f in i)u.setProperty(f,i[f])}function EM(t){return window.getComputedStyle(t)}class MM extends F0{constructor(){super(...arguments),this.type="html",this.renderInstance=q0}readValueFromInstance(n,i){if(co.has(i))return this.projection?.isProjecting?If(i):Fk(n,i);{const o=EM(n),l=(Wb(i)?o.getPropertyValue(i):o[i])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(n,{transformPagePoint:i}){return V0(n,i)}build(n,i,o){Pp(n,i,o.transformTemplate)}scrapeMotionValuesFromProps(n,i,o){return qp(n,i,o)}}const G0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function RM(t,n,i,o){q0(t,n,void 0,o);for(const l in n.attrs)t.setAttribute(G0.has(l)?l:Gp(l),n.attrs[l])}class DM extends F0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$t}getBaseTargetFromProps(n,i){return n[i]}readValueFromInstance(n,i){if(co.has(i)){const o=g0(i);return o&&o.default||0}return i=G0.has(i)?i:Gp(i),n.getAttribute(i)}scrapeMotionValuesFromProps(n,i,o){return U0(n,i,o)}build(n,i,o){M0(n,i,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(n,i,o,l){RM(n,i,o,l)}mount(n){this.isSVGTag=D0(n.tagName),super.mount(n)}}const NM=(t,n)=>Hp(t)?new DM(n):new MM(n,{allowProjection:t!==w.Fragment});function Qs(t,n,i){const o=t.getProps();return Fp(o,n,i!==void 0?i:o.custom,t)}const Kf=t=>Array.isArray(t);function UM(t,n,i){t.hasValue(n)?t.getValue(n).set(i):t.addValue(n,to(i))}function zM(t){return Kf(t)?t[t.length-1]||0:t}function OM(t,n){const i=Qs(t,n);let{transitionEnd:o={},transition:l={},...u}=i||{};u={...u,...o};for(const f in u){const h=zM(u[f]);UM(t,f,h)}}function BM(t){return!!(gn(t)&&t.add)}function Qf(t,n){const i=t.getValue("willChange");if(BM(i))return i.add(n);if(!i&&Ha.WillChange){const o=new Ha.WillChange("auto");t.addValue("willChange",o),o.add(n)}}function $0(t){return t.props[z0]}const LM=t=>t!==null;function IM(t,{repeat:n,repeatType:i="loop"},o){const l=t.filter(LM),u=n&&i!=="loop"&&n%2===1?0:l.length-1;return l[u]}const PM={type:"spring",stiffness:500,damping:25,restSpeed:10},VM=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),HM={type:"keyframes",duration:.8},FM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qM=(t,{keyframes:n})=>n.length>2?HM:co.has(t)?t.startsWith("scale")?VM(n[1]):PM:FM;function GM({when:t,delay:n,delayChildren:i,staggerChildren:o,staggerDirection:l,repeat:u,repeatType:f,repeatDelay:h,from:m,elapsed:g,...v}){return!!Object.keys(v).length}const $p=(t,n,i,o={},l,u)=>f=>{const h=Np(o,t)||{},m=h.delay||o.delay||0;let{elapsed:g=0}=o;g=g-va(m);const v={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:n.getVelocity(),...h,delay:-g,onUpdate:S=>{n.set(S),h.onUpdate&&h.onUpdate(S)},onComplete:()=>{f(),h.onComplete&&h.onComplete()},name:t,motionValue:n,element:u?void 0:l};GM(h)||Object.assign(v,qM(t,v)),v.duration&&(v.duration=va(v.duration)),v.repeatDelay&&(v.repeatDelay=va(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let x=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(qf(v),v.delay===0&&(x=!0)),(Ha.instantAnimations||Ha.skipAnimations)&&(x=!0,qf(v),v.delay=0),v.allowFlatten=!h.type&&!h.ease,x&&!u&&n.get()!==void 0){const S=IM(v.keyframes,h);if(S!==void 0){Ct.update(()=>{v.onUpdate(S),v.onComplete()});return}}return h.isSync?new Rp(v):new fE(v)};function $M({protectedKeys:t,needsAnimating:n},i){const o=t.hasOwnProperty(i)&&n[i]!==!0;return n[i]=!1,o}function Y0(t,n,{delay:i=0,transitionOverride:o,type:l}={}){let{transition:u=t.getDefaultTransition(),transitionEnd:f,...h}=n;o&&(u=o);const m=[],g=l&&t.animationState&&t.animationState.getState()[l];for(const v in h){const x=t.getValue(v,t.latestValues[v]??null),S=h[v];if(S===void 0||g&&$M(g,v))continue;const C={delay:i,...Np(u||{},v)},_=x.get();if(_!==void 0&&!x.isAnimating&&!Array.isArray(S)&&S===_&&!C.velocity)continue;let k=!1;if(window.MotionHandoffAnimation){const D=$0(t);if(D){const L=window.MotionHandoffAnimation(D,v,Ct);L!==null&&(C.startTime=L,k=!0)}}Qf(t,v),x.start($p(v,x,S,t.shouldReduceMotion&&p0.has(v)?{type:!1}:C,t,k));const j=x.animation;j&&m.push(j)}return f&&Promise.all(m).then(()=>{Ct.update(()=>{f&&OM(t,f)})}),m}function X0(t,n,i,o=0,l=1){const u=Array.from(t).sort((g,v)=>g.sortNodePosition(v)).indexOf(n),f=t.size,h=(f-1)*o;return typeof i=="function"?i(u,f):l===1?u*o:h-u*o}function Zf(t,n,i={}){const o=Qs(t,n,i.type==="exit"?t.presenceContext?.custom:void 0);let{transition:l=t.getDefaultTransition()||{}}=o||{};i.transitionOverride&&(l=i.transitionOverride);const u=o?()=>Promise.all(Y0(t,o,i)):()=>Promise.resolve(),f=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:x}=l;return YM(t,n,m,g,v,x,i)}:()=>Promise.resolve(),{when:h}=l;if(h){const[m,g]=h==="beforeChildren"?[u,f]:[f,u];return m().then(()=>g())}else return Promise.all([u(),f(i.delay)])}function YM(t,n,i=0,o=0,l=0,u=1,f){const h=[];for(const m of t.variantChildren)m.notify("AnimationStart",n),h.push(Zf(m,n,{...f,delay:i+(typeof o=="function"?0:o)+X0(t.variantChildren,m,o,l,u)}).then(()=>m.notify("AnimationComplete",n)));return Promise.all(h)}function XM(t,n,i={}){t.notify("AnimationStart",n);let o;if(Array.isArray(n)){const l=n.map(u=>Zf(t,u,i));o=Promise.all(l)}else if(typeof n=="string")o=Zf(t,n,i);else{const l=typeof n=="function"?Qs(t,n,i.custom):n;o=Promise.all(Y0(t,l,i))}return o.then(()=>{t.notify("AnimationComplete",n)})}function W0(t,n){if(!Array.isArray(n))return!1;const i=n.length;if(i!==t.length)return!1;for(let o=0;o<i;o++)if(n[o]!==t[o])return!1;return!0}const WM=Ip.length;function K0(t){if(!t)return;if(!t.isControllingVariants){const i=t.parent?K0(t.parent)||{}:{};return t.props.initial!==void 0&&(i.initial=t.props.initial),i}const n={};for(let i=0;i<WM;i++){const o=Ip[i],l=t.props[o];(xr(l)||l===!1)&&(n[o]=l)}return n}const KM=[...Lp].reverse(),QM=Lp.length;function ZM(t){return n=>Promise.all(n.map(({animation:i,options:o})=>XM(t,i,o)))}function JM(t){let n=ZM(t),i=Xv(),o=!0;const l=m=>(g,v)=>{const x=Qs(t,v,m==="exit"?t.presenceContext?.custom:void 0);if(x){const{transition:S,transitionEnd:C,..._}=x;g={...g,..._,...C}}return g};function u(m){n=m(t)}function f(m){const{props:g}=t,v=K0(t.parent)||{},x=[],S=new Set;let C={},_=1/0;for(let j=0;j<QM;j++){const D=KM[j],L=i[D],E=g[D]!==void 0?g[D]:v[D],U=xr(E),P=D===m?L.isActive:null;P===!1&&(_=j);let Q=E===v[D]&&E!==g[D]&&U;if(Q&&o&&t.manuallyAnimateOnMount&&(Q=!1),L.protectedKeys={...C},!L.isActive&&P===null||!E&&!L.prevProp||Dc(E)||typeof E=="boolean")continue;const ne=eR(L.prevProp,E);let W=ne||D===m&&L.isActive&&!Q&&U||j>_&&U,ce=!1;const se=Array.isArray(E)?E:[E];let Ee=se.reduce(l(D),{});P===!1&&(Ee={});const{prevResolvedValues:$e={}}=L,de={...$e,...Ee},Ae=ee=>{W=!0,S.has(ee)&&(ce=!0,S.delete(ee)),L.needsAnimating[ee]=!0;const ie=t.getValue(ee);ie&&(ie.liveStyle=!1)};for(const ee in de){const ie=Ee[ee],ve=$e[ee];if(C.hasOwnProperty(ee))continue;let Me=!1;Kf(ie)&&Kf(ve)?Me=!W0(ie,ve):Me=ie!==ve,Me?ie!=null?Ae(ee):S.add(ee):ie!==void 0&&S.has(ee)?Ae(ee):L.protectedKeys[ee]=!0}L.prevProp=E,L.prevResolvedValues=Ee,L.isActive&&(C={...C,...Ee}),o&&t.blockInitialAnimation&&(W=!1);const Oe=Q&&ne;W&&(!Oe||ce)&&x.push(...se.map(ee=>{const ie={type:D};if(typeof ee=="string"&&o&&!Oe&&t.manuallyAnimateOnMount&&t.parent){const{parent:ve}=t,Me=Qs(ve,ee);if(ve.enteringChildren&&Me){const{delayChildren:ge}=Me.transition||{};ie.delay=X0(ve.enteringChildren,t,ge)}}return{animation:ee,options:ie}}))}if(S.size){const j={};if(typeof g.initial!="boolean"){const D=Qs(t,Array.isArray(g.initial)?g.initial[0]:g.initial);D&&D.transition&&(j.transition=D.transition)}S.forEach(D=>{const L=t.getBaseTarget(D),E=t.getValue(D);E&&(E.liveStyle=!0),j[D]=L??null}),x.push({animation:j})}let k=!!x.length;return o&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(k=!1),o=!1,k?n(x):Promise.resolve()}function h(m,g){if(i[m].isActive===g)return Promise.resolve();t.variantChildren?.forEach(x=>x.animationState?.setActive(m,g)),i[m].isActive=g;const v=f(m);for(const x in i)i[x].protectedKeys={};return v}return{animateChanges:f,setActive:h,setAnimateFunction:u,getState:()=>i,reset:()=>{i=Xv()}}}function eR(t,n){return typeof n=="string"?n!==t:Array.isArray(n)?!W0(n,t):!1}function Bi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Xv(){return{animate:Bi(!0),whileInView:Bi(),whileHover:Bi(),whileTap:Bi(),whileDrag:Bi(),whileFocus:Bi(),exit:Bi()}}class vi{constructor(n){this.isMounted=!1,this.node=n}update(){}}class tR extends vi{constructor(n){super(n),n.animationState||(n.animationState=JM(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();Dc(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:i}=this.node.prevProps||{};n!==i&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let nR=0;class aR extends vi{constructor(){super(...arguments),this.id=nR++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:i}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===o)return;const l=this.node.animationState.setActive("exit",!n);i&&!n&&l.then(()=>{i(this.id)})}mount(){const{register:n,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const iR={animation:{Feature:tR},exit:{Feature:aR}};function br(t,n,i,o={passive:!0}){return t.addEventListener(n,i,o),()=>t.removeEventListener(n,i)}function Nr(t){return{point:{x:t.pageX,y:t.pageY}}}const sR=t=>n=>Op(n)&&t(n,Nr(n));function ur(t,n,i,o){return br(t,n,sR(i),o)}const Q0=1e-4,oR=1-Q0,rR=1+Q0,Z0=.01,lR=0-Z0,cR=0+Z0;function bn(t){return t.max-t.min}function uR(t,n,i){return Math.abs(t-n)<=i}function Wv(t,n,i,o=.5){t.origin=o,t.originPoint=kt(n.min,n.max,t.origin),t.scale=bn(i)/bn(n),t.translate=kt(i.min,i.max,t.origin)-t.originPoint,(t.scale>=oR&&t.scale<=rR||isNaN(t.scale))&&(t.scale=1),(t.translate>=lR&&t.translate<=cR||isNaN(t.translate))&&(t.translate=0)}function dr(t,n,i,o){Wv(t.x,n.x,i.x,o?o.originX:void 0),Wv(t.y,n.y,i.y,o?o.originY:void 0)}function Kv(t,n,i){t.min=i.min+n.min,t.max=t.min+bn(n)}function dR(t,n,i){Kv(t.x,n.x,i.x),Kv(t.y,n.y,i.y)}function Qv(t,n,i){t.min=n.min-i.min,t.max=t.min+bn(n)}function xc(t,n,i){Qv(t.x,n.x,i.x),Qv(t.y,n.y,i.y)}function ea(t){return[t("x"),t("y")]}const J0=({current:t})=>t?t.ownerDocument.defaultView:null,Zv=(t,n)=>Math.abs(t-n);function fR(t,n){const i=Zv(t.x,n.x),o=Zv(t.y,n.y);return Math.sqrt(i**2+o**2)}class eS{constructor(n,i,{transformPagePoint:o,contextWindow:l=window,dragSnapToOrigin:u=!1,distanceThreshold:f=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=lf(this.lastMoveEventInfo,this.history),C=this.startEvent!==null,_=fR(S.offset,{x:0,y:0})>=this.distanceThreshold;if(!C&&!_)return;const{point:k}=S,{timestamp:j}=cn;this.history.push({...k,timestamp:j});const{onStart:D,onMove:L}=this.handlers;C||(D&&D(this.lastMoveEvent,S),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,S)},this.handlePointerMove=(S,C)=>{this.lastMoveEvent=S,this.lastMoveEventInfo=rf(C,this.transformPagePoint),Ct.update(this.updatePoint,!0)},this.handlePointerUp=(S,C)=>{this.end();const{onEnd:_,onSessionEnd:k,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=lf(S.type==="pointercancel"?this.lastMoveEventInfo:rf(C,this.transformPagePoint),this.history);this.startEvent&&_&&_(S,D),k&&k(S,D)},!Op(n))return;this.dragSnapToOrigin=u,this.handlers=i,this.transformPagePoint=o,this.distanceThreshold=f,this.contextWindow=l||window;const h=Nr(n),m=rf(h,this.transformPagePoint),{point:g}=m,{timestamp:v}=cn;this.history=[{...g,timestamp:v}];const{onSessionStart:x}=i;x&&x(n,lf(m,this.history)),this.removeListeners=Mr(ur(this.contextWindow,"pointermove",this.handlePointerMove),ur(this.contextWindow,"pointerup",this.handlePointerUp),ur(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),gi(this.updatePoint)}}function rf(t,n){return n?{point:n(t.point)}:t}function Jv(t,n){return{x:t.x-n.x,y:t.y-n.y}}function lf({point:t},n){return{point:t,delta:Jv(t,tS(n)),offset:Jv(t,pR(n)),velocity:hR(n,.1)}}function pR(t){return t[0]}function tS(t){return t[t.length-1]}function hR(t,n){if(t.length<2)return{x:0,y:0};let i=t.length-1,o=null;const l=tS(t);for(;i>=0&&(o=t[i],!(l.timestamp-o.timestamp>va(n)));)i--;if(!o)return{x:0,y:0};const u=na(l.timestamp-o.timestamp);if(u===0)return{x:0,y:0};const f={x:(l.x-o.x)/u,y:(l.y-o.y)/u};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function mR(t,{min:n,max:i},o){return n!==void 0&&t<n?t=o?kt(n,t,o.min):Math.max(t,n):i!==void 0&&t>i&&(t=o?kt(i,t,o.max):Math.min(t,i)),t}function ex(t,n,i){return{min:n!==void 0?t.min+n:void 0,max:i!==void 0?t.max+i-(t.max-t.min):void 0}}function gR(t,{top:n,left:i,bottom:o,right:l}){return{x:ex(t.x,i,l),y:ex(t.y,n,o)}}function tx(t,n){let i=n.min-t.min,o=n.max-t.max;return n.max-n.min<t.max-t.min&&([i,o]=[o,i]),{min:i,max:o}}function yR(t,n){return{x:tx(t.x,n.x),y:tx(t.y,n.y)}}function vR(t,n){let i=.5;const o=bn(t),l=bn(n);return l>o?i=gr(n.min,n.max-o,t.min):o>l&&(i=gr(t.min,t.max-l,n.min)),Va(0,1,i)}function xR(t,n){const i={};return n.min!==void 0&&(i.min=n.min-t.min),n.max!==void 0&&(i.max=n.max-t.min),i}const Jf=.35;function bR(t=Jf){return t===!1?t=0:t===!0&&(t=Jf),{x:nx(t,"left","right"),y:nx(t,"top","bottom")}}function nx(t,n,i){return{min:ax(t,n),max:ax(t,i)}}function ax(t,n){return typeof t=="number"?t:t[n]||0}const SR=new WeakMap;class _R{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$t(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:i=!1,distanceThreshold:o}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const u=x=>{const{dragSnapToOrigin:S}=this.getProps();S?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(Nr(x).point)},f=(x,S)=>{const{drag:C,dragPropagation:_,onDragStart:k}=this.getProps();if(C&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kE(C),!this.openDragLock))return;this.latestPointerEvent=x,this.latestPanInfo=S,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ea(D=>{let L=this.getAxisMotionValue(D).get()||0;if(xa.test(L)){const{projection:E}=this.visualElement;if(E&&E.layout){const U=E.layout.layoutBox[D];U&&(L=bn(U)*(parseFloat(L)/100))}}this.originPoint[D]=L}),k&&Ct.postRender(()=>k(x,S)),Qf(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},h=(x,S)=>{this.latestPointerEvent=x,this.latestPanInfo=S;const{dragPropagation:C,dragDirectionLock:_,onDirectionLock:k,onDrag:j}=this.getProps();if(!C&&!this.openDragLock)return;const{offset:D}=S;if(_&&this.currentDirection===null){this.currentDirection=wR(D),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",S.point,D),this.updateAxis("y",S.point,D),this.visualElement.render(),j&&j(x,S)},m=(x,S)=>{this.latestPointerEvent=x,this.latestPanInfo=S,this.stop(x,S),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>ea(x=>this.getAnimationState(x)==="paused"&&this.getAxisMotionValue(x).animation?.play()),{dragSnapToOrigin:v}=this.getProps();this.panSession=new eS(n,{onSessionStart:u,onStart:f,onMove:h,onSessionEnd:m,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,distanceThreshold:o,contextWindow:J0(this.visualElement)})}stop(n,i){const o=n||this.latestPointerEvent,l=i||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!l||!o)return;const{velocity:f}=l;this.startAnimation(f);const{onDragEnd:h}=this.getProps();h&&Ct.postRender(()=>h(o,l))}cancel(){this.isDragging=!1;const{projection:n,animationState:i}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(n,i,o){const{drag:l}=this.getProps();if(!o||!Kl(n,l,this.currentDirection))return;const u=this.getAxisMotionValue(n);let f=this.originPoint[n]+o[n];this.constraints&&this.constraints[n]&&(f=mR(f,this.constraints[n],this.elastic[n])),u.set(f)}resolveConstraints(){const{dragConstraints:n,dragElastic:i}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,l=this.constraints;n&&qs(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=gR(o.layoutBox,n):this.constraints=!1,this.elastic=bR(i),l!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&ea(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=xR(o.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:i}=this.getProps();if(!n||!qs(n))return!1;const o=n.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const u=CM(o,l.root,this.visualElement.getTransformPagePoint());let f=yR(l.layout.layoutBox,u);if(i){const h=i(SM(f));this.hasMutatedConstraints=!!h,h&&(f=L0(h))}return f}startAnimation(n){const{drag:i,dragMomentum:o,dragElastic:l,dragTransition:u,dragSnapToOrigin:f,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},g=ea(v=>{if(!Kl(v,i,this.currentDirection))return;let x=m&&m[v]||{};f&&(x={min:0,max:0});const S=l?200:1e6,C=l?40:1e7,_={type:"inertia",velocity:o?n[v]:0,bounceStiffness:S,bounceDamping:C,timeConstant:750,restDelta:1,restSpeed:10,...u,...x};return this.startAxisValueAnimation(v,_)});return Promise.all(g).then(h)}startAxisValueAnimation(n,i){const o=this.getAxisMotionValue(n);return Qf(this.visualElement,n),o.start($p(n,o,0,i,this.visualElement,!1))}stopAnimation(){ea(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){ea(n=>this.getAxisMotionValue(n).animation?.pause())}getAnimationState(n){return this.getAxisMotionValue(n).animation?.state}getAxisMotionValue(n){const i=`_drag${n.toUpperCase()}`,o=this.visualElement.getProps(),l=o[i];return l||this.visualElement.getValue(n,(o.initial?o.initial[n]:void 0)||0)}snapToCursor(n){ea(i=>{const{drag:o}=this.getProps();if(!Kl(i,o,this.currentDirection))return;const{projection:l}=this.visualElement,u=this.getAxisMotionValue(i);if(l&&l.layout){const{min:f,max:h}=l.layout.layoutBox[i];u.set(n[i]-kt(f,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:i}=this.getProps(),{projection:o}=this.visualElement;if(!qs(i)||!o||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};ea(f=>{const h=this.getAxisMotionValue(f);if(h&&this.constraints!==!1){const m=h.get();l[f]=vR({min:m,max:m},this.constraints[f])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),ea(f=>{if(!Kl(f,n,null))return;const h=this.getAxisMotionValue(f),{min:m,max:g}=this.constraints[f];h.set(kt(m,g,l[f]))})}addListeners(){if(!this.visualElement.current)return;SR.set(this.visualElement,this);const n=this.visualElement.current,i=ur(n,"pointerdown",m=>{const{drag:g,dragListener:v=!0}=this.getProps();g&&v&&this.start(m)}),o=()=>{const{dragConstraints:m}=this.getProps();qs(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,u=l.addEventListener("measure",o);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),Ct.read(o);const f=br(window,"resize",()=>this.scalePositionWithinConstraints()),h=l.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:g})=>{this.isDragging&&g&&(ea(v=>{const x=this.getAxisMotionValue(v);x&&(this.originPoint[v]+=m[v].translate,x.set(x.get()+m[v].translate))}),this.visualElement.render())}));return()=>{f(),i(),u(),h&&h()}}getProps(){const n=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:o=!1,dragPropagation:l=!1,dragConstraints:u=!1,dragElastic:f=Jf,dragMomentum:h=!0}=n;return{...n,drag:i,dragDirectionLock:o,dragPropagation:l,dragConstraints:u,dragElastic:f,dragMomentum:h}}}function Kl(t,n,i){return(n===!0||n===t)&&(i===null||i===t)}function wR(t,n=10){let i=null;return Math.abs(t.y)>n?i="y":Math.abs(t.x)>n&&(i="x"),i}class CR extends vi{constructor(n){super(n),this.removeGroupControls=aa,this.removeListeners=aa,this.controls=new _R(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||aa}unmount(){this.removeGroupControls(),this.removeListeners()}}const ix=t=>(n,i)=>{t&&Ct.postRender(()=>t(n,i))};class TR extends vi{constructor(){super(...arguments),this.removePointerDownListener=aa}onPointerDown(n){this.session=new eS(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:J0(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:i,onPan:o,onPanEnd:l}=this.node.getProps();return{onSessionStart:ix(n),onStart:ix(i),onMove:o,onEnd:(u,f)=>{delete this.session,l&&Ct.postRender(()=>l(u,f))}}}mount(){this.removePointerDownListener=ur(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const lc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let cf=!1;class jR extends w.Component{componentDidMount(){const{visualElement:n,layoutGroup:i,switchLayoutGroup:o,layoutId:l}=this.props,{projection:u}=n;u&&(i.group&&i.group.add(u),o&&o.register&&l&&o.register(u),cf&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),lc.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:i,visualElement:o,drag:l,isPresent:u}=this.props,{projection:f}=o;return f&&(f.isPresent=u,cf=!0,l||n.layoutDependency!==i||i===void 0||n.isPresent!==u?f.willUpdate():this.safeToRemove(),n.isPresent!==u&&(u?f.promote():f.relegate()||Ct.postRender(()=>{const h=f.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),zp.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:i,switchLayoutGroup:o}=this.props,{projection:l}=n;cf=!0,l&&(l.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(l),o&&o.deregister&&o.deregister(l))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function nS(t){const[n,i]=C0(),o=w.useContext(hp);return c.jsx(jR,{...t,layoutGroup:o,switchLayoutGroup:w.useContext(O0),isPresent:n,safeToRemove:i})}function AR(t,n,i){const o=gn(t)?t:to(t);return o.start($p("",o,n,i)),o.animation}const kR=(t,n)=>t.depth-n.depth;class ER{constructor(){this.children=[],this.isDirty=!1}add(n){yp(this.children,n),this.isDirty=!0}remove(n){vp(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(kR),this.isDirty=!1,this.children.forEach(n)}}function MR(t,n){const i=Mn.now(),o=({timestamp:l})=>{const u=l-i;u>=n&&(gi(o),t(u-n))};return Ct.setup(o,!0),()=>gi(o)}const aS=["TopLeft","TopRight","BottomLeft","BottomRight"],RR=aS.length,sx=t=>typeof t=="string"?parseFloat(t):t,ox=t=>typeof t=="number"||De.test(t);function DR(t,n,i,o,l,u){l?(t.opacity=kt(0,i.opacity??1,NR(o)),t.opacityExit=kt(n.opacity??1,0,UR(o))):u&&(t.opacity=kt(n.opacity??1,i.opacity??1,o));for(let f=0;f<RR;f++){const h=`border${aS[f]}Radius`;let m=rx(n,h),g=rx(i,h);if(m===void 0&&g===void 0)continue;m||(m=0),g||(g=0),m===0||g===0||ox(m)===ox(g)?(t[h]=Math.max(kt(sx(m),sx(g),o),0),(xa.test(g)||xa.test(m))&&(t[h]+="%")):t[h]=g}(n.rotate||i.rotate)&&(t.rotate=kt(n.rotate||0,i.rotate||0,o))}function rx(t,n){return t[n]!==void 0?t[n]:t.borderRadius}const NR=iS(0,.5,Fb),UR=iS(.5,.95,aa);function iS(t,n,i){return o=>o<t?0:o>n?1:i(gr(t,n,o))}function lx(t,n){t.min=n.min,t.max=n.max}function ra(t,n){lx(t.x,n.x),lx(t.y,n.y)}function cx(t,n){t.translate=n.translate,t.scale=n.scale,t.originPoint=n.originPoint,t.origin=n.origin}function ux(t,n,i,o,l){return t-=n,t=vc(t,1/i,o),l!==void 0&&(t=vc(t,1/l,o)),t}function zR(t,n=0,i=1,o=.5,l,u=t,f=t){if(xa.test(n)&&(n=parseFloat(n),n=kt(f.min,f.max,n/100)-f.min),typeof n!="number")return;let h=kt(u.min,u.max,o);t===u&&(h-=n),t.min=ux(t.min,n,i,h,l),t.max=ux(t.max,n,i,h,l)}function dx(t,n,[i,o,l],u,f){zR(t,n[i],n[o],n[l],n.scale,u,f)}const OR=["x","scaleX","originX"],BR=["y","scaleY","originY"];function fx(t,n,i,o){dx(t.x,n,OR,i?i.x:void 0,o?o.x:void 0),dx(t.y,n,BR,i?i.y:void 0,o?o.y:void 0)}function px(t){return t.translate===0&&t.scale===1}function sS(t){return px(t.x)&&px(t.y)}function hx(t,n){return t.min===n.min&&t.max===n.max}function LR(t,n){return hx(t.x,n.x)&&hx(t.y,n.y)}function mx(t,n){return Math.round(t.min)===Math.round(n.min)&&Math.round(t.max)===Math.round(n.max)}function oS(t,n){return mx(t.x,n.x)&&mx(t.y,n.y)}function gx(t){return bn(t.x)/bn(t.y)}function yx(t,n){return t.translate===n.translate&&t.scale===n.scale&&t.originPoint===n.originPoint}class IR{constructor(){this.members=[]}add(n){yp(this.members,n),n.scheduleRender()}remove(n){if(vp(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(n){const i=this.members.findIndex(l=>n===l);if(i===0)return!1;let o;for(let l=i;l>=0;l--){const u=this.members[l];if(u.isPresent!==!1){o=u;break}}return o?(this.promote(o),!0):!1}promote(n,i){const o=this.lead;if(n!==o&&(this.prevLead=o,this.lead=n,n.show(),o)){o.instance&&o.scheduleRender(),n.scheduleRender(),n.resumeFrom=o,i&&(n.resumeFrom.preserveOpacity=!0),o.snapshot&&(n.snapshot=o.snapshot,n.snapshot.latestValues=o.animationValues||o.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:l}=n.options;l===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:i,resumingFrom:o}=n;i.onExitComplete&&i.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function PR(t,n,i){let o="";const l=t.x.translate/n.x,u=t.y.translate/n.y,f=i?.z||0;if((l||u||f)&&(o=`translate3d(${l}px, ${u}px, ${f}px) `),(n.x!==1||n.y!==1)&&(o+=`scale(${1/n.x}, ${1/n.y}) `),i){const{transformPerspective:g,rotate:v,rotateX:x,rotateY:S,skewX:C,skewY:_}=i;g&&(o=`perspective(${g}px) ${o}`),v&&(o+=`rotate(${v}deg) `),x&&(o+=`rotateX(${x}deg) `),S&&(o+=`rotateY(${S}deg) `),C&&(o+=`skewX(${C}deg) `),_&&(o+=`skewY(${_}deg) `)}const h=t.x.scale*n.x,m=t.y.scale*n.y;return(h!==1||m!==1)&&(o+=`scale(${h}, ${m})`),o||"none"}const uf=["","X","Y","Z"],VR=1e3;let HR=0;function df(t,n,i,o){const{latestValues:l}=n;l[t]&&(i[t]=l[t],n.setStaticValue(t,0),o&&(o[t]=0))}function rS(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:n}=t.options;if(!n)return;const i=$0(n);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:l,layoutId:u}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",Ct,!(l||u))}const{parent:o}=t;o&&!o.hasCheckedOptimisedAppear&&rS(o)}function lS({attachResizeListener:t,defaultParent:n,measureScroll:i,checkIsScrollRoot:o,resetTransform:l}){return class{constructor(f={},h=n?.()){this.id=HR++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(GR),this.nodes.forEach(WR),this.nodes.forEach(KR),this.nodes.forEach($R)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new ER)}addEventListener(f,h){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new Sp),this.eventHandlers.get(f).add(h)}notifyListeners(f,...h){const m=this.eventHandlers.get(f);m&&m.notify(...h)}hasListeners(f){return this.eventHandlers.has(f)}mount(f){if(this.instance)return;this.isSVG=w0(f)&&!UE(f),this.instance=f;const{layoutId:h,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||h)&&(this.isLayoutDirty=!0),t){let v,x=0;const S=()=>this.root.updateBlockedByResize=!1;Ct.read(()=>{x=window.innerWidth}),t(f,()=>{const C=window.innerWidth;C!==x&&(x=C,this.root.updateBlockedByResize=!0,v&&v(),v=MR(S,250),lc.hasAnimatedSinceResize&&(lc.hasAnimatedSinceResize=!1,this.nodes.forEach(bx)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||m)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:x,hasRelativeLayoutChanged:S,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||g.getDefaultTransition()||tD,{onLayoutAnimationStart:k,onLayoutAnimationComplete:j}=g.getProps(),D=!this.targetLayout||!oS(this.targetLayout,C),L=!x&&S;if(this.options.layoutRoot||this.resumeFrom||L||x&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...Np(_,"layout"),onPlay:k,onComplete:j};(g.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(v,L)}else x||bx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),gi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(QR),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const x=this.path[v];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(vx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(xx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(XR),this.nodes.forEach(FR),this.nodes.forEach(qR)):this.nodes.forEach(xx),this.clearAllSnapshots();const h=Mn.now();cn.delta=Va(0,1e3/60,h-cn.timestamp),cn.timestamp=h,cn.isProcessing=!0,Zd.update.process(cn),Zd.preRender.process(cn),Zd.render.process(cn),cn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YR),this.sharedNodes.forEach(ZR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ct.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ct.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!bn(this.snapshot.measuredBox.x)&&!bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=$t(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(h=!1),h&&this.instance){const m=o(this.instance);this.scroll={animationId:this.root.animationId,phase:f,isRoot:m,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!l)return;const f=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!sS(this.projectionDelta),m=this.getTransformTemplate(),g=m?m(this.latestValues,""):void 0,v=g!==this.prevTransformTemplateValue;f&&this.instance&&(h||Ii(this.latestValues)||v)&&(l(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return f&&(m=this.removeTransform(m)),nD(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:f}=this.options;if(!f)return $t();const h=f.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(aD))){const{scroll:g}=this.root;g&&(Gs(h.x,g.offset.x),Gs(h.y,g.offset.y))}return h}removeElementScroll(f){const h=$t();if(ra(h,f),this.scroll?.wasRoot)return h;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:v,options:x}=g;g!==this.root&&v&&x.layoutScroll&&(v.wasRoot&&ra(h,f),Gs(h.x,v.offset.x),Gs(h.y,v.offset.y))}return h}applyTransform(f,h=!1){const m=$t();ra(m,f);for(let g=0;g<this.path.length;g++){const v=this.path[g];!h&&v.options.layoutScroll&&v.scroll&&v!==v.root&&$s(m,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),Ii(v.latestValues)&&$s(m,v.latestValues)}return Ii(this.latestValues)&&$s(m,this.latestValues),m}removeTransform(f){const h=$t();ra(h,f);for(let m=0;m<this.path.length;m++){const g=this.path[m];if(!g.instance||!Ii(g.latestValues))continue;Yf(g.latestValues)&&g.updateSnapshot();const v=$t(),x=g.measurePageBox();ra(v,x),fx(h,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,v)}return Ii(this.latestValues)&&fx(h,this.latestValues),h}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(f||m&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:x}=this.options;if(!this.layout||!(v||x))return;this.resolvedRelativeTargetAt=cn.timestamp;const S=this.getClosestProjectingParent();S&&this.linkedParentVersion!==S.layoutVersion&&!S.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(S&&S.layout?this.createRelativeTarget(S,this.layout.layoutBox,S.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$t(),this.targetWithTransforms=$t()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ra(this.target,this.layout.layoutBox),P0(this.target,this.targetDelta)):ra(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?this.createRelativeTarget(S,this.target,S.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Yf(this.parent.latestValues)||I0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(f,h,m){this.relativeParent=f,this.linkedParentVersion=f.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$t(),this.relativeTargetOrigin=$t(),xc(this.relativeTargetOrigin,h,m),ra(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const f=this.getLead(),h=!!this.resumingFrom||this!==f;let m=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===cn.timestamp&&(m=!1),m)return;const{layout:g,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||v))return;ra(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,S=this.treeScale.y;wM(this.layoutCorrected,this.treeScale,this.path,h),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=$t());const{target:C}=f;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cx(this.prevProjectionDelta.x,this.projectionDelta.x),cx(this.prevProjectionDelta.y,this.projectionDelta.y)),dr(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==S||!yx(this.projectionDelta.x,this.prevProjectionDelta.x)||!yx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){if(this.options.visualElement?.scheduleRender(),f){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ys(),this.projectionDelta=Ys(),this.projectionDeltaWithTransform=Ys()}setAnimationOrigin(f,h=!1){const m=this.snapshot,g=m?m.latestValues:{},v={...this.latestValues},x=Ys();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const S=$t(),C=m?m.source:void 0,_=this.layout?this.layout.source:void 0,k=C!==_,j=this.getStack(),D=!j||j.members.length<=1,L=!!(k&&!D&&this.options.crossfade===!0&&!this.path.some(eD));this.animationProgress=0;let E;this.mixTargetDelta=U=>{const P=U/1e3;Sx(x.x,f.x,P),Sx(x.y,f.y,P),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xc(S,this.layout.layoutBox,this.relativeParent.layout.layoutBox),JR(this.relativeTarget,this.relativeTargetOrigin,S,P),E&&LR(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=$t()),ra(E,this.relativeTarget)),k&&(this.animationValues=v,DR(v,g,this.latestValues,P,L,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(gi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ct.update(()=>{lc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=to(0)),this.currentAnimation=AR(this.motionValue,[0,1e3],{...f,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),f.onUpdate&&f.onUpdate(h)},onStop:()=>{},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(VR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:h,target:m,layout:g,latestValues:v}=f;if(!(!h||!m||!g)){if(this!==f&&this.layout&&g&&cS(this.options.animationType,this.layout.layoutBox,g.layoutBox)){m=this.target||$t();const x=bn(this.layout.layoutBox.x);m.x.min=f.target.x.min,m.x.max=m.x.min+x;const S=bn(this.layout.layoutBox.y);m.y.min=f.target.y.min,m.y.max=m.y.min+S}ra(h,m),$s(h,v),dr(this.projectionDeltaWithTransform,this.layoutCorrected,h,v)}}registerSharedNode(f,h){this.sharedNodes.has(f)||this.sharedNodes.set(f,new IR),this.sharedNodes.get(f).add(h);const g=h.options.initialPromotionConfig;h.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(h):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){const{layoutId:f}=this.options;return f?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:f}=this.options;return f?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:h,preserveFollowOpacity:m}={}){const g=this.getStack();g&&g.promote(this,m),f&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetSkewAndRotation(){const{visualElement:f}=this.options;if(!f)return;let h=!1;const{latestValues:m}=f;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(h=!0),!h)return;const g={};m.z&&df("z",f,g,this.animationValues);for(let v=0;v<uf.length;v++)df(`rotate${uf[v]}`,f,g,this.animationValues),df(`skew${uf[v]}`,f,g,this.animationValues);f.render();for(const v in g)f.setStaticValue(v,g[v]),this.animationValues&&(this.animationValues[v]=g[v]);f.scheduleRender()}applyProjectionStyles(f,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){f.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,f.visibility="",f.opacity="",f.pointerEvents=rc(h?.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=rc(h?.pointerEvents)||""),this.hasProjected&&!Ii(this.latestValues)&&(f.transform=m?m({},""):"none",this.hasProjected=!1);return}f.visibility="";const v=g.animationValues||g.latestValues;this.applyTransformsToTarget();let x=PR(this.projectionDeltaWithTransform,this.treeScale,v);m&&(x=m(v,x)),f.transform=x;const{x:S,y:C}=this.projectionDelta;f.transformOrigin=`${S.origin*100}% ${C.origin*100}% 0`,g.animationValues?f.opacity=g===this?v.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const _ in $f){if(v[_]===void 0)continue;const{correct:k,applyTo:j,isCSSVariable:D}=$f[_],L=x==="none"?v[_]:k(v[_],g);if(j){const E=j.length;for(let U=0;U<E;U++)f[j[U]]=L}else D?this.options.visualElement.renderState.vars[_]=L:f[_]=L}this.options.layoutId&&(f.pointerEvents=g===this?rc(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>f.currentAnimation?.stop()),this.root.nodes.forEach(vx),this.root.sharedNodes.clear()}}}function FR(t){t.updateLayout()}function qR(t){const n=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=t.layout,{animationType:l}=t.options,u=n.source!==t.layout.source;l==="size"?ea(v=>{const x=u?n.measuredBox[v]:n.layoutBox[v],S=bn(x);x.min=i[v].min,x.max=x.min+S}):cS(l,n.layoutBox,i)&&ea(v=>{const x=u?n.measuredBox[v]:n.layoutBox[v],S=bn(i[v]);x.max=x.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+S)});const f=Ys();dr(f,i,n.layoutBox);const h=Ys();u?dr(h,t.applyTransform(o,!0),n.measuredBox):dr(h,i,n.layoutBox);const m=!sS(f);let g=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:x,layout:S}=v;if(x&&S){const C=$t();xc(C,n.layoutBox,x.layoutBox);const _=$t();xc(_,i,S.layoutBox),oS(C,_)||(g=!0),v.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=C,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function GR(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function $R(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function YR(t){t.clearSnapshot()}function vx(t){t.clearMeasurements()}function xx(t){t.isLayoutDirty=!1}function XR(t){const{visualElement:n}=t.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),t.resetTransform()}function bx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function WR(t){t.resolveTargetDelta()}function KR(t){t.calcProjection()}function QR(t){t.resetSkewAndRotation()}function ZR(t){t.removeLeadSnapshot()}function Sx(t,n,i){t.translate=kt(n.translate,0,i),t.scale=kt(n.scale,1,i),t.origin=n.origin,t.originPoint=n.originPoint}function _x(t,n,i,o){t.min=kt(n.min,i.min,o),t.max=kt(n.max,i.max,o)}function JR(t,n,i,o){_x(t.x,n.x,i.x,o),_x(t.y,n.y,i.y,o)}function eD(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const tD={duration:.45,ease:[.4,0,.1,1]},wx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Cx=wx("applewebkit/")&&!wx("chrome/")?Math.round:aa;function Tx(t){t.min=Cx(t.min),t.max=Cx(t.max)}function nD(t){Tx(t.x),Tx(t.y)}function cS(t,n,i){return t==="position"||t==="preserve-aspect"&&!uR(gx(n),gx(i),.2)}function aD(t){return t!==t.root&&t.scroll?.wasRoot}const iD=lS({attachResizeListener:(t,n)=>br(t,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ff={current:void 0},uS=lS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ff.current){const t=new iD({});t.mount(window),t.setOptions({layoutScroll:!0}),ff.current=t}return ff.current},resetTransform:(t,n)=>{t.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),sD={pan:{Feature:TR},drag:{Feature:CR,ProjectionNode:uS,MeasureLayout:nS}};function jx(t,n,i){const{props:o}=t;t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",i==="Start");const l="onHover"+i,u=o[l];u&&Ct.postRender(()=>u(n,Nr(n)))}class oD extends vi{mount(){const{current:n}=this.node;n&&(this.unmount=EE(n,(i,o)=>(jx(this.node,o,"Start"),l=>jx(this.node,l,"End"))))}unmount(){}}class rD extends vi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mr(br(this.node.current,"focus",()=>this.onFocus()),br(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ax(t,n,i){const{props:o}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&o.whileTap&&t.animationState.setActive("whileTap",i==="Start");const l="onTap"+(i==="End"?"":i),u=o[l];u&&Ct.postRender(()=>u(n,Nr(n)))}class lD extends vi{mount(){const{current:n}=this.node;n&&(this.unmount=NE(n,(i,o)=>(Ax(this.node,o,"Start"),(l,{success:u})=>Ax(this.node,l,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ep=new WeakMap,pf=new WeakMap,cD=t=>{const n=ep.get(t.target);n&&n(t)},uD=t=>{t.forEach(cD)};function dD({root:t,...n}){const i=t||document;pf.has(i)||pf.set(i,{});const o=pf.get(i),l=JSON.stringify(n);return o[l]||(o[l]=new IntersectionObserver(uD,{root:t,...n})),o[l]}function fD(t,n,i){const o=dD(n);return ep.set(t,i),o.observe(t),()=>{ep.delete(t),o.unobserve(t)}}const pD={some:0,all:1};class hD extends vi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:i,margin:o,amount:l="some",once:u}=n,f={root:i?i.current:void 0,rootMargin:o,threshold:typeof l=="number"?l:pD[l]},h=m=>{const{isIntersecting:g}=m;if(this.isInView===g||(this.isInView=g,u&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:v,onViewportLeave:x}=this.node.getProps(),S=g?v:x;S&&S(m)};return fD(this.node.current,f,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:i}=this.node;["amount","margin","root"].some(mD(n,i))&&this.startObserver()}unmount(){}}function mD({viewport:t={}},{viewport:n={}}={}){return i=>t[i]!==n[i]}const gD={inView:{Feature:hD},tap:{Feature:lD},focus:{Feature:rD},hover:{Feature:oD}},yD={layout:{ProjectionNode:uS,MeasureLayout:nS}},vD={...iR,...gD,...sD,...yD},xn=bM(vD,NM),xD=({isOpen:t,title:n,message:i,confirmText:o="Confirm",cancelText:l="Cancel",variant:u="danger",onConfirm:f,onCancel:h})=>c.jsx(Ks,{children:t&&c.jsx(xn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},onClick:h,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:c.jsxs(xn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.15},onClick:m=>m.stopPropagation(),style:{width:"100%",maxWidth:"400px",background:"#1e293b",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.3)",overflow:"hidden"},children:[c.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[c.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:u==="danger"?"#ef4444":u==="warning"?"#f59e0b":"#6366f1",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(G_,{size:20,color:"white"})}),c.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:600,color:"#f1f5f9"},children:n})]}),c.jsx("button",{onClick:h,"aria-label":"Close",style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",transition:"color 0.15s ease",fontSize:"22px",fontWeight:300,lineHeight:1},onMouseEnter:m=>m.currentTarget.style.color="#f1f5f9",onMouseLeave:m=>m.currentTarget.style.color="#94a3b8",children:""})]}),c.jsx("div",{style:{padding:"20px"},children:c.jsx("p",{style:{margin:0,fontSize:"14px",lineHeight:1.6,color:"#94a3b8"},children:i})}),c.jsxs("div",{style:{padding:"12px 20px 20px",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[c.jsx("button",{onClick:h,style:{padding:"10px 20px",borderRadius:"10px",border:"1px solid rgba(255, 255, 255, 0.15)",background:"rgba(255, 255, 255, 0.05)",color:"#94a3b8",fontSize:"14px",fontWeight:500,cursor:"pointer",transition:"background 0.15s ease"},onMouseEnter:m=>m.currentTarget.style.background="rgba(255, 255, 255, 0.1)",onMouseLeave:m=>m.currentTarget.style.background="rgba(255, 255, 255, 0.05)",children:l}),c.jsx("button",{onClick:f,style:{padding:"10px 20px",borderRadius:"10px",border:"none",background:u==="danger"?"#ef4444":u==="warning"?"#f59e0b":"#6366f1",color:"white",fontSize:"14px",fontWeight:500,cursor:"pointer",transition:"background 0.15s ease"},onMouseEnter:m=>m.currentTarget.style.opacity="0.9",onMouseLeave:m=>m.currentTarget.style.opacity="1",children:o})]})]})})});let Ps=null;const cc={init:t=>{Ps=t},show:t=>new Promise(n=>{console.log("[ConfirmModal] show() called, setConfirmState exists:",!!Ps),Ps?Ps({isOpen:!0,title:t.title,message:t.message,confirmText:t.confirmText||"Confirm",cancelText:t.cancelText||"Cancel",variant:t.variant||"danger",callback:n}):(console.warn("[ConfirmModal] Store not initialized! Using native confirm."),n(window.confirm(t.message)))}),close:t=>{Ps&&Ps(n=>(n.callback&&n.callback(t),{...n,isOpen:!1,callback:null}))}},Zt=cc.show,bD=()=>{const[t,n]=ya.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",variant:"danger",callback:null});return ya.useEffect(()=>(console.log("[ConfirmModal] Initializing confirm store..."),cc.init(n),()=>{console.log("[ConfirmModal] Cleanup - resetting store")}),[]),c.jsx(xD,{isOpen:t.isOpen,title:t.title,message:t.message,confirmText:t.confirmText,cancelText:t.cancelText,variant:t.variant,onConfirm:()=>cc.close(!0),onCancel:()=>cc.close(!1)})},SD=t=>{if(!t||t==="undefined"||t==="null")return"?";const n=String(t).trim();if(!n||n.length===0)return"?";const i=n.split(/\s+/).filter(o=>o.length>0);return i.length===0?"?":i.length===1?i[0][0]?.toUpperCase()||"?":i.map(o=>o[0]).join("").toUpperCase().slice(0,2)||"?"},_D=({isOpen:t,onClose:n,isDarkMode:i=!1})=>{const[o,l]=w.useState([]),[u,f]=w.useState(!1),[h,m]=w.useState(""),[g,v]=w.useState(null);w.useEffect(()=>{t&&x()},[t]);const x=async()=>{f(!0),v(null);try{const _=await ta.getAllUsers();l(_)}catch(_){console.error("Failed to load users:",_),_.response?.status===403?v("Access denied. You need admin privileges to view this panel."):v("Failed to load users. Please try again.")}finally{f(!1)}},S=async(_,k)=>{if(await Zt({title:"Delete User",message:`Are you sure you want to delete user "${k}"? This action cannot be undone and all their data will be permanently deleted.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))try{await ta.deleteUser(_),await x(),oe.success(`User "${k}" has been deleted successfully.`)}catch(D){console.error("Failed to delete user:",D),D.response?.status===403?oe.error("Access denied. You need admin privileges to delete users."):oe.error("Failed to delete user. Please try again.")}},C=o.filter(_=>_.username.toLowerCase().includes(h.toLowerCase())||_.email.toLowerCase().includes(h.toLowerCase()));return t?c.jsx("div",{className:`${M.modalOverlay} ${i?M.darkMode:""}`,onClick:n,children:c.jsxs("div",{className:M.modal,onClick:_=>_.stopPropagation(),style:{maxWidth:"900px",width:"90%"},children:[c.jsxs("div",{className:M.modalHeader,children:[c.jsx("h2",{children:" Admin Panel - User Management"}),c.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),c.jsxs("div",{className:M.modalBody,style:{maxHeight:"70vh",overflowY:"auto"},children:[g&&c.jsx("div",{style:{padding:"12px",backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)",borderRadius:"6px",color:"#d32f2f",marginBottom:"16px"},children:g}),c.jsx("div",{className:M.formGroup,style:{marginBottom:"16px"},children:c.jsx("input",{type:"text",placeholder:"Search users by username or email...",value:h,onChange:_=>m(_.target.value),className:M.formInput,style:{margin:0}})}),u?c.jsx("div",{className:M.loadingState,children:"Loading users..."}):C.length===0?c.jsx("div",{className:M.emptyState,children:h?"No users match your search":"No users found"}):c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[c.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"6px",fontWeight:600,fontSize:"14px",color:"var(--text)"},children:["Total Users: ",C.length]}),c.jsx("div",{style:{overflowX:"auto"},children:c.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"var(--surface)",borderRadius:"8px",overflow:"hidden"},children:[c.jsx("thead",{children:c.jsxs("tr",{style:{backgroundColor:"var(--background)",borderBottom:"2px solid var(--border)"},children:[c.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"User"}),c.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Email"}),c.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Status"}),c.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Actions"})]})}),c.jsx("tbody",{children:C.map(_=>c.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",transition:"background-color 0.2s"},onMouseEnter:k=>{k.currentTarget.style.backgroundColor="var(--background)"},onMouseLeave:k=>{k.currentTarget.style.backgroundColor="transparent"},children:[c.jsx("td",{style:{padding:"12px"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[_.avatar?c.jsx("img",{src:_.avatar,alt:_.username,style:{width:"36px",height:"36px",borderRadius:"50%",objectFit:"cover"}}):c.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:"var(--accent)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"14px"},children:SD(_.username)}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:_.username}),_.bio&&c.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_.bio})]})]})}),c.jsx("td",{style:{padding:"12px",fontSize:"13px",color:"var(--text-secondary)"},children:_.email}),c.jsx("td",{style:{padding:"12px"},children:c.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:600,backgroundColor:_.onlineStatus==="online"?"rgba(16, 185, 129, 0.15)":_.onlineStatus==="away"?"rgba(245, 158, 11, 0.15)":"rgba(107, 114, 128, 0.15)",color:_.onlineStatus==="online"?"#10b981":_.onlineStatus==="away"?"#f59e0b":"#6b7280"},children:_.onlineStatus})}),c.jsx("td",{style:{padding:"12px",textAlign:"center"},children:c.jsx("button",{onClick:()=>S(_.id,_.username),style:{padding:"6px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:k=>{k.currentTarget.style.opacity="0.9",k.currentTarget.style.transform="scale(1.05)"},onMouseLeave:k=>{k.currentTarget.style.opacity="1",k.currentTarget.style.transform="scale(1)"},children:" Delete"})})]},_.id))})]})})]})]}),c.jsxs("div",{className:M.modalFooter,children:[c.jsx("button",{onClick:x,className:M.secondaryButton,disabled:u,children:" Refresh"}),c.jsx("button",{onClick:n,className:M.primaryButton,children:"Close"})]})]})}):null};class Yi extends Error{constructor(n,i){const o=new.target.prototype;super(`${n}: Status code '${i}'`),this.statusCode=i,this.__proto__=o}}class Yp extends Error{constructor(n="A timeout occurred."){const i=new.target.prototype;super(n),this.__proto__=i}}class ca extends Error{constructor(n="An abort occurred."){const i=new.target.prototype;super(n),this.__proto__=i}}class wD extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=o}}class CD extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=o}}class TD extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=o}}class kx extends Error{constructor(n){const i=new.target.prototype;super(n),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}}class jD extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.innerErrors=i,this.__proto__=o}}class dS{constructor(n,i,o){this.statusCode=n,this.statusText=i,this.content=o}}class Uc{get(n,i){return this.send({...i,method:"GET",url:n})}post(n,i){return this.send({...i,method:"POST",url:n})}delete(n,i){return this.send({...i,method:"DELETE",url:n})}getCookieString(n){return""}}var X;(function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"})(X||(X={}));class Sr{constructor(){}log(n,i){}}Sr.instance=new Sr;const AD="10.0.0";class qt{static isRequired(n,i){if(n==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(n,i){if(!n||n.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(n,i,o){if(!(n in i))throw new Error(`Unknown ${o} value: ${n}.`)}}class At{static get isBrowser(){return!At.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!At.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!At.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function _r(t,n){let i="";return Qi(t)?(i=`Binary data of length ${t.byteLength}`,n&&(i+=`. Content: '${kD(t)}'`)):typeof t=="string"&&(i=`String data of length ${t.length}`,n&&(i+=`. Content: '${t}'`)),i}function kD(t){const n=new Uint8Array(t);let i="";return n.forEach(o=>{const l=o<16?"0":"";i+=`0x${l}${o.toString(16)} `}),i.substring(0,i.length-1)}function Qi(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}async function fS(t,n,i,o,l,u){const f={},[h,m]=ao();f[h]=m,t.log(X.Trace,`(${n} transport) sending data. ${_r(l,u.logMessageContent)}.`);const g=Qi(l)?"arraybuffer":"text",v=await i.post(o,{content:l,headers:{...f,...u.headers},responseType:g,timeout:u.timeout,withCredentials:u.withCredentials});t.log(X.Trace,`(${n} transport) request complete. Response status: ${v.statusCode}.`)}function ED(t){return t===void 0?new bc(X.Information):t===null?Sr.instance:t.log!==void 0?t:new bc(t)}class MD{constructor(n,i){this._subject=n,this._observer=i}dispose(){const n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}}class bc{constructor(n){this._minLevel=n,this.out=console}log(n,i){if(n>=this._minLevel){const o=`[${new Date().toISOString()}] ${X[n]}: ${i}`;switch(n){case X.Critical:case X.Error:this.out.error(o);break;case X.Warning:this.out.warn(o);break;case X.Information:this.out.info(o);break;default:this.out.log(o);break}}}}function ao(){let t="X-SignalR-User-Agent";return At.isNode&&(t="User-Agent"),[t,RD(AD,DD(),UD(),ND())]}function RD(t,n,i,o){let l="Microsoft SignalR/";const u=t.split(".");return l+=`${u[0]}.${u[1]}`,l+=` (${t}; `,n&&n!==""?l+=`${n}; `:l+="Unknown OS; ",l+=`${i}`,o?l+=`; ${o}`:l+="; Unknown Runtime Version",l+=")",l}function DD(){if(At.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function ND(){if(At.isNode)return process.versions.node}function UD(){return At.isNode?"NodeJS":"Browser"}function hf(t){return t.stack?t.stack:t.message?t.message:`${t}`}function zD(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class OD extends Uc{constructor(n){if(super(),this._logger=n,typeof fetch>"u"||At.isNode){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(i("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=i("node-fetch"):this._fetchType=fetch,this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(zD());if(typeof AbortController>"u"){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}async send(n){if(n.abortSignal&&n.abortSignal.aborted)throw new ca;if(!n.method)throw new Error("No method defined.");if(!n.url)throw new Error("No url defined.");const i=new this._abortControllerType;let o;n.abortSignal&&(n.abortSignal.onabort=()=>{i.abort(),o=new ca});let l=null;if(n.timeout){const m=n.timeout;l=setTimeout(()=>{i.abort(),this._logger.log(X.Warning,"Timeout from HTTP request."),o=new Yp},m)}n.content===""&&(n.content=void 0),n.content&&(n.headers=n.headers||{},Qi(n.content)?n.headers["Content-Type"]="application/octet-stream":n.headers["Content-Type"]="text/plain;charset=UTF-8");let u;try{u=await this._fetchType(n.url,{body:n.content,cache:"no-cache",credentials:n.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...n.headers},method:n.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(m){throw o||(this._logger.log(X.Warning,`Error from HTTP request. ${m}.`),m)}finally{l&&clearTimeout(l),n.abortSignal&&(n.abortSignal.onabort=null)}if(!u.ok){const m=await Ex(u,"text");throw new Yi(m||u.statusText,u.status)}const h=await Ex(u,n.responseType);return new dS(u.status,u.statusText,h)}getCookieString(n){let i="";return At.isNode&&this._jar&&this._jar.getCookies(n,(o,l)=>i=l.join("; ")),i}}function Ex(t,n){let i;switch(n){case"arraybuffer":i=t.arrayBuffer();break;case"text":i=t.text();break;case"blob":case"document":case"json":throw new Error(`${n} is not supported.`);default:i=t.text();break}return i}class BD extends Uc{constructor(n){super(),this._logger=n}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new ca):n.method?n.url?new Promise((i,o)=>{const l=new XMLHttpRequest;l.open(n.method,n.url,!0),l.withCredentials=n.withCredentials===void 0?!0:n.withCredentials,l.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.content===""&&(n.content=void 0),n.content&&(Qi(n.content)?l.setRequestHeader("Content-Type","application/octet-stream"):l.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const u=n.headers;u&&Object.keys(u).forEach(f=>{l.setRequestHeader(f,u[f])}),n.responseType&&(l.responseType=n.responseType),n.abortSignal&&(n.abortSignal.onabort=()=>{l.abort(),o(new ca)}),n.timeout&&(l.timeout=n.timeout),l.onload=()=>{n.abortSignal&&(n.abortSignal.onabort=null),l.status>=200&&l.status<300?i(new dS(l.status,l.statusText,l.response||l.responseText)):o(new Yi(l.response||l.responseText||l.statusText,l.status))},l.onerror=()=>{this._logger.log(X.Warning,`Error from HTTP request. ${l.status}: ${l.statusText}.`),o(new Yi(l.statusText,l.status))},l.ontimeout=()=>{this._logger.log(X.Warning,"Timeout from HTTP request."),o(new Yp)},l.send(n.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class LD extends Uc{constructor(n){if(super(),typeof fetch<"u"||At.isNode)this._httpClient=new OD(n);else if(typeof XMLHttpRequest<"u")this._httpClient=new BD(n);else throw new Error("No usable HttpClient found.")}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new ca):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(n){return this._httpClient.getCookieString(n)}}class Fn{static write(n){return`${n}${Fn.RecordSeparator}`}static parse(n){if(n[n.length-1]!==Fn.RecordSeparator)throw new Error("Message is incomplete.");const i=n.split(Fn.RecordSeparator);return i.pop(),i}}Fn.RecordSeparatorCode=30;Fn.RecordSeparator=String.fromCharCode(Fn.RecordSeparatorCode);class ID{writeHandshakeRequest(n){return Fn.write(JSON.stringify(n))}parseHandshakeResponse(n){let i,o;if(Qi(n)){const h=new Uint8Array(n),m=h.indexOf(Fn.RecordSeparatorCode);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(h.slice(0,g))),o=h.byteLength>g?h.slice(g).buffer:null}else{const h=n,m=h.indexOf(Fn.RecordSeparator);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;i=h.substring(0,g),o=h.length>g?h.substring(g):null}const l=Fn.parse(i),u=JSON.parse(l[0]);if(u.type)throw new Error("Expected a handshake response from the server.");return[o,u]}}var Le;(function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close",t[t.Ack=8]="Ack",t[t.Sequence=9]="Sequence"})(Le||(Le={}));class PD{constructor(){this.observers=[]}next(n){for(const i of this.observers)i.next(n)}error(n){for(const i of this.observers)i.error&&i.error(n)}complete(){for(const n of this.observers)n.complete&&n.complete()}subscribe(n){return this.observers.push(n),new MD(this,n)}}class VD{constructor(n,i,o){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=n,this._connection=i,this._bufferSize=o}async _send(n){const i=this._protocol.writeMessage(n);let o=Promise.resolve();if(this._isInvocationMessage(n)){this._totalMessageCount++;let l=()=>{},u=()=>{};Qi(i)?this._bufferedByteCount+=i.byteLength:this._bufferedByteCount+=i.length,this._bufferedByteCount>=this._bufferSize&&(o=new Promise((f,h)=>{l=f,u=h})),this._messages.push(new HD(i,this._totalMessageCount,l,u))}try{this._reconnectInProgress||await this._connection.send(i)}catch{this._disconnected()}await o}_ack(n){let i=-1;for(let o=0;o<this._messages.length;o++){const l=this._messages[o];if(l._id<=n.sequenceId)i=o,Qi(l._message)?this._bufferedByteCount-=l._message.byteLength:this._bufferedByteCount-=l._message.length,l._resolver();else if(this._bufferedByteCount<this._bufferSize)l._resolver();else break}i!==-1&&(this._messages=this._messages.slice(i+1))}_shouldProcessMessage(n){if(this._waitForSequenceMessage)return n.type!==Le.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(n))return!0;const i=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,i<=this._latestReceivedSequenceId?(i===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=i,this._ackTimer(),!0)}_resetSequence(n){if(n.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=n.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const n=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Le.Sequence,sequenceId:n}));const i=this._messages;for(const o of i)await this._connection.send(o._message);this._reconnectInProgress=!1}_dispose(n){n??(n=new Error("Unable to reconnect to server."));for(const i of this._messages)i._rejector(n)}_isInvocationMessage(n){switch(n.type){case Le.Invocation:case Le.StreamItem:case Le.Completion:case Le.StreamInvocation:case Le.CancelInvocation:return!0;case Le.Close:case Le.Sequence:case Le.Ping:case Le.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Le.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class HD{constructor(n,i,o,l){this._message=n,this._id=i,this._resolver=o,this._rejector=l}}const FD=30*1e3,qD=15*1e3,GD=1e5;var lt;(function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"})(lt||(lt={}));class Xp{static create(n,i,o,l,u,f,h){return new Xp(n,i,o,l,u,f,h)}constructor(n,i,o,l,u,f,h){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(X.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},qt.isRequired(n,"connection"),qt.isRequired(i,"logger"),qt.isRequired(o,"protocol"),this.serverTimeoutInMilliseconds=u??FD,this.keepAliveIntervalInMilliseconds=f??qD,this._statefulReconnectBufferSize=h??GD,this._logger=i,this._protocol=o,this.connection=n,this._reconnectPolicy=l,this._handshakeProtocol=new ID,this.connection.onreceive=m=>this._processIncomingData(m),this.connection.onclose=m=>this._connectionClosed(m),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=lt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Le.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(n){if(this._connectionState!==lt.Disconnected&&this._connectionState!==lt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==lt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=lt.Connecting,this._logger.log(X.Debug,"Starting HubConnection.");try{await this._startInternal(),At.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=lt.Connected,this._connectionStarted=!0,this._logger.log(X.Debug,"HubConnection connected successfully.")}catch(n){return this._connectionState=lt.Disconnected,this._logger.log(X.Debug,`HubConnection failed to start successfully because of error '${n}'.`),Promise.reject(n)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const n=new Promise((i,o)=>{this._handshakeResolver=i,this._handshakeRejecter=o});await this.connection.start(this._protocol.transferFormat);try{let i=this._protocol.version;this.connection.features.reconnect||(i=1);const o={protocol:this._protocol.name,version:i};if(this._logger.log(X.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(o)),this._logger.log(X.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await n,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new VD(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(i){throw this._logger.log(X.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(i),i}}async stop(){const n=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await n}catch{}}_stopInternal(n){if(this._connectionState===lt.Disconnected)return this._logger.log(X.Debug,`Call to HubConnection.stop(${n}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===lt.Disconnecting)return this._logger.log(X.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const i=this._connectionState;return this._connectionState=lt.Disconnecting,this._logger.log(X.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(X.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(i===lt.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=n||new ca("The connection was stopped before the hub handshake could complete."),this.connection.stop(n))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(n,...i){const[o,l]=this._replaceStreamingParams(i),u=this._createStreamInvocation(n,i,l);let f;const h=new PD;return h.cancelCallback=()=>{const m=this._createCancelInvocation(u.invocationId);return delete this._callbacks[u.invocationId],f.then(()=>this._sendWithProtocol(m))},this._callbacks[u.invocationId]=(m,g)=>{if(g){h.error(g);return}else m&&(m.type===Le.Completion?m.error?h.error(new Error(m.error)):h.complete():h.next(m.item))},f=this._sendWithProtocol(u).catch(m=>{h.error(m),delete this._callbacks[u.invocationId]}),this._launchStreams(o,f),h}_sendMessage(n){return this._resetKeepAliveInterval(),this.connection.send(n)}_sendWithProtocol(n){return this._messageBuffer?this._messageBuffer._send(n):this._sendMessage(this._protocol.writeMessage(n))}send(n,...i){const[o,l]=this._replaceStreamingParams(i),u=this._sendWithProtocol(this._createInvocation(n,i,!0,l));return this._launchStreams(o,u),u}invoke(n,...i){const[o,l]=this._replaceStreamingParams(i),u=this._createInvocation(n,i,!1,l);return new Promise((h,m)=>{this._callbacks[u.invocationId]=(v,x)=>{if(x){m(x);return}else v&&(v.type===Le.Completion?v.error?m(new Error(v.error)):h(v.result):m(new Error(`Unexpected message type: ${v.type}`)))};const g=this._sendWithProtocol(u).catch(v=>{m(v),delete this._callbacks[u.invocationId]});this._launchStreams(o,g)})}on(n,i){!n||!i||(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),this._methods[n].indexOf(i)===-1&&this._methods[n].push(i))}off(n,i){if(!n)return;n=n.toLowerCase();const o=this._methods[n];if(o)if(i){const l=o.indexOf(i);l!==-1&&(o.splice(l,1),o.length===0&&delete this._methods[n])}else delete this._methods[n]}onclose(n){n&&this._closedCallbacks.push(n)}onreconnecting(n){n&&this._reconnectingCallbacks.push(n)}onreconnected(n){n&&this._reconnectedCallbacks.push(n)}_processIncomingData(n){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(n=this._processHandshakeResponse(n),this._receivedHandshakeResponse=!0),n){const i=this._protocol.parseMessages(n,this._logger);for(const o of i)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(o)))switch(o.type){case Le.Invocation:this._invokeClientMethod(o).catch(l=>{this._logger.log(X.Error,`Invoke client method threw error: ${hf(l)}`)});break;case Le.StreamItem:case Le.Completion:{const l=this._callbacks[o.invocationId];if(l){o.type===Le.Completion&&delete this._callbacks[o.invocationId];try{l(o)}catch(u){this._logger.log(X.Error,`Stream callback threw error: ${hf(u)}`)}}break}case Le.Ping:break;case Le.Close:{this._logger.log(X.Information,"Close message received from server.");const l=o.error?new Error("Server returned an error on close: "+o.error):void 0;o.allowReconnect===!0?this.connection.stop(l):this._stopPromise=this._stopInternal(l);break}case Le.Ack:this._messageBuffer&&this._messageBuffer._ack(o);break;case Le.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(o);break;default:this._logger.log(X.Warning,`Invalid message type: ${o.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(n){let i,o;try{[o,i]=this._handshakeProtocol.parseHandshakeResponse(n)}catch(l){const u="Error parsing handshake response: "+l;this._logger.log(X.Error,u);const f=new Error(u);throw this._handshakeRejecter(f),f}if(i.error){const l="Server returned handshake error: "+i.error;this._logger.log(X.Error,l);const u=new Error(l);throw this._handshakeRejecter(u),u}else this._logger.log(X.Debug,"Server handshake complete.");return this._handshakeResolver(),o}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!this.connection.features||!this.connection.features.inherentKeepAlive){this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds);let n=this._nextKeepAlive-new Date().getTime();if(n<0){this._connectionState===lt.Connected&&this._trySendPingMessage();return}this._pingServerHandle===void 0&&(n<0&&(n=0),this._pingServerHandle=setTimeout(async()=>{this._connectionState===lt.Connected&&await this._trySendPingMessage()},n))}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(n){const i=n.target.toLowerCase(),o=this._methods[i];if(!o){this._logger.log(X.Warning,`No client method with the name '${i}' found.`),n.invocationId&&(this._logger.log(X.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)));return}const l=o.slice(),u=!!n.invocationId;let f,h,m;for(const g of l)try{const v=f;f=await g.apply(this,n.arguments),u&&f&&v&&(this._logger.log(X.Error,`Multiple results provided for '${i}'. Sending error to server.`),m=this._createCompletionMessage(n.invocationId,"Client provided multiple results.",null)),h=void 0}catch(v){h=v,this._logger.log(X.Error,`A callback for the method '${i}' threw error '${v}'.`)}m?await this._sendWithProtocol(m):u?(h?m=this._createCompletionMessage(n.invocationId,`${h}`,null):f!==void 0?m=this._createCompletionMessage(n.invocationId,null,f):(this._logger.log(X.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),m=this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(m)):f&&this._logger.log(X.Error,`Result given for '${i}' method but server is not expecting a result.`)}_connectionClosed(n){this._logger.log(X.Debug,`HubConnection.connectionClosed(${n}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||n||new ca("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(n||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===lt.Disconnecting?this._completeClose(n):this._connectionState===lt.Connected&&this._reconnectPolicy?this._reconnect(n):this._connectionState===lt.Connected&&this._completeClose(n)}_completeClose(n){if(this._connectionStarted){this._connectionState=lt.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(n??new Error("Connection closed.")),this._messageBuffer=void 0),At.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[n]))}catch(i){this._logger.log(X.Error,`An onclose callback called with error '${n}' threw error '${i}'.`)}}}async _reconnect(n){const i=Date.now();let o=0,l=n!==void 0?n:new Error("Attempting to reconnect due to a unknown error."),u=this._getNextRetryDelay(o,0,l);if(u===null){this._logger.log(X.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(n);return}if(this._connectionState=lt.Reconnecting,n?this._logger.log(X.Information,`Connection reconnecting because of error '${n}'.`):this._logger.log(X.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(f=>f.apply(this,[n]))}catch(f){this._logger.log(X.Error,`An onreconnecting callback called with error '${n}' threw error '${f}'.`)}if(this._connectionState!==lt.Reconnecting){this._logger.log(X.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;u!==null;){if(this._logger.log(X.Information,`Reconnect attempt number ${o+1} will start in ${u} ms.`),await new Promise(f=>{this._reconnectDelayHandle=setTimeout(f,u)}),this._reconnectDelayHandle=void 0,this._connectionState!==lt.Reconnecting){this._logger.log(X.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=lt.Connected,this._logger.log(X.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(f=>f.apply(this,[this.connection.connectionId]))}catch(f){this._logger.log(X.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${f}'.`)}return}catch(f){if(this._logger.log(X.Information,`Reconnect attempt failed because of error '${f}'.`),this._connectionState!==lt.Reconnecting){this._logger.log(X.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===lt.Disconnecting&&this._completeClose();return}o++,l=f instanceof Error?f:new Error(f.toString()),u=this._getNextRetryDelay(o,Date.now()-i,l)}}this._logger.log(X.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${o} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(n,i,o){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:n,retryReason:o})}catch(l){return this._logger.log(X.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${n}, ${i}) threw error '${l}'.`),null}}_cancelCallbacksWithError(n){const i=this._callbacks;this._callbacks={},Object.keys(i).forEach(o=>{const l=i[o];try{l(null,n)}catch(u){this._logger.log(X.Error,`Stream 'error' callback called with '${n}' threw error: ${hf(u)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(n,i,o,l){if(o)return l.length!==0?{target:n,arguments:i,streamIds:l,type:Le.Invocation}:{target:n,arguments:i,type:Le.Invocation};{const u=this._invocationId;return this._invocationId++,l.length!==0?{target:n,arguments:i,invocationId:u.toString(),streamIds:l,type:Le.Invocation}:{target:n,arguments:i,invocationId:u.toString(),type:Le.Invocation}}}_launchStreams(n,i){if(n.length!==0){i||(i=Promise.resolve());for(const o in n)n[o].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(o)))},error:l=>{let u;l instanceof Error?u=l.message:l&&l.toString?u=l.toString():u="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(o,u)))},next:l=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(o,l)))}})}}_replaceStreamingParams(n){const i=[],o=[];for(let l=0;l<n.length;l++){const u=n[l];if(this._isObservable(u)){const f=this._invocationId;this._invocationId++,i[f]=u,o.push(f.toString()),n.splice(l,1)}}return[i,o]}_isObservable(n){return n&&n.subscribe&&typeof n.subscribe=="function"}_createStreamInvocation(n,i,o){const l=this._invocationId;return this._invocationId++,o.length!==0?{target:n,arguments:i,invocationId:l.toString(),streamIds:o,type:Le.StreamInvocation}:{target:n,arguments:i,invocationId:l.toString(),type:Le.StreamInvocation}}_createCancelInvocation(n){return{invocationId:n,type:Le.CancelInvocation}}_createStreamItemMessage(n,i){return{invocationId:n,item:i,type:Le.StreamItem}}_createCompletionMessage(n,i,o){return i?{error:i,invocationId:n,type:Le.Completion}:{invocationId:n,result:o,type:Le.Completion}}_createCloseMessage(){return{type:Le.Close}}async _trySendPingMessage(){try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}}const $D=[0,2e3,1e4,3e4,null];class Mx{constructor(n){this._retryDelays=n!==void 0?[...n,null]:$D}nextRetryDelayInMilliseconds(n){return this._retryDelays[n.previousRetryCount]}}class Xi{}Xi.Authorization="Authorization";Xi.Cookie="Cookie";class YD extends Uc{constructor(n,i){super(),this._innerClient=n,this._accessTokenFactory=i}async send(n){let i=!0;this._accessTokenFactory&&(!this._accessToken||n.url&&n.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(n);const o=await this._innerClient.send(n);return i&&o.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(n),await this._innerClient.send(n)):o}_setAuthorizationHeader(n){n.headers||(n.headers={}),this._accessToken?n.headers[Xi.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&n.headers[Xi.Authorization]&&delete n.headers[Xi.Authorization]}getCookieString(n){return this._innerClient.getCookieString(n)}}var Dt;(function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"})(Dt||(Dt={}));var hn;(function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"})(hn||(hn={}));let XD=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Rx{get pollAborted(){return this._pollAbort.aborted}constructor(n,i,o){this._httpClient=n,this._logger=i,this._pollAbort=new XD,this._options=o,this._running=!1,this.onreceive=null,this.onclose=null}async connect(n,i){if(qt.isRequired(n,"url"),qt.isRequired(i,"transferFormat"),qt.isIn(i,hn,"transferFormat"),this._url=n,this._logger.log(X.Trace,"(LongPolling transport) Connecting."),i===hn.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[o,l]=ao(),u={[o]:l,...this._options.headers},f={abortSignal:this._pollAbort.signal,headers:u,timeout:1e5,withCredentials:this._options.withCredentials};i===hn.Binary&&(f.responseType="arraybuffer");const h=`${n}&_=${Date.now()}`;this._logger.log(X.Trace,`(LongPolling transport) polling: ${h}.`);const m=await this._httpClient.get(h,f);m.statusCode!==200?(this._logger.log(X.Error,`(LongPolling transport) Unexpected response code: ${m.statusCode}.`),this._closeError=new Yi(m.statusText||"",m.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,f)}async _poll(n,i){try{for(;this._running;)try{const o=`${n}&_=${Date.now()}`;this._logger.log(X.Trace,`(LongPolling transport) polling: ${o}.`);const l=await this._httpClient.get(o,i);l.statusCode===204?(this._logger.log(X.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):l.statusCode!==200?(this._logger.log(X.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new Yi(l.statusText||"",l.statusCode),this._running=!1):l.content?(this._logger.log(X.Trace,`(LongPolling transport) data received. ${_r(l.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(l.content)):this._logger.log(X.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(o){this._running?o instanceof Yp?this._logger.log(X.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=o,this._running=!1):this._logger.log(X.Trace,`(LongPolling transport) Poll errored after shutdown: ${o.message}`)}}finally{this._logger.log(X.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(n){return this._running?fS(this._logger,"LongPolling",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(X.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(X.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const n={},[i,o]=ao();n[i]=o;const l={headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let u;try{await this._httpClient.delete(this._url,l)}catch(f){u=f}u?u instanceof Yi&&(u.statusCode===404?this._logger.log(X.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(X.Trace,`(LongPolling transport) Error sending a DELETE request: ${u}`)):this._logger.log(X.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(X.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let n="(LongPolling transport) Firing onclose event.";this._closeError&&(n+=" Error: "+this._closeError),this._logger.log(X.Trace,n),this.onclose(this._closeError)}}}class WD{constructor(n,i,o,l){this._httpClient=n,this._accessToken=i,this._logger=o,this._options=l,this.onreceive=null,this.onclose=null}async connect(n,i){return qt.isRequired(n,"url"),qt.isRequired(i,"transferFormat"),qt.isIn(i,hn,"transferFormat"),this._logger.log(X.Trace,"(SSE transport) Connecting."),this._url=n,this._accessToken&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((o,l)=>{let u=!1;if(i!==hn.Text){l(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let f;if(At.isBrowser||At.isWebWorker)f=new this._options.EventSource(n,{withCredentials:this._options.withCredentials});else{const h=this._httpClient.getCookieString(n),m={};m.Cookie=h;const[g,v]=ao();m[g]=v,f=new this._options.EventSource(n,{withCredentials:this._options.withCredentials,headers:{...m,...this._options.headers}})}try{f.onmessage=h=>{if(this.onreceive)try{this._logger.log(X.Trace,`(SSE transport) data received. ${_r(h.data,this._options.logMessageContent)}.`),this.onreceive(h.data)}catch(m){this._close(m);return}},f.onerror=h=>{u?this._close():l(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},f.onopen=()=>{this._logger.log(X.Information,`SSE connected to ${this._url}`),this._eventSource=f,u=!0,o()}}catch(h){l(h);return}})}async send(n){return this._eventSource?fS(this._logger,"SSE",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}class KD{constructor(n,i,o,l,u,f){this._logger=o,this._accessTokenFactory=i,this._logMessageContent=l,this._webSocketConstructor=u,this._httpClient=n,this.onreceive=null,this.onclose=null,this._headers=f}async connect(n,i){qt.isRequired(n,"url"),qt.isRequired(i,"transferFormat"),qt.isIn(i,hn,"transferFormat"),this._logger.log(X.Trace,"(WebSockets transport) Connecting.");let o;return this._accessTokenFactory&&(o=await this._accessTokenFactory()),new Promise((l,u)=>{n=n.replace(/^http/,"ws");let f;const h=this._httpClient.getCookieString(n);let m=!1;if(At.isNode||At.isReactNative){const g={},[v,x]=ao();g[v]=x,o&&(g[Xi.Authorization]=`Bearer ${o}`),h&&(g[Xi.Cookie]=h),f=new this._webSocketConstructor(n,void 0,{headers:{...g,...this._headers}})}else o&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(o)}`);f||(f=new this._webSocketConstructor(n)),i===hn.Binary&&(f.binaryType="arraybuffer"),f.onopen=g=>{this._logger.log(X.Information,`WebSocket connected to ${n}.`),this._webSocket=f,m=!0,l()},f.onerror=g=>{let v=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?v=g.error:v="There was an error with the transport",this._logger.log(X.Information,`(WebSockets transport) ${v}.`)},f.onmessage=g=>{if(this._logger.log(X.Trace,`(WebSockets transport) data received. ${_r(g.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(g.data)}catch(v){this._close(v);return}},f.onclose=g=>{if(m)this._close(g);else{let v=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?v=g.error:v="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",u(new Error(v))}}})}send(n){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(X.Trace,`(WebSockets transport) sending data. ${_r(n,this._logMessageContent)}.`),this._webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(n){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(X.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(n)&&(n.wasClean===!1||n.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${n.code} (${n.reason||"no reason given"}).`)):n instanceof Error?this.onclose(n):this.onclose())}_isCloseEvent(n){return n&&typeof n.wasClean=="boolean"&&typeof n.code=="number"}}const Dx=100;class QD{constructor(n,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,qt.isRequired(n,"url"),this._logger=ED(i.logger),this.baseUrl=this._resolveUrl(n),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let o=null,l=null;if(At.isNode&&typeof require<"u"){const u=typeof __webpack_require__=="function"?__non_webpack_require__:require;o=u("ws"),l=u("eventsource")}!At.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:At.isNode&&!i.WebSocket&&o&&(i.WebSocket=o),!At.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:At.isNode&&!i.EventSource&&typeof l<"u"&&(i.EventSource=l),this._httpClient=new YD(i.httpClient||new LD(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}async start(n){if(n=n||hn.Binary,qt.isIn(n,hn,"transferFormat"),this._logger.log(X.Debug,`Starting connection with transfer format '${hn[n]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(n),await this._startInternalPromise,this._connectionState==="Disconnecting"){const i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(X.Error,i),await this._stopPromise,Promise.reject(new ca(i))}else if(this._connectionState!=="Connected"){const i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(X.Error,i),Promise.reject(new ca(i))}this._connectionStarted=!0}send(n){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Wp(this.transport)),this._sendQueue.send(n))}async stop(n){if(this._connectionState==="Disconnected")return this._logger.log(X.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(X.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),await this._stopInternal(n),await this._stopPromise}async _stopInternal(n){this._stopError=n;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(i){this._logger.log(X.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(X.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(n){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Dt.WebSockets)this.transport=this._constructTransport(Dt.WebSockets),await this._startTransport(i,n);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let o=null,l=0;do{if(o=await this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new ca("The connection was stopped during negotiation.");if(o.error)throw new Error(o.error);if(o.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(o.url&&(i=o.url),o.accessToken){const u=o.accessToken;this._accessTokenFactory=()=>u,this._httpClient._accessToken=u,this._httpClient._accessTokenFactory=void 0}l++}while(o.url&&l<Dx);if(l===Dx&&o.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(i,this._options.transport,o,n)}this.transport instanceof Rx&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(X.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(o){return this._logger.log(X.Error,"Failed to start the connection: "+o),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(o)}}async _getNegotiationResponse(n){const i={},[o,l]=ao();i[o]=l;const u=this._resolveNegotiateUrl(n);this._logger.log(X.Debug,`Sending negotiation request: ${u}.`);try{const f=await this._httpClient.post(u,{content:"",headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(f.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${f.statusCode}'`));const h=JSON.parse(f.content);return(!h.negotiateVersion||h.negotiateVersion<1)&&(h.connectionToken=h.connectionId),h.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new kx("Client didn't negotiate Stateful Reconnect but the server did.")):h}catch(f){let h="Failed to complete negotiation with the server: "+f;return f instanceof Yi&&f.statusCode===404&&(h=h+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(X.Error,h),Promise.reject(new kx(h))}}_createConnectUrl(n,i){return i?n+(n.indexOf("?")===-1?"?":"&")+`id=${i}`:n}async _createTransport(n,i,o,l){let u=this._createConnectUrl(n,o.connectionToken);if(this._isITransport(i)){this._logger.log(X.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,await this._startTransport(u,l),this.connectionId=o.connectionId;return}const f=[],h=o.availableTransports||[];let m=o;for(const g of h){const v=this._resolveTransportOrError(g,i,l,m?.useStatefulReconnect===!0);if(v instanceof Error)f.push(`${g.transport} failed:`),f.push(v);else if(this._isITransport(v)){if(this.transport=v,!m){try{m=await this._getNegotiationResponse(n)}catch(x){return Promise.reject(x)}u=this._createConnectUrl(n,m.connectionToken)}try{await this._startTransport(u,l),this.connectionId=m.connectionId;return}catch(x){if(this._logger.log(X.Error,`Failed to start the transport '${g.transport}': ${x}`),m=void 0,f.push(new TD(`${g.transport} failed: ${x}`,Dt[g.transport])),this._connectionState!=="Connecting"){const S="Failed to select transport before stop() was called.";return this._logger.log(X.Debug,S),Promise.reject(new ca(S))}}}}return f.length>0?Promise.reject(new jD(`Unable to connect to the server with any of the available transports. ${f.join(" ")}`,f)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(n){switch(n){case Dt.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new KD(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Dt.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new WD(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Dt.LongPolling:return new Rx(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${n}.`)}}_startTransport(n,i){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async o=>{let l=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(n,i),await this.features.resend()}catch{l=!0}else{this._stopConnection(o);return}l&&this._stopConnection(o)}:this.transport.onclose=o=>this._stopConnection(o),this.transport.connect(n,i)}_resolveTransportOrError(n,i,o,l){const u=Dt[n.transport];if(u==null)return this._logger.log(X.Debug,`Skipping transport '${n.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${n.transport}' because it is not supported by this client.`);if(ZD(i,u))if(n.transferFormats.map(h=>hn[h]).indexOf(o)>=0){if(u===Dt.WebSockets&&!this._options.WebSocket||u===Dt.ServerSentEvents&&!this._options.EventSource)return this._logger.log(X.Debug,`Skipping transport '${Dt[u]}' because it is not supported in your environment.'`),new wD(`'${Dt[u]}' is not supported in your environment.`,u);this._logger.log(X.Debug,`Selecting transport '${Dt[u]}'.`);try{return this.features.reconnect=u===Dt.WebSockets?l:void 0,this._constructTransport(u)}catch(h){return h}}else return this._logger.log(X.Debug,`Skipping transport '${Dt[u]}' because it does not support the requested transfer format '${hn[o]}'.`),new Error(`'${Dt[u]}' does not support ${hn[o]}.`);else return this._logger.log(X.Debug,`Skipping transport '${Dt[u]}' because it was disabled by the client.`),new CD(`'${Dt[u]}' is disabled by the client.`,u)}_isITransport(n){return n&&typeof n=="object"&&"connect"in n}_stopConnection(n){if(this._logger.log(X.Debug,`HttpConnection.stopConnection(${n}) called while in state ${this._connectionState}.`),this.transport=void 0,n=this._stopError||n,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(X.Debug,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(X.Warning,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${n}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),n?this._logger.log(X.Error,`Connection disconnected with error '${n}'.`):this._logger.log(X.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(X.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(n)}catch(i){this._logger.log(X.Error,`HttpConnection.onclose(${n}) threw error '${i}'.`)}}}_resolveUrl(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(!At.isBrowser)throw new Error(`Cannot resolve '${n}'.`);const i=window.document.createElement("a");return i.href=n,this._logger.log(X.Information,`Normalizing '${n}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(n){const i=new URL(n);i.pathname.endsWith("/")?i.pathname+="negotiate":i.pathname+="/negotiate";const o=new URLSearchParams(i.searchParams);return o.has("negotiateVersion")||o.append("negotiateVersion",this._negotiateVersion.toString()),o.has("useStatefulReconnect")?o.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&o.append("useStatefulReconnect","true"),i.search=o.toString(),i.toString()}}function ZD(t,n){return!t||(n&t)!==0}class Wp{constructor(n){this._transport=n,this._buffer=[],this._executing=!0,this._sendBufferedData=new Ql,this._transportResult=new Ql,this._sendLoopPromise=this._sendLoop()}send(n){return this._bufferData(n),this._transportResult||(this._transportResult=new Ql),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(n){if(this._buffer.length&&typeof this._buffer[0]!=typeof n)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof n}`);this._buffer.push(n),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Ql;const n=this._transportResult;this._transportResult=void 0;const i=typeof this._buffer[0]=="string"?this._buffer.join(""):Wp._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(i),n.resolve()}catch(o){n.reject(o)}}}static _concatBuffers(n){const i=n.map(u=>u.byteLength).reduce((u,f)=>u+f),o=new Uint8Array(i);let l=0;for(const u of n)o.set(new Uint8Array(u),l),l+=u.byteLength;return o.buffer}}class Ql{constructor(){this.promise=new Promise((n,i)=>[this._resolver,this._rejecter]=[n,i])}resolve(){this._resolver()}reject(n){this._rejecter(n)}}const JD="json";class e3{constructor(){this.name=JD,this.version=2,this.transferFormat=hn.Text}parseMessages(n,i){if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];i===null&&(i=Sr.instance);const o=Fn.parse(n),l=[];for(const u of o){const f=JSON.parse(u);if(typeof f.type!="number")throw new Error("Invalid payload.");switch(f.type){case Le.Invocation:this._isInvocationMessage(f);break;case Le.StreamItem:this._isStreamItemMessage(f);break;case Le.Completion:this._isCompletionMessage(f);break;case Le.Ping:break;case Le.Close:break;case Le.Ack:this._isAckMessage(f);break;case Le.Sequence:this._isSequenceMessage(f);break;default:i.log(X.Information,"Unknown message type '"+f.type+"' ignored.");continue}l.push(f)}return l}writeMessage(n){return Fn.write(JSON.stringify(n))}_isInvocationMessage(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message."),n.invocationId!==void 0&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message."),this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}_isAckMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(n,i){if(typeof n!="string"||n==="")throw new Error(i)}}const t3={trace:X.Trace,debug:X.Debug,info:X.Information,information:X.Information,warn:X.Warning,warning:X.Warning,error:X.Error,critical:X.Critical,none:X.None};function n3(t){const n=t3[t.toLowerCase()];if(typeof n<"u")return n;throw new Error(`Unknown log level: ${t}`)}class a3{configureLogging(n){if(qt.isRequired(n,"logging"),i3(n))this.logger=n;else if(typeof n=="string"){const i=n3(n);this.logger=new bc(i)}else this.logger=new bc(n);return this}withUrl(n,i){return qt.isRequired(n,"url"),qt.isNotEmpty(n,"url"),this.url=n,typeof i=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...i}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:i},this}withHubProtocol(n){return qt.isRequired(n,"protocol"),this.protocol=n,this}withAutomaticReconnect(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return n?Array.isArray(n)?this.reconnectPolicy=new Mx(n):this.reconnectPolicy=n:this.reconnectPolicy=new Mx,this}withServerTimeout(n){return qt.isRequired(n,"milliseconds"),this._serverTimeoutInMilliseconds=n,this}withKeepAliveInterval(n){return qt.isRequired(n,"milliseconds"),this._keepAliveIntervalInMilliseconds=n,this}withStatefulReconnect(n){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=n?.bufferSize,this}build(){const n=this.httpConnectionOptions||{};if(n.logger===void 0&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const i=new QD(this.url,n);return Xp.create(i,this.logger||Sr.instance,this.protocol||new e3,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function i3(t){return t.log!==void 0}class s3{connection=null;eventHandlers={};reconnectAttempts=0;maxReconnectAttempts=5;isManualDisconnect=!1;constructor(){const i="https://your-domain.com/api".replace("/api","/hubs/chat");this.connection=new a3().withUrl(i,{accessTokenFactory:()=>localStorage.getItem("token")||"",skipNegotiation:!1,withCredentials:!0,transport:Dt.WebSockets|Dt.ServerSentEvents|Dt.LongPolling}).withAutomaticReconnect({nextRetryDelayInMilliseconds:o=>o.previousRetryCount>=this.maxReconnectAttempts?null:Math.min(1e3*Math.pow(2,o.previousRetryCount),32e3)}).configureLogging(X.Information).build(),this.setupConnectionHandlers(),this.setupEventListeners()}setupConnectionHandlers(){this.connection&&(this.connection.onreconnecting(n=>{console.warn("SignalR reconnecting...",n),this.reconnectAttempts++}),this.connection.onreconnected(n=>{console.log("SignalR reconnected:",n),this.reconnectAttempts=0,this.rejoinChats()}),this.connection.onclose(n=>{console.error("SignalR connection closed:",n),!this.isManualDisconnect&&this.reconnectAttempts<this.maxReconnectAttempts&&setTimeout(()=>this.start(),5e3)}))}setupEventListeners(){this.connection&&(this.connection.on("UserOnline",n=>{console.log("[SignalR] UserOnline event received:",n),this.eventHandlers.onUserOnline?.(n)}),this.connection.on("UserOffline",n=>{console.log("[SignalR] UserOffline event received:",n),this.eventHandlers.onUserOffline?.(n)}),this.connection.on("ReceiveMessage",n=>{this.eventHandlers.onReceiveMessage?.(n)}),this.connection.on("MessageEdited",n=>{this.eventHandlers.onMessageEdited?.(n)}),this.connection.on("MessageDeleted",n=>{this.eventHandlers.onMessageDeleted?.(n)}),this.connection.on("ReactionAdded",n=>{console.log("[SignalR] ReactionAdded event received:",n),this.eventHandlers.onReactionAdded?.(n)}),this.connection.on("ReactionRemoved",n=>{console.log("[SignalR] ReactionRemoved event received:",n),this.eventHandlers.onReactionRemoved?.(n)}),this.connection.on("UserTyping",n=>{this.eventHandlers.onUserTyping?.(n)}),this.connection.on("UserStoppedTyping",n=>{this.eventHandlers.onUserStoppedTyping?.(n)}),this.connection.on("NewNotification",n=>{this.eventHandlers.onNewNotification?.(n)}),this.connection.on("NotificationsMarkedSeen",n=>{this.eventHandlers.onNotificationsMarkedSeen?.(n)}),this.connection.on("MessagePinned",n=>{this.eventHandlers.onMessagePinned?.(n)}),this.connection.on("MessageUnpinned",n=>{this.eventHandlers.onMessageUnpinned?.(n)}),this.connection.on("AddedToChat",n=>{console.log("[SignalR] AddedToChat:",n),this.eventHandlers.onAddedToChat?.(n)}),this.connection.on("NewConversation",n=>{console.log("[SignalR] NewConversation:",n),this.eventHandlers.onNewConversation?.(n)}),this.connection.on("ConversationCreated",n=>{console.log("[SignalR] ConversationCreated:",n),this.eventHandlers.onConversationCreated?.(n)}),this.connection.on("PermissionGranted",n=>{console.log("[SignalR] PermissionGranted:",n),this.eventHandlers.onPermissionGranted?.(n)}),this.connection.on("PermissionRevoked",n=>{console.log("[SignalR] PermissionRevoked:",n),this.eventHandlers.onPermissionRevoked?.(n)}),this.connection.on("AllPermissionsRevoked",n=>{console.log("[SignalR] AllPermissionsRevoked:",n),this.eventHandlers.onAllPermissionsRevoked?.(n)}),this.connection.on("UserBlockedYou",n=>{console.log("[SignalR] UserBlockedYou:",n),this.eventHandlers.onUserBlockedYou?.(n)}),this.connection.on("YouBlockedUser",n=>{console.log("[SignalR] YouBlockedUser:",n),this.eventHandlers.onYouBlockedUser?.(n)}),this.connection.on("UserUnblockedYou",n=>{console.log("[SignalR] UserUnblockedYou:",n),this.eventHandlers.onUserUnblockedYou?.(n)}),this.connection.on("YouUnblockedUser",n=>{console.log("[SignalR] YouUnblockedUser:",n),this.eventHandlers.onYouUnblockedUser?.(n)}),this.connection.on("ChatDeleted",n=>{console.log("[SignalR] ChatDeleted:",n),this.eventHandlers.onChatDeleted?.(n)}),this.connection.on("RemovedFromChat",n=>{console.log("[SignalR] RemovedFromChat:",n),this.eventHandlers.onRemovedFromChat?.(n)}),this.connection.on("MessagesMarkedSeen",n=>{console.log("[SignalR] MessagesMarkedSeen:",n),this.eventHandlers.onMessagesMarkedSeen?.(n)}),this.connection.on("Error",n=>{console.error("SignalR Error:",n),this.eventHandlers.onError?.(n)}))}setEventHandlers(n){this.eventHandlers={...this.eventHandlers,...n}}async start(){if(this.connection)try{this.connection.state===lt.Disconnected&&(this.isManualDisconnect=!1,await this.connection.start(),console.log("SignalR Connected:",this.connection.connectionId))}catch(n){throw console.error("Error starting SignalR connection:",n),n}}async getPresenceStates(n){if(!this.connection||this.connection.state!==lt.Connected)return console.warn("Cannot fetch presence states: not connected"),{};try{const i=await this.connection.invoke("GetPresenceStates",n);return console.log(`Fetched initial presence states for ${n.length} users`),i}catch(i){return console.error("Error fetching presence states:",i),{}}}async stop(){if(this.connection)try{this.isManualDisconnect=!0,await this.connection.stop(),console.log("SignalR Disconnected")}catch(n){console.error("Error stopping SignalR connection:",n)}}getConnectionState(){return this.connection?.state||lt.Disconnected}isConnected(){return this.connection?.state===lt.Connected}activeChats=new Set;async joinChat(n){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("JoinChat",n),this.activeChats.add(n),console.log("Joined chat:",n)}catch(i){throw console.error("Error joining chat:",i),i}}async leaveChat(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("LeaveChat",n),this.activeChats.delete(n),console.log("Left chat:",n)}catch(i){console.error("Error leaving chat:",i)}}async rejoinChats(){const n=Array.from(this.activeChats);for(const i of n)try{await this.connection?.invoke("JoinChat",i)}catch(o){console.error("Error rejoining chat:",i,o)}}async sendMessage(n,i,o=null,l=null){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("SendMessage",{chatId:n,content:i,receiverId:o,replyId:l})}catch(u){throw console.error("Error sending message:",u),u}}async editMessage(n,i,o){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("EditMessage",n,i,o)}catch(l){throw console.error("Error editing message:",l),l}}async deleteMessage(n,i){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("DeleteMessage",n,i)}catch(o){throw console.error("Error deleting message:",o),o}}async addReaction(n,i,o){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("AddReaction",n,i,o)}catch(l){throw console.error("Error adding reaction:",l),l}}async removeReaction(n,i){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("RemoveReaction",n,i)}catch(o){throw console.error("Error removing reaction:",o),o}}async sendTyping(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("Typing",n)}catch(i){console.error("Error sending typing indicator:",i)}}async sendStopTyping(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("StopTyping",n)}catch(i){console.error("Error sending stop typing indicator:",i)}}async markNotificationsAsSeen(n){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("MarkAsSeen",n)}catch(i){throw console.error("Error marking notifications as seen:",i),i}}markSeenDebounceTimers=new Map;async markMessagesAsSeen(n){if(!this.connection||!this.isConnected())return;const i=this.markSeenDebounceTimers.get(n);return i&&clearTimeout(i),new Promise(o=>{const l=setTimeout(async()=>{if(this.markSeenDebounceTimers.delete(n),!this.connection||!this.isConnected()){o();return}try{await this.connection.invoke("MarkMessagesAsSeen",n)}catch(u){u?.message?.includes("connection being closed")||console.error("Error marking messages as seen:",u)}o()},300);this.markSeenDebounceTimers.set(n,l)})}}const Qe=new s3,tp=Object.freeze(Object.defineProperty({__proto__:null,signalRService:Qe},Symbol.toStringTag,{value:"Module"})),o3=t=>{const[n,i]=w.useState(Qe.getConnectionState()),[o,l]=w.useState(Qe.isConnected());return w.useEffect(()=>{const u=setInterval(()=>{i(Qe.getConnectionState()),l(Qe.isConnected())},1e3);return()=>clearInterval(u)},[t]),{connectionState:n,isConnected:o,joinChat:Qe.joinChat.bind(Qe),leaveChat:Qe.leaveChat.bind(Qe),sendMessage:Qe.sendMessage.bind(Qe),editMessage:Qe.editMessage.bind(Qe),deleteMessage:Qe.deleteMessage.bind(Qe),addReaction:Qe.addReaction.bind(Qe),removeReaction:Qe.removeReaction.bind(Qe),sendTyping:Qe.sendTyping.bind(Qe),sendStopTyping:Qe.sendStopTyping.bind(Qe),markNotificationsAsSeen:Qe.markNotificationsAsSeen.bind(Qe),markMessagesAsSeen:Qe.markMessagesAsSeen.bind(Qe),getPresenceStates:Qe.getPresenceStates.bind(Qe)}};var mf={exports:{}},gf,Nx;function r3(){if(Nx)return gf;Nx=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return gf=t,gf}var yf,Ux;function l3(){if(Ux)return yf;Ux=1;var t=r3();function n(){}function i(){}return i.resetWarningCache=n,yf=function(){function o(f,h,m,g,v,x){if(x!==t){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}o.isRequired=o;function l(){return o}var u={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:l,element:o,elementType:o,instanceOf:l,node:o,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:i,resetWarningCache:n};return u.PropTypes=u,u},yf}var zx;function c3(){return zx||(zx=1,mf.exports=l3()()),mf.exports}var u3=c3();const vt=Jx(u3);function Zi(t,n,i,o){function l(u){return u instanceof i?u:new i(function(f){f(u)})}return new(i||(i=Promise))(function(u,f){function h(v){try{g(o.next(v))}catch(x){f(x)}}function m(v){try{g(o.throw(v))}catch(x){f(x)}}function g(v){v.done?u(v.value):l(v.value).then(h,m)}g((o=o.apply(t,n||[])).next())})}const d3=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function io(t,n,i){const o=f3(t),{webkitRelativePath:l}=t,u=typeof n=="string"?n:typeof l=="string"&&l.length>0?l:`./${t.name}`;return typeof o.path!="string"&&Ox(o,"path",u),Ox(o,"relativePath",u),o}function f3(t){const{name:n}=t;if(n&&n.lastIndexOf(".")!==-1&&!t.type){const o=n.split(".").pop().toLowerCase(),l=d3.get(o);l&&Object.defineProperty(t,"type",{value:l,writable:!1,configurable:!1,enumerable:!0})}return t}function Ox(t,n,i){Object.defineProperty(t,n,{value:i,writable:!1,configurable:!1,enumerable:!0})}const p3=[".DS_Store","Thumbs.db"];function h3(t){return Zi(this,void 0,void 0,function*(){return Sc(t)&&m3(t.dataTransfer)?x3(t.dataTransfer,t.type):g3(t)?y3(t):Array.isArray(t)&&t.every(n=>"getFile"in n&&typeof n.getFile=="function")?v3(t):[]})}function m3(t){return Sc(t)}function g3(t){return Sc(t)&&Sc(t.target)}function Sc(t){return typeof t=="object"&&t!==null}function y3(t){return np(t.target.files).map(n=>io(n))}function v3(t){return Zi(this,void 0,void 0,function*(){return(yield Promise.all(t.map(i=>i.getFile()))).map(i=>io(i))})}function x3(t,n){return Zi(this,void 0,void 0,function*(){if(t.items){const i=np(t.items).filter(l=>l.kind==="file");if(n!=="drop")return i;const o=yield Promise.all(i.map(b3));return Bx(pS(o))}return Bx(np(t.files).map(i=>io(i)))})}function Bx(t){return t.filter(n=>p3.indexOf(n.name)===-1)}function np(t){if(t===null)return[];const n=[];for(let i=0;i<t.length;i++){const o=t[i];n.push(o)}return n}function b3(t){if(typeof t.webkitGetAsEntry!="function")return Lx(t);const n=t.webkitGetAsEntry();return n&&n.isDirectory?hS(n):Lx(t,n)}function pS(t){return t.reduce((n,i)=>[...n,...Array.isArray(i)?pS(i):[i]],[])}function Lx(t,n){return Zi(this,void 0,void 0,function*(){var i;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const u=yield t.getAsFileSystemHandle();if(u===null)throw new Error(`${t} is not a File`);if(u!==void 0){const f=yield u.getFile();return f.handle=u,io(f)}}const o=t.getAsFile();if(!o)throw new Error(`${t} is not a File`);return io(o,(i=n?.fullPath)!==null&&i!==void 0?i:void 0)})}function S3(t){return Zi(this,void 0,void 0,function*(){return t.isDirectory?hS(t):_3(t)})}function hS(t){const n=t.createReader();return new Promise((i,o)=>{const l=[];function u(){n.readEntries(f=>Zi(this,void 0,void 0,function*(){if(f.length){const h=Promise.all(f.map(S3));l.push(h),u()}else try{const h=yield Promise.all(l);i(h)}catch(h){o(h)}}),f=>{o(f)})}u()})}function _3(t){return Zi(this,void 0,void 0,function*(){return new Promise((n,i)=>{t.file(o=>{const l=io(o,t.fullPath);n(l)},o=>{i(o)})})})}var Zl={},Ix;function w3(){return Ix||(Ix=1,Zl.__esModule=!0,Zl.default=function(t,n){if(t&&n){var i=Array.isArray(n)?n:n.split(",");if(i.length===0)return!0;var o=t.name||"",l=(t.type||"").toLowerCase(),u=l.replace(/\/.*$/,"");return i.some(function(f){var h=f.trim().toLowerCase();return h.charAt(0)==="."?o.toLowerCase().endsWith(h):h.endsWith("/*")?u===h.replace(/\/.*$/,""):l===h})}return!0}),Zl}var C3=w3();const vf=Jx(C3);function Px(t){return A3(t)||j3(t)||gS(t)||T3()}function T3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j3(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function A3(t){if(Array.isArray(t))return ap(t)}function Vx(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,o)}return i}function Hx(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?Vx(Object(i),!0).forEach(function(o){mS(t,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Vx(Object(i)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(i,o))})}return t}function mS(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function wr(t,n){return M3(t)||E3(t,n)||gS(t,n)||k3()}function k3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gS(t,n){if(t){if(typeof t=="string")return ap(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ap(t,n)}}function ap(t,n){(n==null||n>t.length)&&(n=t.length);for(var i=0,o=new Array(n);i<n;i++)o[i]=t[i];return o}function E3(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var o=[],l=!0,u=!1,f,h;try{for(i=i.call(t);!(l=(f=i.next()).done)&&(o.push(f.value),!(n&&o.length===n));l=!0);}catch(m){u=!0,h=m}finally{try{!l&&i.return!=null&&i.return()}finally{if(u)throw h}}return o}}function M3(t){if(Array.isArray(t))return t}var R3=typeof vf=="function"?vf:vf.default,D3="file-invalid-type",N3="file-too-large",U3="file-too-small",z3="too-many-files",O3=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=n.split(","),o=i.length>1?"one of ".concat(i.join(", ")):i[0];return{code:D3,message:"File type must be ".concat(o)}},Fx=function(n){return{code:N3,message:"File is larger than ".concat(n," ").concat(n===1?"byte":"bytes")}},qx=function(n){return{code:U3,message:"File is smaller than ".concat(n," ").concat(n===1?"byte":"bytes")}},B3={code:z3,message:"Too many files"};function yS(t,n){var i=t.type==="application/x-moz-file"||R3(t,n);return[i,i?null:O3(n)]}function vS(t,n,i){if(Pi(t.size))if(Pi(n)&&Pi(i)){if(t.size>i)return[!1,Fx(i)];if(t.size<n)return[!1,qx(n)]}else{if(Pi(n)&&t.size<n)return[!1,qx(n)];if(Pi(i)&&t.size>i)return[!1,Fx(i)]}return[!0,null]}function Pi(t){return t!=null}function L3(t){var n=t.files,i=t.accept,o=t.minSize,l=t.maxSize,u=t.multiple,f=t.maxFiles,h=t.validator;return!u&&n.length>1||u&&f>=1&&n.length>f?!1:n.every(function(m){var g=yS(m,i),v=wr(g,1),x=v[0],S=vS(m,o,l),C=wr(S,1),_=C[0],k=h?h(m):null;return x&&_&&!k})}function _c(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Jl(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(n){return n==="Files"||n==="application/x-moz-file"}):!!t.target&&!!t.target.files}function Gx(t){t.preventDefault()}function I3(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function P3(t){return t.indexOf("Edge/")!==-1}function V3(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return I3(t)||P3(t)}function ga(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];return n.some(function(h){return!_c(o)&&h&&h.apply(void 0,[o].concat(u)),_c(o)})}}function H3(){return"showOpenFilePicker"in window}function F3(t){if(Pi(t)){var n=Object.entries(t).filter(function(i){var o=wr(i,2),l=o[0],u=o[1],f=!0;return xS(l)||(console.warn('Skipped "'.concat(l,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),f=!1),(!Array.isArray(u)||!u.every(bS))&&(console.warn('Skipped "'.concat(l,'" because an invalid file extension was provided.')),f=!1),f}).reduce(function(i,o){var l=wr(o,2),u=l[0],f=l[1];return Hx(Hx({},i),{},mS({},u,f))},{});return[{description:"Files",accept:n}]}return t}function q3(t){if(Pi(t))return Object.entries(t).reduce(function(n,i){var o=wr(i,2),l=o[0],u=o[1];return[].concat(Px(n),[l],Px(u))},[]).filter(function(n){return xS(n)||bS(n)}).join(",")}function G3(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function $3(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function xS(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function bS(t){return/^.*\.[\w]+$/.test(t)}var Y3=["children"],X3=["open"],W3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],K3=["refKey","onChange","onClick"];function Q3(t){return eN(t)||J3(t)||SS(t)||Z3()}function Z3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J3(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function eN(t){if(Array.isArray(t))return ip(t)}function xf(t,n){return aN(t)||nN(t,n)||SS(t,n)||tN()}function tN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SS(t,n){if(t){if(typeof t=="string")return ip(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ip(t,n)}}function ip(t,n){(n==null||n>t.length)&&(n=t.length);for(var i=0,o=new Array(n);i<n;i++)o[i]=t[i];return o}function nN(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var o=[],l=!0,u=!1,f,h;try{for(i=i.call(t);!(l=(f=i.next()).done)&&(o.push(f.value),!(n&&o.length===n));l=!0);}catch(m){u=!0,h=m}finally{try{!l&&i.return!=null&&i.return()}finally{if(u)throw h}}return o}}function aN(t){if(Array.isArray(t))return t}function $x(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,o)}return i}function jt(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?$x(Object(i),!0).forEach(function(o){sp(t,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$x(Object(i)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(i,o))})}return t}function sp(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function wc(t,n){if(t==null)return{};var i=iN(t,n),o,l;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(l=0;l<u.length;l++)o=u[l],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(i[o]=t[o])}return i}function iN(t,n){if(t==null)return{};var i={},o=Object.keys(t),l,u;for(u=0;u<o.length;u++)l=o[u],!(n.indexOf(l)>=0)&&(i[l]=t[l]);return i}var Kp=w.forwardRef(function(t,n){var i=t.children,o=wc(t,Y3),l=wS(o),u=l.open,f=wc(l,X3);return w.useImperativeHandle(n,function(){return{open:u}},[u]),ya.createElement(w.Fragment,null,i(jt(jt({},f),{},{open:u})))});Kp.displayName="Dropzone";var _S={disabled:!1,getFilesFromEvent:h3,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Kp.defaultProps=_S;Kp.propTypes={children:vt.func,accept:vt.objectOf(vt.arrayOf(vt.string)),multiple:vt.bool,preventDropOnDocument:vt.bool,noClick:vt.bool,noKeyboard:vt.bool,noDrag:vt.bool,noDragEventsBubbling:vt.bool,minSize:vt.number,maxSize:vt.number,maxFiles:vt.number,disabled:vt.bool,getFilesFromEvent:vt.func,onFileDialogCancel:vt.func,onFileDialogOpen:vt.func,useFsAccessApi:vt.bool,autoFocus:vt.bool,onDragEnter:vt.func,onDragLeave:vt.func,onDragOver:vt.func,onDrop:vt.func,onDropAccepted:vt.func,onDropRejected:vt.func,onError:vt.func,validator:vt.func};var op={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function wS(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=jt(jt({},_S),t),i=n.accept,o=n.disabled,l=n.getFilesFromEvent,u=n.maxSize,f=n.minSize,h=n.multiple,m=n.maxFiles,g=n.onDragEnter,v=n.onDragLeave,x=n.onDragOver,S=n.onDrop,C=n.onDropAccepted,_=n.onDropRejected,k=n.onFileDialogCancel,j=n.onFileDialogOpen,D=n.useFsAccessApi,L=n.autoFocus,E=n.preventDropOnDocument,U=n.noClick,P=n.noKeyboard,Q=n.noDrag,ne=n.noDragEventsBubbling,W=n.onError,ce=n.validator,se=w.useMemo(function(){return q3(i)},[i]),Ee=w.useMemo(function(){return F3(i)},[i]),$e=w.useMemo(function(){return typeof j=="function"?j:Yx},[j]),de=w.useMemo(function(){return typeof k=="function"?k:Yx},[k]),Ae=w.useRef(null),Oe=w.useRef(null),N=w.useReducer(sN,op),ee=xf(N,2),ie=ee[0],ve=ee[1],Me=ie.isFocused,ge=ie.isFileDialogActive,Ne=w.useRef(typeof window<"u"&&window.isSecureContext&&D&&H3()),be=function(){!Ne.current&&ge&&setTimeout(function(){if(Oe.current){var pe=Oe.current.files;pe.length||(ve({type:"closeDialog"}),de())}},300)};w.useEffect(function(){return window.addEventListener("focus",be,!1),function(){window.removeEventListener("focus",be,!1)}},[Oe,ge,de,Ne]);var Z=w.useRef([]),ue=function(pe){Ae.current&&Ae.current.contains(pe.target)||(pe.preventDefault(),Z.current=[])};w.useEffect(function(){return E&&(document.addEventListener("dragover",Gx,!1),document.addEventListener("drop",ue,!1)),function(){E&&(document.removeEventListener("dragover",Gx),document.removeEventListener("drop",ue))}},[Ae,E]),w.useEffect(function(){return!o&&L&&Ae.current&&Ae.current.focus(),function(){}},[Ae,L,o]);var re=w.useCallback(function(ae){W?W(ae):console.error(ae)},[W]),Yt=w.useCallback(function(ae){ae.preventDefault(),ae.persist(),mt(ae),Z.current=[].concat(Q3(Z.current),[ae.target]),Jl(ae)&&Promise.resolve(l(ae)).then(function(pe){if(!(_c(ae)&&!ne)){var it=pe.length,tt=it>0&&L3({files:pe,accept:se,minSize:f,maxSize:u,multiple:h,maxFiles:m,validator:ce}),$=it>0&&!tt;ve({isDragAccept:tt,isDragReject:$,isDragActive:!0,type:"setDraggedFiles"}),g&&g(ae)}}).catch(function(pe){return re(pe)})},[l,g,re,ne,se,f,u,h,m,ce]),Et=w.useCallback(function(ae){ae.preventDefault(),ae.persist(),mt(ae);var pe=Jl(ae);if(pe&&ae.dataTransfer)try{ae.dataTransfer.dropEffect="copy"}catch{}return pe&&x&&x(ae),!1},[x,ne]),Jt=w.useCallback(function(ae){ae.preventDefault(),ae.persist(),mt(ae);var pe=Z.current.filter(function(tt){return Ae.current&&Ae.current.contains(tt)}),it=pe.indexOf(ae.target);it!==-1&&pe.splice(it,1),Z.current=pe,!(pe.length>0)&&(ve({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Jl(ae)&&v&&v(ae))},[Ae,v,ne]),We=w.useCallback(function(ae,pe){var it=[],tt=[];ae.forEach(function($){var ct=yS($,se),B=xf(ct,2),q=B[0],he=B[1],Te=vS($,f,u),Re=xf(Te,2),ut=Re[0],gt=Re[1],_n=ce?ce($):null;if(q&&ut&&!_n)it.push($);else{var ba=[he,gt];_n&&(ba=ba.concat(_n)),tt.push({file:$,errors:ba.filter(function(uo){return uo})})}}),(!h&&it.length>1||h&&m>=1&&it.length>m)&&(it.forEach(function($){tt.push({file:$,errors:[B3]})}),it.splice(0)),ve({acceptedFiles:it,fileRejections:tt,isDragReject:tt.length>0,type:"setFiles"}),S&&S(it,tt,pe),tt.length>0&&_&&_(tt,pe),it.length>0&&C&&C(it,pe)},[ve,h,se,f,u,m,S,C,_,ce]),en=w.useCallback(function(ae){ae.preventDefault(),ae.persist(),mt(ae),Z.current=[],Jl(ae)&&Promise.resolve(l(ae)).then(function(pe){_c(ae)&&!ne||We(pe,ae)}).catch(function(pe){return re(pe)}),ve({type:"reset"})},[l,We,re,ne]),Tt=w.useCallback(function(){if(Ne.current){ve({type:"openDialog"}),$e();var ae={multiple:h,types:Ee};window.showOpenFilePicker(ae).then(function(pe){return l(pe)}).then(function(pe){We(pe,null),ve({type:"closeDialog"})}).catch(function(pe){G3(pe)?(de(pe),ve({type:"closeDialog"})):$3(pe)?(Ne.current=!1,Oe.current?(Oe.current.value=null,Oe.current.click()):re(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):re(pe)});return}Oe.current&&(ve({type:"openDialog"}),$e(),Oe.current.value=null,Oe.current.click())},[ve,$e,de,D,We,re,Ee,h]),Xt=w.useCallback(function(ae){!Ae.current||!Ae.current.isEqualNode(ae.target)||(ae.key===" "||ae.key==="Enter"||ae.keyCode===32||ae.keyCode===13)&&(ae.preventDefault(),Tt())},[Ae,Tt]),Bt=w.useCallback(function(){ve({type:"focus"})},[]),un=w.useCallback(function(){ve({type:"blur"})},[]),tn=w.useCallback(function(){U||(V3()?setTimeout(Tt,0):Tt())},[U,Tt]),Sn=function(pe){return o?null:pe},nn=function(pe){return P?null:Sn(pe)},dn=function(pe){return Q?null:Sn(pe)},mt=function(pe){ne&&pe.stopPropagation()},fn=w.useMemo(function(){return function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=ae.refKey,it=pe===void 0?"ref":pe,tt=ae.role,$=ae.onKeyDown,ct=ae.onFocus,B=ae.onBlur,q=ae.onClick,he=ae.onDragEnter,Te=ae.onDragOver,Re=ae.onDragLeave,ut=ae.onDrop,gt=wc(ae,W3);return jt(jt(sp({onKeyDown:nn(ga($,Xt)),onFocus:nn(ga(ct,Bt)),onBlur:nn(ga(B,un)),onClick:Sn(ga(q,tn)),onDragEnter:dn(ga(he,Yt)),onDragOver:dn(ga(Te,Et)),onDragLeave:dn(ga(Re,Jt)),onDrop:dn(ga(ut,en)),role:typeof tt=="string"&&tt!==""?tt:"presentation"},it,Ae),!o&&!P?{tabIndex:0}:{}),gt)}},[Ae,Xt,Bt,un,tn,Yt,Et,Jt,en,P,Q,o]),Wt=w.useCallback(function(ae){ae.stopPropagation()},[]),at=w.useMemo(function(){return function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=ae.refKey,it=pe===void 0?"ref":pe,tt=ae.onChange,$=ae.onClick,ct=wc(ae,K3),B=sp({accept:se,multiple:h,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Sn(ga(tt,en)),onClick:Sn(ga($,Wt)),tabIndex:-1},it,Oe);return jt(jt({},B),ct)}},[Oe,i,h,en,o]);return jt(jt({},ie),{},{isFocused:Me&&!o,getRootProps:fn,getInputProps:at,rootRef:Ae,inputRef:Oe,open:Sn(Tt)})}function sN(t,n){switch(n.type){case"focus":return jt(jt({},t),{},{isFocused:!0});case"blur":return jt(jt({},t),{},{isFocused:!1});case"openDialog":return jt(jt({},op),{},{isFileDialogActive:!0});case"closeDialog":return jt(jt({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return jt(jt({},t),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return jt(jt({},t),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections,isDragReject:n.isDragReject});case"reset":return jt({},op);default:return t}}function Yx(){}const Xx=5*1024*1024,oN=["image/png","image/jpeg","image/jpg","image/gif","image/webp"],rN=t=>oN.includes(t.type)?t.size>Xx?{valid:!1,error:`File too large. Maximum size is ${CS(Xx)}.`}:{valid:!0}:{valid:!1,error:"Invalid file type. Please upload an image (PNG, JPG, GIF, or WEBP)."},CS=t=>{if(t===0)return"0 Bytes";const n=1024,i=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(t)/Math.log(n));return`${Math.round(t/Math.pow(n,o)*100)/100} ${i[o]}`},lN=t=>new Promise((n,i)=>{const o=new FileReader;o.onloadend=()=>{typeof o.result=="string"?n(o.result):i(new Error("Failed to read file"))},o.onerror=()=>{i(new Error("Error reading file"))},o.readAsDataURL(t)}),Qp=({onFileAccepted:t,currentPreview:n,maxSize:i=5*1024*1024,label:o="Upload Image",helperText:l="Drag and drop an image here, or click to browse",disabled:u=!1})=>{const[f,h]=w.useState(n||null),[m,g]=w.useState(null),[v,x]=w.useState(!1),S=w.useCallback(async L=>{g(null),x(!0);const E=L[0];if(!E){x(!1);return}const U=rN(E);if(!U.valid){g(U.error||"Invalid file"),x(!1);return}try{const P=await lN(E);h(P),t(E)}catch(P){g("Failed to process image"),console.error("Error processing image:",P)}finally{x(!1)}},[t]),{getRootProps:C,getInputProps:_,isDragActive:k,isDragReject:j}=wS({onDrop:S,accept:{"image/*":[".png",".jpg",".jpeg",".gif",".webp"]},maxSize:i,multiple:!1,disabled:u||v}),D=L=>{L.stopPropagation(),h(null),g(null)};return c.jsxs("div",{style:{width:"100%"},children:[o&&c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:600,color:"var(--text)"},children:o}),c.jsxs("div",{...C(),style:{border:`2px dashed ${m||j?"#ff6b6b":k?"var(--accent)":"var(--border)"}`,borderRadius:"12px",padding:f?"0":"32px",textAlign:"center",cursor:u||v?"not-allowed":"pointer",transition:"all 0.3s ease",backgroundColor:k?"var(--background)":f?"transparent":"var(--surface)",position:"relative",opacity:u||v?.6:1},children:[c.jsx("input",{..._()}),f?c.jsxs("div",{style:{position:"relative"},children:[c.jsx("img",{src:f,alt:"Preview",style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"10px"}}),!u&&c.jsx("button",{onClick:D,"aria-label":"Remove image",style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"background 0.2s ease",fontSize:"20px",fontWeight:300,lineHeight:1},onMouseEnter:L=>{L.currentTarget.style.background="rgba(0, 0, 0, 0.9)"},onMouseLeave:L=>{L.currentTarget.style.background="rgba(0, 0, 0, 0.7)"},children:""}),c.jsxs("div",{style:{position:"absolute",bottom:"8px",right:"8px",background:"rgba(76, 175, 80, 0.9)",color:"white",padding:"4px 12px",borderRadius:"16px",fontSize:"12px",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[c.jsx($_,{size:14}),"Image selected"]})]}):c.jsxs("div",{children:[c.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"12px"},children:v?c.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid var(--border)",borderTop:"4px solid var(--accent)",borderRadius:"50%",animation:"spin 1s linear infinite"}}):j||m?c.jsx(mi,{size:48,color:"#ff6b6b"}):c.jsx(Y_,{size:48,color:k?"var(--accent)":"var(--text-muted)"})}),v?c.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"14px",fontWeight:600,color:"var(--text)"},children:"Processing..."}):c.jsxs(c.Fragment,{children:[c.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"14px",fontWeight:600,color:k?"var(--accent)":"var(--text)"},children:j?"Invalid file type":k?"Drop image here":l}),c.jsxs("p",{style:{margin:0,fontSize:"12px",color:"var(--text-muted)"},children:["PNG, JPG, GIF or WEBP (max ",CS(i),")"]})]})]})]}),m&&c.jsxs("div",{style:{marginTop:"8px",padding:"8px 12px",backgroundColor:"#fee",border:"1px solid #fcc",borderRadius:"6px",display:"flex",alignItems:"center",gap:"8px"},children:[c.jsx(mi,{size:16,color:"#ff6b6b"}),c.jsx("span",{style:{fontSize:"13px",color:"#c33"},children:m})]}),c.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},cN={sm:8,md:10,lg:12},Wx={scale:[1,1.2,1],opacity:[1,.8,1]},uN={boxShadow:["0 0 0 0 rgba(34, 197, 94, 0.4)","0 0 0 4px rgba(34, 197, 94, 0.2)","0 0 0 0 rgba(34, 197, 94, 0)"]},rp=({isOnline:t,size:n="sm",showLabel:i=!1,lastSeen:o,position:l="standalone",className:u=""})=>{const f=cN[n],g={width:f,height:f,backgroundColor:t?"var(--online-color, #22c55e)":"var(--offline-color, #94a3b8)",borderRadius:"50%"};return l==="avatar-overlay"?c.jsx(xn.div,{className:u,style:{...g,position:"absolute",bottom:0,right:0,border:"2px solid var(--surface)",boxShadow:t?"0 0 8px rgba(34, 197, 94, 0.5)":"none"},animate:t?{...Wx,...uN}:{},transition:{duration:2,repeat:1/0,ease:"easeInOut"},title:t?"Online":o?`Last seen ${Rf(o)}`:"Offline"}):c.jsxs("div",{className:u,style:{display:"flex",alignItems:"center",gap:i?"6px":"0"},children:[c.jsx(xn.div,{style:{...g,flexShrink:0,boxShadow:t?"0 0 8px rgba(34, 197, 94, 0.5)":"none"},animate:t?Wx:{},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),i&&c.jsx(xn.span,{initial:{opacity:0,x:-5},animate:{opacity:1,x:0},transition:{duration:.2},style:{fontSize:"13px",color:t?"var(--online-color, #22c55e)":"var(--text-muted)",whiteSpace:"nowrap",fontWeight:t?500:400},children:t?"Online":o?`Last seen ${Rf(o)}`:"Offline"})]})},Kx=[],Zp=t=>{const n=ze(h=>h.permissionsLoading),i=ze(h=>h.currentChat),o=xt(h=>h.user),l=ze(h=>t?h.chatPermissions.get(t)??Kx:Kx),u=(()=>{if(!t||!i||!o)return!1;if(i.createdById===o.id)return!0;const m=i.members?.find(g=>g.userId===o.id)?.role?.toLowerCase();return m==="admin"||m==="owner"})(),f=h=>u?!0:l.includes(h);return i?.type==="dm"?{canSendMessage:!0,canAddUsers:!1,canPinMessages:!0,canManageMessages:!1,canManageBans:!1,canManageChatInfo:!1,canManageUsers:!1,isLoading:!1}:t?{canSendMessage:f("SendMessage"),canAddUsers:f("AddUsers"),canPinMessages:f("PinMessages"),canManageMessages:f("ManageMessages"),canManageBans:f("ManageBans"),canManageChatInfo:f("ManageChatInfo"),canManageUsers:f("ManageUsers"),isLoading:n}:{canSendMessage:!1,canAddUsers:!1,canPinMessages:!1,canManageMessages:!1,canManageBans:!1,canManageChatInfo:!1,canManageUsers:!1,isLoading:!1}},dN="_overlay_oomqs_47",fN="_fadeIn_oomqs_1",pN="_closing_oomqs_63",hN="_fadeOut_oomqs_1",mN="_modal_oomqs_68",gN="_slideUp_oomqs_1",yN="_slideDown_oomqs_1",vN="_header_oomqs_87",xN="_headerContent_oomqs_96",bN="_headerIcon_oomqs_102",SN="_title_oomqs_114",_N="_subtitle_oomqs_121",wN="_closeBtn_oomqs_127",CN="_content_oomqs_150",TN="_userCard_oomqs_174",jN="_userAvatar_oomqs_185",AN="_userInfo_oomqs_207",kN="_userName_oomqs_212",EN="_userRole_oomqs_219",MN="_roleBadge_oomqs_224",RN="_admin_oomqs_233",DN="_moderator_oomqs_238",NN="_member_oomqs_243",UN="_permissionStats_oomqs_248",zN="_statNumber_oomqs_256",ON="_statLabel_oomqs_262",BN="_loadingState_oomqs_268",LN="_loadingSpinner_oomqs_273",IN="_spin_oomqs_277",PN="_skeletonList_oomqs_288",VN="_skeletonItem_oomqs_294",HN="_skeletonIcon_oomqs_303",FN="_shimmer_oomqs_1",qN="_skeletonText_oomqs_312",GN="_skeletonLine_oomqs_316",$N="_skeletonToggle_oomqs_329",YN="_permissionsList_oomqs_339",XN="_category_oomqs_346",WN="_categoryHeader_oomqs_350",KN="_categoryLabel_oomqs_358",QN="_categoryCount_oomqs_366",ZN="_categoryItems_oomqs_372",JN="_permissionItem_oomqs_379",e4="_granted_oomqs_395",t4="_updating_oomqs_405",n4="_permissionIcon_oomqs_410",a4="_permissionInfo_oomqs_428",i4="_permissionLabel_oomqs_433",s4="_permissionDescription_oomqs_440",o4="_toggleSwitch_oomqs_447",r4="_toggleTrack_oomqs_457",l4="_on_oomqs_466",c4="_toggleThumb_oomqs_470",u4="_footer_oomqs_496",d4="_footerInfo_oomqs_505",f4="_doneButton_oomqs_517",Ce={overlay:dN,fadeIn:fN,closing:pN,fadeOut:hN,modal:mN,slideUp:gN,slideDown:yN,header:vN,headerContent:xN,headerIcon:bN,title:SN,subtitle:_N,closeBtn:wN,content:CN,userCard:TN,userAvatar:jN,userInfo:AN,userName:kN,userRole:EN,roleBadge:MN,admin:RN,moderator:DN,member:NN,permissionStats:UN,statNumber:zN,statLabel:ON,loadingState:BN,loadingSpinner:LN,spin:IN,skeletonList:PN,skeletonItem:VN,skeletonIcon:HN,shimmer:FN,skeletonText:qN,skeletonLine:GN,skeletonToggle:$N,permissionsList:YN,category:XN,categoryHeader:WN,categoryLabel:KN,categoryCount:QN,categoryItems:ZN,permissionItem:JN,granted:e4,updating:t4,permissionIcon:n4,permissionInfo:a4,permissionLabel:i4,permissionDescription:s4,toggleSwitch:o4,toggleTrack:r4,on:l4,toggleThumb:c4,footer:u4,footerInfo:d4,doneButton:f4},ec=[{name:"SendMessage",label:"Send Messages",description:"Allow sending messages in this chat",icon:c.jsx(X_,{size:18}),category:"messaging"},{name:"ManageMessages",label:"Manage Messages",description:"Edit or delete messages from other users",icon:c.jsx(Cf,{size:18}),category:"moderation"},{name:"AddUsers",label:"Add Users",description:"Invite new members to this chat",icon:c.jsx(tb,{size:18}),category:"management"},{name:"ManageUsers",label:"Manage Users",description:"Remove members and manage their roles",icon:c.jsx(hr,{size:18}),category:"management"},{name:"ManageChatInfo",label:"Manage Chat Info",description:"Edit chat name, description, and avatar",icon:c.jsx(Cf,{size:18}),category:"management"},{name:"ManageBans",label:"Manage Bans",description:"Ban or unban users from this chat",icon:c.jsx(Ws,{size:18}),category:"moderation"},{name:"PinMessages",label:"Pin Messages",description:"Pin important messages for all members",icon:c.jsx(Tf,{size:18}),category:"messaging"}],bf={messaging:{label:"Messaging",order:1},moderation:{label:"Moderation",order:2},management:{label:"Management",order:3}},TS=({isOpen:t,onClose:n,chatId:i,member:o,onPermissionsChanged:l})=>{const[u,f]=w.useState([]),[h,m]=w.useState(!1),[g,v]=w.useState(null),[x,S]=w.useState(!1);w.useEffect(()=>{t&&(C(),S(!1))},[t,i,o.userId]);const C=async()=>{m(!0);try{const{permissionService:P}=await ht(async()=>{const{permissionService:ce}=await import("./permission.service-mWIygohH.js");return{permissionService:ce}},__vite__mapDeps([0,1,2])),Q=await P.getUserPermissions(i,o.userId),ne=Q?.permissions||Q,W=Array.isArray(ne)?ne.map(ce=>ce.permissionName||ce.name||ce):[];f(W)}catch(P){console.error("Failed to load permissions:",P),f([])}finally{m(!1)}},_=async P=>{const Q=u.includes(P);v(P);const W=xt.getState().user?.id===o.userId;try{const{permissionService:ce}=await ht(async()=>{const{permissionService:se}=await import("./permission.service-mWIygohH.js");return{permissionService:se}},__vite__mapDeps([0,1,2]));Q?(await ce.revokePermission(i,o.userId,P),f(u.filter(se=>se!==P)),W&&ze.getState().revokePermission(i,P),oe.success(`Revoked "${ec.find(se=>se.name===P)?.label}" permission`)):(await ce.grantPermission(i,o.userId,P),f([...u,P]),W&&ze.getState().grantPermission(i,P),oe.success(`Granted "${ec.find(se=>se.name===P)?.label}" permission`)),await l()}catch(ce){console.error("Failed to update permission:",ce),oe.error(Ue(ce,"Failed to update permission"))}finally{v(null)}},k=()=>{S(!0),setTimeout(()=>{n(),S(!1)},200)};if(!t)return null;const j=P=>P.slice(0,2).toUpperCase(),D=ec.reduce((P,Q)=>(P[Q.category]||(P[Q.category]=[]),P[Q.category].push(Q),P),{}),L=Object.entries(D).sort(([P],[Q])=>bf[P].order-bf[Q].order),E=u.length,U=ec.length;return c.jsx("div",{className:`${Ce.overlay} ${x?Ce.closing:""}`,onClick:k,children:c.jsxs("div",{className:`${Ce.modal} ${x?Ce.closing:""}`,onClick:P=>P.stopPropagation(),children:[c.jsxs("div",{className:Ce.header,children:[c.jsxs("div",{className:Ce.headerContent,children:[c.jsx("div",{className:Ce.headerIcon,children:c.jsx(Js,{size:20})}),c.jsxs("div",{children:[c.jsx("h2",{className:Ce.title,children:"Manage Permissions"}),c.jsx("p",{className:Ce.subtitle,children:"Configure access for this member"})]})]}),c.jsx("button",{onClick:k,className:Ce.closeBtn,"aria-label":"Close",children:""})]}),c.jsxs("div",{className:Ce.content,children:[c.jsxs("div",{className:Ce.userCard,children:[c.jsx("div",{className:Ce.userAvatar,children:o.user.avatarUrl?c.jsx("img",{src:o.user.avatarUrl,alt:o.user.username}):j(o.user.username)}),c.jsxs("div",{className:Ce.userInfo,children:[c.jsx("div",{className:Ce.userName,children:o.user.username}),c.jsx("div",{className:Ce.userRole,children:c.jsx("span",{className:`${Ce.roleBadge} ${Ce[o.role]}`,children:o.role.charAt(0).toUpperCase()+o.role.slice(1)})})]}),c.jsxs("div",{className:Ce.permissionStats,children:[c.jsx("div",{className:Ce.statNumber,children:E}),c.jsxs("div",{className:Ce.statLabel,children:["of ",U]})]})]}),h?c.jsxs("div",{className:Ce.loadingState,children:[c.jsx("div",{className:Ce.loadingSpinner,children:c.jsx(fc,{size:32,className:Ce.spin})}),c.jsx("p",{children:"Loading permissions..."}),c.jsx("div",{className:Ce.skeletonList,children:[1,2,3,4].map(P=>c.jsxs("div",{className:Ce.skeletonItem,children:[c.jsx("div",{className:Ce.skeletonIcon}),c.jsxs("div",{className:Ce.skeletonText,children:[c.jsx("div",{className:Ce.skeletonLine,style:{width:"60%"}}),c.jsx("div",{className:Ce.skeletonLine,style:{width:"80%"}})]}),c.jsx("div",{className:Ce.skeletonToggle})]},P))})]}):c.jsx("div",{className:Ce.permissionsList,children:L.map(([P,Q],ne)=>c.jsxs("div",{className:Ce.category,style:{animationDelay:`${ne*.1}s`},children:[c.jsxs("div",{className:Ce.categoryHeader,children:[c.jsx("span",{className:Ce.categoryLabel,children:bf[P].label}),c.jsxs("span",{className:Ce.categoryCount,children:[Q.filter(W=>u.includes(W.name)).length," / ",Q.length]})]}),c.jsx("div",{className:Ce.categoryItems,children:Q.map((W,ce)=>{const se=u.includes(W.name),Ee=g===W.name;return c.jsxs("div",{className:`${Ce.permissionItem} ${se?Ce.granted:""} ${Ee?Ce.updating:""}`,style:{animationDelay:`${ne*.1+ce*.05}s`},children:[c.jsx("div",{className:Ce.permissionIcon,children:W.icon}),c.jsxs("div",{className:Ce.permissionInfo,children:[c.jsx("div",{className:Ce.permissionLabel,children:W.label}),c.jsx("div",{className:Ce.permissionDescription,children:W.description})]}),c.jsx("button",{className:`${Ce.toggleSwitch} ${se?Ce.on:Ce.off}`,onClick:()=>_(W.name),disabled:Ee,children:c.jsx("div",{className:Ce.toggleTrack,children:c.jsx("div",{className:Ce.toggleThumb,children:Ee&&c.jsx(fc,{size:12,className:Ce.spin})})})})]},W.name)})})]},P))})]}),c.jsxs("div",{className:Ce.footer,children:[c.jsxs("div",{className:Ce.footerInfo,children:[c.jsx(Js,{size:14}),c.jsx("span",{children:"Changes take effect immediately"})]}),c.jsx("button",{onClick:k,className:Ce.doneButton,children:"Done"})]})]})})},p4=({isOpen:t,onClose:n,chat:i,currentUserId:o,onEditGroup:l,onDeleteGroup:u,onLeaveGroup:f,onKickMember:h,onViewUserProfile:m,onBanMember:g,onUpdatePrivacy:v})=>{const[x,S]=w.useState(null),[C,_]=w.useState(!1),[k,j]=w.useState(null),[D,L]=w.useState(""),[E,U]=w.useState([]),[P,Q]=w.useState(!1),[ne,W]=w.useState(""),[ce,se]=w.useState([]),[Ee,$e]=w.useState(!1),[de,Ae]=w.useState(!1),[Oe,N]=w.useState(!1),[ee,ie]=w.useState(!1),[ve,Me]=w.useState(!1),[ge,Ne]=w.useState([]),[be,Z]=w.useState(!1),{isUserOnline:ue,getUserLastSeen:re,loadChats:Yt,setInitialPresenceStates:Et}=ze(),We=x?.members.find($=>$.userId===o)?.role==="admin",{canAddUsers:en,canManageChatInfo:Tt,canManageBans:Xt,canManageUsers:Bt}=Zp(i?.id);w.useEffect(()=>{t&&i.id&&(N(!1),ie(!1),un())},[t,i.id]);const un=async()=>{_(!0),j(null);try{const $=await Fe.getChatProfile(i.id);S($);const ct=$.members?.map(B=>B.userId)||[];if(ct.length>0)try{const B=await Qe.getPresenceStates(ct);Object.keys(B).length>0&&(Et(B),ie(!0))}catch(B){console.error("[GroupProfileModal] Failed to fetch presence states:",B)}}catch($){j($.response?.data?.message||"Failed to load profile")}finally{_(!1)}},tn=x?.members.some($=>$.userId===o),Sn=async()=>{if(!(!i||!i.type)){Ae(!0);try{const $=i.type;await Fe.joinChat(i.id,$),oe.success(`Successfully joined the ${$}!`),await Yt(),await un()}catch($){console.error("Failed to join:",$),Mf($)?(N(!0),oe.error(rr($))):oe.error(Ue($,"Failed to join"))}finally{Ae(!1)}}},nn=async()=>{if(!(!i?.id||!We&&!Xt)){Z(!0);try{const $=await Fe.getBannedUsers(i.id);Ne($)}catch($){console.error("[GroupProfileModal] Failed to load banned users:",$),oe.error(Ue($,"Failed to load banned users"))}finally{Z(!1)}}},dn=async($,ct)=>{if(await Zt({title:"Unban User",message:`Are you sure you want to unban ${ct}? They will be able to rejoin this ${i.type==="channel"?"channel":"group"}.`,confirmText:"Unban",cancelText:"Cancel",variant:"info"}))try{await Fe.unbanUser(i.id,$),oe.success(`${ct} has been unbanned`),await nn()}catch(q){console.error("[GroupProfileModal] Failed to unban user:",q),oe.error(Ue(q,"Failed to unban user"))}};w.useEffect(()=>{ve&&(We||Xt)&&nn()},[ve,We,Xt]),w.useEffect(()=>{if(!x?.members){U([]);return}if(!D.trim()){U(x.members);return}const $=D.toLowerCase(),ct=x.members.filter(B=>B.user.username.toLowerCase().includes($)||B.user.email?.toLowerCase().includes($));U(ct)},[x?.members,D]);const mt=async $=>{if(!h)return;await Zt({title:"Remove Member",message:"Are you sure you want to remove this member from the group?",confirmText:"Remove",cancelText:"Cancel",variant:"danger"})&&h($)},fn=async $=>{if(W($),!$.trim()){se([]);return}$e(!0);try{const B=await(await ht(()=>Promise.resolve().then(()=>Hn),void 0).then(Te=>Te.userService)).searchUsers($),q=new Set(x?.members.map(Te=>Te.userId)||[]),he=B.filter(Te=>!q.has(Te.id));se(he)}catch(ct){console.error("Failed to search users:",ct)}finally{$e(!1)}},Wt=async $=>{if(!(!i||!We&&!en))try{i.type==="group"?await Fe.addMemberToGroup(i.id,$):i.type==="channel"&&await Fe.addMemberToChannel(i.id,$),oe.success("Member added successfully"),Q(!1),W(""),se([]),await un()}catch(ct){console.error("Failed to add member:",ct),Mf(ct)?oe.error("This user is banned from this chat and cannot be added."):oe.error(Ue(ct,"Failed to add member"))}},at=async()=>{if(!f)return;await Zt({title:"Leave Group",message:"Are you sure you want to leave this group? You will lose access to all messages and content.",confirmText:"Leave",cancelText:"Stay",variant:"warning"})&&(f(),n())},ae=async()=>{if(!u)return;await Zt({title:"Delete Group",message:"Are you sure you want to delete this group? This action cannot be undone and all messages will be permanently deleted.",confirmText:"Delete Forever",cancelText:"Cancel",variant:"danger"})&&(u(),n())},pe={admin:[],moderator:[],member:[]};E.forEach($=>{pe[$.role].push($)});const it=x?.members.filter($=>ue($.userId)).length||0,tt=x?.members.length||0;return console.log("[GroupProfileModal] Online count:",it,"Total members:",tt,"Presence loaded:",ee),c.jsxs(c.Fragment,{children:[c.jsx(Ks,{children:t&&c.jsx(xn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:n,children:c.jsxs(xn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.15},style:{backgroundColor:"var(--surface)",borderRadius:"12px",maxWidth:"600px",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.2)"},onClick:$=>$.stopPropagation(),children:[c.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("h2",{style:{margin:0,fontSize:"20px",fontWeight:700,color:"var(--text)"},children:[i.type==="channel"?"Channel":"Group"," Profile"]}),c.jsx("button",{onClick:n,"aria-label":"Close",style:{background:"none",border:"none",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"background-color 0.2s",fontSize:"24px",fontWeight:300,lineHeight:1,color:"var(--text)"},onMouseEnter:$=>{$.currentTarget.style.backgroundColor="var(--background)"},onMouseLeave:$=>{$.currentTarget.style.backgroundColor="transparent"},children:""})]}),c.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"20px"},children:[C&&c.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-muted)"},children:"Loading profile..."}),k&&c.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#ff6b6b"},children:k}),!C&&!k&&x&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[x.avatar?c.jsx("img",{src:x.avatar,alt:x.name,style:{width:"120px",height:"120px",borderRadius:"50%",objectFit:"cover",marginBottom:"16px"}}):c.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",backgroundColor:"var(--accent)",color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"48px",fontWeight:700,marginBottom:"16px"},children:x.name.charAt(0).toUpperCase()}),c.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"24px",fontWeight:700,color:"var(--text)"},children:x.name}),x.description&&c.jsx("p",{style:{margin:"0 0 16px 0",fontSize:"14px",color:"var(--text-muted)"},children:x.description})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",marginBottom:"24px"},children:[c.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[c.jsx(hr,{size:20,color:"var(--text-muted)",style:{marginBottom:"4px"}}),c.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"var(--text)"},children:tt}),c.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Total Members"})]}),c.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[c.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"#51cf66",margin:"0 auto 4px auto"}}),c.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"#51cf66"},children:it}),c.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Online Now"})]}),c.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[c.jsx(W_,{size:20,color:"var(--text-muted)",style:{marginBottom:"4px"}}),c.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"var(--text)"},children:new Date(x.createdAt).toLocaleDateString()}),c.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Created"})]})]}),x.privacy&&c.jsxs("div",{style:{marginBottom:"24px"},children:[c.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:700,color:"var(--text)"},children:"Privacy"}),c.jsxs("div",{style:{padding:"16px",backgroundColor:"var(--background)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"var(--text)",marginBottom:"4px"},children:x.privacy==="public"?"Public":"Private"}),c.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:x.privacy==="public"?"Anyone can find and join":"Invite-only membership"})]}),We&&v&&c.jsxs("button",{onClick:async()=>{const $=x.privacy==="public"?"private":"public";await Zt({title:"Change Privacy",message:`Change this ${i?.type||"chat"} to ${$}? ${$==="private"?"Only invited members will be able to join.":"Anyone will be able to find and join."}`,confirmText:"Change",cancelText:"Cancel",variant:"info"})&&v($)},style:{padding:"8px 16px",backgroundColor:"var(--accent)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,transition:"opacity 0.2s"},onMouseEnter:$=>{$.currentTarget.style.opacity="0.8"},onMouseLeave:$=>{$.currentTarget.style.opacity="1"},children:["Change to ",x.privacy==="public"?"Private":"Public"]})]})]}),(We||en||Tt)&&c.jsx("div",{style:{marginBottom:"24px"},children:c.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(We||en)&&c.jsxs("button",{onClick:()=>Q(!0),style:{flex:1,padding:"10px 16px",backgroundColor:"#51cf66",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[c.jsx(hr,{size:16}),"Add Member"]}),(We||Tt)&&l&&c.jsxs("button",{onClick:l,style:{flex:1,padding:"10px 16px",backgroundColor:"var(--accent)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[c.jsx(K_,{size:16}),"Edit ",i.type==="channel"?"Channel":"Group"]}),We&&u&&c.jsxs("button",{onClick:ae,style:{padding:"10px 16px",backgroundColor:"#ff6b6b",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[c.jsx(cp,{size:16}),"Delete"]})]})}),Oe&&c.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",textAlign:"center"},children:[c.jsx(Ws,{size:32,color:"#ef4444",style:{marginBottom:"8px"}}),c.jsx("h4",{style:{margin:"0 0 8px 0",color:"#ef4444",fontSize:"16px",fontWeight:600},children:"You Are Banned"}),c.jsxs("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"14px"},children:["Sorry, you have been banned from this ",i.type==="channel"?"channel":"group"," and cannot rejoin."]})]}),!tn&&!Oe&&x?.privacy==="public"&&c.jsx("div",{style:{marginBottom:"24px"},children:c.jsxs("button",{onClick:Sn,disabled:de,style:{width:"100%",padding:"12px 16px",backgroundColor:de?"var(--text-muted)":"#51cf66",color:"white",border:"none",borderRadius:"8px",cursor:de?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background-color 0.2s"},children:[c.jsx(tb,{size:18}),de?"Joining...":`Join ${i.type==="channel"?"Channel":"Group"}`]})}),!tn&&!Oe&&x?.privacy==="private"&&c.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[c.jsx(Js,{size:24,color:"var(--text-muted)",style:{marginBottom:"8px"}}),c.jsxs("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"14px"},children:["This is a private ",i.type==="channel"?"channel":"group",". You need an invitation to join."]})]}),!We&&tn&&f&&c.jsx("div",{style:{marginBottom:"24px"},children:c.jsxs("button",{onClick:at,style:{width:"100%",padding:"10px 16px",backgroundColor:"#ff6b6b",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[c.jsx(nb,{size:16}),"Leave ",i.type==="channel"?"Channel":"Group"]})}),(We||Xt)&&c.jsx("div",{style:{marginBottom:"24px"},children:c.jsxs("button",{onClick:()=>Me(!0),style:{width:"100%",padding:"10px 16px",backgroundColor:"var(--background)",color:"var(--text)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background-color 0.2s"},onMouseEnter:$=>{$.currentTarget.style.backgroundColor="var(--border)"},onMouseLeave:$=>{$.currentTarget.style.backgroundColor="var(--background)"},children:[c.jsx(Ws,{size:16}),"View Banned Users"]})}),c.jsxs("div",{children:[c.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:700,color:"var(--text)"},children:["Members (",tt,")"]}),tt>5&&c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("input",{type:"text",placeholder:"Search members...",value:D,onChange:$=>L($.target.value),style:{width:"100%",padding:"10px 16px",backgroundColor:"var(--background)",border:"2px solid var(--border)",borderRadius:"8px",fontSize:"14px",color:"var(--text)",transition:"border-color 0.2s"},onFocus:$=>{$.currentTarget.style.borderColor="var(--accent)"},onBlur:$=>{$.currentTarget.style.borderColor="var(--border)"}}),c.jsxs("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px"},children:["Showing ",E.length," of ",tt," members"]})]}),pe.admin.length>0&&c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("div",{style:{fontSize:"12px",fontWeight:700,color:"var(--text-muted)",marginBottom:"8px",textTransform:"uppercase"},children:"Admins"}),pe.admin.map($=>c.jsx(Sf,{member:$,currentUserId:o,isAdmin:We,isUserOnline:ue,getUserLastSeen:re,onViewProfile:m,onKick:mt,onBanMember:g,chatId:i.id,canManageBans:Xt,canManageUsers:Bt},$.id))]}),pe.moderator.length>0&&c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("div",{style:{fontSize:"12px",fontWeight:700,color:"var(--text-muted)",marginBottom:"8px",textTransform:"uppercase"},children:"Moderators"}),pe.moderator.map($=>c.jsx(Sf,{member:$,currentUserId:o,isAdmin:We,isUserOnline:ue,getUserLastSeen:re,onViewProfile:m,onKick:mt,onBanMember:g,chatId:i.id,canManageBans:Xt,canManageUsers:Bt},$.id))]}),pe.member.length>0&&c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"12px",fontWeight:700,color:"var(--text-muted)",marginBottom:"8px",textTransform:"uppercase"},children:"Members"}),pe.member.map($=>c.jsx(Sf,{member:$,currentUserId:o,isAdmin:We,isUserOnline:ue,getUserLastSeen:re,onViewProfile:m,onKick:mt,onBanMember:g,chatId:i.id,canManageBans:Xt,canManageUsers:Bt},$.id))]})]})]})]})]})})}),c.jsx(Ks,{children:P&&c.jsx(xn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},onClick:()=>Q(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"16px"},children:c.jsxs(xn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.15},onClick:$=>$.stopPropagation(),style:{backgroundColor:"var(--surface)",borderRadius:"12px",maxWidth:"500px",width:"100%",padding:"20px",maxHeight:"80vh",overflow:"auto"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[c.jsx("h3",{style:{margin:0,color:"var(--text)"},children:"Add Member"}),c.jsx("button",{onClick:()=>Q(!1),"aria-label":"Close",style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"var(--text-muted)",fontSize:"22px",fontWeight:300,lineHeight:1},children:""})]}),c.jsx("input",{type:"text",placeholder:"Search users...",value:ne,onChange:$=>fn($.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",backgroundColor:"var(--background)",color:"var(--text)",fontSize:"14px",marginBottom:"16px"},autoFocus:!0}),Ee&&c.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"Searching..."}),!Ee&&ce.length===0&&ne&&c.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"No users found"}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:ce.map($=>c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[c.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600},children:$.username?.charAt(0).toUpperCase()||"?"}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:600,color:"var(--text)"},children:$.username}),$.email&&c.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:$.email})]})]}),c.jsx("button",{onClick:()=>Wt($.id),style:{padding:"8px 16px",backgroundColor:"var(--accent)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Add"})]},$.id))})]})})}),c.jsx(Ks,{children:ve&&c.jsx(xn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1002},onClick:()=>Me(!1),children:c.jsxs(xn.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:$=>$.stopPropagation(),style:{backgroundColor:"var(--card)",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"400px",maxHeight:"500px",overflowY:"auto"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[c.jsxs("h3",{style:{margin:0,color:"var(--text)",display:"flex",alignItems:"center",gap:"8px"},children:[c.jsx(Ws,{size:20,color:"#ef4444"}),"Banned Users"]}),c.jsx("button",{onClick:()=>Me(!1),"aria-label":"Close",style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"var(--text-muted)",fontSize:"22px",fontWeight:300,lineHeight:1},children:""})]}),be&&c.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"Loading banned users..."}),!be&&ge.length===0&&c.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"No banned users"}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:ge.map($=>c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[$.avatarUrl?c.jsx("img",{src:$.avatarUrl,alt:$.username,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"}}):c.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600},children:$.username?.charAt(0).toUpperCase()||"?"}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:500,color:"var(--text)"},children:$.username}),c.jsxs("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:["Banned ",new Date($.bannedAt).toLocaleDateString()]})]})]}),c.jsx("button",{onClick:()=>dn($.userId,$.username),style:{padding:"8px 16px",backgroundColor:"#51cf66",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Unban"})]},$.userId))})]})})})]})},Sf=({member:t,currentUserId:n,isAdmin:i,isUserOnline:o,getUserLastSeen:l,onViewProfile:u,onKick:f,onBanMember:h,chatId:m,canManageBans:g=!1,canManageUsers:v=!1})=>{const[x,S]=w.useState(!1),[C,_]=w.useState(!1),k=o(t.userId),j=l(t.userId),D=t.userId===n,L=()=>t.role==="admin"?c.jsxs("span",{style:{padding:"3px 8px",backgroundColor:"#fbbf24",color:"#000",borderRadius:"4px",fontSize:"11px",fontWeight:600,display:"inline-flex",alignItems:"center",gap:"4px"},children:[c.jsx(Z_,{size:12}),"Admin"]}):t.role==="moderator"?c.jsxs("span",{style:{padding:"3px 8px",backgroundColor:"#60a5fa",color:"#000",borderRadius:"4px",fontSize:"11px",fontWeight:600,display:"inline-flex",alignItems:"center",gap:"4px"},children:[c.jsx(Js,{size:12}),"Mod"]}):t.role==="member"?c.jsx("span",{style:{padding:"3px 8px",backgroundColor:"#94a3b8",color:"#fff",borderRadius:"4px",fontSize:"11px",fontWeight:500,display:"inline-flex",alignItems:"center",gap:"4px"},children:"Member"}):null,E=!D&&t.role!=="admin"&&(i||g||v);return c.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px",marginBottom:"8px",cursor:u?"pointer":"default",transition:"background-color 0.2s",position:"relative"},onClick:()=>u&&u(t.userId),onMouseEnter:U=>{u&&(U.currentTarget.style.backgroundColor="var(--border)")},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="var(--background)"},children:[c.jsxs("div",{style:{position:"relative",marginRight:"12px"},children:[t.user.avatar?c.jsx("img",{src:t.user.avatar,alt:t.user.username,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"}}):c.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"var(--accent)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:700},children:t.user.username.charAt(0).toUpperCase()}),c.jsx(rp,{isOnline:k,lastSeen:j,size:"sm",position:"avatar-overlay"})]}),c.jsxs("div",{style:{flex:1,minWidth:0},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"2px"},children:[c.jsxs("span",{style:{fontSize:"14px",fontWeight:600,color:"var(--text)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.user.username,D&&" (You)"]}),L()]}),c.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:k?"Online":j?`Last seen ${Rf(j)}`:"Offline"})]}),E&&c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:U=>{U.stopPropagation(),S(!x)},style:{background:"none",border:"none",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"background 0.15s ease"},onMouseEnter:U=>U.currentTarget.style.background="var(--background)",onMouseLeave:U=>U.currentTarget.style.background="none",children:c.jsx(Cf,{size:18,color:"var(--text-muted)"})}),c.jsx(Ks,{children:x&&c.jsxs(xn.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.1},style:{position:"absolute",right:0,bottom:"100%",marginBottom:"4px",background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",minWidth:"180px",zIndex:1e3,overflow:"hidden"},children:[c.jsx("div",{style:{padding:"10px 12px",borderBottom:"1px solid var(--border)"},children:c.jsxs("span",{style:{fontSize:"11px",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Manage ",t.user.username]})}),(i||v)&&c.jsxs("button",{onClick:U=>{U.stopPropagation(),S(!1),_(!0)},style:{width:"100%",padding:"10px 12px",background:"transparent",border:"none",textAlign:"left",cursor:"pointer",fontSize:"13px",fontWeight:500,color:"var(--text)",display:"flex",alignItems:"center",gap:"8px",transition:"background 0.1s ease"},onMouseEnter:U=>U.currentTarget.style.background="var(--background)",onMouseLeave:U=>U.currentTarget.style.background="transparent",children:[c.jsx(Q_,{size:14,color:"var(--text-muted)"}),"Manage Permissions"]}),c.jsxs("div",{style:{borderTop:"1px solid var(--border)"},children:[(i||g)&&h&&c.jsxs("button",{onClick:async U=>{U.stopPropagation(),await Zt({title:"Ban Member",message:`Are you sure you want to ban ${t.user.username}? They will not be able to rejoin this group.`,confirmText:"Ban",cancelText:"Cancel",variant:"danger"})&&h(t.userId),S(!1)},style:{width:"100%",padding:"10px 12px",background:"transparent",border:"none",textAlign:"left",cursor:"pointer",fontSize:"13px",fontWeight:500,color:"#ef4444",display:"flex",alignItems:"center",gap:"8px",transition:"background 0.1s ease"},onMouseEnter:U=>U.currentTarget.style.background="rgba(239, 68, 68, 0.1)",onMouseLeave:U=>U.currentTarget.style.background="transparent",children:[c.jsx(Js,{size:14}),"Ban Member"]}),i&&f&&c.jsxs("button",{onClick:U=>{U.stopPropagation(),f(t.userId),S(!1)},style:{width:"100%",padding:"10px 12px",background:"transparent",border:"none",textAlign:"left",cursor:"pointer",fontSize:"13px",fontWeight:500,color:"#f97316",display:"flex",alignItems:"center",gap:"8px",transition:"background 0.1s ease"},onMouseEnter:U=>U.currentTarget.style.background="rgba(249, 115, 22, 0.1)",onMouseLeave:U=>U.currentTarget.style.background="transparent",children:[c.jsx(cp,{size:14}),"Remove Member"]})]})]})})]}),c.jsx(TS,{isOpen:C,onClose:()=>_(!1),chatId:m,member:{id:t.id||t.userId||"",userId:t.userId,user:{id:t.user.id||t.userId,username:t.user.username,avatarUrl:t.user.avatar},role:t.role||"member"},onPermissionsChanged:async()=>{}})]})},Qx=({isOpen:t,onClose:n,userId:i,onSendMessage:o,onBlockUser:l,onUnblockUser:u})=>{const[f,h]=w.useState(null),[m,g]=w.useState(!1),[v,x]=w.useState(null),[S,C]=w.useState(!1),[_,k]=w.useState(!1),[j,D]=w.useState(!1),{isUserOnline:L,usersYouBlocked:E,blockedByUsers:U}=ze();w.useEffect(()=>{t&&i&&(P(),Q())},[t,i]),w.useEffect(()=>{if(!t||!i)return;const de=E.has(i),Ae=U.has(i);console.log("[UserProfileViewer] Store block status changed:",{userId:i,iBlockedInStore:de,blockedByInStore:Ae}),de!==S&&C(de),Ae!==_&&k(Ae)},[t,i,E,U]);const P=async()=>{g(!0),x(null);try{const de=await ta.getUserProfile(i);console.log("[UserProfileViewer] Loaded profile:",de),console.log("[UserProfileViewer] Bio field:",de.bio),h(de)}catch(de){console.error("[UserProfileViewer] Error loading profile:",de),x(de.response?.data?.message||"Failed to load user profile")}finally{g(!1)}},Q=async()=>{D(!0);try{const de=await ta.getMutualBlockStatus(i);console.log("[UserProfileViewer] Block status:",de),C(de.iBlockedThem),k(de.theyBlockedMe)}catch(de){console.error("[UserProfileViewer] Error checking block status:",de),C(!1),k(!1)}finally{D(!1)}},ne=()=>{o&&(o(i),n())},W=async()=>{if(!l)return;await Zt({title:"Block User",message:`Are you sure you want to block ${f?.username||"this user"}? They won't be able to message you.`,confirmText:"Block",cancelText:"Cancel",variant:"danger"})&&(l(i),C(!0))},ce=async()=>{if(!u)return;await Zt({title:"Unblock User",message:`Are you sure you want to unblock ${f?.username||"this user"}? They will be able to message you again.`,confirmText:"Unblock",cancelText:"Cancel",variant:"info"})&&(u(i),C(!1))},se=S||_,Ee=f?L(f.id):!1;return c.jsx(Ks,{children:t&&c.jsxs(xn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:n,children:[c.jsx("style",{children:`
    .userProfileScrollContainer::-webkit-scrollbar {
      width: 6px;
    }
    .userProfileScrollContainer::-webkit-scrollbar-track {
      background: rgba(99, 102, 241, 0.1);
      border-radius: 3px;
    }
    .userProfileScrollContainer::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
      border-radius: 3px;
    }
    .userProfileScrollContainer::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #764ba2 0%, #667eea 100%);
    }
  `}),c.jsxs(xn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.15},style:{background:"#1e293b",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",maxWidth:"400px",width:"100%",maxHeight:"85vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.3)",overflow:"hidden"},onClick:de=>de.stopPropagation(),children:[c.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#f1f5f9"},children:"User Profile"}),c.jsx("button",{onClick:n,"aria-label":"Close",style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",transition:"color 0.15s ease",fontSize:"24px",fontWeight:300,lineHeight:1},onMouseEnter:de=>de.currentTarget.style.color="#f1f5f9",onMouseLeave:de=>de.currentTarget.style.color="#94a3b8",children:""})]}),c.jsxs("div",{className:"userProfileScrollContainer",style:{overflowY:"auto",flex:1,padding:"24px"},children:[m&&c.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#94a3b8"},children:[c.jsx(xn.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{width:"40px",height:"40px",border:"3px solid rgba(99, 102, 241, 0.2)",borderTopColor:"#818cf8",borderRadius:"50%",margin:"0 auto 16px"}}),"Loading profile..."]}),v&&c.jsx("div",{style:{textAlign:"center",padding:"60px 20px",color:"#f87171"},children:v}),!m&&!v&&f&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[c.jsxs("div",{style:{position:"relative",display:"inline-block",marginBottom:"16px"},children:[f.avatar?c.jsx("img",{src:f.avatar,alt:f.username,style:{width:"100px",height:"100px",borderRadius:"50%",objectFit:"cover",border:"3px solid rgba(255, 255, 255, 0.1)"}}):c.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"#6366f1",color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"40px",fontWeight:600},children:f.username.charAt(0).toUpperCase()}),c.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:Ee?"#22c55e":"#64748b",border:"3px solid #1e293b"}})]}),c.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"20px",fontWeight:600,color:"#f1f5f9"},children:f.username}),c.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 12px",borderRadius:"12px",background:Ee?"rgba(34, 197, 94, 0.15)":"rgba(100, 116, 139, 0.15)"},children:[c.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:Ee?"#22c55e":"#64748b"}}),c.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:Ee?"#4ade80":"#94a3b8"},children:Ee?"Online":"Offline"})]})]}),c.jsxs("div",{style:{padding:"14px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",marginBottom:"16px"},children:[c.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"11px",fontWeight:600,color:"#94a3b8",textTransform:"uppercase",letterSpacing:"0.5px"},children:"About"}),c.jsx("p",{style:{margin:0,fontSize:"14px",color:"#cbd5e1",lineHeight:"1.5"},children:f.bio||c.jsx("span",{style:{color:"#64748b",fontStyle:"italic"},children:"No bio set"})})]}),!j&&(_||S)&&c.jsxs("div",{style:{padding:"12px 14px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"10px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"10px"},children:[c.jsx(Ws,{size:18,color:"#f87171"}),c.jsx("span",{style:{fontSize:"14px",color:"#f87171"},children:_&&S?"You have blocked each other":_?"This user has blocked you":"You have blocked this user"})]}),c.jsxs("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[o&&c.jsxs("button",{onClick:ne,disabled:se||j,style:{width:"100%",padding:"12px 16px",background:se?"#4b5563":"#6366f1",color:"white",border:"none",borderRadius:"10px",cursor:se?"not-allowed":"pointer",fontSize:"14px",fontWeight:500,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background 0.15s ease",opacity:se?.6:1},onMouseEnter:de=>{se||(de.currentTarget.style.background="#5558e3")},onMouseLeave:de=>{se||(de.currentTarget.style.background="#6366f1")},children:[c.jsx(J_,{size:18}),se?"Cannot Message":"Send Message"]}),S?u&&c.jsxs("button",{onClick:ce,style:{width:"100%",padding:"12px 16px",background:"rgba(34, 197, 94, 0.1)",color:"#4ade80",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"10px",cursor:"pointer",fontSize:"14px",fontWeight:500,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background 0.15s ease"},onMouseEnter:de=>de.currentTarget.style.background="rgba(34, 197, 94, 0.2)",onMouseLeave:de=>de.currentTarget.style.background="rgba(34, 197, 94, 0.1)",children:[c.jsx(ab,{size:18}),"Unblock User"]}):l&&c.jsxs("button",{onClick:W,style:{width:"100%",padding:"12px 16px",background:"rgba(239, 68, 68, 0.1)",color:"#f87171",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"10px",cursor:"pointer",fontSize:"14px",fontWeight:500,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background 0.15s ease"},onMouseEnter:de=>de.currentTarget.style.background="rgba(239, 68, 68, 0.2)",onMouseLeave:de=>de.currentTarget.style.background="rgba(239, 68, 68, 0.1)",children:[c.jsx(mr,{size:18}),"Block User"]})]})]})]})]})]})})},h4=({isOpen:t,onClose:n,isDarkMode:i=!1})=>{const[o,l]=w.useState([]),[u,f]=w.useState(!1),[h,m]=w.useState(null);w.useEffect(()=>{t&&g()},[t]);const g=async()=>{f(!0);try{const x=await ta.getBlockedUsers();l(x||[])}catch(x){console.error("Failed to load blocked users:",x),oe.error(Ue(x,"Failed to load blocked users"))}finally{f(!1)}},v=async x=>{if(await Zt({title:"Unblock User",message:`Are you sure you want to unblock ${x.username}? They will be able to message you again.`,confirmText:"Unblock",cancelText:"Cancel",variant:"warning"})){m(x.userId);try{await ta.unblockUser(x.userId),l(C=>C.filter(_=>_.userId!==x.userId)),oe.success(`${x.username} has been unblocked`)}catch(C){console.error("Failed to unblock user:",C),oe.error(Ue(C,"Failed to unblock user"))}finally{m(null)}}};return t?c.jsxs(c.Fragment,{children:[c.jsx("div",{onClick:n,style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998}}),c.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"480px",maxHeight:"80vh",backgroundColor:i?"#1e293b":"#ffffff",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:`1px solid ${i?"#334155":"#e2e8f0"}`},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[c.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"#dc2626",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(mr,{size:20,color:"white"})}),c.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:700,color:i?"#f1f5f9":"#1e293b"},children:"Blocked Users"})]}),c.jsx("button",{onClick:n,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",color:i?"#94a3b8":"#64748b",transition:"background-color 0.2s"},onMouseEnter:x=>{x.currentTarget.style.backgroundColor=i?"#334155":"#f1f5f9"},onMouseLeave:x=>{x.currentTarget.style.backgroundColor="transparent"},children:c.jsx(ib,{size:20})})]}),c.jsx("div",{style:{flex:1,overflow:"auto",padding:"16px 24px"},children:u?c.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 0",color:i?"#94a3b8":"#64748b"},children:"Loading..."}):o.length===0?c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 0",color:i?"#94a3b8":"#64748b"},children:[c.jsx(mr,{size:48,style:{marginBottom:"16px",opacity:.5}}),c.jsx("p",{style:{margin:0,fontSize:"14px"},children:"You haven't blocked any users"})]}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:o.map(x=>c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:i?"#334155":"#f8fafc",borderRadius:"12px",border:`1px solid ${i?"#475569":"#e2e8f0"}`},children:[c.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"50%",overflow:"hidden",flexShrink:0},children:x.avatarUrl?c.jsx("img",{src:vn(x.avatarUrl),alt:x.username,style:{width:"100%",height:"100%",objectFit:"cover"}}):c.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#6366f1",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600,fontSize:"16px"},children:Ki(x.username)})}),c.jsxs("div",{style:{flex:1,minWidth:0},children:[c.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:i?"#f1f5f9":"#1e293b",marginBottom:"2px"},children:x.username}),c.jsxs("div",{style:{fontSize:"12px",color:i?"#94a3b8":"#64748b"},children:["Blocked ",new Date(x.blockedAt).toLocaleDateString()]})]}),c.jsxs("button",{onClick:()=>v(x),disabled:h===x.userId,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",backgroundColor:i?"#475569":"#e2e8f0",color:i?"#f1f5f9":"#1e293b",border:"none",borderRadius:"8px",cursor:h===x.userId?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,opacity:h===x.userId?.6:1,transition:"all 0.2s"},onMouseEnter:S=>{h!==x.userId&&(S.currentTarget.style.backgroundColor="#10b981",S.currentTarget.style.color="white")},onMouseLeave:S=>{h!==x.userId&&(S.currentTarget.style.backgroundColor=i?"#475569":"#e2e8f0",S.currentTarget.style.color=i?"#f1f5f9":"#1e293b")},children:[c.jsx(ew,{size:14}),h===x.userId?"Unblocking...":"Unblock"]})]},x.userId))})}),c.jsx("div",{style:{padding:"16px 24px",borderTop:`1px solid ${i?"#334155":"#e2e8f0"}`,display:"flex",justifyContent:"flex-end"},children:c.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:i?"#334155":"#e2e8f0",color:i?"#f1f5f9":"#1e293b",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,transition:"background-color 0.2s"},onMouseEnter:x=>{x.currentTarget.style.backgroundColor=i?"#475569":"#cbd5e1"},onMouseLeave:x=>{x.currentTarget.style.backgroundColor=i?"#334155":"#e2e8f0"},children:"Close"})})]})]}):null},m4=t=>{if(!t||t==="undefined"||t==="null")return"?";const n=String(t).trim();if(!n||n.length===0)return"?";const i=n.split(/\s+/).filter(o=>o.length>0);return i.length===0?"?":i.length===1?i[0][0]?.toUpperCase()||"?":i.map(o=>o[0]).join("").toUpperCase().slice(0,2)||"?"},uc=({src:t,name:n,fallbackClass:i})=>{const[o,l]=ya.useState(!t),[u,f]=ya.useState(!1);ya.useEffect(()=>{t?(l(!1),f(!1)):l(!0)},[t]);const h=()=>{f(!0),l(!0)};return o||u||!t?c.jsx("div",{className:i,children:m4(n)}):c.jsx("img",{src:t,alt:n,className:i,onError:h,loading:"lazy"})},g4=t=>{if(!t)return"Unknown";try{const n=new Date(t);if(isNaN(n.getTime()))return console.warn("Invalid date string:",t),"Invalid date";const i=new Date,o=new Date(i.getFullYear(),i.getMonth(),i.getDate()),l=new Date(o);l.setDate(l.getDate()-1);const u=new Date(n.getFullYear(),n.getMonth(),n.getDate());return u.getTime()===o.getTime()?n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):u.getTime()===l.getTime()?"Yesterday":i.getTime()-n.getTime()<10080*60*1e3?n.toLocaleString("en-US",{weekday:"short"}):n.toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch(n){return console.error("Error formatting time:",n,t),"Invalid date"}},y4=(t,n)=>{if(!t.lastMessage)return{preview:"No messages yet",isReply:!1,hasMention:!1,hasAttachment:!1,isOwnMessage:!1,isSeen:!1};const i=t.lastMessage,o=i.content||"",l=!!i.replyId,u=!!i.fileUrl,f=n?i.senderId===n:!1,h=i.isSeen===!0,m=n?/@\w+/.test(o):!1;let g=o;if(!o&&u&&(g=" Attachment"),t.type!=="dm"&&i.senderUsername){const x=`${i.senderUsername||"Unknown"}: ${g}`;return{preview:x.length>40?x.substring(0,37)+"...":x,isReply:l,hasMention:m,hasAttachment:u,isOwnMessage:f,isSeen:h}}return{preview:g.length>40?g.substring(0,37)+"...":g,isReply:l,hasMention:m,hasAttachment:u,isOwnMessage:f,isSeen:h}},v4=({chats:t,currentChat:n,onSelectChat:i,isLoadingChats:o,user:l,onLogout:u,onMenuOpen:f,searchQuery:h,onSearchChange:m,searchResults:g,onSelectSearchResult:v,isSearching:x,isDarkMode:S,onClearSearch:C,isMobileOpen:_=!1,onMobileClose:k,onlineUsers:j})=>{const D=E=>{if(E.type!=="dm")return!1;if(j&&E.members){const U=E.members.find(P=>P.userId!==l?.id);if(U?.userId&&j.has(U.userId))return j.get(U.userId)||!1}return E.isOnline||!1},L=w.useRef(null);return w.useEffect(()=>{const E=U=>{L.current&&!L.current.contains(U.target)&&C()};return h&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[h,C]),c.jsxs(c.Fragment,{children:[_&&c.jsx("div",{className:M.mobileOverlay,onClick:k,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99,display:"none"}}),c.jsxs("div",{className:`${M.leftPanel} ${S?M.darkMode:""} ${_?M.mobileOpen:""}`,children:[c.jsx("div",{className:M.panelHeader,children:c.jsx("button",{className:M.menuButton,onClick:f,title:"Settings",style:{background:"transparent",border:"none",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:S?"#94a3b8":"#64748b",transition:"background 0.15s ease, color 0.15s ease"},onMouseEnter:E=>{E.currentTarget.style.background=S?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",E.currentTarget.style.color=S?"#f1f5f9":"#1e293b"},onMouseLeave:E=>{E.currentTarget.style.background="transparent",E.currentTarget.style.color=S?"#94a3b8":"#64748b"},children:c.jsx(tw,{size:22})})}),c.jsxs("div",{className:M.searchBar,ref:L,children:[c.jsx("input",{type:"text",placeholder:"Search chats, users...",className:M.searchInput,value:h,onChange:E=>m(E.target.value)}),h&&c.jsxs("div",{className:`${M.searchResults} ${S?M.darkMode:""}`,onClick:E=>E.stopPropagation(),children:[x&&c.jsx("div",{className:M.searchLoading,children:"Searching..."}),!x&&g.length===0&&c.jsx("div",{className:M.searchNoResults,children:"No results found"}),g.map(E=>c.jsxs("div",{className:M.searchResultItem,onClick:()=>{v(E),C()},children:[c.jsx("div",{className:M.searchResultAvatar,children:c.jsx(uc,{src:E.avatar,name:E.name,fallbackClass:M.avatarFallback})}),c.jsxs("div",{className:M.searchResultInfo,children:[c.jsxs("div",{className:M.searchResultName,children:[E.name,c.jsx("span",{className:M.searchResultTypeIcon,title:E.type,children:E.type==="user"?" ":E.type==="group"?" ":E.type==="channel"?" ":""})]}),c.jsx("div",{className:M.searchResultType,children:E.type==="user"?"User":E.type==="group"?"Group":E.type==="channel"?"Channel":"Unknown"})]})]},E.id))]})]}),c.jsxs("div",{className:M.chatList,children:[o&&c.jsx("div",{className:M.loading,children:"Loading chats..."}),!o&&t.length===0&&c.jsx("div",{className:M.emptyState,children:"No chats yet. Start a conversation!"}),t.map(E=>c.jsxs("div",{className:`${M.chatItem} ${n?.id===E.id?M.active:""}`,onClick:()=>i(E),children:[c.jsxs("div",{className:M.chatAvatar,children:[c.jsx(uc,{src:E.avatar,name:E.name,fallbackClass:M.avatarFallback}),E.type==="dm"&&D(E)&&c.jsx("div",{className:M.onlineIndicator})]}),c.jsxs("div",{className:M.chatInfo,children:[c.jsxs("div",{className:M.chatHeader,children:[c.jsxs("div",{className:M.chatNameWithType,children:[c.jsx("span",{className:M.chatName,children:E.name}),c.jsx("span",{className:`${M.chatTypeIcon} ${M[`icon${E.type.charAt(0).toUpperCase()+E.type.slice(1)}`]}`,title:E.type,children:E.type==="dm"?"":E.type==="group"?"":E.type==="channel"?"":""})]}),c.jsxs("div",{className:M.headerRight,children:[c.jsx("span",{className:M.timestamp,children:g4(E.updatedAt)}),E.unreadCount>0&&c.jsx("span",{className:M.unreadBadge,children:E.unreadCount})]})]}),c.jsx("div",{className:M.chatPreview,children:(()=>{const U=y4(E,l?.id);return c.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[c.jsx("span",{style:{fontSize:"10px",color:U.isSeen?"#51cf66":"var(--text-secondary)",fontWeight:500,flexShrink:0,opacity:U.isSeen?1:.7},title:U.isSeen?"Seen":"Sent",children:U.isSeen?"":""}),U.isReply&&c.jsx("span",{style:{fontSize:"10px",opacity:.8,flexShrink:0},title:"Reply",children:""}),U.hasMention&&c.jsx("span",{style:{fontSize:"9px",backgroundColor:"var(--accent)",color:"#fff",padding:"1px 4px",borderRadius:"4px",fontWeight:600,flexShrink:0},title:"Mention",children:"@"}),c.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:U.preview})]})})()})]})]},E.id))]}),l&&c.jsxs("div",{className:M.userSection,children:[c.jsx("div",{className:M.userAvatar,children:c.jsx(uc,{src:l.avatar,name:l.username,fallbackClass:M.avatarFallback})}),c.jsx("div",{className:M.userInfo,children:c.jsx("div",{className:M.username,children:l.username})}),c.jsx("button",{className:M.logoutButton,onClick:u,title:"Logout",children:""})]})]})]})},Xs={getNotifications:async()=>{try{console.log("[NotificationService] Fetching notifications from GET /notifications");const t=await we.get("/notifications");console.log("[NotificationService] Raw API Response:",{status:t.status,statusText:t.statusText,data:t.data});let n=[];t.data?.success&&t.data?.data?(n=t.data.data,console.log("[NotificationService] Got notifications from response.data.data:",n.length,"items")):t.data&&Array.isArray(t.data)?(n=t.data,console.log("[NotificationService] Response is direct array:",n.length,"items")):(console.log("[NotificationService] Unexpected response format:",t.data),n=[]);const i=Array.isArray(n)?n.map(o=>({id:o.notificationId||o.id,chatId:o.chatId,messageId:o.messageId,chatName:o.chatName||"",chatAvatar:o.chatAvatar||"",senderName:o.senderName||"",content:o.content||"",fileUrl:o.fileUrl,sentTime:o.sentTime||new Date().toISOString(),seen:o.seen!==void 0?o.seen:!1})):[];return console.log("[NotificationService] Returning",i.length,"normalized notifications"),i}catch(t){return console.error("[NotificationService] Failed to fetch notifications:",t.message),console.error("[NotificationService] Error details:",{status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,url:t.config?.url}),[]}},markAsSeen:async t=>{try{console.log("[NotificationService] Marking notification as seen:",t);const n=await we.put(`/notifications/seen?notificationId=${t}`);return console.log("[NotificationService] Mark as seen response:",n.data),n.data?.data||n.data}catch(n){throw console.error("[NotificationService] Failed to mark notification as seen:",n),console.error("[NotificationService] Error details:",{status:n.response?.status,statusText:n.response?.statusText,data:n.response?.data}),n}},markMultipleAsSeen:async t=>{try{if(!Array.isArray(t)||t.length===0)return console.warn("[NotificationService] No notification IDs provided"),{success:!0};console.log("[NotificationService] Marking multiple notifications as seen:",t),console.log("[NotificationService] Notification IDs (type, count):",typeof t[0],t.length);const n={notificationIds:t};console.log("[NotificationService] Request body:",JSON.stringify(n));const i=await we.put("/notifications/seen/batch",n);return console.log("[NotificationService] Mark multiple response:",{status:i.status,statusText:i.statusText,data:i.data}),i.data?.success||i.status===200?(console.log("[NotificationService] Successfully marked",t.length,"notifications as seen"),i.data||{success:!0}):(console.warn("[NotificationService] Response indicates potential issue:",i.data),i.data||{success:!0})}catch(n){throw console.error("[NotificationService] Failed to mark multiple notifications as seen:",n),console.error("[NotificationService] Full error details:",{message:n.message,status:n.response?.status,statusText:n.response?.statusText,responseData:n.response?.data,requestData:n.config?.data,headers:n.config?.headers}),n}},markAllAsSeen:async()=>{try{const t=await we.put("/notifications/seen/all");return t.data?.data||t.data}catch(t){throw console.warn("[NotificationService] PUT /notifications/seen/all may not be implemented:",t),t}}},_f=Object.freeze(Object.defineProperty({__proto__:null,notificationService:Xs},Symbol.toStringTag,{value:"Module"})),x4="_container_yar5o_1",b4="_header_yar5o_8",S4="_headerLeft_yar5o_24",_4="_pinIcon_yar5o_30",w4="_title_yar5o_34",C4="_count_yar5o_40",T4="_headerRight_yar5o_51",j4="_content_yar5o_57",A4="_loading_yar5o_63",k4="_spinner_yar5o_73",E4="_messagesList_yar5o_82",M4="_pinnedMessage_yar5o_87",R4="_messageAvatar_yar5o_105",D4="_avatarFallback_yar5o_119",N4="_messageContent_yar5o_131",U4="_messageHeader_yar5o_136",z4="_senderName_yar5o_143",O4="_messageTime_yar5o_149",B4="_messageText_yar5o_154",L4="_pinnedBy_yar5o_164",I4="_messageActions_yar5o_173",P4="_jumpButton_yar5o_180",V4="_unpinButton_yar5o_181",wt={container:x4,header:b4,headerLeft:S4,pinIcon:_4,title:w4,count:C4,headerRight:T4,content:j4,loading:A4,spinner:k4,messagesList:E4,pinnedMessage:M4,messageAvatar:R4,avatarFallback:D4,messageContent:N4,messageHeader:U4,senderName:z4,messageTime:O4,messageText:B4,pinnedBy:L4,messageActions:I4,jumpButton:P4,unpinButton:V4},H4=({chatId:t,onJumpToMessage:n,canUnpin:i})=>{const[o,l]=w.useState(!1),[u,f]=w.useState(null),{loadPinnedMessages:h,getPinnedMessages:m,unpinMessage:g,isLoadingPinned:v}=ze(),x=m(t);w.useEffect(()=>{t&&h(t)},[t,h]);const S=async C=>{f(C);try{await g(C)}catch(_){console.error("Failed to unpin message:",_)}finally{f(null)}};return x.length===0?null:c.jsxs("div",{className:wt.container,children:[c.jsxs("button",{className:wt.header,onClick:()=>l(!o),children:[c.jsxs("div",{className:wt.headerLeft,children:[c.jsx(Tf,{size:16,className:wt.pinIcon}),c.jsx("span",{className:wt.title,children:"Pinned Messages"}),c.jsx("span",{className:wt.count,children:x.length})]}),c.jsx("div",{className:wt.headerRight,children:o?c.jsx(nw,{size:18}):c.jsx(aw,{size:18})})]}),o&&c.jsx("div",{className:wt.content,children:v?c.jsxs("div",{className:wt.loading,children:[c.jsx(fc,{size:20,className:wt.spinner}),c.jsx("span",{children:"Loading pinned messages..."})]}):c.jsx("div",{className:wt.messagesList,children:x.map(C=>c.jsxs("div",{className:wt.pinnedMessage,children:[c.jsx("div",{className:wt.messageAvatar,children:C.senderAvatarUrl?c.jsx("img",{src:vn(C.senderAvatarUrl)||C.senderAvatarUrl,alt:C.senderUsername}):c.jsx("div",{className:wt.avatarFallback,children:Ki(C.senderUsername)})}),c.jsxs("div",{className:wt.messageContent,children:[c.jsxs("div",{className:wt.messageHeader,children:[c.jsx("span",{className:wt.senderName,children:C.senderUsername}),c.jsx("span",{className:wt.messageTime,children:Eb(C.sentAt)})]}),c.jsx("div",{className:wt.messageText,children:C.content||(C.fileUrl?"[File attachment]":"[Empty message]")}),C.pinnedByUsername&&c.jsxs("div",{className:wt.pinnedBy,children:[c.jsx(Tf,{size:12}),c.jsxs("span",{children:["Pinned by ",C.pinnedByUsername]})]})]}),c.jsxs("div",{className:wt.messageActions,children:[c.jsx("button",{className:wt.jumpButton,onClick:()=>n(C.messageId),title:"Jump to message",children:c.jsx(Zs,{size:16})}),i&&c.jsx("button",{className:wt.unpinButton,onClick:()=>S(C.messageId),disabled:u===C.messageId,title:"Unpin message",children:u===C.messageId?c.jsx(fc,{size:16,className:wt.spinner}):c.jsx("span",{style:{fontSize:"18px",fontWeight:300,lineHeight:1},children:""})})]})]},C.messageId))})})]})},F4=({isOpen:t,onClose:n,chatId:i,chatType:o,onMemberAdded:l})=>{const[u,f]=w.useState(""),[h,m]=w.useState([]),[g,v]=w.useState(!1),[x,S]=w.useState(!1),C=w.useRef(null),_=async j=>{if(f(j),!j.trim()){m([]);return}C.current&&clearTimeout(C.current),v(!0),C.current=setTimeout(async()=>{try{const L=await(await ht(()=>Promise.resolve().then(()=>Hn),void 0).then(E=>E.userService)).searchUsers(j);m(L)}catch(D){console.error("Search failed:",D),m([])}finally{v(!1)}},300)},k=async(j,D)=>{S(!0);try{o==="group"?await Fe.addMemberToGroup(i,j):o==="channel"&&await Fe.addMemberToChannel(i,j),oe.success(`${D} has been added to the chat.`),await l(),n()}catch(L){console.error("Failed to add member:",L),oe.error(Ue(L,"Failed to add member"))}finally{S(!1)}};return t?c.jsx("div",{className:M.modalOverlay,onClick:n,children:c.jsxs("div",{className:M.modal,onClick:j=>j.stopPropagation(),style:{maxWidth:"500px"},children:[c.jsxs("div",{className:M.modalHeader,children:[c.jsx("h2",{children:"Add Member"}),c.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),c.jsxs("div",{className:M.modalBody,children:[c.jsxs("div",{className:M.formGroup,children:[c.jsx("label",{children:"Search Users"}),c.jsx("input",{type:"text",placeholder:"Type username to search...",value:u,onChange:j=>_(j.target.value),className:M.formInput})]}),g&&c.jsx("div",{className:M.loadingState,children:"Searching..."}),h.length>0&&c.jsx("div",{style:{marginTop:"16px",maxHeight:"300px",overflowY:"auto"},children:h.map(j=>c.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px",borderRadius:"8px",backgroundColor:"var(--background)",marginBottom:"8px"},children:[c.jsx("div",{style:{marginRight:"10px"},children:j.avatar?c.jsx("img",{src:j.avatar,alt:j.username,style:{width:"32px",height:"32px",borderRadius:"50%"}}):c.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--accent)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"13px"},children:Ki(j.username)})}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:j.username}),c.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:j.email})]}),c.jsx("button",{onClick:()=>k(j.id,j.username),disabled:x,style:{padding:"6px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600},children:"Add"})]},j.id))}),u&&!g&&h.length===0&&c.jsx("div",{className:M.emptyState,children:"No users found"})]}),c.jsx("div",{className:M.modalFooter,children:c.jsx("button",{onClick:n,className:M.primaryButton,children:"Close"})})]})}):null},q4=({currentChat:t,messages:n,isLoadingMessages:i,onSendMessage:o,onOpenGroupCreate:l,onOpenChannelCreate:u,onOpenUserProfile:f,onOpenMobileSidebar:h,onOpenChatProfile:m})=>{const[g,v]=w.useState(""),[x,S]=w.useState(!1),[C,_]=w.useState(null),[k,j]=w.useState(""),[D,L]=w.useState(null),[E,U]=w.useState(!1),[P,Q]=w.useState(null),[ne,W]=w.useState(!1),[ce,se]=w.useState(!1),[Ee,$e]=w.useState(!1),de=w.useRef(null),Ae=w.useRef(null),Oe=w.useRef(null),[N,ee]=w.useState(null),ie=w.useRef(null),{isUserOnline:ve,getUserLastSeen:Me,getOnlineMembersCount:ge,loadPermissions:Ne}=ze(),{user:be}=xt(),Z=w.useRef(new Set),ue=w.useRef(null),re=w.useRef(0),Yt=w.useRef(n),Et=w.useRef(new Set),Jt=w.useRef(null),We=w.useRef(null);w.useEffect(()=>{Yt.current=n},[n]),w.useEffect(()=>{if(!t||!be)return;const B=Oe.current;if(!B)return;Z.current=new Set,Et.current=new Set;const q=async()=>{const Re=Array.from(Et.current);if(Re.length!==0){Et.current=new Set;try{await Xs.markMultipleAsSeen(Re)}catch(ut){console.error("[ChatView] Failed to mark notifications as seen:",ut)}}},he=new IntersectionObserver(Re=>{Re.forEach(ut=>{if(ut.isIntersecting){const gt=ut.target.dataset.messageId;if(!gt||Z.current.has(gt))return;const _n=Yt.current.find(ba=>ba.messageId===gt);if(!_n)return;!_n.isCurrentUser&&_n.isNotificated&&_n.notificationId&&(Z.current.add(gt),Et.current.add(_n.notificationId),Jt.current&&clearTimeout(Jt.current),Jt.current=setTimeout(q,500))}})},{root:B,rootMargin:"0px",threshold:.5});return We.current=he,B.querySelectorAll("[data-message-id]").forEach(Re=>he.observe(Re)),()=>{he.disconnect(),We.current=null,Jt.current&&clearTimeout(Jt.current)}},[t?.id,be]),w.useEffect(()=>{const B=Oe.current;if(!B||!We.current)return;B.querySelectorAll("[data-message-id]").forEach(he=>{const Te=he.dataset.messageId;Te&&!Z.current.has(Te)&&We.current?.observe(he)})},[n.length]);const{canSendMessage:en,canPinMessages:Tt,canManageMessages:Xt,isLoading:Bt}=Zp(t?.id);w.useEffect(()=>{console.log("[ChatView] Permission useEffect triggered:",{hasChatId:!!t?.id,chatType:t?.type,hasLoadPermissions:typeof Ne=="function"}),t&&(t.type==="group"||t.type==="channel")&&(console.log("[ChatView] Calling loadPermissions for chat:",t.id),Ne(t.id))},[t?.id,Ne]),w.useEffect(()=>{(async()=>{if(console.log("[ChatView] checkBlockStatus called:",{hasCurrent:!!t,type:t?.type,hasUser:!!be,members:t?.members?.map(he=>({id:he.id,odUserId:he.userId}))}),!t||t.type!=="dm"||!be){W(!1),se(!1);return}const q=t.members?.find(he=>(he.userId||he.id)!==be.id);if(console.log("[ChatView] otherMember found:",q,"using userId:",q?.userId,"or id:",q?.id),!q){W(!1),se(!1);return}$e(!0);try{const{userService:he}=await ht(async()=>{const{userService:gt}=await Promise.resolve().then(()=>Hn);return{userService:gt}},void 0),Te=q.userId||q.id;console.log("[ChatView] Checking mutual block status for user:",Te);const{iBlockedThem:Re,theyBlockedMe:ut}=await he.getMutualBlockStatus(Te);console.log("[ChatView] Block status result:",{iBlockedThem:Re,theyBlockedMe:ut}),se(Re),W(ut)}catch(he){console.error("Failed to check block status:",he)}finally{$e(!1)}})()},[t?.id,t?.type,t?.members,be?.id]);const{usersYouBlocked:un,blockedByUsers:tn}=ze();w.useEffect(()=>{if(!t||t.type!=="dm"||!be)return;const B=t.members?.find(Re=>(Re.userId||Re.id)!==be.id);if(!B)return;const q=B.userId||B.id;if(!q)return;const he=un.has(q),Te=tn.has(q);console.log("[ChatView] Store block status changed:",{otherUserId:q,iBlockedInStore:he,blockedByInStore:Te,currentDidIBlock:ce,currentIsBlocked:ne}),he!==ce&&se(he),Te!==ne&&W(Te)},[t?.id,t?.type,t?.members,be?.id,un,tn]);const Sn=B=>B.type!=="dm"||!B.members||!be?null:B.members.find(he=>he.userId!==be.id)?.userId||null,nn=()=>{de.current?.scrollIntoView({behavior:"smooth"})},dn=()=>{const B=Oe.current;if(!B)return;const q=B.scrollHeight,he=B.scrollTop,Te=B.clientHeight,Re=q-he-Te<100;U(!Re)};w.useEffect(()=>{const B=t?.id!==ue.current,q=n.length>re.current;ue.current=t?.id||null,re.current=n.length,(B||q)&&(nn(),U(!1))},[n,t?.id]);const mt=async()=>{if(console.log("[ChatView] handleSendMessage called",{messageText:g,selectedFile:N?{name:N.name,size:N.size,type:N.type}:null,currentChat:t?.id}),!g.trim()&&!N||!t){console.log("[ChatView] Early return - no content or no chat");return}S(!0);try{console.log("[ChatView] Calling onSendMessage with file:",N?N.name:"none","replyId:",P?.messageId),await o(g,N||void 0,P?.messageId),console.log("[ChatView] onSendMessage completed"),v(""),ee(null),Q(null),ie.current&&(ie.current.value="")}catch(B){console.error("[ChatView] Failed to send message:",B),JC(B)?(eT(B)?W(!0):se(!0),oe.error(tT(B))):oe.error(Ue(B,"Failed to send message"))}finally{S(!1)}},fn=async(B,q)=>{try{const{messageService:he}=await ht(async()=>{const{messageService:Re}=await Promise.resolve().then(()=>ic);return{messageService:Re}},void 0);await he.toggleReactionByEmoji(B,q);const Te=ze.getState();t&&await Te.loadMessages(t.id)}catch(he){console.error("Failed to toggle reaction:",he),oe.error("Failed to add reaction")}},Wt=(B,q,he)=>{B.preventDefault(),B.stopPropagation(),L({messageId:q,x:B.clientX,y:B.clientY})},at=async B=>{try{await ze.getState().pinMessage(B),L(null),oe.success("Message pinned")}catch(q){console.error("Failed to pin message:",q),oe.error(Ue(q,"Failed to pin message"))}},ae=async B=>{try{await ze.getState().unpinMessage(B),L(null),oe.success("Message unpinned")}catch(q){console.error("Failed to unpin message:",q),oe.error(Ue(q,"Failed to unpin message"))}},pe=B=>{const q=document.querySelector(`[data-message-id="${B}"]`);q&&(q.scrollIntoView({behavior:"smooth",block:"center"}),q.classList.add("message-highlight"),setTimeout(()=>q.classList.remove("message-highlight"),2e3))},it=B=>{const q=n.find(he=>he.messageId===B);q&&(_(B),j(q.content),L(null))},tt=async B=>{if(k.trim())try{await(await ht(()=>Promise.resolve().then(()=>ic),void 0).then(Te=>Te.messageService)).editMessage(B,k),_(null),j("");const he=ze.getState();t&&await he.loadMessages(t.id)}catch(q){console.error("Failed to edit message:",q)}},$=()=>{_(null),j("")},ct=async B=>{if(await Zt({title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))try{await(await ht(()=>Promise.resolve().then(()=>ic),void 0).then(Re=>Re.messageService)).deleteMessage(B),L(null);const Te=ze.getState();t&&await Te.loadMessages(t.id),oe.success("Message deleted")}catch(he){console.error("Failed to delete message:",he),oe.error("Failed to delete message")}};return w.useEffect(()=>{const B=q=>{Ae.current&&!Ae.current.contains(q.target)&&L(null)};return D&&document.addEventListener("click",B),()=>{document.removeEventListener("click",B)}},[D]),t?c.jsxs("div",{className:M.mainContent,style:{position:"relative"},children:[c.jsxs("div",{className:M.chatHeaderBar,children:[c.jsxs("div",{className:M.headerLeft,children:[h&&c.jsx("button",{onClick:h,className:M.mobileMenuButton,style:{display:"none",padding:"8px",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"var(--text)",marginRight:"8px"},"aria-label":"Open menu",children:""}),c.jsx("div",{className:M.headerAvatar,children:c.jsx(uc,{src:t.avatar,name:t.name,fallbackClass:M.avatarFallback})}),c.jsxs("div",{className:M.headerInfo,children:[c.jsxs("h2",{className:M.headerTitle,children:[t.name,c.jsx("span",{className:M.headerChatType,title:t.type,children:t.type==="dm"?" ":t.type==="group"?" ":t.type==="channel"?" ":" "})]}),c.jsx("div",{className:M.headerStatus,children:t.type==="dm"?(()=>{const B=Sn(t);if(B){const q=ve(B),he=Me(B);return c.jsx(rp,{isOnline:q,lastSeen:he,size:"sm",showLabel:!0,position:"standalone"})}return c.jsx(rp,{isOnline:t.isOnline||!1,size:"sm",showLabel:!0,position:"standalone"})})():(()=>{const B=ge(t.id),q=t.members?.length||t.participantsCount||0;return console.log("[ChatView] Member count debug:",{chatId:t.id,chatName:t.name,membersLength:t.members?.length,participantsCount:t.participantsCount,totalMembers:q,fullChat:t}),c.jsx("span",{children:q>0?c.jsxs(c.Fragment,{children:[q," member",q!==1?"s":"",B>0&&c.jsxs(c.Fragment,{children:[c.jsx("span",{style:{margin:"0 4px",color:"var(--text-muted)"},children:""}),c.jsxs("span",{style:{color:"#51cf66",fontWeight:600},children:[B," online"]})]})]}):c.jsx("span",{style:{color:"var(--text-muted)"},children:"Members"})})})()})]})]}),c.jsx("div",{className:M.headerActions,children:t.type!=="dm"&&c.jsxs("button",{onClick:()=>{m&&m()},style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1))",border:"1px solid rgba(99, 102, 241, 0.3)",cursor:"pointer",padding:"8px 14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",borderRadius:"12px",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(99, 102, 241, 0.2)"},onMouseEnter:B=>{B.currentTarget.style.background="linear-gradient(135deg, rgba(99, 102, 241, 0.25), rgba(139, 92, 246, 0.2))",B.currentTarget.style.boxShadow="0 4px 16px rgba(99, 102, 241, 0.35)",B.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:B=>{B.currentTarget.style.background="linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1))",B.currentTarget.style.boxShadow="0 2px 8px rgba(99, 102, 241, 0.2)",B.currentTarget.style.transform="translateY(0)"},title:`View ${t.type==="channel"?"Channel":"Group"} Profile`,children:[t.type==="channel"?c.jsx(iw,{size:16,color:"#818cf8"}):c.jsx(hr,{size:16,color:"#818cf8"}),c.jsxs("span",{style:{fontSize:"13px",fontWeight:600,color:"#818cf8",letterSpacing:"0.3px"},children:[t.type==="channel"?"Channel":"Group"," Profile"]})]})})]}),c.jsx(H4,{chatId:t.id,onJumpToMessage:pe,canUnpin:Tt}),c.jsxs("div",{className:M.messagesContainer,ref:Oe,onScroll:dn,children:[i&&c.jsx("div",{className:M.loading,children:"Loading messages..."}),!i&&(!n||n.length===0)&&c.jsx("div",{className:M.noMessages,children:"No messages yet. Start the conversation!"}),Array.isArray(n)&&n.map(B=>c.jsxs("div",{"data-message-id":B.messageId,className:`${M.messageGroup} ${B.isCurrentUser?M.ownMessage:M.otherMessage} ${B.isCurrentUser?"message-self-enter":"message-other-enter"} ${B.isPinned?"message-pinned":""}`,style:{position:"relative"},children:[!B.isCurrentUser&&c.jsx("div",{className:M.senderAvatar,onClick:()=>f(B.senderId),style:{cursor:"pointer"},children:B.senderAvatarUrl?c.jsx("img",{src:B.senderAvatarUrl,alt:B.senderUsername}):c.jsx("div",{className:M.avatarFallback,children:Ki(B.senderUsername)})}),C===B.messageId?c.jsxs("div",{className:M.messageBubble,style:{display:"flex",flexDirection:"column",gap:"8px"},children:[c.jsx("textarea",{value:k,onChange:q=>j(q.target.value),style:{padding:"12px 14px",borderRadius:"10px",border:"2px solid var(--accent)",backgroundColor:"var(--background)",color:"var(--text)",fontSize:"15px",fontFamily:"inherit",minHeight:"60px",resize:"vertical"}}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{onClick:()=>tt(B.messageId),style:{padding:"6px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Save"}),c.jsx("button",{onClick:$,style:{padding:"6px 12px",backgroundColor:"var(--border)",color:"var(--text)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Cancel"})]})]}):c.jsxs("div",{className:M.messageBubble,onContextMenu:q=>Wt(q,B.messageId,B.isCurrentUser),style:{position:"relative"},children:[!B.isCurrentUser&&c.jsx("div",{className:M.senderName,children:B.senderUsername}),B.replyId&&(()=>{const q=n.find(Te=>Te.messageId===B.replyId),he=q?q.content?.substring(0,40)||(q.fileUrl?" File":"..."):"Message deleted";return c.jsxs("div",{onClick:()=>q&&pe(B.replyId),style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 8px",marginBottom:"4px",fontSize:"11px",color:"var(--text-secondary)",backgroundColor:B.isCurrentUser?"rgba(0,0,0,0.15)":"rgba(255,255,255,0.08)",borderRadius:"4px",cursor:q?"pointer":"default",borderLeft:"2px solid var(--accent)"},children:[c.jsx("span",{style:{opacity:.7},children:""}),c.jsxs("span",{style:{fontWeight:600,color:"var(--accent)",fontSize:"10px"},children:[q?.senderUsername||"Unknown",":"]}),c.jsxs("span",{style:{opacity:.8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[he,q?.content&&q.content.length>40?"...":""]})]})})(),c.jsx("div",{className:M.messageContent,children:B.content}),B.fileUrl&&(()=>{const q=vn(B.fileUrl)||B.fileUrl;return c.jsx("div",{style:{marginTop:"8px"},children:/\.(jpg|jpeg|png|gif|webp|bmp|svg)$/i.test(q)?c.jsxs("a",{href:q,target:"_blank",rel:"noopener noreferrer",children:[c.jsx("img",{src:q,alt:"Attachment",style:{maxWidth:"300px",maxHeight:"200px",borderRadius:"8px",objectFit:"cover",cursor:"pointer"},onError:he=>{he.currentTarget.style.display="none";const Te=he.currentTarget.nextElementSibling;Te&&(Te.style.display="flex")}}),c.jsx("div",{style:{display:"none",alignItems:"center",gap:"6px",padding:"8px 12px",background:"var(--background)",borderRadius:"8px",color:"var(--text-secondary)",fontSize:"13px"},children:" Image (click to view)"})]}):/\.(mp4|webm|ogg|mov)$/i.test(q)?c.jsx("video",{src:q,controls:!0,style:{maxWidth:"300px",maxHeight:"200px",borderRadius:"8px"}}):/\.(mp3|wav|ogg|m4a)$/i.test(q)?c.jsx("audio",{src:q,controls:!0,style:{maxWidth:"300px"}}):c.jsxs("a",{href:q,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 14px",background:"var(--background)",borderRadius:"8px",color:"var(--text)",textDecoration:"none",fontSize:"13px",transition:"background 0.15s ease"},onMouseEnter:he=>he.currentTarget.style.background="var(--border)",onMouseLeave:he=>he.currentTarget.style.background="var(--background)",children:[c.jsx("span",{style:{fontSize:"18px"},children:/\.pdf$/i.test(q)?"":/\.(doc|docx)$/i.test(q)?"":/\.(xls|xlsx)$/i.test(q)?"":/\.(zip|rar|7z)$/i.test(q)?"":""}),c.jsx("span",{children:q.split("/").pop()?.substring(37)||"Download file"})]})})})(),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",flexWrap:"wrap"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[c.jsx("span",{className:M.messageTime,children:Eb(B.sentAt)}),c.jsx("span",{style:{fontSize:"11px",color:B.isSeen?"#51cf66":"rgba(255,255,255,0.5)",fontWeight:500},title:B.isSeen?"Seen":"Sent",children:B.isSeen?"":""})]}),B.messageReactions&&B.messageReactions.length>0&&(()=>{const q=B.messageReactions.reduce((Te,Re)=>{const ut=Re.reactionType||Re.type||"Like";return Te[ut]||(Te[ut]={count:0,users:[]}),Te[ut].count++,Te[ut].users.push(Re.userName||Re.userId),Te},{}),he={Like:"",Love:"",Laugh:"",Sad:"",Angry:""};return c.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"2px",padding:"2px 6px",backgroundColor:"rgba(0,0,0,0.15)",borderRadius:"12px",fontSize:"12px"},children:Object.entries(q).map(([Te,Re])=>c.jsxs("span",{onClick:()=>fn(B.messageId,he[Te]||""),title:Re.users.join(", "),style:{cursor:"pointer"},children:[he[Te],Re.count>1&&c.jsx("span",{style:{fontSize:"10px",marginLeft:"1px"},children:Re.count})]},Te))})})(),c.jsx("button",{onClick:q=>{q.stopPropagation(),L({messageId:B.messageId,x:q.clientX,y:q.clientY})},title:"Actions",style:{padding:"2px 6px",backgroundColor:"transparent",border:"1px solid var(--border)",borderRadius:"10px",cursor:"pointer",fontSize:"12px",opacity:.6,transition:"opacity 0.2s"},onMouseEnter:q=>q.currentTarget.style.opacity="1",onMouseLeave:q=>q.currentTarget.style.opacity="0.6",children:""})]})]}),D?.messageId===B.messageId&&c.jsxs("div",{ref:Ae,style:{position:"fixed",top:Math.min(Math.max(D.y-20,10),window.innerHeight-180),left:Math.min(Math.max(D.x-70,10),window.innerWidth-150),backgroundColor:"var(--surface)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.15)",zIndex:1e3,width:"140px",padding:"4px"},children:[c.jsx("div",{style:{display:"flex",justifyContent:"space-around",padding:"4px 2px",borderBottom:"1px solid var(--border)",marginBottom:"2px"},children:["","","","",""].map(q=>c.jsx("button",{onClick:()=>{fn(B.messageId,q),L(null)},style:{padding:"2px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",lineHeight:1},onMouseEnter:he=>{he.currentTarget.style.backgroundColor="rgba(99, 102, 241, 0.2)"},onMouseLeave:he=>{he.currentTarget.style.backgroundColor="transparent"},children:q},q))}),c.jsxs("button",{onClick:()=>{Q(B),L(null)},style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:q=>q.currentTarget.style.background="var(--background)",onMouseLeave:q=>q.currentTarget.style.background="transparent",children:[c.jsx("span",{style:{fontSize:"14px"},children:""}),"Reply"]}),Tt&&c.jsxs("button",{onClick:()=>B.isPinned?ae(B.messageId):at(B.messageId),style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:q=>q.currentTarget.style.background="var(--background)",onMouseLeave:q=>q.currentTarget.style.background="transparent",children:[c.jsx("span",{style:{fontSize:"14px"},children:""}),B.isPinned?"Unpin":"Pin"]}),(B.isCurrentUser||Xt)&&c.jsxs("button",{onClick:()=>it(B.messageId),style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:q=>q.currentTarget.style.background="var(--background)",onMouseLeave:q=>q.currentTarget.style.background="transparent",children:[c.jsx("span",{style:{fontSize:"14px"},children:""}),"Edit"]}),(B.isCurrentUser||Xt)&&c.jsxs("button",{onClick:()=>ct(B.messageId),style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"#ef4444",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:q=>q.currentTarget.style.background="rgba(239, 68, 68, 0.1)",onMouseLeave:q=>q.currentTarget.style.background="transparent",children:[c.jsx("span",{style:{fontSize:"14px"},children:""}),"Delete"]})]})]},B.messageId)),c.jsx("div",{ref:de})]}),E&&c.jsx("button",{onClick:nn,title:"Scroll to bottom",style:{position:"absolute",bottom:"90px",right:"24px",width:"44px",height:"44px",borderRadius:"50%",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",color:"#fff",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.4)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:10},onMouseEnter:B=>{B.currentTarget.style.transform="translateY(-3px) scale(1.05)",B.currentTarget.style.boxShadow="0 8px 25px rgba(99, 102, 241, 0.5)"},onMouseLeave:B=>{B.currentTarget.style.transform="translateY(0) scale(1)",B.currentTarget.style.boxShadow="0 4px 15px rgba(99, 102, 241, 0.4)"},children:c.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"6 9 12 15 18 9"})})}),t.type==="dm"&&Ee?c.jsx("div",{style:{padding:"16px 20px",textAlign:"center",color:"#94a3b8",backgroundColor:"rgba(30, 41, 59, 0.5)",borderTop:"1px solid rgba(99, 102, 241, 0.2)",fontSize:"14px"},children:"Loading..."}):t.type==="dm"&&ne?c.jsxs("div",{style:{padding:"16px 20px",textAlign:"center",color:"#f87171",backgroundColor:"rgba(239, 68, 68, 0.1)",borderTop:"1px solid rgba(239, 68, 68, 0.3)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[c.jsx("span",{style:{fontSize:"18px"},children:""}),"This user has blocked you. You cannot send them messages."]}):t.type==="dm"&&ce?c.jsxs("div",{style:{padding:"16px 20px",textAlign:"center",color:"#f87171",backgroundColor:"rgba(239, 68, 68, 0.1)",borderTop:"1px solid rgba(239, 68, 68, 0.3)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[c.jsx("span",{style:{fontSize:"18px"},children:""}),"You have blocked this user. Unblock them to send messages."]}):t.type!=="dm"&&Bt?c.jsx("div",{style:{padding:"16px 20px",textAlign:"center",color:"#94a3b8",backgroundColor:"rgba(30, 41, 59, 0.5)",borderTop:"1px solid rgba(99, 102, 241, 0.2)",fontSize:"14px"},children:"Loading..."}):!en&&t.type!=="dm"?c.jsxs("div",{style:{padding:"16px 20px",textAlign:"center",color:"#94a3b8",backgroundColor:"rgba(30, 41, 59, 0.8)",borderTop:"1px solid rgba(99, 102, 241, 0.2)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[c.jsx("span",{style:{fontSize:"18px"},children:""}),"You don't have permission to send messages in this chat"]}):c.jsxs("div",{className:M.messageInput,children:[P&&c.jsx("div",{style:{position:"absolute",bottom:"100%",left:0,right:0,padding:"10px 14px",backgroundColor:"var(--surface)",borderTop:"3px solid var(--accent)",borderRadius:"8px 8px 0 0",boxShadow:"0 -2px 10px rgba(0,0,0,0.1)"},children:c.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"12px"},children:[c.jsxs("div",{style:{flex:1,minWidth:0},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[c.jsx("span",{style:{fontSize:"14px"},children:""}),c.jsxs("span",{style:{color:"var(--accent)",fontWeight:600,fontSize:"13px"},children:["Replying to ",P.senderUsername]})]}),c.jsxs("div",{style:{padding:"8px 10px",backgroundColor:"var(--background)",borderRadius:"6px",borderLeft:"3px solid var(--accent)"},children:[P.fileUrl&&c.jsx("div",{style:{marginBottom:"4px",fontSize:"12px",color:"var(--text-secondary)"},children:" Attachment"}),c.jsx("div",{style:{color:"var(--text)",fontSize:"13px",wordBreak:"break-word"},children:P.content?c.jsxs(c.Fragment,{children:[P.content.substring(0,100),P.content.length>100?"...":""]}):c.jsx("span",{style:{color:"var(--text-secondary)",fontStyle:"italic"},children:P.fileUrl?"File attachment":"No content"})})]})]}),c.jsx("button",{onClick:()=>Q(null),style:{padding:"6px",backgroundColor:"var(--background)",border:"none",borderRadius:"50%",cursor:"pointer",color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s"},onMouseEnter:B=>B.currentTarget.style.backgroundColor="var(--border)",onMouseLeave:B=>B.currentTarget.style.backgroundColor="var(--background)",title:"Cancel reply",children:""})]})}),c.jsx("input",{type:"text",placeholder:P?"Type your reply...":"Type a message...",value:g,onChange:B=>v(B.target.value),onKeyPress:B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),mt())},className:M.inputField,disabled:x}),c.jsx("input",{ref:ie,type:"file",accept:"image/*,video/*,audio/*,application/pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar",style:{display:"none"},onChange:B=>{const q=B.target.files?.[0];console.log("[ChatView] File selected:",q?{name:q.name,size:q.size,type:q.type}:null),q&&ee(q)}}),c.jsx("button",{type:"button",className:M.attachButton,title:"Attach file",onClick:()=>{console.log("[ChatView] Attach button clicked, fileInputRef:",ie.current),ie.current?.click()},children:""}),N&&c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 12px",background:"var(--background)",borderRadius:"8px",border:"1px solid var(--border)",maxWidth:"200px"},children:[N.type.startsWith("image/")?c.jsx("img",{src:URL.createObjectURL(N),alt:"Preview",style:{width:"36px",height:"36px",borderRadius:"4px",objectFit:"cover"}}):c.jsx("span",{style:{fontSize:"24px"},children:N.type.includes("pdf")?"":N.type.includes("video")?"":""}),c.jsxs("div",{style:{flex:1,minWidth:0},children:[c.jsx("div",{style:{fontSize:"12px",fontWeight:500,color:"var(--text)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:N.name}),c.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)"},children:[(N.size/1024).toFixed(1)," KB"]})]}),c.jsx("button",{onClick:()=>{ee(null),ie.current&&(ie.current.value="")},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"var(--text-secondary)",padding:"2px",lineHeight:1},children:""})]}),c.jsx("button",{type:"button",onClick:mt,disabled:!g.trim()&&!N||x,className:M.sendButton,children:x?"...":""})]})]}):c.jsx("div",{className:M.mainContent,children:c.jsxs("div",{className:M.emptyScreen,children:[c.jsx("div",{className:M.emptyIcon,children:""}),c.jsx("h2",{children:"Select a chat to start messaging"}),c.jsx("p",{children:"Choose a conversation from the list or start a new one"}),c.jsxs("div",{className:M.emptyActions,children:[c.jsx("button",{className:M.actionButton,onClick:l,children:"Create Group"}),c.jsx("button",{className:M.actionButton,onClick:u,children:"Create Channel"})]})]})})},G4="_backdrop_r48nt_17",$4="_menu_r48nt_25",Y4="_dark_r48nt_39",X4="_header_r48nt_45",W4="_title_r48nt_67",K4="_content_r48nt_114",Q4="_section_r48nt_118",Z4="_sectionHeader_r48nt_122",J4="_sectionItems_r48nt_139",eU="_menuItem_r48nt_145",tU="_itemIcon_r48nt_175",nU="_divider_r48nt_194",aU="_logoutBtn_r48nt_204",Vn={backdrop:G4,menu:$4,dark:Y4,header:X4,title:W4,content:K4,section:Q4,sectionHeader:Z4,sectionItems:J4,menuItem:eU,itemIcon:tU,divider:nU,logoutBtn:aU},iU=({isOpen:t,onClose:n,onCreateGroup:i,onCreateChannel:o,onCreateCustomReaction:l,onEditProfile:u,onShowNotifications:f,onShowAdminPanel:h,onShowBlockedUsers:m,isDarkMode:g,onToggleDarkMode:v,onLogout:x})=>{if(!t)return null;const S=[{title:"Create",items:[{icon:hr,label:"New Group",onClick:i,color:"#3b82f6"},{icon:sw,label:"New Channel",onClick:o,color:"#8b5cf6"},{icon:ow,label:"Custom Reaction",onClick:l,color:"#f59e0b"}]},{title:"Account",items:[{icon:rw,label:"Edit Profile",onClick:u,color:"#10b981"},{icon:lw,label:"Notifications",onClick:f,color:"#ef4444"},{icon:mr,label:"Blocked Users",onClick:m,color:"#dc2626"},{icon:Js,label:"Admin Panel",onClick:h,color:"#6366f1"}]},{title:"Preferences",items:[{icon:g?cw:uw,label:g?"Light Mode":"Dark Mode",onClick:v,color:g?"#f59e0b":"#6366f1"}]}];return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:Vn.backdrop,onClick:n}),c.jsxs("div",{className:`${Vn.menu} ${g?Vn.dark:""}`,children:[c.jsxs("div",{className:Vn.header,children:[c.jsx("h3",{className:Vn.title,children:"Settings"}),c.jsx("button",{onClick:n,style:{background:"none",border:"none",color:g?"#94a3b8":"#64748b",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(ib,{size:22,strokeWidth:2.5})})]}),c.jsxs("div",{className:Vn.content,children:[S.map(C=>c.jsxs("div",{className:Vn.section,children:[c.jsx("div",{className:Vn.sectionHeader,children:c.jsx("span",{children:C.title})}),c.jsx("div",{className:Vn.sectionItems,children:C.items.map(_=>c.jsxs("button",{className:Vn.menuItem,onClick:_.onClick,children:[c.jsx("div",{className:Vn.itemIcon,style:{background:_.color},children:c.jsx(_.icon,{size:18,color:"white"})}),c.jsx("span",{children:_.label})]},_.label))})]},C.title)),c.jsx("div",{className:Vn.divider}),c.jsxs("button",{className:Vn.logoutBtn,onClick:x,children:[c.jsx(nb,{size:18}),c.jsx("span",{children:"Sign Out"})]})]})]})]})},sU=({currentChat:t,onReloadChat:n,onViewUserProfile:i,onConversationDeleted:o})=>{const[l,u]=w.useState(!1),[f,h]=w.useState(!1),[m,g]=w.useState(null),[v,x]=w.useState(!1),[S,C]=w.useState(!1),[_,k]=w.useState(null),[j,D]=w.useState(!1),[L,E]=w.useState(!1),[U,P]=w.useState(!1),[Q,ne]=w.useState(!1),{user:W}=xt(),{canAddUsers:ce,canManageChatInfo:se,canManageBans:Ee,canManageUsers:$e}=Zp(t?.id),Ae=_?.members?.find(Z=>Z.userId===W?.id)?.role==="admin";w.useEffect(()=>{(async()=>{if(t?.id){if(t.id.startsWith("temp_dm_")){const ue=t.id.replace("temp_dm_","");console.log("[RightPanel] Temp DM chat, loading user profile for:",ue),D(!0);try{const{userService:re}=await ht(async()=>{const{userService:Et}=await Promise.resolve().then(()=>Hn);return{userService:Et}},void 0),Yt=await re.getUserProfile(ue);k({id:t.id,name:Yt.username,type:"dm",avatar:Yt.avatar,members:[{userId:Yt.id,user:Yt,role:"member"}],participantsCount:2})}catch(re){console.error("[RightPanel] Failed to load user profile:",re),k(null)}finally{D(!1)}return}D(!0);try{const ue=await Fe.getChatProfile(t.id);console.log("[RightPanel] Chat profile loaded:",ue),k(ue)}catch(ue){console.error("[RightPanel] Failed to load chat profile:",ue),k(null)}finally{D(!1)}}})()},[t?.id]);const{usersYouBlocked:Oe,addBlockedUser:N,removeBlockedUser:ee}=ze();w.useEffect(()=>{(async()=>{if(!t||t.type!=="dm"||!_?.members){E(!1);return}const ue=_.members.find(re=>re.userId!==W?.id);if(!ue){E(!1);return}if(Oe.has(ue.userId)){E(!0);return}try{const re=await ta.getBlockStatus(ue.userId);E(re),re&&N(ue.userId)}catch(re){console.error("[RightPanel] Failed to check block status:",re),E(!1)}})()},[t?.id,t?.type,_?.members,W?.id]),w.useEffect(()=>{if(!t||t.type!=="dm"||!_?.members)return;const Z=_.members.find(re=>re.userId!==W?.id);if(!Z)return;const ue=Oe.has(Z.userId);ue!==L&&E(ue)},[Oe,t?.id,_?.members,W?.id]);const ie=async()=>{if(!ge)return;const Z=L?"unblock":"block";if(await Zt({title:L?"Unblock User":"Block User",message:L?`Are you sure you want to unblock ${ge.username}? They will be able to message you again.`:`Are you sure you want to block ${ge.username}? They won't be able to send you messages.`,confirmText:L?"Unblock":"Block",cancelText:"Cancel",variant:L?"warning":"danger"})){P(!0);try{L?(await ta.unblockUser(ge.id),ee(ge.id),oe.success(`${ge.username} has been unblocked`)):(await ta.blockUser(ge.id),N(ge.id),oe.success(`${ge.username} has been blocked`)),E(!L)}catch(re){console.error(`Failed to ${Z} user:`,re),oe.error(Ue(re,`Failed to ${Z} user`))}finally{P(!1)}}},ve=async()=>{if(!(!t||!await Zt({title:"Delete Conversation",message:"Are you sure you want to delete this conversation? All messages will be permanently deleted.",confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))){ne(!0);try{await Fe.deleteConversation(t.id),oe.success("Conversation deleted"),o?.()}catch(ue){console.error("Failed to delete conversation:",ue),oe.error(Ue(ue,"Failed to delete conversation"))}finally{ne(!1)}}},Me=async()=>{if(!(!t||!ge||!await Zt({title:"Delete & Block",message:`Are you sure you want to delete this conversation and block ${ge.username}? All messages will be deleted and they won't be able to message you.`,confirmText:"Delete & Block",cancelText:"Cancel",variant:"danger"}))){ne(!0);try{await Fe.deleteConversation(t.id),await ta.blockUser(ge.id),oe.success(`Conversation deleted and ${ge.username} blocked`),o?.()}catch(ue){console.error("Failed to delete and block:",ue),oe.error(Ue(ue,"Failed to delete and block"))}finally{ne(!1)}}};if(!t)return c.jsx("div",{className:M.rightPanel});const ge=t.type==="dm"&&_?.members?_.members.find(Z=>Z.userId!==W?.id)?.user:null,Ne=async Z=>{if(await Zt({title:"Ban Member",message:`Are you sure you want to ban "${Z.user.username}" from this chat? They won't be able to rejoin.`,confirmText:"Ban",cancelText:"Cancel",variant:"danger"}))try{await Fe.banUser(t.id,Z.userId),oe.success(`${Z.user.username} has been banned and removed from chat.`),await n()}catch(re){console.error("Failed to ban user:",re),oe.error(rr(re))}},be=async()=>{const Z=t.privacy==="public"?"private":"public";if(await Zt({title:"Change Privacy",message:`Change this chat to ${Z}? ${Z==="private"?"Only invited members will be able to join.":"Anyone will be able to find and join."}`,confirmText:"Change",cancelText:"Cancel",variant:"info"})){x(!0);try{await Fe.updateChatPrivacy(t.id,Z),oe.success(`Chat privacy changed to ${Z}.`),await n()}catch(re){console.error("Failed to update privacy:",re),oe.error("Failed to update privacy. You may not have permission.")}finally{x(!1)}}};return c.jsxs("div",{className:M.rightPanel,children:[c.jsx("div",{className:M.panelHeader,children:c.jsx("h3",{children:"Chat Info"})}),c.jsx("div",{className:M.infoContent,children:t.type==="dm"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:M.infoSection,children:[c.jsx("div",{className:M.infoLabel,style:{color:"var(--text)",marginBottom:"12px",fontWeight:600},children:"Member"}),j?c.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"Loading profile..."}):ge?c.jsxs("div",{onClick:()=>i(ge.id),style:{padding:"16px",backgroundColor:"var(--background)",border:"2px solid var(--border)",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:Z=>{Z.currentTarget.style.borderColor="var(--accent)",Z.currentTarget.style.transform="translateY(-2px)",Z.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:Z=>{Z.currentTarget.style.borderColor="var(--border)",Z.currentTarget.style.transform="translateY(0)",Z.currentTarget.style.boxShadow="none"},title:"Click to view full profile",children:[c.jsx("div",{className:M.memberAvatar,children:ge.avatar||ge.avatarUrl?c.jsx("img",{src:vn(ge.avatar||ge.avatarUrl),alt:ge.username,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"}}):c.jsx("div",{className:M.avatarFallback,style:{width:"50px",height:"50px",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--accent)",color:"#fff",borderRadius:"50%",fontWeight:600},children:Ki(ge.username)})}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{color:"var(--text)",fontWeight:700,fontSize:"16px",marginBottom:"4px"},children:ge.username}),ge.description&&c.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginBottom:"6px"},children:ge.description}),c.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"6px"},children:ge.isOnline?" Online":" Offline"}),c.jsx("div",{style:{fontSize:"12px",color:"var(--accent)",fontWeight:600},children:" Tap to view profile"})]})]}):c.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"No user information available"})]}),ge&&c.jsxs("div",{className:M.infoSection,style:{marginTop:"16px"},children:[c.jsx("div",{className:M.infoLabel,style:{color:"var(--text)",marginBottom:"12px",fontWeight:600},children:"Actions"}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[c.jsx("button",{onClick:ie,disabled:U||Q,style:{width:"100%",padding:"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:L?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:L?"#10b981":"#ef4444",border:`1px solid ${L?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"8px",cursor:U||Q?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,transition:"all 0.2s ease",opacity:U||Q?.6:1},onMouseEnter:Z=>{!U&&!Q&&(Z.currentTarget.style.backgroundColor=L?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)")},onMouseLeave:Z=>{Z.currentTarget.style.backgroundColor=L?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)"},children:L?c.jsxs(c.Fragment,{children:[c.jsx(ab,{size:16}),U?"Unblocking...":"Unblock User"]}):c.jsxs(c.Fragment,{children:[c.jsx(Ws,{size:16}),U?"Blocking...":"Block User"]})}),c.jsxs("button",{onClick:ve,disabled:Q||U,style:{width:"100%",padding:"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",cursor:Q||U?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,transition:"all 0.2s ease",opacity:Q||U?.6:1},onMouseEnter:Z=>{!Q&&!U&&(Z.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.2)")},onMouseLeave:Z=>{Z.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.1)"},children:[c.jsx(cp,{size:16}),Q?"Deleting...":"Delete Conversation"]}),!L&&c.jsxs("button",{onClick:Me,disabled:Q||U,style:{width:"100%",padding:"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"rgba(220, 38, 38, 0.1)",color:"#dc2626",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"8px",cursor:Q||U?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,transition:"all 0.2s ease",opacity:Q||U?.6:1},onMouseEnter:Z=>{!Q&&!U&&(Z.currentTarget.style.backgroundColor="rgba(220, 38, 38, 0.2)")},onMouseLeave:Z=>{Z.currentTarget.style.backgroundColor="rgba(220, 38, 38, 0.1)"},children:[c.jsx(mr,{size:16}),"Delete & Block"]})]})]})]}):c.jsxs(c.Fragment,{children:[(_?.name||_?.description)&&c.jsxs("div",{className:M.infoSection,children:[c.jsxs("div",{className:M.infoLabel,style:{color:"var(--text)",marginBottom:"8px",fontWeight:600},children:[t.type==="group"?"Group":"Channel"," Info"]}),c.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px",border:"1px solid var(--border)"},children:[c.jsx("div",{style:{color:"var(--text)",fontWeight:700,fontSize:"16px",marginBottom:"6px"},children:_.name||t.name}),_.description&&c.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",lineHeight:"1.5"},children:_.description}),c.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px",fontSize:"12px"},children:[c.jsxs("div",{style:{color:"var(--text-secondary)"},children:[" ",_.participantsCount||0," members"]}),c.jsxs("div",{style:{color:"var(--text-secondary)"},children:[" ",_.participantsOnline||0," online"]})]})]})]}),(Ae||se)&&c.jsxs("div",{className:M.infoSection,children:[c.jsx("div",{className:M.infoLabel,style:{color:"var(--text)"},children:"Privacy"}),c.jsx("button",{onClick:be,disabled:v,style:{padding:"8px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,width:"100%",marginTop:"4px"},children:v?"Changing...":`Current: ${t.privacy||"private"} (Click to toggle)`})]}),(Ae||ce)&&c.jsx("div",{className:M.infoSection,children:c.jsx("button",{onClick:()=>u(!0),style:{padding:"10px 14px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:600,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:" Add Member"})}),c.jsxs("div",{className:M.infoSection,children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[c.jsxs("div",{className:M.infoLabel,style:{color:"var(--text)"},children:["Members (",_?.participants?.length||t.members?.length||0,")"]}),c.jsx("button",{onClick:()=>C(!S),style:{padding:"6px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600},children:S?" Hide":" Show"})]}),S&&c.jsx("div",{className:M.memberList,children:j?c.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"Loading members..."}):_?.members&&_.members.length>0?_.members.map(Z=>{const ue={id:Z.id||Z.userId,userId:Z.userId||Z.id,user:{id:Z.user?.id||Z.userId||Z.id,username:Z.user?.username||Z.username,avatar:vn(Z.user?.avatar||Z.user?.avatarUrl||Z.avatarUrl),bio:Z.user?.bio||Z.user?.description||Z.description},role:Z.role||"member"};return c.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px",borderRadius:"10px",backgroundColor:"var(--background)",border:"1px solid var(--border)",marginBottom:"8px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:re=>{re.currentTarget.style.backgroundColor="var(--surface)",re.currentTarget.style.borderColor="var(--accent)"},onMouseLeave:re=>{re.currentTarget.style.backgroundColor="var(--background)",re.currentTarget.style.borderColor="var(--border)"},children:[c.jsx("div",{className:M.memberAvatar,style:{flexShrink:0,cursor:"pointer"},onClick:re=>{re.stopPropagation(),i(ue.userId)},title:"View profile",children:ue.user.avatar?c.jsx("img",{src:ue.user.avatar,alt:ue.user.username}):c.jsx("div",{className:M.avatarFallback,children:Ki(ue.user.username)})}),c.jsxs("div",{className:M.memberInfo,style:{flex:1,minWidth:0,cursor:"pointer"},onClick:re=>{re.stopPropagation(),i(ue.userId)},title:"View profile",children:[c.jsx("div",{className:M.memberName,style:{color:"var(--text)",fontWeight:600},children:ue.user.username}),Z.user?.isOnline!==void 0&&c.jsx("div",{className:M.memberRole,style:{color:"var(--text-secondary)",fontSize:"12px"},children:Z.user.isOnline?" Online":" Offline"})]}),c.jsxs("div",{style:{display:"flex",gap:"4px",flexShrink:0},children:[(Ae||$e)&&ue.role!=="admin"&&c.jsx("button",{onClick:re=>{re.stopPropagation(),g(ue),h(!0)},title:"Manage Permissions",style:{padding:"6px 10px",backgroundColor:"#6366f1",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:re=>re.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:re=>re.currentTarget.style.backgroundColor="#6366f1",children:""}),(Ae||Ee)&&ue.role!=="admin"&&c.jsx("button",{onClick:re=>{re.stopPropagation(),Ne(ue)},title:"Ban User",style:{padding:"6px 10px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:re=>re.currentTarget.style.backgroundColor="#c82333",onMouseLeave:re=>re.currentTarget.style.backgroundColor="#dc3545",children:""})]})]},ue.id)}):c.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"No members found"})})]}),t.description&&c.jsxs("div",{className:M.infoSection,children:[c.jsx("div",{className:M.infoLabel,style:{color:"var(--text)"},children:"Description"}),c.jsx("p",{style:{color:"var(--text-secondary)"},children:t.description})]})]})}),l&&c.jsx(F4,{isOpen:l,onClose:()=>u(!1),chatId:t.id,chatType:t.type,onMemberAdded:n}),f&&m&&c.jsx(TS,{isOpen:f,onClose:()=>{h(!1),g(null)},chatId:t.id,member:m,onPermissionsChanged:n})]})},oU=({isOpen:t,onClose:n,onCreate:i,isDarkMode:o=!1})=>{const[l,u]=w.useState(""),[f,h]=w.useState(null),[m,g]=w.useState(null),[v,x]=w.useState(!1),S=_=>{const k=_.target.files?.[0];if(k){h(k);const j=new FileReader;j.onloadend=()=>g(j.result),j.readAsDataURL(k)}},C=async()=>{if(l.trim()){x(!0);try{await i(l,f),u(""),h(null),g(null),n()}finally{x(!1)}}};return t?c.jsx("div",{className:`${M.modalOverlay} ${o?M.darkMode:""}`,onClick:n,children:c.jsxs("div",{className:M.modal,onClick:_=>_.stopPropagation(),children:[c.jsxs("div",{className:M.modalHeader,children:[c.jsx("h2",{children:"Create Custom Reaction"}),c.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),c.jsxs("div",{className:M.modalBody,children:[c.jsxs("div",{className:M.formGroup,children:[c.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Reaction Name *"}),c.jsx("input",{type:"text",placeholder:"e.g., happy, excited, custom-emoji",value:l,onChange:_=>u(_.target.value),className:M.formInput}),c.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:"This will be the emoji name (e.g., :happy:)"})]}),c.jsxs("div",{className:M.formGroup,children:[c.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Reaction Image (Optional)"}),c.jsx("input",{type:"file",accept:"image/*",onChange:S,className:M.formInput,style:{padding:"8px"}}),m&&c.jsx("div",{style:{marginTop:"12px",textAlign:"center"},children:c.jsx("img",{src:m,alt:"Preview",style:{width:"64px",height:"64px",objectFit:"contain",borderRadius:"8px",border:"2px solid var(--border)"}})})]})]}),c.jsxs("div",{className:M.modalFooter,children:[c.jsx("button",{onClick:n,className:M.secondaryButton,children:"Cancel"}),c.jsx("button",{onClick:C,disabled:!l.trim()||v,className:M.primaryButton,children:v?"Creating...":"Create"})]})]})}):null},Zx=({isOpen:t,onClose:n,onCreate:i,isDarkMode:o=!1,isChannel:l=!1})=>{const[u,f]=w.useState(""),[h,m]=w.useState(""),[g,v]=w.useState("private"),[x,S]=w.useState(null),[C,_]=w.useState(!1),k=D=>{S(D)},j=async()=>{if(u.trim()){_(!0);try{await i(u,h,g,x),f(""),m(""),v("private"),S(null),n()}finally{_(!1)}}};return t?c.jsx("div",{className:`${M.modalOverlay} ${o?M.darkMode:""}`,onClick:n,children:c.jsxs("div",{className:M.modal,onClick:D=>D.stopPropagation(),children:[c.jsxs("div",{className:M.modalHeader,children:[c.jsx("h2",{children:l?"Create Channel":"Create Group"}),c.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),c.jsxs("div",{className:M.modalBody,children:[c.jsxs("div",{className:M.formGroup,children:[c.jsxs("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:[l?"Channel":"Group"," Name *"]}),c.jsx("input",{type:"text",placeholder:`Enter ${l?"channel":"group"} name (1-40 characters)`,value:u,onChange:D=>f(D.target.value),maxLength:40,className:M.formInput}),c.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[u.length,"/40 characters"]})]}),c.jsx("div",{className:M.formGroup,children:c.jsx(Qp,{onFileAccepted:k,label:`${l?"Channel":"Group"} Avatar (Optional)`,helperText:"Drag and drop an image, or click to browse"})}),c.jsxs("div",{className:M.formGroup,children:[c.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Description (Optional)"}),c.jsx("textarea",{placeholder:`Enter ${l?"channel":"group"} description (max 150 characters)`,value:h,onChange:D=>m(D.target.value),maxLength:150,className:M.formInput,rows:3}),c.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[h.length,"/150 characters"]})]}),c.jsxs("div",{className:M.formGroup,children:[c.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Privacy"}),c.jsxs("select",{value:g,onChange:D=>v(D.target.value),className:M.formInput,children:[c.jsx("option",{value:"private",children:"Private - Only invited members can join"}),c.jsx("option",{value:"public",children:"Public - Anyone can search and join"})]})]})]}),c.jsxs("div",{className:M.modalFooter,children:[c.jsx("button",{onClick:n,className:M.secondaryButton,children:"Cancel"}),c.jsx("button",{onClick:j,disabled:!u.trim()||C,className:M.primaryButton,children:C?"Creating...":"Create"})]})]})}):null},rU=({isOpen:t,onClose:n,chat:i,onUpdate:o,isDarkMode:l=!1,isChannel:u=!1})=>{const[f,h]=w.useState(""),[m,g]=w.useState(""),[v,x]=w.useState("private"),[S,C]=w.useState(null),[_,k]=w.useState(!1);w.useEffect(()=>{t&&i?(h(i.name||""),g(i.description||""),x(i.privacy||"private"),C(null)):t||(h(""),g(""),x("private"),C(null))},[t,i]);const j=L=>{C(L)},D=async()=>{if(!(!f.trim()||!i)){k(!0);try{await o(i.id,f,m,v,S),h(""),g(""),x("private"),C(null),n()}finally{k(!1)}}};return!t||!i?null:c.jsx("div",{className:`${M.modalOverlay} ${l?M.darkMode:""}`,onClick:n,children:c.jsxs("div",{className:M.modal,onClick:L=>L.stopPropagation(),children:[c.jsxs("div",{className:M.modalHeader,children:[c.jsx("h2",{children:u?"Edit Channel":"Edit Group"}),c.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),c.jsxs("div",{className:M.modalBody,children:[c.jsxs("div",{className:M.formGroup,children:[c.jsxs("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:[u?"Channel":"Group"," Name *"]}),c.jsx("input",{type:"text",placeholder:`Enter ${u?"channel":"group"} name (1-40 characters)`,value:f,onChange:L=>h(L.target.value),maxLength:40,className:M.formInput}),c.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[f.length,"/40 characters"]})]}),c.jsx("div",{className:M.formGroup,children:c.jsx(Qp,{onFileAccepted:j,currentPreview:i.avatar,label:`${u?"Channel":"Group"} Avatar (Optional)`,helperText:"Drag and drop a new image to update, or click to browse"})}),c.jsxs("div",{className:M.formGroup,children:[c.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Description (Optional)"}),c.jsx("textarea",{placeholder:`Enter ${u?"channel":"group"} description (max 150 characters)`,value:m,onChange:L=>g(L.target.value),maxLength:150,className:M.formInput,rows:3}),c.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[m.length,"/150 characters"]})]}),c.jsxs("div",{className:M.formGroup,children:[c.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Privacy"}),c.jsxs("select",{value:v,onChange:L=>x(L.target.value),className:M.formInput,children:[c.jsx("option",{value:"private",children:"Private - Only invited members can join"}),c.jsx("option",{value:"public",children:"Public - Anyone can search and join"})]})]})]}),c.jsxs("div",{className:M.modalFooter,children:[c.jsx("button",{onClick:n,className:M.secondaryButton,children:"Cancel"}),c.jsx("button",{onClick:D,disabled:!f.trim()||_,className:M.primaryButton,children:_?"Updating...":"Update"})]})]})})},lU=({isOpen:t,onClose:n,user:i,onUpdate:o,isDarkMode:l=!1})=>{const[u,f]=w.useState(""),[h,m]=w.useState(""),[g,v]=w.useState(""),[x,S]=w.useState("everyone"),[C,_]=w.useState(!1),[k,j]=w.useState(null),[D,L]=w.useState(null);w.useEffect(()=>{t&&i?(f(i.username||""),m(i.email||""),v(i.bio||""),S(i.addMePolicy||"everyone"),j(null),L(null)):t||(f(""),m(""),v(""),S("everyone"),j(null),L(null))},[t,i]);const E=P=>{j(P)},U=async()=>{_(!0);try{await o(u,h,g,x,k),n()}finally{_(!1)}};return!t||!i?null:c.jsx("div",{className:`${M.modalOverlay} ${l?M.darkMode:""}`,onClick:n,children:c.jsxs("div",{className:M.modal,onClick:P=>P.stopPropagation(),children:[c.jsxs("div",{className:M.modalHeader,children:[c.jsx("h2",{style:{color:"var(--text)"},children:"Edit Profile"}),c.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),c.jsxs("div",{className:M.modalBody,children:[c.jsx("div",{className:M.formGroup,children:c.jsx(Qp,{onFileAccepted:E,currentPreview:i?.avatar||D,label:"Profile Avatar",helperText:"Drag and drop your profile picture, or click to browse"})}),c.jsxs("div",{className:M.formGroup,children:[c.jsx("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:"Username"}),c.jsx("input",{type:"text",value:u,onChange:P=>f(P.target.value),className:M.formInput,placeholder:"Enter your username"})]}),c.jsxs("div",{className:M.formGroup,children:[c.jsxs("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:["Email",c.jsx("span",{style:{fontSize:"12px",fontWeight:400,color:"var(--text-secondary)",marginLeft:"8px"},children:"(Read-only)"})]}),c.jsx("input",{type:"email",value:h,readOnly:!0,disabled:!0,className:M.formInput,placeholder:"Email cannot be changed",style:{backgroundColor:"var(--background)",cursor:"not-allowed",opacity:.7}})]}),c.jsxs("div",{className:M.formGroup,children:[c.jsx("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:"Bio/Description"}),c.jsx("textarea",{value:g,onChange:P=>v(P.target.value),className:M.formInput,rows:3,placeholder:"Tell us about yourself..."})]}),c.jsxs("div",{className:M.formGroup,children:[c.jsx("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:"Who can add you?"}),c.jsxs("select",{value:x,onChange:P=>S(P.target.value),className:M.formInput,children:[c.jsx("option",{value:"everyone",children:"Everyone"}),c.jsx("option",{value:"chatted",children:"Contacts Only"}),c.jsx("option",{value:"nobody",children:"Nobody"})]})]})]}),c.jsxs("div",{className:M.modalFooter,children:[c.jsx("button",{onClick:n,className:M.secondaryButton,children:"Cancel"}),c.jsx("button",{onClick:U,disabled:C,className:M.primaryButton,children:C?"Updating...":"Update Profile"})]})]},`profile-modal-${i.id}`)})},cU=({isOpen:t,onClose:n,isDarkMode:i=!1,onNavigateToChat:o})=>{const[l,u]=w.useState([]),[f,h]=w.useState(!1);w.useEffect(()=>{t&&m()},[t]);const m=async()=>{h(!0);try{const S=await(await ht(()=>Promise.resolve().then(()=>_f),void 0).then(_=>_.notificationService)).getNotifications();console.log("[Notifications] Loaded notifications:",S),Array.isArray(S)&&S.length>0&&console.log("[Notifications] First notification structure:",JSON.stringify(S[0],null,2));const C=Array.isArray(S)?S.map(_=>({id:_.id,chatId:_.chatId,title:`Message from ${_.senderName}`,message:_.content,type:"message",chatName:_.chatName,chatAvatar:_.chatAvatar,senderName:_.senderName,fileUrl:_.fileUrl,isRead:_.seen,createdAt:_.sentTime})):[];u(C)}catch(x){console.error("[Notifications] Failed to load notifications:",x),u([])}finally{h(!1)}},g=async(x,S)=>{try{await(await ht(()=>Promise.resolve().then(()=>_f),void 0).then(_=>_.notificationService)).markAsSeen(x),S&&o?(n(),o(S)):await m()}catch(C){console.error("Failed to handle notification click:",C)}},v=async()=>{try{await(await ht(()=>Promise.resolve().then(()=>_f),void 0).then(S=>S.notificationService)).markAllAsSeen(),await m()}catch(x){console.error("Failed to mark all notifications as seen:",x)}};return t?c.jsx("div",{className:`${M.modalOverlay} ${i?M.darkMode:""}`,onClick:n,children:c.jsxs("div",{className:M.modal,onClick:x=>x.stopPropagation(),children:[c.jsxs("div",{className:M.modalHeader,children:[c.jsx("h2",{children:"Notifications"}),c.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),c.jsx("div",{className:M.modalBody,style:{maxHeight:"60vh",overflowY:"auto"},children:f?c.jsx("div",{className:M.loadingState,children:"Loading notifications..."}):l.length===0?c.jsx("div",{className:M.emptyState,children:"No notifications yet"}):c.jsxs(c.Fragment,{children:[l.length>0&&c.jsx("button",{onClick:v,style:{padding:"8px 12px",backgroundColor:"var(--accent)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,marginBottom:"12px",position:"sticky",top:0,zIndex:1},children:"Mark All as Read"}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:l.map(x=>c.jsxs("div",{onClick:()=>g(x.id,x.chatId),style:{padding:"14px",background:x.isRead?"rgba(99, 102, 241, 0.05)":"linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1))",border:x.isRead?"1px solid rgba(99, 102, 241, 0.1)":"1px solid rgba(99, 102, 241, 0.3)",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",gap:"12px",alignItems:"flex-start",boxShadow:x.isRead?"none":"0 2px 8px rgba(99, 102, 241, 0.15)",position:"relative",overflow:"hidden"},onMouseEnter:S=>{S.currentTarget.style.transform="translateX(4px)",S.currentTarget.style.boxShadow="0 4px 12px rgba(99, 102, 241, 0.2)"},onMouseLeave:S=>{S.currentTarget.style.transform="translateX(0)",S.currentTarget.style.boxShadow=x.isRead?"none":"0 2px 8px rgba(99, 102, 241, 0.15)"},children:[x.chatAvatar?c.jsx("img",{src:x.chatAvatar,alt:x.chatName,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",flexShrink:0}}):c.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600,fontSize:"14px",flexShrink:0},children:Ki(x.chatName)}),c.jsxs("div",{style:{flex:1,minWidth:0},children:[c.jsx("div",{style:{fontWeight:600,marginBottom:"4px",color:"var(--text)"},children:x.chatName}),c.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"4px"},children:[c.jsxs("span",{style:{fontWeight:500,color:"var(--text)"},children:[x.senderName,":"]})," ",x.message&&x.message.trim()?x.message:x.fileUrl?c.jsx("span",{style:{fontStyle:"italic"},children:"Sent an attachment"}):c.jsx("span",{style:{fontStyle:"italic",opacity:.7},children:"No message content"})]}),x.fileUrl&&c.jsx("div",{style:{fontSize:"12px",color:"var(--accent)",marginBottom:"4px"},children:" Attachment"}),c.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:new Date(x.createdAt).toLocaleString()})]})]},x.id))})]})})]})}):null},uU=()=>{const{user:t,logout:n}=xt(),{chats:i,currentChat:o,isLoadingChats:l,messages:u,setMessages:f,onlineUsers:h}=ze(),{theme:m,toggleTheme:g}=GT(),v=o3(),[x,S]=w.useState(!1),[C,_]=w.useState(!1),[k,j]=w.useState(!1),[D,L]=w.useState(!1),[E,U]=w.useState(null),[P,Q]=w.useState(!1),[ne,W]=w.useState(!1),[ce,se]=w.useState(!1),[Ee,$e]=w.useState(!1),[de,Ae]=w.useState(!1),[Oe,N]=w.useState(!1),[ee,ie]=w.useState(""),[ve,Me]=w.useState([]),[ge,Ne]=w.useState(!1),[be,Z]=w.useState(!1),[ue,re]=w.useState(null),[Yt,Et]=w.useState(null),[Jt,We]=w.useState(!1),[en,Tt]=w.useState(!1),[Xt,Bt]=w.useState(!1),[un,tn]=w.useState(null),[Sn,nn]=w.useState(!1),dn=w.useRef(null),mt=m==="dark",fn=w.useRef(null),Wt=w.useRef(null);w.useEffect(()=>{(async()=>{const te=ze.getState();i.length===0&&await te.loadChats()})()},[i.length]);const at=o?.id;w.useEffect(()=>{(async()=>{if(!at||at==="search"){console.log("[Dashboard] Clearing messages - no chat selected or search chat"),f([]),fn.current=null;return}if(at.startsWith("temp_dm_")){console.log("[Dashboard] Temporary chat, skipping message load"),f([]),fn.current=at;return}if(fn.current===at){console.log("[Dashboard] Messages already loaded for chat:",at);return}console.log("[Dashboard] ========== LOADING MESSAGES FOR CHAT =========="),console.log("[Dashboard] Chat ID:",at),fn.current=at,S(!0);try{console.log("[Dashboard] Fetching chat data from API...");const te=await Fe.getChat(at);console.log("[Dashboard] API Response - Messages count:",te.messages?.length||0),f(te.messages||[]),v.isConnected&&(v.markMessagesAsSeen(at),ze.getState().resetUnreadCount(at))}catch(te){console.error("[Dashboard] Failed to load messages:",te),f([])}finally{S(!1)}})()},[at,v.isConnected]),w.useEffect(()=>{if(!at||at==="search"||at.startsWith("temp_dm_"))return;if(Wt.current===at){console.log("[Dashboard] Already joined chat room:",at);return}return(async()=>{if(v.isConnected)try{Wt.current&&Wt.current!==at&&(console.log("[Dashboard] Leaving previous chat room:",Wt.current),await v.leaveChat(Wt.current).catch(console.error)),console.log("[Dashboard] Joining SignalR chat room:",at),await v.joinChat(at),Wt.current=at}catch(te){console.error("[Dashboard] Failed to join chat room:",te)}})(),()=>{Wt.current&&v.isConnected&&(console.log("[Dashboard] Cleanup - Leaving SignalR chat room:",Wt.current),v.leaveChat(Wt.current).catch(console.error),Wt.current=null)}},[at,v.isConnected]);const ae=async J=>{if(ze.getState().setCurrentChat(J),!J.id.startsWith("temp_dm_")&&(J.type==="group"||J.type==="channel"||J.type==="dm"))try{const me=await Fe.getChatProfile(J.id);if(console.log("[Dashboard] Loaded full profile for",J.type,":",me.id,"members:",me.members?.length),ze.getState().setCurrentChat(me),me.members&&me.members.length>0){const je=me.members.map(xe=>xe.userId||xe.id||xe.user?.id).filter(xe=>!!xe);if(je.length>0)try{const{signalRService:xe}=await ht(async()=>{const{signalRService:Be}=await Promise.resolve().then(()=>tp);return{signalRService:Be}},void 0),Se=await xe.getPresenceStates(je);console.log("[Dashboard] Fetched presence for chat members:",Se),ze.getState().setInitialPresenceStates(Se)}catch(xe){console.error("[Dashboard] Failed to fetch presence states:",xe)}}}catch(me){console.error("[Dashboard] Failed to load chat profile:",me)}},pe=async()=>{await Zt({title:"Sign Out",message:"Are you sure you want to sign out?",confirmText:"Sign Out",cancelText:"Cancel",variant:"warning"})&&n()},it=async(J,te,me)=>{if(console.log("[Dashboard] handleSendChatMessage called",{content:J,file:te?{name:te.name,size:te.size,type:te.type}:null,currentChatId:o?.id,userId:t?.id,replyId:me}),!o||!o.id||o.id==="search"||!t){console.log("[Dashboard] Early return - missing chat or user");return}try{if(te){console.log("[Dashboard] Sending message with file via REST API");const je=new FormData;if(o.id.startsWith("temp_dm_")){const Se=o.id.replace("temp_dm_","");je.append("receiverId",Se)}else if(je.append("chatId",o.id),o.type==="dm"){const Se=o.members?.find(Be=>Be.userId!==t.id)?.userId;Se&&je.append("receiverId",Se)}je.append("content",J),je.append("file",te),me&&je.append("replyId",me),await(await ht(()=>Promise.resolve().then(()=>ic),void 0).then(Se=>Se.messageService)).sendMessage(je)}else{console.log("[Dashboard] Sending text message via SignalR");let je=null,xe=null;o.id.startsWith("temp_dm_")?xe=o.id.replace("temp_dm_",""):(je=o.id,o.type==="dm"&&(xe=o.members?.find(Se=>Se.userId!==t.id)?.userId||null)),await v.sendMessage(je,J,xe,me||null)}if(console.log("[Dashboard] Message sent successfully"),o.id.startsWith("temp_dm_")){console.log("[Dashboard] Reloading chats after sending to temp chat");const je=ze.getState(),xe=o.id.replace("temp_dm_","");let Se;const Be=o.name;for(let le=0;le<3;le++){if(await new Promise(Ie=>setTimeout(Ie,500)),await je.loadChats(),Se=ze.getState().chats.find(Ie=>Ie.type!=="dm"?!1:Ie.members&&Ie.members.length>0?Ie.members.some(st=>st.userId===xe||st.id===xe||st.user?.id===xe||st.user?.userId===xe):!!(Be&&Ie.name===Be)),Se){console.log(`[Dashboard] Found newly created real DM on attempt ${le+1}:`,Se.id);break}console.log(`[Dashboard] Real DM not found on attempt ${le+1}, retrying...`)}if(Se){fn.current=Se.id,je.setCurrentChat(Se);const le=await Fe.getChat(Se.id);f(le.messages||[])}else console.error("[Dashboard] Failed to find newly created DM after retries"),oe.error("Message sent, but failed to load conversation. Please refresh.")}else{const je=await Fe.getChat(o.id);f(je.messages||[])}}catch(je){console.error("Failed to send message:",je),Mf(je)?oe.error(rr(je)):oe.error(Ue(je,"Failed to send message"))}},tt=async(J,te,me,je)=>{try{const xe=new FormData;xe.append("name",J),te&&xe.append("description",te),xe.append("privacyType",me==="public"?"0":"1"),je&&xe.append("file",je),await Fe.createGroup(xe),oe.success("Group created successfully!"),await ze.getState().loadChats()}catch(xe){throw console.error("Failed to create group:",xe),oe.error(Ue(xe,"Failed to create group")),xe}},$=async(J,te,me,je)=>{try{const xe=new FormData;xe.append("name",J),te&&xe.append("description",te),xe.append("privacyType",me==="public"?"0":"1"),je&&xe.append("file",je),await Fe.createChannel(xe),oe.success("Channel created successfully!"),await ze.getState().loadChats()}catch(xe){throw console.error("Failed to create channel:",xe),oe.error(Ue(xe,"Failed to create channel")),xe}},ct=async(J,te,me,je,xe)=>{try{const Se=new FormData;Se.append("chatId",J),Se.append("name",te),me&&Se.append("description",me),Se.append("privacyType",je==="public"?"0":"1"),xe&&Se.append("file",xe);const Be=E?.type==="channel"?"channel":"group";await Fe.updateChat(J,Be,Se),oe.success("Group/Channel updated successfully!"),await ze.getState().loadChats()}catch(Se){throw console.error("Failed to update group/channel:",Se),oe.error(Ue(Se,"Failed to update group/channel")),Se}},B=async J=>{if(o)try{await Fe.banUser(o.id,J),oe.success("User banned and removed from chat");const te=await Fe.getChatProfile(o.id);ze.getState().setCurrentChat(te)}catch(te){console.error("Failed to ban user:",te),oe.error(rr(te))}},q=async J=>{if(o)try{await Fe.unbanUser(o.id,J),oe.success("User unbanned successfully");const te=await Fe.getChatProfile(o.id);ze.getState().setCurrentChat(te)}catch(te){console.error("Failed to unban user:",te),oe.error(rr(te))}},he=async J=>{if(o)try{o.type==="group"?await Fe.removeMemberFromGroup(o.id,J):o.type==="channel"&&await Fe.removeMemberFromChannel(o.id,J),oe.success("Member removed successfully");const te=await Fe.getChatProfile(o.id);ze.getState().setCurrentChat(te)}catch(te){console.error("Failed to remove member:",te),oe.error(Ue(te,"Failed to remove member"))}},Te=async J=>{if(o)try{await Fe.updateChatPrivacy(o.id,J),oe.success(`Privacy updated to ${J}`);const te=await Fe.getChatProfile(o.id);ze.getState().setCurrentChat(te)}catch(te){console.error("Failed to update privacy:",te),oe.error(Ue(te,"Failed to update privacy"))}},Re=async()=>{if(!(!o||!await Zt({title:`Leave ${o.type==="channel"?"Channel":"Group"}`,message:`Are you sure you want to leave this ${o.type}? You will lose access to all messages and content.`,confirmText:"Leave",cancelText:"Stay",variant:"warning"})))try{await Fe.leaveChat(o.id,o.type),oe.success(`Left ${o.type} successfully`),await ze.getState().loadChats(),ze.getState().setCurrentChat(null),Tt(!1)}catch(te){console.error("Failed to leave chat:",te),oe.error(Ue(te,"Failed to leave"))}},ut=async()=>{if(o)try{await Fe.deleteChat(o.id,o.type),oe.success(`${o.type==="group"?"Group":"Channel"} deleted successfully`),await ze.getState().loadChats(),ze.getState().setCurrentChat(null),Tt(!1)}catch(J){console.error("Failed to delete chat:",J),oe.error(Ue(J,`Failed to delete ${o.type}`))}},gt=async J=>{try{await(await ht(()=>Promise.resolve().then(()=>Hn),void 0).then(me=>me.userService)).blockUser(J),ze.getState().addBlockedUser(J),oe.success("User blocked successfully")}catch(te){console.error("Failed to block user:",te),oe.error(Ue(te,"Failed to block user"))}},_n=async J=>{try{await(await ht(()=>Promise.resolve().then(()=>Hn),void 0).then(me=>me.userService)).unblockUser(J),ze.getState().removeBlockedUser(J),oe.success("User unblocked successfully")}catch(te){console.error("Failed to unblock user:",te),oe.error(Ue(te,"Failed to unblock user"))}},ba=async(J,te)=>{try{const me=new FormData;me.append("Name",J),te&&me.append("file",te);const{reactionService:je}=await ht(async()=>{const{reactionService:xe}=await import("./reaction.service-CAOHlSPG.js");return{reactionService:xe}},__vite__mapDeps([3,1,2]));await je.createReaction(me),oe.success("Custom reaction created successfully!")}catch(me){throw console.error("Failed to create custom reaction:",me),oe.error(Ue(me,"Failed to create custom reaction")),me}},uo=async(J,te,me,je,xe)=>{try{const Se=new FormData;J&&Se.append("username",J),Se.append("description",me||"");let Be="0";je==="chatted"?Be="1":je==="nobody"&&(Be="2"),Se.append("addChatMinLvl",Be),xe&&Se.append("file",xe);const Ze=await(await ht(()=>Promise.resolve().then(()=>Hn),void 0).then(st=>st.userService)).updateProfile(Se);xt.getState().setUser(Ze),oe.success("Profile updated successfully!")}catch(Se){throw console.error("Failed to update profile:",Se),oe.error(Ue(Se,"Failed to update profile")),Se}},Ji=async J=>{ie(J),Me([]),J.trim()&&(dn.current&&clearTimeout(dn.current),Ne(!0),dn.current=setTimeout(async()=>{try{const te=await ht(()=>Promise.resolve().then(()=>Hn),void 0).then(Be=>Be.userService),me=Fe,je=[];try{const Be=await te.searchUsers(J);console.log("[Search] User search results:",Be),Array.isArray(Be)&&Be.forEach(le=>{const Ze=le.EntityId||le.entityId||le.id,Ie=le.displayName||le.DisplayName||le.username||le.name||"Unknown User";console.log("[Search] Mapping user result:",{EntityId:le.EntityId,entityId:le.entityId,id:le.id,displayName:le.displayName,DisplayName:le.DisplayName,username:le.username,finalUserId:Ze,finalName:Ie}),je.push({id:Ze,name:Ie,type:"user",avatar:vn(le.avatarUrl||le.avatar||le.profileImage)})})}catch(Be){console.error("User search failed:",Be)}try{const Be=await me.searchChats(J);console.log("[Search] Chat results:",Be,"Type:",typeof Be,"IsArray:",Array.isArray(Be)),Array.isArray(Be)?Be.forEach((le,Ze)=>{console.log(`[Search] Processing chat result #${Ze}:`,le),console.log(`[Search] Result #${Ze} - chatType:`,le.chatType,"type:",le.type,"displayName:",le.displayName,"name:",le.name);let Ie="channel";if(typeof le.chatType=="number")Ie=le.chatType===0?"user":le.chatType===1?"group":"channel",console.log(`[Search] Used numeric chatType (${le.chatType}) -> ${Ie}`);else if(le.type&&typeof le.type=="string"){const Lt=String(le.type).toLowerCase().trim();if(Lt==="dm"||Lt==="directmessage")Ie="user",console.log("[Search] Used type field 'dm/directmessage' -> user");else if(Lt==="group")Ie="group",console.log("[Search] Used type field 'group' -> group");else if(Lt==="channel")Ie="channel",console.log("[Search] Used type field 'channel' -> channel");else if(console.log(`[Search] type field '${le.type}' is unknown, trying chatType...`),le.chatType&&typeof le.chatType=="string"){const Sa=String(le.chatType).toLowerCase().trim();Sa==="conversation"||Sa==="dm"||Sa==="directmessage"?(Ie="user",console.log("[Search] Used chatType field 'conversation/dm' -> user")):Sa==="group"?(Ie="group",console.log("[Search] Used chatType field 'group' -> group")):Sa==="channel"?(Ie="channel",console.log("[Search] Used chatType field 'channel' -> channel")):console.log(`[Search] chatType '${Sa}' unknown, defaulting to channel`)}}else if(le.chatType&&typeof le.chatType=="string"){const Lt=String(le.chatType).toLowerCase().trim();Lt==="conversation"||Lt==="dm"||Lt==="directmessage"||Lt==="0"?(Ie="user",console.log(`[Search] Used string chatType '${le.chatType}' (${Lt}) -> user`)):Lt==="group"||Lt==="1"?(Ie="group",console.log(`[Search] Used string chatType '${le.chatType}' (${Lt}) -> group`)):Lt==="channel"||Lt==="2"?(Ie="channel",console.log(`[Search] Used string chatType '${le.chatType}' (${Lt}) -> channel`)):console.log(`[Search] string chatType '${Lt}' unknown, defaulting to channel`)}else console.log("[Search] No type info found, using default (channel)");const st=String(le.displayName||le.name||le.username||le.title||"Unknown").trim(),Nn=vn(le.avatarUrl||le.avatar||le.profileImage)||"",pn={id:String(le.entityId||le.id||"unknown"),name:st==="Unknown"||st.length===0?"Unknown User":st,type:Ie,avatar:Nn||void 0};console.log("[Search] Mapped result:",pn,"Original:",{displayName:le.displayName,name:le.name,username:le.username,avatar:le.avatar,avatarUrl:le.avatarUrl}),je.push(pn)}):(console.warn("[Search] Chat results is not an array:",Be),console.warn("[Search] Type of chatsResults:",typeof Be))}catch(Be){console.error("Chat search failed:",Be)}const xe=new Set,Se=je.filter(Be=>{const le=`${Be.name.toLowerCase().trim()}|${Be.type}`;return xe.has(le)?(console.log(`[Search] Filtered duplicate: ${le}`),!1):(xe.add(le),!0)});Se.sort((Be,le)=>{const Ze={user:0,group:1,channel:2};return(Ze[Be.type]??3)-(Ze[le.type]??3)}),console.log("[Search] Final deduplicated results (by name+type):",Se,"Removed duplicates:",je.length-Se.length),Me(Se),Ne(!1)}catch(te){console.error("Search error:",te),Ne(!1)}},300))},es=async J=>{if(console.log("[Search] Selected result:",J,"Type:",J.type),J.type==="user"){re(null),Et(J),We(!0);try{const te=await ht(()=>Promise.resolve().then(()=>Hn),void 0).then(je=>je.userService);console.log("[Search] Loading user profile for ID:",J.id);const me=await te.getUserProfile(J.id);console.log("[Search] Loaded user profile:",me),re(me),Z(!0)}catch(te){console.error("[Search] Failed to load user profile:",te),re(J),Z(!0)}finally{We(!1)}}else{console.log("[Search] Opening group/channel profile for:",J.name),re(null),We(!0);try{const te=await Fe.getChatProfile(J.id);console.log("[Search] Loaded chat profile:",te),ze.getState().setCurrentChat(te),Tt(!0)}catch(te){console.error("[Search] Failed to load chat profile:",te),oe.error(Ue(te,"Failed to load profile"))}finally{We(!1)}}ie(""),Me([])},xi=async(J,te)=>{try{if(!J){oe.error("Error: User ID not found");return}console.log("[Dashboard] handleSendMessage called with userId:",J,"message:",te),Z(!1),re(null),Et(null);const me=ze.getState();console.log("[Dashboard] Looking for existing DM with user:",J);const je=me.chats;let xe=je.find(Ze=>Ze.type!=="dm"?!1:Ze.members&&Ze.members.length>0?Ze.members.some(Ie=>Ie.userId===J||Ie.id===J||Ie.user?.id===J||Ie.user?.userId===J):!1);if(!xe){const Ze=je.filter(Ie=>Ie.type==="dm"&&(!Ie.members||Ie.members.length===0));console.log("[Dashboard] Checking",Ze.length,"DM chats without members");for(const Ie of Ze)try{const st=await Fe.getChatProfile(Ie.id);if(console.log("[Dashboard] Fetched full DM profile:",st.id,"members:",st.members?.length),st.members&&st.members.length>0&&st.members.some(pn=>pn.userId===J||pn.id===J||pn.user?.id===J||pn.user?.userId===J)){console.log("[Dashboard] Found existing DM by fetching profile:",st.id),xe=st;break}}catch(st){console.error("[Dashboard] Error fetching DM profile:",st)}}if(xe){console.log("[Dashboard] Opening existing DM:",xe.id),me.setCurrentChat(xe);return}console.log("[Dashboard] No existing DM found, creating temporary blank chat for user:",J);let Se=ue?.username||"User",Be=ue?.avatar;if(!ue)try{const Ie=await(await ht(()=>Promise.resolve().then(()=>Hn),void 0).then(st=>st.userService)).getUserProfile(J);Se=Ie.username||"User",Be=Ie.avatar,console.log("[Dashboard] Fetched user profile for blank chat:",Se)}catch(Ze){console.error("[Dashboard] Failed to fetch user profile:",Ze)}const le={id:`temp_dm_${J}`,name:Se,type:"dm",avatar:Be,description:"",privacy:"private",members:[],unreadCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(console.log("[Dashboard] Setting current chat to blank:",le.id),me.setCurrentChat(le),te&&te.trim()){console.log("[Dashboard] Sending initial message to user:",J);try{const Ze=new FormData;Ze.append("receiverId",J),Ze.append("content",te),await we.post("/messages/",Ze,{headers:{"Content-Type":"multipart/form-data"}}),console.log("[Dashboard] Message sent successfully, backend auto-created DM"),await new Promise(Nn=>setTimeout(Nn,500)),await me.loadChats();const st=me.chats.find(Nn=>Nn.type!=="dm"||!Nn.members||Nn.members.length===0?!1:Nn.members.some(pn=>pn.userId===J||pn.id===J||pn.user?.id===J||pn.user?.userId===J));st&&(console.log("[Dashboard] Found newly created DM:",st.id),me.setCurrentChat(st))}catch(Ze){console.error("[Dashboard] Error sending message:",Ze),oe.error(Ue(Ze,"Failed to send message"))}}}catch(me){console.error("[Dashboard] Failed to open DM:",me),oe.error(Ue(me,"Failed to open direct message"))}};return c.jsxs("div",{className:`${M.dashboard} ${mt?M.darkMode:""}`,children:[c.jsx(v4,{chats:i,currentChat:o,onSelectChat:J=>{ae(J),nn(!1)},isLoadingChats:l,user:t,onLogout:pe,onMenuOpen:()=>N(!Oe),searchQuery:ee,onSearchChange:Ji,searchResults:ve,onSelectSearchResult:J=>{es(J),nn(!1)},isSearching:ge,isDarkMode:mt,onClearSearch:()=>{ie(""),Et(null),Z(!1)},isMobileOpen:Sn,onMobileClose:()=>nn(!1),onlineUsers:h}),c.jsx(iU,{isOpen:Oe,onClose:()=>N(!1),onCreateGroup:()=>{_(!0),N(!1)},onCreateChannel:()=>{j(!0),N(!1)},onCreateCustomReaction:()=>{se(!0),N(!1)},onEditProfile:()=>{Q(!0),N(!1)},onShowNotifications:()=>{W(!0),N(!1)},onShowAdminPanel:()=>{$e(!0),N(!1)},onShowBlockedUsers:()=>{Ae(!0),N(!1)},isDarkMode:mt,onToggleDarkMode:g,onLogout:pe}),c.jsx(q4,{currentChat:o,messages:u,isLoadingMessages:x,onSendMessage:it,onOpenGroupCreate:()=>_(!0),onOpenChannelCreate:()=>j(!0),onOpenUserProfile:async J=>{We(!0),Z(!0),Et(null);try{const me=await(await ht(()=>Promise.resolve().then(()=>Hn),void 0).then(je=>je.userService)).getUserProfile(J);re(me)}catch(te){console.error("Failed to load user profile:",te)}finally{We(!1)}},onOpenMobileSidebar:()=>nn(!0),onOpenChatProfile:()=>Tt(!0)}),o?.type==="dm"&&c.jsx(sU,{currentChat:o,onReloadChat:async()=>{if(o){const J=await Fe.getChatProfile(o.id);ze.getState().setCurrentChat(J)}},onViewUserProfile:J=>{tn(J),Bt(!0)},onConversationDeleted:()=>{ze.getState().setCurrentChat(null),ze.getState().loadChats()}}),c.jsx(Zx,{isOpen:C,onClose:()=>_(!1),onCreate:tt,isDarkMode:mt,isChannel:!1}),c.jsx(Zx,{isOpen:k,onClose:()=>j(!1),onCreate:$,isDarkMode:mt,isChannel:!0}),c.jsx(rU,{isOpen:D,onClose:()=>{L(!1),U(null)},chat:E,onUpdate:ct,isDarkMode:mt,isChannel:E?.type==="channel"}),c.jsx(lU,{isOpen:P,onClose:()=>Q(!1),user:t,onUpdate:uo,isDarkMode:mt}),c.jsx(cU,{isOpen:ne,onClose:()=>W(!1),isDarkMode:mt,onNavigateToChat:async J=>{try{let te=i.find(me=>me.id===J);if(te||(console.log("[Dashboard] Chat not in list, reloading chats..."),await ze.getState().loadChats(),te=ze.getState().chats.find(je=>je.id===J)),te)await ae(te);else{console.log("[Dashboard] Chat still not in list, loading profile directly...");const me=await Fe.getChatProfile(J);me?await ae(me):oe.error("Chat not found")}}catch(te){console.error("[Dashboard] Failed to load chat from notification:",te),oe.error("Failed to open chat")}}}),c.jsx(oU,{isOpen:ce,onClose:()=>se(!1),onCreate:ba,isDarkMode:mt}),c.jsx(_D,{isOpen:Ee,onClose:()=>$e(!1),isDarkMode:mt}),c.jsx(h4,{isOpen:de,onClose:()=>Ae(!1),isDarkMode:mt}),be&&ue&&c.jsx(Qx,{isOpen:be,onClose:()=>{Z(!1),re(null),Et(null)},userId:ue.id,onSendMessage:xi,onBlockUser:gt,onUnblockUser:_n}),o&&(o.type==="group"||o.type==="channel")&&c.jsx(p4,{isOpen:en,onClose:()=>Tt(!1),chat:o,currentUserId:t?.id||"",onEditGroup:()=>{Tt(!1),U(o),L(!0)},onLeaveGroup:Re,onDeleteGroup:ut,onKickMember:he,onBanMember:B,onUnbanMember:q,onUpdatePrivacy:Te,onViewUserProfile:J=>{tn(J),Bt(!0)}}),un&&c.jsx(Qx,{isOpen:Xt,onClose:()=>{Bt(!1),tn(null)},userId:un,onSendMessage:xi,onBlockUser:gt,onUnblockUser:_n})]})},dU=Cc(t=>({notifications:[],isLoading:!1,error:null,loadNotifications:async()=>{t({isLoading:!0,error:null});try{const n=await Xs.getNotifications();t({notifications:n,isLoading:!1})}catch(n){const i=n.response?.data?.message||"Failed to load notifications";t({error:i,isLoading:!1})}},markAsSeen:async n=>{t({error:null});try{await Xs.markAsSeen(n),t(i=>({notifications:i.notifications.map(o=>o.id===n?{...o,seen:!0}:o)}))}catch(i){const o=i.response?.data?.message||"Failed to mark notification as seen";t({error:o})}},markMultipleAsSeen:async n=>{t({error:null});try{await Xs.markMultipleAsSeen(n),t(i=>({notifications:i.notifications.map(o=>n.includes(o.id)?{...o,seen:!0}:o)}))}catch(i){const o=i.response?.data?.message||"Failed to mark notifications as seen";t({error:o})}},markAllAsSeen:async()=>{t({error:null});try{await Xs.markAllAsSeen(),t(n=>({notifications:n.notifications.map(i=>({...i,seen:!0}))}))}catch(n){const i=n.response?.data?.message||"Failed to mark all notifications as seen";t({error:i})}},clearError:()=>t({error:null}),handleNewNotification:n=>{console.log("[NotificationStore] New notification:",n),t(i=>{const o={id:n.messageId,messageId:n.messageId,chatId:n.chatId,chatName:n.chatName,chatAvatar:n.chatAvatar,senderName:n.senderName,content:n.content,sentTime:n.sentTime,seen:!1,fileUrl:n.fileUrl};return i.notifications.some(u=>u.chatId===o.chatId&&u.sentTime===o.sentTime)?i:{notifications:[o,...i.notifications]}})}}));function fU(){const{isAuthenticated:t}=Er();return console.log("[AppRoutes] Rendering with isAuthenticated:",t),c.jsxs(V_,{children:[c.jsx(Is,{path:"/login",element:t?c.jsx(Vs,{to:"/dashboard",replace:!0}):c.jsx(UT,{})}),c.jsx(Is,{path:"/register",element:t?c.jsx(Vs,{to:"/dashboard",replace:!0}):c.jsx(OT,{})}),c.jsx(Is,{path:"/forgot-password",element:t?c.jsx(Vs,{to:"/dashboard",replace:!0}):c.jsx(LT,{})}),c.jsx(Is,{path:"/dashboard",element:c.jsx(iT,{children:c.jsx(uU,{})})}),c.jsx(Is,{path:"/",element:c.jsx(Vs,{to:t?"/dashboard":"/login",replace:!0})}),c.jsx(Is,{path:"*",element:c.jsx(Vs,{to:"/",replace:!0})})]})}function pU(){const{isAuthenticated:t}=Er(),[n,i]=w.useState([]);w.useEffect(()=>Hs.subscribe(i),[]);const o=l=>{Hs.remove(l)};w.useEffect(()=>{console.log("[App] Initializing auth from localStorage..."),xt.getState().initializeAuth(),console.log("[App] Auth initialization complete")},[]),w.useEffect(()=>{if(!t){console.log("[App] Not authenticated, skipping SignalR initialization");return}console.log("[App] Setting up SignalR event handlers...");const l=ze.getState(),u=dU.getState();return Qe.setEventHandlers({onUserOnline:h=>{l.handleUserOnline(h)},onUserOffline:h=>{l.handleUserOffline({...h,lastSeen:h.lastSeen||new Date().toISOString()})},onReceiveMessage:h=>{l.handleReceiveMessage(h)},onMessageEdited:h=>{l.handleMessageEdited(h)},onMessageDeleted:h=>{l.handleMessageDeleted(h)},onReactionAdded:h=>{l.handleReactionAdded(h)},onReactionRemoved:h=>{l.handleReactionRemoved(h)},onUserTyping:h=>{l.handleUserTyping(h)},onUserStoppedTyping:h=>{l.handleUserStoppedTyping(h)},onNewNotification:h=>{u.handleNewNotification(h)},onMessagePinned:h=>{l.handleMessagePinned(h)},onMessageUnpinned:h=>{l.handleMessageUnpinned(h)},onAddedToChat:h=>{l.handleAddedToChat(h)},onNewConversation:h=>{l.handleNewConversation(h)},onConversationCreated:h=>{l.handleConversationCreated(h)},onPermissionGranted:h=>{l.handlePermissionGranted(h)},onPermissionRevoked:h=>{l.handlePermissionRevoked(h)},onAllPermissionsRevoked:h=>{l.handleAllPermissionsRevoked(h)},onUserBlockedYou:h=>{l.handleUserBlockedYou(h)},onYouBlockedUser:h=>{l.handleYouBlockedUser(h)},onUserUnblockedYou:h=>{l.handleUserUnblockedYou(h)},onYouUnblockedUser:h=>{l.handleYouUnblockedUser(h)},onChatDeleted:h=>{l.handleChatDeleted(h)},onRemovedFromChat:h=>{l.handleRemovedFromChat(h)},onMessagesMarkedSeen:h=>{l.handleMessagesMarkedSeen(h)},onError:h=>{console.error("[App] SignalR Error:",h)}}),(async()=>{try{console.log("[App] Starting SignalR connection..."),await Qe.start(),console.log("[App] SignalR connected successfully");const h=ze.getState();h.chats.length===0&&(console.log("[App] Loading chats before fetching presence states..."),await h.loadChats());const m=new Set;h.chats.forEach(v=>{v.members&&v.members.forEach(x=>{const S=x.userId||x.id||x.user?.id;S&&m.add(S)})});const g=Array.from(m);if(g.length>0){console.log("[App] Fetching presence states for",g.length,"users:",g);try{const v=await Qe.getPresenceStates(g);console.log("[App] Received presence states:",v),console.log("[App] Presence states type check:",typeof v,Object.keys(v).length,"keys"),h.setInitialPresenceStates(v),console.log("[App] Presence states initialized successfully"),console.log("[App] OnlineUsers map after init:",h.onlineUsers)}catch(v){console.error("[App] Failed to fetch initial presence states:",v)}}else console.log("[App] No user IDs available from chat list - presence will be fetched when chats are opened")}catch(h){console.error("[App] Failed to start SignalR:",h)}})(),()=>{console.log("[App] Stopping SignalR connection..."),Qe.stop()}},[t]);try{return c.jsxs(c.Fragment,{children:[c.jsx(P_,{children:c.jsx(fU,{})}),c.jsx(I2,{toasts:n,onClose:o}),c.jsx(bD,{})]})}catch(l){return console.error("App Error:",l),c.jsxs("div",{style:{padding:"20px",color:"red"},children:[c.jsx("h1",{children:"Error Loading Application"}),c.jsx("p",{children:"Check browser console for details"}),c.jsx("pre",{children:String(l)})]})}}const jS=document.getElementById("root");if(!jS)throw new Error("Root element not found");console.log("React app starting...");yw.createRoot(jS).render(c.jsx(w.StrictMode,{children:c.jsx(pU,{})}));console.log("React app rendered");export{we as a};
