const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/permission.service-CpK74LNc.js","assets/vendor-DW-3xwEg.js","assets/ui-CEf3pEc0.js","assets/reaction.service-DocHTqao.js"])))=>i.map(i=>d[i]);
import{a as j_,b as T_,R as La,N as Qo,r as b,L as ns,u as Ph,g as xb,B as k_,c as M_,d as qi}from"./vendor-DW-3xwEg.js";import{M as Ml,S as eh,A as gi,L as Hh,B as $h,Z as E_,a as ir,U as wn,C as Rs,E as El,b as or,c as vb,d as th,K as A_,X as kn,T as R_,I as Vh,e as bb,f as Fh,g as As,h as Wu,i as Sb,j as N_,k as sn,l as nh,m as bl,P as Al,n as qh,R as ts,o as wb,G as _b,p as D_,q as _l,r as z_,s as B_,t as Du,u as U_,v as I_,w as _u,x as Cb,y as Rl,z as O_,D as jb,F as L_,H as ah,J as P_,N as H_,O as $_,Q as xf,V as Jx,W as ev,Y as V_,_ as F_,$ as q_}from"./ui-CEf3pEc0.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();var vf={exports:{}},ml={};var tv;function G_(){if(tv)return ml;tv=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(o,c,u){var p=null;if(u!==void 0&&(p=""+u),c.key!==void 0&&(p=""+c.key),"key"in c){u={};for(var h in c)h!=="key"&&(u[h]=c[h])}else u=c;return c=u.ref,{$$typeof:t,type:o,key:p,ref:c!==void 0?c:null,props:u}}return ml.Fragment=n,ml.jsx=s,ml.jsxs=s,ml}var nv;function W_(){return nv||(nv=1,vf.exports=G_()),vf.exports}var r=W_(),bf={exports:{}},gl={},Sf={exports:{}},wf={};var av;function Y_(){return av||(av=1,(function(t){function n(B,ne){var le=B.length;B.push(ne);e:for(;0<le;){var Se=le-1>>>1,He=B[Se];if(0<c(He,ne))B[Se]=ne,B[le]=He,le=Se;else break e}}function s(B){return B.length===0?null:B[0]}function o(B){if(B.length===0)return null;var ne=B[0],le=B.pop();if(le!==ne){B[0]=le;e:for(var Se=0,He=B.length,we=He>>>1;Se<we;){var Ae=2*(Se+1)-1,je=B[Ae],ie=Ae+1,_e=B[ie];if(0>c(je,le))ie<He&&0>c(_e,je)?(B[Se]=_e,B[ie]=le,Se=ie):(B[Se]=je,B[Ae]=le,Se=Ae);else if(ie<He&&0>c(_e,le))B[Se]=_e,B[ie]=le,Se=ie;else break e}}return ne}function c(B,ne){var le=B.sortIndex-ne.sortIndex;return le!==0?le:B.id-ne.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var p=Date,h=p.now();t.unstable_now=function(){return p.now()-h}}var m=[],g=[],y=1,v=null,S=3,j=!1,C=!1,T=!1,E=!1,z=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function X(B){for(var ne=s(g);ne!==null;){if(ne.callback===null)o(g);else if(ne.startTime<=B)o(g),ne.sortIndex=ne.expirationTime,n(m,ne);else break;ne=s(g)}}function P(B){if(T=!1,X(B),!C)if(s(m)!==null)C=!0,te||(te=!0,qe());else{var ne=s(g);ne!==null&&Te(P,ne.startTime-B)}}var te=!1,re=-1,Q=5,ge=-1;function me(){return E?!0:!(t.unstable_now()-ge<Q)}function Pe(){if(E=!1,te){var B=t.unstable_now();ge=B;var ne=!0;try{e:{C=!1,T&&(T=!1,L(re),re=-1),j=!0;var le=S;try{t:{for(X(B),v=s(m);v!==null&&!(v.expirationTime>B&&me());){var Se=v.callback;if(typeof Se=="function"){v.callback=null,S=v.priorityLevel;var He=Se(v.expirationTime<=B);if(B=t.unstable_now(),typeof He=="function"){v.callback=He,X(B),ne=!0;break t}v===s(m)&&o(m),X(B)}else o(m);v=s(m)}if(v!==null)ne=!0;else{var we=s(g);we!==null&&Te(P,we.startTime-B),ne=!1}}break e}finally{v=null,S=le,j=!1}ne=void 0}}finally{ne?qe():te=!1}}}var qe;if(typeof R=="function")qe=function(){R(Pe)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,Re=Qe.port2;Qe.port1.onmessage=Pe,qe=function(){Re.postMessage(null)}}else qe=function(){z(Pe,0)};function Te(B,ne){re=z(function(){B(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(B){switch(S){case 1:case 2:case 3:var ne=3;break;default:ne=S}var le=S;S=ne;try{return B()}finally{S=le}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(B,ne){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var le=S;S=B;try{return ne()}finally{S=le}},t.unstable_scheduleCallback=function(B,ne,le){var Se=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Se+le:Se):le=Se,B){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=le+He,B={id:y++,callback:ne,priorityLevel:B,startTime:le,expirationTime:He,sortIndex:-1},le>Se?(B.sortIndex=le,n(g,B),s(m)===null&&B===s(g)&&(T?(L(re),re=-1):T=!0,Te(P,le-Se))):(B.sortIndex=He,n(m,B),C||j||(C=!0,te||(te=!0,qe()))),B},t.unstable_shouldYield=me,t.unstable_wrapCallback=function(B){var ne=S;return function(){var le=S;S=ne;try{return B.apply(this,arguments)}finally{S=le}}}})(wf)),wf}var sv;function X_(){return sv||(sv=1,Sf.exports=Y_()),Sf.exports}var iv;function K_(){if(iv)return gl;iv=1;var t=X_(),n=j_(),s=T_();function o(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var a=e,i=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(i=a.return),e=a.return;while(e)}return a.tag===3?i:null}function p(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function h(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(o(188))}function g(e){var a=e.alternate;if(!a){if(a=u(e),a===null)throw Error(o(188));return a!==e?null:e}for(var i=e,l=a;;){var d=i.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){i=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===i)return m(d),e;if(f===l)return m(d),a;f=f.sibling}throw Error(o(188))}if(i.return!==l.return)i=d,l=f;else{for(var x=!1,w=d.child;w;){if(w===i){x=!0,i=d,l=f;break}if(w===l){x=!0,l=d,i=f;break}w=w.sibling}if(!x){for(w=f.child;w;){if(w===i){x=!0,i=f,l=d;break}if(w===l){x=!0,l=f,i=d;break}w=w.sibling}if(!x)throw Error(o(189))}}if(i.alternate!==l)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:a}function y(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=y(e),a!==null)return a;e=e.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),R=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),ge=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),Pe=Symbol.iterator;function qe(e){return e===null||typeof e!="object"?null:(e=Pe&&e[Pe]||e["@@iterator"],typeof e=="function"?e:null)}var Qe=Symbol.for("react.client.reference");function Re(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Qe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case z:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case te:return"SuspenseList";case ge:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case R:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case X:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return a=e.displayName||null,a!==null?a:Re(e.type)||"Memo";case Q:a=e._payload,e=e._init;try{return Re(e(a))}catch{}}return null}var Te=Array.isArray,B=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Se=[],He=-1;function we(e){return{current:e}}function Ae(e){0>He||(e.current=Se[He],Se[He]=null,He--)}function je(e,a){He++,Se[He]=e.current,e.current=a}var ie=we(null),_e=we(null),he=we(null),_t=we(null);function Ct(e,a){switch(je(he,a),je(_e,e),je(ie,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?wx(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=wx(a),e=_x(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ae(ie),je(ie,e)}function Bt(){Ae(ie),Ae(_e),Ae(he)}function jt(e){e.memoizedState!==null&&je(_t,e);var a=ie.current,i=_x(a,e.type);a!==i&&(je(_e,e),je(ie,i))}function rn(e){_e.current===e&&(Ae(ie),Ae(_e)),_t.current===e&&(Ae(_t),dl._currentValue=le)}var Tt,ln;function gt(e){if(Tt===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);Tt=a&&a[1]||"",ln=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tt+e+ln}var In=!1;function ft(e,a){if(!e||In)return"";In=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(F){var H=F}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(F){H=F}e.call(ee.prototype)}}else{try{throw Error()}catch(F){H=F}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(F){if(F&&H&&typeof F.stack=="string")return[F.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),x=f[0],w=f[1];if(x&&w){var k=x.split(`
`),O=w.split(`
`);for(d=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;d<O.length&&!O[d].includes("DetermineComponentFrameRoot");)d++;if(l===k.length||d===O.length)for(l=k.length-1,d=O.length-1;1<=l&&0<=d&&k[l]!==O[d];)d--;for(;1<=l&&0<=d;l--,d--)if(k[l]!==O[d]){if(l!==1||d!==1)do if(l--,d--,0>d||k[l]!==O[d]){var K=`
`+k[l].replace(" at new "," at ");return e.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",e.displayName)),K}while(1<=l&&0<=d);break}}}finally{In=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?gt(i):""}function xt(e,a){switch(e.tag){case 26:case 27:case 5:return gt(e.type);case 16:return gt("Lazy");case 13:return e.child!==a&&a!==null?gt("Suspense Fallback"):gt("Suspense");case 19:return gt("SuspenseList");case 0:case 15:return ft(e.type,!1);case 11:return ft(e.type.render,!1);case 1:return ft(e.type,!0);case 31:return gt("Activity");default:return""}}function Vt(e){try{var a="",i=null;do a+=xt(e,i),i=e,e=e.return;while(e);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var yn=Object.prototype.hasOwnProperty,at=t.unstable_scheduleCallback,Qt=t.unstable_cancelCallback,Zt=t.unstable_shouldYield,Gn=t.unstable_requestPaint,oe=t.unstable_now,ue=t.unstable_getCurrentPriorityLevel,dt=t.unstable_ImmediatePriority,ct=t.unstable_UserBlockingPriority,Ut=t.unstable_NormalPriority,xn=t.unstable_LowPriority,$=t.unstable_IdlePriority,Y=t.log,I=t.unstable_setDisableYieldValue,pe=null,ye=null;function Oe(e){if(typeof Y=="function"&&I(e),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(pe,e)}catch{}}var ut=Math.clz32?Math.clz32:Kn,On=Math.log,ma=Math.LN2;function Kn(e){return e>>>=0,e===0?32:31-(On(e)/ma|0)|0}var zs=256,Ln=262144,is=4194304;function ga(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Bs(e,a,i){var l=e.pendingLanes;if(l===0)return 0;var d=0,f=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var w=l&134217727;return w!==0?(l=w&~f,l!==0?d=ga(l):(x&=w,x!==0?d=ga(x):i||(i=w&~e,i!==0&&(d=ga(i))))):(w=l&~f,w!==0?d=ga(w):x!==0?d=ga(x):i||(i=l&~e,i!==0&&(d=ga(i)))),d===0?0:a!==0&&a!==d&&(a&f)===0&&(f=d&-d,i=a&-a,f>=i||f===32&&(i&4194048)!==0)?a:d}function ae(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function de(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ke(){var e=is;return is<<=1,(is&62914560)===0&&(is=4194304),e}function Ue(e){for(var a=[],i=0;31>i;i++)a.push(e);return a}function ve(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ze(e,a,i,l,d,f){var x=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var w=e.entanglements,k=e.expirationTimes,O=e.hiddenUpdates;for(i=x&~i;0<i;){var K=31-ut(i),ee=1<<K;w[K]=0,k[K]=-1;var H=O[K];if(H!==null)for(O[K]=null,K=0;K<H.length;K++){var F=H[K];F!==null&&(F.lane&=-536870913)}i&=~ee}l!==0&&$e(e,l,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(x&~a))}function $e(e,a,i){e.pendingLanes|=a,e.suspendedLanes&=~a;var l=31-ut(a);e.entangledLanes|=a,e.entanglements[l]=e.entanglements[l]|1073741824|i&261930}function ce(e,a){var i=e.entangledLanes|=a;for(e=e.entanglements;i;){var l=31-ut(i),d=1<<l;d&a|e[l]&a&&(e[l]|=a),i&=~d}}function ot(e,a){var i=a&-a;return i=(i&42)!==0?1:Ve(i),(i&(e.suspendedLanes|a))!==0?0:i}function Ve(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function rt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function En(){var e=ne.p;return e!==0?e:(e=window.event,e===void 0?32:Gx(e.type))}function jn(e,a){var i=ne.p;try{return ne.p=e,a()}finally{ne.p=i}}var kt=Math.random().toString(36).slice(2),Mt="__reactFiber$"+kt,An="__reactProps$"+kt,os="__reactContainer$"+kt,co="__reactEvents$"+kt,yr="__reactListeners$"+kt,Kl="__reactHandles$"+kt,xr="__reactResources$"+kt,bi="__reactMarker$"+kt;function uo(e){delete e[Mt],delete e[An],delete e[co],delete e[yr],delete e[Kl]}function rs(e){var a=e[Mt];if(a)return a;for(var i=e.parentNode;i;){if(a=i[os]||i[Mt]){if(i=a.alternate,a.child!==null||i!==null&&i.child!==null)for(e=Ax(e);e!==null;){if(i=e[Mt])return i;e=Ax(e)}return a}e=i,i=e.parentNode}return null}function Us(e){if(e=e[Mt]||e[os]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function Is(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(o(33))}function ls(e){var a=e[xr];return a||(a=e[xr]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function cn(e){e[bi]=!0}var Ql=new Set,vr={};function cs(e,a){Os(e,a),Os(e+"Capture",a)}function Os(e,a){for(vr[e]=a,e=0;e<a.length;e++)Ql.add(a[e])}var Si=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$a={},br={};function Sr(e){return yn.call(br,e)?!0:yn.call($a,e)?!1:Si.test(e)?br[e]=!0:($a[e]=!0,!1)}function wi(e,a,i){if(Sr(a))if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+i)}}function Va(e,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+i)}}function ya(e,a,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(a,i,""+l)}}function Rn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wr(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Jt(e,a,i){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return d.call(this)},set:function(x){i=""+x,f.call(this,x)}}),Object.defineProperty(e,a,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(x){i=""+x},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function po(e){if(!e._valueTracker){var a=wr(e)?"checked":"value";e._valueTracker=Jt(e,a,""+e[a])}}function Pn(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var i=a.getValue(),l="";return e&&(l=wr(e)?e.checked?"true":"false":e.value),e=l,e!==i?(a.setValue(e),!0):!1}function Ls(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var fo=/[\n"\\]/g;function Hn(e){return e.replace(fo,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ps(e,a,i,l,d,f,x,w){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),a!=null?x==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+Rn(a)):e.value!==""+Rn(a)&&(e.value=""+Rn(a)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),a!=null?Hs(e,x,Rn(a)):i!=null?Hs(e,x,Rn(i)):l!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+Rn(w):e.removeAttribute("name")}function _r(e,a,i,l,d,f,x,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),a!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||a!=null)){po(e);return}i=i!=null?""+Rn(i):"",a=a!=null?""+Rn(a):i,w||a===e.value||(e.value=a),e.defaultValue=a}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=w?e.checked:!!l,e.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x),po(e)}function Hs(e,a,i){a==="number"&&Ls(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function us(e,a,i,l){if(e=e.options,a){a={};for(var d=0;d<i.length;d++)a["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=a.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Rn(i),a=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}a!==null||e[d].disabled||(a=e[d])}a!==null&&(a.selected=!0)}}function Ze(e,a,i){if(a!=null&&(a=""+Rn(a),a!==e.value&&(e.value=a),i==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=i!=null?""+Rn(i):""}function _i(e,a,i,l){if(a==null){if(l!=null){if(i!=null)throw Error(o(92));if(Te(l)){if(1<l.length)throw Error(o(93));l=l[0]}i=l}i==null&&(i=""),a=i}i=Rn(a),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l),po(e)}function en(e,a){if(a){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=a;return}}e.textContent=a}var Ci=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ds(e,a,i){var l=a.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":l?e.setProperty(a,i):typeof i!="number"||i===0||Ci.has(a)?a==="float"?e.cssFloat=i:e[a]=(""+i).trim():e[a]=i+"px"}function Cr(e,a,i){if(a!=null&&typeof a!="object")throw Error(o(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in a)l=a[d],a.hasOwnProperty(d)&&i[d]!==l&&ds(e,d,l)}else for(var f in a)a.hasOwnProperty(f)&&ds(e,f,a[f])}function ho(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ji(e){return Jl.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function xa(){}var mo=null;function vn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ps=null,Fa=null;function jr(e){var a=Us(e);if(a&&(e=a.stateNode)){var i=e[An]||null;e:switch(e=a.stateNode,a.type){case"input":if(Ps(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),a=i.name,i.type==="radio"&&a!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Hn(""+a)+'"][type="radio"]'),a=0;a<i.length;a++){var l=i[a];if(l!==e&&l.form===e.form){var d=l[An]||null;if(!d)throw Error(o(90));Ps(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(a=0;a<i.length;a++)l=i[a],l.form===e.form&&Pn(l)}break e;case"textarea":Ze(e,i.value,i.defaultValue);break e;case"select":a=i.value,a!=null&&us(e,!!i.multiple,a,!1)}}}var Ti=!1;function Tr(e,a,i){if(Ti)return e(a,i);Ti=!0;try{var l=e(a);return l}finally{if(Ti=!1,(ps!==null||Fa!==null)&&(Gc(),ps&&(a=ps,e=Fa,Fa=ps=null,jr(a),e)))for(a=0;a<e.length;a++)jr(e[a])}}function qa(e,a){var i=e.stateNode;if(i===null)return null;var l=i[An]||null;if(l===null)return null;i=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,a,typeof i));return i}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(va)try{var $s={};Object.defineProperty($s,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",$s,$s),window.removeEventListener("test",$s,$s)}catch{Ga=!1}var ba=null,go=null,Vs=null;function ec(){if(Vs)return Vs;var e,a=go,i=a.length,l,d="value"in ba?ba.value:ba.textContent,f=d.length;for(e=0;e<i&&a[e]===d[e];e++);var x=i-e;for(l=1;l<=x&&a[i-l]===d[f-l];l++);return Vs=d.slice(e,1<l?1-l:void 0)}function ki(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function yo(){return!0}function tc(){return!1}function $n(e){function a(i,l,d,f,x){this._reactName=i,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=x,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?yo:tc,this.isPropagationStopped=tc,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=yo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=yo)},persist:function(){},isPersistent:yo}),a}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xo=$n(fs),Fs=v({},fs,{view:0,detail:0}),od=$n(Fs),vo,kr,qs,bo=v({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ar,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qs&&(qs&&e.type==="mousemove"?(vo=e.screenX-qs.screenX,kr=e.screenY-qs.screenY):kr=vo=0,qs=e),vo)},movementY:function(e){return"movementY"in e?e.movementY:kr}}),nc=$n(bo),Mr=v({},bo,{dataTransfer:0}),rd=$n(Mr),ac=v({},Fs,{relatedTarget:0}),Er=$n(ac),sc=v({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),ld=$n(sc),cd=v({},fs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mi=$n(cd),ud=v({},fs,{data:0}),ic=$n(ud),dd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fd(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=pd[e])?!!a[e]:!1}function Ar(){return fd}var hd=v({},Fs,{key:function(e){if(e.key){var a=dd[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=ki(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wa[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ar,charCode:function(e){return e.type==="keypress"?ki(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ki(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oc=$n(hd),md=v({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rc=$n(md),gd=v({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ar}),yd=$n(gd),xd=v({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),vd=$n(xd),bd=v({},bo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Sa=$n(bd),lc=v({},fs,{newState:0,oldState:0}),Sd=$n(lc),wd=[9,13,27,32],Rr=va&&"CompositionEvent"in window,Ei=null;va&&"documentMode"in document&&(Ei=document.documentMode);var _d=va&&"TextEvent"in window&&!Ei,_=va&&(!Rr||Ei&&8<Ei&&11>=Ei),W=" ",Ce=!1;function Ge(e,a){switch(e){case"keyup":return wd.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tn(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ia=!1;function cc(e,a){switch(e){case"compositionend":return tn(a);case"keypress":return a.which!==32?null:(Ce=!0,W);case"textInput":return e=a.data,e===W&&Ce?null:e;default:return null}}function uc(e,a){if(ia)return e==="compositionend"||!Rr&&Ge(e,a)?(e=ec(),Vs=go=ba=null,ia=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return _&&a.locale!=="ko"?null:a.data;default:return null}}var It={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ya(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!It[e.type]:a==="textarea"}function Nr(e,a,i,l){ps?Fa?Fa.push(l):Fa=[l]:ps=l,a=Jc(a,"onChange"),0<a.length&&(i=new xo("onChange","change",null,i,l),e.push({event:i,listeners:a}))}var Dr=null,zr=null;function ZS(e){gx(e,0)}function dc(e){var a=Is(e);if(Pn(a))return e}function Bm(e,a){if(e==="change")return a}var Um=!1;if(va){var Cd;if(va){var jd="oninput"in document;if(!jd){var Im=document.createElement("div");Im.setAttribute("oninput","return;"),jd=typeof Im.oninput=="function"}Cd=jd}else Cd=!1;Um=Cd&&(!document.documentMode||9<document.documentMode)}function Om(){Dr&&(Dr.detachEvent("onpropertychange",Lm),zr=Dr=null)}function Lm(e){if(e.propertyName==="value"&&dc(zr)){var a=[];Nr(a,zr,e,vn(e)),Tr(ZS,a)}}function JS(e,a,i){e==="focusin"?(Om(),Dr=a,zr=i,Dr.attachEvent("onpropertychange",Lm)):e==="focusout"&&Om()}function ew(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dc(zr)}function tw(e,a){if(e==="click")return dc(a)}function nw(e,a){if(e==="input"||e==="change")return dc(a)}function aw(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var oa=typeof Object.is=="function"?Object.is:aw;function Br(e,a){if(oa(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var i=Object.keys(e),l=Object.keys(a);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var d=i[l];if(!yn.call(a,d)||!oa(e[d],a[d]))return!1}return!0}function Pm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hm(e,a){var i=Pm(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=a&&l>=a)return{node:i,offset:a-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Pm(i)}}function $m(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?$m(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Vm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=Ls(e.document);a instanceof e.HTMLIFrameElement;){try{var i=typeof a.contentWindow.location.href=="string"}catch{i=!1}if(i)e=a.contentWindow;else break;a=Ls(e.document)}return a}function Td(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var sw=va&&"documentMode"in document&&11>=document.documentMode,So=null,kd=null,Ur=null,Md=!1;function Fm(e,a,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Md||So==null||So!==Ls(l)||(l=So,"selectionStart"in l&&Td(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ur&&Br(Ur,l)||(Ur=l,l=Jc(kd,"onSelect"),0<l.length&&(a=new xo("onSelect","select",null,a,i),e.push({event:a,listeners:l}),a.target=So)))}function Ai(e,a){var i={};return i[e.toLowerCase()]=a.toLowerCase(),i["Webkit"+e]="webkit"+a,i["Moz"+e]="moz"+a,i}var wo={animationend:Ai("Animation","AnimationEnd"),animationiteration:Ai("Animation","AnimationIteration"),animationstart:Ai("Animation","AnimationStart"),transitionrun:Ai("Transition","TransitionRun"),transitionstart:Ai("Transition","TransitionStart"),transitioncancel:Ai("Transition","TransitionCancel"),transitionend:Ai("Transition","TransitionEnd")},Ed={},qm={};va&&(qm=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function Ri(e){if(Ed[e])return Ed[e];if(!wo[e])return e;var a=wo[e],i;for(i in a)if(a.hasOwnProperty(i)&&i in qm)return Ed[e]=a[i];return e}var Gm=Ri("animationend"),Wm=Ri("animationiteration"),Ym=Ri("animationstart"),iw=Ri("transitionrun"),ow=Ri("transitionstart"),rw=Ri("transitioncancel"),Xm=Ri("transitionend"),Km=new Map,Ad="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ad.push("scrollEnd");function Da(e,a){Km.set(e,a),cs(a,[e])}var pc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},wa=[],_o=0,Rd=0;function fc(){for(var e=_o,a=Rd=_o=0;a<e;){var i=wa[a];wa[a++]=null;var l=wa[a];wa[a++]=null;var d=wa[a];wa[a++]=null;var f=wa[a];if(wa[a++]=null,l!==null&&d!==null){var x=l.pending;x===null?d.next=d:(d.next=x.next,x.next=d),l.pending=d}f!==0&&Qm(i,d,f)}}function hc(e,a,i,l){wa[_o++]=e,wa[_o++]=a,wa[_o++]=i,wa[_o++]=l,Rd|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Nd(e,a,i,l){return hc(e,a,i,l),mc(e)}function Ni(e,a){return hc(e,null,null,a),mc(e)}function Qm(e,a,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var d=!1,f=e.return;f!==null;)f.childLanes|=i,l=f.alternate,l!==null&&(l.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&a!==null&&(d=31-ut(i),e=f.hiddenUpdates,l=e[d],l===null?e[d]=[a]:l.push(a),a.lane=i|536870912),f):null}function mc(e){if(50<sl)throw sl=0,Hp=null,Error(o(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var Co={};function lw(e,a,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(e,a,i,l){return new lw(e,a,i,l)}function Dd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hs(e,a){var i=e.alternate;return i===null?(i=ra(e.tag,a,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=a,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,a=e.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Zm(e,a){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,a=i.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function gc(e,a,i,l,d,f){var x=0;if(l=e,typeof e=="function")Dd(e)&&(x=1);else if(typeof e=="string")x=f_(e,i,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ge:return e=ra(31,i,a,d),e.elementType=ge,e.lanes=f,e;case T:return Di(i.children,d,f,a);case E:x=8,d|=24;break;case z:return e=ra(12,i,a,d|2),e.elementType=z,e.lanes=f,e;case P:return e=ra(13,i,a,d),e.elementType=P,e.lanes=f,e;case te:return e=ra(19,i,a,d),e.elementType=te,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:x=10;break e;case L:x=9;break e;case X:x=11;break e;case re:x=14;break e;case Q:x=16,l=null;break e}x=29,i=Error(o(130,e===null?"null":typeof e,"")),l=null}return a=ra(x,i,a,d),a.elementType=e,a.type=l,a.lanes=f,a}function Di(e,a,i,l){return e=ra(7,e,l,a),e.lanes=i,e}function zd(e,a,i){return e=ra(6,e,null,a),e.lanes=i,e}function Jm(e){var a=ra(18,null,null,0);return a.stateNode=e,a}function Bd(e,a,i){return a=ra(4,e.children!==null?e.children:[],e.key,a),a.lanes=i,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var eg=new WeakMap;function _a(e,a){if(typeof e=="object"&&e!==null){var i=eg.get(e);return i!==void 0?i:(a={value:e,source:a,stack:Vt(a)},eg.set(e,a),a)}return{value:e,source:a,stack:Vt(a)}}var jo=[],To=0,yc=null,Ir=0,Ca=[],ja=0,Gs=null,Xa=1,Ka="";function ms(e,a){jo[To++]=Ir,jo[To++]=yc,yc=e,Ir=a}function tg(e,a,i){Ca[ja++]=Xa,Ca[ja++]=Ka,Ca[ja++]=Gs,Gs=e;var l=Xa;e=Ka;var d=32-ut(l)-1;l&=~(1<<d),i+=1;var f=32-ut(a)+d;if(30<f){var x=d-d%5;f=(l&(1<<x)-1).toString(32),l>>=x,d-=x,Xa=1<<32-ut(a)+d|i<<d|l,Ka=f+e}else Xa=1<<f|i<<d|l,Ka=e}function Ud(e){e.return!==null&&(ms(e,1),tg(e,1,0))}function Id(e){for(;e===yc;)yc=jo[--To],jo[To]=null,Ir=jo[--To],jo[To]=null;for(;e===Gs;)Gs=Ca[--ja],Ca[ja]=null,Ka=Ca[--ja],Ca[ja]=null,Xa=Ca[--ja],Ca[ja]=null}function ng(e,a){Ca[ja++]=Xa,Ca[ja++]=Ka,Ca[ja++]=Gs,Xa=a.id,Ka=a.overflow,Gs=e}var Nn=null,Ot=null,lt=!1,Ws=null,Ta=!1,Od=Error(o(519));function Ys(e){var a=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Or(_a(a,e)),Od}function ag(e){var a=e.stateNode,i=e.type,l=e.memoizedProps;switch(a[Mt]=e,a[An]=l,i){case"dialog":et("cancel",a),et("close",a);break;case"iframe":case"object":case"embed":et("load",a);break;case"video":case"audio":for(i=0;i<ol.length;i++)et(ol[i],a);break;case"source":et("error",a);break;case"img":case"image":case"link":et("error",a),et("load",a);break;case"details":et("toggle",a);break;case"input":et("invalid",a),_r(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":et("invalid",a);break;case"textarea":et("invalid",a),_i(a,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||a.textContent===""+i||l.suppressHydrationWarning===!0||bx(a.textContent,i)?(l.popover!=null&&(et("beforetoggle",a),et("toggle",a)),l.onScroll!=null&&et("scroll",a),l.onScrollEnd!=null&&et("scrollend",a),l.onClick!=null&&(a.onclick=xa),a=!0):a=!1,a||Ys(e,!0)}function sg(e){for(Nn=e.return;Nn;)switch(Nn.tag){case 5:case 31:case 13:Ta=!1;return;case 27:case 3:Ta=!0;return;default:Nn=Nn.return}}function ko(e){if(e!==Nn)return!1;if(!lt)return sg(e),lt=!0,!1;var a=e.tag,i;if((i=a!==3&&a!==27)&&((i=a===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||nf(e.type,e.memoizedProps)),i=!i),i&&Ot&&Ys(e),sg(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ot=Ex(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ot=Ex(e)}else a===27?(a=Ot,li(e.type)?(e=lf,lf=null,Ot=e):Ot=a):Ot=Nn?Ma(e.stateNode.nextSibling):null;return!0}function zi(){Ot=Nn=null,lt=!1}function Ld(){var e=Ws;return e!==null&&(ea===null?ea=e:ea.push.apply(ea,e),Ws=null),e}function Or(e){Ws===null?Ws=[e]:Ws.push(e)}var Pd=we(null),Bi=null,gs=null;function Xs(e,a,i){je(Pd,a._currentValue),a._currentValue=i}function ys(e){e._currentValue=Pd.current,Ae(Pd)}function Hd(e,a,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),e===i)break;e=e.return}}function $d(e,a,i,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var x=d.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=d;for(var k=0;k<a.length;k++)if(w.context===a[k]){f.lanes|=i,w=f.alternate,w!==null&&(w.lanes|=i),Hd(f.return,i,e),l||(x=null);break e}f=w.next}}else if(d.tag===18){if(x=d.return,x===null)throw Error(o(341));x.lanes|=i,f=x.alternate,f!==null&&(f.lanes|=i),Hd(x,i,e),x=null}else x=d.child;if(x!==null)x.return=d;else for(x=d;x!==null;){if(x===e){x=null;break}if(d=x.sibling,d!==null){d.return=x.return,x=d;break}x=x.return}d=x}}function Mo(e,a,i,l){e=null;for(var d=a,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var x=d.alternate;if(x===null)throw Error(o(387));if(x=x.memoizedProps,x!==null){var w=d.type;oa(d.pendingProps.value,x.value)||(e!==null?e.push(w):e=[w])}}else if(d===_t.current){if(x=d.alternate,x===null)throw Error(o(387));x.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(dl):e=[dl])}d=d.return}e!==null&&$d(a,e,i,l),a.flags|=262144}function xc(e){for(e=e.firstContext;e!==null;){if(!oa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ui(e){Bi=e,gs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Dn(e){return ig(Bi,e)}function vc(e,a){return Bi===null&&Ui(e),ig(e,a)}function ig(e,a){var i=a._currentValue;if(a={context:a,memoizedValue:i,next:null},gs===null){if(e===null)throw Error(o(308));gs=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else gs=gs.next=a;return i}var cw=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){a.aborted=!0,e.forEach(function(i){return i()})}},uw=t.unstable_scheduleCallback,dw=t.unstable_NormalPriority,un={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vd(){return{controller:new cw,data:new Map,refCount:0}}function Lr(e){e.refCount--,e.refCount===0&&uw(dw,function(){e.controller.abort()})}var Pr=null,Fd=0,Eo=0,Ao=null;function pw(e,a){if(Pr===null){var i=Pr=[];Fd=0,Eo=Wp(),Ao={status:"pending",value:void 0,then:function(l){i.push(l)}}}return Fd++,a.then(og,og),a}function og(){if(--Fd===0&&Pr!==null){Ao!==null&&(Ao.status="fulfilled");var e=Pr;Pr=null,Eo=0,Ao=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function fw(e,a){var i=[],l={status:"pending",value:null,reason:null,then:function(d){i.push(d)}};return e.then(function(){l.status="fulfilled",l.value=a;for(var d=0;d<i.length;d++)(0,i[d])(a)},function(d){for(l.status="rejected",l.reason=d,d=0;d<i.length;d++)(0,i[d])(void 0)}),l}var rg=B.S;B.S=function(e,a){Fy=oe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&pw(e,a),rg!==null&&rg(e,a)};var Ii=we(null);function qd(){var e=Ii.current;return e!==null?e:Nt.pooledCache}function bc(e,a){a===null?je(Ii,Ii.current):je(Ii,a.pool)}function lg(){var e=qd();return e===null?null:{parent:un._currentValue,pool:e}}var Ro=Error(o(460)),Gd=Error(o(474)),Sc=Error(o(542)),wc={then:function(){}};function cg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ug(e,a,i){switch(i=e[i],i===void 0?e.push(a):i!==a&&(a.then(xa,xa),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,pg(e),e;default:if(typeof a.status=="string")a.then(xa,xa);else{if(e=Nt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=a,e.status="pending",e.then(function(l){if(a.status==="pending"){var d=a;d.status="fulfilled",d.value=l}},function(l){if(a.status==="pending"){var d=a;d.status="rejected",d.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,pg(e),e}throw Li=a,Ro}}function Oi(e){try{var a=e._init;return a(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Li=i,Ro):i}}var Li=null;function dg(){if(Li===null)throw Error(o(459));var e=Li;return Li=null,e}function pg(e){if(e===Ro||e===Sc)throw Error(o(483))}var No=null,Hr=0;function _c(e){var a=Hr;return Hr+=1,No===null&&(No=[]),ug(No,e,a)}function $r(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Cc(e,a){throw a.$$typeof===S?Error(o(525)):(e=Object.prototype.toString.call(a),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function fg(e){function a(D,A){if(e){var U=D.deletions;U===null?(D.deletions=[A],D.flags|=16):U.push(A)}}function i(D,A){if(!e)return null;for(;A!==null;)a(D,A),A=A.sibling;return null}function l(D){for(var A=new Map;D!==null;)D.key!==null?A.set(D.key,D):A.set(D.index,D),D=D.sibling;return A}function d(D,A){return D=hs(D,A),D.index=0,D.sibling=null,D}function f(D,A,U){return D.index=U,e?(U=D.alternate,U!==null?(U=U.index,U<A?(D.flags|=67108866,A):U):(D.flags|=67108866,A)):(D.flags|=1048576,A)}function x(D){return e&&D.alternate===null&&(D.flags|=67108866),D}function w(D,A,U,Z){return A===null||A.tag!==6?(A=zd(U,D.mode,Z),A.return=D,A):(A=d(A,U),A.return=D,A)}function k(D,A,U,Z){var Ne=U.type;return Ne===T?K(D,A,U.props.children,Z,U.key):A!==null&&(A.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===Q&&Oi(Ne)===A.type)?(A=d(A,U.props),$r(A,U),A.return=D,A):(A=gc(U.type,U.key,U.props,null,D.mode,Z),$r(A,U),A.return=D,A)}function O(D,A,U,Z){return A===null||A.tag!==4||A.stateNode.containerInfo!==U.containerInfo||A.stateNode.implementation!==U.implementation?(A=Bd(U,D.mode,Z),A.return=D,A):(A=d(A,U.children||[]),A.return=D,A)}function K(D,A,U,Z,Ne){return A===null||A.tag!==7?(A=Di(U,D.mode,Z,Ne),A.return=D,A):(A=d(A,U),A.return=D,A)}function ee(D,A,U){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=zd(""+A,D.mode,U),A.return=D,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case j:return U=gc(A.type,A.key,A.props,null,D.mode,U),$r(U,A),U.return=D,U;case C:return A=Bd(A,D.mode,U),A.return=D,A;case Q:return A=Oi(A),ee(D,A,U)}if(Te(A)||qe(A))return A=Di(A,D.mode,U,null),A.return=D,A;if(typeof A.then=="function")return ee(D,_c(A),U);if(A.$$typeof===R)return ee(D,vc(D,A),U);Cc(D,A)}return null}function H(D,A,U,Z){var Ne=A!==null?A.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return Ne!==null?null:w(D,A,""+U,Z);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case j:return U.key===Ne?k(D,A,U,Z):null;case C:return U.key===Ne?O(D,A,U,Z):null;case Q:return U=Oi(U),H(D,A,U,Z)}if(Te(U)||qe(U))return Ne!==null?null:K(D,A,U,Z,null);if(typeof U.then=="function")return H(D,A,_c(U),Z);if(U.$$typeof===R)return H(D,A,vc(D,U),Z);Cc(D,U)}return null}function F(D,A,U,Z,Ne){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return D=D.get(U)||null,w(A,D,""+Z,Ne);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case j:return D=D.get(Z.key===null?U:Z.key)||null,k(A,D,Z,Ne);case C:return D=D.get(Z.key===null?U:Z.key)||null,O(A,D,Z,Ne);case Q:return Z=Oi(Z),F(D,A,U,Z,Ne)}if(Te(Z)||qe(Z))return D=D.get(U)||null,K(A,D,Z,Ne,null);if(typeof Z.then=="function")return F(D,A,U,_c(Z),Ne);if(Z.$$typeof===R)return F(D,A,U,vc(A,Z),Ne);Cc(A,Z)}return null}function be(D,A,U,Z){for(var Ne=null,ht=null,Me=A,Ke=A=0,it=null;Me!==null&&Ke<U.length;Ke++){Me.index>Ke?(it=Me,Me=null):it=Me.sibling;var mt=H(D,Me,U[Ke],Z);if(mt===null){Me===null&&(Me=it);break}e&&Me&&mt.alternate===null&&a(D,Me),A=f(mt,A,Ke),ht===null?Ne=mt:ht.sibling=mt,ht=mt,Me=it}if(Ke===U.length)return i(D,Me),lt&&ms(D,Ke),Ne;if(Me===null){for(;Ke<U.length;Ke++)Me=ee(D,U[Ke],Z),Me!==null&&(A=f(Me,A,Ke),ht===null?Ne=Me:ht.sibling=Me,ht=Me);return lt&&ms(D,Ke),Ne}for(Me=l(Me);Ke<U.length;Ke++)it=F(Me,D,Ke,U[Ke],Z),it!==null&&(e&&it.alternate!==null&&Me.delete(it.key===null?Ke:it.key),A=f(it,A,Ke),ht===null?Ne=it:ht.sibling=it,ht=it);return e&&Me.forEach(function(fi){return a(D,fi)}),lt&&ms(D,Ke),Ne}function Ie(D,A,U,Z){if(U==null)throw Error(o(151));for(var Ne=null,ht=null,Me=A,Ke=A=0,it=null,mt=U.next();Me!==null&&!mt.done;Ke++,mt=U.next()){Me.index>Ke?(it=Me,Me=null):it=Me.sibling;var fi=H(D,Me,mt.value,Z);if(fi===null){Me===null&&(Me=it);break}e&&Me&&fi.alternate===null&&a(D,Me),A=f(fi,A,Ke),ht===null?Ne=fi:ht.sibling=fi,ht=fi,Me=it}if(mt.done)return i(D,Me),lt&&ms(D,Ke),Ne;if(Me===null){for(;!mt.done;Ke++,mt=U.next())mt=ee(D,mt.value,Z),mt!==null&&(A=f(mt,A,Ke),ht===null?Ne=mt:ht.sibling=mt,ht=mt);return lt&&ms(D,Ke),Ne}for(Me=l(Me);!mt.done;Ke++,mt=U.next())mt=F(Me,D,Ke,mt.value,Z),mt!==null&&(e&&mt.alternate!==null&&Me.delete(mt.key===null?Ke:mt.key),A=f(mt,A,Ke),ht===null?Ne=mt:ht.sibling=mt,ht=mt);return e&&Me.forEach(function(C_){return a(D,C_)}),lt&&ms(D,Ke),Ne}function Rt(D,A,U,Z){if(typeof U=="object"&&U!==null&&U.type===T&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case j:e:{for(var Ne=U.key;A!==null;){if(A.key===Ne){if(Ne=U.type,Ne===T){if(A.tag===7){i(D,A.sibling),Z=d(A,U.props.children),Z.return=D,D=Z;break e}}else if(A.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===Q&&Oi(Ne)===A.type){i(D,A.sibling),Z=d(A,U.props),$r(Z,U),Z.return=D,D=Z;break e}i(D,A);break}else a(D,A);A=A.sibling}U.type===T?(Z=Di(U.props.children,D.mode,Z,U.key),Z.return=D,D=Z):(Z=gc(U.type,U.key,U.props,null,D.mode,Z),$r(Z,U),Z.return=D,D=Z)}return x(D);case C:e:{for(Ne=U.key;A!==null;){if(A.key===Ne)if(A.tag===4&&A.stateNode.containerInfo===U.containerInfo&&A.stateNode.implementation===U.implementation){i(D,A.sibling),Z=d(A,U.children||[]),Z.return=D,D=Z;break e}else{i(D,A);break}else a(D,A);A=A.sibling}Z=Bd(U,D.mode,Z),Z.return=D,D=Z}return x(D);case Q:return U=Oi(U),Rt(D,A,U,Z)}if(Te(U))return be(D,A,U,Z);if(qe(U)){if(Ne=qe(U),typeof Ne!="function")throw Error(o(150));return U=Ne.call(U),Ie(D,A,U,Z)}if(typeof U.then=="function")return Rt(D,A,_c(U),Z);if(U.$$typeof===R)return Rt(D,A,vc(D,U),Z);Cc(D,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,A!==null&&A.tag===6?(i(D,A.sibling),Z=d(A,U),Z.return=D,D=Z):(i(D,A),Z=zd(U,D.mode,Z),Z.return=D,D=Z),x(D)):i(D,A)}return function(D,A,U,Z){try{Hr=0;var Ne=Rt(D,A,U,Z);return No=null,Ne}catch(Me){if(Me===Ro||Me===Sc)throw Me;var ht=ra(29,Me,null,D.mode);return ht.lanes=Z,ht.return=D,ht}finally{}}}var Pi=fg(!0),hg=fg(!1),Ks=!1;function Wd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yd(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Qs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Zs(e,a,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(yt&2)!==0){var d=l.pending;return d===null?a.next=a:(a.next=d.next,d.next=a),l.pending=a,a=mc(e),Qm(e,null,i),a}return hc(e,l,a,i),mc(e)}function Vr(e,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var l=a.lanes;l&=e.pendingLanes,i|=l,a.lanes=i,ce(e,i)}}function Xd(e,a){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var d=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var x={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?d=f=x:f=f.next=x,i=i.next}while(i!==null);f===null?d=f=a:f=f.next=a}else d=f=a;i={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=a:e.next=a,i.lastBaseUpdate=a}var Kd=!1;function Fr(){if(Kd){var e=Ao;if(e!==null)throw e}}function qr(e,a,i,l){Kd=!1;var d=e.updateQueue;Ks=!1;var f=d.firstBaseUpdate,x=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var k=w,O=k.next;k.next=null,x===null?f=O:x.next=O,x=k;var K=e.alternate;K!==null&&(K=K.updateQueue,w=K.lastBaseUpdate,w!==x&&(w===null?K.firstBaseUpdate=O:w.next=O,K.lastBaseUpdate=k))}if(f!==null){var ee=d.baseState;x=0,K=O=k=null,w=f;do{var H=w.lane&-536870913,F=H!==w.lane;if(F?(st&H)===H:(l&H)===H){H!==0&&H===Eo&&(Kd=!0),K!==null&&(K=K.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var be=e,Ie=w;H=a;var Rt=i;switch(Ie.tag){case 1:if(be=Ie.payload,typeof be=="function"){ee=be.call(Rt,ee,H);break e}ee=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ie.payload,H=typeof be=="function"?be.call(Rt,ee,H):be,H==null)break e;ee=v({},ee,H);break e;case 2:Ks=!0}}H=w.callback,H!==null&&(e.flags|=64,F&&(e.flags|=8192),F=d.callbacks,F===null?d.callbacks=[H]:F.push(H))}else F={lane:H,tag:w.tag,payload:w.payload,callback:w.callback,next:null},K===null?(O=K=F,k=ee):K=K.next=F,x|=H;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;F=w,w=F.next,F.next=null,d.lastBaseUpdate=F,d.shared.pending=null}}while(!0);K===null&&(k=ee),d.baseState=k,d.firstBaseUpdate=O,d.lastBaseUpdate=K,f===null&&(d.shared.lanes=0),ai|=x,e.lanes=x,e.memoizedState=ee}}function mg(e,a){if(typeof e!="function")throw Error(o(191,e));e.call(a)}function gg(e,a){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)mg(i[e],a)}var Do=we(null),jc=we(0);function yg(e,a){e=Ts,je(jc,e),je(Do,a),Ts=e|a.baseLanes}function Qd(){je(jc,Ts),je(Do,Do.current)}function Zd(){Ts=jc.current,Ae(Do),Ae(jc)}var la=we(null),ka=null;function Js(e){var a=e.alternate;je(nn,nn.current&1),je(la,e),ka===null&&(a===null||Do.current!==null||a.memoizedState!==null)&&(ka=e)}function Jd(e){je(nn,nn.current),je(la,e),ka===null&&(ka=e)}function xg(e){e.tag===22?(je(nn,nn.current),je(la,e),ka===null&&(ka=e)):ei()}function ei(){je(nn,nn.current),je(la,la.current)}function ca(e){Ae(la),ka===e&&(ka=null),Ae(nn)}var nn=we(0);function Tc(e){for(var a=e;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||of(i)||rf(i)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var xs=0,Ye=null,Et=null,dn=null,kc=!1,zo=!1,Hi=!1,Mc=0,Gr=0,Bo=null,hw=0;function Wt(){throw Error(o(321))}function ep(e,a){if(a===null)return!1;for(var i=0;i<a.length&&i<e.length;i++)if(!oa(e[i],a[i]))return!1;return!0}function tp(e,a,i,l,d,f){return xs=f,Ye=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,B.H=e===null||e.memoizedState===null?ty:gp,Hi=!1,f=i(l,d),Hi=!1,zo&&(f=bg(a,i,l,d)),vg(e),f}function vg(e){B.H=Xr;var a=Et!==null&&Et.next!==null;if(xs=0,dn=Et=Ye=null,kc=!1,Gr=0,Bo=null,a)throw Error(o(300));e===null||pn||(e=e.dependencies,e!==null&&xc(e)&&(pn=!0))}function bg(e,a,i,l){Ye=e;var d=0;do{if(zo&&(Bo=null),Gr=0,zo=!1,25<=d)throw Error(o(301));if(d+=1,dn=Et=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}B.H=ny,f=a(i,l)}while(zo);return f}function mw(){var e=B.H,a=e.useState()[0];return a=typeof a.then=="function"?Wr(a):a,e=e.useState()[0],(Et!==null?Et.memoizedState:null)!==e&&(Ye.flags|=1024),a}function np(){var e=Mc!==0;return Mc=0,e}function ap(e,a,i){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~i}function sp(e){if(kc){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}kc=!1}xs=0,dn=Et=Ye=null,zo=!1,Gr=Mc=0,Bo=null}function Wn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Ye.memoizedState=dn=e:dn=dn.next=e,dn}function an(){if(Et===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=Et.next;var a=dn===null?Ye.memoizedState:dn.next;if(a!==null)dn=a,Et=e;else{if(e===null)throw Ye.alternate===null?Error(o(467)):Error(o(310));Et=e,e={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},dn===null?Ye.memoizedState=dn=e:dn=dn.next=e}return dn}function Ec(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wr(e){var a=Gr;return Gr+=1,Bo===null&&(Bo=[]),e=ug(Bo,e,a),a=Ye,(dn===null?a.memoizedState:dn.next)===null&&(a=a.alternate,B.H=a===null||a.memoizedState===null?ty:gp),e}function Ac(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Wr(e);if(e.$$typeof===R)return Dn(e)}throw Error(o(438,String(e)))}function ip(e){var a=null,i=Ye.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var l=Ye.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(d){return d.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=Ec(),Ye.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(e),l=0;l<e;l++)i[l]=me;return a.index++,i}function vs(e,a){return typeof a=="function"?a(e):a}function Rc(e){var a=an();return op(a,Et,e)}function op(e,a,i){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=i;var d=e.baseQueue,f=l.pending;if(f!==null){if(d!==null){var x=d.next;d.next=f.next,f.next=x}a.baseQueue=d=f,l.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{a=d.next;var w=x=null,k=null,O=a,K=!1;do{var ee=O.lane&-536870913;if(ee!==O.lane?(st&ee)===ee:(xs&ee)===ee){var H=O.revertLane;if(H===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),ee===Eo&&(K=!0);else if((xs&H)===H){O=O.next,H===Eo&&(K=!0);continue}else ee={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},k===null?(w=k=ee,x=f):k=k.next=ee,Ye.lanes|=H,ai|=H;ee=O.action,Hi&&i(f,ee),f=O.hasEagerState?O.eagerState:i(f,ee)}else H={lane:ee,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},k===null?(w=k=H,x=f):k=k.next=H,Ye.lanes|=ee,ai|=ee;O=O.next}while(O!==null&&O!==a);if(k===null?x=f:k.next=w,!oa(f,e.memoizedState)&&(pn=!0,K&&(i=Ao,i!==null)))throw i;e.memoizedState=f,e.baseState=x,e.baseQueue=k,l.lastRenderedState=f}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function rp(e){var a=an(),i=a.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var l=i.dispatch,d=i.pending,f=a.memoizedState;if(d!==null){i.pending=null;var x=d=d.next;do f=e(f,x.action),x=x.next;while(x!==d);oa(f,a.memoizedState)||(pn=!0),a.memoizedState=f,a.baseQueue===null&&(a.baseState=f),i.lastRenderedState=f}return[f,l]}function Sg(e,a,i){var l=Ye,d=an(),f=lt;if(f){if(i===void 0)throw Error(o(407));i=i()}else i=a();var x=!oa((Et||d).memoizedState,i);if(x&&(d.memoizedState=i,pn=!0),d=d.queue,up(Cg.bind(null,l,d,e),[e]),d.getSnapshot!==a||x||dn!==null&&dn.memoizedState.tag&1){if(l.flags|=2048,Uo(9,{destroy:void 0},_g.bind(null,l,d,i,a),null),Nt===null)throw Error(o(349));f||(xs&127)!==0||wg(l,a,i)}return i}function wg(e,a,i){e.flags|=16384,e={getSnapshot:a,value:i},a=Ye.updateQueue,a===null?(a=Ec(),Ye.updateQueue=a,a.stores=[e]):(i=a.stores,i===null?a.stores=[e]:i.push(e))}function _g(e,a,i,l){a.value=i,a.getSnapshot=l,jg(a)&&Tg(e)}function Cg(e,a,i){return i(function(){jg(a)&&Tg(e)})}function jg(e){var a=e.getSnapshot;e=e.value;try{var i=a();return!oa(e,i)}catch{return!0}}function Tg(e){var a=Ni(e,2);a!==null&&ta(a,e,2)}function lp(e){var a=Wn();if(typeof e=="function"){var i=e;if(e=i(),Hi){Oe(!0);try{i()}finally{Oe(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:e},a}function kg(e,a,i,l){return e.baseState=i,op(e,Et,typeof l=="function"?l:vs)}function gw(e,a,i,l,d){if(zc(e))throw Error(o(485));if(e=a.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){f.listeners.push(x)}};B.T!==null?i(!0):f.isTransition=!1,l(f),i=a.pending,i===null?(f.next=a.pending=f,Mg(a,f)):(f.next=i.next,a.pending=i.next=f)}}function Mg(e,a){var i=a.action,l=a.payload,d=e.state;if(a.isTransition){var f=B.T,x={};B.T=x;try{var w=i(d,l),k=B.S;k!==null&&k(x,w),Eg(e,a,w)}catch(O){cp(e,a,O)}finally{f!==null&&x.types!==null&&(f.types=x.types),B.T=f}}else try{f=i(d,l),Eg(e,a,f)}catch(O){cp(e,a,O)}}function Eg(e,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){Ag(e,a,l)},function(l){return cp(e,a,l)}):Ag(e,a,i)}function Ag(e,a,i){a.status="fulfilled",a.value=i,Rg(a),e.state=i,a=e.pending,a!==null&&(i=a.next,i===a?e.pending=null:(i=i.next,a.next=i,Mg(e,i)))}function cp(e,a,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=i,Rg(a),a=a.next;while(a!==l)}e.action=null}function Rg(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Ng(e,a){return a}function Dg(e,a){if(lt){var i=Nt.formState;if(i!==null){e:{var l=Ye;if(lt){if(Ot){t:{for(var d=Ot,f=Ta;d.nodeType!==8;){if(!f){d=null;break t}if(d=Ma(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){Ot=Ma(d.nextSibling),l=d.data==="F!";break e}}Ys(l)}l=!1}l&&(a=i[0])}}return i=Wn(),i.memoizedState=i.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ng,lastRenderedState:a},i.queue=l,i=Zg.bind(null,Ye,l),l.dispatch=i,l=lp(!1),f=mp.bind(null,Ye,!1,l.queue),l=Wn(),d={state:a,dispatch:null,action:e,pending:null},l.queue=d,i=gw.bind(null,Ye,d,f,i),d.dispatch=i,l.memoizedState=e,[a,i,!1]}function zg(e){var a=an();return Bg(a,Et,e)}function Bg(e,a,i){if(a=op(e,a,Ng)[0],e=Rc(vs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=Wr(a)}catch(x){throw x===Ro?Sc:x}else l=a;a=an();var d=a.queue,f=d.dispatch;return i!==a.memoizedState&&(Ye.flags|=2048,Uo(9,{destroy:void 0},yw.bind(null,d,i),null)),[l,f,e]}function yw(e,a){e.action=a}function Ug(e){var a=an(),i=Et;if(i!==null)return Bg(a,i,e);an(),a=a.memoizedState,i=an();var l=i.queue.dispatch;return i.memoizedState=e,[a,l,!1]}function Uo(e,a,i,l){return e={tag:e,create:i,deps:l,inst:a,next:null},a=Ye.updateQueue,a===null&&(a=Ec(),Ye.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,a.lastEffect=e),e}function Ig(){return an().memoizedState}function Nc(e,a,i,l){var d=Wn();Ye.flags|=e,d.memoizedState=Uo(1|a,{destroy:void 0},i,l===void 0?null:l)}function Dc(e,a,i,l){var d=an();l=l===void 0?null:l;var f=d.memoizedState.inst;Et!==null&&l!==null&&ep(l,Et.memoizedState.deps)?d.memoizedState=Uo(a,f,i,l):(Ye.flags|=e,d.memoizedState=Uo(1|a,f,i,l))}function Og(e,a){Nc(8390656,8,e,a)}function up(e,a){Dc(2048,8,e,a)}function xw(e){Ye.flags|=4;var a=Ye.updateQueue;if(a===null)a=Ec(),Ye.updateQueue=a,a.events=[e];else{var i=a.events;i===null?a.events=[e]:i.push(e)}}function Lg(e){var a=an().memoizedState;return xw({ref:a,nextImpl:e}),function(){if((yt&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}function Pg(e,a){return Dc(4,2,e,a)}function Hg(e,a){return Dc(4,4,e,a)}function $g(e,a){if(typeof a=="function"){e=e();var i=a(e);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function Vg(e,a,i){i=i!=null?i.concat([e]):null,Dc(4,4,$g.bind(null,a,e),i)}function dp(){}function Fg(e,a){var i=an();a=a===void 0?null:a;var l=i.memoizedState;return a!==null&&ep(a,l[1])?l[0]:(i.memoizedState=[e,a],e)}function qg(e,a){var i=an();a=a===void 0?null:a;var l=i.memoizedState;if(a!==null&&ep(a,l[1]))return l[0];if(l=e(),Hi){Oe(!0);try{e()}finally{Oe(!1)}}return i.memoizedState=[l,a],l}function pp(e,a,i){return i===void 0||(xs&1073741824)!==0&&(st&261930)===0?e.memoizedState=a:(e.memoizedState=i,e=Gy(),Ye.lanes|=e,ai|=e,i)}function Gg(e,a,i,l){return oa(i,a)?i:Do.current!==null?(e=pp(e,i,l),oa(e,a)||(pn=!0),e):(xs&42)===0||(xs&1073741824)!==0&&(st&261930)===0?(pn=!0,e.memoizedState=i):(e=Gy(),Ye.lanes|=e,ai|=e,a)}function Wg(e,a,i,l,d){var f=ne.p;ne.p=f!==0&&8>f?f:8;var x=B.T,w={};B.T=w,mp(e,!1,a,i);try{var k=d(),O=B.S;if(O!==null&&O(w,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var K=fw(k,l);Yr(e,a,K,pa(e))}else Yr(e,a,l,pa(e))}catch(ee){Yr(e,a,{then:function(){},status:"rejected",reason:ee},pa())}finally{ne.p=f,x!==null&&w.types!==null&&(x.types=w.types),B.T=x}}function vw(){}function fp(e,a,i,l){if(e.tag!==5)throw Error(o(476));var d=Yg(e).queue;Wg(e,d,a,le,i===null?vw:function(){return Xg(e),i(l)})}function Yg(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:le},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:i},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Xg(e){var a=Yg(e);a.next===null&&(a=e.alternate.memoizedState),Yr(e,a.next.queue,{},pa())}function hp(){return Dn(dl)}function Kg(){return an().memoizedState}function Qg(){return an().memoizedState}function bw(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var i=pa();e=Qs(i);var l=Zs(a,e,i);l!==null&&(ta(l,a,i),Vr(l,a,i)),a={cache:Vd()},e.payload=a;return}a=a.return}}function Sw(e,a,i){var l=pa();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},zc(e)?Jg(a,i):(i=Nd(e,a,i,l),i!==null&&(ta(i,e,l),ey(i,a,l)))}function Zg(e,a,i){var l=pa();Yr(e,a,i,l)}function Yr(e,a,i,l){var d={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(zc(e))Jg(a,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=a.lastRenderedReducer,f!==null))try{var x=a.lastRenderedState,w=f(x,i);if(d.hasEagerState=!0,d.eagerState=w,oa(w,x))return hc(e,a,d,0),Nt===null&&fc(),!1}catch{}finally{}if(i=Nd(e,a,d,l),i!==null)return ta(i,e,l),ey(i,a,l),!0}return!1}function mp(e,a,i,l){if(l={lane:2,revertLane:Wp(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},zc(e)){if(a)throw Error(o(479))}else a=Nd(e,i,l,2),a!==null&&ta(a,e,2)}function zc(e){var a=e.alternate;return e===Ye||a!==null&&a===Ye}function Jg(e,a){zo=kc=!0;var i=e.pending;i===null?a.next=a:(a.next=i.next,i.next=a),e.pending=a}function ey(e,a,i){if((i&4194048)!==0){var l=a.lanes;l&=e.pendingLanes,i|=l,a.lanes=i,ce(e,i)}}var Xr={readContext:Dn,use:Ac,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useLayoutEffect:Wt,useInsertionEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useSyncExternalStore:Wt,useId:Wt,useHostTransitionStatus:Wt,useFormState:Wt,useActionState:Wt,useOptimistic:Wt,useMemoCache:Wt,useCacheRefresh:Wt};Xr.useEffectEvent=Wt;var ty={readContext:Dn,use:Ac,useCallback:function(e,a){return Wn().memoizedState=[e,a===void 0?null:a],e},useContext:Dn,useEffect:Og,useImperativeHandle:function(e,a,i){i=i!=null?i.concat([e]):null,Nc(4194308,4,$g.bind(null,a,e),i)},useLayoutEffect:function(e,a){return Nc(4194308,4,e,a)},useInsertionEffect:function(e,a){Nc(4,2,e,a)},useMemo:function(e,a){var i=Wn();a=a===void 0?null:a;var l=e();if(Hi){Oe(!0);try{e()}finally{Oe(!1)}}return i.memoizedState=[l,a],l},useReducer:function(e,a,i){var l=Wn();if(i!==void 0){var d=i(a);if(Hi){Oe(!0);try{i(a)}finally{Oe(!1)}}}else d=a;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=Sw.bind(null,Ye,e),[l.memoizedState,e]},useRef:function(e){var a=Wn();return e={current:e},a.memoizedState=e},useState:function(e){e=lp(e);var a=e.queue,i=Zg.bind(null,Ye,a);return a.dispatch=i,[e.memoizedState,i]},useDebugValue:dp,useDeferredValue:function(e,a){var i=Wn();return pp(i,e,a)},useTransition:function(){var e=lp(!1);return e=Wg.bind(null,Ye,e.queue,!0,!1),Wn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,i){var l=Ye,d=Wn();if(lt){if(i===void 0)throw Error(o(407));i=i()}else{if(i=a(),Nt===null)throw Error(o(349));(st&127)!==0||wg(l,a,i)}d.memoizedState=i;var f={value:i,getSnapshot:a};return d.queue=f,Og(Cg.bind(null,l,f,e),[e]),l.flags|=2048,Uo(9,{destroy:void 0},_g.bind(null,l,f,i,a),null),i},useId:function(){var e=Wn(),a=Nt.identifierPrefix;if(lt){var i=Ka,l=Xa;i=(l&~(1<<32-ut(l)-1)).toString(32)+i,a="_"+a+"R_"+i,i=Mc++,0<i&&(a+="H"+i.toString(32)),a+="_"}else i=hw++,a="_"+a+"r_"+i.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:hp,useFormState:Dg,useActionState:Dg,useOptimistic:function(e){var a=Wn();a.memoizedState=a.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=mp.bind(null,Ye,!0,i),i.dispatch=a,[e,a]},useMemoCache:ip,useCacheRefresh:function(){return Wn().memoizedState=bw.bind(null,Ye)},useEffectEvent:function(e){var a=Wn(),i={impl:e};return a.memoizedState=i,function(){if((yt&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}},gp={readContext:Dn,use:Ac,useCallback:Fg,useContext:Dn,useEffect:up,useImperativeHandle:Vg,useInsertionEffect:Pg,useLayoutEffect:Hg,useMemo:qg,useReducer:Rc,useRef:Ig,useState:function(){return Rc(vs)},useDebugValue:dp,useDeferredValue:function(e,a){var i=an();return Gg(i,Et.memoizedState,e,a)},useTransition:function(){var e=Rc(vs)[0],a=an().memoizedState;return[typeof e=="boolean"?e:Wr(e),a]},useSyncExternalStore:Sg,useId:Kg,useHostTransitionStatus:hp,useFormState:zg,useActionState:zg,useOptimistic:function(e,a){var i=an();return kg(i,Et,e,a)},useMemoCache:ip,useCacheRefresh:Qg};gp.useEffectEvent=Lg;var ny={readContext:Dn,use:Ac,useCallback:Fg,useContext:Dn,useEffect:up,useImperativeHandle:Vg,useInsertionEffect:Pg,useLayoutEffect:Hg,useMemo:qg,useReducer:rp,useRef:Ig,useState:function(){return rp(vs)},useDebugValue:dp,useDeferredValue:function(e,a){var i=an();return Et===null?pp(i,e,a):Gg(i,Et.memoizedState,e,a)},useTransition:function(){var e=rp(vs)[0],a=an().memoizedState;return[typeof e=="boolean"?e:Wr(e),a]},useSyncExternalStore:Sg,useId:Kg,useHostTransitionStatus:hp,useFormState:Ug,useActionState:Ug,useOptimistic:function(e,a){var i=an();return Et!==null?kg(i,Et,e,a):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:ip,useCacheRefresh:Qg};ny.useEffectEvent=Lg;function yp(e,a,i,l){a=e.memoizedState,i=i(l,a),i=i==null?a:v({},a,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var xp={enqueueSetState:function(e,a,i){e=e._reactInternals;var l=pa(),d=Qs(l);d.payload=a,i!=null&&(d.callback=i),a=Zs(e,d,l),a!==null&&(ta(a,e,l),Vr(a,e,l))},enqueueReplaceState:function(e,a,i){e=e._reactInternals;var l=pa(),d=Qs(l);d.tag=1,d.payload=a,i!=null&&(d.callback=i),a=Zs(e,d,l),a!==null&&(ta(a,e,l),Vr(a,e,l))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var i=pa(),l=Qs(i);l.tag=2,a!=null&&(l.callback=a),a=Zs(e,l,i),a!==null&&(ta(a,e,i),Vr(a,e,i))}};function ay(e,a,i,l,d,f,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,x):a.prototype&&a.prototype.isPureReactComponent?!Br(i,l)||!Br(d,f):!0}function sy(e,a,i,l){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,l),a.state!==e&&xp.enqueueReplaceState(a,a.state,null)}function $i(e,a){var i=a;if("ref"in a){i={};for(var l in a)l!=="ref"&&(i[l]=a[l])}if(e=e.defaultProps){i===a&&(i=v({},i));for(var d in e)i[d]===void 0&&(i[d]=e[d])}return i}function iy(e){pc(e)}function oy(e){console.error(e)}function ry(e){pc(e)}function Bc(e,a){try{var i=e.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function ly(e,a,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function vp(e,a,i){return i=Qs(i),i.tag=3,i.payload={element:null},i.callback=function(){Bc(e,a)},i}function cy(e){return e=Qs(e),e.tag=3,e}function uy(e,a,i,l){var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;e.payload=function(){return d(f)},e.callback=function(){ly(a,i,l)}}var x=i.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){ly(a,i,l),typeof d!="function"&&(si===null?si=new Set([this]):si.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function ww(e,a,i,l,d){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=i.alternate,a!==null&&Mo(a,i,d,!0),i=la.current,i!==null){switch(i.tag){case 31:case 13:return ka===null?Wc():i.alternate===null&&Yt===0&&(Yt=3),i.flags&=-257,i.flags|=65536,i.lanes=d,l===wc?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([l]):a.add(l),Fp(e,l,d)),!1;case 22:return i.flags|=65536,l===wc?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([l]):i.add(l)),Fp(e,l,d)),!1}throw Error(o(435,i.tag))}return Fp(e,l,d),Wc(),!1}if(lt)return a=la.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=d,l!==Od&&(e=Error(o(422),{cause:l}),Or(_a(e,i)))):(l!==Od&&(a=Error(o(423),{cause:l}),Or(_a(a,i))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=_a(l,i),d=vp(e.stateNode,l,d),Xd(e,d),Yt!==4&&(Yt=2)),!1;var f=Error(o(520),{cause:l});if(f=_a(f,i),al===null?al=[f]:al.push(f),Yt!==4&&(Yt=2),a===null)return!0;l=_a(l,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,e=d&-d,i.lanes|=e,e=vp(i.stateNode,l,e),Xd(i,e),!1;case 1:if(a=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(si===null||!si.has(f))))return i.flags|=65536,d&=-d,i.lanes|=d,d=cy(d),uy(d,e,i,l),Xd(i,d),!1}i=i.return}while(i!==null);return!1}var bp=Error(o(461)),pn=!1;function zn(e,a,i,l){a.child=e===null?hg(a,null,i,l):Pi(a,e.child,i,l)}function dy(e,a,i,l,d){i=i.render;var f=a.ref;if("ref"in l){var x={};for(var w in l)w!=="ref"&&(x[w]=l[w])}else x=l;return Ui(a),l=tp(e,a,i,x,f,d),w=np(),e!==null&&!pn?(ap(e,a,d),bs(e,a,d)):(lt&&w&&Ud(a),a.flags|=1,zn(e,a,l,d),a.child)}function py(e,a,i,l,d){if(e===null){var f=i.type;return typeof f=="function"&&!Dd(f)&&f.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=f,fy(e,a,f,l,d)):(e=gc(i.type,null,l,a,a.mode,d),e.ref=a.ref,e.return=a,a.child=e)}if(f=e.child,!Mp(e,d)){var x=f.memoizedProps;if(i=i.compare,i=i!==null?i:Br,i(x,l)&&e.ref===a.ref)return bs(e,a,d)}return a.flags|=1,e=hs(f,l),e.ref=a.ref,e.return=a,a.child=e}function fy(e,a,i,l,d){if(e!==null){var f=e.memoizedProps;if(Br(f,l)&&e.ref===a.ref)if(pn=!1,a.pendingProps=l=f,Mp(e,d))(e.flags&131072)!==0&&(pn=!0);else return a.lanes=e.lanes,bs(e,a,d)}return Sp(e,a,i,l,d)}function hy(e,a,i,l){var d=l.children,f=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(l=a.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,a.child=null;return my(e,a,f,i,l)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&bc(a,f!==null?f.cachePool:null),f!==null?yg(a,f):Qd(),xg(a);else return l=a.lanes=536870912,my(e,a,f!==null?f.baseLanes|i:i,i,l)}else f!==null?(bc(a,f.cachePool),yg(a,f),ei(),a.memoizedState=null):(e!==null&&bc(a,null),Qd(),ei());return zn(e,a,d,i),a.child}function Kr(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function my(e,a,i,l,d){var f=qd();return f=f===null?null:{parent:un._currentValue,pool:f},a.memoizedState={baseLanes:i,cachePool:f},e!==null&&bc(a,null),Qd(),xg(a),e!==null&&Mo(e,a,l,!0),a.childLanes=d,null}function Uc(e,a){return a=Oc({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function gy(e,a,i){return Pi(a,e.child,null,i),e=Uc(a,a.pendingProps),e.flags|=2,ca(a),a.memoizedState=null,e}function _w(e,a,i){var l=a.pendingProps,d=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(lt){if(l.mode==="hidden")return e=Uc(a,l),a.lanes=536870912,Kr(null,e);if(Jd(a),(e=Ot)?(e=Mx(e,Ta),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Gs!==null?{id:Xa,overflow:Ka}:null,retryLane:536870912,hydrationErrors:null},i=Jm(e),i.return=a,a.child=i,Nn=a,Ot=null)):e=null,e===null)throw Ys(a);return a.lanes=536870912,null}return Uc(a,l)}var f=e.memoizedState;if(f!==null){var x=f.dehydrated;if(Jd(a),d)if(a.flags&256)a.flags&=-257,a=gy(e,a,i);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(o(558));else if(pn||Mo(e,a,i,!1),d=(i&e.childLanes)!==0,pn||d){if(l=Nt,l!==null&&(x=ot(l,i),x!==0&&x!==f.retryLane))throw f.retryLane=x,Ni(e,x),ta(l,e,x),bp;Wc(),a=gy(e,a,i)}else e=f.treeContext,Ot=Ma(x.nextSibling),Nn=a,lt=!0,Ws=null,Ta=!1,e!==null&&ng(a,e),a=Uc(a,l),a.flags|=4096;return a}return e=hs(e.child,{mode:l.mode,children:l.children}),e.ref=a.ref,a.child=e,e.return=a,e}function Ic(e,a){var i=a.ref;if(i===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(a.flags|=4194816)}}function Sp(e,a,i,l,d){return Ui(a),i=tp(e,a,i,l,void 0,d),l=np(),e!==null&&!pn?(ap(e,a,d),bs(e,a,d)):(lt&&l&&Ud(a),a.flags|=1,zn(e,a,i,d),a.child)}function yy(e,a,i,l,d,f){return Ui(a),a.updateQueue=null,i=bg(a,l,i,d),vg(e),l=np(),e!==null&&!pn?(ap(e,a,f),bs(e,a,f)):(lt&&l&&Ud(a),a.flags|=1,zn(e,a,i,f),a.child)}function xy(e,a,i,l,d){if(Ui(a),a.stateNode===null){var f=Co,x=i.contextType;typeof x=="object"&&x!==null&&(f=Dn(x)),f=new i(l,f),a.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=xp,a.stateNode=f,f._reactInternals=a,f=a.stateNode,f.props=l,f.state=a.memoizedState,f.refs={},Wd(a),x=i.contextType,f.context=typeof x=="object"&&x!==null?Dn(x):Co,f.state=a.memoizedState,x=i.getDerivedStateFromProps,typeof x=="function"&&(yp(a,i,x,l),f.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(x=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),x!==f.state&&xp.enqueueReplaceState(f,f.state,null),qr(a,l,f,d),Fr(),f.state=a.memoizedState),typeof f.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(e===null){f=a.stateNode;var w=a.memoizedProps,k=$i(i,w);f.props=k;var O=f.context,K=i.contextType;x=Co,typeof K=="object"&&K!==null&&(x=Dn(K));var ee=i.getDerivedStateFromProps;K=typeof ee=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=a.pendingProps!==w,K||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||O!==x)&&sy(a,f,l,x),Ks=!1;var H=a.memoizedState;f.state=H,qr(a,l,f,d),Fr(),O=a.memoizedState,w||H!==O||Ks?(typeof ee=="function"&&(yp(a,i,ee,l),O=a.memoizedState),(k=Ks||ay(a,i,k,l,H,O,x))?(K||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(a.flags|=4194308)):(typeof f.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=O),f.props=l,f.state=O,f.context=x,l=k):(typeof f.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{f=a.stateNode,Yd(e,a),x=a.memoizedProps,K=$i(i,x),f.props=K,ee=a.pendingProps,H=f.context,O=i.contextType,k=Co,typeof O=="object"&&O!==null&&(k=Dn(O)),w=i.getDerivedStateFromProps,(O=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x!==ee||H!==k)&&sy(a,f,l,k),Ks=!1,H=a.memoizedState,f.state=H,qr(a,l,f,d),Fr();var F=a.memoizedState;x!==ee||H!==F||Ks||e!==null&&e.dependencies!==null&&xc(e.dependencies)?(typeof w=="function"&&(yp(a,i,w,l),F=a.memoizedState),(K=Ks||ay(a,i,K,l,H,F,k)||e!==null&&e.dependencies!==null&&xc(e.dependencies))?(O||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,F,k),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,F,k)),typeof f.componentDidUpdate=="function"&&(a.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof f.componentDidUpdate!="function"||x===e.memoizedProps&&H===e.memoizedState||(a.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&H===e.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=F),f.props=l,f.state=F,f.context=k,l=K):(typeof f.componentDidUpdate!="function"||x===e.memoizedProps&&H===e.memoizedState||(a.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&H===e.memoizedState||(a.flags|=1024),l=!1)}return f=l,Ic(e,a),l=(a.flags&128)!==0,f||l?(f=a.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:f.render(),a.flags|=1,e!==null&&l?(a.child=Pi(a,e.child,null,d),a.child=Pi(a,null,i,d)):zn(e,a,i,d),a.memoizedState=f.state,e=a.child):e=bs(e,a,d),e}function vy(e,a,i,l){return zi(),a.flags|=256,zn(e,a,i,l),a.child}var wp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _p(e){return{baseLanes:e,cachePool:lg()}}function Cp(e,a,i){return e=e!==null?e.childLanes&~i:0,a&&(e|=da),e}function by(e,a,i){var l=a.pendingProps,d=!1,f=(a.flags&128)!==0,x;if((x=f)||(x=e!==null&&e.memoizedState===null?!1:(nn.current&2)!==0),x&&(d=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,e===null){if(lt){if(d?Js(a):ei(),(e=Ot)?(e=Mx(e,Ta),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Gs!==null?{id:Xa,overflow:Ka}:null,retryLane:536870912,hydrationErrors:null},i=Jm(e),i.return=a,a.child=i,Nn=a,Ot=null)):e=null,e===null)throw Ys(a);return rf(e)?a.lanes=32:a.lanes=536870912,null}var w=l.children;return l=l.fallback,d?(ei(),d=a.mode,w=Oc({mode:"hidden",children:w},d),l=Di(l,d,i,null),w.return=a,l.return=a,w.sibling=l,a.child=w,l=a.child,l.memoizedState=_p(i),l.childLanes=Cp(e,x,i),a.memoizedState=wp,Kr(null,l)):(Js(a),jp(a,w))}var k=e.memoizedState;if(k!==null&&(w=k.dehydrated,w!==null)){if(f)a.flags&256?(Js(a),a.flags&=-257,a=Tp(e,a,i)):a.memoizedState!==null?(ei(),a.child=e.child,a.flags|=128,a=null):(ei(),w=l.fallback,d=a.mode,l=Oc({mode:"visible",children:l.children},d),w=Di(w,d,i,null),w.flags|=2,l.return=a,w.return=a,l.sibling=w,a.child=l,Pi(a,e.child,null,i),l=a.child,l.memoizedState=_p(i),l.childLanes=Cp(e,x,i),a.memoizedState=wp,a=Kr(null,l));else if(Js(a),rf(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var O=x.dgst;x=O,l=Error(o(419)),l.stack="",l.digest=x,Or({value:l,source:null,stack:null}),a=Tp(e,a,i)}else if(pn||Mo(e,a,i,!1),x=(i&e.childLanes)!==0,pn||x){if(x=Nt,x!==null&&(l=ot(x,i),l!==0&&l!==k.retryLane))throw k.retryLane=l,Ni(e,l),ta(x,e,l),bp;of(w)||Wc(),a=Tp(e,a,i)}else of(w)?(a.flags|=192,a.child=e.child,a=null):(e=k.treeContext,Ot=Ma(w.nextSibling),Nn=a,lt=!0,Ws=null,Ta=!1,e!==null&&ng(a,e),a=jp(a,l.children),a.flags|=4096);return a}return d?(ei(),w=l.fallback,d=a.mode,k=e.child,O=k.sibling,l=hs(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,O!==null?w=hs(O,w):(w=Di(w,d,i,null),w.flags|=2),w.return=a,l.return=a,l.sibling=w,a.child=l,Kr(null,l),l=a.child,w=e.child.memoizedState,w===null?w=_p(i):(d=w.cachePool,d!==null?(k=un._currentValue,d=d.parent!==k?{parent:k,pool:k}:d):d=lg(),w={baseLanes:w.baseLanes|i,cachePool:d}),l.memoizedState=w,l.childLanes=Cp(e,x,i),a.memoizedState=wp,Kr(e.child,l)):(Js(a),i=e.child,e=i.sibling,i=hs(i,{mode:"visible",children:l.children}),i.return=a,i.sibling=null,e!==null&&(x=a.deletions,x===null?(a.deletions=[e],a.flags|=16):x.push(e)),a.child=i,a.memoizedState=null,i)}function jp(e,a){return a=Oc({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function Oc(e,a){return e=ra(22,e,null,a),e.lanes=0,e}function Tp(e,a,i){return Pi(a,e.child,null,i),e=jp(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function Sy(e,a,i){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a),Hd(e.return,a,i)}function kp(e,a,i,l,d,f){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:d,treeForkCount:f}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=i,x.tailMode=d,x.treeForkCount=f)}function wy(e,a,i){var l=a.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var x=nn.current,w=(x&2)!==0;if(w?(x=x&1|2,a.flags|=128):x&=1,je(nn,x),zn(e,a,l,i),l=lt?Ir:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sy(e,i,a);else if(e.tag===19)Sy(e,i,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(i=a.child,d=null;i!==null;)e=i.alternate,e!==null&&Tc(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=a.child,a.child=null):(d=i.sibling,i.sibling=null),kp(a,!1,d,i,f,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,d=a.child,a.child=null;d!==null;){if(e=d.alternate,e!==null&&Tc(e)===null){a.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}kp(a,!0,i,null,f,l);break;case"together":kp(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function bs(e,a,i){if(e!==null&&(a.dependencies=e.dependencies),ai|=a.lanes,(i&a.childLanes)===0)if(e!==null){if(Mo(e,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(o(153));if(a.child!==null){for(e=a.child,i=hs(e,e.pendingProps),a.child=i,i.return=a;e.sibling!==null;)e=e.sibling,i=i.sibling=hs(e,e.pendingProps),i.return=a;i.sibling=null}return a.child}function Mp(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&xc(e)))}function Cw(e,a,i){switch(a.tag){case 3:Ct(a,a.stateNode.containerInfo),Xs(a,un,e.memoizedState.cache),zi();break;case 27:case 5:jt(a);break;case 4:Ct(a,a.stateNode.containerInfo);break;case 10:Xs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Jd(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(Js(a),a.flags|=128,null):(i&a.child.childLanes)!==0?by(e,a,i):(Js(a),e=bs(e,a,i),e!==null?e.sibling:null);Js(a);break;case 19:var d=(e.flags&128)!==0;if(l=(i&a.childLanes)!==0,l||(Mo(e,a,i,!1),l=(i&a.childLanes)!==0),d){if(l)return wy(e,a,i);a.flags|=128}if(d=a.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),je(nn,nn.current),l)break;return null;case 22:return a.lanes=0,hy(e,a,i,a.pendingProps);case 24:Xs(a,un,e.memoizedState.cache)}return bs(e,a,i)}function _y(e,a,i){if(e!==null)if(e.memoizedProps!==a.pendingProps)pn=!0;else{if(!Mp(e,i)&&(a.flags&128)===0)return pn=!1,Cw(e,a,i);pn=(e.flags&131072)!==0}else pn=!1,lt&&(a.flags&1048576)!==0&&tg(a,Ir,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(e=Oi(a.elementType),a.type=e,typeof e=="function")Dd(e)?(l=$i(e,l),a.tag=1,a=xy(null,a,e,l,i)):(a.tag=0,a=Sp(null,a,e,l,i));else{if(e!=null){var d=e.$$typeof;if(d===X){a.tag=11,a=dy(null,a,e,l,i);break e}else if(d===re){a.tag=14,a=py(null,a,e,l,i);break e}}throw a=Re(e)||e,Error(o(306,a,""))}}return a;case 0:return Sp(e,a,a.type,a.pendingProps,i);case 1:return l=a.type,d=$i(l,a.pendingProps),xy(e,a,l,d,i);case 3:e:{if(Ct(a,a.stateNode.containerInfo),e===null)throw Error(o(387));l=a.pendingProps;var f=a.memoizedState;d=f.element,Yd(e,a),qr(a,l,null,i);var x=a.memoizedState;if(l=x.cache,Xs(a,un,l),l!==f.cache&&$d(a,[un],i,!0),Fr(),l=x.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=f,a.memoizedState=f,a.flags&256){a=vy(e,a,l,i);break e}else if(l!==d){d=_a(Error(o(424)),a),Or(d),a=vy(e,a,l,i);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ot=Ma(e.firstChild),Nn=a,lt=!0,Ws=null,Ta=!0,i=hg(a,null,l,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(zi(),l===d){a=bs(e,a,i);break e}zn(e,a,l,i)}a=a.child}return a;case 26:return Ic(e,a),e===null?(i=zx(a.type,null,a.pendingProps,null))?a.memoizedState=i:lt||(i=a.type,e=a.pendingProps,l=eu(he.current).createElement(i),l[Mt]=a,l[An]=e,Bn(l,i,e),cn(l),a.stateNode=l):a.memoizedState=zx(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return jt(a),e===null&&lt&&(l=a.stateNode=Rx(a.type,a.pendingProps,he.current),Nn=a,Ta=!0,d=Ot,li(a.type)?(lf=d,Ot=Ma(l.firstChild)):Ot=d),zn(e,a,a.pendingProps.children,i),Ic(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&lt&&((d=l=Ot)&&(l=e_(l,a.type,a.pendingProps,Ta),l!==null?(a.stateNode=l,Nn=a,Ot=Ma(l.firstChild),Ta=!1,d=!0):d=!1),d||Ys(a)),jt(a),d=a.type,f=a.pendingProps,x=e!==null?e.memoizedProps:null,l=f.children,nf(d,f)?l=null:x!==null&&nf(d,x)&&(a.flags|=32),a.memoizedState!==null&&(d=tp(e,a,mw,null,null,i),dl._currentValue=d),Ic(e,a),zn(e,a,l,i),a.child;case 6:return e===null&&lt&&((e=i=Ot)&&(i=t_(i,a.pendingProps,Ta),i!==null?(a.stateNode=i,Nn=a,Ot=null,e=!0):e=!1),e||Ys(a)),null;case 13:return by(e,a,i);case 4:return Ct(a,a.stateNode.containerInfo),l=a.pendingProps,e===null?a.child=Pi(a,null,l,i):zn(e,a,l,i),a.child;case 11:return dy(e,a,a.type,a.pendingProps,i);case 7:return zn(e,a,a.pendingProps,i),a.child;case 8:return zn(e,a,a.pendingProps.children,i),a.child;case 12:return zn(e,a,a.pendingProps.children,i),a.child;case 10:return l=a.pendingProps,Xs(a,a.type,l.value),zn(e,a,l.children,i),a.child;case 9:return d=a.type._context,l=a.pendingProps.children,Ui(a),d=Dn(d),l=l(d),a.flags|=1,zn(e,a,l,i),a.child;case 14:return py(e,a,a.type,a.pendingProps,i);case 15:return fy(e,a,a.type,a.pendingProps,i);case 19:return wy(e,a,i);case 31:return _w(e,a,i);case 22:return hy(e,a,i,a.pendingProps);case 24:return Ui(a),l=Dn(un),e===null?(d=qd(),d===null&&(d=Nt,f=Vd(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=i),d=f),a.memoizedState={parent:l,cache:d},Wd(a),Xs(a,un,d)):((e.lanes&i)!==0&&(Yd(e,a),qr(a,null,null,i),Fr()),d=e.memoizedState,f=a.memoizedState,d.parent!==l?(d={parent:l,cache:l},a.memoizedState=d,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=d),Xs(a,un,l)):(l=f.cache,Xs(a,un,l),l!==d.cache&&$d(a,[un],i,!0))),zn(e,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function Ss(e){e.flags|=4}function Ep(e,a,i,l,d){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Ky())e.flags|=8192;else throw Li=wc,Gd}else e.flags&=-16777217}function Cy(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Lx(a))if(Ky())e.flags|=8192;else throw Li=wc,Gd}function Lc(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?ke():536870912,e.lanes|=a,Po|=a)}function Qr(e,a){if(!lt)switch(e.tailMode){case"hidden":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Lt(e){var a=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(a)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=i,a}function jw(e,a,i){var l=a.pendingProps;switch(Id(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(a),null;case 1:return Lt(a),null;case 3:return i=a.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ys(un),Bt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ko(a)?Ss(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ld())),Lt(a),null;case 26:var d=a.type,f=a.memoizedState;return e===null?(Ss(a),f!==null?(Lt(a),Cy(a,f)):(Lt(a),Ep(a,d,null,l,i))):f?f!==e.memoizedState?(Ss(a),Lt(a),Cy(a,f)):(Lt(a),a.flags&=-16777217):(e=e.memoizedProps,e!==l&&Ss(a),Lt(a),Ep(a,d,e,l,i)),null;case 27:if(rn(a),i=he.current,d=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==l&&Ss(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return Lt(a),null}e=ie.current,ko(a)?ag(a):(e=Rx(d,l,i),a.stateNode=e,Ss(a))}return Lt(a),null;case 5:if(rn(a),d=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==l&&Ss(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return Lt(a),null}if(f=ie.current,ko(a))ag(a);else{var x=eu(he.current);switch(f){case 1:f=x.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=x.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=x.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=x.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=x.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?x.createElement(d,{is:l.is}):x.createElement(d)}}f[Mt]=a,f[An]=l;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)f.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=f;e:switch(Bn(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ss(a)}}return Lt(a),Ep(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,i),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==l&&Ss(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(o(166));if(e=he.current,ko(a)){if(e=a.stateNode,i=a.memoizedProps,l=null,d=Nn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[Mt]=a,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||bx(e.nodeValue,i)),e||Ys(a,!0)}else e=eu(e).createTextNode(l),e[Mt]=a,a.stateNode=e}return Lt(a),null;case 31:if(i=a.memoizedState,e===null||e.memoizedState!==null){if(l=ko(a),i!==null){if(e===null){if(!l)throw Error(o(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[Mt]=a}else zi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),e=!1}else i=Ld(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return a.flags&256?(ca(a),a):(ca(a),null);if((a.flags&128)!==0)throw Error(o(558))}return Lt(a),null;case 13:if(l=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=ko(a),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[Mt]=a}else zi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),d=!1}else d=Ld(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return a.flags&256?(ca(a),a):(ca(a),null)}return ca(a),(a.flags&128)!==0?(a.lanes=i,a):(i=l!==null,e=e!==null&&e.memoizedState!==null,i&&(l=a.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),i!==e&&i&&(a.child.flags|=8192),Lc(a,a.updateQueue),Lt(a),null);case 4:return Bt(),e===null&&Qp(a.stateNode.containerInfo),Lt(a),null;case 10:return ys(a.type),Lt(a),null;case 19:if(Ae(nn),l=a.memoizedState,l===null)return Lt(a),null;if(d=(a.flags&128)!==0,f=l.rendering,f===null)if(d)Qr(l,!1);else{if(Yt!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(f=Tc(e),f!==null){for(a.flags|=128,Qr(l,!1),e=f.updateQueue,a.updateQueue=e,Lc(a,e),a.subtreeFlags=0,e=i,i=a.child;i!==null;)Zm(i,e),i=i.sibling;return je(nn,nn.current&1|2),lt&&ms(a,l.treeForkCount),a.child}e=e.sibling}l.tail!==null&&oe()>Fc&&(a.flags|=128,d=!0,Qr(l,!1),a.lanes=4194304)}else{if(!d)if(e=Tc(f),e!==null){if(a.flags|=128,d=!0,e=e.updateQueue,a.updateQueue=e,Lc(a,e),Qr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!lt)return Lt(a),null}else 2*oe()-l.renderingStartTime>Fc&&i!==536870912&&(a.flags|=128,d=!0,Qr(l,!1),a.lanes=4194304);l.isBackwards?(f.sibling=a.child,a.child=f):(e=l.last,e!==null?e.sibling=f:a.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=oe(),e.sibling=null,i=nn.current,je(nn,d?i&1|2:i&1),lt&&ms(a,l.treeForkCount),e):(Lt(a),null);case 22:case 23:return ca(a),Zd(),l=a.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(i&536870912)!==0&&(a.flags&128)===0&&(Lt(a),a.subtreeFlags&6&&(a.flags|=8192)):Lt(a),i=a.updateQueue,i!==null&&Lc(a,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==i&&(a.flags|=2048),e!==null&&Ae(Ii),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),ys(un),Lt(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function Tw(e,a){switch(Id(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return ys(un),Bt(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return rn(a),null;case 31:if(a.memoizedState!==null){if(ca(a),a.alternate===null)throw Error(o(340));zi()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(ca(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(o(340));zi()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return Ae(nn),null;case 4:return Bt(),null;case 10:return ys(a.type),null;case 22:case 23:return ca(a),Zd(),e!==null&&Ae(Ii),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return ys(un),null;case 25:return null;default:return null}}function jy(e,a){switch(Id(a),a.tag){case 3:ys(un),Bt();break;case 26:case 27:case 5:rn(a);break;case 4:Bt();break;case 31:a.memoizedState!==null&&ca(a);break;case 13:ca(a);break;case 19:Ae(nn);break;case 10:ys(a.type);break;case 22:case 23:ca(a),Zd(),e!==null&&Ae(Ii);break;case 24:ys(un)}}function Zr(e,a){try{var i=a.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var d=l.next;i=d;do{if((i.tag&e)===e){l=void 0;var f=i.create,x=i.inst;l=f(),x.destroy=l}i=i.next}while(i!==d)}}catch(w){bt(a,a.return,w)}}function ti(e,a,i){try{var l=a.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&e)===e){var x=l.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,d=a;var k=i,O=w;try{O()}catch(K){bt(d,k,K)}}}l=l.next}while(l!==f)}}catch(K){bt(a,a.return,K)}}function Ty(e){var a=e.updateQueue;if(a!==null){var i=e.stateNode;try{gg(a,i)}catch(l){bt(e,e.return,l)}}}function ky(e,a,i){i.props=$i(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){bt(e,a,l)}}function Jr(e,a){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(d){bt(e,a,d)}}function Qa(e,a){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(d){bt(e,a,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(d){bt(e,a,d)}else i.current=null}function My(e){var a=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(d){bt(e,e.return,d)}}function Ap(e,a,i){try{var l=e.stateNode;Yw(l,e.type,i,a),l[An]=a}catch(d){bt(e,e.return,d)}}function Ey(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&li(e.type)||e.tag===4}function Rp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ey(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&li(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Np(e,a,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,a?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,a):(a=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.appendChild(e),i=i._reactRootContainer,i!=null||a.onclick!==null||(a.onclick=xa));else if(l!==4&&(l===27&&li(e.type)&&(i=e.stateNode,a=null),e=e.child,e!==null))for(Np(e,a,i),e=e.sibling;e!==null;)Np(e,a,i),e=e.sibling}function Pc(e,a,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,a?i.insertBefore(e,a):i.appendChild(e);else if(l!==4&&(l===27&&li(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Pc(e,a,i),e=e.sibling;e!==null;)Pc(e,a,i),e=e.sibling}function Ay(e){var a=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,d=a.attributes;d.length;)a.removeAttributeNode(d[0]);Bn(a,l,i),a[Mt]=e,a[An]=i}catch(f){bt(e,e.return,f)}}var ws=!1,fn=!1,Dp=!1,Ry=typeof WeakSet=="function"?WeakSet:Set,Tn=null;function kw(e,a){if(e=e.containerInfo,ef=ru,e=Vm(e),Td(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var x=0,w=-1,k=-1,O=0,K=0,ee=e,H=null;t:for(;;){for(var F;ee!==i||d!==0&&ee.nodeType!==3||(w=x+d),ee!==f||l!==0&&ee.nodeType!==3||(k=x+l),ee.nodeType===3&&(x+=ee.nodeValue.length),(F=ee.firstChild)!==null;)H=ee,ee=F;for(;;){if(ee===e)break t;if(H===i&&++O===d&&(w=x),H===f&&++K===l&&(k=x),(F=ee.nextSibling)!==null)break;ee=H,H=ee.parentNode}ee=F}i=w===-1||k===-1?null:{start:w,end:k}}else i=null}i=i||{start:0,end:0}}else i=null;for(tf={focusedElem:e,selectionRange:i},ru=!1,Tn=a;Tn!==null;)if(a=Tn,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,Tn=e;else for(;Tn!==null;){switch(a=Tn,f=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)d=e[i],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=a,d=f.memoizedProps,f=f.memoizedState,l=i.stateNode;try{var be=$i(i.type,d);e=l.getSnapshotBeforeUpdate(be,f),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ie){bt(i,i.return,Ie)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,i=e.nodeType,i===9)sf(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":sf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=a.sibling,e!==null){e.return=a.return,Tn=e;break}Tn=a.return}}function Ny(e,a,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:Cs(e,i),l&4&&Zr(5,i);break;case 1:if(Cs(e,i),l&4)if(e=i.stateNode,a===null)try{e.componentDidMount()}catch(x){bt(i,i.return,x)}else{var d=$i(i.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(d,a,e.__reactInternalSnapshotBeforeUpdate)}catch(x){bt(i,i.return,x)}}l&64&&Ty(i),l&512&&Jr(i,i.return);break;case 3:if(Cs(e,i),l&64&&(e=i.updateQueue,e!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}try{gg(e,a)}catch(x){bt(i,i.return,x)}}break;case 27:a===null&&l&4&&Ay(i);case 26:case 5:Cs(e,i),a===null&&l&4&&My(i),l&512&&Jr(i,i.return);break;case 12:Cs(e,i);break;case 31:Cs(e,i),l&4&&By(e,i);break;case 13:Cs(e,i),l&4&&Uy(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Uw.bind(null,i),n_(e,i))));break;case 22:if(l=i.memoizedState!==null||ws,!l){a=a!==null&&a.memoizedState!==null||fn,d=ws;var f=fn;ws=l,(fn=a)&&!f?js(e,i,(i.subtreeFlags&8772)!==0):Cs(e,i),ws=d,fn=f}break;case 30:break;default:Cs(e,i)}}function Dy(e){var a=e.alternate;a!==null&&(e.alternate=null,Dy(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&uo(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pt=null,Qn=!1;function _s(e,a,i){for(i=i.child;i!==null;)zy(e,a,i),i=i.sibling}function zy(e,a,i){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(pe,i)}catch{}switch(i.tag){case 26:fn||Qa(i,a),_s(e,a,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:fn||Qa(i,a);var l=Pt,d=Qn;li(i.type)&&(Pt=i.stateNode,Qn=!1),_s(e,a,i),ll(i.stateNode),Pt=l,Qn=d;break;case 5:fn||Qa(i,a);case 6:if(l=Pt,d=Qn,Pt=null,_s(e,a,i),Pt=l,Qn=d,Pt!==null)if(Qn)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(i.stateNode)}catch(f){bt(i,a,f)}else try{Pt.removeChild(i.stateNode)}catch(f){bt(i,a,f)}break;case 18:Pt!==null&&(Qn?(e=Pt,Tx(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Yo(e)):Tx(Pt,i.stateNode));break;case 4:l=Pt,d=Qn,Pt=i.stateNode.containerInfo,Qn=!0,_s(e,a,i),Pt=l,Qn=d;break;case 0:case 11:case 14:case 15:ti(2,i,a),fn||ti(4,i,a),_s(e,a,i);break;case 1:fn||(Qa(i,a),l=i.stateNode,typeof l.componentWillUnmount=="function"&&ky(i,a,l)),_s(e,a,i);break;case 21:_s(e,a,i);break;case 22:fn=(l=fn)||i.memoizedState!==null,_s(e,a,i),fn=l;break;default:_s(e,a,i)}}function By(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Yo(e)}catch(i){bt(a,a.return,i)}}}function Uy(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Yo(e)}catch(i){bt(a,a.return,i)}}function Mw(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new Ry),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new Ry),a;default:throw Error(o(435,e.tag))}}function Hc(e,a){var i=Mw(e);a.forEach(function(l){if(!i.has(l)){i.add(l);var d=Iw.bind(null,e,l);l.then(d,d)}})}function Zn(e,a){var i=a.deletions;if(i!==null)for(var l=0;l<i.length;l++){var d=i[l],f=e,x=a,w=x;e:for(;w!==null;){switch(w.tag){case 27:if(li(w.type)){Pt=w.stateNode,Qn=!1;break e}break;case 5:Pt=w.stateNode,Qn=!1;break e;case 3:case 4:Pt=w.stateNode.containerInfo,Qn=!0;break e}w=w.return}if(Pt===null)throw Error(o(160));zy(f,x,d),Pt=null,Qn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Iy(a,e),a=a.sibling}var za=null;function Iy(e,a){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Zn(a,e),Jn(e),l&4&&(ti(3,e,e.return),Zr(3,e),ti(5,e,e.return));break;case 1:Zn(a,e),Jn(e),l&512&&(fn||i===null||Qa(i,i.return)),l&64&&ws&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var d=za;if(Zn(a,e),Jn(e),l&512&&(fn||i===null||Qa(i,i.return)),l&4){var f=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[bi]||f[Mt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),Bn(f,l,i),f[Mt]=e,cn(f),l=f;break e;case"link":var x=Ix("link","href",d).get(l+(i.href||""));if(x){for(var w=0;w<x.length;w++)if(f=x[w],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){x.splice(w,1);break t}}f=d.createElement(l),Bn(f,l,i),d.head.appendChild(f);break;case"meta":if(x=Ix("meta","content",d).get(l+(i.content||""))){for(w=0;w<x.length;w++)if(f=x[w],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){x.splice(w,1);break t}}f=d.createElement(l),Bn(f,l,i),d.head.appendChild(f);break;default:throw Error(o(468,l))}f[Mt]=e,cn(f),l=f}e.stateNode=l}else Ox(d,e.type,e.stateNode);else e.stateNode=Ux(d,l,e.memoizedProps);else f!==l?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,l===null?Ox(d,e.type,e.stateNode):Ux(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Ap(e,e.memoizedProps,i.memoizedProps)}break;case 27:Zn(a,e),Jn(e),l&512&&(fn||i===null||Qa(i,i.return)),i!==null&&l&4&&Ap(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Zn(a,e),Jn(e),l&512&&(fn||i===null||Qa(i,i.return)),e.flags&32){d=e.stateNode;try{en(d,"")}catch(be){bt(e,e.return,be)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,Ap(e,d,i!==null?i.memoizedProps:d)),l&1024&&(Dp=!0);break;case 6:if(Zn(a,e),Jn(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(be){bt(e,e.return,be)}}break;case 3:if(au=null,d=za,za=tu(a.containerInfo),Zn(a,e),za=d,Jn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Yo(a.containerInfo)}catch(be){bt(e,e.return,be)}Dp&&(Dp=!1,Oy(e));break;case 4:l=za,za=tu(e.stateNode.containerInfo),Zn(a,e),Jn(e),za=l;break;case 12:Zn(a,e),Jn(e);break;case 31:Zn(a,e),Jn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Hc(e,l)));break;case 13:Zn(a,e),Jn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Vc=oe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Hc(e,l)));break;case 22:d=e.memoizedState!==null;var k=i!==null&&i.memoizedState!==null,O=ws,K=fn;if(ws=O||d,fn=K||k,Zn(a,e),fn=K,ws=O,Jn(e),l&8192)e:for(a=e.stateNode,a._visibility=d?a._visibility&-2:a._visibility|1,d&&(i===null||k||ws||fn||Vi(e)),i=null,a=e;;){if(a.tag===5||a.tag===26){if(i===null){k=i=a;try{if(f=k.stateNode,d)x=f.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=k.stateNode;var ee=k.memoizedProps.style,H=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;w.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(be){bt(k,k.return,be)}}}else if(a.tag===6){if(i===null){k=a;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(be){bt(k,k.return,be)}}}else if(a.tag===18){if(i===null){k=a;try{var F=k.stateNode;d?kx(F,!0):kx(k.stateNode,!1)}catch(be){bt(k,k.return,be)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,Hc(e,i))));break;case 19:Zn(a,e),Jn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Hc(e,l)));break;case 30:break;case 21:break;default:Zn(a,e),Jn(e)}}function Jn(e){var a=e.flags;if(a&2){try{for(var i,l=e.return;l!==null;){if(Ey(l)){i=l;break}l=l.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var d=i.stateNode,f=Rp(e);Pc(e,f,d);break;case 5:var x=i.stateNode;i.flags&32&&(en(x,""),i.flags&=-33);var w=Rp(e);Pc(e,w,x);break;case 3:case 4:var k=i.stateNode.containerInfo,O=Rp(e);Np(e,O,k);break;default:throw Error(o(161))}}catch(K){bt(e,e.return,K)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Oy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Oy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function Cs(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Ny(e,a.alternate,a),a=a.sibling}function Vi(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:ti(4,a,a.return),Vi(a);break;case 1:Qa(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&ky(a,a.return,i),Vi(a);break;case 27:ll(a.stateNode);case 26:case 5:Qa(a,a.return),Vi(a);break;case 22:a.memoizedState===null&&Vi(a);break;case 30:Vi(a);break;default:Vi(a)}e=e.sibling}}function js(e,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,d=e,f=a,x=f.flags;switch(f.tag){case 0:case 11:case 15:js(d,f,i),Zr(4,f);break;case 1:if(js(d,f,i),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(O){bt(l,l.return,O)}if(l=f,d=l.updateQueue,d!==null){var w=l.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)mg(k[d],w)}catch(O){bt(l,l.return,O)}}i&&x&64&&Ty(f),Jr(f,f.return);break;case 27:Ay(f);case 26:case 5:js(d,f,i),i&&l===null&&x&4&&My(f),Jr(f,f.return);break;case 12:js(d,f,i);break;case 31:js(d,f,i),i&&x&4&&By(d,f);break;case 13:js(d,f,i),i&&x&4&&Uy(d,f);break;case 22:f.memoizedState===null&&js(d,f,i),Jr(f,f.return);break;case 30:break;default:js(d,f,i)}a=a.sibling}}function zp(e,a){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Lr(i))}function Bp(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Lr(e))}function Ba(e,a,i,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ly(e,a,i,l),a=a.sibling}function Ly(e,a,i,l){var d=a.flags;switch(a.tag){case 0:case 11:case 15:Ba(e,a,i,l),d&2048&&Zr(9,a);break;case 1:Ba(e,a,i,l);break;case 3:Ba(e,a,i,l),d&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Lr(e)));break;case 12:if(d&2048){Ba(e,a,i,l),e=a.stateNode;try{var f=a.memoizedProps,x=f.id,w=f.onPostCommit;typeof w=="function"&&w(x,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){bt(a,a.return,k)}}else Ba(e,a,i,l);break;case 31:Ba(e,a,i,l);break;case 13:Ba(e,a,i,l);break;case 23:break;case 22:f=a.stateNode,x=a.alternate,a.memoizedState!==null?f._visibility&2?Ba(e,a,i,l):el(e,a):f._visibility&2?Ba(e,a,i,l):(f._visibility|=2,Io(e,a,i,l,(a.subtreeFlags&10256)!==0||!1)),d&2048&&zp(x,a);break;case 24:Ba(e,a,i,l),d&2048&&Bp(a.alternate,a);break;default:Ba(e,a,i,l)}}function Io(e,a,i,l,d){for(d=d&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var f=e,x=a,w=i,k=l,O=x.flags;switch(x.tag){case 0:case 11:case 15:Io(f,x,w,k,d),Zr(8,x);break;case 23:break;case 22:var K=x.stateNode;x.memoizedState!==null?K._visibility&2?Io(f,x,w,k,d):el(f,x):(K._visibility|=2,Io(f,x,w,k,d)),d&&O&2048&&zp(x.alternate,x);break;case 24:Io(f,x,w,k,d),d&&O&2048&&Bp(x.alternate,x);break;default:Io(f,x,w,k,d)}a=a.sibling}}function el(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=e,l=a,d=l.flags;switch(l.tag){case 22:el(i,l),d&2048&&zp(l.alternate,l);break;case 24:el(i,l),d&2048&&Bp(l.alternate,l);break;default:el(i,l)}a=a.sibling}}var tl=8192;function Oo(e,a,i){if(e.subtreeFlags&tl)for(e=e.child;e!==null;)Py(e,a,i),e=e.sibling}function Py(e,a,i){switch(e.tag){case 26:Oo(e,a,i),e.flags&tl&&e.memoizedState!==null&&h_(i,za,e.memoizedState,e.memoizedProps);break;case 5:Oo(e,a,i);break;case 3:case 4:var l=za;za=tu(e.stateNode.containerInfo),Oo(e,a,i),za=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=tl,tl=16777216,Oo(e,a,i),tl=l):Oo(e,a,i));break;default:Oo(e,a,i)}}function Hy(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function nl(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var l=a[i];Tn=l,Vy(l,e)}Hy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$y(e),e=e.sibling}function $y(e){switch(e.tag){case 0:case 11:case 15:nl(e),e.flags&2048&&ti(9,e,e.return);break;case 3:nl(e);break;case 12:nl(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,$c(e)):nl(e);break;default:nl(e)}}function $c(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var l=a[i];Tn=l,Vy(l,e)}Hy(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:ti(8,a,a.return),$c(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,$c(a));break;default:$c(a)}e=e.sibling}}function Vy(e,a){for(;Tn!==null;){var i=Tn;switch(i.tag){case 0:case 11:case 15:ti(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Lr(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,Tn=l;else e:for(i=e;Tn!==null;){l=Tn;var d=l.sibling,f=l.return;if(Dy(l),l===i){Tn=null;break e}if(d!==null){d.return=f,Tn=d;break e}Tn=f}}}var Ew={getCacheForType:function(e){var a=Dn(un),i=a.data.get(e);return i===void 0&&(i=e(),a.data.set(e,i)),i},cacheSignal:function(){return Dn(un).controller.signal}},Aw=typeof WeakMap=="function"?WeakMap:Map,yt=0,Nt=null,Je=null,st=0,vt=0,ua=null,ni=!1,Lo=!1,Up=!1,Ts=0,Yt=0,ai=0,Fi=0,Ip=0,da=0,Po=0,al=null,ea=null,Op=!1,Vc=0,Fy=0,Fc=1/0,qc=null,si=null,bn=0,ii=null,Ho=null,ks=0,Lp=0,Pp=null,qy=null,sl=0,Hp=null;function pa(){return(yt&2)!==0&&st!==0?st&-st:B.T!==null?Wp():En()}function Gy(){if(da===0)if((st&536870912)===0||lt){var e=Ln;Ln<<=1,(Ln&3932160)===0&&(Ln=262144),da=e}else da=536870912;return e=la.current,e!==null&&(e.flags|=32),da}function ta(e,a,i){(e===Nt&&(vt===2||vt===9)||e.cancelPendingCommit!==null)&&($o(e,0),oi(e,st,da,!1)),ve(e,i),((yt&2)===0||e!==Nt)&&(e===Nt&&((yt&2)===0&&(Fi|=i),Yt===4&&oi(e,st,da,!1)),Za(e))}function Wy(e,a,i){if((yt&6)!==0)throw Error(o(327));var l=!i&&(a&127)===0&&(a&e.expiredLanes)===0||ae(e,a),d=l?Dw(e,a):Vp(e,a,!0),f=l;do{if(d===0){Lo&&!l&&oi(e,a,0,!1);break}else{if(i=e.current.alternate,f&&!Rw(i)){d=Vp(e,a,!1),f=!1;continue}if(d===2){if(f=a,e.errorRecoveryDisabledLanes&f)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var w=e;d=al;var k=w.current.memoizedState.isDehydrated;if(k&&($o(w,x).flags|=256),x=Vp(w,x,!1),x!==2){if(Up&&!k){w.errorRecoveryDisabledLanes|=f,Fi|=f,d=4;break e}f=ea,ea=d,f!==null&&(ea===null?ea=f:ea.push.apply(ea,f))}d=x}if(f=!1,d!==2)continue}}if(d===1){$o(e,0),oi(e,a,0,!0);break}e:{switch(l=e,f=d,f){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:oi(l,a,da,!ni);break e;case 2:ea=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(d=Vc+300-oe(),10<d)){if(oi(l,a,da,!ni),Bs(l,0,!0)!==0)break e;ks=a,l.timeoutHandle=Cx(Yy.bind(null,l,i,ea,qc,Op,a,da,Fi,Po,ni,f,"Throttled",-0,0),d);break e}Yy(l,i,ea,qc,Op,a,da,Fi,Po,ni,f,null,-0,0)}}break}while(!0);Za(e)}function Yy(e,a,i,l,d,f,x,w,k,O,K,ee,H,F){if(e.timeoutHandle=-1,ee=a.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xa},Py(a,f,ee);var be=(f&62914560)===f?Vc-oe():(f&4194048)===f?Fy-oe():0;if(be=m_(ee,be),be!==null){ks=f,e.cancelPendingCommit=be(nx.bind(null,e,a,f,i,l,d,x,w,k,K,ee,null,H,F)),oi(e,f,x,!O);return}}nx(e,a,f,i,l,d,x,w,k)}function Rw(e){for(var a=e;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var d=i[l],f=d.getSnapshot;d=d.value;try{if(!oa(f(),d))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function oi(e,a,i,l){a&=~Ip,a&=~Fi,e.suspendedLanes|=a,e.pingedLanes&=~a,l&&(e.warmLanes|=a),l=e.expirationTimes;for(var d=a;0<d;){var f=31-ut(d),x=1<<f;l[f]=-1,d&=~x}i!==0&&$e(e,i,a)}function Gc(){return(yt&6)===0?(il(0),!1):!0}function $p(){if(Je!==null){if(vt===0)var e=Je.return;else e=Je,gs=Bi=null,sp(e),No=null,Hr=0,e=Je;for(;e!==null;)jy(e.alternate,e),e=e.return;Je=null}}function $o(e,a){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Qw(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),ks=0,$p(),Nt=e,Je=i=hs(e.current,null),st=a,vt=0,ua=null,ni=!1,Lo=ae(e,a),Up=!1,Po=da=Ip=Fi=ai=Yt=0,ea=al=null,Op=!1,(a&8)!==0&&(a|=a&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=a;0<l;){var d=31-ut(l),f=1<<d;a|=e[d],l&=~f}return Ts=a,fc(),i}function Xy(e,a){Ye=null,B.H=Xr,a===Ro||a===Sc?(a=dg(),vt=3):a===Gd?(a=dg(),vt=4):vt=a===bp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ua=a,Je===null&&(Yt=1,Bc(e,_a(a,e.current)))}function Ky(){var e=la.current;return e===null?!0:(st&4194048)===st?ka===null:(st&62914560)===st||(st&536870912)!==0?e===ka:!1}function Qy(){var e=B.H;return B.H=Xr,e===null?Xr:e}function Zy(){var e=B.A;return B.A=Ew,e}function Wc(){Yt=4,ni||(st&4194048)!==st&&la.current!==null||(Lo=!0),(ai&134217727)===0&&(Fi&134217727)===0||Nt===null||oi(Nt,st,da,!1)}function Vp(e,a,i){var l=yt;yt|=2;var d=Qy(),f=Zy();(Nt!==e||st!==a)&&(qc=null,$o(e,a)),a=!1;var x=Yt;e:do try{if(vt!==0&&Je!==null){var w=Je,k=ua;switch(vt){case 8:$p(),x=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(a=!0);var O=vt;if(vt=0,ua=null,Vo(e,w,k,O),i&&Lo){x=0;break e}break;default:O=vt,vt=0,ua=null,Vo(e,w,k,O)}}Nw(),x=Yt;break}catch(K){Xy(e,K)}while(!0);return a&&e.shellSuspendCounter++,gs=Bi=null,yt=l,B.H=d,B.A=f,Je===null&&(Nt=null,st=0,fc()),x}function Nw(){for(;Je!==null;)Jy(Je)}function Dw(e,a){var i=yt;yt|=2;var l=Qy(),d=Zy();Nt!==e||st!==a?(qc=null,Fc=oe()+500,$o(e,a)):Lo=ae(e,a);e:do try{if(vt!==0&&Je!==null){a=Je;var f=ua;t:switch(vt){case 1:vt=0,ua=null,Vo(e,a,f,1);break;case 2:case 9:if(cg(f)){vt=0,ua=null,ex(a);break}a=function(){vt!==2&&vt!==9||Nt!==e||(vt=7),Za(e)},f.then(a,a);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:cg(f)?(vt=0,ua=null,ex(a)):(vt=0,ua=null,Vo(e,a,f,7));break;case 5:var x=null;switch(Je.tag){case 26:x=Je.memoizedState;case 5:case 27:var w=Je;if(x?Lx(x):w.stateNode.complete){vt=0,ua=null;var k=w.sibling;if(k!==null)Je=k;else{var O=w.return;O!==null?(Je=O,Yc(O)):Je=null}break t}}vt=0,ua=null,Vo(e,a,f,5);break;case 6:vt=0,ua=null,Vo(e,a,f,6);break;case 8:$p(),Yt=6;break e;default:throw Error(o(462))}}zw();break}catch(K){Xy(e,K)}while(!0);return gs=Bi=null,B.H=l,B.A=d,yt=i,Je!==null?0:(Nt=null,st=0,fc(),Yt)}function zw(){for(;Je!==null&&!Zt();)Jy(Je)}function Jy(e){var a=_y(e.alternate,e,Ts);e.memoizedProps=e.pendingProps,a===null?Yc(e):Je=a}function ex(e){var a=e,i=a.alternate;switch(a.tag){case 15:case 0:a=yy(i,a,a.pendingProps,a.type,void 0,st);break;case 11:a=yy(i,a,a.pendingProps,a.type.render,a.ref,st);break;case 5:sp(a);default:jy(i,a),a=Je=Zm(a,Ts),a=_y(i,a,Ts)}e.memoizedProps=e.pendingProps,a===null?Yc(e):Je=a}function Vo(e,a,i,l){gs=Bi=null,sp(a),No=null,Hr=0;var d=a.return;try{if(ww(e,d,a,i,st)){Yt=1,Bc(e,_a(i,e.current)),Je=null;return}}catch(f){if(d!==null)throw Je=d,f;Yt=1,Bc(e,_a(i,e.current)),Je=null;return}a.flags&32768?(lt||l===1?e=!0:Lo||(st&536870912)!==0?e=!1:(ni=e=!0,(l===2||l===9||l===3||l===6)&&(l=la.current,l!==null&&l.tag===13&&(l.flags|=16384))),tx(a,e)):Yc(a)}function Yc(e){var a=e;do{if((a.flags&32768)!==0){tx(a,ni);return}e=a.return;var i=jw(a.alternate,a,Ts);if(i!==null){Je=i;return}if(a=a.sibling,a!==null){Je=a;return}Je=a=e}while(a!==null);Yt===0&&(Yt=5)}function tx(e,a){do{var i=Tw(e.alternate,e);if(i!==null){i.flags&=32767,Je=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(e=e.sibling,e!==null)){Je=e;return}Je=e=i}while(e!==null);Yt=6,Je=null}function nx(e,a,i,l,d,f,x,w,k){e.cancelPendingCommit=null;do Xc();while(bn!==0);if((yt&6)!==0)throw Error(o(327));if(a!==null){if(a===e.current)throw Error(o(177));if(f=a.lanes|a.childLanes,f|=Rd,ze(e,i,f,x,w,k),e===Nt&&(Je=Nt=null,st=0),Ho=a,ii=e,ks=i,Lp=f,Pp=d,qy=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ow(Ut,function(){return rx(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,d=ne.p,ne.p=2,x=yt,yt|=4;try{kw(e,a,i)}finally{yt=x,ne.p=d,B.T=l}}bn=1,ax(),sx(),ix()}}function ax(){if(bn===1){bn=0;var e=ii,a=Ho,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=B.T,B.T=null;var l=ne.p;ne.p=2;var d=yt;yt|=4;try{Iy(a,e);var f=tf,x=Vm(e.containerInfo),w=f.focusedElem,k=f.selectionRange;if(x!==w&&w&&w.ownerDocument&&$m(w.ownerDocument.documentElement,w)){if(k!==null&&Td(w)){var O=k.start,K=k.end;if(K===void 0&&(K=O),"selectionStart"in w)w.selectionStart=O,w.selectionEnd=Math.min(K,w.value.length);else{var ee=w.ownerDocument||document,H=ee&&ee.defaultView||window;if(H.getSelection){var F=H.getSelection(),be=w.textContent.length,Ie=Math.min(k.start,be),Rt=k.end===void 0?Ie:Math.min(k.end,be);!F.extend&&Ie>Rt&&(x=Rt,Rt=Ie,Ie=x);var D=Hm(w,Ie),A=Hm(w,Rt);if(D&&A&&(F.rangeCount!==1||F.anchorNode!==D.node||F.anchorOffset!==D.offset||F.focusNode!==A.node||F.focusOffset!==A.offset)){var U=ee.createRange();U.setStart(D.node,D.offset),F.removeAllRanges(),Ie>Rt?(F.addRange(U),F.extend(A.node,A.offset)):(U.setEnd(A.node,A.offset),F.addRange(U))}}}}for(ee=[],F=w;F=F.parentNode;)F.nodeType===1&&ee.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ee.length;w++){var Z=ee[w];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}ru=!!ef,tf=ef=null}finally{yt=d,ne.p=l,B.T=i}}e.current=a,bn=2}}function sx(){if(bn===2){bn=0;var e=ii,a=Ho,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=B.T,B.T=null;var l=ne.p;ne.p=2;var d=yt;yt|=4;try{Ny(e,a.alternate,a)}finally{yt=d,ne.p=l,B.T=i}}bn=3}}function ix(){if(bn===4||bn===3){bn=0,Gn();var e=ii,a=Ho,i=ks,l=qy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?bn=5:(bn=0,Ho=ii=null,ox(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(si=null),rt(i),a=a.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(pe,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=B.T,d=ne.p,ne.p=2,B.T=null;try{for(var f=e.onRecoverableError,x=0;x<l.length;x++){var w=l[x];f(w.value,{componentStack:w.stack})}}finally{B.T=a,ne.p=d}}(ks&3)!==0&&Xc(),Za(e),d=e.pendingLanes,(i&261930)!==0&&(d&42)!==0?e===Hp?sl++:(sl=0,Hp=e):sl=0,il(0)}}function ox(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Lr(a)))}function Xc(){return ax(),sx(),ix(),rx()}function rx(){if(bn!==5)return!1;var e=ii,a=Lp;Lp=0;var i=rt(ks),l=B.T,d=ne.p;try{ne.p=32>i?32:i,B.T=null,i=Pp,Pp=null;var f=ii,x=ks;if(bn=0,Ho=ii=null,ks=0,(yt&6)!==0)throw Error(o(331));var w=yt;if(yt|=4,$y(f.current),Ly(f,f.current,x,i),yt=w,il(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(pe,f)}catch{}return!0}finally{ne.p=d,B.T=l,ox(e,a)}}function lx(e,a,i){a=_a(i,a),a=vp(e.stateNode,a,2),e=Zs(e,a,2),e!==null&&(ve(e,2),Za(e))}function bt(e,a,i){if(e.tag===3)lx(e,e,i);else for(;a!==null;){if(a.tag===3){lx(a,e,i);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(si===null||!si.has(l))){e=_a(i,e),i=cy(2),l=Zs(a,i,2),l!==null&&(uy(i,l,a,e),ve(l,2),Za(l));break}}a=a.return}}function Fp(e,a,i){var l=e.pingCache;if(l===null){l=e.pingCache=new Aw;var d=new Set;l.set(a,d)}else d=l.get(a),d===void 0&&(d=new Set,l.set(a,d));d.has(i)||(Up=!0,d.add(i),e=Bw.bind(null,e,a,i),a.then(e,e))}function Bw(e,a,i){var l=e.pingCache;l!==null&&l.delete(a),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Nt===e&&(st&i)===i&&(Yt===4||Yt===3&&(st&62914560)===st&&300>oe()-Vc?(yt&2)===0&&$o(e,0):Ip|=i,Po===st&&(Po=0)),Za(e)}function cx(e,a){a===0&&(a=ke()),e=Ni(e,a),e!==null&&(ve(e,a),Za(e))}function Uw(e){var a=e.memoizedState,i=0;a!==null&&(i=a.retryLane),cx(e,i)}function Iw(e,a){var i=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(a),cx(e,i)}function Ow(e,a){return at(e,a)}var Kc=null,Fo=null,qp=!1,Qc=!1,Gp=!1,ri=0;function Za(e){e!==Fo&&e.next===null&&(Fo===null?Kc=Fo=e:Fo=Fo.next=e),Qc=!0,qp||(qp=!0,Pw())}function il(e,a){if(!Gp&&Qc){Gp=!0;do for(var i=!1,l=Kc;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var x=l.suspendedLanes,w=l.pingedLanes;f=(1<<31-ut(42|e)+1)-1,f&=d&~(x&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,fx(l,f))}else f=st,f=Bs(l,l===Nt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||ae(l,f)||(i=!0,fx(l,f));l=l.next}while(i);Gp=!1}}function Lw(){ux()}function ux(){Qc=qp=!1;var e=0;ri!==0&&Kw()&&(e=ri);for(var a=oe(),i=null,l=Kc;l!==null;){var d=l.next,f=dx(l,a);f===0?(l.next=null,i===null?Kc=d:i.next=d,d===null&&(Fo=i)):(i=l,(e!==0||(f&3)!==0)&&(Qc=!0)),l=d}bn!==0&&bn!==5||il(e),ri!==0&&(ri=0)}function dx(e,a){for(var i=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var x=31-ut(f),w=1<<x,k=d[x];k===-1?((w&i)===0||(w&l)!==0)&&(d[x]=de(w,a)):k<=a&&(e.expiredLanes|=w),f&=~w}if(a=Nt,i=st,i=Bs(e,e===a?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===a&&(vt===2||vt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Qt(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||ae(e,i)){if(a=i&-i,a===e.callbackPriority)return a;switch(l!==null&&Qt(l),rt(i)){case 2:case 8:i=ct;break;case 32:i=Ut;break;case 268435456:i=$;break;default:i=Ut}return l=px.bind(null,e),i=at(i,l),e.callbackPriority=a,e.callbackNode=i,a}return l!==null&&l!==null&&Qt(l),e.callbackPriority=2,e.callbackNode=null,2}function px(e,a){if(bn!==0&&bn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Xc()&&e.callbackNode!==i)return null;var l=st;return l=Bs(e,e===Nt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Wy(e,l,a),dx(e,oe()),e.callbackNode!=null&&e.callbackNode===i?px.bind(null,e):null)}function fx(e,a){if(Xc())return null;Wy(e,a,!0)}function Pw(){Zw(function(){(yt&6)!==0?at(dt,Lw):ux()})}function Wp(){if(ri===0){var e=Eo;e===0&&(e=zs,zs<<=1,(zs&261888)===0&&(zs=256)),ri=e}return ri}function hx(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ji(""+e)}function mx(e,a){var i=a.ownerDocument.createElement("input");return i.name=a.name,i.value=a.value,e.id&&i.setAttribute("form",e.id),a.parentNode.insertBefore(i,a),e=new FormData(e),i.parentNode.removeChild(i),e}function Hw(e,a,i,l,d){if(a==="submit"&&i&&i.stateNode===d){var f=hx((d[An]||null).action),x=l.submitter;x&&(a=(a=x[An]||null)?hx(a.formAction):x.getAttribute("formAction"),a!==null&&(f=a,x=null));var w=new xo("action","action",null,l,d);e.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ri!==0){var k=x?mx(d,x):new FormData(d);fp(i,{pending:!0,data:k,method:d.method,action:f},null,k)}}else typeof f=="function"&&(w.preventDefault(),k=x?mx(d,x):new FormData(d),fp(i,{pending:!0,data:k,method:d.method,action:f},f,k))},currentTarget:d}]})}}for(var Yp=0;Yp<Ad.length;Yp++){var Xp=Ad[Yp],$w=Xp.toLowerCase(),Vw=Xp[0].toUpperCase()+Xp.slice(1);Da($w,"on"+Vw)}Da(Gm,"onAnimationEnd"),Da(Wm,"onAnimationIteration"),Da(Ym,"onAnimationStart"),Da("dblclick","onDoubleClick"),Da("focusin","onFocus"),Da("focusout","onBlur"),Da(iw,"onTransitionRun"),Da(ow,"onTransitionStart"),Da(rw,"onTransitionCancel"),Da(Xm,"onTransitionEnd"),Os("onMouseEnter",["mouseout","mouseover"]),Os("onMouseLeave",["mouseout","mouseover"]),Os("onPointerEnter",["pointerout","pointerover"]),Os("onPointerLeave",["pointerout","pointerover"]),cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ol));function gx(e,a){a=(a&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],d=l.event;l=l.listeners;e:{var f=void 0;if(a)for(var x=l.length-1;0<=x;x--){var w=l[x],k=w.instance,O=w.currentTarget;if(w=w.listener,k!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=O;try{f(d)}catch(K){pc(K)}d.currentTarget=null,f=k}else for(x=0;x<l.length;x++){if(w=l[x],k=w.instance,O=w.currentTarget,w=w.listener,k!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=O;try{f(d)}catch(K){pc(K)}d.currentTarget=null,f=k}}}}function et(e,a){var i=a[co];i===void 0&&(i=a[co]=new Set);var l=e+"__bubble";i.has(l)||(yx(a,e,2,!1),i.add(l))}function Kp(e,a,i){var l=0;a&&(l|=4),yx(i,e,l,a)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function Qp(e){if(!e[Zc]){e[Zc]=!0,Ql.forEach(function(i){i!=="selectionchange"&&(Fw.has(i)||Kp(i,!1,e),Kp(i,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Zc]||(a[Zc]=!0,Kp("selectionchange",!1,a))}}function yx(e,a,i,l){switch(Gx(a)){case 2:var d=x_;break;case 8:d=v_;break;default:d=ff}i=d.bind(null,a,i,e),d=void 0,!Ga||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(a,i,{capture:!0,passive:d}):e.addEventListener(a,i,!0):d!==void 0?e.addEventListener(a,i,{passive:d}):e.addEventListener(a,i,!1)}function Zp(e,a,i,l,d){var f=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var w=l.stateNode.containerInfo;if(w===d)break;if(x===4)for(x=l.return;x!==null;){var k=x.tag;if((k===3||k===4)&&x.stateNode.containerInfo===d)return;x=x.return}for(;w!==null;){if(x=rs(w),x===null)return;if(k=x.tag,k===5||k===6||k===26||k===27){l=f=x;continue e}w=w.parentNode}}l=l.return}Tr(function(){var O=f,K=vn(i),ee=[];e:{var H=Km.get(e);if(H!==void 0){var F=xo,be=e;switch(e){case"keypress":if(ki(i)===0)break e;case"keydown":case"keyup":F=oc;break;case"focusin":be="focus",F=Er;break;case"focusout":be="blur",F=Er;break;case"beforeblur":case"afterblur":F=Er;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=yd;break;case Gm:case Wm:case Ym:F=ld;break;case Xm:F=vd;break;case"scroll":case"scrollend":F=od;break;case"wheel":F=Sa;break;case"copy":case"cut":case"paste":F=Mi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=rc;break;case"toggle":case"beforetoggle":F=Sd}var Ie=(a&4)!==0,Rt=!Ie&&(e==="scroll"||e==="scrollend"),D=Ie?H!==null?H+"Capture":null:H;Ie=[];for(var A=O,U;A!==null;){var Z=A;if(U=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||U===null||D===null||(Z=qa(A,D),Z!=null&&Ie.push(rl(A,Z,U))),Rt)break;A=A.return}0<Ie.length&&(H=new F(H,be,null,i,K),ee.push({event:H,listeners:Ie}))}}if((a&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",H&&i!==mo&&(be=i.relatedTarget||i.fromElement)&&(rs(be)||be[os]))break e;if((F||H)&&(H=K.window===K?K:(H=K.ownerDocument)?H.defaultView||H.parentWindow:window,F?(be=i.relatedTarget||i.toElement,F=O,be=be?rs(be):null,be!==null&&(Rt=u(be),Ie=be.tag,be!==Rt||Ie!==5&&Ie!==27&&Ie!==6)&&(be=null)):(F=null,be=O),F!==be)){if(Ie=nc,Z="onMouseLeave",D="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(Ie=rc,Z="onPointerLeave",D="onPointerEnter",A="pointer"),Rt=F==null?H:Is(F),U=be==null?H:Is(be),H=new Ie(Z,A+"leave",F,i,K),H.target=Rt,H.relatedTarget=U,Z=null,rs(K)===O&&(Ie=new Ie(D,A+"enter",be,i,K),Ie.target=U,Ie.relatedTarget=Rt,Z=Ie),Rt=Z,F&&be)t:{for(Ie=qw,D=F,A=be,U=0,Z=D;Z;Z=Ie(Z))U++;Z=0;for(var Ne=A;Ne;Ne=Ie(Ne))Z++;for(;0<U-Z;)D=Ie(D),U--;for(;0<Z-U;)A=Ie(A),Z--;for(;U--;){if(D===A||A!==null&&D===A.alternate){Ie=D;break t}D=Ie(D),A=Ie(A)}Ie=null}else Ie=null;F!==null&&xx(ee,H,F,Ie,!1),be!==null&&Rt!==null&&xx(ee,Rt,be,Ie,!0)}}e:{if(H=O?Is(O):window,F=H.nodeName&&H.nodeName.toLowerCase(),F==="select"||F==="input"&&H.type==="file")var ht=Bm;else if(Ya(H))if(Um)ht=nw;else{ht=ew;var Me=JS}else F=H.nodeName,!F||F.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?O&&ho(O.elementType)&&(ht=Bm):ht=tw;if(ht&&(ht=ht(e,O))){Nr(ee,ht,i,K);break e}Me&&Me(e,H,O),e==="focusout"&&O&&H.type==="number"&&O.memoizedProps.value!=null&&Hs(H,"number",H.value)}switch(Me=O?Is(O):window,e){case"focusin":(Ya(Me)||Me.contentEditable==="true")&&(So=Me,kd=O,Ur=null);break;case"focusout":Ur=kd=So=null;break;case"mousedown":Md=!0;break;case"contextmenu":case"mouseup":case"dragend":Md=!1,Fm(ee,i,K);break;case"selectionchange":if(sw)break;case"keydown":case"keyup":Fm(ee,i,K)}var Ke;if(Rr)e:{switch(e){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else ia?Ge(e,i)&&(it="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(it="onCompositionStart");it&&(_&&i.locale!=="ko"&&(ia||it!=="onCompositionStart"?it==="onCompositionEnd"&&ia&&(Ke=ec()):(ba=K,go="value"in ba?ba.value:ba.textContent,ia=!0)),Me=Jc(O,it),0<Me.length&&(it=new ic(it,e,null,i,K),ee.push({event:it,listeners:Me}),Ke?it.data=Ke:(Ke=tn(i),Ke!==null&&(it.data=Ke)))),(Ke=_d?cc(e,i):uc(e,i))&&(it=Jc(O,"onBeforeInput"),0<it.length&&(Me=new ic("onBeforeInput","beforeinput",null,i,K),ee.push({event:Me,listeners:it}),Me.data=Ke)),Hw(ee,e,O,i,K)}gx(ee,a)})}function rl(e,a,i){return{instance:e,listener:a,currentTarget:i}}function Jc(e,a){for(var i=a+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=qa(e,i),d!=null&&l.unshift(rl(e,d,f)),d=qa(e,a),d!=null&&l.push(rl(e,d,f))),e.tag===3)return l;e=e.return}return[]}function qw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function xx(e,a,i,l,d){for(var f=a._reactName,x=[];i!==null&&i!==l;){var w=i,k=w.alternate,O=w.stateNode;if(w=w.tag,k!==null&&k===l)break;w!==5&&w!==26&&w!==27||O===null||(k=O,d?(O=qa(i,f),O!=null&&x.unshift(rl(i,O,k))):d||(O=qa(i,f),O!=null&&x.push(rl(i,O,k)))),i=i.return}x.length!==0&&e.push({event:a,listeners:x})}var Gw=/\r\n?/g,Ww=/\u0000|\uFFFD/g;function vx(e){return(typeof e=="string"?e:""+e).replace(Gw,`
`).replace(Ww,"")}function bx(e,a){return a=vx(a),vx(e)===a}function At(e,a,i,l,d,f){switch(i){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||en(e,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&en(e,""+l);break;case"className":Va(e,"class",l);break;case"tabIndex":Va(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Va(e,i,l);break;case"style":Cr(e,l,f);break;case"data":if(a!=="object"){Va(e,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=ji(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(a!=="input"&&At(e,a,"name",d.name,d,null),At(e,a,"formEncType",d.formEncType,d,null),At(e,a,"formMethod",d.formMethod,d,null),At(e,a,"formTarget",d.formTarget,d,null)):(At(e,a,"encType",d.encType,d,null),At(e,a,"method",d.method,d,null),At(e,a,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=ji(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=xa);break;case"onScroll":l!=null&&et("scroll",e);break;case"onScrollEnd":l!=null&&et("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(i=l.__html,i!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=ji(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":et("beforetoggle",e),et("toggle",e),wi(e,"popover",l);break;case"xlinkActuate":ya(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ya(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ya(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ya(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ya(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ya(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ya(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ya(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ya(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":wi(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Zl.get(i)||i,wi(e,i,l))}}function Jp(e,a,i,l,d,f){switch(i){case"style":Cr(e,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(i=l.__html,i!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof l=="string"?en(e,l):(typeof l=="number"||typeof l=="bigint")&&en(e,""+l);break;case"onScroll":l!=null&&et("scroll",e);break;case"onScrollEnd":l!=null&&et("scrollend",e);break;case"onClick":l!=null&&(e.onclick=xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vr.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(d=i.endsWith("Capture"),a=i.slice(2,d?i.length-7:void 0),f=e[An]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(a,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(a,l,d);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):wi(e,i,l)}}}function Bn(e,a,i){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",e),et("load",e);var l=!1,d=!1,f;for(f in i)if(i.hasOwnProperty(f)){var x=i[f];if(x!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:At(e,a,f,x,i,null)}}d&&At(e,a,"srcSet",i.srcSet,i,null),l&&At(e,a,"src",i.src,i,null);return;case"input":et("invalid",e);var w=f=x=d=null,k=null,O=null;for(l in i)if(i.hasOwnProperty(l)){var K=i[l];if(K!=null)switch(l){case"name":d=K;break;case"type":x=K;break;case"checked":k=K;break;case"defaultChecked":O=K;break;case"value":f=K;break;case"defaultValue":w=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,a));break;default:At(e,a,l,K,i,null)}}_r(e,f,w,k,O,x,d,!1);return;case"select":et("invalid",e),l=x=f=null;for(d in i)if(i.hasOwnProperty(d)&&(w=i[d],w!=null))switch(d){case"value":f=w;break;case"defaultValue":x=w;break;case"multiple":l=w;default:At(e,a,d,w,i,null)}a=f,i=x,e.multiple=!!l,a!=null?us(e,!!l,a,!1):i!=null&&us(e,!!l,i,!0);return;case"textarea":et("invalid",e),f=d=l=null;for(x in i)if(i.hasOwnProperty(x)&&(w=i[x],w!=null))switch(x){case"value":l=w;break;case"defaultValue":d=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(o(91));break;default:At(e,a,x,w,i,null)}_i(e,l,d,f);return;case"option":for(k in i)if(i.hasOwnProperty(k)&&(l=i[k],l!=null))switch(k){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:At(e,a,k,l,i,null)}return;case"dialog":et("beforetoggle",e),et("toggle",e),et("cancel",e),et("close",e);break;case"iframe":case"object":et("load",e);break;case"video":case"audio":for(l=0;l<ol.length;l++)et(ol[l],e);break;case"image":et("error",e),et("load",e);break;case"details":et("toggle",e);break;case"embed":case"source":case"link":et("error",e),et("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in i)if(i.hasOwnProperty(O)&&(l=i[O],l!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:At(e,a,O,l,i,null)}return;default:if(ho(a)){for(K in i)i.hasOwnProperty(K)&&(l=i[K],l!==void 0&&Jp(e,a,K,l,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(l=i[w],l!=null&&At(e,a,w,l,i,null))}function Yw(e,a,i,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,x=null,w=null,k=null,O=null,K=null;for(F in i){var ee=i[F];if(i.hasOwnProperty(F)&&ee!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":k=ee;default:l.hasOwnProperty(F)||At(e,a,F,null,l,ee)}}for(var H in l){var F=l[H];if(ee=i[H],l.hasOwnProperty(H)&&(F!=null||ee!=null))switch(H){case"type":f=F;break;case"name":d=F;break;case"checked":O=F;break;case"defaultChecked":K=F;break;case"value":x=F;break;case"defaultValue":w=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(o(137,a));break;default:F!==ee&&At(e,a,H,F,l,ee)}}Ps(e,x,w,k,O,K,f,d);return;case"select":F=x=w=H=null;for(f in i)if(k=i[f],i.hasOwnProperty(f)&&k!=null)switch(f){case"value":break;case"multiple":F=k;default:l.hasOwnProperty(f)||At(e,a,f,null,l,k)}for(d in l)if(f=l[d],k=i[d],l.hasOwnProperty(d)&&(f!=null||k!=null))switch(d){case"value":H=f;break;case"defaultValue":w=f;break;case"multiple":x=f;default:f!==k&&At(e,a,d,f,l,k)}a=w,i=x,l=F,H!=null?us(e,!!i,H,!1):!!l!=!!i&&(a!=null?us(e,!!i,a,!0):us(e,!!i,i?[]:"",!1));return;case"textarea":F=H=null;for(w in i)if(d=i[w],i.hasOwnProperty(w)&&d!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:At(e,a,w,null,l,d)}for(x in l)if(d=l[x],f=i[x],l.hasOwnProperty(x)&&(d!=null||f!=null))switch(x){case"value":H=d;break;case"defaultValue":F=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:d!==f&&At(e,a,x,d,l,f)}Ze(e,H,F);return;case"option":for(var be in i)if(H=i[be],i.hasOwnProperty(be)&&H!=null&&!l.hasOwnProperty(be))switch(be){case"selected":e.selected=!1;break;default:At(e,a,be,null,l,H)}for(k in l)if(H=l[k],F=i[k],l.hasOwnProperty(k)&&H!==F&&(H!=null||F!=null))switch(k){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:At(e,a,k,H,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in i)H=i[Ie],i.hasOwnProperty(Ie)&&H!=null&&!l.hasOwnProperty(Ie)&&At(e,a,Ie,null,l,H);for(O in l)if(H=l[O],F=i[O],l.hasOwnProperty(O)&&H!==F&&(H!=null||F!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(o(137,a));break;default:At(e,a,O,H,l,F)}return;default:if(ho(a)){for(var Rt in i)H=i[Rt],i.hasOwnProperty(Rt)&&H!==void 0&&!l.hasOwnProperty(Rt)&&Jp(e,a,Rt,void 0,l,H);for(K in l)H=l[K],F=i[K],!l.hasOwnProperty(K)||H===F||H===void 0&&F===void 0||Jp(e,a,K,H,l,F);return}}for(var D in i)H=i[D],i.hasOwnProperty(D)&&H!=null&&!l.hasOwnProperty(D)&&At(e,a,D,null,l,H);for(ee in l)H=l[ee],F=i[ee],!l.hasOwnProperty(ee)||H===F||H==null&&F==null||At(e,a,ee,H,l,F)}function Sx(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var d=i[l],f=d.transferSize,x=d.initiatorType,w=d.duration;if(f&&w&&Sx(x)){for(x=0,w=d.responseEnd,l+=1;l<i.length;l++){var k=i[l],O=k.startTime;if(O>w)break;var K=k.transferSize,ee=k.initiatorType;K&&Sx(ee)&&(k=k.responseEnd,x+=K*(k<w?1:(w-O)/(k-O)))}if(--l,a+=8*(f+x)/(d.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var ef=null,tf=null;function eu(e){return e.nodeType===9?e:e.ownerDocument}function wx(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _x(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function nf(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var af=null;function Kw(){var e=window.event;return e&&e.type==="popstate"?e===af?!1:(af=e,!0):(af=null,!1)}var Cx=typeof setTimeout=="function"?setTimeout:void 0,Qw=typeof clearTimeout=="function"?clearTimeout:void 0,jx=typeof Promise=="function"?Promise:void 0,Zw=typeof queueMicrotask=="function"?queueMicrotask:typeof jx<"u"?function(e){return jx.resolve(null).then(e).catch(Jw)}:Cx;function Jw(e){setTimeout(function(){throw e})}function li(e){return e==="head"}function Tx(e,a){var i=a,l=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"||i==="/&"){if(l===0){e.removeChild(d),Yo(a);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")ll(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,ll(i);for(var f=i.firstChild;f;){var x=f.nextSibling,w=f.nodeName;f[bi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=x}}else i==="body"&&ll(e.ownerDocument.body);i=d}while(i);Yo(a)}function kx(e,a){var i=e;e=0;do{var l=i.nextSibling;if(i.nodeType===1?a?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(a?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=l}while(i)}function sf(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var i=a;switch(a=a.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":sf(i),uo(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function e_(e,a,i,l){for(;e.nodeType===1;){var d=i;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[bi])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Ma(e.nextSibling),e===null)break}return null}function t_(e,a,i){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Ma(e.nextSibling),e===null))return null;return e}function Mx(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ma(e.nextSibling),e===null))return null;return e}function of(e){return e.data==="$?"||e.data==="$~"}function rf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function n_(e,a){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||i.readyState!=="loading")a();else{var l=function(){a(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Ma(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var lf=null;function Ex(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(a===0)return Ma(e.nextSibling);a--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||a++}e=e.nextSibling}return null}function Ax(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(a===0)return e;a--}else i!=="/$"&&i!=="/&"||a++}e=e.previousSibling}return null}function Rx(e,a,i){switch(a=eu(i),e){case"html":if(e=a.documentElement,!e)throw Error(o(452));return e;case"head":if(e=a.head,!e)throw Error(o(453));return e;case"body":if(e=a.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function ll(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);uo(e)}var Ea=new Map,Nx=new Set;function tu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ms=ne.d;ne.d={f:a_,r:s_,D:i_,C:o_,L:r_,m:l_,X:u_,S:c_,M:d_};function a_(){var e=Ms.f(),a=Gc();return e||a}function s_(e){var a=Us(e);a!==null&&a.tag===5&&a.type==="form"?Xg(a):Ms.r(e)}var qo=typeof document>"u"?null:document;function Dx(e,a,i){var l=qo;if(l&&typeof a=="string"&&a){var d=Hn(a);d='link[rel="'+e+'"][href="'+d+'"]',typeof i=="string"&&(d+='[crossorigin="'+i+'"]'),Nx.has(d)||(Nx.add(d),e={rel:e,crossOrigin:i,href:a},l.querySelector(d)===null&&(a=l.createElement("link"),Bn(a,"link",e),cn(a),l.head.appendChild(a)))}}function i_(e){Ms.D(e),Dx("dns-prefetch",e,null)}function o_(e,a){Ms.C(e,a),Dx("preconnect",e,a)}function r_(e,a,i){Ms.L(e,a,i);var l=qo;if(l&&e&&a){var d='link[rel="preload"][as="'+Hn(a)+'"]';a==="image"&&i&&i.imageSrcSet?(d+='[imagesrcset="'+Hn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(d+='[imagesizes="'+Hn(i.imageSizes)+'"]')):d+='[href="'+Hn(e)+'"]';var f=d;switch(a){case"style":f=Go(e);break;case"script":f=Wo(e)}Ea.has(f)||(e=v({rel:"preload",href:a==="image"&&i&&i.imageSrcSet?void 0:e,as:a},i),Ea.set(f,e),l.querySelector(d)!==null||a==="style"&&l.querySelector(cl(f))||a==="script"&&l.querySelector(ul(f))||(a=l.createElement("link"),Bn(a,"link",e),cn(a),l.head.appendChild(a)))}}function l_(e,a){Ms.m(e,a);var i=qo;if(i&&e){var l=a&&typeof a.as=="string"?a.as:"script",d='link[rel="modulepreload"][as="'+Hn(l)+'"][href="'+Hn(e)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Wo(e)}if(!Ea.has(f)&&(e=v({rel:"modulepreload",href:e},a),Ea.set(f,e),i.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ul(f)))return}l=i.createElement("link"),Bn(l,"link",e),cn(l),i.head.appendChild(l)}}}function c_(e,a,i){Ms.S(e,a,i);var l=qo;if(l&&e){var d=ls(l).hoistableStyles,f=Go(e);a=a||"default";var x=d.get(f);if(!x){var w={loading:0,preload:null};if(x=l.querySelector(cl(f)))w.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":a},i),(i=Ea.get(f))&&cf(e,i);var k=x=l.createElement("link");cn(k),Bn(k,"link",e),k._p=new Promise(function(O,K){k.onload=O,k.onerror=K}),k.addEventListener("load",function(){w.loading|=1}),k.addEventListener("error",function(){w.loading|=2}),w.loading|=4,nu(x,a,l)}x={type:"stylesheet",instance:x,count:1,state:w},d.set(f,x)}}}function u_(e,a){Ms.X(e,a);var i=qo;if(i&&e){var l=ls(i).hoistableScripts,d=Wo(e),f=l.get(d);f||(f=i.querySelector(ul(d)),f||(e=v({src:e,async:!0},a),(a=Ea.get(d))&&uf(e,a),f=i.createElement("script"),cn(f),Bn(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function d_(e,a){Ms.M(e,a);var i=qo;if(i&&e){var l=ls(i).hoistableScripts,d=Wo(e),f=l.get(d);f||(f=i.querySelector(ul(d)),f||(e=v({src:e,async:!0,type:"module"},a),(a=Ea.get(d))&&uf(e,a),f=i.createElement("script"),cn(f),Bn(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function zx(e,a,i,l){var d=(d=he.current)?tu(d):null;if(!d)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(a=Go(i.href),i=ls(d).hoistableStyles,l=i.get(a),l||(l={type:"style",instance:null,count:0,state:null},i.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Go(i.href);var f=ls(d).hoistableStyles,x=f.get(e);if(x||(d=d.ownerDocument||d,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,x),(f=d.querySelector(cl(e)))&&!f._p&&(x.instance=f,x.state.loading=5),Ea.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ea.set(e,i),f||p_(d,e,i,x.state))),a&&l===null)throw Error(o(528,""));return x}if(a&&l!==null)throw Error(o(529,""));return null;case"script":return a=i.async,i=i.src,typeof i=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Wo(i),i=ls(d).hoistableScripts,l=i.get(a),l||(l={type:"script",instance:null,count:0,state:null},i.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Go(e){return'href="'+Hn(e)+'"'}function cl(e){return'link[rel="stylesheet"]['+e+"]"}function Bx(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function p_(e,a,i,l){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=e.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),Bn(a,"link",i),cn(a),e.head.appendChild(a))}function Wo(e){return'[src="'+Hn(e)+'"]'}function ul(e){return"script[async]"+e}function Ux(e,a,i){if(a.count++,a.instance===null)switch(a.type){case"style":var l=e.querySelector('style[data-href~="'+Hn(i.href)+'"]');if(l)return a.instance=l,cn(l),l;var d=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),cn(l),Bn(l,"style",d),nu(l,i.precedence,e),a.instance=l;case"stylesheet":d=Go(i.href);var f=e.querySelector(cl(d));if(f)return a.state.loading|=4,a.instance=f,cn(f),f;l=Bx(i),(d=Ea.get(d))&&cf(l,d),f=(e.ownerDocument||e).createElement("link"),cn(f);var x=f;return x._p=new Promise(function(w,k){x.onload=w,x.onerror=k}),Bn(f,"link",l),a.state.loading|=4,nu(f,i.precedence,e),a.instance=f;case"script":return f=Wo(i.src),(d=e.querySelector(ul(f)))?(a.instance=d,cn(d),d):(l=i,(d=Ea.get(f))&&(l=v({},i),uf(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),cn(d),Bn(d,"link",l),e.head.appendChild(d),a.instance=d);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,nu(l,i.precedence,e));return a.instance}function nu(e,a,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,x=0;x<l.length;x++){var w=l[x];if(w.dataset.precedence===a)f=w;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(a=i.nodeType===9?i.head:i,a.insertBefore(e,a.firstChild))}function cf(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function uf(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var au=null;function Ix(e,a,i){if(au===null){var l=new Map,d=au=new Map;d.set(i,l)}else d=au,l=d.get(i),l||(l=new Map,d.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),d=0;d<i.length;d++){var f=i[d];if(!(f[bi]||f[Mt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var x=f.getAttribute(a)||"";x=e+x;var w=l.get(x);w?w.push(f):l.set(x,[f])}}return l}function Ox(e,a,i){e=e.ownerDocument||e,e.head.insertBefore(i,a==="title"?e.querySelector("head > title"):null)}function f_(e,a,i){if(i===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Lx(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function h_(e,a,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=Go(l.href),f=a.querySelector(cl(d));if(f){a=f._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=su.bind(e),a.then(e,e)),i.state.loading|=4,i.instance=f,cn(f);return}f=a.ownerDocument||a,l=Bx(l),(d=Ea.get(d))&&cf(l,d),f=f.createElement("link"),cn(f);var x=f;x._p=new Promise(function(w,k){x.onload=w,x.onerror=k}),Bn(f,"link",l),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=su.bind(e),a.addEventListener("load",i),a.addEventListener("error",i))}}var df=0;function m_(e,a){return e.stylesheets&&e.count===0&&ou(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var l=setTimeout(function(){if(e.stylesheets&&ou(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+a);0<e.imgBytes&&df===0&&(df=62500*Xw());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ou(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>df?50:800)+a);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function su(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ou(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var iu=null;function ou(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,iu=new Map,a.forEach(g_,e),iu=null,su.call(e))}function g_(e,a){if(!(a.state.loading&4)){var i=iu.get(e);if(i)var l=i.get(null);else{i=new Map,iu.set(e,i);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var x=d[f];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(i.set(x.dataset.precedence,x),l=x)}l&&i.set(null,l)}d=a.instance,x=d.getAttribute("data-precedence"),f=i.get(x)||l,f===l&&i.set(null,d),i.set(x,d),this.count++,l=su.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),a.state.loading|=4}}var dl={$$typeof:R,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function y_(e,a,i,l,d,f,x,w,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ue(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ue(0),this.hiddenUpdates=Ue(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Px(e,a,i,l,d,f,x,w,k,O,K,ee){return e=new y_(e,a,i,x,k,O,K,ee,w),a=1,f===!0&&(a|=24),f=ra(3,null,null,a),e.current=f,f.stateNode=e,a=Vd(),a.refCount++,e.pooledCache=a,a.refCount++,f.memoizedState={element:l,isDehydrated:i,cache:a},Wd(f),e}function Hx(e){return e?(e=Co,e):Co}function $x(e,a,i,l,d,f){d=Hx(d),l.context===null?l.context=d:l.pendingContext=d,l=Qs(a),l.payload={element:i},f=f===void 0?null:f,f!==null&&(l.callback=f),i=Zs(e,l,a),i!==null&&(ta(i,e,a),Vr(i,e,a))}function Vx(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<a?i:a}}function pf(e,a){Vx(e,a),(e=e.alternate)&&Vx(e,a)}function Fx(e){if(e.tag===13||e.tag===31){var a=Ni(e,67108864);a!==null&&ta(a,e,67108864),pf(e,67108864)}}function qx(e){if(e.tag===13||e.tag===31){var a=pa();a=Ve(a);var i=Ni(e,a);i!==null&&ta(i,e,a),pf(e,a)}}var ru=!0;function x_(e,a,i,l){var d=B.T;B.T=null;var f=ne.p;try{ne.p=2,ff(e,a,i,l)}finally{ne.p=f,B.T=d}}function v_(e,a,i,l){var d=B.T;B.T=null;var f=ne.p;try{ne.p=8,ff(e,a,i,l)}finally{ne.p=f,B.T=d}}function ff(e,a,i,l){if(ru){var d=hf(l);if(d===null)Zp(e,a,l,lu,i),Wx(e,l);else if(S_(d,e,a,i,l))l.stopPropagation();else if(Wx(e,l),a&4&&-1<b_.indexOf(e)){for(;d!==null;){var f=Us(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var x=ga(f.pendingLanes);if(x!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var k=1<<31-ut(x);w.entanglements[1]|=k,x&=~k}Za(f),(yt&6)===0&&(Fc=oe()+500,il(0))}}break;case 31:case 13:w=Ni(f,2),w!==null&&ta(w,f,2),Gc(),pf(f,2)}if(f=hf(l),f===null&&Zp(e,a,l,lu,i),f===d)break;d=f}d!==null&&l.stopPropagation()}else Zp(e,a,l,null,i)}}function hf(e){return e=vn(e),mf(e)}var lu=null;function mf(e){if(lu=null,e=rs(e),e!==null){var a=u(e);if(a===null)e=null;else{var i=a.tag;if(i===13){if(e=p(a),e!==null)return e;e=null}else if(i===31){if(e=h(a),e!==null)return e;e=null}else if(i===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return lu=e,null}function Gx(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case dt:return 2;case ct:return 8;case Ut:case xn:return 32;case $:return 268435456;default:return 32}default:return 32}}var gf=!1,ci=null,ui=null,di=null,pl=new Map,fl=new Map,pi=[],b_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wx(e,a){switch(e){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":pl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":fl.delete(a.pointerId)}}function hl(e,a,i,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:a,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},a!==null&&(a=Us(a),a!==null&&Fx(a)),e):(e.eventSystemFlags|=l,a=e.targetContainers,d!==null&&a.indexOf(d)===-1&&a.push(d),e)}function S_(e,a,i,l,d){switch(a){case"focusin":return ci=hl(ci,e,a,i,l,d),!0;case"dragenter":return ui=hl(ui,e,a,i,l,d),!0;case"mouseover":return di=hl(di,e,a,i,l,d),!0;case"pointerover":var f=d.pointerId;return pl.set(f,hl(pl.get(f)||null,e,a,i,l,d)),!0;case"gotpointercapture":return f=d.pointerId,fl.set(f,hl(fl.get(f)||null,e,a,i,l,d)),!0}return!1}function Yx(e){var a=rs(e.target);if(a!==null){var i=u(a);if(i!==null){if(a=i.tag,a===13){if(a=p(i),a!==null){e.blockedOn=a,jn(e.priority,function(){qx(i)});return}}else if(a===31){if(a=h(i),a!==null){e.blockedOn=a,jn(e.priority,function(){qx(i)});return}}else if(a===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cu(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var i=hf(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);mo=l,i.target.dispatchEvent(l),mo=null}else return a=Us(i),a!==null&&Fx(a),e.blockedOn=i,!1;a.shift()}return!0}function Xx(e,a,i){cu(e)&&i.delete(a)}function w_(){gf=!1,ci!==null&&cu(ci)&&(ci=null),ui!==null&&cu(ui)&&(ui=null),di!==null&&cu(di)&&(di=null),pl.forEach(Xx),fl.forEach(Xx)}function uu(e,a){e.blockedOn===a&&(e.blockedOn=null,gf||(gf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,w_)))}var du=null;function Kx(e){du!==e&&(du=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){du===e&&(du=null);for(var a=0;a<e.length;a+=3){var i=e[a],l=e[a+1],d=e[a+2];if(typeof l!="function"){if(mf(l||i)===null)continue;break}var f=Us(i);f!==null&&(e.splice(a,3),a-=3,fp(f,{pending:!0,data:d,method:i.method,action:l},l,d))}}))}function Yo(e){function a(k){return uu(k,e)}ci!==null&&uu(ci,e),ui!==null&&uu(ui,e),di!==null&&uu(di,e),pl.forEach(a),fl.forEach(a);for(var i=0;i<pi.length;i++){var l=pi[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<pi.length&&(i=pi[0],i.blockedOn===null);)Yx(i),i.blockedOn===null&&pi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var d=i[l],f=i[l+1],x=d[An]||null;if(typeof f=="function")x||Kx(i);else if(x){var w=null;if(f&&f.hasAttribute("formAction")){if(d=f,x=f[An]||null)w=x.formAction;else if(mf(d)!==null)continue}else w=x.action;typeof w=="function"?i[l+1]=w:(i.splice(l,3),l-=3),Kx(i)}}}function Qx(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(x){return d=x})},focusReset:"manual",scroll:"manual"})}function a(){d!==null&&(d(),d=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),d!==null&&(d(),d=null)}}}function yf(e){this._internalRoot=e}pu.prototype.render=yf.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(o(409));var i=a.current,l=pa();$x(i,l,e,a,null,null)},pu.prototype.unmount=yf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;$x(e.current,2,null,e,null,null),Gc(),a[os]=null}};function pu(e){this._internalRoot=e}pu.prototype.unstable_scheduleHydration=function(e){if(e){var a=En();e={blockedOn:null,target:e,priority:a};for(var i=0;i<pi.length&&a!==0&&a<pi[i].priority;i++);pi.splice(i,0,e),i===0&&Yx(e)}};var Zx=n.version;if(Zx!=="19.2.0")throw Error(o(527,Zx,"19.2.0"));ne.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(a),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var __={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{pe=fu.inject(__),ye=fu}catch{}}return gl.createRoot=function(e,a){if(!c(e))throw Error(o(299));var i=!1,l="",d=iy,f=oy,x=ry;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(f=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Px(e,1,!1,null,null,i,l,null,d,f,x,Qx),e[os]=a.current,Qp(e),new yf(a)},gl.hydrateRoot=function(e,a,i){if(!c(e))throw Error(o(299));var l=!1,d="",f=iy,x=oy,w=ry,k=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(x=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.formState!==void 0&&(k=i.formState)),a=Px(e,1,!0,a,i??null,l,d,k,f,x,w,Qx),a.context=Hx(null),i=a.current,l=pa(),l=Ve(l),d=Qs(l),d.callback=null,Zs(i,d,l),i=l,a.current.lanes=i,ve(a,i),Za(a),e[os]=a.current,Qp(e),new pu(a)},gl.version="19.2.0",gl}var ov;function Q_(){if(ov)return bf.exports;ov=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),bf.exports=K_(),bf.exports}var Z_=Q_();const J_="modulepreload",eC=function(t){return"/"+t},rv={},zt=function(n,s,o){let c=Promise.resolve();if(s&&s.length>0){let m=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),h=p?.nonce||p?.getAttribute("nonce");c=m(s.map(g=>{if(g=eC(g),g in rv)return;rv[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":J_,y||(S.as="script"),S.crossOrigin="",S.href=g,h&&S.setAttribute("nonce",h),document.head.appendChild(S),y)return new Promise((j,C)=>{S.addEventListener("load",j),S.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(p){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=p,window.dispatchEvent(h),!h.defaultPrevented)throw p}return c.then(p=>{for(const h of p||[])h.status==="rejected"&&u(h.reason);return n().catch(u)})},lv=t=>{let n;const s=new Set,o=(g,y)=>{const v=typeof g=="function"?g(n):g;if(!Object.is(v,n)){const S=n;n=y??(typeof v!="object"||v===null)?v:Object.assign({},n,v),s.forEach(j=>j(n,S))}},c=()=>n,h={setState:o,getState:c,getInitialState:()=>m,subscribe:g=>(s.add(g),()=>s.delete(g))},m=n=t(o,c,h);return h},tC=(t=>t?lv(t):lv),nC=t=>t;function aC(t,n=nC){const s=La.useSyncExternalStore(t.subscribe,La.useCallback(()=>n(t.getState()),[t,n]),La.useCallback(()=>n(t.getInitialState()),[t,n]));return La.useDebugValue(s),s}const cv=t=>{const n=tC(t),s=o=>aC(n,o);return Object.assign(s,n),s},Pl=(t=>t?cv(t):cv);function Tb(t,n){return function(){return t.apply(n,arguments)}}const{toString:sC}=Object.prototype,{getPrototypeOf:Gh}=Object,{iterator:Yu,toStringTag:kb}=Symbol,Xu=(t=>n=>{const s=sC.call(n);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ha=t=>(t=t.toLowerCase(),n=>Xu(n)===t),Ku=t=>n=>typeof n===t,{isArray:pr}=Array,rr=Ku("undefined");function Hl(t){return t!==null&&!rr(t)&&t.constructor!==null&&!rr(t.constructor)&&aa(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Mb=Ha("ArrayBuffer");function iC(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&Mb(t.buffer),n}const oC=Ku("string"),aa=Ku("function"),Eb=Ku("number"),$l=t=>t!==null&&typeof t=="object",rC=t=>t===!0||t===!1,Cu=t=>{if(Xu(t)!=="object")return!1;const n=Gh(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(kb in t)&&!(Yu in t)},lC=t=>{if(!$l(t)||Hl(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},cC=Ha("Date"),uC=Ha("File"),dC=Ha("Blob"),pC=Ha("FileList"),fC=t=>$l(t)&&aa(t.pipe),hC=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||aa(t.append)&&((n=Xu(t))==="formdata"||n==="object"&&aa(t.toString)&&t.toString()==="[object FormData]"))},mC=Ha("URLSearchParams"),[gC,yC,xC,vC]=["ReadableStream","Request","Response","Headers"].map(Ha),bC=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vl(t,n,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let o,c;if(typeof t!="object"&&(t=[t]),pr(t))for(o=0,c=t.length;o<c;o++)n.call(null,t[o],o,t);else{if(Hl(t))return;const u=s?Object.getOwnPropertyNames(t):Object.keys(t),p=u.length;let h;for(o=0;o<p;o++)h=u[o],n.call(null,t[h],h,t)}}function Ab(t,n){if(Hl(t))return null;n=n.toLowerCase();const s=Object.keys(t);let o=s.length,c;for(;o-- >0;)if(c=s[o],n===c.toLowerCase())return c;return null}const Zi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rb=t=>!rr(t)&&t!==Zi;function sh(){const{caseless:t,skipUndefined:n}=Rb(this)&&this||{},s={},o=(c,u)=>{const p=t&&Ab(s,u)||u;Cu(s[p])&&Cu(c)?s[p]=sh(s[p],c):Cu(c)?s[p]=sh({},c):pr(c)?s[p]=c.slice():(!n||!rr(c))&&(s[p]=c)};for(let c=0,u=arguments.length;c<u;c++)arguments[c]&&Vl(arguments[c],o);return s}const SC=(t,n,s,{allOwnKeys:o}={})=>(Vl(n,(c,u)=>{s&&aa(c)?t[u]=Tb(c,s):t[u]=c},{allOwnKeys:o}),t),wC=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),_C=(t,n,s,o)=>{t.prototype=Object.create(n.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),s&&Object.assign(t.prototype,s)},CC=(t,n,s,o)=>{let c,u,p;const h={};if(n=n||{},t==null)return n;do{for(c=Object.getOwnPropertyNames(t),u=c.length;u-- >0;)p=c[u],(!o||o(p,t,n))&&!h[p]&&(n[p]=t[p],h[p]=!0);t=s!==!1&&Gh(t)}while(t&&(!s||s(t,n))&&t!==Object.prototype);return n},jC=(t,n,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=n.length;const o=t.indexOf(n,s);return o!==-1&&o===s},TC=t=>{if(!t)return null;if(pr(t))return t;let n=t.length;if(!Eb(n))return null;const s=new Array(n);for(;n-- >0;)s[n]=t[n];return s},kC=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&Gh(Uint8Array)),MC=(t,n)=>{const o=(t&&t[Yu]).call(t);let c;for(;(c=o.next())&&!c.done;){const u=c.value;n.call(t,u[0],u[1])}},EC=(t,n)=>{let s;const o=[];for(;(s=t.exec(n))!==null;)o.push(s);return o},AC=Ha("HTMLFormElement"),RC=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,o,c){return o.toUpperCase()+c}),uv=(({hasOwnProperty:t})=>(n,s)=>t.call(n,s))(Object.prototype),NC=Ha("RegExp"),Nb=(t,n)=>{const s=Object.getOwnPropertyDescriptors(t),o={};Vl(s,(c,u)=>{let p;(p=n(c,u,t))!==!1&&(o[u]=p||c)}),Object.defineProperties(t,o)},DC=t=>{Nb(t,(n,s)=>{if(aa(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const o=t[s];if(aa(o)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},zC=(t,n)=>{const s={},o=c=>{c.forEach(u=>{s[u]=!0})};return pr(t)?o(t):o(String(t).split(n)),s},BC=()=>{},UC=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function IC(t){return!!(t&&aa(t.append)&&t[kb]==="FormData"&&t[Yu])}const OC=t=>{const n=new Array(10),s=(o,c)=>{if($l(o)){if(n.indexOf(o)>=0)return;if(Hl(o))return o;if(!("toJSON"in o)){n[c]=o;const u=pr(o)?[]:{};return Vl(o,(p,h)=>{const m=s(p,c+1);!rr(m)&&(u[h]=m)}),n[c]=void 0,u}}return o};return s(t,0)},LC=Ha("AsyncFunction"),PC=t=>t&&($l(t)||aa(t))&&aa(t.then)&&aa(t.catch),Db=((t,n)=>t?setImmediate:n?((s,o)=>(Zi.addEventListener("message",({source:c,data:u})=>{c===Zi&&u===s&&o.length&&o.shift()()},!1),c=>{o.push(c),Zi.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",aa(Zi.postMessage)),HC=typeof queueMicrotask<"u"?queueMicrotask.bind(Zi):typeof process<"u"&&process.nextTick||Db,$C=t=>t!=null&&aa(t[Yu]),V={isArray:pr,isArrayBuffer:Mb,isBuffer:Hl,isFormData:hC,isArrayBufferView:iC,isString:oC,isNumber:Eb,isBoolean:rC,isObject:$l,isPlainObject:Cu,isEmptyObject:lC,isReadableStream:gC,isRequest:yC,isResponse:xC,isHeaders:vC,isUndefined:rr,isDate:cC,isFile:uC,isBlob:dC,isRegExp:NC,isFunction:aa,isStream:fC,isURLSearchParams:mC,isTypedArray:kC,isFileList:pC,forEach:Vl,merge:sh,extend:SC,trim:bC,stripBOM:wC,inherits:_C,toFlatObject:CC,kindOf:Xu,kindOfTest:Ha,endsWith:jC,toArray:TC,forEachEntry:MC,matchAll:EC,isHTMLForm:AC,hasOwnProperty:uv,hasOwnProp:uv,reduceDescriptors:Nb,freezeMethods:DC,toObjectSet:zC,toCamelCase:RC,noop:BC,toFiniteNumber:UC,findKey:Ab,global:Zi,isContextDefined:Rb,isSpecCompliantForm:IC,toJSONObject:OC,isAsyncFn:LC,isThenable:PC,setImmediate:Db,asap:HC,isIterable:$C};function Xe(t,n,s,o,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),s&&(this.config=s),o&&(this.request=o),c&&(this.response=c,this.status=c.status?c.status:null)}V.inherits(Xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const zb=Xe.prototype,Bb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Bb[t]={value:t}});Object.defineProperties(Xe,Bb);Object.defineProperty(zb,"isAxiosError",{value:!0});Xe.from=(t,n,s,o,c,u)=>{const p=Object.create(zb);V.toFlatObject(t,p,function(y){return y!==Error.prototype},g=>g!=="isAxiosError");const h=t&&t.message?t.message:"Error",m=n==null&&t?t.code:n;return Xe.call(p,h,m,s,o,c),t&&p.cause==null&&Object.defineProperty(p,"cause",{value:t,configurable:!0}),p.name=t&&t.name||"Error",u&&Object.assign(p,u),p};const VC=null;function ih(t){return V.isPlainObject(t)||V.isArray(t)}function Ub(t){return V.endsWith(t,"[]")?t.slice(0,-2):t}function dv(t,n,s){return t?t.concat(n).map(function(c,u){return c=Ub(c),!s&&u?"["+c+"]":c}).join(s?".":""):n}function FC(t){return V.isArray(t)&&!t.some(ih)}const qC=V.toFlatObject(V,{},null,function(n){return/^is[A-Z]/.test(n)});function Qu(t,n,s){if(!V.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,s=V.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,E){return!V.isUndefined(E[T])});const o=s.metaTokens,c=s.visitor||y,u=s.dots,p=s.indexes,m=(s.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(n);if(!V.isFunction(c))throw new TypeError("visitor must be a function");function g(C){if(C===null)return"";if(V.isDate(C))return C.toISOString();if(V.isBoolean(C))return C.toString();if(!m&&V.isBlob(C))throw new Xe("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(C)||V.isTypedArray(C)?m&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function y(C,T,E){let z=C;if(C&&!E&&typeof C=="object"){if(V.endsWith(T,"{}"))T=o?T:T.slice(0,-2),C=JSON.stringify(C);else if(V.isArray(C)&&FC(C)||(V.isFileList(C)||V.endsWith(T,"[]"))&&(z=V.toArray(C)))return T=Ub(T),z.forEach(function(R,X){!(V.isUndefined(R)||R===null)&&n.append(p===!0?dv([T],X,u):p===null?T:T+"[]",g(R))}),!1}return ih(C)?!0:(n.append(dv(E,T,u),g(C)),!1)}const v=[],S=Object.assign(qC,{defaultVisitor:y,convertValue:g,isVisitable:ih});function j(C,T){if(!V.isUndefined(C)){if(v.indexOf(C)!==-1)throw Error("Circular reference detected in "+T.join("."));v.push(C),V.forEach(C,function(z,L){(!(V.isUndefined(z)||z===null)&&c.call(n,z,V.isString(L)?L.trim():L,T,S))===!0&&j(z,T?T.concat(L):[L])}),v.pop()}}if(!V.isObject(t))throw new TypeError("data must be an object");return j(t),n}function pv(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return n[o]})}function Wh(t,n){this._pairs=[],t&&Qu(t,this,n)}const Ib=Wh.prototype;Ib.append=function(n,s){this._pairs.push([n,s])};Ib.toString=function(n){const s=n?function(o){return n.call(this,o,pv)}:pv;return this._pairs.map(function(c){return s(c[0])+"="+s(c[1])},"").join("&")};function GC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ob(t,n,s){if(!n)return t;const o=s&&s.encode||GC;V.isFunction(s)&&(s={serialize:s});const c=s&&s.serialize;let u;if(c?u=c(n,s):u=V.isURLSearchParams(n)?n.toString():new Wh(n,s).toString(o),u){const p=t.indexOf("#");p!==-1&&(t=t.slice(0,p)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t}class fv{constructor(){this.handlers=[]}use(n,s,o){return this.handlers.push({fulfilled:n,rejected:s,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){V.forEach(this.handlers,function(o){o!==null&&n(o)})}}const Lb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},WC=typeof URLSearchParams<"u"?URLSearchParams:Wh,YC=typeof FormData<"u"?FormData:null,XC=typeof Blob<"u"?Blob:null,KC={isBrowser:!0,classes:{URLSearchParams:WC,FormData:YC,Blob:XC},protocols:["http","https","file","blob","url","data"]},Yh=typeof window<"u"&&typeof document<"u",oh=typeof navigator=="object"&&navigator||void 0,QC=Yh&&(!oh||["ReactNative","NativeScript","NS"].indexOf(oh.product)<0),ZC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",JC=Yh&&window.location.href||"http://localhost",ej=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Yh,hasStandardBrowserEnv:QC,hasStandardBrowserWebWorkerEnv:ZC,navigator:oh,origin:JC},Symbol.toStringTag,{value:"Module"})),Fn={...ej,...KC};function tj(t,n){return Qu(t,new Fn.classes.URLSearchParams,{visitor:function(s,o,c,u){return Fn.isNode&&V.isBuffer(s)?(this.append(o,s.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)},...n})}function nj(t){return V.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function aj(t){const n={},s=Object.keys(t);let o;const c=s.length;let u;for(o=0;o<c;o++)u=s[o],n[u]=t[u];return n}function Pb(t){function n(s,o,c,u){let p=s[u++];if(p==="__proto__")return!0;const h=Number.isFinite(+p),m=u>=s.length;return p=!p&&V.isArray(c)?c.length:p,m?(V.hasOwnProp(c,p)?c[p]=[c[p],o]:c[p]=o,!h):((!c[p]||!V.isObject(c[p]))&&(c[p]=[]),n(s,o,c[p],u)&&V.isArray(c[p])&&(c[p]=aj(c[p])),!h)}if(V.isFormData(t)&&V.isFunction(t.entries)){const s={};return V.forEachEntry(t,(o,c)=>{n(nj(o),c,s,0)}),s}return null}function sj(t,n,s){if(V.isString(t))try{return(n||JSON.parse)(t),V.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(s||JSON.stringify)(t)}const Fl={transitional:Lb,adapter:["xhr","http","fetch"],transformRequest:[function(n,s){const o=s.getContentType()||"",c=o.indexOf("application/json")>-1,u=V.isObject(n);if(u&&V.isHTMLForm(n)&&(n=new FormData(n)),V.isFormData(n))return c?JSON.stringify(Pb(n)):n;if(V.isArrayBuffer(n)||V.isBuffer(n)||V.isStream(n)||V.isFile(n)||V.isBlob(n)||V.isReadableStream(n))return n;if(V.isArrayBufferView(n))return n.buffer;if(V.isURLSearchParams(n))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let h;if(u){if(o.indexOf("application/x-www-form-urlencoded")>-1)return tj(n,this.formSerializer).toString();if((h=V.isFileList(n))||o.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Qu(h?{"files[]":n}:n,m&&new m,this.formSerializer)}}return u||c?(s.setContentType("application/json",!1),sj(n)):n}],transformResponse:[function(n){const s=this.transitional||Fl.transitional,o=s&&s.forcedJSONParsing,c=this.responseType==="json";if(V.isResponse(n)||V.isReadableStream(n))return n;if(n&&V.isString(n)&&(o&&!this.responseType||c)){const p=!(s&&s.silentJSONParsing)&&c;try{return JSON.parse(n,this.parseReviver)}catch(h){if(p)throw h.name==="SyntaxError"?Xe.from(h,Xe.ERR_BAD_RESPONSE,this,null,this.response):h}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fn.classes.FormData,Blob:Fn.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],t=>{Fl.headers[t]={}});const ij=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oj=t=>{const n={};let s,o,c;return t&&t.split(`
`).forEach(function(p){c=p.indexOf(":"),s=p.substring(0,c).trim().toLowerCase(),o=p.substring(c+1).trim(),!(!s||n[s]&&ij[s])&&(s==="set-cookie"?n[s]?n[s].push(o):n[s]=[o]:n[s]=n[s]?n[s]+", "+o:o)}),n},hv=Symbol("internals");function yl(t){return t&&String(t).trim().toLowerCase()}function ju(t){return t===!1||t==null?t:V.isArray(t)?t.map(ju):String(t)}function rj(t){const n=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=s.exec(t);)n[o[1]]=o[2];return n}const lj=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _f(t,n,s,o,c){if(V.isFunction(o))return o.call(this,n,s);if(c&&(n=s),!!V.isString(n)){if(V.isString(o))return n.indexOf(o)!==-1;if(V.isRegExp(o))return o.test(n)}}function cj(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,s,o)=>s.toUpperCase()+o)}function uj(t,n){const s=V.toCamelCase(" "+n);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+s,{value:function(c,u,p){return this[o].call(this,n,c,u,p)},configurable:!0})})}let sa=class{constructor(n){n&&this.set(n)}set(n,s,o){const c=this;function u(h,m,g){const y=yl(m);if(!y)throw new Error("header name must be a non-empty string");const v=V.findKey(c,y);(!v||c[v]===void 0||g===!0||g===void 0&&c[v]!==!1)&&(c[v||m]=ju(h))}const p=(h,m)=>V.forEach(h,(g,y)=>u(g,y,m));if(V.isPlainObject(n)||n instanceof this.constructor)p(n,s);else if(V.isString(n)&&(n=n.trim())&&!lj(n))p(oj(n),s);else if(V.isObject(n)&&V.isIterable(n)){let h={},m,g;for(const y of n){if(!V.isArray(y))throw TypeError("Object iterator must return a key-value pair");h[g=y[0]]=(m=h[g])?V.isArray(m)?[...m,y[1]]:[m,y[1]]:y[1]}p(h,s)}else n!=null&&u(s,n,o);return this}get(n,s){if(n=yl(n),n){const o=V.findKey(this,n);if(o){const c=this[o];if(!s)return c;if(s===!0)return rj(c);if(V.isFunction(s))return s.call(this,c,o);if(V.isRegExp(s))return s.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,s){if(n=yl(n),n){const o=V.findKey(this,n);return!!(o&&this[o]!==void 0&&(!s||_f(this,this[o],o,s)))}return!1}delete(n,s){const o=this;let c=!1;function u(p){if(p=yl(p),p){const h=V.findKey(o,p);h&&(!s||_f(o,o[h],h,s))&&(delete o[h],c=!0)}}return V.isArray(n)?n.forEach(u):u(n),c}clear(n){const s=Object.keys(this);let o=s.length,c=!1;for(;o--;){const u=s[o];(!n||_f(this,this[u],u,n,!0))&&(delete this[u],c=!0)}return c}normalize(n){const s=this,o={};return V.forEach(this,(c,u)=>{const p=V.findKey(o,u);if(p){s[p]=ju(c),delete s[u];return}const h=n?cj(u):String(u).trim();h!==u&&delete s[u],s[h]=ju(c),o[h]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const s=Object.create(null);return V.forEach(this,(o,c)=>{o!=null&&o!==!1&&(s[c]=n&&V.isArray(o)?o.join(", "):o)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,s])=>n+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...s){const o=new this(n);return s.forEach(c=>o.set(c)),o}static accessor(n){const o=(this[hv]=this[hv]={accessors:{}}).accessors,c=this.prototype;function u(p){const h=yl(p);o[h]||(uj(c,p),o[h]=!0)}return V.isArray(n)?n.forEach(u):u(n),this}};sa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(sa.prototype,({value:t},n)=>{let s=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(o){this[s]=o}}});V.freezeMethods(sa);function Cf(t,n){const s=this||Fl,o=n||s,c=sa.from(o.headers);let u=o.data;return V.forEach(t,function(h){u=h.call(s,u,c.normalize(),n?n.status:void 0)}),c.normalize(),u}function Hb(t){return!!(t&&t.__CANCEL__)}function fr(t,n,s){Xe.call(this,t??"canceled",Xe.ERR_CANCELED,n,s),this.name="CanceledError"}V.inherits(fr,Xe,{__CANCEL__:!0});function $b(t,n,s){const o=s.config.validateStatus;!s.status||!o||o(s.status)?t(s):n(new Xe("Request failed with status code "+s.status,[Xe.ERR_BAD_REQUEST,Xe.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function dj(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function pj(t,n){t=t||10;const s=new Array(t),o=new Array(t);let c=0,u=0,p;return n=n!==void 0?n:1e3,function(m){const g=Date.now(),y=o[u];p||(p=g),s[c]=m,o[c]=g;let v=u,S=0;for(;v!==c;)S+=s[v++],v=v%t;if(c=(c+1)%t,c===u&&(u=(u+1)%t),g-p<n)return;const j=y&&g-y;return j?Math.round(S*1e3/j):void 0}}function fj(t,n){let s=0,o=1e3/n,c,u;const p=(g,y=Date.now())=>{s=y,c=null,u&&(clearTimeout(u),u=null),t(...g)};return[(...g)=>{const y=Date.now(),v=y-s;v>=o?p(g,y):(c=g,u||(u=setTimeout(()=>{u=null,p(c)},o-v)))},()=>c&&p(c)]}const zu=(t,n,s=3)=>{let o=0;const c=pj(50,250);return fj(u=>{const p=u.loaded,h=u.lengthComputable?u.total:void 0,m=p-o,g=c(m),y=p<=h;o=p;const v={loaded:p,total:h,progress:h?p/h:void 0,bytes:m,rate:g||void 0,estimated:g&&h&&y?(h-p)/g:void 0,event:u,lengthComputable:h!=null,[n?"download":"upload"]:!0};t(v)},s)},mv=(t,n)=>{const s=t!=null;return[o=>n[0]({lengthComputable:s,total:t,loaded:o}),n[1]]},gv=t=>(...n)=>V.asap(()=>t(...n)),hj=Fn.hasStandardBrowserEnv?((t,n)=>s=>(s=new URL(s,Fn.origin),t.protocol===s.protocol&&t.host===s.host&&(n||t.port===s.port)))(new URL(Fn.origin),Fn.navigator&&/(msie|trident)/i.test(Fn.navigator.userAgent)):()=>!0,mj=Fn.hasStandardBrowserEnv?{write(t,n,s,o,c,u,p){if(typeof document>"u")return;const h=[`${t}=${encodeURIComponent(n)}`];V.isNumber(s)&&h.push(`expires=${new Date(s).toUTCString()}`),V.isString(o)&&h.push(`path=${o}`),V.isString(c)&&h.push(`domain=${c}`),u===!0&&h.push("secure"),V.isString(p)&&h.push(`SameSite=${p}`),document.cookie=h.join("; ")},read(t){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function gj(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function yj(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function Vb(t,n,s){let o=!gj(n);return t&&(o||s==!1)?yj(t,n):n}const yv=t=>t instanceof sa?{...t}:t;function oo(t,n){n=n||{};const s={};function o(g,y,v,S){return V.isPlainObject(g)&&V.isPlainObject(y)?V.merge.call({caseless:S},g,y):V.isPlainObject(y)?V.merge({},y):V.isArray(y)?y.slice():y}function c(g,y,v,S){if(V.isUndefined(y)){if(!V.isUndefined(g))return o(void 0,g,v,S)}else return o(g,y,v,S)}function u(g,y){if(!V.isUndefined(y))return o(void 0,y)}function p(g,y){if(V.isUndefined(y)){if(!V.isUndefined(g))return o(void 0,g)}else return o(void 0,y)}function h(g,y,v){if(v in n)return o(g,y);if(v in t)return o(void 0,g)}const m={url:u,method:u,data:u,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,withXSRFToken:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:h,headers:(g,y,v)=>c(yv(g),yv(y),v,!0)};return V.forEach(Object.keys({...t,...n}),function(y){const v=m[y]||c,S=v(t[y],n[y],y);V.isUndefined(S)&&v!==h||(s[y]=S)}),s}const Fb=t=>{const n=oo({},t);let{data:s,withXSRFToken:o,xsrfHeaderName:c,xsrfCookieName:u,headers:p,auth:h}=n;if(n.headers=p=sa.from(p),n.url=Ob(Vb(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&p.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),V.isFormData(s)){if(Fn.hasStandardBrowserEnv||Fn.hasStandardBrowserWebWorkerEnv)p.setContentType(void 0);else if(V.isFunction(s.getHeaders)){const m=s.getHeaders(),g=["content-type","content-length"];Object.entries(m).forEach(([y,v])=>{g.includes(y.toLowerCase())&&p.set(y,v)})}}if(Fn.hasStandardBrowserEnv&&(o&&V.isFunction(o)&&(o=o(n)),o||o!==!1&&hj(n.url))){const m=c&&u&&mj.read(u);m&&p.set(c,m)}return n},xj=typeof XMLHttpRequest<"u",vj=xj&&function(t){return new Promise(function(s,o){const c=Fb(t);let u=c.data;const p=sa.from(c.headers).normalize();let{responseType:h,onUploadProgress:m,onDownloadProgress:g}=c,y,v,S,j,C;function T(){j&&j(),C&&C(),c.cancelToken&&c.cancelToken.unsubscribe(y),c.signal&&c.signal.removeEventListener("abort",y)}let E=new XMLHttpRequest;E.open(c.method.toUpperCase(),c.url,!0),E.timeout=c.timeout;function z(){if(!E)return;const R=sa.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),P={data:!h||h==="text"||h==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:R,config:t,request:E};$b(function(re){s(re),T()},function(re){o(re),T()},P),E=null}"onloadend"in E?E.onloadend=z:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(z)},E.onabort=function(){E&&(o(new Xe("Request aborted",Xe.ECONNABORTED,t,E)),E=null)},E.onerror=function(X){const P=X&&X.message?X.message:"Network Error",te=new Xe(P,Xe.ERR_NETWORK,t,E);te.event=X||null,o(te),E=null},E.ontimeout=function(){let X=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const P=c.transitional||Lb;c.timeoutErrorMessage&&(X=c.timeoutErrorMessage),o(new Xe(X,P.clarifyTimeoutError?Xe.ETIMEDOUT:Xe.ECONNABORTED,t,E)),E=null},u===void 0&&p.setContentType(null),"setRequestHeader"in E&&V.forEach(p.toJSON(),function(X,P){E.setRequestHeader(P,X)}),V.isUndefined(c.withCredentials)||(E.withCredentials=!!c.withCredentials),h&&h!=="json"&&(E.responseType=c.responseType),g&&([S,C]=zu(g,!0),E.addEventListener("progress",S)),m&&E.upload&&([v,j]=zu(m),E.upload.addEventListener("progress",v),E.upload.addEventListener("loadend",j)),(c.cancelToken||c.signal)&&(y=R=>{E&&(o(!R||R.type?new fr(null,t,E):R),E.abort(),E=null)},c.cancelToken&&c.cancelToken.subscribe(y),c.signal&&(c.signal.aborted?y():c.signal.addEventListener("abort",y)));const L=dj(c.url);if(L&&Fn.protocols.indexOf(L)===-1){o(new Xe("Unsupported protocol "+L+":",Xe.ERR_BAD_REQUEST,t));return}E.send(u||null)})},bj=(t,n)=>{const{length:s}=t=t?t.filter(Boolean):[];if(n||s){let o=new AbortController,c;const u=function(g){if(!c){c=!0,h();const y=g instanceof Error?g:this.reason;o.abort(y instanceof Xe?y:new fr(y instanceof Error?y.message:y))}};let p=n&&setTimeout(()=>{p=null,u(new Xe(`timeout ${n} of ms exceeded`,Xe.ETIMEDOUT))},n);const h=()=>{t&&(p&&clearTimeout(p),p=null,t.forEach(g=>{g.unsubscribe?g.unsubscribe(u):g.removeEventListener("abort",u)}),t=null)};t.forEach(g=>g.addEventListener("abort",u));const{signal:m}=o;return m.unsubscribe=()=>V.asap(h),m}},Sj=function*(t,n){let s=t.byteLength;if(s<n){yield t;return}let o=0,c;for(;o<s;)c=o+n,yield t.slice(o,c),o=c},wj=async function*(t,n){for await(const s of _j(t))yield*Sj(s,n)},_j=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:s,value:o}=await n.read();if(s)break;yield o}}finally{await n.cancel()}},xv=(t,n,s,o)=>{const c=wj(t,n);let u=0,p,h=m=>{p||(p=!0,o&&o(m))};return new ReadableStream({async pull(m){try{const{done:g,value:y}=await c.next();if(g){h(),m.close();return}let v=y.byteLength;if(s){let S=u+=v;s(S)}m.enqueue(new Uint8Array(y))}catch(g){throw h(g),g}},cancel(m){return h(m),c.return()}},{highWaterMark:2})},vv=64*1024,{isFunction:hu}=V,Cj=(({Request:t,Response:n})=>({Request:t,Response:n}))(V.global),{ReadableStream:bv,TextEncoder:Sv}=V.global,wv=(t,...n)=>{try{return!!t(...n)}catch{return!1}},jj=t=>{t=V.merge.call({skipUndefined:!0},Cj,t);const{fetch:n,Request:s,Response:o}=t,c=n?hu(n):typeof fetch=="function",u=hu(s),p=hu(o);if(!c)return!1;const h=c&&hu(bv),m=c&&(typeof Sv=="function"?(C=>T=>C.encode(T))(new Sv):async C=>new Uint8Array(await new s(C).arrayBuffer())),g=u&&h&&wv(()=>{let C=!1;const T=new s(Fn.origin,{body:new bv,method:"POST",get duplex(){return C=!0,"half"}}).headers.has("Content-Type");return C&&!T}),y=p&&h&&wv(()=>V.isReadableStream(new o("").body)),v={stream:y&&(C=>C.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(C=>{!v[C]&&(v[C]=(T,E)=>{let z=T&&T[C];if(z)return z.call(T);throw new Xe(`Response type '${C}' is not supported`,Xe.ERR_NOT_SUPPORT,E)})});const S=async C=>{if(C==null)return 0;if(V.isBlob(C))return C.size;if(V.isSpecCompliantForm(C))return(await new s(Fn.origin,{method:"POST",body:C}).arrayBuffer()).byteLength;if(V.isArrayBufferView(C)||V.isArrayBuffer(C))return C.byteLength;if(V.isURLSearchParams(C)&&(C=C+""),V.isString(C))return(await m(C)).byteLength},j=async(C,T)=>{const E=V.toFiniteNumber(C.getContentLength());return E??S(T)};return async C=>{let{url:T,method:E,data:z,signal:L,cancelToken:R,timeout:X,onDownloadProgress:P,onUploadProgress:te,responseType:re,headers:Q,withCredentials:ge="same-origin",fetchOptions:me}=Fb(C),Pe=n||fetch;re=re?(re+"").toLowerCase():"text";let qe=bj([L,R&&R.toAbortSignal()],X),Qe=null;const Re=qe&&qe.unsubscribe&&(()=>{qe.unsubscribe()});let Te;try{if(te&&g&&E!=="get"&&E!=="head"&&(Te=await j(Q,z))!==0){let we=new s(T,{method:"POST",body:z,duplex:"half"}),Ae;if(V.isFormData(z)&&(Ae=we.headers.get("content-type"))&&Q.setContentType(Ae),we.body){const[je,ie]=mv(Te,zu(gv(te)));z=xv(we.body,vv,je,ie)}}V.isString(ge)||(ge=ge?"include":"omit");const B=u&&"credentials"in s.prototype,ne={...me,signal:qe,method:E.toUpperCase(),headers:Q.normalize().toJSON(),body:z,duplex:"half",credentials:B?ge:void 0};Qe=u&&new s(T,ne);let le=await(u?Pe(Qe,me):Pe(T,ne));const Se=y&&(re==="stream"||re==="response");if(y&&(P||Se&&Re)){const we={};["status","statusText","headers"].forEach(_e=>{we[_e]=le[_e]});const Ae=V.toFiniteNumber(le.headers.get("content-length")),[je,ie]=P&&mv(Ae,zu(gv(P),!0))||[];le=new o(xv(le.body,vv,je,()=>{ie&&ie(),Re&&Re()}),we)}re=re||"text";let He=await v[V.findKey(v,re)||"text"](le,C);return!Se&&Re&&Re(),await new Promise((we,Ae)=>{$b(we,Ae,{data:He,headers:sa.from(le.headers),status:le.status,statusText:le.statusText,config:C,request:Qe})})}catch(B){throw Re&&Re(),B&&B.name==="TypeError"&&/Load failed|fetch/i.test(B.message)?Object.assign(new Xe("Network Error",Xe.ERR_NETWORK,C,Qe),{cause:B.cause||B}):Xe.from(B,B&&B.code,C,Qe)}}},Tj=new Map,qb=t=>{let n=t&&t.env||{};const{fetch:s,Request:o,Response:c}=n,u=[o,c,s];let p=u.length,h=p,m,g,y=Tj;for(;h--;)m=u[h],g=y.get(m),g===void 0&&y.set(m,g=h?new Map:jj(n)),y=g;return g};qb();const Xh={http:VC,xhr:vj,fetch:{get:qb}};V.forEach(Xh,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const _v=t=>`- ${t}`,kj=t=>V.isFunction(t)||t===null||t===!1;function Mj(t,n){t=V.isArray(t)?t:[t];const{length:s}=t;let o,c;const u={};for(let p=0;p<s;p++){o=t[p];let h;if(c=o,!kj(o)&&(c=Xh[(h=String(o)).toLowerCase()],c===void 0))throw new Xe(`Unknown adapter '${h}'`);if(c&&(V.isFunction(c)||(c=c.get(n))))break;u[h||"#"+p]=c}if(!c){const p=Object.entries(u).map(([m,g])=>`adapter ${m} `+(g===!1?"is not supported by the environment":"is not available in the build"));let h=s?p.length>1?`since :
`+p.map(_v).join(`
`):" "+_v(p[0]):"as no adapter specified";throw new Xe("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return c}const Gb={getAdapter:Mj,adapters:Xh};function jf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new fr(null,t)}function Cv(t){return jf(t),t.headers=sa.from(t.headers),t.data=Cf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Gb.getAdapter(t.adapter||Fl.adapter,t)(t).then(function(o){return jf(t),o.data=Cf.call(t,t.transformResponse,o),o.headers=sa.from(o.headers),o},function(o){return Hb(o)||(jf(t),o&&o.response&&(o.response.data=Cf.call(t,t.transformResponse,o.response),o.response.headers=sa.from(o.response.headers))),Promise.reject(o)})}const Wb="1.13.2",Zu={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Zu[t]=function(o){return typeof o===t||"a"+(n<1?"n ":" ")+t}});const jv={};Zu.transitional=function(n,s,o){function c(u,p){return"[Axios v"+Wb+"] Transitional option '"+u+"'"+p+(o?". "+o:"")}return(u,p,h)=>{if(n===!1)throw new Xe(c(p," has been removed"+(s?" in "+s:"")),Xe.ERR_DEPRECATED);return s&&!jv[p]&&(jv[p]=!0,console.warn(c(p," has been deprecated since v"+s+" and will be removed in the near future"))),n?n(u,p,h):!0}};Zu.spelling=function(n){return(s,o)=>(console.warn(`${o} is likely a misspelling of ${n}`),!0)};function Ej(t,n,s){if(typeof t!="object")throw new Xe("options must be an object",Xe.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let c=o.length;for(;c-- >0;){const u=o[c],p=n[u];if(p){const h=t[u],m=h===void 0||p(h,u,t);if(m!==!0)throw new Xe("option "+u+" must be "+m,Xe.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Xe("Unknown option "+u,Xe.ERR_BAD_OPTION)}}const Tu={assertOptions:Ej,validators:Zu},Ja=Tu.validators;let to=class{constructor(n){this.defaults=n||{},this.interceptors={request:new fv,response:new fv}}async request(n,s){try{return await this._request(n,s)}catch(o){if(o instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const u=c.stack?c.stack.replace(/^.+\n/,""):"";try{o.stack?u&&!String(o.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+u):o.stack=u}catch{}}throw o}}_request(n,s){typeof n=="string"?(s=s||{},s.url=n):s=n||{},s=oo(this.defaults,s);const{transitional:o,paramsSerializer:c,headers:u}=s;o!==void 0&&Tu.assertOptions(o,{silentJSONParsing:Ja.transitional(Ja.boolean),forcedJSONParsing:Ja.transitional(Ja.boolean),clarifyTimeoutError:Ja.transitional(Ja.boolean)},!1),c!=null&&(V.isFunction(c)?s.paramsSerializer={serialize:c}:Tu.assertOptions(c,{encode:Ja.function,serialize:Ja.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Tu.assertOptions(s,{baseUrl:Ja.spelling("baseURL"),withXsrfToken:Ja.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let p=u&&V.merge(u.common,u[s.method]);u&&V.forEach(["delete","get","head","post","put","patch","common"],C=>{delete u[C]}),s.headers=sa.concat(p,u);const h=[];let m=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(s)===!1||(m=m&&T.synchronous,h.unshift(T.fulfilled,T.rejected))});const g=[];this.interceptors.response.forEach(function(T){g.push(T.fulfilled,T.rejected)});let y,v=0,S;if(!m){const C=[Cv.bind(this),void 0];for(C.unshift(...h),C.push(...g),S=C.length,y=Promise.resolve(s);v<S;)y=y.then(C[v++],C[v++]);return y}S=h.length;let j=s;for(;v<S;){const C=h[v++],T=h[v++];try{j=C(j)}catch(E){T.call(this,E);break}}try{y=Cv.call(this,j)}catch(C){return Promise.reject(C)}for(v=0,S=g.length;v<S;)y=y.then(g[v++],g[v++]);return y}getUri(n){n=oo(this.defaults,n);const s=Vb(n.baseURL,n.url,n.allowAbsoluteUrls);return Ob(s,n.params,n.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(n){to.prototype[n]=function(s,o){return this.request(oo(o||{},{method:n,url:s,data:(o||{}).data}))}});V.forEach(["post","put","patch"],function(n){function s(o){return function(u,p,h){return this.request(oo(h||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:u,data:p}))}}to.prototype[n]=s(),to.prototype[n+"Form"]=s(!0)});let Aj=class Yb{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(u){s=u});const o=this;this.promise.then(c=>{if(!o._listeners)return;let u=o._listeners.length;for(;u-- >0;)o._listeners[u](c);o._listeners=null}),this.promise.then=c=>{let u;const p=new Promise(h=>{o.subscribe(h),u=h}).then(c);return p.cancel=function(){o.unsubscribe(u)},p},n(function(u,p,h){o.reason||(o.reason=new fr(u,p,h),s(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const s=this._listeners.indexOf(n);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const n=new AbortController,s=o=>{n.abort(o)};return this.subscribe(s),n.signal.unsubscribe=()=>this.unsubscribe(s),n.signal}static source(){let n;return{token:new Yb(function(c){n=c}),cancel:n}}};function Rj(t){return function(s){return t.apply(null,s)}}function Nj(t){return V.isObject(t)&&t.isAxiosError===!0}const rh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(rh).forEach(([t,n])=>{rh[n]=t});function Xb(t){const n=new to(t),s=Tb(to.prototype.request,n);return V.extend(s,to.prototype,n,{allOwnKeys:!0}),V.extend(s,n,null,{allOwnKeys:!0}),s.create=function(c){return Xb(oo(t,c))},s}const on=Xb(Fl);on.Axios=to;on.CanceledError=fr;on.CancelToken=Aj;on.isCancel=Hb;on.VERSION=Wb;on.toFormData=Qu;on.AxiosError=Xe;on.Cancel=on.CanceledError;on.all=function(n){return Promise.all(n)};on.spread=Rj;on.isAxiosError=Nj;on.mergeConfig=oo;on.AxiosHeaders=sa;on.formToJSON=t=>Pb(V.isHTMLForm(t)?new FormData(t):t);on.getAdapter=Gb.getAdapter;on.HttpStatusCode=rh;on.default=on;const{Axios:MU,AxiosError:EU,CanceledError:AU,isCancel:RU,CancelToken:NU,VERSION:DU,all:zU,Cancel:BU,isAxiosError:UU,spread:IU,toFormData:OU,AxiosHeaders:LU,HttpStatusCode:PU,formToJSON:HU,getAdapter:$U,mergeConfig:VU}=on,Dj="https://your-domain.com/api",De=on.create({baseURL:Dj,headers:{"Content-Type":"application/json"},withCredentials:!0});De.interceptors.request.use(t=>{const n=localStorage.getItem("token");return n&&(console.log("[API] Adding token to request:",t.url,"Token:",n.substring(0,20)+"..."),t.headers.Authorization=`Bearer ${n}`),t.data instanceof FormData&&(console.log("[API] FormData detected, removing Content-Type header for:",t.url),delete t.headers["Content-Type"]),t});De.interceptors.response.use(t=>t,t=>(t.response?.status===401?(console.warn("[API] 401 Unauthorized - logging out user"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"):t.response?.status===400&&console.error("[API] 400 Bad Request:",t.response?.data),Promise.reject(t)));const mi={login:async t=>{const n=await De.post("/auth/login",t);return n.data?.data||n.data},register:async t=>{const n=await De.post("/auth/register",t);return n.data?.data||n.data},sendOTP:async t=>(await De.post(`/otp/send-to-email?email=${encodeURIComponent(t)}`)).data,updatePassword:async(t,n)=>(await De.put("/auth/update-password",{oldPassword:t,newPassword:n})).data,resetPasswordByEmail:async(t,n,s)=>(await De.put("/auth/reset-password-by-email",{email:t,password:n,otp:s})).data,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")}};function _n(t,n="An error occurred"){if(t.response?.data?.error?.message)return t.response.data.error.message;if(t.response?.data?.message)return t.response.data.message;if(t.response?.data?.validationErrors){const s=t.response.data.validationErrors,o=Object.values(s)[0];if(Array.isArray(o)&&o.length>0)return o[0]}return t.message?t.message:n}function Ju(t){return t.response?.data?.error?.code?t.response.data.error.code:null}function zj(t){return Ju(t)==="Chat.Ban.UserBanned"}function Bj(t){switch(Ju(t)){case"Chat.Ban.UserBanned":return"You are banned from this chat and cannot perform this action.";case"Chat.Ban.AlreadyBanned":return"This user is already banned from this chat.";case"Chat.Ban.CannotBanSelf":return"You cannot ban yourself.";case"Chat.Ban.CannotBanOwner":return"You cannot ban the owner of this chat.";default:return _n(t,"An error occurred")}}function Uj(t){const n=Ju(t);return n==="UserBan.UserBanned"||n==="UserBan.CannotMessageBannedUser"}function Ij(t){return Ju(t)==="UserBan.UserBanned"}const Oj=()=>{try{return localStorage.getItem("token")}catch{return null}},Lj=()=>{try{const t=localStorage.getItem("user");return t?JSON.parse(t):null}catch{return null}},wt=Pl(t=>({user:null,token:null,isLoading:!1,error:null,initialized:!1,initializeAuth:async()=>{const n=Lj(),s=Oj();if(console.log("[authStore] Initializing auth:",{hasUser:!!n,hasToken:!!s,user:n}),s&&n)try{console.log("[authStore] Validating stored token...");const{userService:o}=await zt(async()=>{const{userService:u}=await Promise.resolve().then(()=>fa);return{userService:u}},void 0),c=await o.getCurrentUser();console.log("[authStore] Token is valid, user:",c),t({user:c,token:s,initialized:!0})}catch(o){console.warn("[authStore] Stored token is invalid, clearing auth:",o?.message),localStorage.removeItem("token"),localStorage.removeItem("user"),t({user:null,token:null,initialized:!0})}else t({user:n,token:s,initialized:!0})},login:async n=>{t({isLoading:!0,error:null});try{console.log("[authStore] Logging in...");const s=await mi.login(n);if(console.log("[authStore] Token received:",s?s.substring(0,20)+"...":"No token"),!s)throw new Error("No token received from login");localStorage.setItem("token",s),console.log("[authStore] Fetching user profile from /users/me...");const{userService:o}=await zt(async()=>{const{userService:u}=await Promise.resolve().then(()=>fa);return{userService:u}},void 0),c=await o.getCurrentUser();!c.email&&n.credential.includes("@")&&(c.email=n.credential),console.log("[authStore] User profile fetched:",c),localStorage.setItem("user",JSON.stringify(c)),console.log("[authStore] Updating state with user and token..."),t({user:c,token:s,isLoading:!1}),console.log("[authStore] Login complete, state updated")}catch(s){const o=_n(s,"Login failed");throw console.error("[authStore] Login error:",o,s),t({error:o,isLoading:!1}),s}},register:async(n,s,o,c)=>{t({isLoading:!0,error:null});try{console.log("[authStore] Registering user...");const u=await mi.register({email:n,username:s,password:o,otpCode:c});if(console.log("[authStore] Token received:",u?u.substring(0,20)+"...":"No token"),!u)throw new Error("No token received from registration");localStorage.setItem("token",u),console.log("[authStore] Fetching user profile from /users/me...");const{userService:p}=await zt(async()=>{const{userService:m}=await Promise.resolve().then(()=>fa);return{userService:m}},void 0),h=await p.getCurrentUser();h.email||(h.email=n),console.log("[authStore] User profile fetched:",h),localStorage.setItem("user",JSON.stringify(h)),console.log("[authStore] Updating state with user and token..."),t({user:h,token:u,isLoading:!1}),console.log("[authStore] Registration complete, state updated")}catch(u){const p=_n(u,"Registration failed");throw console.error("[authStore] Registration error:",p,u),t({error:p,isLoading:!1}),u}},logout:()=>{mi.logout(),t({user:null,token:null})},setUser:n=>{localStorage.setItem("user",JSON.stringify(n)),t({user:n})},clearError:()=>t({error:null})})),ql=()=>{const t=wt(v=>v.user),n=wt(v=>v.token),s=wt(v=>v.isLoading),o=wt(v=>v.initialized),c=wt(v=>v.error),u=wt(v=>v.login),p=wt(v=>v.register),h=wt(v=>v.logout),m=wt(v=>v.setUser),g=wt(v=>v.clearError),y=wt(v=>v.initializeAuth);return{user:t,token:n,isLoading:s,initialized:o,error:c,login:u,register:p,logout:h,setUser:m,clearError:g,initializeAuth:y,isAuthenticated:!!n&&!!t}},Tv=({children:t})=>{const{isAuthenticated:n,isLoading:s,initialized:o}=ql();return console.log("[ProtectedRoute] Current state:",{isAuthenticated:n,isLoading:s,initialized:o}),s||!o?r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"var(--background)",color:"var(--text)"},children:r.jsx("div",{children:"Loading..."})}):n?r.jsx(r.Fragment,{children:t}):(console.warn("[ProtectedRoute] Not authenticated, redirecting to login"),r.jsx(Qo,{to:"/login",replace:!0}))},Kh=b.createContext({});function Qh(t){const n=b.useRef(null);return n.current===null&&(n.current=t()),n.current}const Zh=typeof window<"u",Kb=Zh?b.useLayoutEffect:b.useEffect,ed=b.createContext(null);function Jh(t,n){t.indexOf(n)===-1&&t.push(n)}function em(t,n){const s=t.indexOf(n);s>-1&&t.splice(s,1)}const Ns=(t,n,s)=>s>n?n:s<t?t:s;let tm=()=>{};const Ds={},Qb=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Zb(t){return typeof t=="object"&&t!==null}const Jb=t=>/^0[^.\s]+$/u.test(t);function nm(t){let n;return()=>(n===void 0&&(n=t()),n)}const Na=t=>t,Pj=(t,n)=>s=>n(t(s)),Gl=(...t)=>t.reduce(Pj),Nl=(t,n,s)=>{const o=n-t;return o===0?1:(s-t)/o};class am{constructor(){this.subscriptions=[]}add(n){return Jh(this.subscriptions,n),()=>em(this.subscriptions,n)}notify(n,s,o){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](n,s,o);else for(let u=0;u<c;u++){const p=this.subscriptions[u];p&&p(n,s,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const as=t=>t*1e3,Ra=t=>t/1e3;function e1(t,n){return n?t*(1e3/n):0}const t1=(t,n,s)=>(((1-3*s+3*n)*t+(3*s-6*n))*t+3*n)*t,Hj=1e-7,$j=12;function Vj(t,n,s,o,c){let u,p,h=0;do p=n+(s-n)/2,u=t1(p,o,c)-t,u>0?s=p:n=p;while(Math.abs(u)>Hj&&++h<$j);return p}function Wl(t,n,s,o){if(t===n&&s===o)return Na;const c=u=>Vj(u,0,1,t,s);return u=>u===0||u===1?u:t1(c(u),n,o)}const n1=t=>n=>n<=.5?t(2*n)/2:(2-t(2*(1-n)))/2,a1=t=>n=>1-t(1-n),s1=Wl(.33,1.53,.69,.99),sm=a1(s1),i1=n1(sm),o1=t=>(t*=2)<1?.5*sm(t):.5*(2-Math.pow(2,-10*(t-1))),im=t=>1-Math.sin(Math.acos(t)),r1=a1(im),l1=n1(im),Fj=Wl(.42,0,1,1),qj=Wl(0,0,.58,1),c1=Wl(.42,0,.58,1),Gj=t=>Array.isArray(t)&&typeof t[0]!="number",u1=t=>Array.isArray(t)&&typeof t[0]=="number",Wj={linear:Na,easeIn:Fj,easeInOut:c1,easeOut:qj,circIn:im,circInOut:l1,circOut:r1,backIn:sm,backInOut:i1,backOut:s1,anticipate:o1},Yj=t=>typeof t=="string",kv=t=>{if(u1(t)){tm(t.length===4);const[n,s,o,c]=t;return Wl(n,s,o,c)}else if(Yj(t))return Wj[t];return t},mu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Xj(t,n){let s=new Set,o=new Set,c=!1,u=!1;const p=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function m(y){p.has(y)&&(g.schedule(y),t()),y(h)}const g={schedule:(y,v=!1,S=!1)=>{const C=S&&c?s:o;return v&&p.add(y),C.has(y)||C.add(y),y},cancel:y=>{o.delete(y),p.delete(y)},process:y=>{if(h=y,c){u=!0;return}c=!0,[s,o]=[o,s],s.forEach(m),s.clear(),c=!1,u&&(u=!1,g.process(y))}};return g}const Kj=40;function d1(t,n){let s=!1,o=!0;const c={delta:0,timestamp:0,isProcessing:!1},u=()=>s=!0,p=mu.reduce((R,X)=>(R[X]=Xj(u),R),{}),{setup:h,read:m,resolveKeyframes:g,preUpdate:y,update:v,preRender:S,render:j,postRender:C}=p,T=()=>{const R=Ds.useManualTiming?c.timestamp:performance.now();s=!1,Ds.useManualTiming||(c.delta=o?1e3/60:Math.max(Math.min(R-c.timestamp,Kj),1)),c.timestamp=R,c.isProcessing=!0,h.process(c),m.process(c),g.process(c),y.process(c),v.process(c),S.process(c),j.process(c),C.process(c),c.isProcessing=!1,s&&n&&(o=!1,t(T))},E=()=>{s=!0,o=!0,c.isProcessing||t(T)};return{schedule:mu.reduce((R,X)=>{const P=p[X];return R[X]=(te,re=!1,Q=!1)=>(s||E(),P.schedule(te,re,Q)),R},{}),cancel:R=>{for(let X=0;X<mu.length;X++)p[mu[X]].cancel(R)},state:c,steps:p}}const{schedule:$t,cancel:yi,state:Un,steps:Tf}=d1(typeof requestAnimationFrame<"u"?requestAnimationFrame:Na,!0);let ku;function Qj(){ku=void 0}const na={now:()=>(ku===void 0&&na.set(Un.isProcessing||Ds.useManualTiming?Un.timestamp:performance.now()),ku),set:t=>{ku=t,queueMicrotask(Qj)}},p1=t=>n=>typeof n=="string"&&n.startsWith(t),f1=p1("--"),Zj=p1("var(--"),om=t=>Zj(t)?Jj.test(t.split("/*")[0].trim()):!1,Jj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,hr={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Dl={...hr,transform:t=>Ns(0,1,t)},gu={...hr,default:1},Cl=t=>Math.round(t*1e5)/1e5,rm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function e2(t){return t==null}const t2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lm=(t,n)=>s=>!!(typeof s=="string"&&t2.test(s)&&s.startsWith(t)||n&&!e2(s)&&Object.prototype.hasOwnProperty.call(s,n)),h1=(t,n,s)=>o=>{if(typeof o!="string")return o;const[c,u,p,h]=o.match(rm);return{[t]:parseFloat(c),[n]:parseFloat(u),[s]:parseFloat(p),alpha:h!==void 0?parseFloat(h):1}},n2=t=>Ns(0,255,t),kf={...hr,transform:t=>Math.round(n2(t))},Ji={test:lm("rgb","red"),parse:h1("red","green","blue"),transform:({red:t,green:n,blue:s,alpha:o=1})=>"rgba("+kf.transform(t)+", "+kf.transform(n)+", "+kf.transform(s)+", "+Cl(Dl.transform(o))+")"};function a2(t){let n="",s="",o="",c="";return t.length>5?(n=t.substring(1,3),s=t.substring(3,5),o=t.substring(5,7),c=t.substring(7,9)):(n=t.substring(1,2),s=t.substring(2,3),o=t.substring(3,4),c=t.substring(4,5),n+=n,s+=s,o+=o,c+=c),{red:parseInt(n,16),green:parseInt(s,16),blue:parseInt(o,16),alpha:c?parseInt(c,16)/255:1}}const lh={test:lm("#"),parse:a2,transform:Ji.transform},Yl=t=>({test:n=>typeof n=="string"&&n.endsWith(t)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${t}`}),hi=Yl("deg"),ss=Yl("%"),Fe=Yl("px"),s2=Yl("vh"),i2=Yl("vw"),Mv={...ss,parse:t=>ss.parse(t)/100,transform:t=>ss.transform(t*100)},Zo={test:lm("hsl","hue"),parse:h1("hue","saturation","lightness"),transform:({hue:t,saturation:n,lightness:s,alpha:o=1})=>"hsla("+Math.round(t)+", "+ss.transform(Cl(n))+", "+ss.transform(Cl(s))+", "+Cl(Dl.transform(o))+")"},hn={test:t=>Ji.test(t)||lh.test(t)||Zo.test(t),parse:t=>Ji.test(t)?Ji.parse(t):Zo.test(t)?Zo.parse(t):lh.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ji.transform(t):Zo.transform(t),getAnimatableNone:t=>{const n=hn.parse(t);return n.alpha=0,hn.transform(n)}},o2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function r2(t){return isNaN(t)&&typeof t=="string"&&(t.match(rm)?.length||0)+(t.match(o2)?.length||0)>0}const m1="number",g1="color",l2="var",c2="var(",Ev="${}",u2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zl(t){const n=t.toString(),s=[],o={color:[],number:[],var:[]},c=[];let u=0;const h=n.replace(u2,m=>(hn.test(m)?(o.color.push(u),c.push(g1),s.push(hn.parse(m))):m.startsWith(c2)?(o.var.push(u),c.push(l2),s.push(m)):(o.number.push(u),c.push(m1),s.push(parseFloat(m))),++u,Ev)).split(Ev);return{values:s,split:h,indexes:o,types:c}}function y1(t){return zl(t).values}function x1(t){const{split:n,types:s}=zl(t),o=n.length;return c=>{let u="";for(let p=0;p<o;p++)if(u+=n[p],c[p]!==void 0){const h=s[p];h===m1?u+=Cl(c[p]):h===g1?u+=hn.transform(c[p]):u+=c[p]}return u}}const d2=t=>typeof t=="number"?0:hn.test(t)?hn.getAnimatableNone(t):t;function p2(t){const n=y1(t);return x1(t)(n.map(d2))}const xi={test:r2,parse:y1,createTransformer:x1,getAnimatableNone:p2};function Mf(t,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(n-t)*6*s:s<1/2?n:s<2/3?t+(n-t)*(2/3-s)*6:t}function f2({hue:t,saturation:n,lightness:s,alpha:o}){t/=360,n/=100,s/=100;let c=0,u=0,p=0;if(!n)c=u=p=s;else{const h=s<.5?s*(1+n):s+n-s*n,m=2*s-h;c=Mf(m,h,t+1/3),u=Mf(m,h,t),p=Mf(m,h,t-1/3)}return{red:Math.round(c*255),green:Math.round(u*255),blue:Math.round(p*255),alpha:o}}function Bu(t,n){return s=>s>0?n:t}const Gt=(t,n,s)=>t+(n-t)*s,Ef=(t,n,s)=>{const o=t*t,c=s*(n*n-o)+o;return c<0?0:Math.sqrt(c)},h2=[lh,Ji,Zo],m2=t=>h2.find(n=>n.test(t));function Av(t){const n=m2(t);if(!n)return!1;let s=n.parse(t);return n===Zo&&(s=f2(s)),s}const Rv=(t,n)=>{const s=Av(t),o=Av(n);if(!s||!o)return Bu(t,n);const c={...s};return u=>(c.red=Ef(s.red,o.red,u),c.green=Ef(s.green,o.green,u),c.blue=Ef(s.blue,o.blue,u),c.alpha=Gt(s.alpha,o.alpha,u),Ji.transform(c))},ch=new Set(["none","hidden"]);function g2(t,n){return ch.has(t)?s=>s<=0?t:n:s=>s>=1?n:t}function y2(t,n){return s=>Gt(t,n,s)}function cm(t){return typeof t=="number"?y2:typeof t=="string"?om(t)?Bu:hn.test(t)?Rv:b2:Array.isArray(t)?v1:typeof t=="object"?hn.test(t)?Rv:x2:Bu}function v1(t,n){const s=[...t],o=s.length,c=t.map((u,p)=>cm(u)(u,n[p]));return u=>{for(let p=0;p<o;p++)s[p]=c[p](u);return s}}function x2(t,n){const s={...t,...n},o={};for(const c in s)t[c]!==void 0&&n[c]!==void 0&&(o[c]=cm(t[c])(t[c],n[c]));return c=>{for(const u in o)s[u]=o[u](c);return s}}function v2(t,n){const s=[],o={color:0,var:0,number:0};for(let c=0;c<n.values.length;c++){const u=n.types[c],p=t.indexes[u][o[u]],h=t.values[p]??0;s[c]=h,o[u]++}return s}const b2=(t,n)=>{const s=xi.createTransformer(n),o=zl(t),c=zl(n);return o.indexes.var.length===c.indexes.var.length&&o.indexes.color.length===c.indexes.color.length&&o.indexes.number.length>=c.indexes.number.length?ch.has(t)&&!c.values.length||ch.has(n)&&!o.values.length?g2(t,n):Gl(v1(v2(o,c),c.values),s):Bu(t,n)};function b1(t,n,s){return typeof t=="number"&&typeof n=="number"&&typeof s=="number"?Gt(t,n,s):cm(t)(t,n)}const S2=t=>{const n=({timestamp:s})=>t(s);return{start:(s=!0)=>$t.update(n,s),stop:()=>yi(n),now:()=>Un.isProcessing?Un.timestamp:na.now()}},S1=(t,n,s=10)=>{let o="";const c=Math.max(Math.round(n/s),2);for(let u=0;u<c;u++)o+=Math.round(t(u/(c-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},Uu=2e4;function um(t){let n=0;const s=50;let o=t.next(n);for(;!o.done&&n<Uu;)n+=s,o=t.next(n);return n>=Uu?1/0:n}function w2(t,n=100,s){const o=s({...t,keyframes:[0,n]}),c=Math.min(um(o),Uu);return{type:"keyframes",ease:u=>o.next(c*u).value/n,duration:Ra(c)}}const _2=5;function w1(t,n,s){const o=Math.max(n-_2,0);return e1(s-t(o),n-o)}const Kt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Af=.001;function C2({duration:t=Kt.duration,bounce:n=Kt.bounce,velocity:s=Kt.velocity,mass:o=Kt.mass}){let c,u,p=1-n;p=Ns(Kt.minDamping,Kt.maxDamping,p),t=Ns(Kt.minDuration,Kt.maxDuration,Ra(t)),p<1?(c=g=>{const y=g*p,v=y*t,S=y-s,j=uh(g,p),C=Math.exp(-v);return Af-S/j*C},u=g=>{const v=g*p*t,S=v*s+s,j=Math.pow(p,2)*Math.pow(g,2)*t,C=Math.exp(-v),T=uh(Math.pow(g,2),p);return(-c(g)+Af>0?-1:1)*((S-j)*C)/T}):(c=g=>{const y=Math.exp(-g*t),v=(g-s)*t+1;return-Af+y*v},u=g=>{const y=Math.exp(-g*t),v=(s-g)*(t*t);return y*v});const h=5/t,m=T2(c,u,h);if(t=as(t),isNaN(m))return{stiffness:Kt.stiffness,damping:Kt.damping,duration:t};{const g=Math.pow(m,2)*o;return{stiffness:g,damping:p*2*Math.sqrt(o*g),duration:t}}}const j2=12;function T2(t,n,s){let o=s;for(let c=1;c<j2;c++)o=o-t(o)/n(o);return o}function uh(t,n){return t*Math.sqrt(1-n*n)}const k2=["duration","bounce"],M2=["stiffness","damping","mass"];function Nv(t,n){return n.some(s=>t[s]!==void 0)}function E2(t){let n={velocity:Kt.velocity,stiffness:Kt.stiffness,damping:Kt.damping,mass:Kt.mass,isResolvedFromDuration:!1,...t};if(!Nv(t,M2)&&Nv(t,k2))if(t.visualDuration){const s=t.visualDuration,o=2*Math.PI/(s*1.2),c=o*o,u=2*Ns(.05,1,1-(t.bounce||0))*Math.sqrt(c);n={...n,mass:Kt.mass,stiffness:c,damping:u}}else{const s=C2(t);n={...n,...s,mass:Kt.mass},n.isResolvedFromDuration=!0}return n}function Iu(t=Kt.visualDuration,n=Kt.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:n}:t;let{restSpeed:o,restDelta:c}=s;const u=s.keyframes[0],p=s.keyframes[s.keyframes.length-1],h={done:!1,value:u},{stiffness:m,damping:g,mass:y,duration:v,velocity:S,isResolvedFromDuration:j}=E2({...s,velocity:-Ra(s.velocity||0)}),C=S||0,T=g/(2*Math.sqrt(m*y)),E=p-u,z=Ra(Math.sqrt(m/y)),L=Math.abs(E)<5;o||(o=L?Kt.restSpeed.granular:Kt.restSpeed.default),c||(c=L?Kt.restDelta.granular:Kt.restDelta.default);let R;if(T<1){const P=uh(z,T);R=te=>{const re=Math.exp(-T*z*te);return p-re*((C+T*z*E)/P*Math.sin(P*te)+E*Math.cos(P*te))}}else if(T===1)R=P=>p-Math.exp(-z*P)*(E+(C+z*E)*P);else{const P=z*Math.sqrt(T*T-1);R=te=>{const re=Math.exp(-T*z*te),Q=Math.min(P*te,300);return p-re*((C+T*z*E)*Math.sinh(Q)+P*E*Math.cosh(Q))/P}}const X={calculatedDuration:j&&v||null,next:P=>{const te=R(P);if(j)h.done=P>=v;else{let re=P===0?C:0;T<1&&(re=P===0?as(C):w1(R,P,te));const Q=Math.abs(re)<=o,ge=Math.abs(p-te)<=c;h.done=Q&&ge}return h.value=h.done?p:te,h},toString:()=>{const P=Math.min(um(X),Uu),te=S1(re=>X.next(P*re).value,P,30);return P+"ms "+te},toTransition:()=>{}};return X}Iu.applyToOptions=t=>{const n=w2(t,100,Iu);return t.ease=n.ease,t.duration=as(n.duration),t.type="keyframes",t};function dh({keyframes:t,velocity:n=0,power:s=.8,timeConstant:o=325,bounceDamping:c=10,bounceStiffness:u=500,modifyTarget:p,min:h,max:m,restDelta:g=.5,restSpeed:y}){const v=t[0],S={done:!1,value:v},j=Q=>h!==void 0&&Q<h||m!==void 0&&Q>m,C=Q=>h===void 0?m:m===void 0||Math.abs(h-Q)<Math.abs(m-Q)?h:m;let T=s*n;const E=v+T,z=p===void 0?E:p(E);z!==E&&(T=z-v);const L=Q=>-T*Math.exp(-Q/o),R=Q=>z+L(Q),X=Q=>{const ge=L(Q),me=R(Q);S.done=Math.abs(ge)<=g,S.value=S.done?z:me};let P,te;const re=Q=>{j(S.value)&&(P=Q,te=Iu({keyframes:[S.value,C(S.value)],velocity:w1(R,Q,S.value),damping:c,stiffness:u,restDelta:g,restSpeed:y}))};return re(0),{calculatedDuration:null,next:Q=>{let ge=!1;return!te&&P===void 0&&(ge=!0,X(Q),re(Q)),P!==void 0&&Q>=P?te.next(Q-P):(!ge&&X(Q),S)}}}function A2(t,n,s){const o=[],c=s||Ds.mix||b1,u=t.length-1;for(let p=0;p<u;p++){let h=c(t[p],t[p+1]);if(n){const m=Array.isArray(n)?n[p]||Na:n;h=Gl(m,h)}o.push(h)}return o}function R2(t,n,{clamp:s=!0,ease:o,mixer:c}={}){const u=t.length;if(tm(u===n.length),u===1)return()=>n[0];if(u===2&&n[0]===n[1])return()=>n[1];const p=t[0]===t[1];t[0]>t[u-1]&&(t=[...t].reverse(),n=[...n].reverse());const h=A2(n,o,c),m=h.length,g=y=>{if(p&&y<t[0])return n[0];let v=0;if(m>1)for(;v<t.length-2&&!(y<t[v+1]);v++);const S=Nl(t[v],t[v+1],y);return h[v](S)};return s?y=>g(Ns(t[0],t[u-1],y)):g}function N2(t,n){const s=t[t.length-1];for(let o=1;o<=n;o++){const c=Nl(0,n,o);t.push(Gt(s,1,c))}}function D2(t){const n=[0];return N2(n,t.length-1),n}function z2(t,n){return t.map(s=>s*n)}function B2(t,n){return t.map(()=>n||c1).splice(0,t.length-1)}function jl({duration:t=300,keyframes:n,times:s,ease:o="easeInOut"}){const c=Gj(o)?o.map(kv):kv(o),u={done:!1,value:n[0]},p=z2(s&&s.length===n.length?s:D2(n),t),h=R2(p,n,{ease:Array.isArray(c)?c:B2(n,c)});return{calculatedDuration:t,next:m=>(u.value=h(m),u.done=m>=t,u)}}const U2=t=>t!==null;function dm(t,{repeat:n,repeatType:s="loop"},o,c=1){const u=t.filter(U2),h=c<0||n&&s!=="loop"&&n%2===1?0:u.length-1;return!h||o===void 0?u[h]:o}const I2={decay:dh,inertia:dh,tween:jl,keyframes:jl,spring:Iu};function _1(t){typeof t.type=="string"&&(t.type=I2[t.type])}class pm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,s){return this.finished.then(n,s)}}const O2=t=>t/100;class fm extends pm{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==na.now()&&this.tick(na.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;_1(n);const{type:s=jl,repeat:o=0,repeatDelay:c=0,repeatType:u,velocity:p=0}=n;let{keyframes:h}=n;const m=s||jl;m!==jl&&typeof h[0]!="number"&&(this.mixKeyframes=Gl(O2,b1(h[0],h[1])),h=[0,100]);const g=m({...n,keyframes:h});u==="mirror"&&(this.mirroredGenerator=m({...n,keyframes:[...h].reverse(),velocity:-p})),g.calculatedDuration===null&&(g.calculatedDuration=um(g));const{calculatedDuration:y}=g;this.calculatedDuration=y,this.resolvedDuration=y+c,this.totalDuration=this.resolvedDuration*(o+1)-c,this.generator=g}updateTime(n){const s=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(n,s=!1){const{generator:o,totalDuration:c,mixKeyframes:u,mirroredGenerator:p,resolvedDuration:h,calculatedDuration:m}=this;if(this.startTime===null)return o.next(0);const{delay:g=0,keyframes:y,repeat:v,repeatType:S,repeatDelay:j,type:C,onUpdate:T,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-c/this.speed,this.startTime)),s?this.currentTime=n:this.updateTime(n);const z=this.currentTime-g*(this.playbackSpeed>=0?1:-1),L=this.playbackSpeed>=0?z<0:z>c;this.currentTime=Math.max(z,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let R=this.currentTime,X=o;if(v){const Q=Math.min(this.currentTime,c)/h;let ge=Math.floor(Q),me=Q%1;!me&&Q>=1&&(me=1),me===1&&ge--,ge=Math.min(ge,v+1),!!(ge%2)&&(S==="reverse"?(me=1-me,j&&(me-=j/h)):S==="mirror"&&(X=p)),R=Ns(0,1,me)*h}const P=L?{done:!1,value:y[0]}:X.next(R);u&&(P.value=u(P.value));let{done:te}=P;!L&&m!==null&&(te=this.playbackSpeed>=0?this.currentTime>=c:this.currentTime<=0);const re=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&te);return re&&C!==dh&&(P.value=dm(y,this.options,E,this.speed)),T&&T(P.value),re&&this.finish(),P}then(n,s){return this.finished.then(n,s)}get duration(){return Ra(this.calculatedDuration)}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+Ra(n)}get time(){return Ra(this.currentTime)}set time(n){n=as(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(na.now());const s=this.playbackSpeed!==n;this.playbackSpeed=n,s&&(this.time=Ra(this.currentTime))}play(){if(this.isStopped)return;const{driver:n=S2,startTime:s}=this.options;this.driver||(this.driver=n(c=>this.tick(c))),this.options.onPlay?.();const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=s??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(na.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),n.observe(this)}}function L2(t){for(let n=1;n<t.length;n++)t[n]??(t[n]=t[n-1])}const eo=t=>t*180/Math.PI,ph=t=>{const n=eo(Math.atan2(t[1],t[0]));return fh(n)},P2={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ph,rotateZ:ph,skewX:t=>eo(Math.atan(t[1])),skewY:t=>eo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},fh=t=>(t=t%360,t<0&&(t+=360),t),Dv=ph,zv=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Bv=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),H2={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:zv,scaleY:Bv,scale:t=>(zv(t)+Bv(t))/2,rotateX:t=>fh(eo(Math.atan2(t[6],t[5]))),rotateY:t=>fh(eo(Math.atan2(-t[2],t[0]))),rotateZ:Dv,rotate:Dv,skewX:t=>eo(Math.atan(t[4])),skewY:t=>eo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function hh(t){return t.includes("scale")?1:0}function mh(t,n){if(!t||t==="none")return hh(n);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,c;if(s)o=H2,c=s;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=P2,c=h}if(!c)return hh(n);const u=o[n],p=c[1].split(",").map(V2);return typeof u=="function"?u(p):p[u]}const $2=(t,n)=>{const{transform:s="none"}=getComputedStyle(t);return mh(s,n)};function V2(t){return parseFloat(t.trim())}const mr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],gr=new Set(mr),Uv=t=>t===hr||t===Fe,F2=new Set(["x","y","z"]),q2=mr.filter(t=>!F2.has(t));function G2(t){const n=[];return q2.forEach(s=>{const o=t.getValue(s);o!==void 0&&(n.push([s,o.get()]),o.set(s.startsWith("scale")?1:0))}),n}const no={width:({x:t},{paddingLeft:n="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(n)-parseFloat(s),height:({y:t},{paddingTop:n="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(n)-parseFloat(s),top:(t,{top:n})=>parseFloat(n),left:(t,{left:n})=>parseFloat(n),bottom:({y:t},{top:n})=>parseFloat(n)+(t.max-t.min),right:({x:t},{left:n})=>parseFloat(n)+(t.max-t.min),x:(t,{transform:n})=>mh(n,"x"),y:(t,{transform:n})=>mh(n,"y")};no.translateX=no.x;no.translateY=no.y;const ao=new Set;let gh=!1,yh=!1,xh=!1;function C1(){if(yh){const t=Array.from(ao).filter(o=>o.needsMeasurement),n=new Set(t.map(o=>o.element)),s=new Map;n.forEach(o=>{const c=G2(o);c.length&&(s.set(o,c),o.render())}),t.forEach(o=>o.measureInitialState()),n.forEach(o=>{o.render();const c=s.get(o);c&&c.forEach(([u,p])=>{o.getValue(u)?.set(p)})}),t.forEach(o=>o.measureEndState()),t.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}yh=!1,gh=!1,ao.forEach(t=>t.complete(xh)),ao.clear()}function j1(){ao.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(yh=!0)})}function W2(){xh=!0,j1(),C1(),xh=!1}class hm{constructor(n,s,o,c,u,p=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=s,this.name=o,this.motionValue=c,this.element=u,this.isAsync=p}scheduleResolve(){this.state="scheduled",this.isAsync?(ao.add(this),gh||(gh=!0,$t.read(j1),$t.resolveKeyframes(C1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:s,element:o,motionValue:c}=this;if(n[0]===null){const u=c?.get(),p=n[n.length-1];if(u!==void 0)n[0]=u;else if(o&&s){const h=o.readValue(s,p);h!=null&&(n[0]=h)}n[0]===void 0&&(n[0]=p),c&&u===void 0&&c.set(n[0])}L2(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),ao.delete(this)}cancel(){this.state==="scheduled"&&(ao.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Y2=t=>t.startsWith("--");function X2(t,n,s){Y2(n)?t.style.setProperty(n,s):t.style[n]=s}const K2=nm(()=>window.ScrollTimeline!==void 0),Q2={};function Z2(t,n){const s=nm(t);return()=>Q2[n]??s()}const T1=Z2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Sl=([t,n,s,o])=>`cubic-bezier(${t}, ${n}, ${s}, ${o})`,Iv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sl([0,.65,.55,1]),circOut:Sl([.55,0,1,.45]),backIn:Sl([.31,.01,.66,-.59]),backOut:Sl([.33,1.53,.69,.99])};function k1(t,n){if(t)return typeof t=="function"?T1()?S1(t,n):"ease-out":u1(t)?Sl(t):Array.isArray(t)?t.map(s=>k1(s,n)||Iv.easeOut):Iv[t]}function J2(t,n,s,{delay:o=0,duration:c=300,repeat:u=0,repeatType:p="loop",ease:h="easeOut",times:m}={},g=void 0){const y={[n]:s};m&&(y.offset=m);const v=k1(h,c);Array.isArray(v)&&(y.easing=v);const S={delay:o,duration:c,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:u+1,direction:p==="reverse"?"alternate":"normal"};return g&&(S.pseudoElement=g),t.animate(y,S)}function M1(t){return typeof t=="function"&&"applyToOptions"in t}function eT({type:t,...n}){return M1(t)&&T1()?t.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class tT extends pm{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:s,name:o,keyframes:c,pseudoElement:u,allowFlatten:p=!1,finalKeyframe:h,onComplete:m}=n;this.isPseudoElement=!!u,this.allowFlatten=p,this.options=n,tm(typeof n.type!="string");const g=eT(n);this.animation=J2(s,o,c,g,u),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const y=dm(c,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(y):X2(s,o,y),this.animation.cancel()}m?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const n=this.animation.effect?.getComputedTiming?.().duration||0;return Ra(Number(n))}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+Ra(n)}get time(){return Ra(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=as(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,n&&K2()?(this.animation.timeline=n,Na):s(this)}}const E1={anticipate:o1,backInOut:i1,circInOut:l1};function nT(t){return t in E1}function aT(t){typeof t.ease=="string"&&nT(t.ease)&&(t.ease=E1[t.ease])}const Ov=10;class sT extends tT{constructor(n){aT(n),_1(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:s,onUpdate:o,onComplete:c,element:u,...p}=this.options;if(!s)return;if(n!==void 0){s.set(n);return}const h=new fm({...p,autoplay:!1}),m=as(this.finishedTime??this.time);s.setWithVelocity(h.sample(m-Ov).value,h.sample(m).value,Ov),h.stop()}}const Lv=(t,n)=>n==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(xi.test(t)||t==="0")&&!t.startsWith("url("));function iT(t){const n=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==n)return!0}function oT(t,n,s,o){const c=t[0];if(c===null)return!1;if(n==="display"||n==="visibility")return!0;const u=t[t.length-1],p=Lv(c,n),h=Lv(u,n);return!p||!h?!1:iT(t)||(s==="spring"||M1(s))&&o}function vh(t){t.duration=0,t.type="keyframes"}const rT=new Set(["opacity","clipPath","filter","transform"]),lT=nm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function cT(t){const{motionValue:n,name:s,repeatDelay:o,repeatType:c,damping:u,type:p}=t;if(!(n?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:g}=n.owner.getProps();return lT()&&s&&rT.has(s)&&(s!=="transform"||!g)&&!m&&!o&&c!=="mirror"&&u!==0&&p!=="inertia"}const uT=40;class dT extends pm{constructor({autoplay:n=!0,delay:s=0,type:o="keyframes",repeat:c=0,repeatDelay:u=0,repeatType:p="loop",keyframes:h,name:m,motionValue:g,element:y,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=na.now();const S={autoplay:n,delay:s,type:o,repeat:c,repeatDelay:u,repeatType:p,name:m,motionValue:g,element:y,...v},j=y?.KeyframeResolver||hm;this.keyframeResolver=new j(h,(C,T,E)=>this.onKeyframesResolved(C,T,S,!E),m,g,y),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(n,s,o,c){this.keyframeResolver=void 0;const{name:u,type:p,velocity:h,delay:m,isHandoff:g,onUpdate:y}=o;this.resolvedAt=na.now(),oT(n,u,p,h)||((Ds.instantAnimations||!m)&&y?.(dm(n,o,s)),n[0]=n[n.length-1],vh(o),o.repeat=0);const S={startTime:c?this.resolvedAt?this.resolvedAt-this.createdAt>uT?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...o,keyframes:n},j=!g&&cT(S)?new sT({...S,element:S.motionValue.owner.current}):new fm(S);j.finished.then(()=>this.notifyFinished()).catch(Na),this.pendingTimeline&&(this.stopTimeline=j.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=j}get finished(){return this._animation?this.animation.finished:this._finished}then(n,s){return this.finished.finally(n).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),W2()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const pT=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function fT(t){const n=pT.exec(t);if(!n)return[,];const[,s,o,c]=n;return[`--${s??o}`,c]}function A1(t,n,s=1){const[o,c]=fT(t);if(!o)return;const u=window.getComputedStyle(n).getPropertyValue(o);if(u){const p=u.trim();return Qb(p)?parseFloat(p):p}return om(c)?A1(c,n,s+1):c}function mm(t,n){return t?.[n]??t?.default??t}const R1=new Set(["width","height","top","left","right","bottom",...mr]),hT={test:t=>t==="auto",parse:t=>t},N1=t=>n=>n.test(t),D1=[hr,Fe,ss,hi,i2,s2,hT],Pv=t=>D1.find(N1(t));function mT(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Jb(t):!0}const gT=new Set(["brightness","contrast","saturate","opacity"]);function yT(t){const[n,s]=t.slice(0,-1).split("(");if(n==="drop-shadow")return t;const[o]=s.match(rm)||[];if(!o)return t;const c=s.replace(o,"");let u=gT.has(n)?1:0;return o!==s&&(u*=100),n+"("+u+c+")"}const xT=/\b([a-z-]*)\(.*?\)/gu,bh={...xi,getAnimatableNone:t=>{const n=t.match(xT);return n?n.map(yT).join(" "):t}},Hv={...hr,transform:Math.round},vT={rotate:hi,rotateX:hi,rotateY:hi,rotateZ:hi,scale:gu,scaleX:gu,scaleY:gu,scaleZ:gu,skew:hi,skewX:hi,skewY:hi,distance:Fe,translateX:Fe,translateY:Fe,translateZ:Fe,x:Fe,y:Fe,z:Fe,perspective:Fe,transformPerspective:Fe,opacity:Dl,originX:Mv,originY:Mv,originZ:Fe},gm={borderWidth:Fe,borderTopWidth:Fe,borderRightWidth:Fe,borderBottomWidth:Fe,borderLeftWidth:Fe,borderRadius:Fe,radius:Fe,borderTopLeftRadius:Fe,borderTopRightRadius:Fe,borderBottomRightRadius:Fe,borderBottomLeftRadius:Fe,width:Fe,maxWidth:Fe,height:Fe,maxHeight:Fe,top:Fe,right:Fe,bottom:Fe,left:Fe,padding:Fe,paddingTop:Fe,paddingRight:Fe,paddingBottom:Fe,paddingLeft:Fe,margin:Fe,marginTop:Fe,marginRight:Fe,marginBottom:Fe,marginLeft:Fe,backgroundPositionX:Fe,backgroundPositionY:Fe,...vT,zIndex:Hv,fillOpacity:Dl,strokeOpacity:Dl,numOctaves:Hv},bT={...gm,color:hn,backgroundColor:hn,outlineColor:hn,fill:hn,stroke:hn,borderColor:hn,borderTopColor:hn,borderRightColor:hn,borderBottomColor:hn,borderLeftColor:hn,filter:bh,WebkitFilter:bh},z1=t=>bT[t];function B1(t,n){let s=z1(t);return s!==bh&&(s=xi),s.getAnimatableNone?s.getAnimatableNone(n):void 0}const ST=new Set(["auto","none","0"]);function wT(t,n,s){let o=0,c;for(;o<t.length&&!c;){const u=t[o];typeof u=="string"&&!ST.has(u)&&zl(u).values.length&&(c=t[o]),o++}if(c&&s)for(const u of n)t[u]=B1(s,c)}class _T extends hm{constructor(n,s,o,c,u){super(n,s,o,c,u,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:s,name:o}=this;if(!s||!s.current)return;super.readKeyframes();for(let m=0;m<n.length;m++){let g=n[m];if(typeof g=="string"&&(g=g.trim(),om(g))){const y=A1(g,s.current);y!==void 0&&(n[m]=y),m===n.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!R1.has(o)||n.length!==2)return;const[c,u]=n,p=Pv(c),h=Pv(u);if(p!==h)if(Uv(p)&&Uv(h))for(let m=0;m<n.length;m++){const g=n[m];typeof g=="string"&&(n[m]=parseFloat(g))}else no[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:s}=this,o=[];for(let c=0;c<n.length;c++)(n[c]===null||mT(n[c]))&&o.push(c);o.length&&wT(n,o,s)}measureInitialState(){const{element:n,unresolvedKeyframes:s,name:o}=this;if(!n||!n.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=no[o](n.measureViewportBox(),window.getComputedStyle(n.current)),s[0]=this.measuredOrigin;const c=s[s.length-1];c!==void 0&&n.getValue(o,c).jump(c,!1)}measureEndState(){const{element:n,name:s,unresolvedKeyframes:o}=this;if(!n||!n.current)return;const c=n.getValue(s);c&&c.jump(this.measuredOrigin,!1);const u=o.length-1,p=o[u];o[u]=no[s](n.measureViewportBox(),window.getComputedStyle(n.current)),p!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=p),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,m])=>{n.getValue(h).set(m)}),this.resolveNoneKeyframes()}}function CT(t,n,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let o=document;const c=s?.[t]??o.querySelectorAll(t);return c?Array.from(c):[]}return Array.from(t)}const U1=(t,n)=>n&&typeof t=="number"?n.transform(t):t;function I1(t){return Zb(t)&&"offsetHeight"in t}const $v=30,jT=t=>!isNaN(parseFloat(t));class TT{constructor(n,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{const c=na.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(n),this.owner=s.owner}setCurrent(n){this.current=n,this.updatedAt=na.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=jT(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,s){this.events[n]||(this.events[n]=new am);const o=this.events[n].add(s);return n==="change"?()=>{o(),$t.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,s){this.passiveEffect=n,this.stopPassiveEffect=s}set(n){this.passiveEffect?this.passiveEffect(n,this.updateAndNotify):this.updateAndNotify(n)}setWithVelocity(n,s,o){this.set(s),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-o}jump(n,s=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=na.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>$v)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,$v);return e1(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(n){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=n(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lr(t,n){return new TT(t,n)}const{schedule:ym}=d1(queueMicrotask,!1),Ia={x:!1,y:!1};function O1(){return Ia.x||Ia.y}function kT(t){return t==="x"||t==="y"?Ia[t]?null:(Ia[t]=!0,()=>{Ia[t]=!1}):Ia.x||Ia.y?null:(Ia.x=Ia.y=!0,()=>{Ia.x=Ia.y=!1})}function L1(t,n){const s=CT(t),o=new AbortController,c={passive:!0,...n,signal:o.signal};return[s,c,()=>o.abort()]}function Vv(t){return!(t.pointerType==="touch"||O1())}function MT(t,n,s={}){const[o,c,u]=L1(t,s),p=h=>{if(!Vv(h))return;const{target:m}=h,g=n(m,h);if(typeof g!="function"||!m)return;const y=v=>{Vv(v)&&(g(v),m.removeEventListener("pointerleave",y))};m.addEventListener("pointerleave",y,c)};return o.forEach(h=>{h.addEventListener("pointerenter",p,c)}),u}const P1=(t,n)=>n?t===n?!0:P1(t,n.parentElement):!1,xm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ET=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function AT(t){return ET.has(t.tagName)||t.tabIndex!==-1}const Mu=new WeakSet;function Fv(t){return n=>{n.key==="Enter"&&t(n)}}function Rf(t,n){t.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const RT=(t,n)=>{const s=t.currentTarget;if(!s)return;const o=Fv(()=>{if(Mu.has(s))return;Rf(s,"down");const c=Fv(()=>{Rf(s,"up")}),u=()=>Rf(s,"cancel");s.addEventListener("keyup",c,n),s.addEventListener("blur",u,n)});s.addEventListener("keydown",o,n),s.addEventListener("blur",()=>s.removeEventListener("keydown",o),n)};function qv(t){return xm(t)&&!O1()}function NT(t,n,s={}){const[o,c,u]=L1(t,s),p=h=>{const m=h.currentTarget;if(!qv(h))return;Mu.add(m);const g=n(m,h),y=(j,C)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",S),Mu.has(m)&&Mu.delete(m),qv(j)&&typeof g=="function"&&g(j,{success:C})},v=j=>{y(j,m===window||m===document||s.useGlobalTarget||P1(m,j.target))},S=j=>{y(j,!1)};window.addEventListener("pointerup",v,c),window.addEventListener("pointercancel",S,c)};return o.forEach(h=>{(s.useGlobalTarget?window:h).addEventListener("pointerdown",p,c),I1(h)&&(h.addEventListener("focus",g=>RT(g,c)),!AT(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),u}function H1(t){return Zb(t)&&"ownerSVGElement"in t}function DT(t){return H1(t)&&t.tagName==="svg"}const qn=t=>!!(t&&t.getVelocity),zT=[...D1,hn,xi],BT=t=>zT.find(N1(t)),vm=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Gv(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function UT(...t){return n=>{let s=!1;const o=t.map(c=>{const u=Gv(c,n);return!s&&typeof u=="function"&&(s=!0),u});if(s)return()=>{for(let c=0;c<o.length;c++){const u=o[c];typeof u=="function"?u():Gv(t[c],null)}}}}function IT(...t){return b.useCallback(UT(...t),t)}class OT extends b.Component{getSnapshotBeforeUpdate(n){const s=this.props.childRef.current;if(s&&n.isPresent&&!this.props.isPresent){const o=s.offsetParent,c=I1(o)&&o.offsetWidth||0,u=this.props.sizeRef.current;u.height=s.offsetHeight||0,u.width=s.offsetWidth||0,u.top=s.offsetTop,u.left=s.offsetLeft,u.right=c-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function LT({children:t,isPresent:n,anchorX:s,root:o}){const c=b.useId(),u=b.useRef(null),p=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=b.useContext(vm),m=IT(u,t?.ref);return b.useInsertionEffect(()=>{const{width:g,height:y,top:v,left:S,right:j}=p.current;if(n||!u.current||!g||!y)return;const C=s==="left"?`left: ${S}`:`right: ${j}`;u.current.dataset.motionPopId=c;const T=document.createElement("style");h&&(T.nonce=h);const E=o??document.head;return E.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${y}px !important;
            ${C}px !important;
            top: ${v}px !important;
          }
        `),()=>{E.contains(T)&&E.removeChild(T)}},[n]),r.jsx(OT,{isPresent:n,childRef:u,sizeRef:p,children:b.cloneElement(t,{ref:m})})}const PT=({children:t,initial:n,isPresent:s,onExitComplete:o,custom:c,presenceAffectsLayout:u,mode:p,anchorX:h,root:m})=>{const g=Qh(HT),y=b.useId();let v=!0,S=b.useMemo(()=>(v=!1,{id:y,initial:n,isPresent:s,custom:c,onExitComplete:j=>{g.set(j,!0);for(const C of g.values())if(!C)return;o&&o()},register:j=>(g.set(j,!1),()=>g.delete(j))}),[s,g,o]);return u&&v&&(S={...S}),b.useMemo(()=>{g.forEach((j,C)=>g.set(C,!1))},[s]),b.useEffect(()=>{!s&&!g.size&&o&&o()},[s]),p==="popLayout"&&(t=r.jsx(LT,{isPresent:s,anchorX:h,root:m,children:t})),r.jsx(ed.Provider,{value:S,children:t})};function HT(){return new Map}function $1(t=!0){const n=b.useContext(ed);if(n===null)return[!0,null];const{isPresent:s,onExitComplete:o,register:c}=n,u=b.useId();b.useEffect(()=>{if(t)return c(u)},[t]);const p=b.useCallback(()=>t&&o&&o(u),[u,o,t]);return!s&&o?[!1,p]:[!0]}const yu=t=>t.key||"";function Wv(t){const n=[];return b.Children.forEach(t,s=>{b.isValidElement(s)&&n.push(s)}),n}const Yn=({children:t,custom:n,initial:s=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:u="sync",propagate:p=!1,anchorX:h="left",root:m})=>{const[g,y]=$1(p),v=b.useMemo(()=>Wv(t),[t]),S=p&&!g?[]:v.map(yu),j=b.useRef(!0),C=b.useRef(v),T=Qh(()=>new Map),[E,z]=b.useState(v),[L,R]=b.useState(v);Kb(()=>{j.current=!1,C.current=v;for(let te=0;te<L.length;te++){const re=yu(L[te]);S.includes(re)?T.delete(re):T.get(re)!==!0&&T.set(re,!1)}},[L,S.length,S.join("-")]);const X=[];if(v!==E){let te=[...v];for(let re=0;re<L.length;re++){const Q=L[re],ge=yu(Q);S.includes(ge)||(te.splice(re,0,Q),X.push(Q))}return u==="wait"&&X.length&&(te=X),R(Wv(te)),z(v),null}const{forceRender:P}=b.useContext(Kh);return r.jsx(r.Fragment,{children:L.map(te=>{const re=yu(te),Q=p&&!g?!1:v===L||S.includes(re),ge=()=>{if(T.has(re))T.set(re,!0);else return;let me=!0;T.forEach(Pe=>{Pe||(me=!1)}),me&&(P?.(),R(C.current),p&&y?.(),o&&o())};return r.jsx(PT,{isPresent:Q,initial:!j.current||s?void 0:!1,custom:n,presenceAffectsLayout:c,mode:u,root:m,onExitComplete:Q?void 0:ge,anchorX:h,children:te},re)})})},V1=b.createContext({strict:!1}),Yv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cr={};for(const t in Yv)cr[t]={isEnabled:n=>Yv[t].some(s=>!!n[s])};function $T(t){for(const n in t)cr[n]={...cr[n],...t[n]}}const VT=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ou(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||VT.has(t)}let F1=t=>!Ou(t);function FT(t){typeof t=="function"&&(F1=n=>n.startsWith("on")?!Ou(n):t(n))}try{FT(require("@emotion/is-prop-valid").default)}catch{}function qT(t,n,s){const o={};for(const c in t)c==="values"&&typeof t.values=="object"||(F1(c)||s===!0&&Ou(c)||!n&&!Ou(c)||t.draggable&&c.startsWith("onDrag"))&&(o[c]=t[c]);return o}const td=b.createContext({});function nd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Bl(t){return typeof t=="string"||Array.isArray(t)}const bm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Sm=["initial",...bm];function ad(t){return nd(t.animate)||Sm.some(n=>Bl(t[n]))}function q1(t){return!!(ad(t)||t.variants)}function GT(t,n){if(ad(t)){const{initial:s,animate:o}=t;return{initial:s===!1||Bl(s)?s:void 0,animate:Bl(o)?o:void 0}}return t.inherit!==!1?n:{}}function WT(t){const{initial:n,animate:s}=GT(t,b.useContext(td));return b.useMemo(()=>({initial:n,animate:s}),[Xv(n),Xv(s)])}function Xv(t){return Array.isArray(t)?t.join(" "):t}function Kv(t,n){return n.max===n.min?0:t/(n.max-n.min)*100}const xl={correct:(t,n)=>{if(!n.target)return t;if(typeof t=="string")if(Fe.test(t))t=parseFloat(t);else return t;const s=Kv(t,n.target.x),o=Kv(t,n.target.y);return`${s}% ${o}%`}},YT={correct:(t,{treeScale:n,projectionDelta:s})=>{const o=t,c=xi.parse(t);if(c.length>5)return o;const u=xi.createTransformer(t),p=typeof c[0]!="number"?1:0,h=s.x.scale*n.x,m=s.y.scale*n.y;c[0+p]/=h,c[1+p]/=m;const g=Gt(h,m,.5);return typeof c[2+p]=="number"&&(c[2+p]/=g),typeof c[3+p]=="number"&&(c[3+p]/=g),u(c)}},Sh={borderRadius:{...xl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xl,borderTopRightRadius:xl,borderBottomLeftRadius:xl,borderBottomRightRadius:xl,boxShadow:YT};function G1(t,{layout:n,layoutId:s}){return gr.has(t)||t.startsWith("origin")||(n||s!==void 0)&&(!!Sh[t]||t==="opacity")}const XT={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KT=mr.length;function QT(t,n,s){let o="",c=!0;for(let u=0;u<KT;u++){const p=mr[u],h=t[p];if(h===void 0)continue;let m=!0;if(typeof h=="number"?m=h===(p.startsWith("scale")?1:0):m=parseFloat(h)===0,!m||s){const g=U1(h,gm[p]);if(!m){c=!1;const y=XT[p]||p;o+=`${y}(${g}) `}s&&(n[p]=g)}}return o=o.trim(),s?o=s(n,c?"":o):c&&(o="none"),o}function wm(t,n,s){const{style:o,vars:c,transformOrigin:u}=t;let p=!1,h=!1;for(const m in n){const g=n[m];if(gr.has(m)){p=!0;continue}else if(f1(m)){c[m]=g;continue}else{const y=U1(g,gm[m]);m.startsWith("origin")?(h=!0,u[m]=y):o[m]=y}}if(n.transform||(p||s?o.transform=QT(n,t.transform,s):o.transform&&(o.transform="none")),h){const{originX:m="50%",originY:g="50%",originZ:y=0}=u;o.transformOrigin=`${m} ${g} ${y}`}}const _m=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function W1(t,n,s){for(const o in n)!qn(n[o])&&!G1(o,s)&&(t[o]=n[o])}function ZT({transformTemplate:t},n){return b.useMemo(()=>{const s=_m();return wm(s,n,t),Object.assign({},s.vars,s.style)},[n])}function JT(t,n){const s=t.style||{},o={};return W1(o,s,t),Object.assign(o,ZT(t,n)),o}function ek(t,n){const s={},o=JT(t,n);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=o,s}const tk={offset:"stroke-dashoffset",array:"stroke-dasharray"},nk={offset:"strokeDashoffset",array:"strokeDasharray"};function ak(t,n,s=1,o=0,c=!0){t.pathLength=1;const u=c?tk:nk;t[u.offset]=Fe.transform(-o);const p=Fe.transform(n),h=Fe.transform(s);t[u.array]=`${p} ${h}`}function Y1(t,{attrX:n,attrY:s,attrScale:o,pathLength:c,pathSpacing:u=1,pathOffset:p=0,...h},m,g,y){if(wm(t,h,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:S}=t;v.transform&&(S.transform=v.transform,delete v.transform),(S.transform||v.transformOrigin)&&(S.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),S.transform&&(S.transformBox=y?.transformBox??"fill-box",delete v.transformBox),n!==void 0&&(v.x=n),s!==void 0&&(v.y=s),o!==void 0&&(v.scale=o),c!==void 0&&ak(v,c,u,p,!1)}const X1=()=>({..._m(),attrs:{}}),K1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function sk(t,n,s,o){const c=b.useMemo(()=>{const u=X1();return Y1(u,n,K1(o),t.transformTemplate,t.style),{...u.attrs,style:{...u.style}}},[n]);if(t.style){const u={};W1(u,t.style,t),c.style={...u,...c.style}}return c}const ik=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cm(t){return typeof t!="string"||t.includes("-")?!1:!!(ik.indexOf(t)>-1||/[A-Z]/u.test(t))}function ok(t,n,s,{latestValues:o},c,u=!1){const h=(Cm(t)?sk:ek)(n,o,c,t),m=qT(n,typeof t=="string",u),g=t!==b.Fragment?{...m,...h,ref:s}:{},{children:y}=n,v=b.useMemo(()=>qn(y)?y.get():y,[y]);return b.createElement(t,{...g,children:v})}function Qv(t){const n=[{},{}];return t?.values.forEach((s,o)=>{n[0][o]=s.get(),n[1][o]=s.getVelocity()}),n}function jm(t,n,s,o){if(typeof n=="function"){const[c,u]=Qv(o);n=n(s!==void 0?s:t.custom,c,u)}if(typeof n=="string"&&(n=t.variants&&t.variants[n]),typeof n=="function"){const[c,u]=Qv(o);n=n(s!==void 0?s:t.custom,c,u)}return n}function Eu(t){return qn(t)?t.get():t}function rk({scrapeMotionValuesFromProps:t,createRenderState:n},s,o,c){return{latestValues:lk(s,o,c,t),renderState:n()}}function lk(t,n,s,o){const c={},u=o(t,{});for(const S in u)c[S]=Eu(u[S]);let{initial:p,animate:h}=t;const m=ad(t),g=q1(t);n&&g&&!m&&t.inherit!==!1&&(p===void 0&&(p=n.initial),h===void 0&&(h=n.animate));let y=s?s.initial===!1:!1;y=y||p===!1;const v=y?h:p;if(v&&typeof v!="boolean"&&!nd(v)){const S=Array.isArray(v)?v:[v];for(let j=0;j<S.length;j++){const C=jm(t,S[j]);if(C){const{transitionEnd:T,transition:E,...z}=C;for(const L in z){let R=z[L];if(Array.isArray(R)){const X=y?R.length-1:0;R=R[X]}R!==null&&(c[L]=R)}for(const L in T)c[L]=T[L]}}}return c}const Q1=t=>(n,s)=>{const o=b.useContext(td),c=b.useContext(ed),u=()=>rk(t,n,o,c);return s?u():Qh(u)};function Tm(t,n,s){const{style:o}=t,c={};for(const u in o)(qn(o[u])||n.style&&qn(n.style[u])||G1(u,t)||s?.getValue(u)?.liveStyle!==void 0)&&(c[u]=o[u]);return c}const ck=Q1({scrapeMotionValuesFromProps:Tm,createRenderState:_m});function Z1(t,n,s){const o=Tm(t,n,s);for(const c in t)if(qn(t[c])||qn(n[c])){const u=mr.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;o[u]=t[c]}return o}const uk=Q1({scrapeMotionValuesFromProps:Z1,createRenderState:X1}),dk=Symbol.for("motionComponentSymbol");function Jo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function pk(t,n,s){return b.useCallback(o=>{o&&t.onMount&&t.onMount(o),n&&(o?n.mount(o):n.unmount()),s&&(typeof s=="function"?s(o):Jo(s)&&(s.current=o))},[n])}const km=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fk="framerAppearId",J1="data-"+km(fk),eS=b.createContext({});function hk(t,n,s,o,c){const{visualElement:u}=b.useContext(td),p=b.useContext(V1),h=b.useContext(ed),m=b.useContext(vm).reducedMotion,g=b.useRef(null);o=o||p.renderer,!g.current&&o&&(g.current=o(t,{visualState:n,parent:u,props:s,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const y=g.current,v=b.useContext(eS);y&&!y.projection&&c&&(y.type==="html"||y.type==="svg")&&mk(g.current,s,c,v);const S=b.useRef(!1);b.useInsertionEffect(()=>{y&&S.current&&y.update(s,h)});const j=s[J1],C=b.useRef(!!j&&!window.MotionHandoffIsComplete?.(j)&&window.MotionHasOptimisedAnimation?.(j));return Kb(()=>{y&&(S.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),C.current&&y.animationState&&y.animationState.animateChanges())}),b.useEffect(()=>{y&&(!C.current&&y.animationState&&y.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(j)}),C.current=!1),y.enteringChildren=void 0)}),y}function mk(t,n,s,o){const{layoutId:c,layout:u,drag:p,dragConstraints:h,layoutScroll:m,layoutRoot:g,layoutCrossfade:y}=n;t.projection=new s(t.latestValues,n["data-framer-portal-id"]?void 0:tS(t.parent)),t.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!p||h&&Jo(h),visualElement:t,animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,crossfade:y,layoutScroll:m,layoutRoot:g})}function tS(t){if(t)return t.options.allowProjection!==!1?t.projection:tS(t.parent)}function Nf(t,{forwardMotionProps:n=!1}={},s,o){s&&$T(s);const c=Cm(t)?uk:ck;function u(h,m){let g;const y={...b.useContext(vm),...h,layoutId:gk(h)},{isStatic:v}=y,S=WT(h),j=c(h,v);if(!v&&Zh){yk();const C=xk(y);g=C.MeasureLayout,S.visualElement=hk(t,j,y,o,C.ProjectionNode)}return r.jsxs(td.Provider,{value:S,children:[g&&S.visualElement?r.jsx(g,{visualElement:S.visualElement,...y}):null,ok(t,h,pk(j,S.visualElement,m),j,v,n)]})}u.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const p=b.forwardRef(u);return p[dk]=t,p}function gk({layoutId:t}){const n=b.useContext(Kh).id;return n&&t!==void 0?n+"-"+t:t}function yk(t,n){b.useContext(V1).strict}function xk(t){const{drag:n,layout:s}=cr;if(!n&&!s)return{};const o={...n,...s};return{MeasureLayout:n?.isEnabled(t)||s?.isEnabled(t)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function vk(t,n){if(typeof Proxy>"u")return Nf;const s=new Map,o=(u,p)=>Nf(u,p,t,n),c=(u,p)=>o(u,p);return new Proxy(c,{get:(u,p)=>p==="create"?o:(s.has(p)||s.set(p,Nf(p,void 0,t,n)),s.get(p))})}function nS({top:t,left:n,right:s,bottom:o}){return{x:{min:n,max:s},y:{min:t,max:o}}}function bk({x:t,y:n}){return{top:n.min,right:t.max,bottom:n.max,left:t.min}}function Sk(t,n){if(!n)return t;const s=n({x:t.left,y:t.top}),o=n({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:o.y,right:o.x}}function Df(t){return t===void 0||t===1}function wh({scale:t,scaleX:n,scaleY:s}){return!Df(t)||!Df(n)||!Df(s)}function Yi(t){return wh(t)||aS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function aS(t){return Zv(t.x)||Zv(t.y)}function Zv(t){return t&&t!=="0%"}function Lu(t,n,s){const o=t-s,c=n*o;return s+c}function Jv(t,n,s,o,c){return c!==void 0&&(t=Lu(t,c,o)),Lu(t,s,o)+n}function _h(t,n=0,s=1,o,c){t.min=Jv(t.min,n,s,o,c),t.max=Jv(t.max,n,s,o,c)}function sS(t,{x:n,y:s}){_h(t.x,n.translate,n.scale,n.originPoint),_h(t.y,s.translate,s.scale,s.originPoint)}const e0=.999999999999,t0=1.0000000000001;function wk(t,n,s,o=!1){const c=s.length;if(!c)return;n.x=n.y=1;let u,p;for(let h=0;h<c;h++){u=s[h],p=u.projectionDelta;const{visualElement:m}=u.options;m&&m.props.style&&m.props.style.display==="contents"||(o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&tr(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),p&&(n.x*=p.x.scale,n.y*=p.y.scale,sS(t,p)),o&&Yi(u.latestValues)&&tr(t,u.latestValues))}n.x<t0&&n.x>e0&&(n.x=1),n.y<t0&&n.y>e0&&(n.y=1)}function er(t,n){t.min=t.min+n,t.max=t.max+n}function n0(t,n,s,o,c=.5){const u=Gt(t.min,t.max,c);_h(t,n,s,u,o)}function tr(t,n){n0(t.x,n.x,n.scaleX,n.scale,n.originX),n0(t.y,n.y,n.scaleY,n.scale,n.originY)}function iS(t,n){return nS(Sk(t.getBoundingClientRect(),n))}function _k(t,n,s){const o=iS(t,s),{scroll:c}=n;return c&&(er(o.x,c.offset.x),er(o.y,c.offset.y)),o}const a0=()=>({translate:0,scale:1,origin:0,originPoint:0}),nr=()=>({x:a0(),y:a0()}),s0=()=>({min:0,max:0}),Sn=()=>({x:s0(),y:s0()}),Ch={current:null},oS={current:!1};function Ck(){if(oS.current=!0,!!Zh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),n=()=>Ch.current=t.matches;t.addEventListener("change",n),n()}else Ch.current=!1}const jk=new WeakMap;function Tk(t,n,s){for(const o in n){const c=n[o],u=s[o];if(qn(c))t.addValue(o,c);else if(qn(u))t.addValue(o,lr(c,{owner:t}));else if(u!==c)if(t.hasValue(o)){const p=t.getValue(o);p.liveStyle===!0?p.jump(c):p.hasAnimated||p.set(c)}else{const p=t.getStaticValue(o);t.addValue(o,lr(p!==void 0?p:c,{owner:t}))}}for(const o in s)n[o]===void 0&&t.removeValue(o);return n}const i0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kk{scrapeMotionValuesFromProps(n,s,o){return{}}constructor({parent:n,props:s,presenceContext:o,reducedMotionConfig:c,blockInitialAnimation:u,visualState:p},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=hm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=na.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,$t.render(this.render,!1,!0))};const{latestValues:m,renderState:g}=p;this.latestValues=m,this.baseTarget={...m},this.initialValues=s.initial?{...m}:{},this.renderState=g,this.parent=n,this.props=s,this.presenceContext=o,this.depth=n?n.depth+1:0,this.reducedMotionConfig=c,this.options=h,this.blockInitialAnimation=!!u,this.isControllingVariants=ad(s),this.isVariantNode=q1(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:y,...v}=this.scrapeMotionValuesFromProps(s,{},this);for(const S in v){const j=v[S];m[S]!==void 0&&qn(j)&&j.set(m[S])}}mount(n){this.current=n,jk.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),oS.current||Ck(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ch.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),yi(this.notifyUpdate),yi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(n){this.children.add(n),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(n)}removeChild(n){this.children.delete(n),this.enteringChildren&&this.enteringChildren.delete(n)}bindToMotionValue(n,s){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const o=gr.has(n);o&&this.onBindTransform&&this.onBindTransform();const c=s.on("change",p=>{this.latestValues[n]=p,this.props.onUpdate&&$t.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,n,s)),this.valueSubscriptions.set(n,()=>{c(),u&&u(),s.owner&&s.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in cr){const s=cr[n];if(!s)continue;const{isEnabled:o,Feature:c}=s;if(!this.features[n]&&c&&o(this.props)&&(this.features[n]=new c(this)),this.features[n]){const u=this.features[n];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Sn()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,s){this.latestValues[n]=s}update(n,s){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let o=0;o<i0.length;o++){const c=i0[o];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const u="on"+c,p=n[u];p&&(this.propEventSubscriptions[c]=this.on(c,p))}this.prevMotionValues=Tk(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(n),()=>s.variantChildren.delete(n)}addValue(n,s){const o=this.values.get(n);s!==o&&(o&&this.removeValue(n),this.bindToMotionValue(n,s),this.values.set(n,s),this.latestValues[n]=s.get())}removeValue(n){this.values.delete(n);const s=this.valueSubscriptions.get(n);s&&(s(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,s){if(this.props.values&&this.props.values[n])return this.props.values[n];let o=this.values.get(n);return o===void 0&&s!==void 0&&(o=lr(s===null?void 0:s,{owner:this}),this.addValue(n,o)),o}readValue(n,s){let o=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return o!=null&&(typeof o=="string"&&(Qb(o)||Jb(o))?o=parseFloat(o):!BT(o)&&xi.test(s)&&(o=B1(n,s)),this.setBaseTarget(n,qn(o)?o.get():o)),qn(o)?o.get():o}setBaseTarget(n,s){this.baseTarget[n]=s}getBaseTarget(n){const{initial:s}=this.props;let o;if(typeof s=="string"||typeof s=="object"){const u=jm(this.props,s,this.presenceContext?.custom);u&&(o=u[n])}if(s&&o!==void 0)return o;const c=this.getBaseTargetFromProps(this.props,n);return c!==void 0&&!qn(c)?c:this.initialValues[n]!==void 0&&o===void 0?void 0:this.baseTarget[n]}on(n,s){return this.events[n]||(this.events[n]=new am),this.events[n].add(s)}notify(n,...s){this.events[n]&&this.events[n].notify(...s)}scheduleRenderMicrotask(){ym.render(this.render)}}class rS extends kk{constructor(){super(...arguments),this.KeyframeResolver=_T}sortInstanceNodePosition(n,s){return n.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(n,s){return n.style?n.style[s]:void 0}removeValueFromRenderState(n,{vars:s,style:o}){delete s[n],delete o[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;qn(n)&&(this.childSubscription=n.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function lS(t,{style:n,vars:s},o,c){const u=t.style;let p;for(p in n)u[p]=n[p];c?.applyProjectionStyles(u,o);for(p in s)u.setProperty(p,s[p])}function Mk(t){return window.getComputedStyle(t)}class Ek extends rS{constructor(){super(...arguments),this.type="html",this.renderInstance=lS}readValueFromInstance(n,s){if(gr.has(s))return this.projection?.isProjecting?hh(s):$2(n,s);{const o=Mk(n),c=(f1(s)?o.getPropertyValue(s):o[s])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(n,{transformPagePoint:s}){return iS(n,s)}build(n,s,o){wm(n,s,o.transformTemplate)}scrapeMotionValuesFromProps(n,s,o){return Tm(n,s,o)}}const cS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ak(t,n,s,o){lS(t,n,void 0,o);for(const c in n.attrs)t.setAttribute(cS.has(c)?c:km(c),n.attrs[c])}class Rk extends rS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Sn}getBaseTargetFromProps(n,s){return n[s]}readValueFromInstance(n,s){if(gr.has(s)){const o=z1(s);return o&&o.default||0}return s=cS.has(s)?s:km(s),n.getAttribute(s)}scrapeMotionValuesFromProps(n,s,o){return Z1(n,s,o)}build(n,s,o){Y1(n,s,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(n,s,o,c){Ak(n,s,o,c)}mount(n){this.isSVGTag=K1(n.tagName),super.mount(n)}}const Nk=(t,n)=>Cm(t)?new Rk(n):new Ek(n,{allowProjection:t!==b.Fragment});function sr(t,n,s){const o=t.getProps();return jm(o,n,s!==void 0?s:o.custom,t)}const jh=t=>Array.isArray(t);function Dk(t,n,s){t.hasValue(n)?t.getValue(n).set(s):t.addValue(n,lr(s))}function zk(t){return jh(t)?t[t.length-1]||0:t}function Bk(t,n){const s=sr(t,n);let{transitionEnd:o={},transition:c={},...u}=s||{};u={...u,...o};for(const p in u){const h=zk(u[p]);Dk(t,p,h)}}function Uk(t){return!!(qn(t)&&t.add)}function Th(t,n){const s=t.getValue("willChange");if(Uk(s))return s.add(n);if(!s&&Ds.WillChange){const o=new Ds.WillChange("auto");t.addValue("willChange",o),o.add(n)}}function uS(t){return t.props[J1]}const Ik=t=>t!==null;function Ok(t,{repeat:n,repeatType:s="loop"},o){const c=t.filter(Ik),u=n&&s!=="loop"&&n%2===1?0:c.length-1;return c[u]}const Lk={type:"spring",stiffness:500,damping:25,restSpeed:10},Pk=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Hk={type:"keyframes",duration:.8},$k={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Vk=(t,{keyframes:n})=>n.length>2?Hk:gr.has(t)?t.startsWith("scale")?Pk(n[1]):Lk:$k;function Fk({when:t,delay:n,delayChildren:s,staggerChildren:o,staggerDirection:c,repeat:u,repeatType:p,repeatDelay:h,from:m,elapsed:g,...y}){return!!Object.keys(y).length}const Mm=(t,n,s,o={},c,u)=>p=>{const h=mm(o,t)||{},m=h.delay||o.delay||0;let{elapsed:g=0}=o;g=g-as(m);const y={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:n.getVelocity(),...h,delay:-g,onUpdate:S=>{n.set(S),h.onUpdate&&h.onUpdate(S)},onComplete:()=>{p(),h.onComplete&&h.onComplete()},name:t,motionValue:n,element:u?void 0:c};Fk(h)||Object.assign(y,Vk(t,y)),y.duration&&(y.duration=as(y.duration)),y.repeatDelay&&(y.repeatDelay=as(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let v=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(vh(y),y.delay===0&&(v=!0)),(Ds.instantAnimations||Ds.skipAnimations)&&(v=!0,vh(y),y.delay=0),y.allowFlatten=!h.type&&!h.ease,v&&!u&&n.get()!==void 0){const S=Ok(y.keyframes,h);if(S!==void 0){$t.update(()=>{y.onUpdate(S),y.onComplete()});return}}return h.isSync?new fm(y):new dT(y)};function qk({protectedKeys:t,needsAnimating:n},s){const o=t.hasOwnProperty(s)&&n[s]!==!0;return n[s]=!1,o}function dS(t,n,{delay:s=0,transitionOverride:o,type:c}={}){let{transition:u=t.getDefaultTransition(),transitionEnd:p,...h}=n;o&&(u=o);const m=[],g=c&&t.animationState&&t.animationState.getState()[c];for(const y in h){const v=t.getValue(y,t.latestValues[y]??null),S=h[y];if(S===void 0||g&&qk(g,y))continue;const j={delay:s,...mm(u||{},y)},C=v.get();if(C!==void 0&&!v.isAnimating&&!Array.isArray(S)&&S===C&&!j.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const z=uS(t);if(z){const L=window.MotionHandoffAnimation(z,y,$t);L!==null&&(j.startTime=L,T=!0)}}Th(t,y),v.start(Mm(y,v,S,t.shouldReduceMotion&&R1.has(y)?{type:!1}:j,t,T));const E=v.animation;E&&m.push(E)}return p&&Promise.all(m).then(()=>{$t.update(()=>{p&&Bk(t,p)})}),m}function pS(t,n,s,o=0,c=1){const u=Array.from(t).sort((g,y)=>g.sortNodePosition(y)).indexOf(n),p=t.size,h=(p-1)*o;return typeof s=="function"?s(u,p):c===1?u*o:h-u*o}function kh(t,n,s={}){const o=sr(t,n,s.type==="exit"?t.presenceContext?.custom:void 0);let{transition:c=t.getDefaultTransition()||{}}=o||{};s.transitionOverride&&(c=s.transitionOverride);const u=o?()=>Promise.all(dS(t,o,s)):()=>Promise.resolve(),p=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:v}=c;return Gk(t,n,m,g,y,v,s)}:()=>Promise.resolve(),{when:h}=c;if(h){const[m,g]=h==="beforeChildren"?[u,p]:[p,u];return m().then(()=>g())}else return Promise.all([u(),p(s.delay)])}function Gk(t,n,s=0,o=0,c=0,u=1,p){const h=[];for(const m of t.variantChildren)m.notify("AnimationStart",n),h.push(kh(m,n,{...p,delay:s+(typeof o=="function"?0:o)+pS(t.variantChildren,m,o,c,u)}).then(()=>m.notify("AnimationComplete",n)));return Promise.all(h)}function Wk(t,n,s={}){t.notify("AnimationStart",n);let o;if(Array.isArray(n)){const c=n.map(u=>kh(t,u,s));o=Promise.all(c)}else if(typeof n=="string")o=kh(t,n,s);else{const c=typeof n=="function"?sr(t,n,s.custom):n;o=Promise.all(dS(t,c,s))}return o.then(()=>{t.notify("AnimationComplete",n)})}function fS(t,n){if(!Array.isArray(n))return!1;const s=n.length;if(s!==t.length)return!1;for(let o=0;o<s;o++)if(n[o]!==t[o])return!1;return!0}const Yk=Sm.length;function hS(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?hS(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const n={};for(let s=0;s<Yk;s++){const o=Sm[s],c=t.props[o];(Bl(c)||c===!1)&&(n[o]=c)}return n}const Xk=[...bm].reverse(),Kk=bm.length;function Qk(t){return n=>Promise.all(n.map(({animation:s,options:o})=>Wk(t,s,o)))}function Zk(t){let n=Qk(t),s=o0(),o=!0;const c=m=>(g,y)=>{const v=sr(t,y,m==="exit"?t.presenceContext?.custom:void 0);if(v){const{transition:S,transitionEnd:j,...C}=v;g={...g,...C,...j}}return g};function u(m){n=m(t)}function p(m){const{props:g}=t,y=hS(t.parent)||{},v=[],S=new Set;let j={},C=1/0;for(let E=0;E<Kk;E++){const z=Xk[E],L=s[z],R=g[z]!==void 0?g[z]:y[z],X=Bl(R),P=z===m?L.isActive:null;P===!1&&(C=E);let te=R===y[z]&&R!==g[z]&&X;if(te&&o&&t.manuallyAnimateOnMount&&(te=!1),L.protectedKeys={...j},!L.isActive&&P===null||!R&&!L.prevProp||nd(R)||typeof R=="boolean")continue;const re=Jk(L.prevProp,R);let Q=re||z===m&&L.isActive&&!te&&X||E>C&&X,ge=!1;const me=Array.isArray(R)?R:[R];let Pe=me.reduce(c(z),{});P===!1&&(Pe={});const{prevResolvedValues:qe={}}=L,Qe={...qe,...Pe},Re=ne=>{Q=!0,S.has(ne)&&(ge=!0,S.delete(ne)),L.needsAnimating[ne]=!0;const le=t.getValue(ne);le&&(le.liveStyle=!1)};for(const ne in Qe){const le=Pe[ne],Se=qe[ne];if(j.hasOwnProperty(ne))continue;let He=!1;jh(le)&&jh(Se)?He=!fS(le,Se):He=le!==Se,He?le!=null?Re(ne):S.add(ne):le!==void 0&&S.has(ne)?Re(ne):L.protectedKeys[ne]=!0}L.prevProp=R,L.prevResolvedValues=Pe,L.isActive&&(j={...j,...Pe}),o&&t.blockInitialAnimation&&(Q=!1);const Te=te&&re;Q&&(!Te||ge)&&v.push(...me.map(ne=>{const le={type:z};if(typeof ne=="string"&&o&&!Te&&t.manuallyAnimateOnMount&&t.parent){const{parent:Se}=t,He=sr(Se,ne);if(Se.enteringChildren&&He){const{delayChildren:we}=He.transition||{};le.delay=pS(Se.enteringChildren,t,we)}}return{animation:ne,options:le}}))}if(S.size){const E={};if(typeof g.initial!="boolean"){const z=sr(t,Array.isArray(g.initial)?g.initial[0]:g.initial);z&&z.transition&&(E.transition=z.transition)}S.forEach(z=>{const L=t.getBaseTarget(z),R=t.getValue(z);R&&(R.liveStyle=!0),E[z]=L??null}),v.push({animation:E})}let T=!!v.length;return o&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(T=!1),o=!1,T?n(v):Promise.resolve()}function h(m,g){if(s[m].isActive===g)return Promise.resolve();t.variantChildren?.forEach(v=>v.animationState?.setActive(m,g)),s[m].isActive=g;const y=p(m);for(const v in s)s[v].protectedKeys={};return y}return{animateChanges:p,setActive:h,setAnimateFunction:u,getState:()=>s,reset:()=>{s=o0()}}}function Jk(t,n){return typeof n=="string"?n!==t:Array.isArray(n)?!fS(n,t):!1}function Gi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function o0(){return{animate:Gi(!0),whileInView:Gi(),whileHover:Gi(),whileTap:Gi(),whileDrag:Gi(),whileFocus:Gi(),exit:Gi()}}class vi{constructor(n){this.isMounted=!1,this.node=n}update(){}}class eM extends vi{constructor(n){super(n),n.animationState||(n.animationState=Zk(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();nd(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:s}=this.node.prevProps||{};n!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let tM=0;class nM extends vi{constructor(){super(...arguments),this.id=tM++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:s}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===o)return;const c=this.node.animationState.setActive("exit",!n);s&&!n&&c.then(()=>{s(this.id)})}mount(){const{register:n,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const aM={animation:{Feature:eM},exit:{Feature:nM}};function Ul(t,n,s,o={passive:!0}){return t.addEventListener(n,s,o),()=>t.removeEventListener(n,s)}function Xl(t){return{point:{x:t.pageX,y:t.pageY}}}const sM=t=>n=>xm(n)&&t(n,Xl(n));function Tl(t,n,s,o){return Ul(t,n,sM(s),o)}const mS=1e-4,iM=1-mS,oM=1+mS,gS=.01,rM=0-gS,lM=0+gS;function Xn(t){return t.max-t.min}function cM(t,n,s){return Math.abs(t-n)<=s}function r0(t,n,s,o=.5){t.origin=o,t.originPoint=Gt(n.min,n.max,t.origin),t.scale=Xn(s)/Xn(n),t.translate=Gt(s.min,s.max,t.origin)-t.originPoint,(t.scale>=iM&&t.scale<=oM||isNaN(t.scale))&&(t.scale=1),(t.translate>=rM&&t.translate<=lM||isNaN(t.translate))&&(t.translate=0)}function kl(t,n,s,o){r0(t.x,n.x,s.x,o?o.originX:void 0),r0(t.y,n.y,s.y,o?o.originY:void 0)}function l0(t,n,s){t.min=s.min+n.min,t.max=t.min+Xn(n)}function uM(t,n,s){l0(t.x,n.x,s.x),l0(t.y,n.y,s.y)}function c0(t,n,s){t.min=n.min-s.min,t.max=t.min+Xn(n)}function Pu(t,n,s){c0(t.x,n.x,s.x),c0(t.y,n.y,s.y)}function Aa(t){return[t("x"),t("y")]}const yS=({current:t})=>t?t.ownerDocument.defaultView:null,u0=(t,n)=>Math.abs(t-n);function dM(t,n){const s=u0(t.x,n.x),o=u0(t.y,n.y);return Math.sqrt(s**2+o**2)}class xS{constructor(n,s,{transformPagePoint:o,contextWindow:c=window,dragSnapToOrigin:u=!1,distanceThreshold:p=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Bf(this.lastMoveEventInfo,this.history),j=this.startEvent!==null,C=dM(S.offset,{x:0,y:0})>=this.distanceThreshold;if(!j&&!C)return;const{point:T}=S,{timestamp:E}=Un;this.history.push({...T,timestamp:E});const{onStart:z,onMove:L}=this.handlers;j||(z&&z(this.lastMoveEvent,S),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,S)},this.handlePointerMove=(S,j)=>{this.lastMoveEvent=S,this.lastMoveEventInfo=zf(j,this.transformPagePoint),$t.update(this.updatePoint,!0)},this.handlePointerUp=(S,j)=>{this.end();const{onEnd:C,onSessionEnd:T,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=Bf(S.type==="pointercancel"?this.lastMoveEventInfo:zf(j,this.transformPagePoint),this.history);this.startEvent&&C&&C(S,z),T&&T(S,z)},!xm(n))return;this.dragSnapToOrigin=u,this.handlers=s,this.transformPagePoint=o,this.distanceThreshold=p,this.contextWindow=c||window;const h=Xl(n),m=zf(h,this.transformPagePoint),{point:g}=m,{timestamp:y}=Un;this.history=[{...g,timestamp:y}];const{onSessionStart:v}=s;v&&v(n,Bf(m,this.history)),this.removeListeners=Gl(Tl(this.contextWindow,"pointermove",this.handlePointerMove),Tl(this.contextWindow,"pointerup",this.handlePointerUp),Tl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),yi(this.updatePoint)}}function zf(t,n){return n?{point:n(t.point)}:t}function d0(t,n){return{x:t.x-n.x,y:t.y-n.y}}function Bf({point:t},n){return{point:t,delta:d0(t,vS(n)),offset:d0(t,pM(n)),velocity:fM(n,.1)}}function pM(t){return t[0]}function vS(t){return t[t.length-1]}function fM(t,n){if(t.length<2)return{x:0,y:0};let s=t.length-1,o=null;const c=vS(t);for(;s>=0&&(o=t[s],!(c.timestamp-o.timestamp>as(n)));)s--;if(!o)return{x:0,y:0};const u=Ra(c.timestamp-o.timestamp);if(u===0)return{x:0,y:0};const p={x:(c.x-o.x)/u,y:(c.y-o.y)/u};return p.x===1/0&&(p.x=0),p.y===1/0&&(p.y=0),p}function hM(t,{min:n,max:s},o){return n!==void 0&&t<n?t=o?Gt(n,t,o.min):Math.max(t,n):s!==void 0&&t>s&&(t=o?Gt(s,t,o.max):Math.min(t,s)),t}function p0(t,n,s){return{min:n!==void 0?t.min+n:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function mM(t,{top:n,left:s,bottom:o,right:c}){return{x:p0(t.x,s,c),y:p0(t.y,n,o)}}function f0(t,n){let s=n.min-t.min,o=n.max-t.max;return n.max-n.min<t.max-t.min&&([s,o]=[o,s]),{min:s,max:o}}function gM(t,n){return{x:f0(t.x,n.x),y:f0(t.y,n.y)}}function yM(t,n){let s=.5;const o=Xn(t),c=Xn(n);return c>o?s=Nl(n.min,n.max-o,t.min):o>c&&(s=Nl(t.min,t.max-c,n.min)),Ns(0,1,s)}function xM(t,n){const s={};return n.min!==void 0&&(s.min=n.min-t.min),n.max!==void 0&&(s.max=n.max-t.min),s}const Mh=.35;function vM(t=Mh){return t===!1?t=0:t===!0&&(t=Mh),{x:h0(t,"left","right"),y:h0(t,"top","bottom")}}function h0(t,n,s){return{min:m0(t,n),max:m0(t,s)}}function m0(t,n){return typeof t=="number"?t:t[n]||0}const bM=new WeakMap;class SM{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Sn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:s=!1,distanceThreshold:o}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const u=v=>{const{dragSnapToOrigin:S}=this.getProps();S?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Xl(v).point)},p=(v,S)=>{const{drag:j,dragPropagation:C,onDragStart:T}=this.getProps();if(j&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kT(j),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=S,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Aa(z=>{let L=this.getAxisMotionValue(z).get()||0;if(ss.test(L)){const{projection:R}=this.visualElement;if(R&&R.layout){const X=R.layout.layoutBox[z];X&&(L=Xn(X)*(parseFloat(L)/100))}}this.originPoint[z]=L}),T&&$t.postRender(()=>T(v,S)),Th(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},h=(v,S)=>{this.latestPointerEvent=v,this.latestPanInfo=S;const{dragPropagation:j,dragDirectionLock:C,onDirectionLock:T,onDrag:E}=this.getProps();if(!j&&!this.openDragLock)return;const{offset:z}=S;if(C&&this.currentDirection===null){this.currentDirection=wM(z),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",S.point,z),this.updateAxis("y",S.point,z),this.visualElement.render(),E&&E(v,S)},m=(v,S)=>{this.latestPointerEvent=v,this.latestPanInfo=S,this.stop(v,S),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>Aa(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:y}=this.getProps();this.panSession=new xS(n,{onSessionStart:u,onStart:p,onMove:h,onSessionEnd:m,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:o,contextWindow:yS(this.visualElement)})}stop(n,s){const o=n||this.latestPointerEvent,c=s||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!c||!o)return;const{velocity:p}=c;this.startAnimation(p);const{onDragEnd:h}=this.getProps();h&&$t.postRender(()=>h(o,c))}cancel(){this.isDragging=!1;const{projection:n,animationState:s}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(n,s,o){const{drag:c}=this.getProps();if(!o||!xu(n,c,this.currentDirection))return;const u=this.getAxisMotionValue(n);let p=this.originPoint[n]+o[n];this.constraints&&this.constraints[n]&&(p=hM(p,this.constraints[n],this.elastic[n])),u.set(p)}resolveConstraints(){const{dragConstraints:n,dragElastic:s}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,c=this.constraints;n&&Jo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=mM(o.layoutBox,n):this.constraints=!1,this.elastic=vM(s),c!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Aa(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=xM(o.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:s}=this.getProps();if(!n||!Jo(n))return!1;const o=n.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const u=_k(o,c.root,this.visualElement.getTransformPagePoint());let p=gM(c.layout.layoutBox,u);if(s){const h=s(bk(p));this.hasMutatedConstraints=!!h,h&&(p=nS(h))}return p}startAnimation(n){const{drag:s,dragMomentum:o,dragElastic:c,dragTransition:u,dragSnapToOrigin:p,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},g=Aa(y=>{if(!xu(y,s,this.currentDirection))return;let v=m&&m[y]||{};p&&(v={min:0,max:0});const S=c?200:1e6,j=c?40:1e7,C={type:"inertia",velocity:o?n[y]:0,bounceStiffness:S,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...u,...v};return this.startAxisValueAnimation(y,C)});return Promise.all(g).then(h)}startAxisValueAnimation(n,s){const o=this.getAxisMotionValue(n);return Th(this.visualElement,n),o.start(Mm(n,o,0,s,this.visualElement,!1))}stopAnimation(){Aa(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){Aa(n=>this.getAxisMotionValue(n).animation?.pause())}getAnimationState(n){return this.getAxisMotionValue(n).animation?.state}getAxisMotionValue(n){const s=`_drag${n.toUpperCase()}`,o=this.visualElement.getProps(),c=o[s];return c||this.visualElement.getValue(n,(o.initial?o.initial[n]:void 0)||0)}snapToCursor(n){Aa(s=>{const{drag:o}=this.getProps();if(!xu(s,o,this.currentDirection))return;const{projection:c}=this.visualElement,u=this.getAxisMotionValue(s);if(c&&c.layout){const{min:p,max:h}=c.layout.layoutBox[s];u.set(n[s]-Gt(p,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:s}=this.getProps(),{projection:o}=this.visualElement;if(!Jo(s)||!o||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};Aa(p=>{const h=this.getAxisMotionValue(p);if(h&&this.constraints!==!1){const m=h.get();c[p]=yM({min:m,max:m},this.constraints[p])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),Aa(p=>{if(!xu(p,n,null))return;const h=this.getAxisMotionValue(p),{min:m,max:g}=this.constraints[p];h.set(Gt(m,g,c[p]))})}addListeners(){if(!this.visualElement.current)return;bM.set(this.visualElement,this);const n=this.visualElement.current,s=Tl(n,"pointerdown",m=>{const{drag:g,dragListener:y=!0}=this.getProps();g&&y&&this.start(m)}),o=()=>{const{dragConstraints:m}=this.getProps();Jo(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,u=c.addEventListener("measure",o);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),$t.read(o);const p=Ul(window,"resize",()=>this.scalePositionWithinConstraints()),h=c.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:g})=>{this.isDragging&&g&&(Aa(y=>{const v=this.getAxisMotionValue(y);v&&(this.originPoint[y]+=m[y].translate,v.set(v.get()+m[y].translate))}),this.visualElement.render())}));return()=>{p(),s(),u(),h&&h()}}getProps(){const n=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:o=!1,dragPropagation:c=!1,dragConstraints:u=!1,dragElastic:p=Mh,dragMomentum:h=!0}=n;return{...n,drag:s,dragDirectionLock:o,dragPropagation:c,dragConstraints:u,dragElastic:p,dragMomentum:h}}}function xu(t,n,s){return(n===!0||n===t)&&(s===null||s===t)}function wM(t,n=10){let s=null;return Math.abs(t.y)>n?s="y":Math.abs(t.x)>n&&(s="x"),s}class _M extends vi{constructor(n){super(n),this.removeGroupControls=Na,this.removeListeners=Na,this.controls=new SM(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Na}unmount(){this.removeGroupControls(),this.removeListeners()}}const g0=t=>(n,s)=>{t&&$t.postRender(()=>t(n,s))};class CM extends vi{constructor(){super(...arguments),this.removePointerDownListener=Na}onPointerDown(n){this.session=new xS(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yS(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:s,onPan:o,onPanEnd:c}=this.node.getProps();return{onSessionStart:g0(n),onStart:g0(s),onMove:o,onEnd:(u,p)=>{delete this.session,c&&$t.postRender(()=>c(u,p))}}}mount(){this.removePointerDownListener=Tl(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Au={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Uf=!1;class jM extends b.Component{componentDidMount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:o,layoutId:c}=this.props,{projection:u}=n;u&&(s.group&&s.group.add(u),o&&o.register&&c&&o.register(u),Uf&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),Au.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:s,visualElement:o,drag:c,isPresent:u}=this.props,{projection:p}=o;return p&&(p.isPresent=u,Uf=!0,c||n.layoutDependency!==s||s===void 0||n.isPresent!==u?p.willUpdate():this.safeToRemove(),n.isPresent!==u&&(u?p.promote():p.relegate()||$t.postRender(()=>{const h=p.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),ym.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:o}=this.props,{projection:c}=n;Uf=!0,c&&(c.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(c),o&&o.deregister&&o.deregister(c))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function bS(t){const[n,s]=$1(),o=b.useContext(Kh);return r.jsx(jM,{...t,layoutGroup:o,switchLayoutGroup:b.useContext(eS),isPresent:n,safeToRemove:s})}function TM(t,n,s){const o=qn(t)?t:lr(t);return o.start(Mm("",o,n,s)),o.animation}const kM=(t,n)=>t.depth-n.depth;class MM{constructor(){this.children=[],this.isDirty=!1}add(n){Jh(this.children,n),this.isDirty=!0}remove(n){em(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(kM),this.isDirty=!1,this.children.forEach(n)}}function EM(t,n){const s=na.now(),o=({timestamp:c})=>{const u=c-s;u>=n&&(yi(o),t(u-n))};return $t.setup(o,!0),()=>yi(o)}const SS=["TopLeft","TopRight","BottomLeft","BottomRight"],AM=SS.length,y0=t=>typeof t=="string"?parseFloat(t):t,x0=t=>typeof t=="number"||Fe.test(t);function RM(t,n,s,o,c,u){c?(t.opacity=Gt(0,s.opacity??1,NM(o)),t.opacityExit=Gt(n.opacity??1,0,DM(o))):u&&(t.opacity=Gt(n.opacity??1,s.opacity??1,o));for(let p=0;p<AM;p++){const h=`border${SS[p]}Radius`;let m=v0(n,h),g=v0(s,h);if(m===void 0&&g===void 0)continue;m||(m=0),g||(g=0),m===0||g===0||x0(m)===x0(g)?(t[h]=Math.max(Gt(y0(m),y0(g),o),0),(ss.test(g)||ss.test(m))&&(t[h]+="%")):t[h]=g}(n.rotate||s.rotate)&&(t.rotate=Gt(n.rotate||0,s.rotate||0,o))}function v0(t,n){return t[n]!==void 0?t[n]:t.borderRadius}const NM=wS(0,.5,r1),DM=wS(.5,.95,Na);function wS(t,n,s){return o=>o<t?0:o>n?1:s(Nl(t,n,o))}function b0(t,n){t.min=n.min,t.max=n.max}function Ua(t,n){b0(t.x,n.x),b0(t.y,n.y)}function S0(t,n){t.translate=n.translate,t.scale=n.scale,t.originPoint=n.originPoint,t.origin=n.origin}function w0(t,n,s,o,c){return t-=n,t=Lu(t,1/s,o),c!==void 0&&(t=Lu(t,1/c,o)),t}function zM(t,n=0,s=1,o=.5,c,u=t,p=t){if(ss.test(n)&&(n=parseFloat(n),n=Gt(p.min,p.max,n/100)-p.min),typeof n!="number")return;let h=Gt(u.min,u.max,o);t===u&&(h-=n),t.min=w0(t.min,n,s,h,c),t.max=w0(t.max,n,s,h,c)}function _0(t,n,[s,o,c],u,p){zM(t,n[s],n[o],n[c],n.scale,u,p)}const BM=["x","scaleX","originX"],UM=["y","scaleY","originY"];function C0(t,n,s,o){_0(t.x,n,BM,s?s.x:void 0,o?o.x:void 0),_0(t.y,n,UM,s?s.y:void 0,o?o.y:void 0)}function j0(t){return t.translate===0&&t.scale===1}function _S(t){return j0(t.x)&&j0(t.y)}function T0(t,n){return t.min===n.min&&t.max===n.max}function IM(t,n){return T0(t.x,n.x)&&T0(t.y,n.y)}function k0(t,n){return Math.round(t.min)===Math.round(n.min)&&Math.round(t.max)===Math.round(n.max)}function CS(t,n){return k0(t.x,n.x)&&k0(t.y,n.y)}function M0(t){return Xn(t.x)/Xn(t.y)}function E0(t,n){return t.translate===n.translate&&t.scale===n.scale&&t.originPoint===n.originPoint}class OM{constructor(){this.members=[]}add(n){Jh(this.members,n),n.scheduleRender()}remove(n){if(em(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(n){const s=this.members.findIndex(c=>n===c);if(s===0)return!1;let o;for(let c=s;c>=0;c--){const u=this.members[c];if(u.isPresent!==!1){o=u;break}}return o?(this.promote(o),!0):!1}promote(n,s){const o=this.lead;if(n!==o&&(this.prevLead=o,this.lead=n,n.show(),o)){o.instance&&o.scheduleRender(),n.scheduleRender(),n.resumeFrom=o,s&&(n.resumeFrom.preserveOpacity=!0),o.snapshot&&(n.snapshot=o.snapshot,n.snapshot.latestValues=o.animationValues||o.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:c}=n.options;c===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:s,resumingFrom:o}=n;s.onExitComplete&&s.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function LM(t,n,s){let o="";const c=t.x.translate/n.x,u=t.y.translate/n.y,p=s?.z||0;if((c||u||p)&&(o=`translate3d(${c}px, ${u}px, ${p}px) `),(n.x!==1||n.y!==1)&&(o+=`scale(${1/n.x}, ${1/n.y}) `),s){const{transformPerspective:g,rotate:y,rotateX:v,rotateY:S,skewX:j,skewY:C}=s;g&&(o=`perspective(${g}px) ${o}`),y&&(o+=`rotate(${y}deg) `),v&&(o+=`rotateX(${v}deg) `),S&&(o+=`rotateY(${S}deg) `),j&&(o+=`skewX(${j}deg) `),C&&(o+=`skewY(${C}deg) `)}const h=t.x.scale*n.x,m=t.y.scale*n.y;return(h!==1||m!==1)&&(o+=`scale(${h}, ${m})`),o||"none"}const If=["","X","Y","Z"],PM=1e3;let HM=0;function Of(t,n,s,o){const{latestValues:c}=n;c[t]&&(s[t]=c[t],n.setStaticValue(t,0),o&&(o[t]=0))}function jS(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:n}=t.options;if(!n)return;const s=uS(n);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:c,layoutId:u}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",$t,!(c||u))}const{parent:o}=t;o&&!o.hasCheckedOptimisedAppear&&jS(o)}function TS({attachResizeListener:t,defaultParent:n,measureScroll:s,checkIsScrollRoot:o,resetTransform:c}){return class{constructor(p={},h=n?.()){this.id=HM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(FM),this.nodes.forEach(YM),this.nodes.forEach(XM),this.nodes.forEach(qM)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=p,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new MM)}addEventListener(p,h){return this.eventHandlers.has(p)||this.eventHandlers.set(p,new am),this.eventHandlers.get(p).add(h)}notifyListeners(p,...h){const m=this.eventHandlers.get(p);m&&m.notify(...h)}hasListeners(p){return this.eventHandlers.has(p)}mount(p){if(this.instance)return;this.isSVG=H1(p)&&!DT(p),this.instance=p;const{layoutId:h,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(p),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||h)&&(this.isLayoutDirty=!0),t){let y,v=0;const S=()=>this.root.updateBlockedByResize=!1;$t.read(()=>{v=window.innerWidth}),t(p,()=>{const j=window.innerWidth;j!==v&&(v=j,this.root.updateBlockedByResize=!0,y&&y(),y=EM(S,250),Au.hasAnimatedSinceResize&&(Au.hasAnimatedSinceResize=!1,this.nodes.forEach(N0)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||m)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:v,hasRelativeLayoutChanged:S,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||g.getDefaultTransition()||eE,{onLayoutAnimationStart:T,onLayoutAnimationComplete:E}=g.getProps(),z=!this.targetLayout||!CS(this.targetLayout,j),L=!v&&S;if(this.options.layoutRoot||this.resumeFrom||L||v&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...mm(C,"layout"),onPlay:T,onComplete:E};(g.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(y,L)}else v||N0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const p=this.getStack();p&&p.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),yi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(KM),this.animationId++)}getTransformTemplate(){const{visualElement:p}=this.options;return p&&p.getProps().transformTemplate}willUpdate(p=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const v=this.path[y];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),p&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(A0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(R0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(WM),this.nodes.forEach($M),this.nodes.forEach(VM)):this.nodes.forEach(R0),this.clearAllSnapshots();const h=na.now();Un.delta=Ns(0,1e3/60,h-Un.timestamp),Un.timestamp=h,Un.isProcessing=!0,Tf.update.process(Un),Tf.preRender.process(Un),Tf.render.process(Un),Un.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ym.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(GM),this.sharedNodes.forEach(QM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Xn(this.snapshot.measuredBox.x)&&!Xn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const p=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Sn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,p?p.layoutBox:void 0)}updateScroll(p="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===p&&(h=!1),h&&this.instance){const m=o(this.instance);this.scroll={animationId:this.root.animationId,phase:p,isRoot:m,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!c)return;const p=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!_S(this.projectionDelta),m=this.getTransformTemplate(),g=m?m(this.latestValues,""):void 0,y=g!==this.prevTransformTemplateValue;p&&this.instance&&(h||Yi(this.latestValues)||y)&&(c(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(p=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return p&&(m=this.removeTransform(m)),tE(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:p}=this.options;if(!p)return Sn();const h=p.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(nE))){const{scroll:g}=this.root;g&&(er(h.x,g.offset.x),er(h.y,g.offset.y))}return h}removeElementScroll(p){const h=Sn();if(Ua(h,p),this.scroll?.wasRoot)return h;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:y,options:v}=g;g!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&Ua(h,p),er(h.x,y.offset.x),er(h.y,y.offset.y))}return h}applyTransform(p,h=!1){const m=Sn();Ua(m,p);for(let g=0;g<this.path.length;g++){const y=this.path[g];!h&&y.options.layoutScroll&&y.scroll&&y!==y.root&&tr(m,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Yi(y.latestValues)&&tr(m,y.latestValues)}return Yi(this.latestValues)&&tr(m,this.latestValues),m}removeTransform(p){const h=Sn();Ua(h,p);for(let m=0;m<this.path.length;m++){const g=this.path[m];if(!g.instance||!Yi(g.latestValues))continue;wh(g.latestValues)&&g.updateSnapshot();const y=Sn(),v=g.measurePageBox();Ua(y,v),C0(h,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,y)}return Yi(this.latestValues)&&C0(h,this.latestValues),h}setTargetDelta(p){this.targetDelta=p,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(p){this.options={...this.options,...p,crossfade:p.crossfade!==void 0?p.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Un.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(p=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(p||m&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:v}=this.options;if(!this.layout||!(y||v))return;this.resolvedRelativeTargetAt=Un.timestamp;const S=this.getClosestProjectingParent();S&&this.linkedParentVersion!==S.layoutVersion&&!S.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(S&&S.layout?this.createRelativeTarget(S,this.layout.layoutBox,S.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Sn(),this.targetWithTransforms=Sn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),uM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ua(this.target,this.layout.layoutBox),sS(this.target,this.targetDelta)):Ua(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?this.createRelativeTarget(S,this.target,S.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||wh(this.parent.latestValues)||aS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(p,h,m){this.relativeParent=p,this.linkedParentVersion=p.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Sn(),this.relativeTargetOrigin=Sn(),Pu(this.relativeTargetOrigin,h,m),Ua(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const p=this.getLead(),h=!!this.resumingFrom||this!==p;let m=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Un.timestamp&&(m=!1),m)return;const{layout:g,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||y))return;Ua(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,S=this.treeScale.y;wk(this.layoutCorrected,this.treeScale,this.path,h),p.layout&&!p.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(p.target=p.layout.layoutBox,p.targetWithTransforms=Sn());const{target:j}=p;if(!j){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(S0(this.prevProjectionDelta.x,this.projectionDelta.x),S0(this.prevProjectionDelta.y,this.projectionDelta.y)),kl(this.projectionDelta,this.layoutCorrected,j,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==S||!E0(this.projectionDelta.x,this.prevProjectionDelta.x)||!E0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(p=!0){if(this.options.visualElement?.scheduleRender(),p){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nr(),this.projectionDelta=nr(),this.projectionDeltaWithTransform=nr()}setAnimationOrigin(p,h=!1){const m=this.snapshot,g=m?m.latestValues:{},y={...this.latestValues},v=nr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const S=Sn(),j=m?m.source:void 0,C=this.layout?this.layout.source:void 0,T=j!==C,E=this.getStack(),z=!E||E.members.length<=1,L=!!(T&&!z&&this.options.crossfade===!0&&!this.path.some(JM));this.animationProgress=0;let R;this.mixTargetDelta=X=>{const P=X/1e3;D0(v.x,p.x,P),D0(v.y,p.y,P),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Pu(S,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ZM(this.relativeTarget,this.relativeTargetOrigin,S,P),R&&IM(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Sn()),Ua(R,this.relativeTarget)),T&&(this.animationValues=y,RM(y,g,this.latestValues,P,L,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(p){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(yi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$t.update(()=>{Au.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=lr(0)),this.currentAnimation=TM(this.motionValue,[0,1e3],{...p,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),p.onUpdate&&p.onUpdate(h)},onStop:()=>{},onComplete:()=>{p.onComplete&&p.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const p=this.getStack();p&&p.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const p=this.getLead();let{targetWithTransforms:h,target:m,layout:g,latestValues:y}=p;if(!(!h||!m||!g)){if(this!==p&&this.layout&&g&&kS(this.options.animationType,this.layout.layoutBox,g.layoutBox)){m=this.target||Sn();const v=Xn(this.layout.layoutBox.x);m.x.min=p.target.x.min,m.x.max=m.x.min+v;const S=Xn(this.layout.layoutBox.y);m.y.min=p.target.y.min,m.y.max=m.y.min+S}Ua(h,m),tr(h,y),kl(this.projectionDeltaWithTransform,this.layoutCorrected,h,y)}}registerSharedNode(p,h){this.sharedNodes.has(p)||this.sharedNodes.set(p,new OM),this.sharedNodes.get(p).add(h);const g=h.options.initialPromotionConfig;h.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(h):void 0})}isLead(){const p=this.getStack();return p?p.lead===this:!0}getLead(){const{layoutId:p}=this.options;return p?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:p}=this.options;return p?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:p}=this.options;if(p)return this.root.sharedNodes.get(p)}promote({needsReset:p,transition:h,preserveFollowOpacity:m}={}){const g=this.getStack();g&&g.promote(this,m),p&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const p=this.getStack();return p?p.relegate(this):!1}resetSkewAndRotation(){const{visualElement:p}=this.options;if(!p)return;let h=!1;const{latestValues:m}=p;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(h=!0),!h)return;const g={};m.z&&Of("z",p,g,this.animationValues);for(let y=0;y<If.length;y++)Of(`rotate${If[y]}`,p,g,this.animationValues),Of(`skew${If[y]}`,p,g,this.animationValues);p.render();for(const y in g)p.setStaticValue(y,g[y]),this.animationValues&&(this.animationValues[y]=g[y]);p.scheduleRender()}applyProjectionStyles(p,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){p.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,p.visibility="",p.opacity="",p.pointerEvents=Eu(h?.pointerEvents)||"",p.transform=m?m(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Eu(h?.pointerEvents)||""),this.hasProjected&&!Yi(this.latestValues)&&(p.transform=m?m({},""):"none",this.hasProjected=!1);return}p.visibility="";const y=g.animationValues||g.latestValues;this.applyTransformsToTarget();let v=LM(this.projectionDeltaWithTransform,this.treeScale,y);m&&(v=m(y,v)),p.transform=v;const{x:S,y:j}=this.projectionDelta;p.transformOrigin=`${S.origin*100}% ${j.origin*100}% 0`,g.animationValues?p.opacity=g===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:p.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const C in Sh){if(y[C]===void 0)continue;const{correct:T,applyTo:E,isCSSVariable:z}=Sh[C],L=v==="none"?y[C]:T(y[C],g);if(E){const R=E.length;for(let X=0;X<R;X++)p[E[X]]=L}else z?this.options.visualElement.renderState.vars[C]=L:p[C]=L}this.options.layoutId&&(p.pointerEvents=g===this?Eu(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(p=>p.currentAnimation?.stop()),this.root.nodes.forEach(A0),this.root.sharedNodes.clear()}}}function $M(t){t.updateLayout()}function VM(t){const n=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=t.layout,{animationType:c}=t.options,u=n.source!==t.layout.source;c==="size"?Aa(y=>{const v=u?n.measuredBox[y]:n.layoutBox[y],S=Xn(v);v.min=s[y].min,v.max=v.min+S}):kS(c,n.layoutBox,s)&&Aa(y=>{const v=u?n.measuredBox[y]:n.layoutBox[y],S=Xn(s[y]);v.max=v.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+S)});const p=nr();kl(p,s,n.layoutBox);const h=nr();u?kl(h,t.applyTransform(o,!0),n.measuredBox):kl(h,s,n.layoutBox);const m=!_S(p);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:S}=y;if(v&&S){const j=Sn();Pu(j,n.layoutBox,v.layoutBox);const C=Sn();Pu(C,s,S.layoutBox),CS(j,C)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=j,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:h,layoutDelta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function FM(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function qM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function GM(t){t.clearSnapshot()}function A0(t){t.clearMeasurements()}function R0(t){t.isLayoutDirty=!1}function WM(t){const{visualElement:n}=t.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),t.resetTransform()}function N0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function YM(t){t.resolveTargetDelta()}function XM(t){t.calcProjection()}function KM(t){t.resetSkewAndRotation()}function QM(t){t.removeLeadSnapshot()}function D0(t,n,s){t.translate=Gt(n.translate,0,s),t.scale=Gt(n.scale,1,s),t.origin=n.origin,t.originPoint=n.originPoint}function z0(t,n,s,o){t.min=Gt(n.min,s.min,o),t.max=Gt(n.max,s.max,o)}function ZM(t,n,s,o){z0(t.x,n.x,s.x,o),z0(t.y,n.y,s.y,o)}function JM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const eE={duration:.45,ease:[.4,0,.1,1]},B0=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),U0=B0("applewebkit/")&&!B0("chrome/")?Math.round:Na;function I0(t){t.min=U0(t.min),t.max=U0(t.max)}function tE(t){I0(t.x),I0(t.y)}function kS(t,n,s){return t==="position"||t==="preserve-aspect"&&!cM(M0(n),M0(s),.2)}function nE(t){return t!==t.root&&t.scroll?.wasRoot}const aE=TS({attachResizeListener:(t,n)=>Ul(t,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Lf={current:void 0},MS=TS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Lf.current){const t=new aE({});t.mount(window),t.setOptions({layoutScroll:!0}),Lf.current=t}return Lf.current},resetTransform:(t,n)=>{t.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),sE={pan:{Feature:CM},drag:{Feature:_M,ProjectionNode:MS,MeasureLayout:bS}};function O0(t,n,s){const{props:o}=t;t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",s==="Start");const c="onHover"+s,u=o[c];u&&$t.postRender(()=>u(n,Xl(n)))}class iE extends vi{mount(){const{current:n}=this.node;n&&(this.unmount=MT(n,(s,o)=>(O0(this.node,o,"Start"),c=>O0(this.node,c,"End"))))}unmount(){}}class oE extends vi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gl(Ul(this.node.current,"focus",()=>this.onFocus()),Ul(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function L0(t,n,s){const{props:o}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&o.whileTap&&t.animationState.setActive("whileTap",s==="Start");const c="onTap"+(s==="End"?"":s),u=o[c];u&&$t.postRender(()=>u(n,Xl(n)))}class rE extends vi{mount(){const{current:n}=this.node;n&&(this.unmount=NT(n,(s,o)=>(L0(this.node,o,"Start"),(c,{success:u})=>L0(this.node,c,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Eh=new WeakMap,Pf=new WeakMap,lE=t=>{const n=Eh.get(t.target);n&&n(t)},cE=t=>{t.forEach(lE)};function uE({root:t,...n}){const s=t||document;Pf.has(s)||Pf.set(s,{});const o=Pf.get(s),c=JSON.stringify(n);return o[c]||(o[c]=new IntersectionObserver(cE,{root:t,...n})),o[c]}function dE(t,n,s){const o=uE(n);return Eh.set(t,s),o.observe(t),()=>{Eh.delete(t),o.unobserve(t)}}const pE={some:0,all:1};class fE extends vi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:s,margin:o,amount:c="some",once:u}=n,p={root:s?s.current:void 0,rootMargin:o,threshold:typeof c=="number"?c:pE[c]},h=m=>{const{isIntersecting:g}=m;if(this.isInView===g||(this.isInView=g,u&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:y,onViewportLeave:v}=this.node.getProps(),S=g?y:v;S&&S(m)};return dE(this.node.current,p,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:s}=this.node;["amount","margin","root"].some(hE(n,s))&&this.startObserver()}unmount(){}}function hE({viewport:t={}},{viewport:n={}}={}){return s=>t[s]!==n[s]}const mE={inView:{Feature:fE},tap:{Feature:rE},focus:{Feature:oE},hover:{Feature:iE}},gE={layout:{ProjectionNode:MS,MeasureLayout:bS}},yE={...aM,...mE,...sE,...gE},se=vk(yE,Nk),Hf=t=>{const[n,s]=b.useState(!1);return b.useEffect(()=>{const o=window.matchMedia(t);o.matches!==n&&s(o.matches);const c=()=>s(o.matches);return o.addEventListener("change",c),()=>o.removeEventListener("change",c)},[n,t]),n},xE=()=>{const[t,n]=b.useState({x:0,y:0}),[s,o]=b.useState(!1),[c,u]=b.useState(!1),[p,h]=b.useState(!1);return b.useEffect(()=>{const m=j=>{n({x:j.clientX,y:j.clientY}),u(!0);const T=j.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');o(!!T)},g=()=>h(!0),y=()=>h(!1),v=()=>u(!1),S=()=>u(!0);return document.addEventListener("mousemove",m),document.addEventListener("mousedown",g),document.addEventListener("mouseup",y),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",S),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",y),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",S)}},[]),c?r.jsxs(r.Fragment,{children:[r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?40:12,height:s?40:12,borderRadius:"50%",background:s?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:s?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${p?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?50:32,height:s?50:32,borderRadius:"50%",border:`1.5px solid ${s?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"},animate:{x:t.x-t.x,y:t.y-t.y},transition:{type:"spring",stiffness:150,damping:15,mass:.1}})]}):null},vE=`
  /* Custom scrollbar - only for devices with fine pointer (mouse) */
  @media (pointer: fine) {
    /* Hide default cursor on landing page */
    .landing-page-custom-cursor {
      cursor: none !important;
    }
    .landing-page-custom-cursor * {
      cursor: none !important;
    }

    /* Custom Scrollbar for html/body */
    html:has(.landing-page-custom-cursor)::-webkit-scrollbar,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.landing-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    /* Firefox scrollbar */
    html:has(.landing-page-custom-cursor),
    body:has(.landing-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  /* Touch devices - use default cursor and scrollbar */
  @media (pointer: coarse) {
    .landing-page-custom-cursor {
      cursor: auto !important;
    }
    .landing-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,Oa={page:{background:"#050505",fontFamily:'"DM Sans", sans-serif',color:"#f1f5f9",minHeight:"100vh",overflowX:"hidden"},h1:{fontFamily:'"Syne", sans-serif',color:"#ffffff",fontSize:"clamp(2.5rem, 8vw, 4.5rem)",fontWeight:700,lineHeight:1.1,marginBottom:"1.5rem"},h2:{fontFamily:'"Syne", sans-serif',color:"#f1f5f9",fontSize:"clamp(2rem, 5vw, 3rem)",fontWeight:700,lineHeight:1.2,marginBottom:"1.5rem"},h3:{fontFamily:'"Syne", sans-serif',color:"#f1f5f9",fontSize:"1.25rem",fontWeight:700,lineHeight:1.4,marginBottom:"0.75rem"},text:{color:"#94a3b8",fontSize:"1rem",lineHeight:1.7,marginBottom:0},textLarge:{color:"#94a3b8",fontSize:"1.125rem",lineHeight:1.7,marginBottom:0},gradientText:{background:"linear-gradient(135deg, #10b981 0%, #14b8a6 50%, #34d399 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"}},bE=({delay:t,duration:n,size:s,left:o,top:c})=>r.jsx(se.div,{className:"absolute rounded-full",style:{width:s,height:s,left:o,top:c,background:"radial-gradient(circle, rgba(16,185,129,0.4) 0%, transparent 70%)",filter:"blur(1px)"},animate:{y:[-20,20,-20],x:[-10,10,-10],opacity:[.3,.6,.3],scale:[1,1.2,1]},transition:{duration:n,delay:t,repeat:1/0,ease:"easeInOut"}}),Xo=({size:t,color:n,delay:s,x:o,y:c})=>r.jsx(se.div,{style:{position:"absolute",left:o,top:c},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1,y:[0,-15,0]},transition:{opacity:{duration:.6,delay:s},scale:{duration:.6,delay:s},y:{duration:3,delay:s+.5,repeat:1/0,ease:"easeInOut"}},children:r.jsxs("div",{style:{position:"relative",width:t,height:t,transformStyle:"preserve-3d",transform:"rotateX(-20deg) rotateY(45deg)"},children:[r.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(135deg, ${n} 0%, ${n}99 100%)`,transform:`translateZ(${t/2}px)`,borderRadius:8,boxShadow:`0 0 30px ${n}66`}}),r.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(180deg, ${n}cc 0%, ${n}66 100%)`,transform:`rotateX(-90deg) translateZ(${t/2}px)`,borderRadius:8}}),r.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(90deg, ${n}99 0%, ${n}44 100%)`,transform:`rotateY(90deg) translateZ(${t/2}px)`,borderRadius:8}})]})}),SE=({icon:t,title:n,description:s})=>r.jsx(se.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.5},whileHover:{y:-8,scale:1.02},style:{position:"relative"},children:r.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"1rem",padding:"2rem",height:"100%",background:"linear-gradient(145deg, rgba(20,20,20,0.95) 0%, rgba(10,10,10,0.98) 100%)",border:"1px solid rgba(16,185,129,0.2)"},children:[r.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"3.5rem",height:"3.5rem",borderRadius:"0.75rem",marginBottom:"1.5rem",background:"linear-gradient(135deg, rgba(16,185,129,0.2) 0%, rgba(20,184,166,0.1) 100%)",border:"1px solid rgba(16,185,129,0.3)"},children:r.jsx(t,{style:{width:"1.75rem",height:"1.75rem",color:"#34d399"}})}),r.jsx("h3",{style:Oa.h3,children:n}),r.jsx("p",{style:Oa.text,children:s})]})}),wE=()=>{const t=b.useRef(null),n=Hf("(max-width: 640px)"),s=Hf("(max-width: 1024px)"),o=Hf("(pointer: fine)");b.useEffect(()=>{const p="landing-page-custom-styles";if(!document.getElementById(p)){const h=document.createElement("style");h.id=p,h.textContent=vE,document.head.appendChild(h)}return()=>{const h=document.getElementById(p);h&&h.remove()}},[]);const c=Array.from({length:20},(p,h)=>({id:h,delay:Math.random()*2,duration:4+Math.random()*3,size:4+Math.random()*8,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`})),u=[{icon:E_,title:"Real-time Messaging",description:"Lightning-fast message delivery with live typing indicators. Your conversations flow naturally without any delays."},{icon:ir,title:"End-to-End Security",description:"Your conversations stay private with military-grade encryption. Only you and your recipients can read your messages."},{icon:wn,title:"Group Collaboration",description:"Create channels, manage groups, and share files seamlessly. Perfect for teams of any size."}];return r.jsxs("div",{ref:t,className:o?"landing-page-custom-cursor":"",style:Oa.page,children:[o&&r.jsx(xE,{}),r.jsx("div",{className:"fixed inset-0 pointer-events-none",style:{background:`
            radial-gradient(ellipse 80% 50% at 20% -10%, rgba(16,185,129,0.15) 0%, transparent 50%),
            radial-gradient(ellipse 60% 40% at 80% 10%, rgba(20,184,166,0.1) 0%, transparent 50%),
            radial-gradient(ellipse 50% 30% at 50% 100%, rgba(16,185,129,0.08) 0%, transparent 50%)
          `}}),r.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:c.map(p=>r.jsx(bE,{...p},p.id))}),r.jsx(se.nav,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},style:{position:"fixed",top:0,left:0,right:0,zIndex:50,backdropFilter:"blur(12px)",background:"rgba(5,5,5,0.85)",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:r.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"0.875rem 1rem":"1rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs(ns,{to:"/",style:{display:"flex",alignItems:"center",gap:n?"0.5rem":"0.75rem",textDecoration:"none"},children:[r.jsx("div",{style:{width:n?"2rem":"2.5rem",height:n?"2rem":"2.5rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",boxShadow:"0 0 20px rgba(16,185,129,0.4)"},children:r.jsx(Ml,{style:{width:n?"1rem":"1.25rem",height:n?"1rem":"1.25rem",color:"#ffffff"}})}),r.jsx("span",{style:{fontSize:n?"1rem":"1.25rem",fontWeight:700,color:"#ffffff",fontFamily:'"Syne", sans-serif'},children:"Simpchat"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:n?"0.5rem":"0.75rem"},children:[r.jsx(ns,{to:"/login",style:{padding:n?"0.375rem 0.625rem":"0.5rem 1rem",fontSize:n?"0.813rem":"0.875rem",fontWeight:600,color:"#10b981",textDecoration:"none",borderRadius:"0.5rem",transition:"all 0.2s ease"},children:"Sign In"}),r.jsx(ns,{to:"/register",style:{display:"inline-flex",alignItems:"center",gap:"0.375rem",padding:n?"0.5rem 0.875rem":"0.625rem 1.25rem",fontSize:n?"0.813rem":"0.875rem",fontWeight:600,borderRadius:"0.5rem",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",color:"#050505",textDecoration:"none",boxShadow:"0 0 20px rgba(16,185,129,0.3)",transition:"all 0.2s ease"},children:"Get Started"})]})]})}),r.jsxs("section",{style:{position:"relative",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"5rem"},children:[r.jsx("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"3rem 1rem":"5rem 1.5rem"},children:r.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"repeat(2, 1fr)",gap:s?"2rem":"4rem",alignItems:"center"},children:[r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx(se.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},style:{marginBottom:"1.5rem"},children:r.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:500,background:"rgba(16,185,129,0.1)",border:"1px solid rgba(16,185,129,0.3)",color:"#10b981"},children:[r.jsx(eh,{style:{width:"1rem",height:"1rem"}}),"Simple. Secure. Seamless."]})}),r.jsxs(se.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},style:Oa.h1,children:[r.jsx("span",{style:{color:"#ffffff"},children:"Connect."}),r.jsx("br",{}),r.jsx("span",{style:Oa.gradientText,children:"Chat."}),r.jsx("br",{}),r.jsx("span",{style:{color:"#ffffff"},children:"Simplify."})]}),r.jsx(se.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},style:{...Oa.textLarge,marginBottom:"2.5rem",maxWidth:"32rem",margin:"0 auto 2.5rem auto"},children:"Experience real-time messaging reimagined. Simpchat brings you instant communication with uncompromising security and elegant simplicity."}),r.jsxs(se.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},style:{display:"flex",flexDirection:"row",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[r.jsxs(ns,{to:"/register",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.875rem 1.75rem",fontSize:"0.938rem",fontWeight:600,borderRadius:"0.75rem",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",color:"#050505",boxShadow:"0 0 25px rgba(16,185,129,0.35)",textDecoration:"none",transition:"all 0.3s ease"},children:["Start Chatting Free",r.jsx(gi,{style:{width:"1.125rem",height:"1.125rem"}})]}),r.jsx(ns,{to:"/login",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.875rem 1.75rem",fontSize:"0.938rem",fontWeight:600,borderRadius:"0.75rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.15)",color:"#f1f5f9",textDecoration:"none",transition:"all 0.3s ease"},children:"Open App"})]}),r.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.7},style:{display:"flex",flexDirection:n?"column":"row",alignItems:"center",gap:n?"0.75rem":"2rem",marginTop:"2.5rem",justifyContent:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Hh,{style:{width:"1rem",height:"1rem",color:"#34d399"}}),r.jsx("span",{style:{fontSize:n?"0.813rem":"0.875rem",color:"#64748b"},children:"End-to-end encrypted"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx($h,{style:{width:"1rem",height:"1rem",color:"#34d399"}}),r.jsx("span",{style:{fontSize:n?"0.813rem":"0.875rem",color:"#64748b"},children:"Real-time notifications"})]})]})]}),!s&&r.jsx("div",{style:{position:"relative",height:"500px",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:[r.jsx("div",{style:{position:"absolute",width:"20rem",height:"20rem",borderRadius:"50%",background:"radial-gradient(circle, rgba(16,185,129,0.25) 0%, transparent 70%)",filter:"blur(40px)"}}),r.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",perspective:"1000px"},children:[r.jsx(Xo,{size:100,color:"#10b981",delay:0,x:180,y:120}),r.jsx(Xo,{size:70,color:"#14b8a6",delay:.2,x:280,y:180}),r.jsx(Xo,{size:50,color:"#34d399",delay:.4,x:220,y:250}),r.jsx(Xo,{size:80,color:"#10b981",delay:.3,x:120,y:200}),r.jsx(Xo,{size:60,color:"#0d9488",delay:.5,x:300,y:280}),r.jsx(Xo,{size:40,color:"#14b8a6",delay:.6,x:160,y:300})]}),r.jsx(se.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.8},style:{position:"absolute",top:"25%",right:"2.5rem"},children:r.jsx("div",{style:{padding:"1rem 1.5rem",borderRadius:"1rem",borderBottomRightRadius:"0.375rem",background:"linear-gradient(135deg, rgba(16,185,129,0.2) 0%, rgba(16,185,129,0.1) 100%)",border:"1px solid rgba(16,185,129,0.3)",backdropFilter:"blur(10px)"},children:r.jsx("p",{style:{fontSize:"0.875rem",fontWeight:500,color:"#6ee7b7",margin:0},children:"Hey! Welcome to Simpchat"})})}),r.jsx(se.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:1},style:{position:"absolute",bottom:"25%",left:"2.5rem"},children:r.jsx("div",{style:{padding:"1rem 1.5rem",borderRadius:"1rem",borderBottomLeftRadius:"0.375rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",backdropFilter:"blur(10px)"},children:r.jsx("p",{style:{fontSize:"0.875rem",fontWeight:500,color:"#cbd5e1",margin:0},children:"Thanks! This is amazing"})})})]})})]})}),r.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},style:{position:"absolute",bottom:"2.5rem",left:"50%",transform:"translateX(-50%)",cursor:"pointer"},onClick:()=>document.getElementById("features")?.scrollIntoView({behavior:"smooth"}),children:[r.jsx(se.div,{animate:{y:[0,10,0]},transition:{duration:1.5,repeat:1/0},style:{width:"2rem",height:"3.5rem",borderRadius:"9999px",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:"0.625rem",border:"2px solid rgba(255,255,255,0.25)",background:"rgba(255,255,255,0.03)"},children:r.jsx(se.div,{animate:{y:[0,8,0],opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},style:{width:"0.5rem",height:"1rem",borderRadius:"9999px",background:"linear-gradient(180deg, #10b981 0%, #14b8a6 100%)",boxShadow:"0 0 8px rgba(16,185,129,0.5)"}})}),r.jsx("p",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.4)",marginTop:"0.5rem",textAlign:"center",fontWeight:500},children:"Scroll"})]})]}),r.jsx("section",{id:"features",style:{position:"relative",padding:n?"4rem 0":"8rem 0"},children:r.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"0 1rem":"0 1.5rem"},children:[r.jsxs(se.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},style:{textAlign:"center",marginBottom:"4rem"},children:[r.jsxs("h2",{style:Oa.h2,children:["Built for"," ",r.jsx("span",{style:Oa.gradientText,children:"Modern Teams"})]}),r.jsx("p",{style:{...Oa.textLarge,maxWidth:"42rem",margin:"0 auto"},children:"Everything you need for seamless communication, wrapped in an elegant interface that stays out of your way."})]}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",gap:n?"1rem":"1.5rem"},children:u.map((p,h)=>r.jsx(SE,{...p,index:h},p.title))})]})}),r.jsx("section",{style:{position:"relative",padding:n?"4rem 0":"8rem 0"},children:r.jsx("div",{style:{maxWidth:"56rem",margin:"0 auto",padding:n?"0 1rem":"0 1.5rem",textAlign:"center"},children:r.jsxs(se.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},style:{position:"relative",borderRadius:n?"1rem":"1.5rem",padding:n?"2.5rem 1.5rem":"4rem 3rem",overflow:"hidden",background:"linear-gradient(145deg, rgba(16,185,129,0.1) 0%, rgba(5,5,5,0.9) 100%)",border:"1px solid rgba(16,185,129,0.2)"},children:[r.jsx("div",{style:{position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",width:"100%",height:"50%",background:"radial-gradient(ellipse at center top, rgba(16,185,129,0.15) 0%, transparent 70%)"}}),r.jsx("h2",{style:{...Oa.h2,position:"relative"},children:"Ready to simplify your conversations?"}),r.jsx("p",{style:{...Oa.textLarge,position:"relative",maxWidth:"32rem",margin:"0 auto 2.5rem auto"},children:"Join thousands of users who have already made the switch to simpler, more secure messaging."}),r.jsxs(ns,{to:"/register",style:{position:"relative",display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",fontSize:"1rem",fontWeight:600,borderRadius:"0.75rem",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",color:"#050505",boxShadow:"0 0 40px rgba(16,185,129,0.4)",textDecoration:"none"},children:["Get Started  It's Free",r.jsx(gi,{style:{width:"1.25rem",height:"1.25rem"}})]})]})})}),r.jsx("footer",{style:{position:"relative",padding:n?"2rem 0":"3rem 0",borderTop:"1px solid rgba(255,255,255,0.05)"},children:r.jsx("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"0 1rem":"0 1.5rem"},children:r.jsxs("div",{style:{display:"flex",flexDirection:n?"column":"row",alignItems:"center",justifyContent:n?"center":"space-between",gap:n?"1rem":"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"2rem",height:"2rem",borderRadius:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)"},children:r.jsx(Ml,{style:{width:"1rem",height:"1rem",color:"#ffffff"}})}),r.jsx("span",{style:{fontSize:"1.125rem",fontWeight:700,color:"#ffffff",fontFamily:'"Syne", sans-serif'},children:"Simpchat"})]}),r.jsxs("p",{style:{fontSize:"0.875rem",color:"#64748b",margin:0},children:[" ",new Date().getFullYear()," Simpchat. All rights reserved."]})]})})})]})},_E="_authContainer_1u6uv_47",CE="_orb_1u6uv_99",jE="_orb1_1u6uv_117",TE="_orb2_1u6uv_135",kE="_orb3_1u6uv_153",ME="_authCard_1u6uv_175",EE="_header_1u6uv_213",AE="_iconWrapper_1u6uv_225",RE="_title_1u6uv_257",NE="_subtitle_1u6uv_277",DE="_errorAlert_1u6uv_293",zE="_successAlert_1u6uv_343",BE="_form_1u6uv_393",UE="_inputGroup_1u6uv_401",IE="_label_1u6uv_409",OE="_inputWrapper_1u6uv_425",LE="_input_1u6uv_401",PE="_inputPassword_1u6uv_507",HE="_togglePassword_1u6uv_515",$E="_forgotLink_1u6uv_555",VE="_submitBtn_1u6uv_599",FE="_footer_1u6uv_689",qE="_backBtn_1u6uv_747",GE="_verifiedBadge_1u6uv_789",WE="_otpInput_1u6uv_837",YE="_resendSection_1u6uv_855",XE="_resendBtn_1u6uv_879",KE="_spinner_1u6uv_923",q={authContainer:_E,orb:CE,orb1:jE,orb2:TE,orb3:kE,authCard:ME,header:EE,iconWrapper:AE,title:RE,subtitle:NE,errorAlert:DE,successAlert:zE,form:BE,inputGroup:UE,label:IE,inputWrapper:OE,input:LE,inputPassword:PE,togglePassword:HE,forgotLink:$E,submitBtn:VE,footer:FE,backBtn:qE,verifiedBadge:GE,otpInput:WE,resendSection:YE,resendBtn:XE,spinner:KE},QE=()=>{const t=Ph(),{login:n,isLoading:s,error:o,clearError:c}=ql(),[u,p]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState(!1),v=async S=>{S.preventDefault(),c();try{console.log("[LoginForm] Starting login..."),await n({credential:u,password:h});const j=wt.getState();console.log("[LoginForm] Login successful. Auth state:",{hasToken:!!j.token,hasUser:!!j.user,isLoading:j.isLoading}),j.token&&j.user?(console.log("[LoginForm] Auth state verified, navigating to dashboard..."),t("/dashboard-new")):console.error("[LoginForm] Login completed but auth state not set!")}catch(j){console.error("[LoginForm] Login error:",j)}};return r.jsxs("div",{className:q.authContainer,children:[r.jsx("div",{className:`${q.orb} ${q.orb1}`}),r.jsx("div",{className:`${q.orb} ${q.orb2}`}),r.jsx("div",{className:`${q.orb} ${q.orb3}`}),r.jsxs("div",{className:q.authCard,children:[r.jsxs("div",{className:q.header,children:[r.jsx("div",{className:q.iconWrapper,children:r.jsx(Ml,{size:32,color:"#ffffff"})}),r.jsx("h1",{className:q.title,children:"Sign In"}),r.jsx("p",{className:q.subtitle,children:"Welcome back to Simpchat"})]}),o&&r.jsxs("div",{className:q.errorAlert,children:[r.jsx(Rs,{size:20}),r.jsx("p",{children:o})]}),r.jsxs("form",{onSubmit:v,className:q.form,children:[r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"credential",className:q.label,children:"Email or Username"}),r.jsx("input",{id:"credential",type:"text",value:u,onChange:S=>p(S.target.value),placeholder:"john@example.com",required:!0,disabled:s,className:q.input})]}),r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"password",className:q.label,children:"Password"}),r.jsxs("div",{className:q.inputWrapper,children:[r.jsx("input",{id:"password",type:g?"text":"password",value:h,onChange:S=>m(S.target.value),placeholder:"",required:!0,disabled:s,className:`${q.input} ${q.inputPassword}`}),r.jsx("button",{type:"button",onClick:()=>y(!g),disabled:s,className:q.togglePassword,children:g?r.jsx(El,{size:20}):r.jsx(or,{size:20})})]})]}),r.jsx("div",{className:q.forgotLink,children:r.jsx(ns,{to:"/forgot-password",children:"Forgot password?"})}),r.jsx("button",{type:"submit",disabled:s||!u||!h,className:q.submitBtn,children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:q.spinner}),"Signing in..."]}):r.jsxs(r.Fragment,{children:["Sign In",r.jsx(gi,{size:20})]})})]}),r.jsxs("div",{className:q.footer,children:[r.jsx("p",{children:"Don't have an account?"}),r.jsx(ns,{to:"/register",children:"Create Account "})]})]})]})},ZE=t=>{const[n,s]=b.useState(!1);return b.useEffect(()=>{const o=window.matchMedia(t);o.matches!==n&&s(o.matches);const c=()=>s(o.matches);return o.addEventListener("change",c),()=>o.removeEventListener("change",c)},[n,t]),n},JE=()=>{const[t,n]=b.useState({x:0,y:0}),[s,o]=b.useState(!1),[c,u]=b.useState(!1),[p,h]=b.useState(!1);return b.useEffect(()=>{const m=j=>{n({x:j.clientX,y:j.clientY}),u(!0);const T=j.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');o(!!T)},g=()=>h(!0),y=()=>h(!1),v=()=>u(!1),S=()=>u(!0);return document.addEventListener("mousemove",m),document.addEventListener("mousedown",g),document.addEventListener("mouseup",y),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",S),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",y),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",S)}},[]),c?r.jsxs(r.Fragment,{children:[r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?40:12,height:s?40:12,borderRadius:"50%",background:s?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:s?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${p?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?50:32,height:s?50:32,borderRadius:"50%",border:`1.5px solid ${s?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"}})]}):null},eA=`
  @media (pointer: fine) {
    .auth-page-custom-cursor {
      cursor: none !important;
    }
    .auth-page-custom-cursor * {
      cursor: none !important;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    html:has(.auth-page-custom-cursor),
    body:has(.auth-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  @media (pointer: coarse) {
    .auth-page-custom-cursor {
      cursor: auto !important;
    }
    .auth-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,tA=()=>{const t=ZE("(pointer: fine)");return b.useEffect(()=>{const n="auth-page-custom-styles";if(!document.getElementById(n)){const s=document.createElement("style");s.id=n,s.textContent=eA,document.head.appendChild(s)}return()=>{const s=document.getElementById(n);s&&s.remove()}},[]),r.jsxs("div",{className:t?"auth-page-custom-cursor":"",children:[t&&r.jsx(JE,{}),r.jsx(QE,{})]})},Hu=t=>{const n=typeof t=="string"?new Date(t):t,o=new Date().getTime()-n.getTime(),c=Math.floor(o/6e4),u=Math.floor(o/36e5),p=Math.floor(o/864e5);return c<1?"just now":c<60?`${c}m ago`:u<24?`${u}h ago`:p<7?`${p}d ago`:n.toLocaleDateString()},nA=t=>(typeof t=="string"?new Date(t):t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),P0=(t,n)=>t.length<=n?t:t.substring(0,n)+"...",Mn=t=>{if(!t||t==="undefined"||t==="null")return"?";const n=String(t).trim();if(!n||n.length===0)return"?";const s=n.split(/\s+/).filter(o=>o.length>0);return s.length===0?"?":s.length===1?s[0][0]?.toUpperCase()||"?":s.map(o=>o[0]).join("").toUpperCase().slice(0,2)||"?"},ES=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),pt=t=>{if(t)return t.replace("simpchat.filestorage:9000","localhost:9000").replace("localhost:9000","localhost:9000")},$u=t=>{if(!t)return"Unknown";const n=new Date(t),o=new Date().getTime()-n.getTime(),c=Math.floor(o/6e4),u=Math.floor(o/36e5),p=Math.floor(o/864e5);if(c<1)return"just now";if(c===1)return"1 minute ago";if(c<60)return`${c} minutes ago`;if(u===1)return"1 hour ago";if(u<24)return`${u} hours ago`;if(p===1)return`Yesterday at ${n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`;if(p<7){const h=n.toLocaleDateString([],{weekday:"long"}),m=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`${h} at ${m}`}return n.toLocaleDateString([],{month:"short",day:"numeric",year:"numeric"})},aA=()=>{const t=Ph(),{register:n,isLoading:s}=ql(),[o,c]=b.useState("email"),[u,p]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState(""),[v,S]=b.useState(""),[j,C]=b.useState(""),[T,E]=b.useState(!1),[z,L]=b.useState(!1),[R,X]=b.useState(""),[P,te]=b.useState(!1),re=async me=>{if(me.preventDefault(),X(""),!ES(u)){X("Please enter a valid email address");return}te(!0);try{await mi.sendOTP(u),c("complete")}catch(Pe){X(_n(Pe,"Failed to send verification code"))}finally{te(!1)}},Q=async me=>{if(me.preventDefault(),X(""),!h.trim()){X("Username is required");return}if(h.length<3){X("Username must be at least 3 characters");return}if(g.length<5){X("Password must be at least 5 characters");return}if(g!==v){X("Passwords do not match");return}if(!j.trim()){X("Verification code is required");return}try{console.log("[RegisterForm] Registering user..."),await n(u,h,g,j);const Pe=wt.getState();console.log("[RegisterForm] Registration successful. Auth state:",{hasToken:!!Pe.token,hasUser:!!Pe.user,isLoading:Pe.isLoading}),Pe.token&&Pe.user?(console.log("[RegisterForm] Auth state verified, navigating to dashboard..."),t("/dashboard-new")):console.error("[RegisterForm] Registration completed but auth state not set!")}catch(Pe){X(_n(Pe,"Registration failed"))}},ge=async()=>{X(""),te(!0);try{await mi.sendOTP(u)}catch(me){X(_n(me,"Failed to resend code"))}finally{te(!1)}};return o==="email"?r.jsxs("div",{className:q.authContainer,children:[r.jsx("div",{className:`${q.orb} ${q.orb1}`}),r.jsx("div",{className:`${q.orb} ${q.orb2}`}),r.jsx("div",{className:`${q.orb} ${q.orb3}`}),r.jsxs("div",{className:q.authCard,children:[r.jsxs("div",{className:q.header,children:[r.jsx("div",{className:q.iconWrapper,children:r.jsx(Ml,{size:32,color:"#ffffff"})}),r.jsx("h1",{className:q.title,children:"Create Account"}),r.jsx("p",{className:q.subtitle,children:"Join Simpchat today"})]}),R&&r.jsxs("div",{className:q.errorAlert,children:[r.jsx(Rs,{size:20}),r.jsx("p",{children:R})]}),r.jsxs("form",{onSubmit:re,className:q.form,children:[r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"email",className:q.label,children:"Email Address"}),r.jsx("input",{id:"email",type:"email",value:u,onChange:me=>p(me.target.value),placeholder:"you@example.com",required:!0,disabled:P,className:q.input})]}),r.jsx("button",{type:"submit",disabled:P||!u,className:q.submitBtn,children:P?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:q.spinner}),"Sending..."]}):r.jsxs(r.Fragment,{children:["Continue",r.jsx(gi,{size:20})]})})]}),r.jsxs("div",{className:q.footer,children:[r.jsx("p",{children:"Already have an account?"}),r.jsx(ns,{to:"/login",children:"Sign In "})]})]})]}):r.jsxs("div",{className:q.authContainer,children:[r.jsx("div",{className:`${q.orb} ${q.orb1}`}),r.jsx("div",{className:`${q.orb} ${q.orb2}`}),r.jsx("div",{className:`${q.orb} ${q.orb3}`}),r.jsxs("div",{className:q.authCard,children:[r.jsxs("div",{className:q.header,style:{textAlign:"left"},children:[r.jsxs("button",{onClick:()=>c("email"),className:q.backBtn,children:[r.jsx(vb,{size:16}),"Back"]}),r.jsx("h1",{className:q.title,style:{textAlign:"left"},children:"Complete Profile"}),r.jsxs("div",{className:q.verifiedBadge,children:[r.jsx(th,{size:16}),r.jsxs("p",{children:["Email verified: ",u]})]})]}),R&&r.jsxs("div",{className:q.errorAlert,children:[r.jsx(Rs,{size:20}),r.jsx("p",{children:R})]}),r.jsxs("form",{onSubmit:Q,className:q.form,children:[r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"username",className:q.label,children:"Username"}),r.jsx("input",{id:"username",type:"text",value:h,onChange:me=>m(me.target.value),placeholder:"johndoe",required:!0,disabled:s,className:q.input})]}),r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"password",className:q.label,children:"Password"}),r.jsxs("div",{className:q.inputWrapper,children:[r.jsx("input",{id:"password",type:T?"text":"password",value:g,onChange:me=>y(me.target.value),placeholder:"",required:!0,disabled:s,className:`${q.input} ${q.inputPassword}`}),r.jsx("button",{type:"button",onClick:()=>E(!T),disabled:s,className:q.togglePassword,children:T?r.jsx(El,{size:20}):r.jsx(or,{size:20})})]})]}),r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"confirm-password",className:q.label,children:"Confirm Password"}),r.jsxs("div",{className:q.inputWrapper,children:[r.jsx("input",{id:"confirm-password",type:z?"text":"password",value:v,onChange:me=>S(me.target.value),placeholder:"",required:!0,disabled:s,className:`${q.input} ${q.inputPassword}`}),r.jsx("button",{type:"button",onClick:()=>L(!z),disabled:s,className:q.togglePassword,children:z?r.jsx(El,{size:20}):r.jsx(or,{size:20})})]})]}),r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"otp-code",className:q.label,children:"Verification Code"}),r.jsx("input",{id:"otp-code",type:"text",value:j,onChange:me=>C(me.target.value),placeholder:"000000",required:!0,disabled:s,className:`${q.input} ${q.otpInput}`})]}),r.jsx("button",{type:"submit",disabled:s||!h||!g||!v||!j,className:q.submitBtn,children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:q.spinner}),"Creating..."]}):r.jsxs(r.Fragment,{children:["Create Account",r.jsx(gi,{size:20})]})})]}),r.jsxs("div",{className:q.resendSection,children:[r.jsx("p",{children:"Didn't get the code?"}),r.jsx("button",{onClick:ge,disabled:P,className:q.resendBtn,children:P?"Resending...":"Resend Code"})]})]})]})},sA=t=>{const[n,s]=b.useState(!1);return b.useEffect(()=>{const o=window.matchMedia(t);o.matches!==n&&s(o.matches);const c=()=>s(o.matches);return o.addEventListener("change",c),()=>o.removeEventListener("change",c)},[n,t]),n},iA=()=>{const[t,n]=b.useState({x:0,y:0}),[s,o]=b.useState(!1),[c,u]=b.useState(!1),[p,h]=b.useState(!1);return b.useEffect(()=>{const m=j=>{n({x:j.clientX,y:j.clientY}),u(!0);const T=j.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');o(!!T)},g=()=>h(!0),y=()=>h(!1),v=()=>u(!1),S=()=>u(!0);return document.addEventListener("mousemove",m),document.addEventListener("mousedown",g),document.addEventListener("mouseup",y),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",S),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",y),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",S)}},[]),c?r.jsxs(r.Fragment,{children:[r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?40:12,height:s?40:12,borderRadius:"50%",background:s?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:s?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${p?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?50:32,height:s?50:32,borderRadius:"50%",border:`1.5px solid ${s?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"}})]}):null},oA=`
  @media (pointer: fine) {
    .auth-page-custom-cursor {
      cursor: none !important;
    }
    .auth-page-custom-cursor * {
      cursor: none !important;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    html:has(.auth-page-custom-cursor),
    body:has(.auth-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  @media (pointer: coarse) {
    .auth-page-custom-cursor {
      cursor: auto !important;
    }
    .auth-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,rA=()=>{const t=sA("(pointer: fine)");return b.useEffect(()=>{const n="auth-page-custom-styles";if(!document.getElementById(n)){const s=document.createElement("style");s.id=n,s.textContent=oA,document.head.appendChild(s)}return()=>{const s=document.getElementById(n);s&&s.remove()}},[]),r.jsxs("div",{className:t?"auth-page-custom-cursor":"",children:[t&&r.jsx(iA,{}),r.jsx(aA,{})]})},lA=()=>{const t=Ph(),[n,s]=b.useState("email"),[o,c]=b.useState(""),[u,p]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState(""),[v,S]=b.useState(!1),[j,C]=b.useState(!1),[T,E]=b.useState(""),[z,L]=b.useState(""),[R,X]=b.useState(!1),P=async Q=>{if(Q.preventDefault(),E(""),!ES(o)){E("Please enter a valid email address");return}X(!0);try{await mi.sendOTP(o),s("reset")}catch(ge){E(_n(ge,"Failed to send verification code"))}finally{X(!1)}},te=async Q=>{if(Q.preventDefault(),E(""),L(""),u.length<5){E("Password must be at least 5 characters");return}if(u!==h){E("Passwords do not match");return}if(!g.trim()){E("Verification code is required");return}X(!0);try{await mi.resetPasswordByEmail(o,u,g),L("Password reset successfully! Redirecting to login..."),setTimeout(()=>{t("/login")},2e3)}catch(ge){E(_n(ge,"Failed to reset password"))}finally{X(!1)}},re=async()=>{E(""),X(!0);try{await mi.sendOTP(o)}catch(Q){E(_n(Q,"Failed to resend code"))}finally{X(!1)}};return n==="email"?r.jsxs("div",{className:q.authContainer,children:[r.jsx("div",{className:`${q.orb} ${q.orb1}`}),r.jsx("div",{className:`${q.orb} ${q.orb2}`}),r.jsx("div",{className:`${q.orb} ${q.orb3}`}),r.jsxs("div",{className:q.authCard,children:[r.jsxs("div",{className:q.header,children:[r.jsx("div",{className:q.iconWrapper,children:r.jsx(A_,{size:32,color:"#ffffff"})}),r.jsx("h1",{className:q.title,children:"Forgot Password"}),r.jsx("p",{className:q.subtitle,children:"Enter your email to reset your password"})]}),T&&r.jsxs("div",{className:q.errorAlert,children:[r.jsx(Rs,{size:20}),r.jsx("p",{children:T})]}),r.jsxs("form",{onSubmit:P,className:q.form,children:[r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"email",className:q.label,children:"Email Address"}),r.jsx("input",{id:"email",type:"email",value:o,onChange:Q=>c(Q.target.value),placeholder:"you@example.com",required:!0,disabled:R,className:q.input})]}),r.jsx("button",{type:"submit",disabled:R||!o,className:q.submitBtn,children:R?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:q.spinner}),"Sending..."]}):r.jsxs(r.Fragment,{children:["Send Reset Code",r.jsx(gi,{size:20})]})})]}),r.jsxs("div",{className:q.footer,children:[r.jsx("p",{children:"Remember your password?"}),r.jsx(ns,{to:"/login",children:"Back to Sign In "})]})]})]}):r.jsxs("div",{className:q.authContainer,children:[r.jsx("div",{className:`${q.orb} ${q.orb1}`}),r.jsx("div",{className:`${q.orb} ${q.orb2}`}),r.jsx("div",{className:`${q.orb} ${q.orb3}`}),r.jsxs("div",{className:q.authCard,children:[r.jsxs("div",{className:q.header,style:{textAlign:"left"},children:[r.jsxs("button",{onClick:()=>s("email"),className:q.backBtn,children:[r.jsx(vb,{size:16}),"Back"]}),r.jsx("h1",{className:q.title,style:{textAlign:"left"},children:"Reset Password"}),r.jsxs("div",{className:q.verifiedBadge,children:[r.jsx(th,{size:16}),r.jsxs("p",{children:["Code sent to: ",o]})]})]}),z&&r.jsxs("div",{className:q.successAlert,children:[r.jsx(th,{size:20}),r.jsx("p",{children:z})]}),T&&r.jsxs("div",{className:q.errorAlert,children:[r.jsx(Rs,{size:20}),r.jsx("p",{children:T})]}),r.jsxs("form",{onSubmit:te,className:q.form,children:[r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"password",className:q.label,children:"New Password"}),r.jsxs("div",{className:q.inputWrapper,children:[r.jsx("input",{id:"password",type:v?"text":"password",value:u,onChange:Q=>p(Q.target.value),placeholder:"",required:!0,disabled:R||!!z,className:`${q.input} ${q.inputPassword}`}),r.jsx("button",{type:"button",onClick:()=>S(!v),disabled:R||!!z,className:q.togglePassword,children:v?r.jsx(El,{size:20}):r.jsx(or,{size:20})})]})]}),r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"confirm-password",className:q.label,children:"Confirm New Password"}),r.jsxs("div",{className:q.inputWrapper,children:[r.jsx("input",{id:"confirm-password",type:j?"text":"password",value:h,onChange:Q=>m(Q.target.value),placeholder:"",required:!0,disabled:R||!!z,className:`${q.input} ${q.inputPassword}`}),r.jsx("button",{type:"button",onClick:()=>C(!j),disabled:R||!!z,className:q.togglePassword,children:j?r.jsx(El,{size:20}):r.jsx(or,{size:20})})]})]}),r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"otp-code",className:q.label,children:"Verification Code"}),r.jsx("input",{id:"otp-code",type:"text",value:g,onChange:Q=>y(Q.target.value),placeholder:"000000",required:!0,disabled:R||!!z,className:`${q.input} ${q.otpInput}`})]}),r.jsx("button",{type:"submit",disabled:R||!u||!h||!g||!!z,className:q.submitBtn,children:R?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:q.spinner}),"Resetting..."]}):r.jsxs(r.Fragment,{children:["Reset Password",r.jsx(gi,{size:20})]})})]}),!z&&r.jsxs("div",{className:q.resendSection,children:[r.jsx("p",{children:"Didn't get the code?"}),r.jsx("button",{onClick:re,disabled:R,className:q.resendBtn,children:R?"Resending...":"Resend Code"})]})]})]})},cA=t=>{const[n,s]=b.useState(!1);return b.useEffect(()=>{const o=window.matchMedia(t);o.matches!==n&&s(o.matches);const c=()=>s(o.matches);return o.addEventListener("change",c),()=>o.removeEventListener("change",c)},[n,t]),n},uA=()=>{const[t,n]=b.useState({x:0,y:0}),[s,o]=b.useState(!1),[c,u]=b.useState(!1),[p,h]=b.useState(!1);return b.useEffect(()=>{const m=j=>{n({x:j.clientX,y:j.clientY}),u(!0);const T=j.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');o(!!T)},g=()=>h(!0),y=()=>h(!1),v=()=>u(!1),S=()=>u(!0);return document.addEventListener("mousemove",m),document.addEventListener("mousedown",g),document.addEventListener("mouseup",y),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",S),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",y),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",S)}},[]),c?r.jsxs(r.Fragment,{children:[r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?40:12,height:s?40:12,borderRadius:"50%",background:s?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:s?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${p?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?50:32,height:s?50:32,borderRadius:"50%",border:`1.5px solid ${s?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"}})]}):null},dA=`
  @media (pointer: fine) {
    .auth-page-custom-cursor {
      cursor: none !important;
    }
    .auth-page-custom-cursor * {
      cursor: none !important;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    html:has(.auth-page-custom-cursor),
    body:has(.auth-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  @media (pointer: coarse) {
    .auth-page-custom-cursor {
      cursor: auto !important;
    }
    .auth-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,pA=()=>{const t=cA("(pointer: fine)");return b.useEffect(()=>{const n="auth-page-custom-styles";if(!document.getElementById(n)){const s=document.createElement("style");s.id=n,s.textContent=dA,document.head.appendChild(s)}return()=>{const s=document.getElementById(n);s&&s.remove()}},[]),r.jsxs("div",{className:t?"auth-page-custom-cursor":"",children:[t&&r.jsx(uA,{}),r.jsx(lA,{})]})},fA=t=>{if(!t)return"channel";const n=String(t).toLowerCase().trim();return n==="conversation"||n==="dm"||n==="directmessage"?"dm":n==="group"?"group":(n==="channel"||console.warn("[Normalizer] Unknown chat type:",t,"defaulting to channel"),"channel")},wl=t=>{if(!t)return{};console.log("[Normalizer] Raw chat data:",{id:t.id,name:t.name,participantsCount:t.participantsCount,ParticipantsCount:t.ParticipantsCount,membersLength:t.members?.length});let n;t.privacy!==null&&t.privacy!==void 0&&(typeof t.privacy=="number"?n=t.privacy===0?"public":"private":typeof t.privacy=="string"&&(n=t.privacy.toLowerCase()));const s={id:t.id,name:t.name||"Unknown",type:fA(t.type),avatar:pt(t.avatarUrl||t.AvatarUrl||t.avatar||t.profileImage),description:t.description||"",privacy:n,members:(t.members||[]).map(o=>{const c=o.user?{...o.user,id:o.user.id||o.user.userId||o.userId,avatar:pt(o.user.avatarUrl||o.user.AvatarUrl||o.user.avatar||o.user.profileImage)}:{id:o.userId||o.id,username:o.username||"Unknown",email:"",avatar:pt(o.avatarUrl||o.AvatarUrl||o.avatar),onlineStatus:"offline",lastSeen:new Date().toISOString()};return{id:o.id||o.userId||o.user?.id,userId:o.userId||o.id||o.user?.id,user:c,joinedAt:o.joinedAt,role:o.role||"member"}}),lastMessage:t.lastMessage?{id:t.lastMessage.id,content:t.lastMessage.content,createdAt:t.lastMessage.createdAt||t.lastMessage.sentAt||new Date().toISOString(),senderId:t.lastMessage.senderId,senderUsername:t.lastMessage.senderUsername,fileUrl:pt(t.lastMessage.fileUrl),replyId:t.lastMessage.replyId,isSeen:t.lastMessage.isSeen??!1}:void 0,unreadCount:t.unreadCount!==void 0?t.unreadCount:t.notificationsCount||0,createdAt:t.created||t.createdAt||new Date().toISOString(),updatedAt:t.userLastMessage||t.updatedAt||t.createdAt||new Date().toISOString(),messages:t.messages?t.messages.map(o=>({...o,fileUrl:pt(o.fileUrl),senderAvatarUrl:pt(o.senderAvatarUrl),isSeen:o.isSeen??o.IsSeen??!1,seenAt:o.seenAt??o.SeenAt,isCurrentUser:o.isCurrentUser??o.IsCurrentUser??!1})):void 0,participantsCount:t.participantsCount??t.ParticipantsCount,participantsOnline:t.participantsOnline??t.ParticipantsOnline,notificationsCount:t.notificationsCount??t.NotificationsCount,isOnline:t.isOnline??t.IsOnline??!1,createdById:t.createdById??t.CreatedById??t.ownerId??t.OwnerId};return console.log("[Normalizer] Normalized chat result:",{id:s.id,name:s.name,participantsCount:s.participantsCount,createdById:s.createdById,membersCount:s.members?.length}),s},Ah=t=>{if(!t)return{};console.log("[Normalizer] Normalizing user:",t),console.log("[Normalizer] User description fields:",{description:t.description,Description:t.Description,bio:t.bio});const n=t.userId||t.id||t.entityId||t.EntityId;let s="offline";return typeof t.onlineStatus=="string"?s=t.onlineStatus.toLowerCase()||"offline":typeof t.isOnline=="boolean"&&(s=t.isOnline?"online":"offline"),{id:n,username:t.username||t.displayName||t.name||"Unknown",email:t.email||"",avatar:pt(t.avatarUrl||t.AvatarUrl||t.avatar||t.profileImage),bio:t.description||t.Description||t.bio||"",onlineStatus:s,lastSeen:t.lastSeen||new Date().toISOString(),addMePolicy:t.addMePolicy||"everyone"}},hA=t=>Array.isArray(t)?t.map(n=>wl(n)):(console.warn("[Normalizer] Expected array of chats, got:",typeof t),[]),H0=t=>Array.isArray(t)?t.map(n=>Ah(n)):(console.warn("[Normalizer] Expected array of users, got:",typeof t),[]),Ee={getAllChats:async()=>{const t=await De.get("/chats/me");console.log("[ChatService] Raw API response:",t.data);const n=t.data?.data||t.data;console.log("[ChatService] Extracted rawChats:",n),console.log("[ChatService] First chat participantsCount:",n?.[0]?.participantsCount);const s=hA(n);return console.log("[ChatService] After normalization, first chat participantsCount:",s?.[0]?.participantsCount),s},getChat:async t=>{const n=await De.get(`/chats/${t}`),s=n.data?.data||n.data;return console.log("[ChatService] getChat raw response:",{chatId:t,rawChat:s,hasMembers:!!s?.members,membersLength:s?.members?.length,members:s?.members}),wl(s)},getChatProfile:async t=>{const n=await De.get(`/chats/${t}/profile`),s=n.data?.data||n.data;return console.log("[ChatService] getChatProfile raw response:",{chatId:t,rawChat:s,hasMembers:!!s?.members,membersLength:s?.members?.length,hasParticipants:!!s?.participants,participantsLength:s?.participants?.length,createdById:s?.createdById,ownerId:s?.ownerId,CreatedById:s?.CreatedById,OwnerId:s?.OwnerId}),wl(s)},createGroup:async t=>{console.log("[ChatService] createGroup called"),console.log("[ChatService] FormData contents:");for(const[o,c]of t.entries())console.log(`  ${o}:`,c instanceof File?`File(${c.name}, ${c.size} bytes)`:c);const n=await De.post("/groups",t);console.log("[ChatService] createGroup raw response:",n),console.log("[ChatService] createGroup response.data:",n.data);const s=n.data?.data||n.data;return console.log("[ChatService] createGroup rawChat:",s),wl(s)},createChannel:async t=>{console.log("[ChatService] createChannel called"),console.log("[ChatService] FormData contents:");for(const[o,c]of t.entries())console.log(`  ${o}:`,c instanceof File?`File(${c.name}, ${c.size} bytes)`:c);const n=await De.post("/channels",t);console.log("[ChatService] createChannel raw response:",n),console.log("[ChatService] createChannel response.data:",n.data);const s=n.data?.data||n.data;return console.log("[ChatService] createChannel rawChat:",s),wl(s)},updateChat:async(t,n,s)=>{const o=n==="group"?"/groups":"/channels";console.log("[ChatService] updateChat FormData contents:");for(const[u,p]of s.entries())console.log(`  ${u}:`,p instanceof File?`File(${p.name}, ${p.size} bytes)`:p);const c=await De.put(o,s,{params:{chatId:t},headers:{"Content-Type":void 0}});return console.log("[ChatService] updateChat response:",c.data),c.data?.data||c.data},deleteChat:async(t,n)=>{const s=n==="group"?"/groups":"/channels",o=await De.delete(s,{params:{chatId:t}});return o.data?.data||o.data},deleteConversation:async t=>{const n=await De.delete("/conversations",{params:{conversationId:t}});return n.data?.data||n.data},joinChat:async(t,n)=>{const s=n==="group"?"/groups/join":"/channels/join",o=n==="group"?"groupId":"channelId",c=await De.post(s,null,{params:{[o]:t}});return c.data?.data||c.data},leaveChat:async(t,n)=>{const s=n==="group"?"/groups/leave":"/channels/leave",o=await De.post(s,null,{params:{chatId:t}});return o.data?.data||o.data},searchChats:async t=>{const n=await De.post("/chats/search",{pageNumber:1,pageSize:10,searchTerm:t});console.log("[ChatService] searchChats full response:",n);const s=n.data?.data;if(!Array.isArray(s))return console.warn("[ChatService] Search returned non-array data:",s),[];const o=s.map(c=>{const u=c.type||c.chatType,p=String(u).toLowerCase().trim();let h="channel";return p==="conversation"||p==="dm"||p==="directmessage"?h="dm":p==="group"?h="group":p==="channel"&&(h="channel"),{id:c.id||c.entityId,name:c.name||c.displayName||"Unknown",type:h,avatar:pt(c.avatarUrl||c.avatar||c.profileImage),description:c.description||"",memberCount:c.memberCount||c.participantsCount||0}});return console.log("[ChatService] Normalized search results:",o),o},banUser:async(t,n)=>{const s=await De.post(`/chats/ban/${n}`,null,{params:{chatId:t}});return s.data?.data||s.data},unbanUser:async(t,n)=>{const s=await De.post(`/chats/unban/${n}`,null,{params:{chatId:t}});return s.data?.data||s.data},getBannedUsers:async t=>{const n=await De.get(`/chats/${t}/banned-users`);return n.data?.data||n.data||[]},addMemberToGroup:async(t,n)=>{const s=await De.post("/groups/add-member",null,{params:{chatId:t,addingUserId:n}});return s.data?.data||s.data},addMemberToChannel:async(t,n)=>{const s=await De.post("/channels/add-member",null,{params:{chatId:t,addingUserId:n}});return s.data?.data||s.data},removeMemberFromGroup:async(t,n)=>{const s=await De.post("/groups/remove-member",null,{params:{chatId:t,removingUserId:n}});return s.data?.data||s.data},removeMemberFromChannel:async(t,n)=>{const s=await De.post("/channels/remove-member",null,{params:{chatId:t,removingUserId:n}});return s.data?.data||s.data},updateChatPrivacy:async(t,n)=>{const s=n==="public"?0:1,o=await De.put("/chats/privacy-type",null,{params:{chatId:t,privacyType:s}});return o.data?.data||o.data},addUserPermission:async(t,n,s)=>{const o=await De.post("/chats/add-user-permission",null,{params:{chatId:t,addingUserId:n,permissionName:s}});return o.data?.data||o.data},createOrGetDM:async(t,n)=>{try{if(console.log("[ChatService] createOrGetDM called with:",{recipientId:t,recipientIdType:typeof t,initialMessage:n,isRecipientIdValid:t&&t!=="undefined"}),!t||t==="undefined")throw new Error(`Invalid recipientId: ${t}`);const s=await Ee.getAllChats();console.log("[ChatService] Fetched chats, looking for existing DM with recipient:",t);let o;for(const c of s)if(console.log("[ChatService] Checking chat:",{chatId:c.id,type:c.type,memberCount:c.members?.length||0}),c.type==="dm")if(c.members&&c.members.length>0){if(c.members.some(p=>{const h=p.userId===t||p.id===t||p.user?.id===t;return h&&console.log("[ChatService] Found matching member:",p),h})){o=c;break}}else{console.log("[ChatService] Members array empty for DM, fetching full details for chat:",c.id);try{const u=await Ee.getChat(c.id);if(console.log("[ChatService] Full chat details:",{id:u.id,memberCount:u.members?.length||0,members:u.members?.map(p=>({userId:p.userId,id:p.id}))}),u.members&&u.members.length>0&&u.members.some(h=>{const m=h.userId===t||h.id===t||h.user?.id===t;return m&&console.log("[ChatService] Found matching member in full chat:",h),m})){o=u;break}}catch(u){console.error("[ChatService] Error fetching full chat details:",u)}}if(console.log("[ChatService] DM chat found:",o?.id||"NOT FOUND"),o&&n){console.log("[ChatService] Sending to existing DM with chatId:",o.id);const c=new FormData;return c.append("chatId",o.id),c.append("content",n),console.log("[ChatService] FormData entries:",{chatId:o.id,content:n}),await De.post("/messages/",c,{headers:{"Content-Type":void 0}}),console.log("[ChatService] Message sent to existing DM:",o.id),o}if(!o&&n){console.log("[ChatService] Creating new DM conversation with user:",t);const c=new FormData;c.append("receiverId",t),c.append("content",n),console.log("[ChatService] FormData entries for new DM:",{receiverId:t,content:n});const u=await De.post("/messages/",c,{headers:{"Content-Type":void 0}});console.log("[ChatService] Message sent to new DM, conversation auto-created. Response:",u);const h=(await Ee.getAllChats()).find(m=>m.type==="dm"&&m.members?.some(g=>g.id===t||g.userId===t));return console.log("[ChatService] Newly created DM:",h?.id||"NOT FOUND"),h}return console.log("[ChatService] No action taken (no message to send)"),o}catch(s){throw console.error("[ChatService] Error in createOrGetDM:",s),s}}},mA=Object.freeze(Object.defineProperty({__proto__:null,chatService:Ee},Symbol.toStringTag,{value:"Module"})),AS={"":"Like","":"Love","":"Laugh","":"Sad","":"Angry"},gA={Like:"",Love:"",Laugh:"",Sad:"",Angry:""},yA=[{emoji:"",type:"Like",label:"Like"},{emoji:"",type:"Love",label:"Love"},{emoji:"",type:"Laugh",label:"Laugh"},{emoji:"",type:"Sad",label:"Sad"},{emoji:"",type:"Angry",label:"Angry"}],Es={sendMessage:async t=>{try{console.log("[MessageService] sendMessage called"),console.log("[MessageService] FormData entries:");for(const[s,o]of t.entries())o instanceof File?console.log(`  ${s}: File(${o.name}, ${o.size} bytes, ${o.type})`):console.log(`  ${s}: ${o}`);const n=await De.post("/messages",t,{headers:{"Content-Type":void 0}});return console.log("[MessageService] Response:",n.data),n.data?.data||n.data}catch(n){throw console.error("[MessageService] Error sending message:",n),n}},editMessage:async(t,n)=>{const s=new FormData;s.append("Content",n);const o=await De.put(`/messages/${t}`,s,{headers:{"Content-Type":void 0}});return o.data?.data||o.data},deleteMessage:async t=>{const n=await De.delete(`/messages/${t}`);return n.data?.data||n.data},toggleReaction:async(t,n)=>{const s=await De.post(`/messages/${t}/reactions/${n}`);return s.data?.data??s.data},toggleReactionByEmoji:async(t,n)=>{const s=AS[n];if(!s)throw new Error(`Unknown emoji: ${n}`);return Es.toggleReaction(t,s)},getReactions:async t=>{const n=await De.get(`/messages/${t}/reactions`);return n.data?.data||n.data||[]},pinMessage:async t=>{const n=await De.post(`/messages/${t}/pin`);return n.data?.data||n.data},unpinMessage:async t=>{const n=await De.post(`/messages/${t}/unpin`);return n.data?.data||n.data},getPinnedMessages:async t=>{const n=await De.get(`/messages/pinned/${t}`);return n.data?.data||n.data}},Rh=Object.freeze(Object.defineProperty({__proto__:null,AVAILABLE_REACTIONS:yA,EMOJI_TO_REACTION_TYPE:AS,REACTION_TYPE_TO_EMOJI:gA,messageService:Es},Symbol.toStringTag,{value:"Module"})),Le=Pl((t,n)=>({chats:[],currentChat:null,messages:[],pinnedMessages:new Map,chatPermissions:new Map,isLoadingChats:!1,isLoadingMessages:!1,isLoadingPinned:!1,permissionsLoading:!1,error:null,typingUsers:new Map,onlineUsers:new Map,userLastSeen:new Map,blockedByUsers:new Set,usersYouBlocked:new Set,loadChats:async()=>{t({isLoadingChats:!0,error:null});try{const s=await Ee.getAllChats();console.log("[ChatStore] Chats from API (already normalized):",s),console.log("[ChatStore] Sample chat participantsCount:",s[0]?.participantsCount,s[0]?.name),t({chats:s,isLoadingChats:!1})}catch(s){const o=_n(s,"Failed to load chats");console.error("[ChatStore] Error loading chats:",s),t({error:o,isLoadingChats:!1})}},setCurrentChat:s=>{console.log("[ChatStore] setCurrentChat called with:",{chatId:s?.id,chatName:s?.name,participantsCount:s?.participantsCount,membersLength:s?.members?.length}),t({currentChat:s})},setMessages:s=>{t({messages:s})},loadMessages:async(s,o=1)=>{t({isLoadingMessages:!0,error:null});try{const{chatService:c}=await zt(async()=>{const{chatService:h}=await Promise.resolve().then(()=>mA);return{chatService:h}},void 0),[u,p]=await Promise.all([c.getChat(s),c.getChatProfile(s)]);t(h=>({currentChat:h.currentChat?.id===s?{...h.currentChat,...p,messages:u.messages}:h.currentChat,messages:u.messages||[],isLoadingMessages:!1}))}catch(c){const u=_n(c,"Failed to load messages");t({error:u,isLoadingMessages:!1})}},sendMessage:async(s,o,c,u,p)=>{t({error:null});try{if(u){const h=new FormData;s&&h.append("chatId",s),o&&h.append("receiverId",o),c&&h.append("content",c),p&&h.append("replyId",p),h.append("file",u),await Es.sendMessage(h)}else await(await zt(()=>Promise.resolve().then(()=>Nh),void 0).then(m=>m.signalRService)).sendMessage(s,c,o||void 0,p||null)}catch(h){const m=_n(h,"Failed to send message");t({error:m})}},editMessage:async(s,o)=>{t({error:null});try{await Es.editMessage(s,o),t(c=>({messages:c.messages.map(u=>u.messageId===s?{...u,content:o,isEdited:!0}:u)}))}catch(c){const u=_n(c,"Failed to edit message");t({error:u})}},deleteMessage:async s=>{t({error:null});try{await Es.deleteMessage(s),t(o=>({messages:o.messages.filter(c=>c.messageId!==s)}))}catch(o){const c=_n(o,"Failed to delete message");t({error:c})}},toggleReaction:async(s,o)=>{t({error:null});try{return await Es.toggleReactionByEmoji(s,o)}catch(c){const u=_n(c,"Failed to toggle reaction");return t({error:u}),!1}},clearError:()=>t({error:null}),loadPinnedMessages:async s=>{t({isLoadingPinned:!0});try{const o=await Es.getPinnedMessages(s);t(c=>{const u=new Map(c.pinnedMessages);return u.set(s,o||[]),{pinnedMessages:u,isLoadingPinned:!1}})}catch(o){console.error("[ChatStore] Error loading pinned messages:",o),t({isLoadingPinned:!1})}},pinMessage:async s=>{try{await Es.pinMessage(s)}catch(o){const c=_n(o,"Failed to pin message");throw t({error:c}),o}},unpinMessage:async s=>{try{await Es.unpinMessage(s)}catch(o){const c=_n(o,"Failed to unpin message");throw t({error:c}),o}},getPinnedMessages:s=>n().pinnedMessages.get(s)||[],loadPermissions:async s=>{const{user:o}=wt.getState();if(console.log("[loadPermissions] Called with:",{chatId:s,userId:o?.id,username:o?.username}),!o||!s){console.log("[loadPermissions] Early return - no user or chatId");return}t({permissionsLoading:!0});try{const{permissionService:c}=await zt(async()=>{const{permissionService:m}=await import("./permission.service-CpK74LNc.js");return{permissionService:m}},__vite__mapDeps([0,1,2]));console.log("[loadPermissions] Calling API: GET /permissions/",s,"/user/",o.id);const u=await c.getUserPermissions(s,o.id);console.log("[loadPermissions] API response:",u);const p=u?.permissions||u||[],h=Array.isArray(p)?p.map(m=>m.permissionName||m.name||m):[];console.log("[ChatStore] Loaded permissions for chat",s,":",h),t(m=>({chatPermissions:new Map(m.chatPermissions).set(s,h),permissionsLoading:!1}))}catch(c){console.error("[ChatStore] Failed to load permissions:",c),t(u=>({chatPermissions:new Map(u.chatPermissions).set(s,[]),permissionsLoading:!1}))}},hasPermission:(s,o)=>{const{currentChat:c,chatPermissions:u}=n(),{user:p}=wt.getState();if(console.log("[hasPermission] Checking permission:",{chatId:s,permission:o,currentChatId:c?.id,currentChatType:c?.type,userId:p?.id,createdById:c?.createdById,membersCount:c?.members?.length}),c?.type==="dm")return["SendMessage","PinMessages"].includes(o)?(console.log("[hasPermission] DM chat - allowing:",o),!0):!1;if(c&&p&&c.createdById===p.id)return console.log("[hasPermission] User is chat creator - granting all permissions"),!0;if(c&&p&&c.members){const g=c.members.find(v=>v.userId===p.id);console.log("[hasPermission] Current member:",{found:!!g,memberId:g?.userId,role:g?.role});const y=g?.role?.toLowerCase();if(y==="admin"||y==="owner")return console.log("[hasPermission] User has admin/owner role - granting all permissions"),!0}const h=u.get(s)||[],m=h.includes(o);return console.log("[hasPermission] Checking cached permissions:",{cachedPermissions:h,hasPermission:m}),m},clearPermissions:s=>{t(s?o=>{const c=new Map(o.chatPermissions);return c.delete(s),{chatPermissions:c}}:{chatPermissions:new Map})},grantPermission:(s,o)=>{console.log("[ChatStore] Granting permission:",{chatId:s,permissionName:o}),t(c=>{const u=new Map(c.chatPermissions),p=u.get(s)||[];return p.includes(o)||u.set(s,[...p,o]),{chatPermissions:u}})},revokePermission:(s,o)=>{console.log("[ChatStore] Revoking permission:",{chatId:s,permissionName:o}),t(c=>{const u=new Map(c.chatPermissions),p=u.get(s)||[];return u.set(s,p.filter(h=>h!==o)),{chatPermissions:u}})},isUserOnline:s=>n().onlineUsers.get(s)||!1,getUserLastSeen:s=>n().userLastSeen.get(s),getOnlineMembersCount:s=>{const o=n().chats.find(p=>p.id===s);if(!o||!o.members)return 0;let c=0;const u=n().onlineUsers;for(const p of o.members)u.get(p.userId)&&c++;return c},setInitialPresenceStates:s=>{console.log("[ChatStore] Setting initial presence states for",Object.keys(s).length,"users"),console.log("[ChatStore] Raw presence states:",s);const o=new Map,c=new Map;Object.entries(s).forEach(([u,p])=>{console.log(`[ChatStore] Processing user ${u}, state:`,p,"type:",typeof p),typeof p=="boolean"?(o.set(u,p),console.log(`[ChatStore] Set user ${u} to ${p?"online":"offline"}`)):(o.set(u,p.isOnline),p.lastSeen&&c.set(u,p.lastSeen),console.log(`[ChatStore] Set user ${u} to ${p.isOnline?"online":"offline"}, lastSeen: ${p.lastSeen||"none"}`))}),t({onlineUsers:o,userLastSeen:c}),console.log("[ChatStore] Presence states initialized:",{online:Array.from(o.entries()).filter(([u,p])=>p).length,total:o.size,onlineUserIds:Array.from(o.entries()).filter(([u,p])=>p).map(([u])=>u)})},handleReceiveMessage:s=>{console.log("[ChatStore] Received message:",s);const o=wt.getState().user?.id;t(c=>{if(c.currentChat&&s.chatId===c.currentChat.id&&!c.messages.some(p=>p.messageId===s.messageId)){const p={messageId:s.messageId,chatId:s.chatId,senderId:s.senderId,senderUsername:s.senderUsername||"Unknown",senderAvatarUrl:s.senderAvatarUrl,content:s.content,fileUrl:s.fileUrl,replyId:s.replyId,sentAt:s.sentAt,isSeen:s.isSeen??!1,seenAt:s.seenAt,isNotificated:!1,notificationId:"",messageReactions:[],isCurrentUser:s.senderId===o};return console.log("[ChatStore] Added new message to state, isCurrentUser:",p.isCurrentUser),{messages:[...c.messages,p]}}return{}}),t(c=>({chats:c.chats.map(u=>u.id===s.chatId?{...u,lastMessage:s.content||(s.fileUrl?" Attachment":""),updatedAt:s.sentAt||new Date().toISOString()}:u).sort((u,p)=>new Date(p.updatedAt||0).getTime()-new Date(u.updatedAt||0).getTime())}))},handleMessageEdited:s=>{console.log("[ChatStore] Message edited:",s),t(o=>({messages:o.messages.map(c=>c.messageId===s.messageId?{...c,content:s.content}:c)}))},handleMessageDeleted:s=>{console.log("[ChatStore] Message deleted:",s),t(o=>({messages:o.messages.filter(c=>c.messageId!==s.messageId)}))},handleReactionAdded:s=>{console.log("[ChatStore] Reaction added event received:",s);const o=n();console.log("[ChatStore] Current messages count:",o.messages.length),console.log("[ChatStore] Looking for messageId:",s.messageId);const c=o.messages.find(u=>u.messageId===s.messageId);console.log("[ChatStore] Found message:",c?"YES":"NO"),c&&(t(u=>({messages:u.messages.map(p=>p.messageId===s.messageId?{...p,messageReactions:[...p.messageReactions||[],{reactionType:s.reactionType,userId:s.userId,userName:""}]}:p)})),console.log("[ChatStore] Reaction added to message"))},handleReactionRemoved:s=>{console.log("[ChatStore] Reaction removed:",s),t(o=>({messages:o.messages.map(c=>c.messageId===s.messageId?{...c,messageReactions:(c.messageReactions||[]).filter(u=>!(u.userId===s.userId&&u.reactionType===s.reactionType))}:c)}))},handleUserOnline:s=>{console.log("[ChatStore] User online:",s),t(o=>{const c=new Map(o.onlineUsers);c.set(s.userId,!0);const u=new Map(o.userLastSeen);return u.delete(s.userId),{onlineUsers:c,userLastSeen:u,chats:o.chats.map(p=>p.members?.some(m=>m.userId===s.userId)?{...p,isOnline:p.type==="dm"?!0:p.isOnline,members:p.members?.map(m=>m.userId===s.userId?{...m,user:{...m.user,onlineStatus:"online",lastSeen:""}}:m)}:p)}})},handleUserOffline:s=>{console.log("[ChatStore] User offline:",s),t(o=>{const c=new Map(o.onlineUsers);c.set(s.userId,!1);const u=new Map(o.userLastSeen);return s.lastSeen&&u.set(s.userId,s.lastSeen),{onlineUsers:c,userLastSeen:u,chats:o.chats.map(p=>p.members?.some(m=>m.userId===s.userId)?{...p,isOnline:p.type==="dm"?!1:p.isOnline,members:p.members?.map(m=>m.userId===s.userId?{...m,user:{...m.user,onlineStatus:"offline",lastSeen:s.lastSeen}}:m)}:p)}})},handleUserTyping:s=>{console.log("[ChatStore] User typing:",s),t(o=>{const c=new Map(o.typingUsers);return c.set(`${s.chatId}-${s.userId}`,{userId:s.userId,timestamp:Date.now()}),{typingUsers:c}}),setTimeout(()=>{t(o=>{const c=new Map(o.typingUsers);return c.delete(`${s.chatId}-${s.userId}`),{typingUsers:c}})},3e3)},handleUserStoppedTyping:s=>{console.log("[ChatStore] User stopped typing:",s),t(o=>{const c=new Map(o.typingUsers);return c.delete(`${s.chatId}-${s.userId}`),{typingUsers:c}})},handleMessagePinned:s=>{console.log("[ChatStore] Message pinned:",s),t(o=>({messages:o.messages.map(c=>c.messageId===s.messageId?{...c,isPinned:!0,pinnedAt:s.pinnedAt,pinnedById:s.pinnedById,pinnedByUsername:s.pinnedByUsername}:c)})),n().loadPinnedMessages(s.chatId)},handleMessageUnpinned:s=>{console.log("[ChatStore] Message unpinned:",s),t(o=>({messages:o.messages.map(c=>c.messageId===s.messageId?{...c,isPinned:!1,pinnedAt:void 0,pinnedById:void 0,pinnedByUsername:void 0}:c)})),t(o=>{const c=new Map(o.pinnedMessages),u=c.get(s.chatId)||[];return c.set(s.chatId,u.filter(p=>p.messageId!==s.messageId)),{pinnedMessages:c}})},handleAddedToChat:s=>{console.log("[ChatStore] Added to chat:",s),n().loadChats()},handleNewConversation:s=>{console.log("[ChatStore] New conversation:",s),n().loadChats()},handleConversationCreated:async s=>{console.log("[ChatStore] Conversation created (sender notification):",s);const c=n().currentChat;if(c&&c.id.startsWith("temp_dm_")&&c.id.includes(s.receiverId)){console.log("[ChatStore] Switching from temp chat to real conversation:",s.conversationId),await n().loadChats();const p=n().chats.find(h=>h.id===s.conversationId);if(p){console.log("[ChatStore] Found new conversation, switching to it:",p.id),t({currentChat:p});try{await(await zt(()=>Promise.resolve().then(()=>Nh),void 0).then(m=>m.signalRService)).joinChat(p.id)}catch(h){console.error("[ChatStore] Failed to join new chat:",h)}}}else n().loadChats()},handlePermissionGranted:s=>{console.log("[ChatStore] Permission granted:",s);const{user:o}=wt.getState();o&&s.userId===o.id&&t(c=>{const u=new Map(c.chatPermissions),p=u.get(s.chatId)||[];return p.includes(s.permissionName)||u.set(s.chatId,[...p,s.permissionName]),{chatPermissions:u}})},handlePermissionRevoked:s=>{console.log("[ChatStore] Permission revoked:",s);const{user:o}=wt.getState();o&&s.userId===o.id&&t(c=>{const u=new Map(c.chatPermissions),p=u.get(s.chatId)||[];return u.set(s.chatId,p.filter(h=>h!==s.permissionName)),{chatPermissions:u}})},handleAllPermissionsRevoked:s=>{console.log("[ChatStore] All permissions revoked:",s);const{user:o}=wt.getState();o&&s.userId===o.id&&t(c=>{const u=new Map(c.chatPermissions);return u.set(s.chatId,[]),{chatPermissions:u}})},handleUserBlockedYou:s=>{console.log("[ChatStore] User blocked you:",s),t(o=>{const c=new Set(o.blockedByUsers);return c.add(s.blockerId),{blockedByUsers:c}})},handleYouBlockedUser:s=>{console.log("[ChatStore] You blocked user:",s),s.blockedUserId&&t(o=>{const c=new Set(o.usersYouBlocked);return c.add(s.blockedUserId),{usersYouBlocked:c}})},handleUserUnblockedYou:s=>{console.log("[ChatStore] User unblocked you:",s),t(o=>{const c=new Set(o.blockedByUsers);return c.delete(s.unblockerId),{blockedByUsers:c}})},handleYouUnblockedUser:s=>{console.log("[ChatStore] You unblocked user:",s),s.unblockedUserId&&t(o=>{const c=new Set(o.usersYouBlocked);return c.delete(s.unblockedUserId),{usersYouBlocked:c}})},handleChatDeleted:s=>{console.log("[ChatStore] Chat deleted:",s);const o=n();t({chats:o.chats.filter(c=>c.id!==s.chatId),currentChat:o.currentChat?.id===s.chatId?null:o.currentChat,messages:o.currentChat?.id===s.chatId?[]:o.messages}),t(c=>{const u=new Map(c.chatPermissions);return u.delete(s.chatId),{chatPermissions:u}})},handleRemovedFromChat:s=>{console.log("[ChatStore] Removed from chat:",s);const o=n();t({chats:o.chats.filter(c=>c.id!==s.chatId),currentChat:o.currentChat?.id===s.chatId?null:o.currentChat,messages:o.currentChat?.id===s.chatId?[]:o.messages}),t(c=>{const u=new Map(c.chatPermissions);return u.delete(s.chatId),{chatPermissions:u}})},handleMessagesMarkedSeen:s=>{console.log("[ChatStore] Messages marked as seen:",s);const o=n();o.currentChat&&s.chatId===o.currentChat.id&&t({messages:o.messages.map(u=>s.messageIds.includes(u.messageId)?{...u,isSeen:!0,seenAt:s.seenAt}:u)});const c=wt.getState().user?.id;c&&s.seenByUserId===c&&t(u=>({chats:u.chats.map(p=>p.id===s.chatId?{...p,unreadCount:Math.max(0,(p.unreadCount||0)-s.messageIds.length)}:p),currentChat:u.currentChat?.id===s.chatId?{...u.currentChat,unreadCount:Math.max(0,(u.currentChat.unreadCount||0)-s.messageIds.length)}:u.currentChat}))},resetUnreadCount:s=>{console.log("[ChatStore] Resetting unread count for chat:",s),t(o=>({chats:o.chats.map(c=>c.id===s?{...c,unreadCount:0}:c),currentChat:o.currentChat?.id===s?{...o.currentChat,unreadCount:0}:o.currentChat}))},isBlockedBy:s=>n().blockedByUsers.has(s),hasBlocked:s=>n().usersYouBlocked.has(s),addBlockedUser:s=>{console.log("[ChatStore] Adding blocked user:",s),t(o=>{const c=new Set(o.usersYouBlocked);return c.add(s),{usersYouBlocked:c}})},removeBlockedUser:s=>{console.log("[ChatStore] Removing blocked user:",s),t(o=>{const c=new Set(o.usersYouBlocked);return c.delete(s),{usersYouBlocked:c}})}})),xA=()=>{const t=localStorage.getItem("simpchat-theme");return t==="dark"||t==="light"?t:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},$f=t=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("simpchat-theme",t)},RS=Pl(t=>{const n=xA();return $f(n),{theme:n,toggleTheme:()=>{t(s=>{const o=s.theme==="light"?"dark":"light";return $f(o),{theme:o}})},setTheme:s=>{$f(s),t({theme:s})}}}),vA=()=>localStorage.getItem("simpchat-fancy-animations")!=="false",NS=Pl(t=>({fancyAnimations:vA(),toggleFancyAnimations:()=>{t(n=>{const s=!n.fancyAnimations;return localStorage.setItem("simpchat-fancy-animations",String(s)),{fancyAnimations:s}})},setFancyAnimations:n=>{localStorage.setItem("simpchat-fancy-animations",String(n)),t({fancyAnimations:n})}})),bA="_dashboard_1003y_106",SA="_gradientFlow_1003y_1",wA="_darkMode_1003y_137",_A="_leftPanel_1003y_151",CA="_panelGlow_1003y_1",jA="_panelHeader_1003y_172",TA="_title_1003y_203",kA="_menuButton_1003y_226",MA="_searchBar_1003y_261",EA="_searchInput_1003y_266",AA="_searchResults_1003y_296",RA="_slideDown_1003y_1",NA="_searchResultItem_1003y_330",DA="_searchResultAvatar_1003y_356",zA="_searchResultInfo_1003y_372",BA="_searchResultName_1003y_377",UA="_searchResultType_1003y_390",IA="_searchResultTypeIcon_1003y_400",OA="_searchLoading_1003y_407",LA="_searchNoResults_1003y_408",PA="_chatList_1003y_421",HA="_emptyState_1003y_455",$A="_loading_1003y_456",VA="_chatItem_1003y_469",FA="_active_1003y_483",qA="_chatAvatar_1003y_511",GA="_avatarFallback_1003y_537",WA="_onlineIndicator_1003y_548",YA="_chatInfo_1003y_564",XA="_chatHeader_1003y_571",KA="_chatNameWithType_1003y_578",QA="_headerRight_1003y_586",ZA="_chatName_1003y_578",JA="_chatTypeIcon_1003y_606",e5="_iconDm_1003y_623",t5="_iconGroup_1003y_634",n5="_iconChannel_1003y_645",a5="_timestamp_1003y_655",s5="_chatPreview_1003y_666",i5="_unreadBadge_1003y_679",o5="_unreadPulse_1003y_1",r5="_chatHeader2_1003y_703",l5="_headerInfo_1003y_720",c5="_headerTitle_1003y_727",u5="_chatTitle_1003y_733",d5="_headerChatType_1003y_750",p5="_headerActions_1003y_760",f5="_headerButton_1003y_766",h5="_messagesContainer_1003y_804",m5="_noMessages_1003y_838",g5="_welcomeScreen_1003y_850",y5="_welcomeIcon_1003y_865",x5="_welcomeText_1003y_871",v5="_welcomeSubtext_1003y_882",b5="_inputArea_1003y_892",S5="_inputWrapper_1003y_906",w5="_messageInput_1003y_912",_5="_sendButton_1003y_952",C5="_modalOverlay_1003y_999",j5="_modalFadeIn_1003y_1",T5="_modal_1003y_999",k5="_modalSlideUp_1003y_1",M5="_modalHeader_1003y_1031",E5="_closeButton_1003y_1054",A5="_modalBody_1003y_1084",R5="_modalFooter_1003y_1121",N5="_formGroup_1003y_1133",D5="_formInput_1003y_1149",z5="_primaryButton_1003y_1179",B5="_secondaryButton_1003y_1205",U5="_profileContent_1003y_1235",I5="_profileInfo_1003y_1241",O5="_avatarSection_1003y_1247",L5="_largeAvatar_1003y_1253",P5="_profileField_1003y_1274",H5="_loadingState_1003y_1305",$5="_menuDropdown_1003y_1312",V5="_menuItem_1003y_1344",F5="_menuDivider_1003y_1385",q5="_mainContent_1003y_1396",G5="_chatHeaderBar_1003y_1419",W5="_headerLeft_1003y_1434",Y5="_headerAvatar_1003y_1441",X5="_headerStatus_1003y_1493",K5="_online_1003y_548",Q5="_messageGroup_1003y_1513",Z5="_ownMessage_1003y_1521",J5="_messageBubble_1003y_1525",e3="_otherMessage_1003y_1531",t3="_senderAvatar_1003y_1546",n3="_senderName_1003y_1584",a3="_messageContent_1003y_1592",s3="_messageTime_1003y_1599",i3="_attachment_1003y_1607",o3="_reactionsContainer_1003y_1626",r3="_reaction_1003y_1626",l3="_inputField_1003y_1663",c3="_emojiButton_1003y_1700",u3="_attachButton_1003y_1701",d3="_rightPanel_1003y_1731",p3="_chatInfoPanel_1003y_1772",f3="_chatInfoHeader_1003y_1779",h3="_chatInfoAvatar_1003y_1789",m3="_chatInfoName_1003y_1810",g3="_chatInfoType_1003y_1821",y3="_editChatButton_1003y_1831",x3="_infoContent_1003y_1850",v3="_infoSection_1003y_1856",b3="_infoLabel_1003y_1860",S3="_memberList_1003y_1873",w3="_memberItem_1003y_1879",_3="_memberAvatar_1003y_1895",C3="_memberInfo_1003y_1916",j3="_memberName_1003y_1921",T3="_memberRole_1003y_1934",k3="_memberStatus_1003y_1944",M3="_emptyScreen_1003y_1954",E3="_emptyIcon_1003y_1964",A3="_emptyActions_1003y_1991",R3="_actionButton_1003y_1997",N3="_userSection_1003y_2020",D3="_userAvatar_1003y_2040",z3="_userInfo_1003y_2061",B3="_username_1003y_2066",U3="_userStatus_1003y_2080",I3="_logoutButton_1003y_2090",O3="_hidden_1003y_2122",L3="_truncate_1003y_2126",P3="_mobileMenuButton_1003y_2133",H3="_mobileOverlay_1003y_2138",$3="_mobileOpen_1003y_2190",V3="_borderGlow_1003y_1",F3="_chatItemHoverGlow_1003y_1",q3="_buttonPulse_1003y_1",G3="_inputFocusGlow_1003y_1",W3="_subtleFloat_1003y_1",Y3="_messageSlideIn_1003y_1",X3="_shimmer_1003y_1",N={dashboard:bA,gradientFlow:SA,darkMode:wA,leftPanel:_A,panelGlow:CA,panelHeader:jA,title:TA,menuButton:kA,searchBar:MA,searchInput:EA,searchResults:AA,slideDown:RA,searchResultItem:NA,searchResultAvatar:DA,searchResultInfo:zA,searchResultName:BA,searchResultType:UA,searchResultTypeIcon:IA,searchLoading:OA,searchNoResults:LA,chatList:PA,emptyState:HA,loading:$A,chatItem:VA,active:FA,chatAvatar:qA,avatarFallback:GA,onlineIndicator:WA,chatInfo:YA,chatHeader:XA,chatNameWithType:KA,headerRight:QA,chatName:ZA,chatTypeIcon:JA,iconDm:e5,iconGroup:t5,iconChannel:n5,timestamp:a5,chatPreview:s5,unreadBadge:i5,unreadPulse:o5,chatHeader2:r5,headerInfo:l5,headerTitle:c5,chatTitle:u5,headerChatType:d5,headerActions:p5,headerButton:f5,messagesContainer:h5,noMessages:m5,welcomeScreen:g5,welcomeIcon:y5,welcomeText:x5,welcomeSubtext:v5,inputArea:b5,inputWrapper:S5,messageInput:w5,sendButton:_5,modalOverlay:C5,modalFadeIn:j5,modal:T5,modalSlideUp:k5,modalHeader:M5,closeButton:E5,modalBody:A5,modalFooter:R5,formGroup:N5,formInput:D5,primaryButton:z5,secondaryButton:B5,profileContent:U5,profileInfo:I5,avatarSection:O5,largeAvatar:L5,profileField:P5,loadingState:H5,menuDropdown:$5,menuItem:V5,menuDivider:F5,mainContent:q5,chatHeaderBar:G5,headerLeft:W5,headerAvatar:Y5,headerStatus:X5,online:K5,messageGroup:Q5,ownMessage:Z5,messageBubble:J5,otherMessage:e3,senderAvatar:t3,senderName:n3,messageContent:a3,messageTime:s3,attachment:i3,reactionsContainer:o3,reaction:r3,inputField:l3,emojiButton:c3,attachButton:u3,rightPanel:d3,chatInfoPanel:p3,chatInfoHeader:f3,chatInfoAvatar:h3,chatInfoName:m3,chatInfoType:g3,editChatButton:y3,infoContent:x3,infoSection:v3,infoLabel:b3,memberList:S3,memberItem:w3,memberAvatar:_3,memberInfo:C3,memberName:j3,memberRole:T3,memberStatus:k3,emptyScreen:M3,emptyIcon:E3,emptyActions:A3,actionButton:R3,userSection:N3,userAvatar:D3,userInfo:z3,username:B3,userStatus:U3,logoutButton:I3,hidden:O3,truncate:L3,mobileMenuButton:P3,mobileOverlay:H3,mobileOpen:$3,borderGlow:V3,chatItemHoverGlow:F3,buttonPulse:q3,inputFocusGlow:G3,subtleFloat:W3,messageSlideIn:Y3,shimmer:X3},mn={getCurrentUser:async()=>{const t=await De.get("/users/me"),n=t.data?.data||t.data;return Ah(n)},updateProfile:async t=>{console.log("[UserService] updateProfile called"),console.log("[UserService] FormData contents:");for(const[s,o]of t.entries())console.log(`  ${s}:`,o instanceof File?`File(${o.name}, ${o.size} bytes)`:o);const n=await De.put("/users/me",t);return console.log("[UserService] updateProfile response:",n),mn.getCurrentUser()},searchUsers:async t=>{const n=await De.get(`/users/search/${encodeURIComponent(t)}`),s=n.data?.data||n.data;return H0(s)},getUserProfile:async t=>{const n=await De.get(`/users/${t}`);console.log("[UserService] getUserProfile raw response:",n.data);const s=n.data?.data||n.data;return console.log("[UserService] getUserProfile rawUser:",s),console.log("[UserService] getUserProfile description:",s?.description,s?.Description),Ah(s)},updateLastSeen:async()=>{const t=await De.put("/users/last-seen");return t.data?.data||t.data},getAllUsers:async()=>{const t=await De.get("/users"),n=t.data?.data||t.data;return H0(n)},deleteUser:async t=>{const n=await De.delete(`/users/${t}`);return n.data?.data||n.data},blockUser:async t=>{const n=await De.post(`/users/blocks/${t}`);return n.data?.data||n.data},unblockUser:async t=>{const n=await De.delete(`/users/blocks/${t}`);return n.data?.data||n.data},getBlockedUsers:async()=>{const t=await De.get("/users/blocks");return t.data?.data||t.data||[]},getBlockStatus:async t=>(await De.get(`/users/blocks/${t}/status`)).data?.isBlocked||!1,getMutualBlockStatus:async t=>{const n=await De.get(`/users/blocks/${t}/mutual-status`);return{iBlockedThem:n.data?.iBlockedThem||!1,theyBlockedMe:n.data?.theyBlockedMe||!1}}},fa=Object.freeze(Object.defineProperty({__proto__:null,userService:mn},Symbol.toStringTag,{value:"Module"})),nt={surface:"#0a0a0a",surfaceElevated:"#0f0f0f",surfaceHover:"#151515",border:"#1a1a1a",borderLight:"#252525",primaryHover:"#0d9668",danger:"#ef4444",dangerHover:"#dc2626",dangerMuted:"rgba(239, 68, 68, 0.15)",warning:"#f59e0b",warningHover:"#d97706",warningMuted:"rgba(245, 158, 11, 0.15)",info:"#10b981",infoHover:"#0d9668",infoMuted:"rgba(16, 185, 129, 0.15)",success:"#10b981",successMuted:"rgba(16, 185, 129, 0.15)",text:"#ffffff",textSecondary:"#a1a1aa",textMuted:"#71717a"},K3=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M5.5 3.21V20.8l4.75-4.73 2.99 6.73L15.5 21.6l-3-6.7h6z'/%3E%3Cpath fill='%23064e3b' d='M6.5 5.61v11.68l3.38-3.37.37-.37.48 1.07 1.93 4.35 1.07-.47L11.8 14.1l-.48-1.07H16z'/%3E%3C/svg%3E") 5 3, default`,Vf=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M9 2.5a2.5 2.5 0 0 1 5 0v7.996l3.904-.74a2.095 2.095 0 0 1 2.537 2.466L19.5 17.5a6 6 0 0 1-6 6H11a7 7 0 0 1-7-7V9a2 2 0 1 1 4 0v3.5h1z'/%3E%3Cpath fill='%23064e3b' d='M10 2.5V14h-.5a1.5 1.5 0 0 1-1.5-1.5V9a1 1 0 1 0-2 0v7.5a6 6 0 0 0 6 6h2.5a5 5 0 0 0 5-5l.941-5.278a1.095 1.095 0 0 0-1.324-1.288l-4.117.78V2.5a1.5 1.5 0 0 0-3 0z'/%3E%3C/svg%3E") 9 4, pointer`,Q3=t=>{switch(t){case"danger":return{iconBg:nt.dangerMuted,iconBorder:`${nt.danger}30`,iconColor:nt.danger,buttonBg:nt.danger,buttonHover:nt.dangerHover,glow:`0 0 60px ${nt.dangerMuted}`};case"warning":return{iconBg:nt.warningMuted,iconBorder:`${nt.warning}30`,iconColor:nt.warning,buttonBg:nt.warning,buttonHover:nt.warningHover,glow:`0 0 60px ${nt.warningMuted}`};case"success":return{iconBg:nt.successMuted,iconBorder:`${nt.success}30`,iconColor:nt.success,buttonBg:nt.success,buttonHover:nt.primaryHover,glow:`0 0 60px ${nt.successMuted}`};case"info":default:return{iconBg:nt.infoMuted,iconBorder:`${nt.info}30`,iconColor:nt.info,buttonBg:nt.info,buttonHover:nt.infoHover,glow:`0 0 60px ${nt.infoMuted}`}}},Z3=(t,n)=>{switch(t){case"delete":return r.jsx(Wu,{size:28,color:n});case"ban":return r.jsx(As,{size:28,color:n});case"leave":return r.jsx(Fh,{size:28,color:n});case"shield":return r.jsx(ir,{size:28,color:n});case"success":return r.jsx(bb,{size:28,color:n});case"info":return r.jsx(Vh,{size:28,color:n});case"warning":default:return r.jsx(R_,{size:28,color:n})}},J3={hidden:{opacity:0},visible:{opacity:1}},eR={hidden:{opacity:0,scale:.9,y:20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:25,stiffness:400,mass:.8}},exit:{opacity:0,scale:.9,y:20,transition:{duration:.15,ease:"easeOut"}}},tR={hidden:{scale:0,rotate:-180},visible:{scale:1,rotate:0,transition:{type:"spring",damping:15,stiffness:400,delay:.1}}},nR={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{delay:.15,duration:.2}}},aR={hidden:{opacity:0},visible:{opacity:1,transition:{delay:.2,duration:.2}}},sR=({isOpen:t,title:n,message:s,confirmText:o="Confirm",cancelText:c="Cancel",variant:u="danger",icon:p="warning",onConfirm:h,onCancel:m})=>{const g=Q3(u);return r.jsx(Yn,{children:t&&r.jsxs(se.div,{variants:J3,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.2},onClick:m,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",cursor:K3},children:[r.jsx("div",{style:{position:"absolute",inset:0,backgroundImage:`
              linear-gradient(rgba(16, 185, 129, 0.02) 1px, transparent 1px),
              linear-gradient(90deg, rgba(16, 185, 129, 0.02) 1px, transparent 1px)
            `,backgroundSize:"50px 50px",pointerEvents:"none"}}),r.jsxs(se.div,{variants:eR,initial:"hidden",animate:"visible",exit:"exit",onClick:y=>y.stopPropagation(),style:{position:"relative",width:"100%",maxWidth:"420px",background:`linear-gradient(180deg, ${nt.surfaceElevated} 0%, ${nt.surface} 100%)`,border:`1px solid ${nt.border}`,borderRadius:"20px",boxShadow:`
                0 25px 50px -12px rgba(0, 0, 0, 0.5),
                0 0 0 1px ${nt.borderLight},
                ${g.glow}
              `,overflow:"hidden"},children:[r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"3px",background:`linear-gradient(90deg, transparent, ${g.iconColor}, transparent)`}}),r.jsx(se.button,{whileHover:{scale:1.1,backgroundColor:nt.surfaceHover},whileTap:{scale:.9},onClick:m,style:{position:"absolute",top:"16px",right:"16px",width:"32px",height:"32px",borderRadius:"8px",border:"none",background:"transparent",cursor:Vf,display:"flex",alignItems:"center",justifyContent:"center",color:nt.textMuted,zIndex:1},children:r.jsx(kn,{size:18})}),r.jsxs("div",{style:{padding:"32px 28px 28px"},children:[r.jsx(se.div,{variants:tR,style:{width:"72px",height:"72px",borderRadius:"20px",background:g.iconBg,border:`1px solid ${g.iconBorder}`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",boxShadow:`0 8px 32px ${g.iconBg}`},children:Z3(p,g.iconColor)}),r.jsxs(se.div,{variants:nR,style:{textAlign:"center"},children:[r.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"20px",fontWeight:700,color:nt.text,letterSpacing:"-0.02em"},children:n}),r.jsx("p",{style:{margin:0,fontSize:"14px",lineHeight:1.7,color:nt.textSecondary,maxWidth:"320px",marginLeft:"auto",marginRight:"auto"},children:s})]}),r.jsxs(se.div,{variants:aR,style:{display:"flex",gap:"12px",marginTop:"28px"},children:[r.jsx(se.button,{whileHover:{scale:1.02,backgroundColor:nt.surfaceHover,borderColor:nt.borderLight,boxShadow:"none"},whileTap:{scale:.98},onClick:m,style:{flex:1,padding:"14px 24px",borderRadius:"12px",border:`1px solid ${nt.border}`,background:nt.surfaceElevated,color:nt.textSecondary,fontSize:"14px",fontWeight:600,cursor:Vf,transition:"all 0.2s ease",outline:"none",boxShadow:"none"},children:c}),r.jsx(se.button,{whileHover:{scale:1.02,boxShadow:`0 8px 32px ${g.iconBg}`},whileTap:{scale:.98},onClick:h,style:{flex:1,padding:"14px 24px",borderRadius:"12px",border:"none",background:`linear-gradient(135deg, ${g.buttonBg} 0%, ${g.buttonHover} 100%)`,color:"white",fontSize:"14px",fontWeight:600,cursor:Vf,boxShadow:`0 4px 16px ${g.iconBg}`,transition:"all 0.2s ease"},children:o})]})]})]})]})})};let vl=null;const Ru={init:t=>{vl=t},show:t=>new Promise(n=>{if(vl){let s=t.icon;if(!s)switch(t.variant){case"danger":s="delete";break;case"warning":s="warning";break;case"success":s="success";break;case"info":default:s="info";break}vl({isOpen:!0,title:t.title,message:t.message,confirmText:t.confirmText||"Confirm",cancelText:t.cancelText||"Cancel",variant:t.variant||"danger",icon:s||"warning",callback:n})}else console.warn("[ConfirmModal] Store not initialized"),n(!1)}),close:t=>{vl&&vl(n=>(n.callback&&n.callback(t),{...n,isOpen:!1,callback:null}))}},Cn=Ru.show,iR=()=>{const[t,n]=La.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",variant:"danger",icon:"warning",callback:null});return La.useEffect(()=>{Ru.init(n)},[]),r.jsx(sR,{isOpen:t.isOpen,title:t.title,message:t.message,confirmText:t.confirmText,cancelText:t.cancelText,variant:t.variant,icon:t.icon,onConfirm:()=>Ru.close(!0),onCancel:()=>Ru.close(!1)})},oR=t=>{if(!t||t==="undefined"||t==="null")return"?";const n=String(t).trim();if(!n||n.length===0)return"?";const s=n.split(/\s+/).filter(o=>o.length>0);return s.length===0?"?":s.length===1?s[0][0]?.toUpperCase()||"?":s.map(o=>o[0]).join("").toUpperCase().slice(0,2)||"?"},DS=({isOpen:t,onClose:n,isDarkMode:s=!1})=>{const[o,c]=b.useState([]),[u,p]=b.useState(!1),[h,m]=b.useState(""),[g,y]=b.useState(null);b.useEffect(()=>{t&&v()},[t]);const v=async()=>{p(!0),y(null);try{const C=await mn.getAllUsers();c(C)}catch(C){console.error("Failed to load users:",C),C.response?.status===403?y("Access denied. You need admin privileges to view this panel."):y("Failed to load users. Please try again.")}finally{p(!1)}},S=async(C,T)=>{if(await Cn({title:"Delete User",message:`Are you sure you want to delete user "${T}"? This action cannot be undone and all their data will be permanently deleted.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",icon:"delete"}))try{await mn.deleteUser(C),await v()}catch(z){console.error("Failed to delete user:",z)}},j=o.filter(C=>C.username.toLowerCase().includes(h.toLowerCase())||C.email.toLowerCase().includes(h.toLowerCase()));return t?r.jsx("div",{className:`${N.modalOverlay} ${s?N.darkMode:""}`,onClick:n,children:r.jsxs("div",{className:N.modal,onClick:C=>C.stopPropagation(),style:{maxWidth:"900px",width:"90%"},children:[r.jsxs("div",{className:N.modalHeader,children:[r.jsx("h2",{children:" Admin Panel - User Management"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsxs("div",{className:N.modalBody,style:{maxHeight:"70vh",overflowY:"auto"},children:[g&&r.jsx("div",{style:{padding:"12px",backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)",borderRadius:"6px",color:"#d32f2f",marginBottom:"16px"},children:g}),r.jsx("div",{className:N.formGroup,style:{marginBottom:"16px"},children:r.jsx("input",{type:"text",placeholder:"Search users by username or email...",value:h,onChange:C=>m(C.target.value),className:N.formInput,style:{margin:0}})}),u?r.jsx("div",{className:N.loadingState,children:"Loading users..."}):j.length===0?r.jsx("div",{className:N.emptyState,children:h?"No users match your search":"No users found"}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"6px",fontWeight:600,fontSize:"14px",color:"var(--text)"},children:["Total Users: ",j.length]}),r.jsx("div",{style:{overflowX:"auto"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"var(--surface)",borderRadius:"8px",overflow:"hidden"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:"var(--background)",borderBottom:"2px solid var(--border)"},children:[r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"User"}),r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Email"}),r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Status"}),r.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Actions"})]})}),r.jsx("tbody",{children:j.map(C=>r.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",transition:"background-color 0.2s"},onMouseEnter:T=>{T.currentTarget.style.backgroundColor="var(--background)"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="transparent"},children:[r.jsx("td",{style:{padding:"12px"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[C.avatar?r.jsx("img",{src:C.avatar,alt:C.username,style:{width:"36px",height:"36px",borderRadius:"50%",objectFit:"cover"}}):r.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:"var(--accent)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"14px"},children:oR(C.username)}),r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:C.username}),C.bio&&r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:C.bio})]})]})}),r.jsx("td",{style:{padding:"12px",fontSize:"13px",color:"var(--text-secondary)"},children:C.email}),r.jsx("td",{style:{padding:"12px"},children:r.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:600,backgroundColor:C.onlineStatus==="online"?"rgba(16, 185, 129, 0.15)":C.onlineStatus==="away"?"rgba(245, 158, 11, 0.15)":"rgba(107, 114, 128, 0.15)",color:C.onlineStatus==="online"?"#10b981":C.onlineStatus==="away"?"#f59e0b":"#6b7280"},children:C.onlineStatus})}),r.jsx("td",{style:{padding:"12px",textAlign:"center"},children:r.jsx("button",{onClick:()=>S(C.id,C.username),style:{padding:"6px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:T=>{T.currentTarget.style.opacity="0.9",T.currentTarget.style.transform="scale(1.05)"},onMouseLeave:T=>{T.currentTarget.style.opacity="1",T.currentTarget.style.transform="scale(1)"},children:" Delete"})})]},C.id))})]})})]})]}),r.jsxs("div",{className:N.modalFooter,children:[r.jsx("button",{onClick:v,className:N.secondaryButton,disabled:u,children:" Refresh"}),r.jsx("button",{onClick:n,className:N.primaryButton,children:"Close"})]})]})}):null};class so extends Error{constructor(n,s){const o=new.target.prototype;super(`${n}: Status code '${s}'`),this.statusCode=s,this.__proto__=o}}class Em extends Error{constructor(n="A timeout occurred."){const s=new.target.prototype;super(n),this.__proto__=s}}class Pa extends Error{constructor(n="An abort occurred."){const s=new.target.prototype;super(n),this.__proto__=s}}class rR extends Error{constructor(n,s){const o=new.target.prototype;super(n),this.transport=s,this.errorType="UnsupportedTransportError",this.__proto__=o}}class lR extends Error{constructor(n,s){const o=new.target.prototype;super(n),this.transport=s,this.errorType="DisabledTransportError",this.__proto__=o}}class cR extends Error{constructor(n,s){const o=new.target.prototype;super(n),this.transport=s,this.errorType="FailedToStartTransportError",this.__proto__=o}}class $0 extends Error{constructor(n){const s=new.target.prototype;super(n),this.errorType="FailedToNegotiateWithServerError",this.__proto__=s}}class uR extends Error{constructor(n,s){const o=new.target.prototype;super(n),this.innerErrors=s,this.__proto__=o}}class zS{constructor(n,s,o){this.statusCode=n,this.statusText=s,this.content=o}}class sd{get(n,s){return this.send({...s,method:"GET",url:n})}post(n,s){return this.send({...s,method:"POST",url:n})}delete(n,s){return this.send({...s,method:"DELETE",url:n})}getCookieString(n){return""}}var J;(function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"})(J||(J={}));class Il{constructor(){}log(n,s){}}Il.instance=new Il;const dR="10.0.0";class gn{static isRequired(n,s){if(n==null)throw new Error(`The '${s}' argument is required.`)}static isNotEmpty(n,s){if(!n||n.match(/^\s*$/))throw new Error(`The '${s}' argument should not be empty.`)}static isIn(n,s,o){if(!(n in s))throw new Error(`Unknown ${o} value: ${n}.`)}}class qt{static get isBrowser(){return!qt.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!qt.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!qt.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Ol(t,n){let s="";return ro(t)?(s=`Binary data of length ${t.byteLength}`,n&&(s+=`. Content: '${pR(t)}'`)):typeof t=="string"&&(s=`String data of length ${t.length}`,n&&(s+=`. Content: '${t}'`)),s}function pR(t){const n=new Uint8Array(t);let s="";return n.forEach(o=>{const c=o<16?"0":"";s+=`0x${c}${o.toString(16)} `}),s.substring(0,s.length-1)}function ro(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}async function BS(t,n,s,o,c,u){const p={},[h,m]=ur();p[h]=m,t.log(J.Trace,`(${n} transport) sending data. ${Ol(c,u.logMessageContent)}.`);const g=ro(c)?"arraybuffer":"text",y=await s.post(o,{content:c,headers:{...p,...u.headers},responseType:g,timeout:u.timeout,withCredentials:u.withCredentials});t.log(J.Trace,`(${n} transport) request complete. Response status: ${y.statusCode}.`)}function fR(t){return t===void 0?new Vu(J.Information):t===null?Il.instance:t.log!==void 0?t:new Vu(t)}class hR{constructor(n,s){this._subject=n,this._observer=s}dispose(){const n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(s=>{})}}class Vu{constructor(n){this._minLevel=n,this.out=console}log(n,s){if(n>=this._minLevel){const o=`[${new Date().toISOString()}] ${J[n]}: ${s}`;switch(n){case J.Critical:case J.Error:this.out.error(o);break;case J.Warning:this.out.warn(o);break;case J.Information:this.out.info(o);break;default:this.out.log(o);break}}}}function ur(){let t="X-SignalR-User-Agent";return qt.isNode&&(t="User-Agent"),[t,mR(dR,gR(),xR(),yR())]}function mR(t,n,s,o){let c="Microsoft SignalR/";const u=t.split(".");return c+=`${u[0]}.${u[1]}`,c+=` (${t}; `,n&&n!==""?c+=`${n}; `:c+="Unknown OS; ",c+=`${s}`,o?c+=`; ${o}`:c+="; Unknown Runtime Version",c+=")",c}function gR(){if(qt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function yR(){if(qt.isNode)return process.versions.node}function xR(){return qt.isNode?"NodeJS":"Browser"}function Ff(t){return t.stack?t.stack:t.message?t.message:`${t}`}function vR(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class bR extends sd{constructor(n){if(super(),this._logger=n,typeof fetch>"u"||qt.isNode){const s=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(s("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=s("node-fetch"):this._fetchType=fetch,this._fetchType=s("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(vR());if(typeof AbortController>"u"){const s=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=s("abort-controller")}else this._abortControllerType=AbortController}async send(n){if(n.abortSignal&&n.abortSignal.aborted)throw new Pa;if(!n.method)throw new Error("No method defined.");if(!n.url)throw new Error("No url defined.");const s=new this._abortControllerType;let o;n.abortSignal&&(n.abortSignal.onabort=()=>{s.abort(),o=new Pa});let c=null;if(n.timeout){const m=n.timeout;c=setTimeout(()=>{s.abort(),this._logger.log(J.Warning,"Timeout from HTTP request."),o=new Em},m)}n.content===""&&(n.content=void 0),n.content&&(n.headers=n.headers||{},ro(n.content)?n.headers["Content-Type"]="application/octet-stream":n.headers["Content-Type"]="text/plain;charset=UTF-8");let u;try{u=await this._fetchType(n.url,{body:n.content,cache:"no-cache",credentials:n.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...n.headers},method:n.method,mode:"cors",redirect:"follow",signal:s.signal})}catch(m){throw o||(this._logger.log(J.Warning,`Error from HTTP request. ${m}.`),m)}finally{c&&clearTimeout(c),n.abortSignal&&(n.abortSignal.onabort=null)}if(!u.ok){const m=await V0(u,"text");throw new so(m||u.statusText,u.status)}const h=await V0(u,n.responseType);return new zS(u.status,u.statusText,h)}getCookieString(n){let s="";return qt.isNode&&this._jar&&this._jar.getCookies(n,(o,c)=>s=c.join("; ")),s}}function V0(t,n){let s;switch(n){case"arraybuffer":s=t.arrayBuffer();break;case"text":s=t.text();break;case"blob":case"document":case"json":throw new Error(`${n} is not supported.`);default:s=t.text();break}return s}class SR extends sd{constructor(n){super(),this._logger=n}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new Pa):n.method?n.url?new Promise((s,o)=>{const c=new XMLHttpRequest;c.open(n.method,n.url,!0),c.withCredentials=n.withCredentials===void 0?!0:n.withCredentials,c.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.content===""&&(n.content=void 0),n.content&&(ro(n.content)?c.setRequestHeader("Content-Type","application/octet-stream"):c.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const u=n.headers;u&&Object.keys(u).forEach(p=>{c.setRequestHeader(p,u[p])}),n.responseType&&(c.responseType=n.responseType),n.abortSignal&&(n.abortSignal.onabort=()=>{c.abort(),o(new Pa)}),n.timeout&&(c.timeout=n.timeout),c.onload=()=>{n.abortSignal&&(n.abortSignal.onabort=null),c.status>=200&&c.status<300?s(new zS(c.status,c.statusText,c.response||c.responseText)):o(new so(c.response||c.responseText||c.statusText,c.status))},c.onerror=()=>{this._logger.log(J.Warning,`Error from HTTP request. ${c.status}: ${c.statusText}.`),o(new so(c.statusText,c.status))},c.ontimeout=()=>{this._logger.log(J.Warning,"Timeout from HTTP request."),o(new Em)},c.send(n.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class wR extends sd{constructor(n){if(super(),typeof fetch<"u"||qt.isNode)this._httpClient=new bR(n);else if(typeof XMLHttpRequest<"u")this._httpClient=new SR(n);else throw new Error("No usable HttpClient found.")}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new Pa):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(n){return this._httpClient.getCookieString(n)}}class ha{static write(n){return`${n}${ha.RecordSeparator}`}static parse(n){if(n[n.length-1]!==ha.RecordSeparator)throw new Error("Message is incomplete.");const s=n.split(ha.RecordSeparator);return s.pop(),s}}ha.RecordSeparatorCode=30;ha.RecordSeparator=String.fromCharCode(ha.RecordSeparatorCode);class _R{writeHandshakeRequest(n){return ha.write(JSON.stringify(n))}parseHandshakeResponse(n){let s,o;if(ro(n)){const h=new Uint8Array(n),m=h.indexOf(ha.RecordSeparatorCode);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;s=String.fromCharCode.apply(null,Array.prototype.slice.call(h.slice(0,g))),o=h.byteLength>g?h.slice(g).buffer:null}else{const h=n,m=h.indexOf(ha.RecordSeparator);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;s=h.substring(0,g),o=h.length>g?h.substring(g):null}const c=ha.parse(s),u=JSON.parse(c[0]);if(u.type)throw new Error("Expected a handshake response from the server.");return[o,u]}}var We;(function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close",t[t.Ack=8]="Ack",t[t.Sequence=9]="Sequence"})(We||(We={}));class CR{constructor(){this.observers=[]}next(n){for(const s of this.observers)s.next(n)}error(n){for(const s of this.observers)s.error&&s.error(n)}complete(){for(const n of this.observers)n.complete&&n.complete()}subscribe(n){return this.observers.push(n),new hR(this,n)}}class jR{constructor(n,s,o){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=n,this._connection=s,this._bufferSize=o}async _send(n){const s=this._protocol.writeMessage(n);let o=Promise.resolve();if(this._isInvocationMessage(n)){this._totalMessageCount++;let c=()=>{},u=()=>{};ro(s)?this._bufferedByteCount+=s.byteLength:this._bufferedByteCount+=s.length,this._bufferedByteCount>=this._bufferSize&&(o=new Promise((p,h)=>{c=p,u=h})),this._messages.push(new TR(s,this._totalMessageCount,c,u))}try{this._reconnectInProgress||await this._connection.send(s)}catch{this._disconnected()}await o}_ack(n){let s=-1;for(let o=0;o<this._messages.length;o++){const c=this._messages[o];if(c._id<=n.sequenceId)s=o,ro(c._message)?this._bufferedByteCount-=c._message.byteLength:this._bufferedByteCount-=c._message.length,c._resolver();else if(this._bufferedByteCount<this._bufferSize)c._resolver();else break}s!==-1&&(this._messages=this._messages.slice(s+1))}_shouldProcessMessage(n){if(this._waitForSequenceMessage)return n.type!==We.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(n))return!0;const s=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,s<=this._latestReceivedSequenceId?(s===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=s,this._ackTimer(),!0)}_resetSequence(n){if(n.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=n.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const n=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:We.Sequence,sequenceId:n}));const s=this._messages;for(const o of s)await this._connection.send(o._message);this._reconnectInProgress=!1}_dispose(n){n??(n=new Error("Unable to reconnect to server."));for(const s of this._messages)s._rejector(n)}_isInvocationMessage(n){switch(n.type){case We.Invocation:case We.StreamItem:case We.Completion:case We.StreamInvocation:case We.CancelInvocation:return!0;case We.Close:case We.Sequence:case We.Ping:case We.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:We.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class TR{constructor(n,s,o,c){this._message=n,this._id=s,this._resolver=o,this._rejector=c}}const kR=30*1e3,MR=15*1e3,ER=1e5;var St;(function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"})(St||(St={}));class Am{static create(n,s,o,c,u,p,h){return new Am(n,s,o,c,u,p,h)}constructor(n,s,o,c,u,p,h){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(J.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},gn.isRequired(n,"connection"),gn.isRequired(s,"logger"),gn.isRequired(o,"protocol"),this.serverTimeoutInMilliseconds=u??kR,this.keepAliveIntervalInMilliseconds=p??MR,this._statefulReconnectBufferSize=h??ER,this._logger=s,this._protocol=o,this.connection=n,this._reconnectPolicy=c,this._handshakeProtocol=new _R,this.connection.onreceive=m=>this._processIncomingData(m),this.connection.onclose=m=>this._connectionClosed(m),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=St.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:We.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(n){if(this._connectionState!==St.Disconnected&&this._connectionState!==St.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==St.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=St.Connecting,this._logger.log(J.Debug,"Starting HubConnection.");try{await this._startInternal(),qt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=St.Connected,this._connectionStarted=!0,this._logger.log(J.Debug,"HubConnection connected successfully.")}catch(n){return this._connectionState=St.Disconnected,this._logger.log(J.Debug,`HubConnection failed to start successfully because of error '${n}'.`),Promise.reject(n)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const n=new Promise((s,o)=>{this._handshakeResolver=s,this._handshakeRejecter=o});await this.connection.start(this._protocol.transferFormat);try{let s=this._protocol.version;this.connection.features.reconnect||(s=1);const o={protocol:this._protocol.name,version:s};if(this._logger.log(J.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(o)),this._logger.log(J.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await n,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new jR(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(s){throw this._logger.log(J.Debug,`Hub handshake failed with error '${s}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(s),s}}async stop(){const n=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await n}catch{}}_stopInternal(n){if(this._connectionState===St.Disconnected)return this._logger.log(J.Debug,`Call to HubConnection.stop(${n}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===St.Disconnecting)return this._logger.log(J.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const s=this._connectionState;return this._connectionState=St.Disconnecting,this._logger.log(J.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(J.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(s===St.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=n||new Pa("The connection was stopped before the hub handshake could complete."),this.connection.stop(n))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(n,...s){const[o,c]=this._replaceStreamingParams(s),u=this._createStreamInvocation(n,s,c);let p;const h=new CR;return h.cancelCallback=()=>{const m=this._createCancelInvocation(u.invocationId);return delete this._callbacks[u.invocationId],p.then(()=>this._sendWithProtocol(m))},this._callbacks[u.invocationId]=(m,g)=>{if(g){h.error(g);return}else m&&(m.type===We.Completion?m.error?h.error(new Error(m.error)):h.complete():h.next(m.item))},p=this._sendWithProtocol(u).catch(m=>{h.error(m),delete this._callbacks[u.invocationId]}),this._launchStreams(o,p),h}_sendMessage(n){return this._resetKeepAliveInterval(),this.connection.send(n)}_sendWithProtocol(n){return this._messageBuffer?this._messageBuffer._send(n):this._sendMessage(this._protocol.writeMessage(n))}send(n,...s){const[o,c]=this._replaceStreamingParams(s),u=this._sendWithProtocol(this._createInvocation(n,s,!0,c));return this._launchStreams(o,u),u}invoke(n,...s){const[o,c]=this._replaceStreamingParams(s),u=this._createInvocation(n,s,!1,c);return new Promise((h,m)=>{this._callbacks[u.invocationId]=(y,v)=>{if(v){m(v);return}else y&&(y.type===We.Completion?y.error?m(new Error(y.error)):h(y.result):m(new Error(`Unexpected message type: ${y.type}`)))};const g=this._sendWithProtocol(u).catch(y=>{m(y),delete this._callbacks[u.invocationId]});this._launchStreams(o,g)})}on(n,s){!n||!s||(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),this._methods[n].indexOf(s)===-1&&this._methods[n].push(s))}off(n,s){if(!n)return;n=n.toLowerCase();const o=this._methods[n];if(o)if(s){const c=o.indexOf(s);c!==-1&&(o.splice(c,1),o.length===0&&delete this._methods[n])}else delete this._methods[n]}onclose(n){n&&this._closedCallbacks.push(n)}onreconnecting(n){n&&this._reconnectingCallbacks.push(n)}onreconnected(n){n&&this._reconnectedCallbacks.push(n)}_processIncomingData(n){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(n=this._processHandshakeResponse(n),this._receivedHandshakeResponse=!0),n){const s=this._protocol.parseMessages(n,this._logger);for(const o of s)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(o)))switch(o.type){case We.Invocation:this._invokeClientMethod(o).catch(c=>{this._logger.log(J.Error,`Invoke client method threw error: ${Ff(c)}`)});break;case We.StreamItem:case We.Completion:{const c=this._callbacks[o.invocationId];if(c){o.type===We.Completion&&delete this._callbacks[o.invocationId];try{c(o)}catch(u){this._logger.log(J.Error,`Stream callback threw error: ${Ff(u)}`)}}break}case We.Ping:break;case We.Close:{this._logger.log(J.Information,"Close message received from server.");const c=o.error?new Error("Server returned an error on close: "+o.error):void 0;o.allowReconnect===!0?this.connection.stop(c):this._stopPromise=this._stopInternal(c);break}case We.Ack:this._messageBuffer&&this._messageBuffer._ack(o);break;case We.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(o);break;default:this._logger.log(J.Warning,`Invalid message type: ${o.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(n){let s,o;try{[o,s]=this._handshakeProtocol.parseHandshakeResponse(n)}catch(c){const u="Error parsing handshake response: "+c;this._logger.log(J.Error,u);const p=new Error(u);throw this._handshakeRejecter(p),p}if(s.error){const c="Server returned handshake error: "+s.error;this._logger.log(J.Error,c);const u=new Error(c);throw this._handshakeRejecter(u),u}else this._logger.log(J.Debug,"Server handshake complete.");return this._handshakeResolver(),o}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!this.connection.features||!this.connection.features.inherentKeepAlive){this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds);let n=this._nextKeepAlive-new Date().getTime();if(n<0){this._connectionState===St.Connected&&this._trySendPingMessage();return}this._pingServerHandle===void 0&&(n<0&&(n=0),this._pingServerHandle=setTimeout(async()=>{this._connectionState===St.Connected&&await this._trySendPingMessage()},n))}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(n){const s=n.target.toLowerCase(),o=this._methods[s];if(!o){this._logger.log(J.Warning,`No client method with the name '${s}' found.`),n.invocationId&&(this._logger.log(J.Warning,`No result given for '${s}' method and invocation ID '${n.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)));return}const c=o.slice(),u=!!n.invocationId;let p,h,m;for(const g of c)try{const y=p;p=await g.apply(this,n.arguments),u&&p&&y&&(this._logger.log(J.Error,`Multiple results provided for '${s}'. Sending error to server.`),m=this._createCompletionMessage(n.invocationId,"Client provided multiple results.",null)),h=void 0}catch(y){h=y,this._logger.log(J.Error,`A callback for the method '${s}' threw error '${y}'.`)}m?await this._sendWithProtocol(m):u?(h?m=this._createCompletionMessage(n.invocationId,`${h}`,null):p!==void 0?m=this._createCompletionMessage(n.invocationId,null,p):(this._logger.log(J.Warning,`No result given for '${s}' method and invocation ID '${n.invocationId}'.`),m=this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(m)):p&&this._logger.log(J.Error,`Result given for '${s}' method but server is not expecting a result.`)}_connectionClosed(n){this._logger.log(J.Debug,`HubConnection.connectionClosed(${n}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||n||new Pa("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(n||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===St.Disconnecting?this._completeClose(n):this._connectionState===St.Connected&&this._reconnectPolicy?this._reconnect(n):this._connectionState===St.Connected&&this._completeClose(n)}_completeClose(n){if(this._connectionStarted){this._connectionState=St.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(n??new Error("Connection closed.")),this._messageBuffer=void 0),qt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(s=>s.apply(this,[n]))}catch(s){this._logger.log(J.Error,`An onclose callback called with error '${n}' threw error '${s}'.`)}}}async _reconnect(n){const s=Date.now();let o=0,c=n!==void 0?n:new Error("Attempting to reconnect due to a unknown error."),u=this._getNextRetryDelay(o,0,c);if(u===null){this._logger.log(J.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(n);return}if(this._connectionState=St.Reconnecting,n?this._logger.log(J.Information,`Connection reconnecting because of error '${n}'.`):this._logger.log(J.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(p=>p.apply(this,[n]))}catch(p){this._logger.log(J.Error,`An onreconnecting callback called with error '${n}' threw error '${p}'.`)}if(this._connectionState!==St.Reconnecting){this._logger.log(J.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;u!==null;){if(this._logger.log(J.Information,`Reconnect attempt number ${o+1} will start in ${u} ms.`),await new Promise(p=>{this._reconnectDelayHandle=setTimeout(p,u)}),this._reconnectDelayHandle=void 0,this._connectionState!==St.Reconnecting){this._logger.log(J.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=St.Connected,this._logger.log(J.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(p=>p.apply(this,[this.connection.connectionId]))}catch(p){this._logger.log(J.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${p}'.`)}return}catch(p){if(this._logger.log(J.Information,`Reconnect attempt failed because of error '${p}'.`),this._connectionState!==St.Reconnecting){this._logger.log(J.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===St.Disconnecting&&this._completeClose();return}o++,c=p instanceof Error?p:new Error(p.toString()),u=this._getNextRetryDelay(o,Date.now()-s,c)}}this._logger.log(J.Information,`Reconnect retries have been exhausted after ${Date.now()-s} ms and ${o} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(n,s,o){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:s,previousRetryCount:n,retryReason:o})}catch(c){return this._logger.log(J.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${n}, ${s}) threw error '${c}'.`),null}}_cancelCallbacksWithError(n){const s=this._callbacks;this._callbacks={},Object.keys(s).forEach(o=>{const c=s[o];try{c(null,n)}catch(u){this._logger.log(J.Error,`Stream 'error' callback called with '${n}' threw error: ${Ff(u)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(n,s,o,c){if(o)return c.length!==0?{target:n,arguments:s,streamIds:c,type:We.Invocation}:{target:n,arguments:s,type:We.Invocation};{const u=this._invocationId;return this._invocationId++,c.length!==0?{target:n,arguments:s,invocationId:u.toString(),streamIds:c,type:We.Invocation}:{target:n,arguments:s,invocationId:u.toString(),type:We.Invocation}}}_launchStreams(n,s){if(n.length!==0){s||(s=Promise.resolve());for(const o in n)n[o].subscribe({complete:()=>{s=s.then(()=>this._sendWithProtocol(this._createCompletionMessage(o)))},error:c=>{let u;c instanceof Error?u=c.message:c&&c.toString?u=c.toString():u="Unknown error",s=s.then(()=>this._sendWithProtocol(this._createCompletionMessage(o,u)))},next:c=>{s=s.then(()=>this._sendWithProtocol(this._createStreamItemMessage(o,c)))}})}}_replaceStreamingParams(n){const s=[],o=[];for(let c=0;c<n.length;c++){const u=n[c];if(this._isObservable(u)){const p=this._invocationId;this._invocationId++,s[p]=u,o.push(p.toString()),n.splice(c,1)}}return[s,o]}_isObservable(n){return n&&n.subscribe&&typeof n.subscribe=="function"}_createStreamInvocation(n,s,o){const c=this._invocationId;return this._invocationId++,o.length!==0?{target:n,arguments:s,invocationId:c.toString(),streamIds:o,type:We.StreamInvocation}:{target:n,arguments:s,invocationId:c.toString(),type:We.StreamInvocation}}_createCancelInvocation(n){return{invocationId:n,type:We.CancelInvocation}}_createStreamItemMessage(n,s){return{invocationId:n,item:s,type:We.StreamItem}}_createCompletionMessage(n,s,o){return s?{error:s,invocationId:n,type:We.Completion}:{invocationId:n,result:o,type:We.Completion}}_createCloseMessage(){return{type:We.Close}}async _trySendPingMessage(){try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}}const AR=[0,2e3,1e4,3e4,null];class F0{constructor(n){this._retryDelays=n!==void 0?[...n,null]:AR}nextRetryDelayInMilliseconds(n){return this._retryDelays[n.previousRetryCount]}}class io{}io.Authorization="Authorization";io.Cookie="Cookie";class RR extends sd{constructor(n,s){super(),this._innerClient=n,this._accessTokenFactory=s}async send(n){let s=!0;this._accessTokenFactory&&(!this._accessToken||n.url&&n.url.indexOf("/negotiate?")>0)&&(s=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(n);const o=await this._innerClient.send(n);return s&&o.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(n),await this._innerClient.send(n)):o}_setAuthorizationHeader(n){n.headers||(n.headers={}),this._accessToken?n.headers[io.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&n.headers[io.Authorization]&&delete n.headers[io.Authorization]}getCookieString(n){return this._innerClient.getCookieString(n)}}var Xt;(function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"})(Xt||(Xt={}));var Vn;(function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"})(Vn||(Vn={}));let NR=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class q0{get pollAborted(){return this._pollAbort.aborted}constructor(n,s,o){this._httpClient=n,this._logger=s,this._pollAbort=new NR,this._options=o,this._running=!1,this.onreceive=null,this.onclose=null}async connect(n,s){if(gn.isRequired(n,"url"),gn.isRequired(s,"transferFormat"),gn.isIn(s,Vn,"transferFormat"),this._url=n,this._logger.log(J.Trace,"(LongPolling transport) Connecting."),s===Vn.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[o,c]=ur(),u={[o]:c,...this._options.headers},p={abortSignal:this._pollAbort.signal,headers:u,timeout:1e5,withCredentials:this._options.withCredentials};s===Vn.Binary&&(p.responseType="arraybuffer");const h=`${n}&_=${Date.now()}`;this._logger.log(J.Trace,`(LongPolling transport) polling: ${h}.`);const m=await this._httpClient.get(h,p);m.statusCode!==200?(this._logger.log(J.Error,`(LongPolling transport) Unexpected response code: ${m.statusCode}.`),this._closeError=new so(m.statusText||"",m.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,p)}async _poll(n,s){try{for(;this._running;)try{const o=`${n}&_=${Date.now()}`;this._logger.log(J.Trace,`(LongPolling transport) polling: ${o}.`);const c=await this._httpClient.get(o,s);c.statusCode===204?(this._logger.log(J.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):c.statusCode!==200?(this._logger.log(J.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new so(c.statusText||"",c.statusCode),this._running=!1):c.content?(this._logger.log(J.Trace,`(LongPolling transport) data received. ${Ol(c.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(c.content)):this._logger.log(J.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(o){this._running?o instanceof Em?this._logger.log(J.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=o,this._running=!1):this._logger.log(J.Trace,`(LongPolling transport) Poll errored after shutdown: ${o.message}`)}}finally{this._logger.log(J.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(n){return this._running?BS(this._logger,"LongPolling",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(J.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(J.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const n={},[s,o]=ur();n[s]=o;const c={headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let u;try{await this._httpClient.delete(this._url,c)}catch(p){u=p}u?u instanceof so&&(u.statusCode===404?this._logger.log(J.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(J.Trace,`(LongPolling transport) Error sending a DELETE request: ${u}`)):this._logger.log(J.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(J.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let n="(LongPolling transport) Firing onclose event.";this._closeError&&(n+=" Error: "+this._closeError),this._logger.log(J.Trace,n),this.onclose(this._closeError)}}}class DR{constructor(n,s,o,c){this._httpClient=n,this._accessToken=s,this._logger=o,this._options=c,this.onreceive=null,this.onclose=null}async connect(n,s){return gn.isRequired(n,"url"),gn.isRequired(s,"transferFormat"),gn.isIn(s,Vn,"transferFormat"),this._logger.log(J.Trace,"(SSE transport) Connecting."),this._url=n,this._accessToken&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((o,c)=>{let u=!1;if(s!==Vn.Text){c(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let p;if(qt.isBrowser||qt.isWebWorker)p=new this._options.EventSource(n,{withCredentials:this._options.withCredentials});else{const h=this._httpClient.getCookieString(n),m={};m.Cookie=h;const[g,y]=ur();m[g]=y,p=new this._options.EventSource(n,{withCredentials:this._options.withCredentials,headers:{...m,...this._options.headers}})}try{p.onmessage=h=>{if(this.onreceive)try{this._logger.log(J.Trace,`(SSE transport) data received. ${Ol(h.data,this._options.logMessageContent)}.`),this.onreceive(h.data)}catch(m){this._close(m);return}},p.onerror=h=>{u?this._close():c(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},p.onopen=()=>{this._logger.log(J.Information,`SSE connected to ${this._url}`),this._eventSource=p,u=!0,o()}}catch(h){c(h);return}})}async send(n){return this._eventSource?BS(this._logger,"SSE",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}class zR{constructor(n,s,o,c,u,p){this._logger=o,this._accessTokenFactory=s,this._logMessageContent=c,this._webSocketConstructor=u,this._httpClient=n,this.onreceive=null,this.onclose=null,this._headers=p}async connect(n,s){gn.isRequired(n,"url"),gn.isRequired(s,"transferFormat"),gn.isIn(s,Vn,"transferFormat"),this._logger.log(J.Trace,"(WebSockets transport) Connecting.");let o;return this._accessTokenFactory&&(o=await this._accessTokenFactory()),new Promise((c,u)=>{n=n.replace(/^http/,"ws");let p;const h=this._httpClient.getCookieString(n);let m=!1;if(qt.isNode||qt.isReactNative){const g={},[y,v]=ur();g[y]=v,o&&(g[io.Authorization]=`Bearer ${o}`),h&&(g[io.Cookie]=h),p=new this._webSocketConstructor(n,void 0,{headers:{...g,...this._headers}})}else o&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(o)}`);p||(p=new this._webSocketConstructor(n)),s===Vn.Binary&&(p.binaryType="arraybuffer"),p.onopen=g=>{this._logger.log(J.Information,`WebSocket connected to ${n}.`),this._webSocket=p,m=!0,c()},p.onerror=g=>{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="There was an error with the transport",this._logger.log(J.Information,`(WebSockets transport) ${y}.`)},p.onmessage=g=>{if(this._logger.log(J.Trace,`(WebSockets transport) data received. ${Ol(g.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(g.data)}catch(y){this._close(y);return}},p.onclose=g=>{if(m)this._close(g);else{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",u(new Error(y))}}})}send(n){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(J.Trace,`(WebSockets transport) sending data. ${Ol(n,this._logMessageContent)}.`),this._webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(n){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(J.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(n)&&(n.wasClean===!1||n.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${n.code} (${n.reason||"no reason given"}).`)):n instanceof Error?this.onclose(n):this.onclose())}_isCloseEvent(n){return n&&typeof n.wasClean=="boolean"&&typeof n.code=="number"}}const G0=100;class BR{constructor(n,s={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,gn.isRequired(n,"url"),this._logger=fR(s.logger),this.baseUrl=this._resolveUrl(n),s=s||{},s.logMessageContent=s.logMessageContent===void 0?!1:s.logMessageContent,typeof s.withCredentials=="boolean"||s.withCredentials===void 0)s.withCredentials=s.withCredentials===void 0?!0:s.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");s.timeout=s.timeout===void 0?100*1e3:s.timeout;let o=null,c=null;if(qt.isNode&&typeof require<"u"){const u=typeof __webpack_require__=="function"?__non_webpack_require__:require;o=u("ws"),c=u("eventsource")}!qt.isNode&&typeof WebSocket<"u"&&!s.WebSocket?s.WebSocket=WebSocket:qt.isNode&&!s.WebSocket&&o&&(s.WebSocket=o),!qt.isNode&&typeof EventSource<"u"&&!s.EventSource?s.EventSource=EventSource:qt.isNode&&!s.EventSource&&typeof c<"u"&&(s.EventSource=c),this._httpClient=new RR(s.httpClient||new wR(this._logger),s.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=s,this.onreceive=null,this.onclose=null}async start(n){if(n=n||Vn.Binary,gn.isIn(n,Vn,"transferFormat"),this._logger.log(J.Debug,`Starting connection with transfer format '${Vn[n]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(n),await this._startInternalPromise,this._connectionState==="Disconnecting"){const s="Failed to start the HttpConnection before stop() was called.";return this._logger.log(J.Error,s),await this._stopPromise,Promise.reject(new Pa(s))}else if(this._connectionState!=="Connected"){const s="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(J.Error,s),Promise.reject(new Pa(s))}this._connectionStarted=!0}send(n){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Rm(this.transport)),this._sendQueue.send(n))}async stop(n){if(this._connectionState==="Disconnected")return this._logger.log(J.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(J.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(s=>{this._stopPromiseResolver=s}),await this._stopInternal(n),await this._stopPromise}async _stopInternal(n){this._stopError=n;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(s){this._logger.log(J.Error,`HttpConnection.transport.stop() threw error '${s}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(J.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(n){let s=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Xt.WebSockets)this.transport=this._constructTransport(Xt.WebSockets),await this._startTransport(s,n);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let o=null,c=0;do{if(o=await this._getNegotiationResponse(s),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Pa("The connection was stopped during negotiation.");if(o.error)throw new Error(o.error);if(o.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(o.url&&(s=o.url),o.accessToken){const u=o.accessToken;this._accessTokenFactory=()=>u,this._httpClient._accessToken=u,this._httpClient._accessTokenFactory=void 0}c++}while(o.url&&c<G0);if(c===G0&&o.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(s,this._options.transport,o,n)}this.transport instanceof q0&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(J.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(o){return this._logger.log(J.Error,"Failed to start the connection: "+o),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(o)}}async _getNegotiationResponse(n){const s={},[o,c]=ur();s[o]=c;const u=this._resolveNegotiateUrl(n);this._logger.log(J.Debug,`Sending negotiation request: ${u}.`);try{const p=await this._httpClient.post(u,{content:"",headers:{...s,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(p.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${p.statusCode}'`));const h=JSON.parse(p.content);return(!h.negotiateVersion||h.negotiateVersion<1)&&(h.connectionToken=h.connectionId),h.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new $0("Client didn't negotiate Stateful Reconnect but the server did.")):h}catch(p){let h="Failed to complete negotiation with the server: "+p;return p instanceof so&&p.statusCode===404&&(h=h+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(J.Error,h),Promise.reject(new $0(h))}}_createConnectUrl(n,s){return s?n+(n.indexOf("?")===-1?"?":"&")+`id=${s}`:n}async _createTransport(n,s,o,c){let u=this._createConnectUrl(n,o.connectionToken);if(this._isITransport(s)){this._logger.log(J.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=s,await this._startTransport(u,c),this.connectionId=o.connectionId;return}const p=[],h=o.availableTransports||[];let m=o;for(const g of h){const y=this._resolveTransportOrError(g,s,c,m?.useStatefulReconnect===!0);if(y instanceof Error)p.push(`${g.transport} failed:`),p.push(y);else if(this._isITransport(y)){if(this.transport=y,!m){try{m=await this._getNegotiationResponse(n)}catch(v){return Promise.reject(v)}u=this._createConnectUrl(n,m.connectionToken)}try{await this._startTransport(u,c),this.connectionId=m.connectionId;return}catch(v){if(this._logger.log(J.Error,`Failed to start the transport '${g.transport}': ${v}`),m=void 0,p.push(new cR(`${g.transport} failed: ${v}`,Xt[g.transport])),this._connectionState!=="Connecting"){const S="Failed to select transport before stop() was called.";return this._logger.log(J.Debug,S),Promise.reject(new Pa(S))}}}}return p.length>0?Promise.reject(new uR(`Unable to connect to the server with any of the available transports. ${p.join(" ")}`,p)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(n){switch(n){case Xt.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new zR(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Xt.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new DR(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Xt.LongPolling:return new q0(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${n}.`)}}_startTransport(n,s){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async o=>{let c=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(n,s),await this.features.resend()}catch{c=!0}else{this._stopConnection(o);return}c&&this._stopConnection(o)}:this.transport.onclose=o=>this._stopConnection(o),this.transport.connect(n,s)}_resolveTransportOrError(n,s,o,c){const u=Xt[n.transport];if(u==null)return this._logger.log(J.Debug,`Skipping transport '${n.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${n.transport}' because it is not supported by this client.`);if(UR(s,u))if(n.transferFormats.map(h=>Vn[h]).indexOf(o)>=0){if(u===Xt.WebSockets&&!this._options.WebSocket||u===Xt.ServerSentEvents&&!this._options.EventSource)return this._logger.log(J.Debug,`Skipping transport '${Xt[u]}' because it is not supported in your environment.'`),new rR(`'${Xt[u]}' is not supported in your environment.`,u);this._logger.log(J.Debug,`Selecting transport '${Xt[u]}'.`);try{return this.features.reconnect=u===Xt.WebSockets?c:void 0,this._constructTransport(u)}catch(h){return h}}else return this._logger.log(J.Debug,`Skipping transport '${Xt[u]}' because it does not support the requested transfer format '${Vn[o]}'.`),new Error(`'${Xt[u]}' does not support ${Vn[o]}.`);else return this._logger.log(J.Debug,`Skipping transport '${Xt[u]}' because it was disabled by the client.`),new lR(`'${Xt[u]}' is disabled by the client.`,u)}_isITransport(n){return n&&typeof n=="object"&&"connect"in n}_stopConnection(n){if(this._logger.log(J.Debug,`HttpConnection.stopConnection(${n}) called while in state ${this._connectionState}.`),this.transport=void 0,n=this._stopError||n,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(J.Debug,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(J.Warning,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${n}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),n?this._logger.log(J.Error,`Connection disconnected with error '${n}'.`):this._logger.log(J.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(s=>{this._logger.log(J.Error,`TransportSendQueue.stop() threw error '${s}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(n)}catch(s){this._logger.log(J.Error,`HttpConnection.onclose(${n}) threw error '${s}'.`)}}}_resolveUrl(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(!qt.isBrowser)throw new Error(`Cannot resolve '${n}'.`);const s=window.document.createElement("a");return s.href=n,this._logger.log(J.Information,`Normalizing '${n}' to '${s.href}'.`),s.href}_resolveNegotiateUrl(n){const s=new URL(n);s.pathname.endsWith("/")?s.pathname+="negotiate":s.pathname+="/negotiate";const o=new URLSearchParams(s.searchParams);return o.has("negotiateVersion")||o.append("negotiateVersion",this._negotiateVersion.toString()),o.has("useStatefulReconnect")?o.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&o.append("useStatefulReconnect","true"),s.search=o.toString(),s.toString()}}function UR(t,n){return!t||(n&t)!==0}class Rm{constructor(n){this._transport=n,this._buffer=[],this._executing=!0,this._sendBufferedData=new vu,this._transportResult=new vu,this._sendLoopPromise=this._sendLoop()}send(n){return this._bufferData(n),this._transportResult||(this._transportResult=new vu),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(n){if(this._buffer.length&&typeof this._buffer[0]!=typeof n)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof n}`);this._buffer.push(n),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new vu;const n=this._transportResult;this._transportResult=void 0;const s=typeof this._buffer[0]=="string"?this._buffer.join(""):Rm._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(s),n.resolve()}catch(o){n.reject(o)}}}static _concatBuffers(n){const s=n.map(u=>u.byteLength).reduce((u,p)=>u+p),o=new Uint8Array(s);let c=0;for(const u of n)o.set(new Uint8Array(u),c),c+=u.byteLength;return o.buffer}}class vu{constructor(){this.promise=new Promise((n,s)=>[this._resolver,this._rejecter]=[n,s])}resolve(){this._resolver()}reject(n){this._rejecter(n)}}const IR="json";class OR{constructor(){this.name=IR,this.version=2,this.transferFormat=Vn.Text}parseMessages(n,s){if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];s===null&&(s=Il.instance);const o=ha.parse(n),c=[];for(const u of o){const p=JSON.parse(u);if(typeof p.type!="number")throw new Error("Invalid payload.");switch(p.type){case We.Invocation:this._isInvocationMessage(p);break;case We.StreamItem:this._isStreamItemMessage(p);break;case We.Completion:this._isCompletionMessage(p);break;case We.Ping:break;case We.Close:break;case We.Ack:this._isAckMessage(p);break;case We.Sequence:this._isSequenceMessage(p);break;default:s.log(J.Information,"Unknown message type '"+p.type+"' ignored.");continue}c.push(p)}return c}writeMessage(n){return ha.write(JSON.stringify(n))}_isInvocationMessage(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message."),n.invocationId!==void 0&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message."),this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}_isAckMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(n,s){if(typeof n!="string"||n==="")throw new Error(s)}}const LR={trace:J.Trace,debug:J.Debug,info:J.Information,information:J.Information,warn:J.Warning,warning:J.Warning,error:J.Error,critical:J.Critical,none:J.None};function PR(t){const n=LR[t.toLowerCase()];if(typeof n<"u")return n;throw new Error(`Unknown log level: ${t}`)}class HR{configureLogging(n){if(gn.isRequired(n,"logging"),$R(n))this.logger=n;else if(typeof n=="string"){const s=PR(n);this.logger=new Vu(s)}else this.logger=new Vu(n);return this}withUrl(n,s){return gn.isRequired(n,"url"),gn.isNotEmpty(n,"url"),this.url=n,typeof s=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...s}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:s},this}withHubProtocol(n){return gn.isRequired(n,"protocol"),this.protocol=n,this}withAutomaticReconnect(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return n?Array.isArray(n)?this.reconnectPolicy=new F0(n):this.reconnectPolicy=n:this.reconnectPolicy=new F0,this}withServerTimeout(n){return gn.isRequired(n,"milliseconds"),this._serverTimeoutInMilliseconds=n,this}withKeepAliveInterval(n){return gn.isRequired(n,"milliseconds"),this._keepAliveIntervalInMilliseconds=n,this}withStatefulReconnect(n){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=n?.bufferSize,this}build(){const n=this.httpConnectionOptions||{};if(n.logger===void 0&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const s=new BR(this.url,n);return Am.create(s,this.logger||Il.instance,this.protocol||new OR,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function $R(t){return t.log!==void 0}class VR{connection=null;eventHandlers={};reconnectAttempts=0;maxReconnectAttempts=5;isManualDisconnect=!1;constructor(){const s="https://your-domain.com/api".replace("/api","/hubs/chat");this.connection=new HR().withUrl(s,{accessTokenFactory:()=>localStorage.getItem("token")||"",skipNegotiation:!1,withCredentials:!0,transport:Xt.WebSockets|Xt.ServerSentEvents|Xt.LongPolling}).withAutomaticReconnect({nextRetryDelayInMilliseconds:o=>o.previousRetryCount>=this.maxReconnectAttempts?null:Math.min(1e3*Math.pow(2,o.previousRetryCount),32e3)}).configureLogging(J.Information).build(),this.setupConnectionHandlers(),this.setupEventListeners()}setupConnectionHandlers(){this.connection&&(this.connection.onreconnecting(n=>{console.warn("SignalR reconnecting...",n),this.reconnectAttempts++}),this.connection.onreconnected(n=>{console.log("SignalR reconnected:",n),this.reconnectAttempts=0,this.rejoinChats()}),this.connection.onclose(n=>{console.error("SignalR connection closed:",n),!this.isManualDisconnect&&this.reconnectAttempts<this.maxReconnectAttempts&&setTimeout(()=>this.start(),5e3)}))}setupEventListeners(){this.connection&&(this.connection.on("UserOnline",n=>{console.log("[SignalR] UserOnline event received:",n),this.eventHandlers.onUserOnline?.(n)}),this.connection.on("UserOffline",n=>{console.log("[SignalR] UserOffline event received:",n),this.eventHandlers.onUserOffline?.(n)}),this.connection.on("ReceiveMessage",n=>{this.eventHandlers.onReceiveMessage?.(n)}),this.connection.on("MessageEdited",n=>{this.eventHandlers.onMessageEdited?.(n)}),this.connection.on("MessageDeleted",n=>{this.eventHandlers.onMessageDeleted?.(n)}),this.connection.on("ReactionAdded",n=>{console.log("[SignalR] ReactionAdded event received:",n),this.eventHandlers.onReactionAdded?.(n)}),this.connection.on("ReactionRemoved",n=>{console.log("[SignalR] ReactionRemoved event received:",n),this.eventHandlers.onReactionRemoved?.(n)}),this.connection.on("UserTyping",n=>{this.eventHandlers.onUserTyping?.(n)}),this.connection.on("UserStoppedTyping",n=>{this.eventHandlers.onUserStoppedTyping?.(n)}),this.connection.on("NewNotification",n=>{this.eventHandlers.onNewNotification?.(n)}),this.connection.on("NotificationsMarkedSeen",n=>{this.eventHandlers.onNotificationsMarkedSeen?.(n)}),this.connection.on("MessagePinned",n=>{this.eventHandlers.onMessagePinned?.(n)}),this.connection.on("MessageUnpinned",n=>{this.eventHandlers.onMessageUnpinned?.(n)}),this.connection.on("AddedToChat",n=>{console.log("[SignalR] AddedToChat:",n),this.eventHandlers.onAddedToChat?.(n)}),this.connection.on("NewConversation",n=>{console.log("[SignalR] NewConversation:",n),this.eventHandlers.onNewConversation?.(n)}),this.connection.on("ConversationCreated",n=>{console.log("[SignalR] ConversationCreated:",n),this.eventHandlers.onConversationCreated?.(n)}),this.connection.on("PermissionGranted",n=>{console.log("[SignalR] PermissionGranted:",n),this.eventHandlers.onPermissionGranted?.(n)}),this.connection.on("PermissionRevoked",n=>{console.log("[SignalR] PermissionRevoked:",n),this.eventHandlers.onPermissionRevoked?.(n)}),this.connection.on("AllPermissionsRevoked",n=>{console.log("[SignalR] AllPermissionsRevoked:",n),this.eventHandlers.onAllPermissionsRevoked?.(n)}),this.connection.on("UserBlockedYou",n=>{console.log("[SignalR] UserBlockedYou:",n),this.eventHandlers.onUserBlockedYou?.(n)}),this.connection.on("YouBlockedUser",n=>{console.log("[SignalR] YouBlockedUser:",n),this.eventHandlers.onYouBlockedUser?.(n)}),this.connection.on("UserUnblockedYou",n=>{console.log("[SignalR] UserUnblockedYou:",n),this.eventHandlers.onUserUnblockedYou?.(n)}),this.connection.on("YouUnblockedUser",n=>{console.log("[SignalR] YouUnblockedUser:",n),this.eventHandlers.onYouUnblockedUser?.(n)}),this.connection.on("ChatDeleted",n=>{console.log("[SignalR] ChatDeleted:",n),this.eventHandlers.onChatDeleted?.(n)}),this.connection.on("RemovedFromChat",n=>{console.log("[SignalR] RemovedFromChat:",n),this.eventHandlers.onRemovedFromChat?.(n)}),this.connection.on("MessagesMarkedSeen",n=>{console.log("[SignalR] MessagesMarkedSeen:",n),this.eventHandlers.onMessagesMarkedSeen?.(n)}),this.connection.on("Error",n=>{console.error("SignalR Error:",n),this.eventHandlers.onError?.(n)}))}setEventHandlers(n){this.eventHandlers={...this.eventHandlers,...n}}async start(){if(this.connection)try{this.connection.state===St.Disconnected&&(this.isManualDisconnect=!1,await this.connection.start(),console.log("SignalR Connected:",this.connection.connectionId))}catch(n){throw console.error("Error starting SignalR connection:",n),n}}async getPresenceStates(n){if(!this.connection||this.connection.state!==St.Connected)return console.warn("Cannot fetch presence states: not connected"),{};try{const s=await this.connection.invoke("GetPresenceStates",n);return console.log(`Fetched initial presence states for ${n.length} users`),s}catch(s){return console.error("Error fetching presence states:",s),{}}}async stop(){if(this.connection)try{this.isManualDisconnect=!0,await this.connection.stop(),console.log("SignalR Disconnected")}catch(n){console.error("Error stopping SignalR connection:",n)}}getConnectionState(){return this.connection?.state||St.Disconnected}isConnected(){return this.connection?.state===St.Connected}activeChats=new Set;async joinChat(n){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("JoinChat",n),this.activeChats.add(n),console.log("Joined chat:",n)}catch(s){throw console.error("Error joining chat:",s),s}}async leaveChat(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("LeaveChat",n),this.activeChats.delete(n),console.log("Left chat:",n)}catch(s){console.error("Error leaving chat:",s)}}async rejoinChats(){const n=Array.from(this.activeChats);for(const s of n)try{await this.connection?.invoke("JoinChat",s)}catch(o){console.error("Error rejoining chat:",s,o)}}async sendMessage(n,s,o=null,c=null){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("SendMessage",{chatId:n,content:s,receiverId:o,replyId:c})}catch(u){throw console.error("Error sending message:",u),u}}async editMessage(n,s,o){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("EditMessage",n,s,o)}catch(c){throw console.error("Error editing message:",c),c}}async deleteMessage(n,s){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("DeleteMessage",n,s)}catch(o){throw console.error("Error deleting message:",o),o}}async addReaction(n,s,o){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("AddReaction",n,s,o)}catch(c){throw console.error("Error adding reaction:",c),c}}async removeReaction(n,s){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("RemoveReaction",n,s)}catch(o){throw console.error("Error removing reaction:",o),o}}async sendTyping(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("Typing",n)}catch(s){console.error("Error sending typing indicator:",s)}}async sendStopTyping(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("StopTyping",n)}catch(s){console.error("Error sending stop typing indicator:",s)}}async markNotificationsAsSeen(n){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("MarkAsSeen",n)}catch(s){throw console.error("Error marking notifications as seen:",s),s}}markSeenDebounceTimers=new Map;async markMessagesAsSeen(n){if(!this.connection||!this.isConnected())return;const s=this.markSeenDebounceTimers.get(n);return s&&clearTimeout(s),new Promise(o=>{const c=setTimeout(async()=>{if(this.markSeenDebounceTimers.delete(n),!this.connection||!this.isConnected()){o();return}try{await this.connection.invoke("MarkMessagesAsSeen",n)}catch(u){u?.message?.includes("connection being closed")||console.error("Error marking messages as seen:",u)}o()},300);this.markSeenDebounceTimers.set(n,c)})}}const tt=new VR,Nh=Object.freeze(Object.defineProperty({__proto__:null,signalRService:tt},Symbol.toStringTag,{value:"Module"})),FR=t=>{const[n,s]=b.useState(tt.getConnectionState()),[o,c]=b.useState(tt.isConnected());return b.useEffect(()=>{const u=setInterval(()=>{s(tt.getConnectionState()),c(tt.isConnected())},1e3);return()=>clearInterval(u)},[t]),{connectionState:n,isConnected:o,joinChat:tt.joinChat.bind(tt),leaveChat:tt.leaveChat.bind(tt),sendMessage:tt.sendMessage.bind(tt),editMessage:tt.editMessage.bind(tt),deleteMessage:tt.deleteMessage.bind(tt),addReaction:tt.addReaction.bind(tt),removeReaction:tt.removeReaction.bind(tt),sendTyping:tt.sendTyping.bind(tt),sendStopTyping:tt.sendStopTyping.bind(tt),markNotificationsAsSeen:tt.markNotificationsAsSeen.bind(tt),markMessagesAsSeen:tt.markMessagesAsSeen.bind(tt),getPresenceStates:tt.getPresenceStates.bind(tt)}};var qf={exports:{}},Gf,W0;function qR(){if(W0)return Gf;W0=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Gf=t,Gf}var Wf,Y0;function GR(){if(Y0)return Wf;Y0=1;var t=qR();function n(){}function s(){}return s.resetWarningCache=n,Wf=function(){function o(p,h,m,g,y,v){if(v!==t){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}o.isRequired=o;function c(){return o}var u={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:c,element:o,elementType:o,instanceOf:c,node:o,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:s,resetWarningCache:n};return u.PropTypes=u,u},Wf}var X0;function WR(){return X0||(X0=1,qf.exports=GR()()),qf.exports}var YR=WR();const Dt=xb(YR);function lo(t,n,s,o){function c(u){return u instanceof s?u:new s(function(p){p(u)})}return new(s||(s=Promise))(function(u,p){function h(y){try{g(o.next(y))}catch(v){p(v)}}function m(y){try{g(o.throw(y))}catch(v){p(v)}}function g(y){y.done?u(y.value):c(y.value).then(h,m)}g((o=o.apply(t,n||[])).next())})}const XR=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function dr(t,n,s){const o=KR(t),{webkitRelativePath:c}=t,u=typeof n=="string"?n:typeof c=="string"&&c.length>0?c:`./${t.name}`;return typeof o.path!="string"&&K0(o,"path",u),K0(o,"relativePath",u),o}function KR(t){const{name:n}=t;if(n&&n.lastIndexOf(".")!==-1&&!t.type){const o=n.split(".").pop().toLowerCase(),c=XR.get(o);c&&Object.defineProperty(t,"type",{value:c,writable:!1,configurable:!1,enumerable:!0})}return t}function K0(t,n,s){Object.defineProperty(t,n,{value:s,writable:!1,configurable:!1,enumerable:!0})}const QR=[".DS_Store","Thumbs.db"];function ZR(t){return lo(this,void 0,void 0,function*(){return Fu(t)&&JR(t.dataTransfer)?aN(t.dataTransfer,t.type):eN(t)?tN(t):Array.isArray(t)&&t.every(n=>"getFile"in n&&typeof n.getFile=="function")?nN(t):[]})}function JR(t){return Fu(t)}function eN(t){return Fu(t)&&Fu(t.target)}function Fu(t){return typeof t=="object"&&t!==null}function tN(t){return Dh(t.target.files).map(n=>dr(n))}function nN(t){return lo(this,void 0,void 0,function*(){return(yield Promise.all(t.map(s=>s.getFile()))).map(s=>dr(s))})}function aN(t,n){return lo(this,void 0,void 0,function*(){if(t.items){const s=Dh(t.items).filter(c=>c.kind==="file");if(n!=="drop")return s;const o=yield Promise.all(s.map(sN));return Q0(US(o))}return Q0(Dh(t.files).map(s=>dr(s)))})}function Q0(t){return t.filter(n=>QR.indexOf(n.name)===-1)}function Dh(t){if(t===null)return[];const n=[];for(let s=0;s<t.length;s++){const o=t[s];n.push(o)}return n}function sN(t){if(typeof t.webkitGetAsEntry!="function")return Z0(t);const n=t.webkitGetAsEntry();return n&&n.isDirectory?IS(n):Z0(t,n)}function US(t){return t.reduce((n,s)=>[...n,...Array.isArray(s)?US(s):[s]],[])}function Z0(t,n){return lo(this,void 0,void 0,function*(){var s;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const u=yield t.getAsFileSystemHandle();if(u===null)throw new Error(`${t} is not a File`);if(u!==void 0){const p=yield u.getFile();return p.handle=u,dr(p)}}const o=t.getAsFile();if(!o)throw new Error(`${t} is not a File`);return dr(o,(s=n?.fullPath)!==null&&s!==void 0?s:void 0)})}function iN(t){return lo(this,void 0,void 0,function*(){return t.isDirectory?IS(t):oN(t)})}function IS(t){const n=t.createReader();return new Promise((s,o)=>{const c=[];function u(){n.readEntries(p=>lo(this,void 0,void 0,function*(){if(p.length){const h=Promise.all(p.map(iN));c.push(h),u()}else try{const h=yield Promise.all(c);s(h)}catch(h){o(h)}}),p=>{o(p)})}u()})}function oN(t){return lo(this,void 0,void 0,function*(){return new Promise((n,s)=>{t.file(o=>{const c=dr(o,t.fullPath);n(c)},o=>{s(o)})})})}var bu={},J0;function rN(){return J0||(J0=1,bu.__esModule=!0,bu.default=function(t,n){if(t&&n){var s=Array.isArray(n)?n:n.split(",");if(s.length===0)return!0;var o=t.name||"",c=(t.type||"").toLowerCase(),u=c.replace(/\/.*$/,"");return s.some(function(p){var h=p.trim().toLowerCase();return h.charAt(0)==="."?o.toLowerCase().endsWith(h):h.endsWith("/*")?u===h.replace(/\/.*$/,""):c===h})}return!0}),bu}var lN=rN();const Yf=xb(lN);function eb(t){return dN(t)||uN(t)||LS(t)||cN()}function cN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uN(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dN(t){if(Array.isArray(t))return zh(t)}function tb(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),s.push.apply(s,o)}return s}function nb(t){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?tb(Object(s),!0).forEach(function(o){OS(t,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):tb(Object(s)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(s,o))})}return t}function OS(t,n,s){return n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,t}function Ll(t,n){return hN(t)||fN(t,n)||LS(t,n)||pN()}function pN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LS(t,n){if(t){if(typeof t=="string")return zh(t,n);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return zh(t,n)}}function zh(t,n){(n==null||n>t.length)&&(n=t.length);for(var s=0,o=new Array(n);s<n;s++)o[s]=t[s];return o}function fN(t,n){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var o=[],c=!0,u=!1,p,h;try{for(s=s.call(t);!(c=(p=s.next()).done)&&(o.push(p.value),!(n&&o.length===n));c=!0);}catch(m){u=!0,h=m}finally{try{!c&&s.return!=null&&s.return()}finally{if(u)throw h}}return o}}function hN(t){if(Array.isArray(t))return t}var mN=typeof Yf=="function"?Yf:Yf.default,gN="file-invalid-type",yN="file-too-large",xN="file-too-small",vN="too-many-files",bN=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=n.split(","),o=s.length>1?"one of ".concat(s.join(", ")):s[0];return{code:gN,message:"File type must be ".concat(o)}},ab=function(n){return{code:yN,message:"File is larger than ".concat(n," ").concat(n===1?"byte":"bytes")}},sb=function(n){return{code:xN,message:"File is smaller than ".concat(n," ").concat(n===1?"byte":"bytes")}},SN={code:vN,message:"Too many files"};function PS(t,n){var s=t.type==="application/x-moz-file"||mN(t,n);return[s,s?null:bN(n)]}function HS(t,n,s){if(Qi(t.size))if(Qi(n)&&Qi(s)){if(t.size>s)return[!1,ab(s)];if(t.size<n)return[!1,sb(n)]}else{if(Qi(n)&&t.size<n)return[!1,sb(n)];if(Qi(s)&&t.size>s)return[!1,ab(s)]}return[!0,null]}function Qi(t){return t!=null}function wN(t){var n=t.files,s=t.accept,o=t.minSize,c=t.maxSize,u=t.multiple,p=t.maxFiles,h=t.validator;return!u&&n.length>1||u&&p>=1&&n.length>p?!1:n.every(function(m){var g=PS(m,s),y=Ll(g,1),v=y[0],S=HS(m,o,c),j=Ll(S,1),C=j[0],T=h?h(m):null;return v&&C&&!T})}function qu(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Su(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(n){return n==="Files"||n==="application/x-moz-file"}):!!t.target&&!!t.target.files}function ib(t){t.preventDefault()}function _N(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function CN(t){return t.indexOf("Edge/")!==-1}function jN(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return _N(t)||CN(t)}function es(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return function(o){for(var c=arguments.length,u=new Array(c>1?c-1:0),p=1;p<c;p++)u[p-1]=arguments[p];return n.some(function(h){return!qu(o)&&h&&h.apply(void 0,[o].concat(u)),qu(o)})}}function TN(){return"showOpenFilePicker"in window}function kN(t){if(Qi(t)){var n=Object.entries(t).filter(function(s){var o=Ll(s,2),c=o[0],u=o[1],p=!0;return $S(c)||(console.warn('Skipped "'.concat(c,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),p=!1),(!Array.isArray(u)||!u.every(VS))&&(console.warn('Skipped "'.concat(c,'" because an invalid file extension was provided.')),p=!1),p}).reduce(function(s,o){var c=Ll(o,2),u=c[0],p=c[1];return nb(nb({},s),{},OS({},u,p))},{});return[{description:"Files",accept:n}]}return t}function MN(t){if(Qi(t))return Object.entries(t).reduce(function(n,s){var o=Ll(s,2),c=o[0],u=o[1];return[].concat(eb(n),[c],eb(u))},[]).filter(function(n){return $S(n)||VS(n)}).join(",")}function EN(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function AN(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function $S(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function VS(t){return/^.*\.[\w]+$/.test(t)}var RN=["children"],NN=["open"],DN=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],zN=["refKey","onChange","onClick"];function BN(t){return ON(t)||IN(t)||FS(t)||UN()}function UN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IN(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ON(t){if(Array.isArray(t))return Bh(t)}function Xf(t,n){return HN(t)||PN(t,n)||FS(t,n)||LN()}function LN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FS(t,n){if(t){if(typeof t=="string")return Bh(t,n);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Bh(t,n)}}function Bh(t,n){(n==null||n>t.length)&&(n=t.length);for(var s=0,o=new Array(n);s<n;s++)o[s]=t[s];return o}function PN(t,n){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var o=[],c=!0,u=!1,p,h;try{for(s=s.call(t);!(c=(p=s.next()).done)&&(o.push(p.value),!(n&&o.length===n));c=!0);}catch(m){u=!0,h=m}finally{try{!c&&s.return!=null&&s.return()}finally{if(u)throw h}}return o}}function HN(t){if(Array.isArray(t))return t}function ob(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),s.push.apply(s,o)}return s}function Ft(t){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?ob(Object(s),!0).forEach(function(o){Uh(t,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ob(Object(s)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(s,o))})}return t}function Uh(t,n,s){return n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,t}function Gu(t,n){if(t==null)return{};var s=$N(t,n),o,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(c=0;c<u.length;c++)o=u[c],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(s[o]=t[o])}return s}function $N(t,n){if(t==null)return{};var s={},o=Object.keys(t),c,u;for(u=0;u<o.length;u++)c=o[u],!(n.indexOf(c)>=0)&&(s[c]=t[c]);return s}var Nm=b.forwardRef(function(t,n){var s=t.children,o=Gu(t,RN),c=GS(o),u=c.open,p=Gu(c,NN);return b.useImperativeHandle(n,function(){return{open:u}},[u]),La.createElement(b.Fragment,null,s(Ft(Ft({},p),{},{open:u})))});Nm.displayName="Dropzone";var qS={disabled:!1,getFilesFromEvent:ZR,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Nm.defaultProps=qS;Nm.propTypes={children:Dt.func,accept:Dt.objectOf(Dt.arrayOf(Dt.string)),multiple:Dt.bool,preventDropOnDocument:Dt.bool,noClick:Dt.bool,noKeyboard:Dt.bool,noDrag:Dt.bool,noDragEventsBubbling:Dt.bool,minSize:Dt.number,maxSize:Dt.number,maxFiles:Dt.number,disabled:Dt.bool,getFilesFromEvent:Dt.func,onFileDialogCancel:Dt.func,onFileDialogOpen:Dt.func,useFsAccessApi:Dt.bool,autoFocus:Dt.bool,onDragEnter:Dt.func,onDragLeave:Dt.func,onDragOver:Dt.func,onDrop:Dt.func,onDropAccepted:Dt.func,onDropRejected:Dt.func,onError:Dt.func,validator:Dt.func};var Ih={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function GS(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=Ft(Ft({},qS),t),s=n.accept,o=n.disabled,c=n.getFilesFromEvent,u=n.maxSize,p=n.minSize,h=n.multiple,m=n.maxFiles,g=n.onDragEnter,y=n.onDragLeave,v=n.onDragOver,S=n.onDrop,j=n.onDropAccepted,C=n.onDropRejected,T=n.onFileDialogCancel,E=n.onFileDialogOpen,z=n.useFsAccessApi,L=n.autoFocus,R=n.preventDropOnDocument,X=n.noClick,P=n.noKeyboard,te=n.noDrag,re=n.noDragEventsBubbling,Q=n.onError,ge=n.validator,me=b.useMemo(function(){return MN(s)},[s]),Pe=b.useMemo(function(){return kN(s)},[s]),qe=b.useMemo(function(){return typeof E=="function"?E:rb},[E]),Qe=b.useMemo(function(){return typeof T=="function"?T:rb},[T]),Re=b.useRef(null),Te=b.useRef(null),B=b.useReducer(VN,Ih),ne=Xf(B,2),le=ne[0],Se=ne[1],He=le.isFocused,we=le.isFileDialogActive,Ae=b.useRef(typeof window<"u"&&window.isSecureContext&&z&&TN()),je=function(){!Ae.current&&we&&setTimeout(function(){if(Te.current){var ue=Te.current.files;ue.length||(Se({type:"closeDialog"}),Qe())}},300)};b.useEffect(function(){return window.addEventListener("focus",je,!1),function(){window.removeEventListener("focus",je,!1)}},[Te,we,Qe,Ae]);var ie=b.useRef([]),_e=function(ue){Re.current&&Re.current.contains(ue.target)||(ue.preventDefault(),ie.current=[])};b.useEffect(function(){return R&&(document.addEventListener("dragover",ib,!1),document.addEventListener("drop",_e,!1)),function(){R&&(document.removeEventListener("dragover",ib),document.removeEventListener("drop",_e))}},[Re,R]),b.useEffect(function(){return!o&&L&&Re.current&&Re.current.focus(),function(){}},[Re,L,o]);var he=b.useCallback(function(oe){Q?Q(oe):console.error(oe)},[Q]),_t=b.useCallback(function(oe){oe.preventDefault(),oe.persist(),at(oe),ie.current=[].concat(BN(ie.current),[oe.target]),Su(oe)&&Promise.resolve(c(oe)).then(function(ue){if(!(qu(oe)&&!re)){var dt=ue.length,ct=dt>0&&wN({files:ue,accept:me,minSize:p,maxSize:u,multiple:h,maxFiles:m,validator:ge}),Ut=dt>0&&!ct;Se({isDragAccept:ct,isDragReject:Ut,isDragActive:!0,type:"setDraggedFiles"}),g&&g(oe)}}).catch(function(ue){return he(ue)})},[c,g,he,re,me,p,u,h,m,ge]),Ct=b.useCallback(function(oe){oe.preventDefault(),oe.persist(),at(oe);var ue=Su(oe);if(ue&&oe.dataTransfer)try{oe.dataTransfer.dropEffect="copy"}catch{}return ue&&v&&v(oe),!1},[v,re]),Bt=b.useCallback(function(oe){oe.preventDefault(),oe.persist(),at(oe);var ue=ie.current.filter(function(ct){return Re.current&&Re.current.contains(ct)}),dt=ue.indexOf(oe.target);dt!==-1&&ue.splice(dt,1),ie.current=ue,!(ue.length>0)&&(Se({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Su(oe)&&y&&y(oe))},[Re,y,re]),jt=b.useCallback(function(oe,ue){var dt=[],ct=[];oe.forEach(function(Ut){var xn=PS(Ut,me),$=Xf(xn,2),Y=$[0],I=$[1],pe=HS(Ut,p,u),ye=Xf(pe,2),Oe=ye[0],ut=ye[1],On=ge?ge(Ut):null;if(Y&&Oe&&!On)dt.push(Ut);else{var ma=[I,ut];On&&(ma=ma.concat(On)),ct.push({file:Ut,errors:ma.filter(function(Kn){return Kn})})}}),(!h&&dt.length>1||h&&m>=1&&dt.length>m)&&(dt.forEach(function(Ut){ct.push({file:Ut,errors:[SN]})}),dt.splice(0)),Se({acceptedFiles:dt,fileRejections:ct,isDragReject:ct.length>0,type:"setFiles"}),S&&S(dt,ct,ue),ct.length>0&&C&&C(ct,ue),dt.length>0&&j&&j(dt,ue)},[Se,h,me,p,u,m,S,j,C,ge]),rn=b.useCallback(function(oe){oe.preventDefault(),oe.persist(),at(oe),ie.current=[],Su(oe)&&Promise.resolve(c(oe)).then(function(ue){qu(oe)&&!re||jt(ue,oe)}).catch(function(ue){return he(ue)}),Se({type:"reset"})},[c,jt,he,re]),Tt=b.useCallback(function(){if(Ae.current){Se({type:"openDialog"}),qe();var oe={multiple:h,types:Pe};window.showOpenFilePicker(oe).then(function(ue){return c(ue)}).then(function(ue){jt(ue,null),Se({type:"closeDialog"})}).catch(function(ue){EN(ue)?(Qe(ue),Se({type:"closeDialog"})):AN(ue)?(Ae.current=!1,Te.current?(Te.current.value=null,Te.current.click()):he(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):he(ue)});return}Te.current&&(Se({type:"openDialog"}),qe(),Te.current.value=null,Te.current.click())},[Se,qe,Qe,z,jt,he,Pe,h]),ln=b.useCallback(function(oe){!Re.current||!Re.current.isEqualNode(oe.target)||(oe.key===" "||oe.key==="Enter"||oe.keyCode===32||oe.keyCode===13)&&(oe.preventDefault(),Tt())},[Re,Tt]),gt=b.useCallback(function(){Se({type:"focus"})},[]),In=b.useCallback(function(){Se({type:"blur"})},[]),ft=b.useCallback(function(){X||(jN()?setTimeout(Tt,0):Tt())},[X,Tt]),xt=function(ue){return o?null:ue},Vt=function(ue){return P?null:xt(ue)},yn=function(ue){return te?null:xt(ue)},at=function(ue){re&&ue.stopPropagation()},Qt=b.useMemo(function(){return function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ue=oe.refKey,dt=ue===void 0?"ref":ue,ct=oe.role,Ut=oe.onKeyDown,xn=oe.onFocus,$=oe.onBlur,Y=oe.onClick,I=oe.onDragEnter,pe=oe.onDragOver,ye=oe.onDragLeave,Oe=oe.onDrop,ut=Gu(oe,DN);return Ft(Ft(Uh({onKeyDown:Vt(es(Ut,ln)),onFocus:Vt(es(xn,gt)),onBlur:Vt(es($,In)),onClick:xt(es(Y,ft)),onDragEnter:yn(es(I,_t)),onDragOver:yn(es(pe,Ct)),onDragLeave:yn(es(ye,Bt)),onDrop:yn(es(Oe,rn)),role:typeof ct=="string"&&ct!==""?ct:"presentation"},dt,Re),!o&&!P?{tabIndex:0}:{}),ut)}},[Re,ln,gt,In,ft,_t,Ct,Bt,rn,P,te,o]),Zt=b.useCallback(function(oe){oe.stopPropagation()},[]),Gn=b.useMemo(function(){return function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ue=oe.refKey,dt=ue===void 0?"ref":ue,ct=oe.onChange,Ut=oe.onClick,xn=Gu(oe,zN),$=Uh({accept:me,multiple:h,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:xt(es(ct,rn)),onClick:xt(es(Ut,Zt)),tabIndex:-1},dt,Te);return Ft(Ft({},$),xn)}},[Te,s,h,rn,o]);return Ft(Ft({},le),{},{isFocused:He&&!o,getRootProps:Qt,getInputProps:Gn,rootRef:Re,inputRef:Te,open:xt(Tt)})}function VN(t,n){switch(n.type){case"focus":return Ft(Ft({},t),{},{isFocused:!0});case"blur":return Ft(Ft({},t),{},{isFocused:!1});case"openDialog":return Ft(Ft({},Ih),{},{isFileDialogActive:!0});case"closeDialog":return Ft(Ft({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Ft(Ft({},t),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return Ft(Ft({},t),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections,isDragReject:n.isDragReject});case"reset":return Ft({},Ih);default:return t}}function rb(){}const lb=5*1024*1024,FN=["image/png","image/jpeg","image/jpg","image/gif","image/webp"],qN=t=>FN.includes(t.type)?t.size>lb?{valid:!1,error:`File too large. Maximum size is ${WS(lb)}.`}:{valid:!0}:{valid:!1,error:"Invalid file type. Please upload an image (PNG, JPG, GIF, or WEBP)."},WS=t=>{if(t===0)return"0 Bytes";const n=1024,s=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(t)/Math.log(n));return`${Math.round(t/Math.pow(n,o)*100)/100} ${s[o]}`},GN=t=>new Promise((n,s)=>{const o=new FileReader;o.onloadend=()=>{typeof o.result=="string"?n(o.result):s(new Error("Failed to read file"))},o.onerror=()=>{s(new Error("Error reading file"))},o.readAsDataURL(t)}),Dm=({onFileAccepted:t,currentPreview:n,maxSize:s=5*1024*1024,label:o="Upload Image",helperText:c="Drag and drop an image here, or click to browse",disabled:u=!1})=>{const[p,h]=b.useState(n||null),[m,g]=b.useState(null),[y,v]=b.useState(!1),S=b.useCallback(async L=>{g(null),v(!0);const R=L[0];if(!R){v(!1);return}const X=qN(R);if(!X.valid){g(X.error||"Invalid file"),v(!1);return}try{const P=await GN(R);h(P),t(R)}catch(P){g("Failed to process image"),console.error("Error processing image:",P)}finally{v(!1)}},[t]),{getRootProps:j,getInputProps:C,isDragActive:T,isDragReject:E}=GS({onDrop:S,accept:{"image/*":[".png",".jpg",".jpeg",".gif",".webp"]},maxSize:s,multiple:!1,disabled:u||y}),z=L=>{L.stopPropagation(),h(null),g(null)};return r.jsxs("div",{style:{width:"100%"},children:[o&&r.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:600,color:"var(--text)"},children:o}),r.jsxs("div",{...j(),style:{border:`2px dashed ${m||E?"#ff6b6b":T?"var(--accent)":"var(--border)"}`,borderRadius:"12px",padding:p?"0":"32px",textAlign:"center",cursor:u||y?"not-allowed":"pointer",transition:"all 0.3s ease",backgroundColor:T?"var(--background)":p?"transparent":"var(--surface)",position:"relative",opacity:u||y?.6:1},children:[r.jsx("input",{...C()}),p?r.jsxs("div",{style:{position:"relative"},children:[r.jsx("img",{src:p,alt:"Preview",style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"10px"}}),!u&&r.jsx("button",{onClick:z,"aria-label":"Remove image",style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"background 0.2s ease",fontSize:"20px",fontWeight:300,lineHeight:1},onMouseEnter:L=>{L.currentTarget.style.background="rgba(0, 0, 0, 0.9)"},onMouseLeave:L=>{L.currentTarget.style.background="rgba(0, 0, 0, 0.7)"},children:""}),r.jsxs("div",{style:{position:"absolute",bottom:"8px",right:"8px",background:"rgba(76, 175, 80, 0.9)",color:"white",padding:"4px 12px",borderRadius:"16px",fontSize:"12px",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx(Sb,{size:14}),"Image selected"]})]}):r.jsxs("div",{children:[r.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"12px"},children:y?r.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid var(--border)",borderTop:"4px solid var(--accent)",borderRadius:"50%",animation:"spin 1s linear infinite"}}):E||m?r.jsx(Rs,{size:48,color:"#ff6b6b"}):r.jsx(N_,{size:48,color:T?"var(--accent)":"var(--text-muted)"})}),y?r.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"14px",fontWeight:600,color:"var(--text)"},children:"Processing..."}):r.jsxs(r.Fragment,{children:[r.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"14px",fontWeight:600,color:T?"var(--accent)":"var(--text)"},children:E?"Invalid file type":T?"Drop image here":c}),r.jsxs("p",{style:{margin:0,fontSize:"12px",color:"var(--text-muted)"},children:["PNG, JPG, GIF or WEBP (max ",WS(s),")"]})]})]})]}),m&&r.jsxs("div",{style:{marginTop:"8px",padding:"8px 12px",backgroundColor:"#fee",border:"1px solid #fcc",borderRadius:"6px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Rs,{size:16,color:"#ff6b6b"}),r.jsx("span",{style:{fontSize:"13px",color:"#c33"},children:m})]}),r.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},cb=[],id=t=>{const n=Le(h=>h.permissionsLoading),s=Le(h=>h.currentChat),o=wt(h=>h.user),c=Le(h=>t?h.chatPermissions.get(t)??cb:cb),u=(()=>{if(!t||!s||!o)return!1;if(s.createdById===o.id)return!0;const m=s.members?.find(g=>g.userId===o.id)?.role?.toLowerCase();return m==="admin"||m==="owner"})(),p=h=>u?!0:c.includes(h);return s?.type==="dm"?{canSendMessage:!0,canAddUsers:!1,canPinMessages:!0,canManageMessages:!1,canManageBans:!1,canManageChatInfo:!1,canManageUsers:!1,isLoading:!1}:t?{canSendMessage:p("SendMessage"),canAddUsers:p("AddUsers"),canPinMessages:p("PinMessages"),canManageMessages:p("ManageMessages"),canManageBans:p("ManageBans"),canManageChatInfo:p("ManageChatInfo"),canManageUsers:p("ManageUsers"),isLoading:n}:{canSendMessage:!1,canAddUsers:!1,canPinMessages:!1,canManageMessages:!1,canManageBans:!1,canManageChatInfo:!1,canManageUsers:!1,isLoading:!1}},WN="_overlay_1w6vq_69",YN="_fadeIn_1w6vq_1",XN="_closing_1w6vq_85",KN="_fadeOut_1w6vq_1",QN="_modal_1w6vq_90",ZN="_slideUp_1w6vq_1",JN="_slideDown_1w6vq_1",e4="_header_1w6vq_109",t4="_headerContent_1w6vq_118",n4="_headerIcon_1w6vq_124",a4="_title_1w6vq_136",s4="_subtitle_1w6vq_144",i4="_closeBtn_1w6vq_150",o4="_content_1w6vq_173",r4="_userCard_1w6vq_197",l4="_userAvatar_1w6vq_208",c4="_userInfo_1w6vq_229",u4="_userName_1w6vq_234",d4="_userRole_1w6vq_241",p4="_roleBadge_1w6vq_246",f4="_admin_1w6vq_255",h4="_moderator_1w6vq_261",m4="_member_1w6vq_267",g4="_permissionStats_1w6vq_273",y4="_statNumber_1w6vq_281",x4="_statLabel_1w6vq_287",v4="_loadingState_1w6vq_293",b4="_loadingSpinner_1w6vq_298",S4="_spin_1w6vq_302",w4="_skeletonList_1w6vq_313",_4="_skeletonItem_1w6vq_319",C4="_skeletonIcon_1w6vq_329",j4="_shimmer_1w6vq_1",T4="_skeletonText_1w6vq_338",k4="_skeletonLine_1w6vq_342",M4="_skeletonToggle_1w6vq_355",E4="_permissionsList_1w6vq_365",A4="_category_1w6vq_372",R4="_categoryHeader_1w6vq_376",N4="_categoryLabel_1w6vq_384",D4="_categoryCount_1w6vq_392",z4="_categoryItems_1w6vq_398",B4="_permissionItem_1w6vq_405",U4="_granted_1w6vq_421",I4="_updating_1w6vq_431",O4="_permissionIcon_1w6vq_436",L4="_permissionInfo_1w6vq_454",P4="_permissionLabel_1w6vq_459",H4="_permissionDescription_1w6vq_466",$4="_toggleSwitch_1w6vq_473",V4="_toggleTrack_1w6vq_483",F4="_on_1w6vq_492",q4="_toggleThumb_1w6vq_497",G4="_footer_1w6vq_523",W4="_footerInfo_1w6vq_532",Y4="_doneButton_1w6vq_544",X4="_pulse_1w6vq_1",Be={overlay:WN,fadeIn:YN,closing:XN,fadeOut:KN,modal:QN,slideUp:ZN,slideDown:JN,header:e4,headerContent:t4,headerIcon:n4,title:a4,subtitle:s4,closeBtn:i4,content:o4,userCard:r4,userAvatar:l4,userInfo:c4,userName:u4,userRole:d4,roleBadge:p4,admin:f4,moderator:h4,member:m4,permissionStats:g4,statNumber:y4,statLabel:x4,loadingState:v4,loadingSpinner:b4,spin:S4,skeletonList:w4,skeletonItem:_4,skeletonIcon:C4,shimmer:j4,skeletonText:T4,skeletonLine:k4,skeletonToggle:M4,permissionsList:E4,category:A4,categoryHeader:R4,categoryLabel:N4,categoryCount:D4,categoryItems:z4,permissionItem:B4,granted:U4,updating:I4,permissionIcon:O4,permissionInfo:L4,permissionLabel:P4,permissionDescription:H4,toggleSwitch:$4,toggleTrack:V4,on:F4,toggleThumb:q4,footer:G4,footerInfo:W4,doneButton:Y4,pulse:X4},ub=[{name:"SendMessage",label:"Send Messages",description:"Allow sending messages in this chat",icon:r.jsx(Ml,{size:18}),category:"messaging"},{name:"ManageMessages",label:"Manage Messages",description:"Edit or delete messages from other users",icon:r.jsx(nh,{size:18}),category:"moderation"},{name:"AddUsers",label:"Add Users",description:"Invite new members to this chat",icon:r.jsx(bl,{size:18}),category:"management"},{name:"ManageUsers",label:"Manage Users",description:"Remove members and manage their roles",icon:r.jsx(wn,{size:18}),category:"management"},{name:"ManageChatInfo",label:"Manage Chat Info",description:"Edit chat name, description, and avatar",icon:r.jsx(nh,{size:18}),category:"management"},{name:"ManageBans",label:"Manage Bans",description:"Ban or unban users from this chat",icon:r.jsx(As,{size:18}),category:"moderation"},{name:"PinMessages",label:"Pin Messages",description:"Pin important messages for all members",icon:r.jsx(Al,{size:18}),category:"messaging"}],Kf={messaging:{label:"Messaging",order:1},moderation:{label:"Moderation",order:2},management:{label:"Management",order:3}},zm=({isOpen:t,onClose:n,chatId:s,member:o,onPermissionsChanged:c})=>{const[u,p]=b.useState([]),[h,m]=b.useState(!1),[g,y]=b.useState(null),[v,S]=b.useState(!1);b.useEffect(()=>{t&&(j(),S(!1))},[t,s,o.userId]);const j=async()=>{m(!0);try{const{permissionService:P}=await zt(async()=>{const{permissionService:ge}=await import("./permission.service-CpK74LNc.js");return{permissionService:ge}},__vite__mapDeps([0,1,2])),te=await P.getUserPermissions(s,o.userId),re=te?.permissions||te,Q=Array.isArray(re)?re.map(ge=>ge.permissionName||ge.name||ge):[];p(Q)}catch(P){console.error("Failed to load permissions:",P),p([])}finally{m(!1)}},C=async P=>{const te=u.includes(P);y(P);const Q=wt.getState().user?.id===o.userId;try{const{permissionService:ge}=await zt(async()=>{const{permissionService:me}=await import("./permission.service-CpK74LNc.js");return{permissionService:me}},__vite__mapDeps([0,1,2]));te?(await ge.revokePermission(s,o.userId,P),p(u.filter(me=>me!==P)),Q&&Le.getState().revokePermission(s,P)):(await ge.grantPermission(s,o.userId,P),p([...u,P]),Q&&Le.getState().grantPermission(s,P)),await c()}catch(ge){console.error("Failed to update permission:",ge)}finally{y(null)}},T=()=>{S(!0),setTimeout(()=>{n(),S(!1)},200)};if(!t)return null;const E=P=>P.slice(0,2).toUpperCase(),z=ub.reduce((P,te)=>(P[te.category]||(P[te.category]=[]),P[te.category].push(te),P),{}),L=Object.entries(z).sort(([P],[te])=>Kf[P].order-Kf[te].order),R=u.length,X=ub.length;return r.jsx("div",{className:`${Be.overlay} ${v?Be.closing:""}`,onClick:T,children:r.jsxs("div",{className:`${Be.modal} ${v?Be.closing:""}`,onClick:P=>P.stopPropagation(),children:[r.jsxs("div",{className:Be.header,children:[r.jsxs("div",{className:Be.headerContent,children:[r.jsx("div",{className:Be.headerIcon,children:r.jsx(ir,{size:20})}),r.jsxs("div",{children:[r.jsx("h2",{className:Be.title,children:"Manage Permissions"}),r.jsx("p",{className:Be.subtitle,children:"Configure access for this member"})]})]}),r.jsx("button",{onClick:T,className:Be.closeBtn,"aria-label":"Close",children:""})]}),r.jsxs("div",{className:Be.content,children:[r.jsxs("div",{className:Be.userCard,children:[r.jsx("div",{className:Be.userAvatar,children:o.user.avatarUrl?r.jsx("img",{src:o.user.avatarUrl,alt:o.user.username}):E(o.user.username)}),r.jsxs("div",{className:Be.userInfo,children:[r.jsx("div",{className:Be.userName,children:o.user.username}),r.jsx("div",{className:Be.userRole,children:r.jsx("span",{className:`${Be.roleBadge} ${Be[o.role]}`,children:o.role.charAt(0).toUpperCase()+o.role.slice(1)})})]}),r.jsxs("div",{className:Be.permissionStats,children:[r.jsx("div",{className:Be.statNumber,children:R}),r.jsxs("div",{className:Be.statLabel,children:["of ",X]})]})]}),h?r.jsxs("div",{className:Be.loadingState,children:[r.jsx("div",{className:Be.loadingSpinner,children:r.jsx(sn,{size:32,className:Be.spin})}),r.jsx("p",{children:"Loading permissions..."}),r.jsx("div",{className:Be.skeletonList,children:[1,2,3,4].map(P=>r.jsxs("div",{className:Be.skeletonItem,children:[r.jsx("div",{className:Be.skeletonIcon}),r.jsxs("div",{className:Be.skeletonText,children:[r.jsx("div",{className:Be.skeletonLine,style:{width:"60%"}}),r.jsx("div",{className:Be.skeletonLine,style:{width:"80%"}})]}),r.jsx("div",{className:Be.skeletonToggle})]},P))})]}):r.jsx("div",{className:Be.permissionsList,children:L.map(([P,te],re)=>r.jsxs("div",{className:Be.category,style:{animationDelay:`${re*.1}s`},children:[r.jsxs("div",{className:Be.categoryHeader,children:[r.jsx("span",{className:Be.categoryLabel,children:Kf[P].label}),r.jsxs("span",{className:Be.categoryCount,children:[te.filter(Q=>u.includes(Q.name)).length," / ",te.length]})]}),r.jsx("div",{className:Be.categoryItems,children:te.map((Q,ge)=>{const me=u.includes(Q.name),Pe=g===Q.name;return r.jsxs("div",{className:`${Be.permissionItem} ${me?Be.granted:""} ${Pe?Be.updating:""}`,style:{animationDelay:`${re*.1+ge*.05}s`},children:[r.jsx("div",{className:Be.permissionIcon,children:Q.icon}),r.jsxs("div",{className:Be.permissionInfo,children:[r.jsx("div",{className:Be.permissionLabel,children:Q.label}),r.jsx("div",{className:Be.permissionDescription,children:Q.description})]}),r.jsx("button",{className:`${Be.toggleSwitch} ${me?Be.on:Be.off}`,onClick:()=>C(Q.name),disabled:Pe,children:r.jsx("div",{className:Be.toggleTrack,children:r.jsx("div",{className:Be.toggleThumb,children:Pe&&r.jsx(sn,{size:12,className:Be.spin})})})})]},Q.name)})})]},P))})]}),r.jsxs("div",{className:Be.footer,children:[r.jsxs("div",{className:Be.footerInfo,children:[r.jsx(ir,{size:14}),r.jsx("span",{children:"Changes take effect immediately"})]}),r.jsx("button",{onClick:T,className:Be.doneButton,children:"Done"})]})]})})},G={bg:"#030303",surface:"#080808",surfaceElevated:"#0c0c0c",surfaceHover:"#121212",surfaceActive:"#181818",border:"#1a1a1a",borderLight:"#222222",primary:"#10b981",primaryHover:"#0d9668",primaryMuted:"rgba(16, 185, 129, 0.12)",primaryGlow:"rgba(16, 185, 129, 0.25)",danger:"#ef4444",dangerMuted:"rgba(239, 68, 68, 0.12)",warning:"#f59e0b",warningMuted:"rgba(245, 158, 11, 0.12)",info:"#3b82f6",infoMuted:"rgba(59, 130, 246, 0.12)",text:"#fafafa",textSecondary:"#a1a1aa",textMuted:"#71717a",online:"#22c55e",offline:"#71717a"},K4=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M5.5 3.21V20.8l4.75-4.73 2.99 6.73L15.5 21.6l-3-6.7h6z'/%3E%3Cpath fill='%23064e3b' d='M6.5 5.61v11.68l3.38-3.37.37-.37.48 1.07 1.93 4.35 1.07-.47L11.8 14.1l-.48-1.07H16z'/%3E%3C/svg%3E") 4 2, default`,Q4=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M9 2.5a2.5 2.5 0 0 1 5 0v7.996l3.904-.74a2.095 2.095 0 0 1 2.537 2.466L19.5 17.5a6 6 0 0 1-6 6H11a7 7 0 0 1-7-7V9a2 2 0 1 1 4 0v3.5h1z'/%3E%3Cpath fill='%23064e3b' d='M10 2.5V14h-.5a1.5 1.5 0 0 1-1.5-1.5V9a1 1 0 1 0-2 0v7.5a6 6 0 0 0 6 6h2.5a5 5 0 0 0 5-5l.941-5.278a1.095 1.095 0 0 0-1.324-1.288l-4.117.78V2.5a1.5 1.5 0 0 0-3 0z'/%3E%3C/svg%3E") 7 3, pointer`,db="group-profile-modal-styles";if(typeof document<"u"&&!document.getElementById(db)){const t=document.createElement("style");t.id=db,t.textContent=`
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

    .gpm-overlay {
      cursor: ${K4};
    }
    .gpm-overlay * {
      cursor: inherit;
    }
    .gpm-overlay button,
    .gpm-overlay a,
    .gpm-overlay [role="button"],
    .gpm-overlay .gpm-clickable {
      cursor: ${Q4} !important;
    }
    .gpm-overlay input[type="text"],
    .gpm-overlay input[type="search"],
    .gpm-overlay textarea {
      cursor: text !important;
    }

    .gpm-scrollable::-webkit-scrollbar {
      width: 6px;
    }
    .gpm-scrollable::-webkit-scrollbar-track {
      background: transparent;
    }
    .gpm-scrollable::-webkit-scrollbar-thumb {
      background: ${G.primary};
      border-radius: 3px;
    }
    .gpm-scrollable::-webkit-scrollbar-thumb:hover {
      background: ${G.primaryHover};
    }

    .gpm-scrollable {
      scrollbar-width: thin;
      scrollbar-color: ${G.primary} transparent;
    }

    @keyframes gpm-pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    @keyframes gpm-glow {
      0%, 100% { box-shadow: 0 0 20px ${G.primaryGlow}; }
      50% { box-shadow: 0 0 40px ${G.primaryGlow}; }
    }

    @keyframes matrix-fall {
      0% { transform: translateY(-100%); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(100%); opacity: 0; }
    }

    @keyframes matrix-flicker {
      0%, 100% { opacity: 0.1; }
      50% { opacity: 0.4; }
    }

    @keyframes matrix-glow-pulse {
      0%, 100% { filter: brightness(1) drop-shadow(0 0 2px ${G.primary}); }
      50% { filter: brightness(1.5) drop-shadow(0 0 6px ${G.primary}); }
    }

    .matrix-grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      grid-template-rows: repeat(8, 1fr);
      gap: 2px;
      position: absolute;
      inset: 0;
      padding: 8px;
      overflow: hidden;
    }

    .matrix-cell {
      background: ${G.primary};
      opacity: 0.18;
      border-radius: 2px;
      transition: all 0.2s ease;
      animation: matrix-flicker 2s ease-in-out infinite;
      animation-delay: calc(var(--cell-index) * 0.02s);
    }

    .matrix-cell:nth-child(3n) {
      opacity: 0.32;
      animation-duration: 1.5s;
      box-shadow: 0 0 3px ${G.primary};
    }

    .matrix-cell:nth-child(5n) {
      opacity: 0.42;
      animation-duration: 1.8s;
      box-shadow: 0 0 4px ${G.primary};
    }

    .matrix-cell:nth-child(7n+1) {
      opacity: 0.25;
      animation-duration: 2.2s;
    }

    .matrix-cell:nth-child(11n) {
      opacity: 0.55;
      box-shadow: 0 0 6px ${G.primary}, 0 0 10px ${G.primary};
      animation-duration: 1.2s;
    }

    .matrix-rain {
      position: absolute;
      width: 2px;
      background: linear-gradient(to bottom, transparent, ${G.primary}, transparent);
      pointer-events: none;
      animation: matrix-fall 2s linear infinite;
    }

    .avatar-wrapper {
      animation: matrix-glow-pulse 3s ease-in-out infinite;
    }
  `,document.head.appendChild(t)}const Z4={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.15,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.1,ease:"easeIn"}}},J4={hidden:{opacity:0,scale:.98,y:10},visible:{opacity:1,scale:1,y:0,transition:{duration:.15,ease:"easeOut"}},exit:{opacity:0,scale:.98,y:5,transition:{duration:.1,ease:"easeIn"}}},wu={hidden:{opacity:1},visible:{opacity:1}},Xi={hidden:{opacity:1,x:0},visible:{opacity:1,x:0}},Qf={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.1,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.08,ease:"easeIn"}}},eD=({type:t,message:n,onDismiss:s})=>{if(b.useEffect(()=>{const p=setTimeout(s,4e3);return()=>clearTimeout(p)},[s]),!t)return null;const o=t==="success"?G.primaryMuted:t==="error"?G.dangerMuted:G.infoMuted,c=t==="success"?G.primary:t==="error"?G.danger:G.info,u=t==="success"?Sb:t==="error"?Rs:or;return r.jsxs(se.div,{initial:{opacity:0,y:-5,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-5,height:0},transition:{duration:.1,ease:"easeOut"},style:{background:o,borderRadius:8,padding:"10px 14px",marginBottom:12,display:"flex",alignItems:"center",gap:10,border:`1px solid ${c}20`},children:[r.jsx(u,{size:16,color:c,style:{flexShrink:0,minWidth:16}}),r.jsx("span",{style:{flex:1,fontSize:13,color:c,fontWeight:500},children:n}),r.jsx("button",{onClick:s,style:{background:"none",border:"none",padding:4,display:"flex",color:c,opacity:.7},className:"gpm-clickable",children:r.jsx(kn,{size:14,style:{flexShrink:0,minWidth:14}})})]})},tD=({privacy:t,size:n="md"})=>{const s=t==="public",o=n==="sm"?12:14,c=n==="sm"?"4px 8px":"6px 12px",u=n==="sm"?11:12;return r.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6,padding:c,borderRadius:20,background:s?G.primaryMuted:G.warningMuted,border:`1px solid ${s?G.primary:G.warning}30`},children:[s?r.jsx(_b,{size:o,color:G.primary,style:{flexShrink:0,minWidth:o}}):r.jsx(Hh,{size:o,color:G.warning,style:{flexShrink:0,minWidth:o}}),r.jsx("span",{style:{fontSize:u,fontWeight:600,color:s?G.primary:G.warning,textTransform:"uppercase",letterSpacing:"0.5px"},children:s?"Public":"Private"})]})},nD=({role:t})=>{const n={admin:{icon:U_,color:"#fbbf24",bg:"rgba(251, 191, 36, 0.15)",label:"Admin"},moderator:{icon:ir,color:"#60a5fa",bg:"rgba(96, 165, 250, 0.15)",label:"Mod"},member:{icon:Du,color:G.textMuted,bg:G.surfaceHover,label:"Member"}}[t]||{icon:Du,color:G.textMuted,bg:G.surfaceHover,label:t},s=n.icon;return r.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"3px 8px",borderRadius:4,background:n.bg,border:`1px solid ${n.color}20`},children:[r.jsx(s,{size:11,color:n.color,style:{flexShrink:0,minWidth:11}}),r.jsx("span",{style:{fontSize:10,fontWeight:600,color:n.color,textTransform:"uppercase"},children:n.label})]})},aD=({children:t,enabled:n=!0})=>r.jsxs("div",{className:"matrix-container",style:{position:"relative",margin:"-20px -20px 24px -20px",padding:"28px 20px",borderRadius:"0 0 16px 16px",background:`linear-gradient(180deg, ${G.bg} 0%, ${G.surface} 100%)`,overflow:"hidden"},children:[n&&r.jsx("div",{className:"matrix-grid",style:{position:"absolute",inset:0,display:"grid",gridTemplateColumns:"repeat(15, 1fr)",gridTemplateRows:"repeat(12, 1fr)",gap:3,padding:10,opacity:.8},children:Array.from({length:180}).map((c,u)=>r.jsx("div",{className:"matrix-cell",style:{"--cell-index":u}},u))}),n&&Array.from({length:12}).map((c,u)=>r.jsx("div",{className:"matrix-rain",style:{left:`${5+u*8}%`,height:"40%",animationDelay:`${u*.15}s`}},`rain-${u}`)),r.jsx("div",{style:{position:"relative",zIndex:2,textAlign:"center"},children:t}),r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"60%",background:`radial-gradient(ellipse at 50% 0%, ${G.primary}15 0%, transparent 70%)`,pointerEvents:"none"}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:40,background:`linear-gradient(to top, ${G.surface}, transparent)`,pointerEvents:"none"}}),r.jsx("div",{style:{position:"absolute",inset:0,borderRadius:"0 0 16px 16px",border:`1px solid ${G.primary}20`,pointerEvents:"none"}})]}),sD=({member:t,isOnline:n,lastSeen:s,isCurrentUser:o,canManage:c,onViewProfile:u,onKick:p,onBan:h,onManagePermissions:m})=>{const[g,y]=b.useState(!1);return r.jsxs(se.div,{variants:Xi,style:{display:"flex",alignItems:"center",padding:"12px 14px",background:G.surfaceElevated,borderRadius:10,border:`1px solid ${G.border}`,transition:"background 0.1s, border-color 0.1s",position:"relative"},whileHover:{background:G.surfaceHover,borderColor:G.borderLight,transition:{duration:.1}},onHoverStart:()=>y(!0),onHoverEnd:()=>y(!1),children:[r.jsxs("div",{className:"gpm-clickable",onClick:u,style:{position:"relative",marginRight:12},children:[t.user.avatar?r.jsx("img",{src:pt(t.user.avatar),alt:t.user.username,style:{width:44,height:44,borderRadius:"50%",objectFit:"cover",border:`2px solid ${n?G.online:G.border}`}}):r.jsx("div",{style:{width:44,height:44,borderRadius:"50%",background:`linear-gradient(135deg, ${G.primary}40, ${G.primary}20)`,display:"flex",alignItems:"center",justifyContent:"center",border:`2px solid ${n?G.online:G.border}`,color:G.primary,fontWeight:600,fontSize:16},children:Mn(t.user.username)}),r.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:12,height:12,borderRadius:"50%",background:n?G.online:G.offline,border:`2px solid ${G.surfaceElevated}`}})]}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:2},children:[r.jsxs("span",{className:"gpm-clickable",onClick:u,style:{fontSize:14,fontWeight:600,color:G.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[t.user.username,o&&r.jsx("span",{style:{color:G.textMuted,fontWeight:400},children:" (you)"})]}),r.jsx(nD,{role:t.role})]}),r.jsx("div",{style:{fontSize:12,color:G.textMuted},children:n?r.jsx("span",{style:{color:G.online},children:" Online"}):s?`Last seen ${$u(s)}`:"Offline"})]}),r.jsx(Yn,{children:g&&c&&!o&&t.role!=="admin"&&r.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.08},style:{display:"flex",gap:6},children:[m&&r.jsx("button",{onClick:m,className:"gpm-clickable",title:"Manage Permissions",style:{width:32,height:32,borderRadius:6,background:G.infoMuted,border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:G.info,transition:"all 0.15s"},children:r.jsx(z_,{size:16,strokeWidth:2.5,style:{flexShrink:0,minWidth:16}})}),p&&r.jsx("button",{onClick:p,className:"gpm-clickable",title:"Remove Member",style:{width:32,height:32,borderRadius:6,background:G.warningMuted,border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:G.warning,transition:"all 0.15s"},children:r.jsx(B_,{size:16,strokeWidth:2.5,style:{flexShrink:0,minWidth:16}})}),h&&r.jsx("button",{onClick:h,className:"gpm-clickable",title:"Ban Member",style:{width:32,height:32,borderRadius:6,background:G.dangerMuted,border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:G.danger,transition:"all 0.15s"},children:r.jsx(As,{size:16,strokeWidth:2.5,style:{flexShrink:0,minWidth:16}})})]})})]})},Wi=({icon:t,label:n,onClick:s,variant:o="default",disabled:c,loading:u})=>{const p=o==="danger"?G.dangerMuted:o==="primary"?G.primaryMuted:G.surfaceHover,h=o==="danger"?G.danger:o==="primary"?G.primary:G.text,m=o==="danger"?G.danger:o==="primary"?G.primary:G.surfaceActive,g=o==="danger"||o==="primary"?"#fff":G.text;return r.jsxs(se.button,{onClick:s,disabled:c||u,className:"gpm-clickable",style:{display:"flex",alignItems:"center",gap:10,width:"100%",padding:"12px 16px",background:p,border:`1px solid ${h}20`,borderRadius:10,color:h,fontSize:14,fontWeight:500,opacity:c?.5:1,transition:"background 0.1s, color 0.1s"},whileHover:c?{}:{background:m,color:g,transition:{duration:.1}},whileTap:c?{}:{scale:.98,transition:{duration:.05}},children:[u?r.jsx(sn,{size:18,className:"animate-spin"}):t,r.jsx("span",{children:n}),r.jsx(qh,{size:16,style:{marginLeft:"auto",opacity:.5,flexShrink:0,minWidth:16}})]})},YS=({isOpen:t,onClose:n,chat:s,currentUserId:o,onEditGroup:c,onDeleteGroup:u,onLeaveGroup:p,onKickMember:h,onViewUserProfile:m,onBanMember:g,onUnbanMember:y,onUpdatePrivacy:v,fancyAnimations:S=!0})=>{const[j,C]=b.useState(null),[T,E]=b.useState(!1),[z,L]=b.useState("main"),[R,X]=b.useState(""),[P,te]=b.useState(""),[re,Q]=b.useState([]),[ge,me]=b.useState(!1),[Pe,qe]=b.useState(!1),[Qe,Re]=b.useState(!1),[Te,B]=b.useState([]),[ne,le]=b.useState(!1),[Se,He]=b.useState({type:null,message:""}),[we,Ae]=b.useState(!1),[je,ie]=b.useState(null),[_e,he]=b.useState(!1),{isUserOnline:_t,getUserLastSeen:Ct,loadChats:Bt,setInitialPresenceStates:jt}=Le(),{canAddUsers:rn,canManageChatInfo:Tt,canManageBans:ln,canManageUsers:gt}=id(s?.id),ft=j?.members.find(I=>I.userId===o)?.role==="admin",xt=j?.members.some(I=>I.userId===o),Vt=j?.members.filter(I=>_t(I.userId)).length||0,yn=j?.members.filter(I=>{if(!R.trim())return!0;const pe=R.toLowerCase();return I.user.username.toLowerCase().includes(pe)||I.user.email?.toLowerCase().includes(pe)})||[],at=(I,pe)=>{He({type:I,message:pe})},Qt=async()=>{E(!0);try{const I=await Ee.getChatProfile(s.id);C(I);const pe=I.members?.map(ye=>ye.userId)||[];if(pe.length>0)try{const ye=await tt.getPresenceStates(pe);Object.keys(ye).length>0&&jt(ye)}catch(ye){console.error("Failed to fetch presence:",ye)}}catch(I){at("error",I.response?.data?.message||"Failed to load profile")}finally{E(!1)}},Zt=async()=>{if(!(!s?.id||!ft&&!ln)){le(!0);try{const I=await Ee.getBannedUsers(s.id);B(I)}catch{at("error","Failed to load banned users")}finally{le(!1)}}};b.useEffect(()=>{t&&s.id&&(Re(!1),L("main"),Qt())},[t,s.id]),b.useEffect(()=>{j&&s&&t&&(s.name!==j.name||s.description!==j.description||s.avatar!==j.avatar)&&C(pe=>pe?{...pe,name:s.name||pe.name,description:s.description??pe.description,avatar:s.avatar??pe.avatar}:null)},[s.name,s.description,s.avatar,t]),b.useEffect(()=>{z==="banned"&&(ft||ln)&&Zt()},[z,ft,ln]);const Gn=async()=>{if(!(!s||!s.type)){qe(!0);try{await Ee.joinChat(s.id,s.type),at("success",`Successfully joined the ${s.type}!`),await Bt(),await Qt()}catch(I){zj(I)?(Re(!0),at("error",Bj(I))):at("error",_n(I,"Failed to join"))}finally{qe(!1)}}},oe=async I=>{if(!h)return;const pe=j?.members.find(Oe=>Oe.userId===I);await Cn({title:"Remove Member",message:`Remove ${pe?.user.username||"this member"} from the ${s.type}?`,confirmText:"Remove",cancelText:"Cancel",variant:"danger"})&&(C(Oe=>Oe?{...Oe,members:Oe.members.filter(ut=>ut.userId!==I)}:null),at("success",`${pe?.user.username} has been removed`),h(I))},ue=async I=>{if(!g)return;const pe=j?.members.find(Oe=>Oe.userId===I);await Cn({title:"Ban Member",message:`Ban ${pe?.user.username||"this member"}? They won't be able to rejoin.`,confirmText:"Ban",cancelText:"Cancel",variant:"danger"})&&(C(Oe=>Oe?{...Oe,members:Oe.members.filter(ut=>ut.userId!==I)}:null),at("success",`${pe?.user.username} has been banned`),await g(I))},dt=async(I,pe)=>{if(!y)return;if(await Cn({title:"Unban User",message:`Unban ${pe}? They will be able to rejoin.`,confirmText:"Unban",cancelText:"Cancel",variant:"info"}))try{await y(I),B(Oe=>Oe.filter(ut=>ut.userId!==I)),at("success",`${pe} has been unbanned`)}catch{at("error","Failed to unban user")}},ct=async()=>{if(!v||!j)return;const I=j.privacy==="public"?"private":"public";if(await Cn({title:`Make ${s.type} ${I}?`,message:I==="private"?"Only invited members will be able to join.":"Anyone can find and join this chat.",confirmText:"Confirm",cancelText:"Cancel",variant:"info"})){he(!0);try{await v(I),C(ye=>ye?{...ye,privacy:I}:null)}catch{at("error","Failed to update privacy")}finally{he(!1)}}},Ut=async()=>{if(!p)return;const I=s.type==="channel";await Cn({title:`Leave ${I?"Channel":"Group"}?`,message:`Are you sure you want to leave "${j?.name||s.name}"? You can rejoin later if it's public.`,confirmText:"Leave",cancelText:"Cancel",variant:"danger"})&&p()},xn=async()=>{if(!u)return;const I=s.type==="channel";await Cn({title:`Delete ${I?"Channel":"Group"}?`,message:`Are you sure you want to permanently delete "${j?.name||s.name}"? This action cannot be undone and all messages will be lost.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger"})&&u()};b.useEffect(()=>{if(!P.trim()){Q([]),me(!1);return}me(!0);const I=setTimeout(async()=>{try{const pe=await mn.searchUsers(P.trim()),ye=new Set(j?.members?.map(Oe=>Oe.userId)||[]);Q(pe.filter(Oe=>!ye.has(Oe.id)))}catch(pe){console.error("Search failed:",pe),Q([])}finally{me(!1)}},300);return()=>clearTimeout(I)},[P,j?.members]);const $=async I=>{try{s.type==="group"?await Ee.addMemberToGroup(s.id,I):await Ee.addMemberToChannel(s.id,I),at("success","Member added successfully"),te(""),Q([]),await Qt()}catch(pe){at("error",_n(pe,"Failed to add member"))}},Y=s.type==="channel";return r.jsxs(r.Fragment,{children:[r.jsx(Yn,{children:t&&r.jsx(se.div,{className:"gpm-overlay",variants:Z4,initial:"hidden",animate:"visible",exit:"exit",onClick:n,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:20},children:r.jsxs(se.div,{variants:J4,onClick:I=>I.stopPropagation(),style:{width:"100%",maxWidth:520,maxHeight:"85vh",background:G.surface,borderRadius:16,border:`1px solid ${G.border}`,boxShadow:`0 0 0 1px ${G.border}, 0 25px 80px -20px rgba(0, 0, 0, 0.8)`,display:"flex",flexDirection:"column",overflow:"hidden"},children:[r.jsxs("div",{style:{padding:"16px 20px",borderBottom:`1px solid ${G.border}`,display:"flex",alignItems:"center",gap:12,background:G.bg},children:[z!=="main"&&r.jsx(se.button,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1},whileHover:{backgroundColor:G.surfaceActive,transition:{duration:.1}},whileTap:{scale:.95,transition:{duration:.05}},onClick:()=>L("main"),className:"gpm-clickable",style:{width:32,height:32,borderRadius:8,background:G.surfaceHover,border:`1px solid ${G.border}`,display:"flex",alignItems:"center",justifyContent:"center",color:G.text},children:r.jsx(qh,{size:18,style:{transform:"rotate(180deg)",flexShrink:0,minWidth:18}})}),r.jsx("div",{style:{flex:1},children:r.jsxs("h2",{style:{margin:0,fontSize:16,fontWeight:600,color:G.text,letterSpacing:"-0.01em"},children:[z==="main"&&`${Y?"Channel":"Group"} Profile`,z==="members"&&"Members",z==="banned"&&"Banned Users",z==="addMember"&&"Add Member"]})}),r.jsx(se.button,{whileHover:{backgroundColor:G.surfaceActive,transition:{duration:.1}},whileTap:{scale:.95,transition:{duration:.05}},onClick:n,className:"gpm-clickable",style:{width:32,height:32,borderRadius:8,background:G.surfaceHover,border:`1px solid ${G.border}`,display:"flex",alignItems:"center",justifyContent:"center",color:G.textMuted,transition:"background 0.1s"},children:r.jsx(kn,{size:16,style:{flexShrink:0,minWidth:16}})})]}),r.jsxs("div",{className:"gpm-scrollable",style:{flex:1,overflowY:"auto",padding:20},children:[r.jsx(Yn,{children:Se.type&&r.jsx(eD,{type:Se.type,message:Se.message,onDismiss:()=>He({type:null,message:""})})}),r.jsx(Yn,{mode:"wait",children:T?r.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:60,gap:16},children:[r.jsx(se.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:r.jsx(sn,{size:32,color:G.primary})}),r.jsx("span",{style:{color:G.textMuted,fontSize:14},children:"Loading..."})]},"loading"):z==="main"?r.jsxs(se.div,{variants:wu,initial:"hidden",animate:"visible",exit:"hidden",children:[r.jsx(se.div,{variants:Xi,children:r.jsxs(aD,{enabled:S,children:[r.jsx("div",{style:{width:100,height:100,borderRadius:"50%",margin:"0 auto 16px",background:j?.avatar?"none":`linear-gradient(135deg, ${G.primary}60, ${G.primary}30)`,display:"flex",alignItems:"center",justifyContent:"center",border:`3px solid ${G.primary}50`,overflow:"hidden",boxShadow:`0 0 25px ${G.primaryGlow}`},children:j?.avatar?r.jsx("img",{src:pt(j.avatar),alt:j.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):Y?r.jsx(ts,{size:42,color:G.primary,style:{flexShrink:0,minWidth:42}}):r.jsx(wn,{size:42,color:G.primary,style:{flexShrink:0,minWidth:42}})}),r.jsx("h3",{style:{margin:"0 0 8px",fontSize:22,fontWeight:700,color:G.text,letterSpacing:"-0.02em"},children:j?.name||s.name}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,marginBottom:8},children:[r.jsx(tD,{privacy:j?.privacy||"private"}),r.jsxs("span",{style:{fontSize:13,color:G.textSecondary,display:"flex",alignItems:"center",gap:6},children:[r.jsx(wn,{size:14,style:{flexShrink:0,minWidth:14}}),j?.members.length||0," members",r.jsxs("span",{style:{color:G.online},children:[" ",Vt," online"]})]})]}),j?.description&&r.jsx("p",{style:{margin:"12px 0 0",fontSize:14,color:G.textSecondary,lineHeight:1.5,maxWidth:360,marginLeft:"auto",marginRight:"auto"},children:j.description}),j?.createdAt&&r.jsxs("div",{style:{marginTop:12,fontSize:12,color:G.textMuted,display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[r.jsx(wb,{size:12,style:{flexShrink:0,minWidth:12}}),"Created ",new Date(j.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})}),!xt&&!Qe&&r.jsx(se.div,{variants:Xi,style:{marginBottom:20},children:r.jsxs(se.button,{onClick:Gn,disabled:Pe,className:"gpm-clickable",style:{width:"100%",padding:"14px 20px",background:G.primary,border:"none",borderRadius:10,color:"#fff",fontSize:15,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:10,transition:"box-shadow 0.1s"},whileHover:{boxShadow:`0 0 20px ${G.primaryGlow}`,transition:{duration:.1}},whileTap:{scale:.98,transition:{duration:.05}},children:[Pe?r.jsx(sn,{size:18,className:"animate-spin"}):r.jsx(bl,{size:18}),Pe?"Joining...":`Join ${Y?"Channel":"Group"}`]})}),Qe&&r.jsxs(se.div,{variants:Xi,style:{padding:16,background:G.dangerMuted,borderRadius:10,border:`1px solid ${G.danger}30`,marginBottom:20,textAlign:"center"},children:[r.jsx(As,{size:24,color:G.danger,style:{marginBottom:8}}),r.jsxs("p",{style:{margin:0,fontSize:14,color:G.danger,fontWeight:500},children:["You are banned from this ",s.type]})]}),r.jsxs(se.div,{variants:Xi,style:{display:"flex",flexDirection:"column",gap:8},children:[r.jsx(Wi,{icon:r.jsx(wn,{size:18,style:{flexShrink:0,minWidth:18}}),label:`View Members (${j?.members.length||0})`,onClick:()=>L("members")}),(ft||rn)&&xt&&r.jsx(Wi,{icon:r.jsx(bl,{size:18,style:{flexShrink:0,minWidth:18}}),label:"Add Member",onClick:()=>L("addMember"),variant:"primary"}),(ft||Tt)&&xt&&r.jsx(Wi,{icon:j?.privacy==="public"?r.jsx(Hh,{size:18,style:{flexShrink:0,minWidth:18}}):r.jsx(_b,{size:18,style:{flexShrink:0,minWidth:18}}),label:`Make ${j?.privacy==="public"?"Private":"Public"}`,onClick:ct,loading:_e}),(ft||Tt)&&xt&&c&&r.jsx(Wi,{icon:r.jsx(D_,{size:18,style:{flexShrink:0,minWidth:18}}),label:`Edit ${Y?"Channel":"Group"}`,onClick:c}),(ft||ln)&&xt&&r.jsx(Wi,{icon:r.jsx(As,{size:18,style:{flexShrink:0,minWidth:18}}),label:"Banned Users",onClick:()=>L("banned")}),xt&&p&&r.jsx(Wi,{icon:r.jsx(Fh,{size:18,style:{flexShrink:0,minWidth:18}}),label:`Leave ${Y?"Channel":"Group"}`,onClick:Ut,variant:"danger"}),ft&&u&&r.jsx(Wi,{icon:r.jsx(Wu,{size:18,style:{flexShrink:0,minWidth:18}}),label:`Delete ${Y?"Channel":"Group"}`,onClick:xn,variant:"danger"})]})]},"main"):z==="members"?r.jsxs(se.div,{variants:Qf,initial:"hidden",animate:"visible",exit:"exit",children:[r.jsxs("div",{style:{marginBottom:16,position:"relative"},children:[r.jsx(_l,{size:16,color:G.textMuted,style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",flexShrink:0,minWidth:16}}),r.jsx("input",{type:"text",placeholder:"Search members...",value:R,onChange:I=>X(I.target.value),style:{width:"100%",padding:"12px 14px 12px 42px",background:G.surfaceElevated,border:`1px solid ${G.border}`,borderRadius:10,color:G.text,fontSize:14,outline:"none",transition:"border-color 0.2s"},onFocus:I=>I.target.style.borderColor=G.primary,onBlur:I=>I.target.style.borderColor=G.border})]}),r.jsxs(se.div,{variants:wu,initial:"hidden",animate:"visible",style:{display:"flex",flexDirection:"column",gap:8},children:[yn.map(I=>r.jsx(sD,{member:I,isOnline:_t(I.userId),lastSeen:Ct(I.userId),isCurrentUser:I.userId===o,canManage:ft||gt||ln,onViewProfile:()=>m?.(I.userId),onKick:(ft||gt)&&I.role!=="admin"?()=>oe(I.userId):void 0,onBan:(ft||ln)&&I.role!=="admin"?()=>ue(I.userId):void 0,onManagePermissions:ft&&I.role!=="admin"?()=>{ie(I),Ae(!0)}:void 0},I.userId)),yn.length===0&&r.jsx("div",{style:{textAlign:"center",padding:40,color:G.textMuted},children:"No members found"})]})]},"members"):z==="banned"?r.jsx(se.div,{variants:Qf,initial:"hidden",animate:"visible",exit:"exit",children:ne?r.jsx("div",{style:{textAlign:"center",padding:40},children:r.jsx(sn,{size:24,color:G.primary,className:"animate-spin"})}):Te.length===0?r.jsxs("div",{style:{textAlign:"center",padding:40,color:G.textMuted},children:[r.jsx(As,{size:32,style:{marginBottom:12,opacity:.5}}),r.jsx("p",{children:"No banned users"})]}):r.jsx(se.div,{variants:wu,initial:"hidden",animate:"visible",style:{display:"flex",flexDirection:"column",gap:8},children:Te.map(I=>r.jsxs(se.div,{variants:Xi,style:{display:"flex",alignItems:"center",padding:"12px 14px",background:G.surfaceElevated,borderRadius:10,border:`1px solid ${G.border}`},children:[I.avatarUrl?r.jsx("img",{src:pt(I.avatarUrl),alt:I.username,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover",marginRight:12}}):r.jsx("div",{style:{width:40,height:40,borderRadius:"50%",background:G.dangerMuted,display:"flex",alignItems:"center",justifyContent:"center",marginRight:12,color:G.danger,fontWeight:600},children:Mn(I.username)}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontSize:14,fontWeight:600,color:G.text},children:I.username}),r.jsxs("div",{style:{fontSize:12,color:G.textMuted},children:["Banned ",new Date(I.bannedAt).toLocaleDateString()]})]}),r.jsx("button",{onClick:()=>dt(I.userId,I.username),className:"gpm-clickable",style:{padding:"8px 14px",background:G.primaryMuted,border:`1px solid ${G.primary}30`,borderRadius:6,color:G.primary,fontSize:13,fontWeight:500},children:"Unban"})]},I.userId))})},"banned"):z==="addMember"?r.jsxs(se.div,{variants:Qf,initial:"hidden",animate:"visible",exit:"exit",children:[r.jsxs("div",{style:{marginBottom:16,position:"relative"},children:[r.jsx(_l,{size:16,color:G.textMuted,style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",flexShrink:0,minWidth:16}}),r.jsx("input",{type:"text",placeholder:"Search users to add...",value:P,onChange:I=>te(I.target.value),style:{width:"100%",padding:"12px 14px 12px 42px",background:G.surfaceElevated,border:`1px solid ${G.border}`,borderRadius:10,color:G.text,fontSize:14,outline:"none",transition:"border-color 0.2s"},onFocus:I=>I.target.style.borderColor=G.primary,onBlur:I=>I.target.style.borderColor=G.border})]}),ge?r.jsx("div",{style:{textAlign:"center",padding:40},children:r.jsx(sn,{size:24,color:G.primary,className:"animate-spin"})}):re.length>0?r.jsx(se.div,{variants:wu,initial:"hidden",animate:"visible",style:{display:"flex",flexDirection:"column",gap:8},children:re.map(I=>r.jsxs(se.div,{variants:Xi,style:{display:"flex",alignItems:"center",padding:"12px 14px",background:G.surfaceElevated,borderRadius:10,border:`1px solid ${G.border}`},children:[I.avatar?r.jsx("img",{src:pt(I.avatar),alt:I.username,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover",marginRight:12}}):r.jsx("div",{style:{width:40,height:40,borderRadius:"50%",background:G.primaryMuted,display:"flex",alignItems:"center",justifyContent:"center",marginRight:12,color:G.primary,fontWeight:600},children:Mn(I.username)}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontSize:14,fontWeight:600,color:G.text},children:I.username}),I.email&&r.jsx("div",{style:{fontSize:12,color:G.textMuted},children:I.email})]}),r.jsxs("button",{onClick:()=>$(I.id),className:"gpm-clickable",style:{padding:"8px 14px",background:G.primary,border:"none",borderRadius:6,color:"#fff",fontSize:13,fontWeight:500,display:"flex",alignItems:"center",gap:6},children:[r.jsx(bl,{size:14}),"Add"]})]},I.id))}):P.trim()?r.jsx("div",{style:{textAlign:"center",padding:40,color:G.textMuted},children:"No users found"}):r.jsxs("div",{style:{textAlign:"center",padding:40,color:G.textMuted},children:[r.jsx(bl,{size:32,style:{marginBottom:12,opacity:.5}}),r.jsx("p",{children:"Type to search for users"})]})]},"addMember"):null})]})]})})}),we&&je&&r.jsx(zm,{isOpen:we,onClose:()=>{Ae(!1),ie(null)},chatId:s.id,member:je,onPermissionsChanged:async()=>{await Qt()}})]})},fe={bg:"#050505",surface:"#0a0a0a",surfaceElevated:"#0f0f0f",surfaceHover:"#151515",border:"#1a1a1a",primary:"#10b981",primaryHover:"#0d9668",primaryMuted:"rgba(16, 185, 129, 0.15)",danger:"#ef4444",dangerMuted:"rgba(239, 68, 68, 0.15)",text:"#ffffff",textSecondary:"#a1a1aa",textMuted:"#71717a"},iD=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M5.5 3.21V20.8l4.75-4.73 2.99 6.73L15.5 21.6l-3-6.7h6z'/%3E%3Cpath fill='%23064e3b' d='M6.5 5.61v11.68l3.38-3.37.37-.37.48 1.07 1.93 4.35 1.07-.47L11.8 14.1l-.48-1.07H16z'/%3E%3C/svg%3E") 5 3, default`,oD=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M9 2.5a2.5 2.5 0 0 1 5 0v7.996l3.904-.74a2.095 2.095 0 0 1 2.537 2.466L19.5 17.5a6 6 0 0 1-6 6H11a7 7 0 0 1-7-7V9a2 2 0 1 1 4 0v3.5h1z'/%3E%3Cpath fill='%23064e3b' d='M10 2.5V14h-.5a1.5 1.5 0 0 1-1.5-1.5V9a1 1 0 1 0-2 0v7.5a6 6 0 0 0 6 6h2.5a5 5 0 0 0 5-5l.941-5.278a1.095 1.095 0 0 0-1.324-1.288l-4.117.78V2.5a1.5 1.5 0 0 0-3 0z'/%3E%3C/svg%3E") 9 4, pointer`,rD=`
  /* Custom Emerald Cursor Styles */
  .user-profile-modal-overlay {
    cursor: ${iD};
  }
  .user-profile-modal-overlay * {
    cursor: inherit;
  }
  .user-profile-modal-overlay button,
  .user-profile-modal-overlay a,
  .user-profile-modal-overlay [role="button"],
  .user-profile-modal-overlay input[type="submit"],
  .user-profile-modal-overlay input[type="button"],
  .user-profile-modal-overlay .clickable {
    cursor: ${oD};
  }
  .user-profile-modal-overlay input[type="text"],
  .user-profile-modal-overlay input[type="email"],
  .user-profile-modal-overlay input[type="password"],
  .user-profile-modal-overlay input[type="search"],
  .user-profile-modal-overlay textarea {
    cursor: text;
  }

  /* Scrollbar Styles */
  .user-profile-modal-content::-webkit-scrollbar {
    width: 8px;
  }
  .user-profile-modal-content::-webkit-scrollbar-track {
    background: ${fe.surface};
    border-radius: 4px;
  }
  .user-profile-modal-content::-webkit-scrollbar-thumb {
    background: ${fe.primary};
    border-radius: 4px;
    border: 2px solid ${fe.surface};
  }
  .user-profile-modal-content::-webkit-scrollbar-thumb:hover {
    background: ${fe.primaryHover};
  }

  /* Matrix Animation Keyframes */
  @keyframes user-matrix-flicker {
    0%, 100% { opacity: 0.1; }
    50% { opacity: 0.4; }
  }

  @keyframes user-matrix-fall {
    0% { transform: translateY(-100%); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateY(100%); opacity: 0; }
  }

  @keyframes user-matrix-glow {
    0%, 100% { filter: brightness(1) drop-shadow(0 0 2px ${fe.primary}); }
    50% { filter: brightness(1.3) drop-shadow(0 0 8px ${fe.primary}); }
  }

  .user-matrix-container .user-matrix-cell {
    background: ${fe.primary};
    opacity: 0.18;
    border-radius: 2px;
    transition: all 0.2s ease;
    animation: user-matrix-flicker 2s ease-in-out infinite;
    animation-delay: calc(var(--cell-index) * 0.02s);
  }

  .user-matrix-container .user-matrix-cell:nth-child(3n) {
    opacity: 0.32;
    animation-duration: 1.5s;
    box-shadow: 0 0 3px ${fe.primary};
  }
  .user-matrix-container .user-matrix-cell:nth-child(5n) {
    opacity: 0.42;
    animation-duration: 1.8s;
    box-shadow: 0 0 4px ${fe.primary};
  }
  .user-matrix-container .user-matrix-cell:nth-child(7n+1) {
    opacity: 0.25;
    animation-duration: 2.2s;
  }
  .user-matrix-container .user-matrix-cell:nth-child(11n) {
    opacity: 0.55;
    box-shadow: 0 0 6px ${fe.primary}, 0 0 10px ${fe.primary};
    animation-duration: 1.2s;
  }

  .user-matrix-container .user-matrix-rain {
    position: absolute;
    width: 2px;
    background: linear-gradient(to bottom, transparent, ${fe.primary}, transparent);
    pointer-events: none;
    animation: user-matrix-fall 2s linear infinite;
  }

  .user-matrix-container .user-avatar-wrapper {
    animation: user-matrix-glow 3s ease-in-out infinite;
  }
`;if(typeof document<"u"&&!document.getElementById("user-profile-scrollbar-styles")){const t=document.createElement("style");t.id="user-profile-scrollbar-styles",t.textContent=rD,document.head.appendChild(t)}const lD={hidden:{opacity:0},visible:{opacity:1}},cD={hidden:{opacity:0,scale:.95,y:20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:25,stiffness:300}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.15}}},uD={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}},Ko={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},dD=({children:t,enabled:n=!0})=>r.jsxs("div",{className:"user-matrix-container",style:{position:"relative",background:fe.bg,borderRadius:"16px",overflow:"hidden",marginBottom:"20px",border:`1px solid ${fe.border}`},children:[n&&r.jsx("div",{style:{position:"absolute",inset:0,display:"grid",gridTemplateColumns:"repeat(15, 1fr)",gridTemplateRows:"repeat(12, 1fr)",gap:"3px",padding:"12px",pointerEvents:"none",zIndex:0},children:Array.from({length:180}).map((p,h)=>r.jsx("div",{className:"user-matrix-cell",style:{"--cell-index":h}},h))}),n&&Array.from({length:8}).map((p,h)=>r.jsx("div",{className:"user-matrix-rain",style:{left:`${10+h*80/8}%`,height:"40px",animationDelay:`${h*.15}s`}},`rain-${h}`)),r.jsx("div",{style:{position:"relative",zIndex:1,padding:"24px"},children:t})]}),Oh=({isOpen:t,onClose:n,userId:s,onSendMessage:o,onBlockUser:c,onUnblockUser:u,fancyAnimations:p=!0})=>{const[h,m]=b.useState(null),[g,y]=b.useState(!1),[v,S]=b.useState(null),[j,C]=b.useState(!1),[T,E]=b.useState(!1),[z,L]=b.useState(!1),{isUserOnline:R,getUserLastSeen:X,usersYouBlocked:P,blockedByUsers:te}=Le();b.useEffect(()=>{t&&s&&(re(),Q())},[t,s]),b.useEffect(()=>{if(!t||!s)return;const Te=P.has(s),B=te.has(s);Te!==j&&C(Te),B!==T&&E(B)},[t,s,P,te]);const re=async()=>{y(!0),S(null);try{const Te=await mn.getUserProfile(s);m(Te)}catch(Te){console.error("[UserProfileViewer] Error loading profile:",Te),S(Te.response?.data?.message||"Failed to load user profile")}finally{y(!1)}},Q=async()=>{L(!0);try{const Te=await mn.getMutualBlockStatus(s);C(Te.iBlockedThem),E(Te.theyBlockedMe)}catch(Te){console.error("[UserProfileViewer] Error checking block status:",Te),C(!1),E(!1)}finally{L(!1)}},ge=()=>{o&&(o(s),n())},me=async()=>{if(!c)return;await Cn({title:"Block User",message:`Are you sure you want to block ${h?.username||"this user"}? They won't be able to message you.`,confirmText:"Block",cancelText:"Cancel",variant:"danger"})&&(c(s),C(!0))},Pe=async()=>{if(!u)return;await Cn({title:"Unblock User",message:`Are you sure you want to unblock ${h?.username||"this user"}? They will be able to message you again.`,confirmText:"Unblock",cancelText:"Cancel",variant:"success",icon:"success"})&&(u(s),C(!1))},qe=j||T,Qe=h?R(h.id):!1,Re=h?X(h.id):void 0;return r.jsx(Yn,{children:t&&r.jsx(se.div,{className:"user-profile-modal-overlay",variants:lD,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.2},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:n,children:r.jsxs(se.div,{variants:cD,initial:"hidden",animate:"visible",exit:"exit",style:{background:fe.surface,borderRadius:"16px",border:`1px solid ${fe.border}`,maxWidth:"420px",width:"100%",maxHeight:"85vh",display:"flex",flexDirection:"column",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",overflow:"hidden"},onClick:Te=>Te.stopPropagation(),children:[r.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${fe.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",background:fe.bg},children:[r.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:700,color:fe.text,letterSpacing:"-0.02em"},children:"User Profile"}),r.jsx(se.button,{whileHover:{scale:1.1,backgroundColor:fe.surfaceHover},whileTap:{scale:.9},onClick:n,"aria-label":"Close",style:{background:"transparent",border:"none",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",color:fe.textMuted},children:r.jsx(kn,{size:20,style:{flexShrink:0,minWidth:20}})})]}),r.jsxs("div",{className:"user-profile-modal-content",style:{overflowY:"auto",flex:1,padding:"24px"},children:[g&&r.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:fe.textMuted},children:[r.jsx(se.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{width:"40px",height:"40px",border:`3px solid ${fe.border}`,borderTopColor:fe.primary,borderRadius:"50%",margin:"0 auto 16px"}}),"Loading profile..."]}),v&&r.jsx("div",{style:{textAlign:"center",padding:"60px 20px",color:fe.danger,backgroundColor:fe.dangerMuted,borderRadius:"12px"},children:v}),!g&&!v&&h&&r.jsxs(se.div,{variants:uD,initial:"hidden",animate:"visible",children:[r.jsx(dD,{enabled:p,children:r.jsxs(se.div,{variants:Ko,style:{textAlign:"center"},children:[r.jsxs("div",{className:"user-avatar-wrapper",style:{position:"relative",display:"inline-block",marginBottom:"16px"},children:[h.avatar?r.jsx("img",{src:h.avatar,alt:h.username,style:{width:"120px",height:"120px",borderRadius:"50%",objectFit:"cover",border:`3px solid ${Qe?fe.primary:fe.border}`,boxShadow:Qe?`0 0 30px ${fe.primaryMuted}`:"none"}}):r.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:`linear-gradient(135deg, ${fe.primary} 0%, ${fe.primaryHover} 100%)`,color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"48px",fontWeight:700,boxShadow:`0 0 30px ${fe.primaryMuted}`},children:h.username.charAt(0).toUpperCase()}),r.jsx("div",{style:{position:"absolute",bottom:"6px",right:"6px",width:"24px",height:"24px",borderRadius:"50%",background:Qe?fe.primary:fe.textMuted,border:`3px solid ${fe.bg}`,boxShadow:Qe?`0 0 12px ${fe.primary}`:"none"}})]}),r.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"24px",fontWeight:700,color:fe.text,letterSpacing:"-0.02em",textShadow:`0 0 20px ${fe.primaryMuted}`},children:h.username}),r.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"6px 14px",borderRadius:"20px",background:Qe?fe.primaryMuted:"rgba(15, 15, 15, 0.8)",border:`1px solid ${Qe?`${fe.primary}30`:fe.border}`,backdropFilter:"blur(4px)"},children:[r.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:Qe?fe.primary:fe.textMuted,boxShadow:Qe?`0 0 8px ${fe.primary}`:"none"}}),r.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:Qe?fe.primary:fe.textMuted},children:Qe?"Online":Re?`Last seen ${$u(Re)}`:"Offline"})]})]})}),r.jsxs(se.div,{variants:Ko,style:{padding:"16px",background:fe.surfaceElevated,borderRadius:"12px",marginBottom:"16px",border:`1px solid ${fe.border}`},children:[r.jsx("h4",{style:{margin:"0 0 10px 0",fontSize:"12px",fontWeight:700,color:fe.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"About"}),r.jsx("p",{style:{margin:0,fontSize:"14px",color:h.bio?fe.textSecondary:fe.textMuted,lineHeight:"1.6",fontStyle:h.bio?"normal":"italic"},children:h.bio||"No bio set"})]}),h.email&&r.jsxs(se.div,{variants:Ko,style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",background:fe.surfaceElevated,borderRadius:"12px",marginBottom:"12px",border:`1px solid ${fe.border}`},children:[r.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:fe.primaryMuted,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(I_,{size:18,color:fe.primary,style:{flexShrink:0,minWidth:18}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"12px",color:fe.textMuted,marginBottom:"2px"},children:"Email"}),r.jsx("div",{style:{fontSize:"14px",color:fe.text,fontWeight:500},children:h.email})]})]}),h.createdAt&&r.jsxs(se.div,{variants:Ko,style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",background:fe.surfaceElevated,borderRadius:"12px",marginBottom:"16px",border:`1px solid ${fe.border}`},children:[r.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:fe.primaryMuted,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(wb,{size:18,color:fe.primary,style:{flexShrink:0,minWidth:18}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"12px",color:fe.textMuted,marginBottom:"2px"},children:"Member Since"}),r.jsx("div",{style:{fontSize:"14px",color:fe.text,fontWeight:500},children:new Date(h.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),!z&&(T||j)&&r.jsxs(se.div,{variants:Ko,style:{padding:"14px 16px",background:fe.dangerMuted,borderRadius:"12px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px",border:`1px solid ${fe.danger}30`},children:[r.jsx(As,{size:20,color:fe.danger,style:{flexShrink:0,minWidth:20}}),r.jsx("span",{style:{fontSize:"14px",color:fe.danger,fontWeight:500},children:T&&j?"You have blocked each other":T?"This user has blocked you":"You have blocked this user"})]}),r.jsxs(se.div,{variants:Ko,style:{display:"flex",gap:"12px",flexDirection:"column"},children:[o&&r.jsxs(se.button,{whileHover:qe?{}:{scale:1.02},whileTap:qe?{}:{scale:.98},onClick:ge,disabled:qe||z,style:{width:"100%",padding:"14px 20px",background:qe?fe.surfaceElevated:fe.primary,color:qe?fe.textMuted:"white",border:qe?`1px solid ${fe.border}`:"none",borderRadius:"12px",cursor:qe?"not-allowed":"pointer",fontSize:"15px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",opacity:qe?.6:1,boxShadow:qe?"none":`0 0 20px ${fe.primaryMuted}`},children:[r.jsx(_u,{size:20,style:{flexShrink:0,minWidth:20}}),qe?"Cannot Message":"Send Message"]}),j?u&&r.jsxs(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:Pe,style:{width:"100%",padding:"14px 20px",background:fe.primaryMuted,color:fe.primary,border:`1px solid ${fe.primary}30`,borderRadius:"12px",cursor:"pointer",fontSize:"15px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[r.jsx(Cb,{size:20,style:{flexShrink:0,minWidth:20}}),"Unblock User"]}):c&&r.jsxs(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:me,style:{width:"100%",padding:"14px 20px",background:fe.dangerMuted,color:fe.danger,border:`1px solid ${fe.danger}30`,borderRadius:"12px",cursor:"pointer",fontSize:"15px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[r.jsx(Rl,{size:20,style:{flexShrink:0,minWidth:20}}),"Block User"]})]})]})]})]})})})},XS=({isOpen:t,onClose:n,isDarkMode:s=!1})=>{const[o,c]=b.useState([]),[u,p]=b.useState(!1),[h,m]=b.useState(null);b.useEffect(()=>{t&&g()},[t]);const g=async()=>{p(!0);try{const v=await mn.getBlockedUsers();c(v||[])}catch(v){console.error("Failed to load blocked users:",v)}finally{p(!1)}},y=async v=>{if(await Cn({title:"Unblock User",message:`Are you sure you want to unblock ${v.username}? They will be able to message you again.`,confirmText:"Unblock",cancelText:"Cancel",variant:"success",icon:"success"})){m(v.userId);try{await mn.unblockUser(v.userId),c(j=>j.filter(C=>C.userId!==v.userId))}catch(j){console.error("Failed to unblock user:",j)}finally{m(null)}}};return t?r.jsxs(r.Fragment,{children:[r.jsx("div",{onClick:n,style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998}}),r.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"480px",maxHeight:"80vh",backgroundColor:s?"#1e293b":"#ffffff",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:`1px solid ${s?"#334155":"#e2e8f0"}`},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"#dc2626",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Rl,{size:20,color:"white"})}),r.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:700,color:s?"#f1f5f9":"#1e293b"},children:"Blocked Users"})]}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",color:s?"#94a3b8":"#64748b",transition:"background-color 0.2s"},onMouseEnter:v=>{v.currentTarget.style.backgroundColor=s?"#334155":"#f1f5f9"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor="transparent"},children:r.jsx(kn,{size:20})})]}),r.jsx("div",{style:{flex:1,overflow:"auto",padding:"16px 24px"},children:u?r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 0",color:s?"#94a3b8":"#64748b"},children:"Loading..."}):o.length===0?r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 0",color:s?"#94a3b8":"#64748b"},children:[r.jsx(Rl,{size:48,style:{marginBottom:"16px",opacity:.5}}),r.jsx("p",{style:{margin:0,fontSize:"14px"},children:"You haven't blocked any users"})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:o.map(v=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:s?"#334155":"#f8fafc",borderRadius:"12px",border:`1px solid ${s?"#475569":"#e2e8f0"}`},children:[r.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"50%",overflow:"hidden",flexShrink:0},children:v.avatarUrl?r.jsx("img",{src:pt(v.avatarUrl),alt:v.username,style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#6366f1",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600,fontSize:"16px"},children:Mn(v.username)})}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:s?"#f1f5f9":"#1e293b",marginBottom:"2px"},children:v.username}),r.jsxs("div",{style:{fontSize:"12px",color:s?"#94a3b8":"#64748b"},children:["Blocked ",new Date(v.blockedAt).toLocaleDateString()]})]}),r.jsxs("button",{onClick:()=>y(v),disabled:h===v.userId,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",backgroundColor:s?"#475569":"#e2e8f0",color:s?"#f1f5f9":"#1e293b",border:"none",borderRadius:"8px",cursor:h===v.userId?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,opacity:h===v.userId?.6:1,transition:"all 0.2s"},onMouseEnter:S=>{h!==v.userId&&(S.currentTarget.style.backgroundColor="#10b981",S.currentTarget.style.color="white")},onMouseLeave:S=>{h!==v.userId&&(S.currentTarget.style.backgroundColor=s?"#475569":"#e2e8f0",S.currentTarget.style.color=s?"#f1f5f9":"#1e293b")},children:[r.jsx(O_,{size:14}),h===v.userId?"Unblocking...":"Unblock"]})]},v.userId))})}),r.jsx("div",{style:{padding:"16px 24px",borderTop:`1px solid ${s?"#334155":"#e2e8f0"}`,display:"flex",justifyContent:"flex-end"},children:r.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:s?"#334155":"#e2e8f0",color:s?"#f1f5f9":"#1e293b",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,transition:"background-color 0.2s"},onMouseEnter:v=>{v.currentTarget.style.backgroundColor=s?"#475569":"#cbd5e1"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor=s?"#334155":"#e2e8f0"},children:"Close"})})]})]}):null},pD=t=>{if(!t||t==="undefined"||t==="null")return"?";const n=String(t).trim();if(!n||n.length===0)return"?";const s=n.split(/\s+/).filter(o=>o.length>0);return s.length===0?"?":s.length===1?s[0][0]?.toUpperCase()||"?":s.map(o=>o[0]).join("").toUpperCase().slice(0,2)||"?"},Nu=({src:t,name:n,fallbackClass:s})=>{const[o,c]=La.useState(!t),[u,p]=La.useState(!1);La.useEffect(()=>{t?(c(!1),p(!1)):c(!0)},[t]);const h=()=>{p(!0),c(!0)};return o||u||!t?r.jsx("div",{className:s,children:pD(n)}):r.jsx("img",{src:t,alt:n,className:s,onError:h,loading:"lazy"})},fD=t=>{if(!t)return"Unknown";try{const n=new Date(t);if(isNaN(n.getTime()))return console.warn("Invalid date string:",t),"Invalid date";const s=new Date,o=new Date(s.getFullYear(),s.getMonth(),s.getDate()),c=new Date(o);c.setDate(c.getDate()-1);const u=new Date(n.getFullYear(),n.getMonth(),n.getDate());return u.getTime()===o.getTime()?n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):u.getTime()===c.getTime()?"Yesterday":s.getTime()-n.getTime()<10080*60*1e3?n.toLocaleString("en-US",{weekday:"short"}):n.toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch(n){return console.error("Error formatting time:",n,t),"Invalid date"}},hD=(t,n)=>{if(!t.lastMessage)return{preview:"No messages yet",isReply:!1,hasMention:!1,hasAttachment:!1,isOwnMessage:!1,isSeen:!1};const s=t.lastMessage,o=s.content||"",c=!!s.replyId,u=!!s.fileUrl,p=n?s.senderId===n:!1,h=s.isSeen===!0,m=n?/@\w+/.test(o):!1;let g=o;if(!o&&u&&(g=" Attachment"),t.type!=="dm"&&s.senderUsername){const v=`${s.senderUsername||"Unknown"}: ${g}`;return{preview:v.length>40?v.substring(0,37)+"...":v,isReply:c,hasMention:m,hasAttachment:u,isOwnMessage:p,isSeen:h}}return{preview:g.length>40?g.substring(0,37)+"...":g,isReply:c,hasMention:m,hasAttachment:u,isOwnMessage:p,isSeen:h}},mD=({chats:t,currentChat:n,onSelectChat:s,isLoadingChats:o,user:c,onLogout:u,onMenuOpen:p,searchQuery:h,onSearchChange:m,searchResults:g,onSelectSearchResult:y,isSearching:v,isDarkMode:S,onClearSearch:j,isMobileOpen:C=!1,onMobileClose:T,onlineUsers:E})=>{const z=R=>{if(R.type!=="dm")return!1;if(E&&R.members){const X=R.members.find(P=>P.userId!==c?.id);if(X?.userId&&E.has(X.userId))return E.get(X.userId)||!1}return R.isOnline||!1},L=b.useRef(null);return b.useEffect(()=>{const R=X=>{L.current&&!L.current.contains(X.target)&&j()};return h&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[h,j]),r.jsxs(r.Fragment,{children:[C&&r.jsx("div",{className:N.mobileOverlay,onClick:T,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99,display:"none"}}),r.jsxs("div",{className:`${N.leftPanel} ${S?N.darkMode:""} ${C?N.mobileOpen:""}`,children:[r.jsx("div",{className:N.panelHeader,children:r.jsx("button",{className:N.menuButton,onClick:p,title:"Settings",style:{background:"transparent",border:"none",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:S?"#94a3b8":"#64748b",transition:"background 0.15s ease, color 0.15s ease"},onMouseEnter:R=>{R.currentTarget.style.background=S?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",R.currentTarget.style.color=S?"#f1f5f9":"#1e293b"},onMouseLeave:R=>{R.currentTarget.style.background="transparent",R.currentTarget.style.color=S?"#94a3b8":"#64748b"},children:r.jsx(jb,{size:22})})}),r.jsxs("div",{className:N.searchBar,ref:L,children:[r.jsx("input",{type:"text",placeholder:"Search chats, users...",className:N.searchInput,value:h,onChange:R=>m(R.target.value)}),h&&r.jsxs("div",{className:`${N.searchResults} ${S?N.darkMode:""}`,onClick:R=>R.stopPropagation(),children:[v&&r.jsx("div",{className:N.searchLoading,children:"Searching..."}),!v&&g.length===0&&r.jsx("div",{className:N.searchNoResults,children:"No results found"}),g.map(R=>r.jsxs("div",{className:N.searchResultItem,onClick:()=>{y(R),j()},children:[r.jsx("div",{className:N.searchResultAvatar,children:r.jsx(Nu,{src:R.avatar,name:R.name,fallbackClass:N.avatarFallback})}),r.jsxs("div",{className:N.searchResultInfo,children:[r.jsxs("div",{className:N.searchResultName,children:[R.name,r.jsx("span",{className:N.searchResultTypeIcon,title:R.type,children:R.type==="user"?" ":R.type==="group"?" ":R.type==="channel"?" ":""})]}),r.jsx("div",{className:N.searchResultType,children:R.type==="user"?"User":R.type==="group"?"Group":R.type==="channel"?"Channel":"Unknown"})]})]},R.id))]})]}),r.jsxs("div",{className:N.chatList,children:[o&&r.jsx("div",{className:N.loading,children:"Loading chats..."}),!o&&t.length===0&&r.jsx("div",{className:N.emptyState,children:"No chats yet. Start a conversation!"}),t.map(R=>r.jsxs("div",{className:`${N.chatItem} ${n?.id===R.id?N.active:""}`,onClick:()=>s(R),children:[r.jsxs("div",{className:N.chatAvatar,children:[r.jsx(Nu,{src:R.avatar,name:R.name,fallbackClass:N.avatarFallback}),R.type==="dm"&&z(R)&&r.jsx("div",{className:N.onlineIndicator})]}),r.jsxs("div",{className:N.chatInfo,children:[r.jsxs("div",{className:N.chatHeader,children:[r.jsxs("div",{className:N.chatNameWithType,children:[r.jsx("span",{className:N.chatName,children:R.name}),r.jsx("span",{className:`${N.chatTypeIcon} ${N[`icon${R.type.charAt(0).toUpperCase()+R.type.slice(1)}`]}`,title:R.type,children:R.type==="dm"?"":R.type==="group"?"":R.type==="channel"?"":""})]}),r.jsxs("div",{className:N.headerRight,children:[r.jsx("span",{className:N.timestamp,children:fD(R.updatedAt)}),R.unreadCount>0&&r.jsx("span",{className:N.unreadBadge,children:R.unreadCount})]})]}),r.jsx("div",{className:N.chatPreview,children:(()=>{const X=hD(R,c?.id);return r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx("span",{style:{fontSize:"10px",color:X.isSeen?"#51cf66":"var(--text-secondary)",fontWeight:500,flexShrink:0,opacity:X.isSeen?1:.7},title:X.isSeen?"Seen":"Sent",children:X.isSeen?"":""}),X.isReply&&r.jsx("span",{style:{fontSize:"10px",opacity:.8,flexShrink:0},title:"Reply",children:""}),X.hasMention&&r.jsx("span",{style:{fontSize:"9px",backgroundColor:"var(--accent)",color:"#fff",padding:"1px 4px",borderRadius:"4px",fontWeight:600,flexShrink:0},title:"Mention",children:"@"}),r.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:X.preview})]})})()})]})]},R.id))]}),c&&r.jsxs("div",{className:N.userSection,children:[r.jsx("div",{className:N.userAvatar,children:r.jsx(Nu,{src:c.avatar,name:c.username,fallbackClass:N.avatarFallback})}),r.jsx("div",{className:N.userInfo,children:r.jsx("div",{className:N.username,children:c.username})}),r.jsx("button",{className:N.logoutButton,onClick:u,title:"Logout",children:""})]})]})]})},ar={getNotifications:async()=>{try{console.log("[NotificationService] Fetching notifications from GET /notifications");const t=await De.get("/notifications");console.log("[NotificationService] Raw API Response:",{status:t.status,statusText:t.statusText,data:t.data});let n=[];t.data?.success&&t.data?.data?(n=t.data.data,console.log("[NotificationService] Got notifications from response.data.data:",n.length,"items")):t.data&&Array.isArray(t.data)?(n=t.data,console.log("[NotificationService] Response is direct array:",n.length,"items")):(console.log("[NotificationService] Unexpected response format:",t.data),n=[]);const s=Array.isArray(n)?n.map(o=>({id:o.notificationId||o.id,chatId:o.chatId,messageId:o.messageId,chatName:o.chatName||"",chatAvatar:o.chatAvatar||"",senderName:o.senderName||"",content:o.content||"",fileUrl:o.fileUrl,sentTime:o.sentTime||new Date().toISOString(),seen:o.seen!==void 0?o.seen:!1})):[];return console.log("[NotificationService] Returning",s.length,"normalized notifications"),s}catch(t){return console.error("[NotificationService] Failed to fetch notifications:",t.message),console.error("[NotificationService] Error details:",{status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,url:t.config?.url}),[]}},markAsSeen:async t=>{try{console.log("[NotificationService] Marking notification as seen:",t);const n=await De.put(`/notifications/seen?notificationId=${t}`);return console.log("[NotificationService] Mark as seen response:",n.data),n.data?.data||n.data}catch(n){throw console.error("[NotificationService] Failed to mark notification as seen:",n),console.error("[NotificationService] Error details:",{status:n.response?.status,statusText:n.response?.statusText,data:n.response?.data}),n}},markMultipleAsSeen:async t=>{try{if(!Array.isArray(t)||t.length===0)return console.warn("[NotificationService] No notification IDs provided"),{success:!0};console.log("[NotificationService] Marking multiple notifications as seen:",t),console.log("[NotificationService] Notification IDs (type, count):",typeof t[0],t.length);const n={notificationIds:t};console.log("[NotificationService] Request body:",JSON.stringify(n));const s=await De.put("/notifications/seen/batch",n);return console.log("[NotificationService] Mark multiple response:",{status:s.status,statusText:s.statusText,data:s.data}),s.data?.success||s.status===200?(console.log("[NotificationService] Successfully marked",t.length,"notifications as seen"),s.data||{success:!0}):(console.warn("[NotificationService] Response indicates potential issue:",s.data),s.data||{success:!0})}catch(n){throw console.error("[NotificationService] Failed to mark multiple notifications as seen:",n),console.error("[NotificationService] Full error details:",{message:n.message,status:n.response?.status,statusText:n.response?.statusText,responseData:n.response?.data,requestData:n.config?.data,headers:n.config?.headers}),n}},markAllAsSeen:async()=>{try{const t=await De.put("/notifications/seen/all");return t.data?.data||t.data}catch(t){throw console.warn("[NotificationService] PUT /notifications/seen/all may not be implemented:",t),t}}},Zf=Object.freeze(Object.defineProperty({__proto__:null,notificationService:ar},Symbol.toStringTag,{value:"Module"})),gD={sm:8,md:10,lg:12},pb={scale:[1,1.2,1],opacity:[1,.8,1]},yD={boxShadow:["0 0 0 0 rgba(34, 197, 94, 0.4)","0 0 0 4px rgba(34, 197, 94, 0.2)","0 0 0 0 rgba(34, 197, 94, 0)"]},fb=({isOnline:t,size:n="sm",showLabel:s=!1,lastSeen:o,position:c="standalone",className:u=""})=>{const p=gD[n],g={width:p,height:p,backgroundColor:t?"var(--online-color, #22c55e)":"var(--offline-color, #94a3b8)",borderRadius:"50%"};return c==="avatar-overlay"?r.jsx(se.div,{className:u,style:{...g,position:"absolute",bottom:0,right:0,border:"2px solid var(--surface)",boxShadow:t?"0 0 8px rgba(34, 197, 94, 0.5)":"none"},animate:t?{...pb,...yD}:{},transition:{duration:2,repeat:1/0,ease:"easeInOut"},title:t?"Online":o?`Last seen ${$u(o)}`:"Offline"}):r.jsxs("div",{className:u,style:{display:"flex",alignItems:"center",gap:s?"6px":"0"},children:[r.jsx(se.div,{style:{...g,flexShrink:0,boxShadow:t?"0 0 8px rgba(34, 197, 94, 0.5)":"none"},animate:t?pb:{},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),s&&r.jsx(se.span,{initial:{opacity:0,x:-5},animate:{opacity:1,x:0},transition:{duration:.2},style:{fontSize:"13px",color:t?"var(--online-color, #22c55e)":"var(--text-muted)",whiteSpace:"nowrap",fontWeight:t?500:400},children:t?"Online":o?`Last seen ${$u(o)}`:"Offline"})]})},xD="_container_yar5o_1",vD="_header_yar5o_8",bD="_headerLeft_yar5o_24",SD="_pinIcon_yar5o_30",wD="_title_yar5o_34",_D="_count_yar5o_40",CD="_headerRight_yar5o_51",jD="_content_yar5o_57",TD="_loading_yar5o_63",kD="_spinner_yar5o_73",MD="_messagesList_yar5o_82",ED="_pinnedMessage_yar5o_87",AD="_messageAvatar_yar5o_105",RD="_avatarFallback_yar5o_119",ND="_messageContent_yar5o_131",DD="_messageHeader_yar5o_136",zD="_senderName_yar5o_143",BD="_messageTime_yar5o_149",UD="_messageText_yar5o_154",ID="_pinnedBy_yar5o_164",OD="_messageActions_yar5o_173",LD="_jumpButton_yar5o_180",PD="_unpinButton_yar5o_181",Ht={container:xD,header:vD,headerLeft:bD,pinIcon:SD,title:wD,count:_D,headerRight:CD,content:jD,loading:TD,spinner:kD,messagesList:MD,pinnedMessage:ED,messageAvatar:AD,avatarFallback:RD,messageContent:ND,messageHeader:DD,senderName:zD,messageTime:BD,messageText:UD,pinnedBy:ID,messageActions:OD,jumpButton:LD,unpinButton:PD},HD=({chatId:t,onJumpToMessage:n,canUnpin:s})=>{const[o,c]=b.useState(!1),[u,p]=b.useState(null),{loadPinnedMessages:h,getPinnedMessages:m,unpinMessage:g,isLoadingPinned:y}=Le(),v=m(t);b.useEffect(()=>{t&&h(t)},[t,h]);const S=async j=>{p(j);try{await g(j)}catch(C){console.error("Failed to unpin message:",C)}finally{p(null)}};return v.length===0?null:r.jsxs("div",{className:Ht.container,children:[r.jsxs("button",{className:Ht.header,onClick:()=>c(!o),children:[r.jsxs("div",{className:Ht.headerLeft,children:[r.jsx(Al,{size:16,className:Ht.pinIcon}),r.jsx("span",{className:Ht.title,children:"Pinned Messages"}),r.jsx("span",{className:Ht.count,children:v.length})]}),r.jsx("div",{className:Ht.headerRight,children:o?r.jsx(L_,{size:18}):r.jsx(ah,{size:18})})]}),o&&r.jsx("div",{className:Ht.content,children:y?r.jsxs("div",{className:Ht.loading,children:[r.jsx(sn,{size:20,className:Ht.spinner}),r.jsx("span",{children:"Loading pinned messages..."})]}):r.jsx("div",{className:Ht.messagesList,children:v.map(j=>r.jsxs("div",{className:Ht.pinnedMessage,children:[r.jsx("div",{className:Ht.messageAvatar,children:j.senderAvatarUrl?r.jsx("img",{src:pt(j.senderAvatarUrl)||j.senderAvatarUrl,alt:j.senderUsername}):r.jsx("div",{className:Ht.avatarFallback,children:Mn(j.senderUsername)})}),r.jsxs("div",{className:Ht.messageContent,children:[r.jsxs("div",{className:Ht.messageHeader,children:[r.jsx("span",{className:Ht.senderName,children:j.senderUsername}),r.jsx("span",{className:Ht.messageTime,children:Hu(j.sentAt)})]}),r.jsx("div",{className:Ht.messageText,children:j.content||(j.fileUrl?"[File attachment]":"[Empty message]")}),j.pinnedByUsername&&r.jsxs("div",{className:Ht.pinnedBy,children:[r.jsx(Al,{size:12}),r.jsxs("span",{children:["Pinned by ",j.pinnedByUsername]})]})]}),r.jsxs("div",{className:Ht.messageActions,children:[r.jsx("button",{className:Ht.jumpButton,onClick:()=>n(j.messageId),title:"Jump to message",children:r.jsx(gi,{size:16})}),s&&r.jsx("button",{className:Ht.unpinButton,onClick:()=>S(j.messageId),disabled:u===j.messageId,title:"Unpin message",children:u===j.messageId?r.jsx(sn,{size:16,className:Ht.spinner}):r.jsx("span",{style:{fontSize:"18px",fontWeight:300,lineHeight:1},children:""})})]})]},j.messageId))})})]})},$D=({isOpen:t,onClose:n,chatId:s,chatType:o,onMemberAdded:c})=>{const[u,p]=b.useState(""),[h,m]=b.useState([]),[g,y]=b.useState(!1),[v,S]=b.useState(!1),j=b.useRef(null),C=async E=>{if(p(E),!E.trim()){m([]);return}j.current&&clearTimeout(j.current),y(!0),j.current=setTimeout(async()=>{try{const L=await(await zt(()=>Promise.resolve().then(()=>fa),void 0).then(R=>R.userService)).searchUsers(E);m(L)}catch(z){console.error("Search failed:",z),m([])}finally{y(!1)}},300)},T=async(E,z)=>{S(!0);try{o==="group"?await Ee.addMemberToGroup(s,E):o==="channel"&&await Ee.addMemberToChannel(s,E),await c(),n()}catch(L){console.error("Failed to add member:",L)}finally{S(!1)}};return t?r.jsx("div",{className:N.modalOverlay,onClick:n,children:r.jsxs("div",{className:N.modal,onClick:E=>E.stopPropagation(),style:{maxWidth:"500px"},children:[r.jsxs("div",{className:N.modalHeader,children:[r.jsx("h2",{children:"Add Member"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsxs("div",{className:N.modalBody,children:[r.jsxs("div",{className:N.formGroup,children:[r.jsx("label",{children:"Search Users"}),r.jsx("input",{type:"text",placeholder:"Type username to search...",value:u,onChange:E=>C(E.target.value),className:N.formInput})]}),g&&r.jsx("div",{className:N.loadingState,children:"Searching..."}),h.length>0&&r.jsx("div",{style:{marginTop:"16px",maxHeight:"300px",overflowY:"auto"},children:h.map(E=>r.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px",borderRadius:"8px",backgroundColor:"var(--background)",marginBottom:"8px"},children:[r.jsx("div",{style:{marginRight:"10px"},children:E.avatar?r.jsx("img",{src:E.avatar,alt:E.username,style:{width:"32px",height:"32px",borderRadius:"50%"}}):r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--accent)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"13px"},children:Mn(E.username)})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:E.username}),r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:E.email})]}),r.jsx("button",{onClick:()=>T(E.id,E.username),disabled:v,style:{padding:"6px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600},children:"Add"})]},E.id))}),u&&!g&&h.length===0&&r.jsx("div",{className:N.emptyState,children:"No users found"})]}),r.jsx("div",{className:N.modalFooter,children:r.jsx("button",{onClick:n,className:N.primaryButton,children:"Close"})})]})}):null},VD=({currentChat:t,messages:n,isLoadingMessages:s,onSendMessage:o,onOpenGroupCreate:c,onOpenChannelCreate:u,onOpenUserProfile:p,onOpenMobileSidebar:h,onOpenChatProfile:m})=>{const[g,y]=b.useState(""),[v,S]=b.useState(!1),[j,C]=b.useState(null),[T,E]=b.useState(""),[z,L]=b.useState(null),[R,X]=b.useState(!1),[P,te]=b.useState(null),[re,Q]=b.useState(!1),[ge,me]=b.useState(!1),[Pe,qe]=b.useState(!1),Qe=b.useRef(null),Re=b.useRef(null),Te=b.useRef(null),[B,ne]=b.useState(null),le=b.useRef(null),{isUserOnline:Se,getUserLastSeen:He,getOnlineMembersCount:we,loadPermissions:Ae}=Le(),{user:je}=wt(),ie=b.useRef(new Set),_e=b.useRef(null),he=b.useRef(0),_t=b.useRef(n),Ct=b.useRef(new Set),Bt=b.useRef(null),jt=b.useRef(null);b.useEffect(()=>{_t.current=n},[n]),b.useEffect(()=>{if(!t||!je)return;const $=Te.current;if(!$)return;ie.current=new Set,Ct.current=new Set;const Y=async()=>{const ye=Array.from(Ct.current);if(ye.length!==0){Ct.current=new Set;try{await ar.markMultipleAsSeen(ye)}catch(Oe){console.error("[ChatView] Failed to mark notifications as seen:",Oe)}}},I=new IntersectionObserver(ye=>{ye.forEach(Oe=>{if(Oe.isIntersecting){const ut=Oe.target.dataset.messageId;if(!ut||ie.current.has(ut))return;const On=_t.current.find(ma=>ma.messageId===ut);if(!On)return;!On.isCurrentUser&&On.isNotificated&&On.notificationId&&(ie.current.add(ut),Ct.current.add(On.notificationId),Bt.current&&clearTimeout(Bt.current),Bt.current=setTimeout(Y,500))}})},{root:$,rootMargin:"0px",threshold:.5});return jt.current=I,$.querySelectorAll("[data-message-id]").forEach(ye=>I.observe(ye)),()=>{I.disconnect(),jt.current=null,Bt.current&&clearTimeout(Bt.current)}},[t?.id,je]),b.useEffect(()=>{const $=Te.current;if(!$||!jt.current)return;$.querySelectorAll("[data-message-id]").forEach(I=>{const pe=I.dataset.messageId;pe&&!ie.current.has(pe)&&jt.current?.observe(I)})},[n.length]);const{canSendMessage:rn,canPinMessages:Tt,canManageMessages:ln,isLoading:gt}=id(t?.id);b.useEffect(()=>{console.log("[ChatView] Permission useEffect triggered:",{hasChatId:!!t?.id,chatType:t?.type,hasLoadPermissions:typeof Ae=="function"}),t&&(t.type==="group"||t.type==="channel")&&(console.log("[ChatView] Calling loadPermissions for chat:",t.id),Ae(t.id))},[t?.id,Ae]),b.useEffect(()=>{(async()=>{if(console.log("[ChatView] checkBlockStatus called:",{hasCurrent:!!t,type:t?.type,hasUser:!!je,members:t?.members?.map(I=>({id:I.id,odUserId:I.userId}))}),!t||t.type!=="dm"||!je){Q(!1),me(!1);return}const Y=t.members?.find(I=>(I.userId||I.id)!==je.id);if(console.log("[ChatView] otherMember found:",Y,"using userId:",Y?.userId,"or id:",Y?.id),!Y){Q(!1),me(!1);return}qe(!0);try{const{userService:I}=await zt(async()=>{const{userService:ut}=await Promise.resolve().then(()=>fa);return{userService:ut}},void 0),pe=Y.userId||Y.id;console.log("[ChatView] Checking mutual block status for user:",pe);const{iBlockedThem:ye,theyBlockedMe:Oe}=await I.getMutualBlockStatus(pe);console.log("[ChatView] Block status result:",{iBlockedThem:ye,theyBlockedMe:Oe}),me(ye),Q(Oe)}catch(I){console.error("Failed to check block status:",I)}finally{qe(!1)}})()},[t?.id,t?.type,t?.members,je?.id]);const{usersYouBlocked:In,blockedByUsers:ft}=Le();b.useEffect(()=>{if(!t||t.type!=="dm"||!je)return;const $=t.members?.find(ye=>(ye.userId||ye.id)!==je.id);if(!$)return;const Y=$.userId||$.id;if(!Y)return;const I=In.has(Y),pe=ft.has(Y);console.log("[ChatView] Store block status changed:",{otherUserId:Y,iBlockedInStore:I,blockedByInStore:pe,currentDidIBlock:ge,currentIsBlocked:re}),I!==ge&&me(I),pe!==re&&Q(pe)},[t?.id,t?.type,t?.members,je?.id,In,ft]);const xt=$=>$.type!=="dm"||!$.members||!je?null:$.members.find(I=>I.userId!==je.id)?.userId||null,Vt=()=>{Qe.current?.scrollIntoView({behavior:"smooth"})},yn=()=>{const $=Te.current;if(!$)return;const Y=$.scrollHeight,I=$.scrollTop,pe=$.clientHeight,ye=Y-I-pe<100;X(!ye)};b.useEffect(()=>{const $=t?.id!==_e.current,Y=n.length>he.current;_e.current=t?.id||null,he.current=n.length,($||Y)&&(Vt(),X(!1))},[n,t?.id]);const at=async()=>{if(console.log("[ChatView] handleSendMessage called",{messageText:g,selectedFile:B?{name:B.name,size:B.size,type:B.type}:null,currentChat:t?.id}),!g.trim()&&!B||!t){console.log("[ChatView] Early return - no content or no chat");return}S(!0);try{console.log("[ChatView] Calling onSendMessage with file:",B?B.name:"none","replyId:",P?.messageId),await o(g,B||void 0,P?.messageId),console.log("[ChatView] onSendMessage completed"),y(""),ne(null),te(null),le.current&&(le.current.value="")}catch($){console.error("[ChatView] Failed to send message:",$),Uj($)&&(Ij($)?Q(!0):me(!0))}finally{S(!1)}},Qt=async($,Y)=>{try{const{messageService:I}=await zt(async()=>{const{messageService:ye}=await Promise.resolve().then(()=>Rh);return{messageService:ye}},void 0);await I.toggleReactionByEmoji($,Y);const pe=Le.getState();t&&await pe.loadMessages(t.id)}catch(I){console.error("Failed to toggle reaction:",I)}},Zt=($,Y,I)=>{$.preventDefault(),$.stopPropagation(),L({messageId:Y,x:$.clientX,y:$.clientY})},Gn=async $=>{try{await Le.getState().pinMessage($),L(null)}catch(Y){console.error("Failed to pin message:",Y)}},oe=async $=>{try{await Le.getState().unpinMessage($),L(null)}catch(Y){console.error("Failed to unpin message:",Y)}},ue=$=>{const Y=document.querySelector(`[data-message-id="${$}"]`);Y&&(Y.scrollIntoView({behavior:"smooth",block:"center"}),Y.classList.add("message-highlight"),setTimeout(()=>Y.classList.remove("message-highlight"),2e3))},dt=$=>{const Y=n.find(I=>I.messageId===$);Y&&(C($),E(Y.content),L(null))},ct=async $=>{if(T.trim())try{await Le.getState().editMessage($,T),C(null),E("")}catch(Y){console.error("Failed to edit message:",Y)}},Ut=()=>{C(null),E("")},xn=async $=>{if(await Cn({title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))try{await(await zt(()=>Promise.resolve().then(()=>Rh),void 0).then(ye=>ye.messageService)).deleteMessage($),L(null);const pe=Le.getState();t&&await pe.loadMessages(t.id)}catch(I){console.error("Failed to delete message:",I)}};return b.useEffect(()=>{const $=Y=>{Re.current&&!Re.current.contains(Y.target)&&L(null)};return z&&document.addEventListener("click",$),()=>{document.removeEventListener("click",$)}},[z]),t?r.jsxs("div",{className:N.mainContent,style:{position:"relative"},children:[r.jsxs("div",{className:N.chatHeaderBar,children:[r.jsxs("div",{className:N.headerLeft,children:[h&&r.jsx("button",{onClick:h,className:N.mobileMenuButton,style:{display:"none",padding:"8px",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"var(--text)",marginRight:"8px"},"aria-label":"Open menu",children:""}),r.jsx("div",{className:N.headerAvatar,children:r.jsx(Nu,{src:t.avatar,name:t.name,fallbackClass:N.avatarFallback})}),r.jsxs("div",{className:N.headerInfo,children:[r.jsxs("h2",{className:N.headerTitle,children:[t.name,r.jsx("span",{className:N.headerChatType,title:t.type,children:t.type==="dm"?" ":t.type==="group"?" ":t.type==="channel"?" ":" "})]}),r.jsx("div",{className:N.headerStatus,children:t.type==="dm"?(()=>{const $=xt(t);if($){const Y=Se($),I=He($);return r.jsx(fb,{isOnline:Y,lastSeen:I,size:"sm",showLabel:!0,position:"standalone"})}return r.jsx(fb,{isOnline:t.isOnline||!1,size:"sm",showLabel:!0,position:"standalone"})})():(()=>{const $=we(t.id),Y=t.members?.length||t.participantsCount||0;return console.log("[ChatView] Member count debug:",{chatId:t.id,chatName:t.name,membersLength:t.members?.length,participantsCount:t.participantsCount,totalMembers:Y,fullChat:t}),r.jsx("span",{children:Y>0?r.jsxs(r.Fragment,{children:[Y," member",Y!==1?"s":"",$>0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{style:{margin:"0 4px",color:"var(--text-muted)"},children:""}),r.jsxs("span",{style:{color:"#51cf66",fontWeight:600},children:[$," online"]})]})]}):r.jsx("span",{style:{color:"var(--text-muted)"},children:"Members"})})})()})]})]}),r.jsx("div",{className:N.headerActions,children:t.type!=="dm"&&r.jsxs("button",{onClick:()=>{m&&m()},style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1))",border:"1px solid rgba(99, 102, 241, 0.3)",cursor:"pointer",padding:"8px 14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",borderRadius:"12px",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(99, 102, 241, 0.2)"},onMouseEnter:$=>{$.currentTarget.style.background="linear-gradient(135deg, rgba(99, 102, 241, 0.25), rgba(139, 92, 246, 0.2))",$.currentTarget.style.boxShadow="0 4px 16px rgba(99, 102, 241, 0.35)",$.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:$=>{$.currentTarget.style.background="linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1))",$.currentTarget.style.boxShadow="0 2px 8px rgba(99, 102, 241, 0.2)",$.currentTarget.style.transform="translateY(0)"},title:`View ${t.type==="channel"?"Channel":"Group"} Profile`,children:[t.type==="channel"?r.jsx(P_,{size:16,color:"#818cf8"}):r.jsx(wn,{size:16,color:"#818cf8"}),r.jsxs("span",{style:{fontSize:"13px",fontWeight:600,color:"#818cf8",letterSpacing:"0.3px"},children:[t.type==="channel"?"Channel":"Group"," Profile"]})]})})]}),r.jsx(HD,{chatId:t.id,onJumpToMessage:ue,canUnpin:Tt}),r.jsxs("div",{className:N.messagesContainer,ref:Te,onScroll:yn,children:[s&&r.jsx("div",{className:N.loading,children:"Loading messages..."}),!s&&(!n||n.length===0)&&r.jsx("div",{className:N.noMessages,children:"No messages yet. Start the conversation!"}),Array.isArray(n)&&n.map($=>r.jsxs("div",{"data-message-id":$.messageId,className:`${N.messageGroup} ${$.isCurrentUser?N.ownMessage:N.otherMessage} ${$.isCurrentUser?"message-self-enter":"message-other-enter"} ${$.isPinned?"message-pinned":""}`,style:{position:"relative"},children:[!$.isCurrentUser&&r.jsx("div",{className:N.senderAvatar,onClick:()=>p($.senderId),style:{cursor:"pointer"},children:$.senderAvatarUrl?r.jsx("img",{src:$.senderAvatarUrl,alt:$.senderUsername}):r.jsx("div",{className:N.avatarFallback,children:Mn($.senderUsername)})}),j===$.messageId?r.jsxs("div",{className:N.messageBubble,style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("textarea",{value:T,onChange:Y=>E(Y.target.value),style:{padding:"12px 14px",borderRadius:"10px",border:"2px solid var(--accent)",backgroundColor:"var(--background)",color:"var(--text)",fontSize:"15px",fontFamily:"inherit",minHeight:"60px",resize:"vertical"}}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>ct($.messageId),style:{padding:"6px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Save"}),r.jsx("button",{onClick:Ut,style:{padding:"6px 12px",backgroundColor:"var(--border)",color:"var(--text)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Cancel"})]})]}):r.jsxs("div",{className:N.messageBubble,onContextMenu:Y=>Zt(Y,$.messageId,$.isCurrentUser),style:{position:"relative"},children:[!$.isCurrentUser&&r.jsx("div",{className:N.senderName,children:$.senderUsername}),$.replyId&&(()=>{const Y=n.find(pe=>pe.messageId===$.replyId),I=Y?Y.content?.substring(0,40)||(Y.fileUrl?" File":"..."):"Message deleted";return r.jsxs("div",{onClick:()=>Y&&ue($.replyId),style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 8px",marginBottom:"4px",fontSize:"11px",color:"var(--text-secondary)",backgroundColor:$.isCurrentUser?"rgba(0,0,0,0.15)":"rgba(255,255,255,0.08)",borderRadius:"4px",cursor:Y?"pointer":"default",borderLeft:"2px solid var(--accent)"},children:[r.jsx("span",{style:{opacity:.7},children:""}),r.jsxs("span",{style:{fontWeight:600,color:"var(--accent)",fontSize:"10px"},children:[Y?.senderUsername||"Unknown",":"]}),r.jsxs("span",{style:{opacity:.8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[I,Y?.content&&Y.content.length>40?"...":""]})]})})(),r.jsx("div",{className:N.messageContent,children:$.content}),$.fileUrl&&(()=>{const Y=pt($.fileUrl)||$.fileUrl;return r.jsx("div",{style:{marginTop:"8px"},children:/\.(jpg|jpeg|png|gif|webp|bmp|svg)$/i.test(Y)?r.jsxs("a",{href:Y,target:"_blank",rel:"noopener noreferrer",children:[r.jsx("img",{src:Y,alt:"Attachment",style:{maxWidth:"300px",maxHeight:"200px",borderRadius:"8px",objectFit:"cover",cursor:"pointer"},onError:I=>{I.currentTarget.style.display="none";const pe=I.currentTarget.nextElementSibling;pe&&(pe.style.display="flex")}}),r.jsx("div",{style:{display:"none",alignItems:"center",gap:"6px",padding:"8px 12px",background:"var(--background)",borderRadius:"8px",color:"var(--text-secondary)",fontSize:"13px"},children:" Image (click to view)"})]}):/\.(mp4|webm|ogg|mov)$/i.test(Y)?r.jsx("video",{src:Y,controls:!0,style:{maxWidth:"300px",maxHeight:"200px",borderRadius:"8px"}}):/\.(mp3|wav|ogg|m4a)$/i.test(Y)?r.jsx("audio",{src:Y,controls:!0,style:{maxWidth:"300px"}}):r.jsxs("a",{href:Y,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 14px",background:"var(--background)",borderRadius:"8px",color:"var(--text)",textDecoration:"none",fontSize:"13px",transition:"background 0.15s ease"},onMouseEnter:I=>I.currentTarget.style.background="var(--border)",onMouseLeave:I=>I.currentTarget.style.background="var(--background)",children:[r.jsx("span",{style:{fontSize:"18px"},children:/\.pdf$/i.test(Y)?"":/\.(doc|docx)$/i.test(Y)?"":/\.(xls|xlsx)$/i.test(Y)?"":/\.(zip|rar|7z)$/i.test(Y)?"":""}),r.jsx("span",{children:Y.split("/").pop()?.substring(37)||"Download file"})]})})})(),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",flexWrap:"wrap"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[r.jsx("span",{className:N.messageTime,children:Hu($.sentAt)}),r.jsx("span",{style:{fontSize:"11px",color:$.isSeen?"#51cf66":"rgba(255,255,255,0.5)",fontWeight:500},title:$.isSeen?"Seen":"Sent",children:$.isSeen?"":""})]}),$.messageReactions&&$.messageReactions.length>0&&(()=>{const Y=$.messageReactions.reduce((pe,ye)=>{const Oe=ye.reactionType||ye.type||"Like";return pe[Oe]||(pe[Oe]={count:0,users:[]}),pe[Oe].count++,pe[Oe].users.push(ye.userName||ye.userId),pe},{}),I={Like:"",Love:"",Laugh:"",Sad:"",Angry:""};return r.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"2px",padding:"2px 6px",backgroundColor:"rgba(0,0,0,0.15)",borderRadius:"12px",fontSize:"12px"},children:Object.entries(Y).map(([pe,ye])=>r.jsxs("span",{onClick:()=>Qt($.messageId,I[pe]||""),title:ye.users.join(", "),style:{cursor:"pointer"},children:[I[pe],ye.count>1&&r.jsx("span",{style:{fontSize:"10px",marginLeft:"1px"},children:ye.count})]},pe))})})(),r.jsx("button",{onClick:Y=>{Y.stopPropagation(),L({messageId:$.messageId,x:Y.clientX,y:Y.clientY})},title:"Actions",style:{padding:"2px 6px",backgroundColor:"transparent",border:"1px solid var(--border)",borderRadius:"10px",cursor:"pointer",fontSize:"12px",opacity:.6,transition:"opacity 0.2s"},onMouseEnter:Y=>Y.currentTarget.style.opacity="1",onMouseLeave:Y=>Y.currentTarget.style.opacity="0.6",children:""})]})]}),z?.messageId===$.messageId&&r.jsxs("div",{ref:Re,style:{position:"fixed",top:Math.min(Math.max(z.y-20,10),window.innerHeight-180),left:Math.min(Math.max(z.x-70,10),window.innerWidth-150),backgroundColor:"var(--surface)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.15)",zIndex:1e3,width:"140px",padding:"4px"},children:[r.jsx("div",{style:{display:"flex",justifyContent:"space-around",padding:"4px 2px",borderBottom:"1px solid var(--border)",marginBottom:"2px"},children:["","","","",""].map(Y=>r.jsx("button",{onClick:()=>{Qt($.messageId,Y),L(null)},style:{padding:"2px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",lineHeight:1},onMouseEnter:I=>{I.currentTarget.style.backgroundColor="rgba(99, 102, 241, 0.2)"},onMouseLeave:I=>{I.currentTarget.style.backgroundColor="transparent"},children:Y},Y))}),r.jsxs("button",{onClick:()=>{te($),L(null)},style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:Y=>Y.currentTarget.style.background="var(--background)",onMouseLeave:Y=>Y.currentTarget.style.background="transparent",children:[r.jsx("span",{style:{fontSize:"14px"},children:""}),"Reply"]}),Tt&&r.jsxs("button",{onClick:()=>$.isPinned?oe($.messageId):Gn($.messageId),style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:Y=>Y.currentTarget.style.background="var(--background)",onMouseLeave:Y=>Y.currentTarget.style.background="transparent",children:[r.jsx("span",{style:{fontSize:"14px"},children:""}),$.isPinned?"Unpin":"Pin"]}),($.isCurrentUser||ln)&&r.jsxs("button",{onClick:()=>dt($.messageId),style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:Y=>Y.currentTarget.style.background="var(--background)",onMouseLeave:Y=>Y.currentTarget.style.background="transparent",children:[r.jsx("span",{style:{fontSize:"14px"},children:""}),"Edit"]}),($.isCurrentUser||ln)&&r.jsxs("button",{onClick:()=>xn($.messageId),style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"#ef4444",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:Y=>Y.currentTarget.style.background="rgba(239, 68, 68, 0.1)",onMouseLeave:Y=>Y.currentTarget.style.background="transparent",children:[r.jsx("span",{style:{fontSize:"14px"},children:""}),"Delete"]})]})]},$.messageId)),r.jsx("div",{ref:Qe})]}),R&&r.jsx("button",{onClick:Vt,title:"Scroll to bottom",style:{position:"absolute",bottom:"90px",right:"24px",width:"44px",height:"44px",borderRadius:"50%",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",color:"#fff",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.4)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:10},onMouseEnter:$=>{$.currentTarget.style.transform="translateY(-3px) scale(1.05)",$.currentTarget.style.boxShadow="0 8px 25px rgba(99, 102, 241, 0.5)"},onMouseLeave:$=>{$.currentTarget.style.transform="translateY(0) scale(1)",$.currentTarget.style.boxShadow="0 4px 15px rgba(99, 102, 241, 0.4)"},children:r.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"6 9 12 15 18 9"})})}),t.type==="dm"&&Pe?r.jsx("div",{style:{padding:"16px 20px",textAlign:"center",color:"#94a3b8",backgroundColor:"rgba(30, 41, 59, 0.5)",borderTop:"1px solid rgba(99, 102, 241, 0.2)",fontSize:"14px"},children:"Loading..."}):t.type==="dm"&&re?r.jsxs("div",{style:{padding:"16px 20px",textAlign:"center",color:"#f87171",backgroundColor:"rgba(239, 68, 68, 0.1)",borderTop:"1px solid rgba(239, 68, 68, 0.3)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[r.jsx("span",{style:{fontSize:"18px"},children:""}),"This user has blocked you. You cannot send them messages."]}):t.type==="dm"&&ge?r.jsxs("div",{style:{padding:"16px 20px",textAlign:"center",color:"#f87171",backgroundColor:"rgba(239, 68, 68, 0.1)",borderTop:"1px solid rgba(239, 68, 68, 0.3)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[r.jsx("span",{style:{fontSize:"18px"},children:""}),"You have blocked this user. Unblock them to send messages."]}):t.type!=="dm"&&gt?r.jsx("div",{style:{padding:"16px 20px",textAlign:"center",color:"#94a3b8",backgroundColor:"rgba(30, 41, 59, 0.5)",borderTop:"1px solid rgba(99, 102, 241, 0.2)",fontSize:"14px"},children:"Loading..."}):!rn&&t.type!=="dm"?r.jsxs("div",{style:{padding:"16px 20px",textAlign:"center",color:"#94a3b8",backgroundColor:"rgba(30, 41, 59, 0.8)",borderTop:"1px solid rgba(99, 102, 241, 0.2)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[r.jsx("span",{style:{fontSize:"18px"},children:""}),"You don't have permission to send messages in this chat"]}):r.jsxs("div",{className:N.messageInput,children:[P&&r.jsx("div",{style:{position:"absolute",bottom:"100%",left:0,right:0,padding:"10px 14px",backgroundColor:"var(--surface)",borderTop:"3px solid var(--accent)",borderRadius:"8px 8px 0 0",boxShadow:"0 -2px 10px rgba(0,0,0,0.1)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"12px"},children:[r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[r.jsx("span",{style:{fontSize:"14px"},children:""}),r.jsxs("span",{style:{color:"var(--accent)",fontWeight:600,fontSize:"13px"},children:["Replying to ",P.senderUsername]})]}),r.jsxs("div",{style:{padding:"8px 10px",backgroundColor:"var(--background)",borderRadius:"6px",borderLeft:"3px solid var(--accent)"},children:[P.fileUrl&&r.jsx("div",{style:{marginBottom:"4px",fontSize:"12px",color:"var(--text-secondary)"},children:" Attachment"}),r.jsx("div",{style:{color:"var(--text)",fontSize:"13px",wordBreak:"break-word"},children:P.content?r.jsxs(r.Fragment,{children:[P.content.substring(0,100),P.content.length>100?"...":""]}):r.jsx("span",{style:{color:"var(--text-secondary)",fontStyle:"italic"},children:P.fileUrl?"File attachment":"No content"})})]})]}),r.jsx("button",{onClick:()=>te(null),style:{padding:"6px",backgroundColor:"var(--background)",border:"none",borderRadius:"50%",cursor:"pointer",color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s"},onMouseEnter:$=>$.currentTarget.style.backgroundColor="var(--border)",onMouseLeave:$=>$.currentTarget.style.backgroundColor="var(--background)",title:"Cancel reply",children:""})]})}),r.jsx("input",{type:"text",placeholder:P?"Type your reply...":"Type a message...",value:g,onChange:$=>y($.target.value),onKeyPress:$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),at())},className:N.inputField,disabled:v}),r.jsx("input",{ref:le,type:"file",accept:"image/*,video/*,audio/*,application/pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar",style:{display:"none"},onChange:$=>{const Y=$.target.files?.[0];console.log("[ChatView] File selected:",Y?{name:Y.name,size:Y.size,type:Y.type}:null),Y&&ne(Y)}}),r.jsx("button",{type:"button",className:N.attachButton,title:"Attach file",onClick:()=>{console.log("[ChatView] Attach button clicked, fileInputRef:",le.current),le.current?.click()},children:""}),B&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 12px",background:"var(--background)",borderRadius:"8px",border:"1px solid var(--border)",maxWidth:"200px"},children:[B.type.startsWith("image/")?r.jsx("img",{src:URL.createObjectURL(B),alt:"Preview",style:{width:"36px",height:"36px",borderRadius:"4px",objectFit:"cover"}}):r.jsx("span",{style:{fontSize:"24px"},children:B.type.includes("pdf")?"":B.type.includes("video")?"":""}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontSize:"12px",fontWeight:500,color:"var(--text)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:B.name}),r.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)"},children:[(B.size/1024).toFixed(1)," KB"]})]}),r.jsx("button",{onClick:()=>{ne(null),le.current&&(le.current.value="")},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"var(--text-secondary)",padding:"2px",lineHeight:1},children:""})]}),r.jsx("button",{type:"button",onClick:at,disabled:!g.trim()&&!B||v,className:N.sendButton,children:v?"...":""})]})]}):r.jsx("div",{className:N.mainContent,children:r.jsxs("div",{className:N.emptyScreen,children:[r.jsx("div",{className:N.emptyIcon,children:""}),r.jsx("h2",{children:"Select a chat to start messaging"}),r.jsx("p",{children:"Choose a conversation from the list or start a new one"}),r.jsxs("div",{className:N.emptyActions,children:[r.jsx("button",{className:N.actionButton,onClick:c,children:"Create Group"}),r.jsx("button",{className:N.actionButton,onClick:u,children:"Create Channel"})]})]})})},xe={abyss:"#050505",obsidian:"#0a0a0a",charcoal:"#0f0f0f",slate:"#151515",border:"#1a1a1a",borderLight:"#252525",surfaceHover:"#1c1c1c",emerald:"#10b981",emeraldBright:"#34d399",emeraldDark:"#059669",emeraldGlow:"rgba(16, 185, 129, 0.4)",sapphire:"#3b82f6",amethyst:"#8b5cf6",amber:"#f59e0b",ruby:"#ef4444",rubyDark:"#dc2626",indigo:"#6366f1",text:"#ffffff",textSecondary:"#a1a1aa",textMuted:"#71717a",textDim:"#52525b"},FD=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M5.5 3.21V20.8l4.75-4.73 2.99 6.73L15.5 21.6l-3-6.7h6z'/%3E%3Cpath fill='%23064e3b' d='M6.5 5.61v11.68l3.38-3.37.37-.37.48 1.07 1.93 4.35 1.07-.47L11.8 14.1l-.48-1.07H16z'/%3E%3C/svg%3E") 5 3, default`,qD=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M9 2.5a2.5 2.5 0 0 1 5 0v7.996l3.904-.74a2.095 2.095 0 0 1 2.537 2.466L19.5 17.5a6 6 0 0 1-6 6H11a7 7 0 0 1-7-7V9a2 2 0 1 1 4 0v3.5h1z'/%3E%3Cpath fill='%23064e3b' d='M10 2.5V14h-.5a1.5 1.5 0 0 1-1.5-1.5V9a1 1 0 1 0-2 0v7.5a6 6 0 0 0 6 6h2.5a5 5 0 0 0 5-5l.941-5.278a1.095 1.095 0 0 0-1.324-1.288l-4.117.78V2.5a1.5 1.5 0 0 0-3 0z'/%3E%3C/svg%3E") 9 4, pointer`,GD=`
  @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

  .settings-panel-overlay {
    cursor: ${FD};
  }
  .settings-panel-overlay * {
    cursor: inherit;
  }
  .settings-panel-overlay button,
  .settings-panel-overlay [role="button"],
  .settings-panel-overlay .clickable {
    cursor: ${qD};
  }

  .settings-panel-content::-webkit-scrollbar {
    width: 6px;
  }
  .settings-panel-content::-webkit-scrollbar-track {
    background: ${xe.obsidian};
  }
  .settings-panel-content::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, ${xe.emerald}, ${xe.emeraldDark});
    border-radius: 3px;
  }
  .settings-panel-content::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, ${xe.emeraldBright}, ${xe.emerald});
  }

  @keyframes settings-matrix-pulse {
    0%, 100% { opacity: 0.08; transform: scale(1); }
    50% { opacity: 0.25; transform: scale(1.05); }
  }

  @keyframes settings-glow-breathe {
    0%, 100% { filter: drop-shadow(0 0 2px ${xe.emeraldGlow}); }
    50% { filter: drop-shadow(0 0 8px ${xe.emeraldGlow}); }
  }

  @keyframes settings-shimmer {
    0% { background-position: -200% center; }
    100% { background-position: 200% center; }
  }

  @keyframes emerald-pulse {
    0%, 100% { box-shadow: 0 0 0 0 ${xe.emeraldGlow}; }
    50% { box-shadow: 0 0 20px 5px ${xe.emeraldGlow}; }
  }
`;if(typeof document<"u"&&!document.getElementById("settings-panel-styles")){const t=document.createElement("style");t.id="settings-panel-styles",t.textContent=GD,document.head.appendChild(t)}const WD={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3,ease:[.22,1,.36,1]}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}}},YD={hidden:{x:"-100%",opacity:.8},visible:{x:0,opacity:1,transition:{type:"spring",damping:30,stiffness:300,mass:.8}},exit:{x:"-100%",opacity:.5,transition:{duration:.25,ease:[.4,0,1,1]}}},XD={hidden:{opacity:0},visible:t=>({opacity:1,transition:{delay:.1+t*.08,duration:.4,ease:"easeOut"}})},Lh={hidden:{opacity:0,x:-20,scale:.95},visible:t=>({opacity:1,x:0,scale:1,transition:{delay:.15+t*.04,duration:.35,ease:[.22,1,.36,1]}})},KD=({enabled:t})=>{const n=b.useMemo(()=>{const s=[];for(let u=0;u<240;u++)s.push({id:u,delay:Math.random()*3,duration:1.5+Math.random()*2,opacity:.05+Math.random()*.15});return s},[]);return t?r.jsx("div",{style:{position:"absolute",inset:0,overflow:"hidden",pointerEvents:"none",zIndex:0},children:r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gap:"4px",padding:"20px",height:"100%"},children:n.map(s=>r.jsx(se.div,{initial:{opacity:0},animate:{opacity:[s.opacity*.3,s.opacity,s.opacity*.3],scale:[1,1.1,1]},transition:{duration:s.duration,delay:s.delay,repeat:1/0,ease:"easeInOut"},style:{background:xe.emerald,borderRadius:"2px",aspectRatio:"1"}},s.id))})}):null},hb=({isOn:t,onToggle:n,label:s,icon:o,iconOff:c})=>r.jsxs(se.button,{onClick:n,whileHover:{scale:1.01},whileTap:{scale:.99},style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"14px 16px",background:xe.charcoal,border:`1px solid ${xe.border}`,borderRadius:"14px",fontFamily:"'Outfit', sans-serif",transition:"all 0.2s ease"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:t?`linear-gradient(135deg, ${xe.emerald}, ${xe.emeraldDark})`:xe.slate,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:t?`0 0 20px ${xe.emeraldGlow}, inset 0 1px 0 rgba(255,255,255,0.1)`:"inset 0 1px 0 rgba(255,255,255,0.05)",transition:"all 0.3s ease"},children:r.jsx(se.div,{animate:{rotate:t?0:180},transition:{duration:.3},children:t?o:c||o})}),r.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:xe.text},children:s})]}),r.jsx("div",{style:{width:"52px",height:"28px",borderRadius:"14px",background:t?`linear-gradient(90deg, ${xe.emeraldDark}, ${xe.emerald})`:xe.obsidian,border:`1px solid ${t?xe.emerald:xe.borderLight}`,padding:"2px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:t?`0 0 12px ${xe.emeraldGlow}`:"inset 0 2px 4px rgba(0,0,0,0.3)"},children:r.jsx(se.div,{animate:{x:t?24:0},transition:{type:"spring",stiffness:500,damping:30},style:{width:"22px",height:"22px",borderRadius:"11px",background:t?"#fff":xe.textMuted,boxShadow:t?"0 2px 8px rgba(0,0,0,0.3)":"0 1px 3px rgba(0,0,0,0.2)"}})})]}),mb=({icon:t,label:n,color:s,onClick:o,index:c})=>{const[u,p]=La.useState(!1);return r.jsxs(se.button,{custom:c,variants:Lh,initial:"hidden",animate:"visible",onClick:o,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),whileHover:{x:4},whileTap:{scale:.98},style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"12px 14px",background:u?xe.surfaceHover:"transparent",border:"none",borderRadius:"12px",fontFamily:"'Outfit', sans-serif",transition:"background 0.15s ease"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px"},children:[r.jsx("div",{style:{width:"38px",height:"38px",borderRadius:"11px",background:`linear-gradient(135deg, ${s}20, ${s}10)`,border:`1px solid ${s}30`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:u?`0 0 16px ${s}40, inset 0 1px 0 rgba(255,255,255,0.1)`:`0 0 0 ${s}00`,transition:"all 0.25s ease"},children:r.jsx("div",{style:{color:s,transition:"transform 0.2s ease",transform:u?"scale(1.1)":"scale(1)"},children:t})}),r.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:xe.text,transition:"color 0.15s ease"},children:n})]}),r.jsx(se.div,{animate:{x:u?0:-4,opacity:u?1:0},transition:{duration:.15},children:r.jsx(qh,{size:16,color:xe.textMuted})})]})},Jf=({title:t,index:n})=>r.jsxs(se.div,{custom:n,variants:XD,initial:"hidden",animate:"visible",style:{display:"flex",alignItems:"center",gap:"10px",padding:"0 14px",marginBottom:"8px",marginTop:n>0?"24px":"0"},children:[r.jsx("span",{style:{fontSize:"11px",fontWeight:600,fontFamily:"'JetBrains Mono', monospace",textTransform:"uppercase",letterSpacing:"1.5px",color:xe.textDim},children:t}),r.jsx("div",{style:{flex:1,height:"1px",background:`linear-gradient(90deg, ${xe.border}, transparent)`}})]}),KS=({isOpen:t,onClose:n,onCreateGroup:s,onCreateChannel:o,onEditProfile:c,onShowNotifications:u,onShowAdminPanel:p,onShowBlockedUsers:h,isDarkMode:m,onToggleDarkMode:g,onLogout:y,fancyAnimations:v,onToggleFancyAnimations:S})=>{b.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]);const j=[{icon:r.jsx(wn,{size:18}),label:"New Group",color:xe.sapphire,onClick:s},{icon:r.jsx(ts,{size:18}),label:"New Channel",color:xe.amethyst,onClick:o}],C=[{icon:r.jsx(Du,{size:18}),label:"Edit Profile",color:xe.emerald,onClick:c},{icon:r.jsx($h,{size:18}),label:"Notifications",color:xe.ruby,onClick:u},{icon:r.jsx(Rl,{size:18}),label:"Blocked Users",color:xe.rubyDark,onClick:h},{icon:r.jsx(ir,{size:18}),label:"Admin Panel",color:xe.indigo,onClick:p}];return r.jsx(Yn,{children:t&&r.jsxs(se.div,{className:"settings-panel-overlay",variants:WD,initial:"hidden",animate:"visible",exit:"exit",style:{position:"fixed",inset:0,zIndex:9999,display:"flex"},children:[r.jsx(se.div,{onClick:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(8px)"}}),r.jsxs(se.div,{variants:YD,initial:"hidden",animate:"visible",exit:"exit",style:{position:"relative",width:"340px",height:"100vh",background:`linear-gradient(180deg, ${xe.obsidian} 0%, ${xe.abyss} 100%)`,borderRight:`1px solid ${xe.border}`,boxShadow:`
                4px 0 24px rgba(0, 0, 0, 0.5),
                0 0 1px ${xe.emeraldGlow}
              `,display:"flex",flexDirection:"column",overflow:"hidden"},children:[r.jsx(KD,{enabled:v}),r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:`linear-gradient(90deg, transparent, ${xe.emerald}, transparent)`,opacity:.6}}),r.jsx(se.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.3},style:{position:"relative",zIndex:1,padding:"20px 20px 16px",borderBottom:`1px solid ${xe.border}`,background:`linear-gradient(180deg, ${xe.charcoal}80 0%, transparent 100%)`},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:`linear-gradient(135deg, ${xe.emerald}, ${xe.emeraldDark})`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 0 20px ${xe.emeraldGlow}`},children:r.jsx(eh,{size:18,color:"#fff"})}),r.jsxs("div",{children:[r.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,fontFamily:"'Outfit', sans-serif",color:xe.text,letterSpacing:"-0.02em"},children:"Settings"}),r.jsx("p",{style:{margin:0,fontSize:"12px",fontFamily:"'JetBrains Mono', monospace",color:xe.textMuted},children:"Customize your experience"})]})]}),r.jsx(se.button,{onClick:n,whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},style:{width:"32px",height:"32px",borderRadius:"8px",border:`1px solid ${xe.border}`,background:xe.charcoal,display:"flex",alignItems:"center",justifyContent:"center",color:xe.textSecondary,transition:"all 0.2s ease"},children:r.jsx(kn,{size:16})})]})}),r.jsxs("div",{className:"settings-panel-content",style:{position:"relative",zIndex:1,flex:1,overflowY:"auto",overflowX:"hidden",padding:"20px 16px"},children:[r.jsx(Jf,{title:"Create",index:0}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:j.map((T,E)=>r.jsx(mb,{icon:T.icon,label:T.label,color:T.color,onClick:()=>{T.onClick(),n()},index:E},T.label))}),r.jsx(Jf,{title:"Account",index:1}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:C.map((T,E)=>r.jsx(mb,{icon:T.icon,label:T.label,color:T.color,onClick:()=>{T.onClick(),n()},index:E+j.length},T.label))}),r.jsx(Jf,{title:"Preferences",index:2}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[r.jsx(se.div,{custom:C.length+j.length,variants:Lh,initial:"hidden",animate:"visible",children:r.jsx(hb,{isOn:m,onToggle:g,label:m?"Dark Mode":"Light Mode",icon:r.jsx($_,{size:18,color:"#fff"}),iconOff:r.jsx(H_,{size:18,color:xe.amber})})}),r.jsx(se.div,{custom:C.length+j.length+1,variants:Lh,initial:"hidden",animate:"visible",children:r.jsx(hb,{isOn:v,onToggle:S,label:"Fancy Animations",icon:r.jsx(eh,{size:18,color:"#fff"})})})]}),r.jsx("div",{style:{height:"24px"}})]}),r.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},style:{position:"relative",zIndex:1,padding:"16px 20px 24px",borderTop:`1px solid ${xe.border}`,background:`linear-gradient(180deg, transparent 0%, ${xe.abyss}80 100%)`},children:[r.jsxs(se.button,{onClick:y,whileHover:{scale:1.02},whileTap:{scale:.98},style:{width:"100%",padding:"14px",borderRadius:"12px",border:`1px solid ${xe.ruby}40`,background:`linear-gradient(135deg, ${xe.ruby}15, ${xe.rubyDark}10)`,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",fontFamily:"'Outfit', sans-serif",fontSize:"14px",fontWeight:600,color:xe.ruby,transition:"all 0.2s ease"},onMouseEnter:T=>{T.currentTarget.style.background=`linear-gradient(135deg, ${xe.ruby}25, ${xe.rubyDark}20)`,T.currentTarget.style.borderColor=`${xe.ruby}60`,T.currentTarget.style.boxShadow=`0 0 20px ${xe.ruby}30`},onMouseLeave:T=>{T.currentTarget.style.background=`linear-gradient(135deg, ${xe.ruby}15, ${xe.rubyDark}10)`,T.currentTarget.style.borderColor=`${xe.ruby}40`,T.currentTarget.style.boxShadow="none"},children:[r.jsx(Fh,{size:18}),r.jsx("span",{children:"Sign Out"})]}),r.jsx("p",{style:{margin:"12px 0 0",textAlign:"center",fontSize:"11px",fontFamily:"'JetBrains Mono', monospace",color:xe.textDim},children:"SimpChat v1.0"})]}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"1px",background:`linear-gradient(90deg, transparent, ${xe.emerald}40, transparent)`}})]})]})})},QD=({currentChat:t,onReloadChat:n,onViewUserProfile:s,onConversationDeleted:o})=>{const[c,u]=b.useState(!1),[p,h]=b.useState(!1),[m,g]=b.useState(null),[y,v]=b.useState(!1),[S,j]=b.useState(!1),[C,T]=b.useState(null),[E,z]=b.useState(!1),[L,R]=b.useState(!1),[X,P]=b.useState(!1),[te,re]=b.useState(!1),{user:Q}=wt(),{canAddUsers:ge,canManageChatInfo:me,canManageBans:Pe,canManageUsers:qe}=id(t?.id),Re=C?.members?.find(ie=>ie.userId===Q?.id)?.role==="admin";b.useEffect(()=>{(async()=>{if(t?.id){if(t.id.startsWith("temp_dm_")){const _e=t.id.replace("temp_dm_","");console.log("[RightPanel] Temp DM chat, loading user profile for:",_e),z(!0);try{const{userService:he}=await zt(async()=>{const{userService:Ct}=await Promise.resolve().then(()=>fa);return{userService:Ct}},void 0),_t=await he.getUserProfile(_e);T({id:t.id,name:_t.username,type:"dm",avatar:_t.avatar,members:[{userId:_t.id,user:_t,role:"member"}],participantsCount:2})}catch(he){console.error("[RightPanel] Failed to load user profile:",he),T(null)}finally{z(!1)}return}z(!0);try{const _e=await Ee.getChatProfile(t.id);console.log("[RightPanel] Chat profile loaded:",_e),T(_e)}catch(_e){console.error("[RightPanel] Failed to load chat profile:",_e),T(null)}finally{z(!1)}}})()},[t?.id]);const{usersYouBlocked:Te,addBlockedUser:B,removeBlockedUser:ne}=Le();b.useEffect(()=>{(async()=>{if(!t||t.type!=="dm"||!C?.members){R(!1);return}const _e=C.members.find(he=>he.userId!==Q?.id);if(!_e){R(!1);return}if(Te.has(_e.userId)){R(!0);return}try{const he=await mn.getBlockStatus(_e.userId);R(he),he&&B(_e.userId)}catch(he){console.error("[RightPanel] Failed to check block status:",he),R(!1)}})()},[t?.id,t?.type,C?.members,Q?.id]),b.useEffect(()=>{if(!t||t.type!=="dm"||!C?.members)return;const ie=C.members.find(he=>he.userId!==Q?.id);if(!ie)return;const _e=Te.has(ie.userId);_e!==L&&R(_e)},[Te,t?.id,C?.members,Q?.id]);const le=async()=>{if(!we)return;const ie=L?"unblock":"block";if(await Cn({title:L?"Unblock User":"Block User",message:L?`Are you sure you want to unblock ${we.username}? They will be able to message you again.`:`Are you sure you want to block ${we.username}? They won't be able to send you messages.`,confirmText:L?"Unblock":"Block",cancelText:"Cancel",variant:L?"warning":"danger"})){P(!0);try{L?(await mn.unblockUser(we.id),ne(we.id)):(await mn.blockUser(we.id),B(we.id)),R(!L)}catch(he){console.error(`Failed to ${ie} user:`,he)}finally{P(!1)}}},Se=async()=>{if(!(!t||!await Cn({title:"Delete Conversation",message:"Are you sure you want to delete this conversation? All messages will be permanently deleted.",confirmText:"Delete",cancelText:"Cancel",variant:"danger",icon:"delete"}))){re(!0);try{await Ee.deleteConversation(t.id),o?.()}catch(_e){console.error("Failed to delete conversation:",_e)}finally{re(!1)}}},He=async()=>{if(!(!t||!we||!await Cn({title:"Delete & Block",message:`Are you sure you want to delete this conversation and block ${we.username}? All messages will be deleted and they won't be able to message you.`,confirmText:"Delete & Block",cancelText:"Cancel",variant:"danger",icon:"ban"}))){re(!0);try{await Ee.deleteConversation(t.id),await mn.blockUser(we.id),o?.()}catch(_e){console.error("Failed to delete and block:",_e)}finally{re(!1)}}};if(!t)return r.jsx("div",{className:N.rightPanel});const we=t.type==="dm"&&C?.members?C.members.find(ie=>ie.userId!==Q?.id)?.user:null,Ae=async ie=>{if(await Cn({title:"Ban Member",message:`Are you sure you want to ban "${ie.user.username}" from this chat? They won't be able to rejoin.`,confirmText:"Ban",cancelText:"Cancel",variant:"danger",icon:"ban"}))try{await Ee.banUser(t.id,ie.userId),await n()}catch(he){console.error("Failed to ban user:",he)}},je=async()=>{const ie=t.privacy==="public"?"private":"public";if(await Cn({title:"Change Privacy",message:`Change this chat to ${ie}? ${ie==="private"?"Only invited members will be able to join.":"Anyone will be able to find and join."}`,confirmText:"Change",cancelText:"Cancel",variant:"info",icon:"shield"})){v(!0);try{await Ee.updateChatPrivacy(t.id,ie),await n()}catch(he){console.error("Failed to update privacy:",he)}finally{v(!1)}}};return r.jsxs("div",{className:N.rightPanel,children:[r.jsx("div",{className:N.panelHeader,children:r.jsx("h3",{children:"Chat Info"})}),r.jsx("div",{className:N.infoContent,children:t.type==="dm"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:N.infoSection,children:[r.jsx("div",{className:N.infoLabel,style:{color:"var(--text)",marginBottom:"12px",fontWeight:600},children:"Member"}),E?r.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"Loading profile..."}):we?r.jsxs("div",{onClick:()=>s(we.id),style:{padding:"16px",backgroundColor:"var(--background)",border:"2px solid var(--border)",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:ie=>{ie.currentTarget.style.borderColor="var(--accent)",ie.currentTarget.style.transform="translateY(-2px)",ie.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:ie=>{ie.currentTarget.style.borderColor="var(--border)",ie.currentTarget.style.transform="translateY(0)",ie.currentTarget.style.boxShadow="none"},title:"Click to view full profile",children:[r.jsx("div",{className:N.memberAvatar,children:we.avatar||we.avatarUrl?r.jsx("img",{src:pt(we.avatar||we.avatarUrl),alt:we.username,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"}}):r.jsx("div",{className:N.avatarFallback,style:{width:"50px",height:"50px",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--accent)",color:"#fff",borderRadius:"50%",fontWeight:600},children:Mn(we.username)})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{color:"var(--text)",fontWeight:700,fontSize:"16px",marginBottom:"4px"},children:we.username}),we.description&&r.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginBottom:"6px"},children:we.description}),r.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"6px"},children:we.isOnline?" Online":" Offline"}),r.jsx("div",{style:{fontSize:"12px",color:"var(--accent)",fontWeight:600},children:" Tap to view profile"})]})]}):r.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"No user information available"})]}),we&&r.jsxs("div",{className:N.infoSection,style:{marginTop:"16px"},children:[r.jsx("div",{className:N.infoLabel,style:{color:"var(--text)",marginBottom:"12px",fontWeight:600},children:"Actions"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("button",{onClick:le,disabled:X||te,style:{width:"100%",padding:"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:L?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:L?"#10b981":"#ef4444",border:`1px solid ${L?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"8px",cursor:X||te?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,transition:"all 0.2s ease",opacity:X||te?.6:1},onMouseEnter:ie=>{!X&&!te&&(ie.currentTarget.style.backgroundColor=L?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)")},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor=L?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)"},children:L?r.jsxs(r.Fragment,{children:[r.jsx(Cb,{size:16}),X?"Unblocking...":"Unblock User"]}):r.jsxs(r.Fragment,{children:[r.jsx(As,{size:16}),X?"Blocking...":"Block User"]})}),r.jsxs("button",{onClick:Se,disabled:te||X,style:{width:"100%",padding:"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",cursor:te||X?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,transition:"all 0.2s ease",opacity:te||X?.6:1},onMouseEnter:ie=>{!te&&!X&&(ie.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.2)")},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.1)"},children:[r.jsx(Wu,{size:16}),te?"Deleting...":"Delete Conversation"]}),!L&&r.jsxs("button",{onClick:He,disabled:te||X,style:{width:"100%",padding:"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"rgba(220, 38, 38, 0.1)",color:"#dc2626",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"8px",cursor:te||X?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,transition:"all 0.2s ease",opacity:te||X?.6:1},onMouseEnter:ie=>{!te&&!X&&(ie.currentTarget.style.backgroundColor="rgba(220, 38, 38, 0.2)")},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="rgba(220, 38, 38, 0.1)"},children:[r.jsx(Rl,{size:16}),"Delete & Block"]})]})]})]}):r.jsxs(r.Fragment,{children:[(C?.name||C?.description)&&r.jsxs("div",{className:N.infoSection,children:[r.jsxs("div",{className:N.infoLabel,style:{color:"var(--text)",marginBottom:"8px",fontWeight:600},children:[t.type==="group"?"Group":"Channel"," Info"]}),r.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px",border:"1px solid var(--border)"},children:[r.jsx("div",{style:{color:"var(--text)",fontWeight:700,fontSize:"16px",marginBottom:"6px"},children:C.name||t.name}),C.description&&r.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",lineHeight:"1.5"},children:C.description}),r.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px",fontSize:"12px"},children:[r.jsxs("div",{style:{color:"var(--text-secondary)"},children:[" ",C.participantsCount||0," members"]}),r.jsxs("div",{style:{color:"var(--text-secondary)"},children:[" ",C.participantsOnline||0," online"]})]})]})]}),(Re||me)&&r.jsxs("div",{className:N.infoSection,children:[r.jsx("div",{className:N.infoLabel,style:{color:"var(--text)"},children:"Privacy"}),r.jsx("button",{onClick:je,disabled:y,style:{padding:"8px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,width:"100%",marginTop:"4px"},children:y?"Changing...":`Current: ${t.privacy||"private"} (Click to toggle)`})]}),(Re||ge)&&r.jsx("div",{className:N.infoSection,children:r.jsx("button",{onClick:()=>u(!0),style:{padding:"10px 14px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:600,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:" Add Member"})}),r.jsxs("div",{className:N.infoSection,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[r.jsxs("div",{className:N.infoLabel,style:{color:"var(--text)"},children:["Members (",C?.participants?.length||t.members?.length||0,")"]}),r.jsx("button",{onClick:()=>j(!S),style:{padding:"6px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600},children:S?" Hide":" Show"})]}),S&&r.jsx("div",{className:N.memberList,children:E?r.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"Loading members..."}):C?.members&&C.members.length>0?C.members.map(ie=>{const _e={id:ie.id||ie.userId,userId:ie.userId||ie.id,user:{id:ie.user?.id||ie.userId||ie.id,username:ie.user?.username||ie.username,avatar:pt(ie.user?.avatar||ie.user?.avatarUrl||ie.avatarUrl),bio:ie.user?.bio||ie.user?.description||ie.description},role:ie.role||"member"};return r.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px",borderRadius:"10px",backgroundColor:"var(--background)",border:"1px solid var(--border)",marginBottom:"8px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:he=>{he.currentTarget.style.backgroundColor="var(--surface)",he.currentTarget.style.borderColor="var(--accent)"},onMouseLeave:he=>{he.currentTarget.style.backgroundColor="var(--background)",he.currentTarget.style.borderColor="var(--border)"},children:[r.jsx("div",{className:N.memberAvatar,style:{flexShrink:0,cursor:"pointer"},onClick:he=>{he.stopPropagation(),s(_e.userId)},title:"View profile",children:_e.user.avatar?r.jsx("img",{src:_e.user.avatar,alt:_e.user.username}):r.jsx("div",{className:N.avatarFallback,children:Mn(_e.user.username)})}),r.jsxs("div",{className:N.memberInfo,style:{flex:1,minWidth:0,cursor:"pointer"},onClick:he=>{he.stopPropagation(),s(_e.userId)},title:"View profile",children:[r.jsx("div",{className:N.memberName,style:{color:"var(--text)",fontWeight:600},children:_e.user.username}),ie.user?.isOnline!==void 0&&r.jsx("div",{className:N.memberRole,style:{color:"var(--text-secondary)",fontSize:"12px"},children:ie.user.isOnline?" Online":" Offline"})]}),r.jsxs("div",{style:{display:"flex",gap:"4px",flexShrink:0},children:[(Re||qe)&&_e.role!=="admin"&&r.jsx("button",{onClick:he=>{he.stopPropagation(),g(_e),h(!0)},title:"Manage Permissions",style:{padding:"6px 10px",backgroundColor:"#6366f1",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:he=>he.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:he=>he.currentTarget.style.backgroundColor="#6366f1",children:""}),(Re||Pe)&&_e.role!=="admin"&&r.jsx("button",{onClick:he=>{he.stopPropagation(),Ae(_e)},title:"Ban User",style:{padding:"6px 10px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:he=>he.currentTarget.style.backgroundColor="#c82333",onMouseLeave:he=>he.currentTarget.style.backgroundColor="#dc3545",children:""})]})]},_e.id)}):r.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"No members found"})})]}),t.description&&r.jsxs("div",{className:N.infoSection,children:[r.jsx("div",{className:N.infoLabel,style:{color:"var(--text)"},children:"Description"}),r.jsx("p",{style:{color:"var(--text-secondary)"},children:t.description})]})]})}),c&&r.jsx($D,{isOpen:c,onClose:()=>u(!1),chatId:t.id,chatType:t.type,onMemberAdded:n}),p&&m&&r.jsx(zm,{isOpen:p,onClose:()=>{h(!1),g(null)},chatId:t.id,member:m,onPermissionsChanged:n})]})},ZD=({isOpen:t,onClose:n,onCreate:s,isDarkMode:o=!1})=>{const[c,u]=b.useState(""),[p,h]=b.useState(null),[m,g]=b.useState(null),[y,v]=b.useState(!1),S=C=>{const T=C.target.files?.[0];if(T){h(T);const E=new FileReader;E.onloadend=()=>g(E.result),E.readAsDataURL(T)}},j=async()=>{if(c.trim()){v(!0);try{await s(c,p),u(""),h(null),g(null),n()}finally{v(!1)}}};return t?r.jsx("div",{className:`${N.modalOverlay} ${o?N.darkMode:""}`,onClick:n,children:r.jsxs("div",{className:N.modal,onClick:C=>C.stopPropagation(),children:[r.jsxs("div",{className:N.modalHeader,children:[r.jsx("h2",{children:"Create Custom Reaction"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsxs("div",{className:N.modalBody,children:[r.jsxs("div",{className:N.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Reaction Name *"}),r.jsx("input",{type:"text",placeholder:"e.g., happy, excited, custom-emoji",value:c,onChange:C=>u(C.target.value),className:N.formInput}),r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:"This will be the emoji name (e.g., :happy:)"})]}),r.jsxs("div",{className:N.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Reaction Image (Optional)"}),r.jsx("input",{type:"file",accept:"image/*",onChange:S,className:N.formInput,style:{padding:"8px"}}),m&&r.jsx("div",{style:{marginTop:"12px",textAlign:"center"},children:r.jsx("img",{src:m,alt:"Preview",style:{width:"64px",height:"64px",objectFit:"contain",borderRadius:"8px",border:"2px solid var(--border)"}})})]})]}),r.jsxs("div",{className:N.modalFooter,children:[r.jsx("button",{onClick:n,className:N.secondaryButton,children:"Cancel"}),r.jsx("button",{onClick:j,disabled:!c.trim()||y,className:N.primaryButton,children:y?"Creating...":"Create"})]})]})}):null},gb=({isOpen:t,onClose:n,onCreate:s,isDarkMode:o=!1,isChannel:c=!1})=>{const[u,p]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState("private"),[v,S]=b.useState(null),[j,C]=b.useState(!1),T=z=>{S(z)},E=async()=>{if(u.trim()){C(!0);try{await s(u,h,g,v),p(""),m(""),y("private"),S(null),n()}finally{C(!1)}}};return t?r.jsx("div",{className:`${N.modalOverlay} ${o?N.darkMode:""}`,onClick:n,children:r.jsxs("div",{className:N.modal,onClick:z=>z.stopPropagation(),children:[r.jsxs("div",{className:N.modalHeader,children:[r.jsx("h2",{children:c?"Create Channel":"Create Group"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsxs("div",{className:N.modalBody,children:[r.jsxs("div",{className:N.formGroup,children:[r.jsxs("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:[c?"Channel":"Group"," Name *"]}),r.jsx("input",{type:"text",placeholder:`Enter ${c?"channel":"group"} name (1-40 characters)`,value:u,onChange:z=>p(z.target.value),maxLength:40,className:N.formInput}),r.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[u.length,"/40 characters"]})]}),r.jsx("div",{className:N.formGroup,children:r.jsx(Dm,{onFileAccepted:T,label:`${c?"Channel":"Group"} Avatar (Optional)`,helperText:"Drag and drop an image, or click to browse"})}),r.jsxs("div",{className:N.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Description (Optional)"}),r.jsx("textarea",{placeholder:`Enter ${c?"channel":"group"} description (max 150 characters)`,value:h,onChange:z=>m(z.target.value),maxLength:150,className:N.formInput,rows:3}),r.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[h.length,"/150 characters"]})]}),r.jsxs("div",{className:N.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Privacy"}),r.jsxs("select",{value:g,onChange:z=>y(z.target.value),className:N.formInput,children:[r.jsx("option",{value:"private",children:"Private - Only invited members can join"}),r.jsx("option",{value:"public",children:"Public - Anyone can search and join"})]})]})]}),r.jsxs("div",{className:N.modalFooter,children:[r.jsx("button",{onClick:n,className:N.secondaryButton,children:"Cancel"}),r.jsx("button",{onClick:E,disabled:!u.trim()||j,className:N.primaryButton,children:j?"Creating...":"Create"})]})]})}):null},JD=({isOpen:t,onClose:n,chat:s,onUpdate:o,isDarkMode:c=!1,isChannel:u=!1})=>{const[p,h]=b.useState(""),[m,g]=b.useState(""),[y,v]=b.useState("private"),[S,j]=b.useState(null),[C,T]=b.useState(!1);b.useEffect(()=>{t&&s?(h(s.name||""),g(s.description||""),v(s.privacy||"private"),j(null)):t||(h(""),g(""),v("private"),j(null))},[t,s]);const E=L=>{j(L)},z=async()=>{if(!(!p.trim()||!s)){T(!0);try{await o(s.id,p,m,y,S),h(""),g(""),v("private"),j(null),n()}finally{T(!1)}}};return!t||!s?null:r.jsx("div",{className:`${N.modalOverlay} ${c?N.darkMode:""}`,onClick:n,children:r.jsxs("div",{className:N.modal,onClick:L=>L.stopPropagation(),children:[r.jsxs("div",{className:N.modalHeader,children:[r.jsx("h2",{children:u?"Edit Channel":"Edit Group"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsxs("div",{className:N.modalBody,children:[r.jsxs("div",{className:N.formGroup,children:[r.jsxs("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:[u?"Channel":"Group"," Name *"]}),r.jsx("input",{type:"text",placeholder:`Enter ${u?"channel":"group"} name (1-40 characters)`,value:p,onChange:L=>h(L.target.value),maxLength:40,className:N.formInput}),r.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[p.length,"/40 characters"]})]}),r.jsx("div",{className:N.formGroup,children:r.jsx(Dm,{onFileAccepted:E,currentPreview:s.avatar,label:`${u?"Channel":"Group"} Avatar (Optional)`,helperText:"Drag and drop a new image to update, or click to browse"})}),r.jsxs("div",{className:N.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Description (Optional)"}),r.jsx("textarea",{placeholder:`Enter ${u?"channel":"group"} description (max 150 characters)`,value:m,onChange:L=>g(L.target.value),maxLength:150,className:N.formInput,rows:3}),r.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[m.length,"/150 characters"]})]}),r.jsxs("div",{className:N.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Privacy"}),r.jsxs("select",{value:y,onChange:L=>v(L.target.value),className:N.formInput,children:[r.jsx("option",{value:"private",children:"Private - Only invited members can join"}),r.jsx("option",{value:"public",children:"Public - Anyone can search and join"})]})]})]}),r.jsxs("div",{className:N.modalFooter,children:[r.jsx("button",{onClick:n,className:N.secondaryButton,children:"Cancel"}),r.jsx("button",{onClick:z,disabled:!p.trim()||C,className:N.primaryButton,children:C?"Updating...":"Update"})]})]})})},e6=({isOpen:t,onClose:n,user:s,onUpdate:o,isDarkMode:c=!1})=>{const[u,p]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState(""),[v,S]=b.useState("everyone"),[j,C]=b.useState(!1),[T,E]=b.useState(null),[z,L]=b.useState(null);b.useEffect(()=>{t&&s?(p(s.username||""),m(s.email||""),y(s.bio||""),S(s.addMePolicy||"everyone"),E(null),L(null)):t||(p(""),m(""),y(""),S("everyone"),E(null),L(null))},[t,s]);const R=P=>{E(P)},X=async()=>{C(!0);try{await o(u,h,g,v,T),n()}finally{C(!1)}};return!t||!s?null:r.jsx("div",{className:`${N.modalOverlay} ${c?N.darkMode:""}`,onClick:n,children:r.jsxs("div",{className:N.modal,onClick:P=>P.stopPropagation(),children:[r.jsxs("div",{className:N.modalHeader,children:[r.jsx("h2",{style:{color:"var(--text)"},children:"Edit Profile"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsxs("div",{className:N.modalBody,children:[r.jsx("div",{className:N.formGroup,children:r.jsx(Dm,{onFileAccepted:R,currentPreview:s?.avatar||z,label:"Profile Avatar",helperText:"Drag and drop your profile picture, or click to browse"})}),r.jsxs("div",{className:N.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:"Username"}),r.jsx("input",{type:"text",value:u,onChange:P=>p(P.target.value),className:N.formInput,placeholder:"Enter your username"})]}),r.jsxs("div",{className:N.formGroup,children:[r.jsxs("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:["Email",r.jsx("span",{style:{fontSize:"12px",fontWeight:400,color:"var(--text-secondary)",marginLeft:"8px"},children:"(Read-only)"})]}),r.jsx("input",{type:"email",value:h,readOnly:!0,disabled:!0,className:N.formInput,placeholder:"Email cannot be changed",style:{backgroundColor:"var(--background)",cursor:"not-allowed",opacity:.7}})]}),r.jsxs("div",{className:N.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:"Bio/Description"}),r.jsx("textarea",{value:g,onChange:P=>y(P.target.value),className:N.formInput,rows:3,placeholder:"Tell us about yourself..."})]}),r.jsxs("div",{className:N.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:"Who can add you?"}),r.jsxs("select",{value:v,onChange:P=>S(P.target.value),className:N.formInput,children:[r.jsx("option",{value:"everyone",children:"Everyone"}),r.jsx("option",{value:"chatted",children:"Contacts Only"}),r.jsx("option",{value:"nobody",children:"Nobody"})]})]})]}),r.jsxs("div",{className:N.modalFooter,children:[r.jsx("button",{onClick:n,className:N.secondaryButton,children:"Cancel"}),r.jsx("button",{onClick:X,disabled:j,className:N.primaryButton,children:j?"Updating...":"Update Profile"})]})]},`profile-modal-${s.id}`)})},t6=({isOpen:t,onClose:n,isDarkMode:s=!1,onNavigateToChat:o})=>{const[c,u]=b.useState([]),[p,h]=b.useState(!1);b.useEffect(()=>{t&&m()},[t]);const m=async()=>{h(!0);try{const S=await(await zt(()=>Promise.resolve().then(()=>Zf),void 0).then(C=>C.notificationService)).getNotifications();console.log("[Notifications] Loaded notifications:",S),Array.isArray(S)&&S.length>0&&console.log("[Notifications] First notification structure:",JSON.stringify(S[0],null,2));const j=Array.isArray(S)?S.map(C=>({id:C.id,chatId:C.chatId,title:`Message from ${C.senderName}`,message:C.content,type:"message",chatName:C.chatName,chatAvatar:C.chatAvatar,senderName:C.senderName,fileUrl:C.fileUrl,isRead:C.seen,createdAt:C.sentTime})):[];u(j)}catch(v){console.error("[Notifications] Failed to load notifications:",v),u([])}finally{h(!1)}},g=async(v,S)=>{try{await(await zt(()=>Promise.resolve().then(()=>Zf),void 0).then(C=>C.notificationService)).markAsSeen(v),S&&o?(n(),o(S)):await m()}catch(j){console.error("Failed to handle notification click:",j)}},y=async()=>{try{await(await zt(()=>Promise.resolve().then(()=>Zf),void 0).then(S=>S.notificationService)).markAllAsSeen(),await m()}catch(v){console.error("Failed to mark all notifications as seen:",v)}};return t?r.jsx("div",{className:`${N.modalOverlay} ${s?N.darkMode:""}`,onClick:n,children:r.jsxs("div",{className:N.modal,onClick:v=>v.stopPropagation(),children:[r.jsxs("div",{className:N.modalHeader,children:[r.jsx("h2",{children:"Notifications"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsx("div",{className:N.modalBody,style:{maxHeight:"60vh",overflowY:"auto"},children:p?r.jsx("div",{className:N.loadingState,children:"Loading notifications..."}):c.length===0?r.jsx("div",{className:N.emptyState,children:"No notifications yet"}):r.jsxs(r.Fragment,{children:[c.length>0&&r.jsx("button",{onClick:y,style:{padding:"8px 12px",backgroundColor:"var(--accent)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,marginBottom:"12px",position:"sticky",top:0,zIndex:1},children:"Mark All as Read"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:c.map(v=>r.jsxs("div",{onClick:()=>g(v.id,v.chatId),style:{padding:"14px",background:v.isRead?"rgba(99, 102, 241, 0.05)":"linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1))",border:v.isRead?"1px solid rgba(99, 102, 241, 0.1)":"1px solid rgba(99, 102, 241, 0.3)",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",gap:"12px",alignItems:"flex-start",boxShadow:v.isRead?"none":"0 2px 8px rgba(99, 102, 241, 0.15)",position:"relative",overflow:"hidden"},onMouseEnter:S=>{S.currentTarget.style.transform="translateX(4px)",S.currentTarget.style.boxShadow="0 4px 12px rgba(99, 102, 241, 0.2)"},onMouseLeave:S=>{S.currentTarget.style.transform="translateX(0)",S.currentTarget.style.boxShadow=v.isRead?"none":"0 2px 8px rgba(99, 102, 241, 0.15)"},children:[v.chatAvatar?r.jsx("img",{src:v.chatAvatar,alt:v.chatName,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",flexShrink:0}}):r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600,fontSize:"14px",flexShrink:0},children:Mn(v.chatName)}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontWeight:600,marginBottom:"4px",color:"var(--text)"},children:v.chatName}),r.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"4px"},children:[r.jsxs("span",{style:{fontWeight:500,color:"var(--text)"},children:[v.senderName,":"]})," ",v.message&&v.message.trim()?v.message:v.fileUrl?r.jsx("span",{style:{fontStyle:"italic"},children:"Sent an attachment"}):r.jsx("span",{style:{fontStyle:"italic",opacity:.7},children:"No message content"})]}),v.fileUrl&&r.jsx("div",{style:{fontSize:"12px",color:"var(--accent)",marginBottom:"4px"},children:" Attachment"}),r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:new Date(v.createdAt).toLocaleString()})]})]},v.id))})]})})]})}):null},n6=()=>{const{user:t,logout:n}=wt(),{chats:s,currentChat:o,isLoadingChats:c,messages:u,setMessages:p,onlineUsers:h}=Le(),{theme:m,toggleTheme:g}=RS(),{fancyAnimations:y,toggleFancyAnimations:v}=NS(),S=FR(),[j,C]=b.useState(!1),[T,E]=b.useState(!1),[z,L]=b.useState(!1),[R,X]=b.useState(!1),[P,te]=b.useState(null),[re,Q]=b.useState(!1),[ge,me]=b.useState(!1),[Pe,qe]=b.useState(!1),[Qe,Re]=b.useState(!1),[Te,B]=b.useState(!1),[ne,le]=b.useState(!1),[Se,He]=b.useState(""),[we,Ae]=b.useState([]),[je,ie]=b.useState(!1),[_e,he]=b.useState(!1),[_t,Ct]=b.useState(null),[Bt,jt]=b.useState(null),[rn,Tt]=b.useState(!1),[ln,gt]=b.useState(!1),[In,ft]=b.useState(!1),[xt,Vt]=b.useState(null),[yn,at]=b.useState(!1),Qt=b.useRef(null),Zt=m==="dark",Gn=b.useRef(null),oe=b.useRef(null);b.useEffect(()=>{(async()=>{const de=Le.getState();s.length===0&&await de.loadChats()})()},[s.length]);const ue=o?.id;b.useEffect(()=>{(async()=>{if(!ue||ue==="search"){console.log("[Dashboard] Clearing messages - no chat selected or search chat"),p([]),Gn.current=null;return}if(ue.startsWith("temp_dm_")){console.log("[Dashboard] Temporary chat, skipping message load"),p([]),Gn.current=ue;return}if(Gn.current===ue){console.log("[Dashboard] Messages already loaded for chat:",ue);return}console.log("[Dashboard] ========== LOADING MESSAGES FOR CHAT =========="),console.log("[Dashboard] Chat ID:",ue),Gn.current=ue,C(!0);try{console.log("[Dashboard] Fetching chat data from API...");const de=await Ee.getChat(ue);console.log("[Dashboard] API Response - Messages count:",de.messages?.length||0),p(de.messages||[]),S.isConnected&&(S.markMessagesAsSeen(ue),Le.getState().resetUnreadCount(ue))}catch(de){console.error("[Dashboard] Failed to load messages:",de),p([])}finally{C(!1)}})()},[ue,S.isConnected]),b.useEffect(()=>{if(!ue||ue==="search"||ue.startsWith("temp_dm_"))return;if(oe.current===ue){console.log("[Dashboard] Already joined chat room:",ue);return}return(async()=>{if(S.isConnected)try{oe.current&&oe.current!==ue&&(console.log("[Dashboard] Leaving previous chat room:",oe.current),await S.leaveChat(oe.current).catch(console.error)),console.log("[Dashboard] Joining SignalR chat room:",ue),await S.joinChat(ue),oe.current=ue}catch(de){console.error("[Dashboard] Failed to join chat room:",de)}})(),()=>{oe.current&&S.isConnected&&(console.log("[Dashboard] Cleanup - Leaving SignalR chat room:",oe.current),S.leaveChat(oe.current).catch(console.error),oe.current=null)}},[ue,S.isConnected]);const dt=async ae=>{if(Le.getState().setCurrentChat(ae),!ae.id.startsWith("temp_dm_")&&(ae.type==="group"||ae.type==="channel"||ae.type==="dm"))try{const ke=await Ee.getChatProfile(ae.id);if(console.log("[Dashboard] Loaded full profile for",ae.type,":",ke.id,"members:",ke.members?.length),Le.getState().setCurrentChat(ke),ke.members&&ke.members.length>0){const Ue=ke.members.map(ve=>ve.userId||ve.id||ve.user?.id).filter(ve=>!!ve);if(Ue.length>0)try{const{signalRService:ve}=await zt(async()=>{const{signalRService:$e}=await Promise.resolve().then(()=>Nh);return{signalRService:$e}},void 0),ze=await ve.getPresenceStates(Ue);console.log("[Dashboard] Fetched presence for chat members:",ze),Le.getState().setInitialPresenceStates(ze)}catch(ve){console.error("[Dashboard] Failed to fetch presence states:",ve)}}}catch(ke){console.error("[Dashboard] Failed to load chat profile:",ke)}},ct=async()=>{await Cn({title:"Sign Out",message:"Are you sure you want to sign out?",confirmText:"Sign Out",cancelText:"Cancel",variant:"warning"})&&n()},Ut=async(ae,de,ke)=>{if(console.log("[Dashboard] handleSendChatMessage called",{content:ae,file:de?{name:de.name,size:de.size,type:de.type}:null,currentChatId:o?.id,userId:t?.id,replyId:ke}),!o||!o.id||o.id==="search"||!t){console.log("[Dashboard] Early return - missing chat or user");return}try{if(de){console.log("[Dashboard] Sending message with file via REST API");const Ue=new FormData;if(o.id.startsWith("temp_dm_")){const ze=o.id.replace("temp_dm_","");Ue.append("receiverId",ze)}else if(Ue.append("chatId",o.id),o.type==="dm"){const ze=o.members?.find($e=>$e.userId!==t.id)?.userId;ze&&Ue.append("receiverId",ze)}Ue.append("content",ae),Ue.append("file",de),ke&&Ue.append("replyId",ke),await(await zt(()=>Promise.resolve().then(()=>Rh),void 0).then(ze=>ze.messageService)).sendMessage(Ue)}else{console.log("[Dashboard] Sending text message via SignalR");let Ue=null,ve=null;o.id.startsWith("temp_dm_")?ve=o.id.replace("temp_dm_",""):(Ue=o.id,o.type==="dm"&&(ve=o.members?.find(ze=>ze.userId!==t.id)?.userId||null)),await S.sendMessage(Ue,ae,ve,ke||null)}if(console.log("[Dashboard] Message sent successfully"),o.id.startsWith("temp_dm_")){console.log("[Dashboard] Reloading chats after sending to temp chat");const Ue=Le.getState(),ve=o.id.replace("temp_dm_","");let ze;const $e=o.name;for(let ce=0;ce<3;ce++){if(await new Promise(Ve=>setTimeout(Ve,500)),await Ue.loadChats(),ze=Le.getState().chats.find(Ve=>Ve.type!=="dm"?!1:Ve.members&&Ve.members.length>0?Ve.members.some(rt=>rt.userId===ve||rt.id===ve||rt.user?.id===ve||rt.user?.userId===ve):!!($e&&Ve.name===$e)),ze){console.log(`[Dashboard] Found newly created real DM on attempt ${ce+1}:`,ze.id);break}console.log(`[Dashboard] Real DM not found on attempt ${ce+1}, retrying...`)}if(ze){Gn.current=ze.id,Ue.setCurrentChat(ze);const ce=await Ee.getChat(ze.id);p(ce.messages||[])}else console.error("[Dashboard] Failed to find newly created DM after retries")}else{const Ue=await Ee.getChat(o.id);p(Ue.messages||[])}}catch(Ue){console.error("Failed to send message:",Ue)}},xn=async(ae,de,ke,Ue)=>{try{const ve=new FormData;ve.append("Name",ae),ve.append("Description",de||""),ve.append("PrivacyType",ke==="public"?"Public":"Private"),Ue&&ve.append("file",Ue),console.log("[Dashboard] Creating group with FormData:");for(const[$e,ce]of ve.entries())console.log(`  ${$e}:`,ce instanceof File?`File(${ce.name})`:ce);await Ee.createGroup(ve),await Le.getState().loadChats()}catch(ve){throw console.error("Failed to create group:",ve),ve}},$=async(ae,de,ke,Ue)=>{try{const ve=new FormData;ve.append("Name",ae),ve.append("Description",de||""),ve.append("PrivacyType",ke==="public"?"Public":"Private"),Ue&&ve.append("file",Ue),console.log("[Dashboard] Creating channel with FormData:");for(const[$e,ce]of ve.entries())console.log(`  ${$e}:`,ce instanceof File?`File(${ce.name})`:ce);await Ee.createChannel(ve),await Le.getState().loadChats()}catch(ve){throw console.error("Failed to create channel:",ve),ve}},Y=async(ae,de,ke,Ue,ve)=>{try{const ze=new FormData;ze.append("Name",de),ze.append("Description",ke||""),ze.append("PrivacyType",Ue==="public"?"Public":"Private"),ve&&ze.append("file",ve),console.log("[Dashboard] Updating group/channel with FormData:");for(const[ot,Ve]of ze.entries())console.log(`  ${ot}:`,Ve instanceof File?`File(${Ve.name})`:Ve);const $e=P?.type==="channel"?"channel":"group";await Ee.updateChat(ae,$e,ze),await Le.getState().loadChats()}catch(ze){throw console.error("Failed to update group/channel:",ze),ze}},I=async ae=>{if(o)try{await Ee.banUser(o.id,ae);const de=await Ee.getChatProfile(o.id);Le.getState().setCurrentChat(de)}catch(de){console.error("Failed to ban user:",de)}},pe=async ae=>{if(o)try{await Ee.unbanUser(o.id,ae);const de=await Ee.getChatProfile(o.id);Le.getState().setCurrentChat(de)}catch(de){console.error("Failed to unban user:",de)}},ye=async ae=>{if(o)try{o.type==="group"?await Ee.removeMemberFromGroup(o.id,ae):o.type==="channel"&&await Ee.removeMemberFromChannel(o.id,ae);const de=await Ee.getChatProfile(o.id);Le.getState().setCurrentChat(de)}catch(de){console.error("Failed to remove member:",de)}},Oe=async ae=>{if(o)try{await Ee.updateChatPrivacy(o.id,ae);const de=await Ee.getChatProfile(o.id);Le.getState().setCurrentChat(de)}catch(de){console.error("Failed to update privacy:",de)}},ut=async()=>{if(!(!o||!await Cn({title:`Leave ${o.type==="channel"?"Channel":"Group"}`,message:`Are you sure you want to leave this ${o.type}? You will lose access to all messages and content.`,confirmText:"Leave",cancelText:"Stay",variant:"warning",icon:"leave"})))try{await Ee.leaveChat(o.id,o.type),await Le.getState().loadChats(),Le.getState().setCurrentChat(null),gt(!1)}catch(de){console.error("Failed to leave chat:",de)}},On=async()=>{if(o)try{await Ee.deleteChat(o.id,o.type),await Le.getState().loadChats(),Le.getState().setCurrentChat(null),gt(!1)}catch(ae){console.error("Failed to delete chat:",ae)}},ma=async ae=>{try{await(await zt(()=>Promise.resolve().then(()=>fa),void 0).then(ke=>ke.userService)).blockUser(ae),Le.getState().addBlockedUser(ae)}catch(de){console.error("Failed to block user:",de)}},Kn=async ae=>{try{await(await zt(()=>Promise.resolve().then(()=>fa),void 0).then(ke=>ke.userService)).unblockUser(ae),Le.getState().removeBlockedUser(ae)}catch(de){console.error("Failed to unblock user:",de)}},zs=async(ae,de)=>{try{const ke=new FormData;ke.append("Name",ae),de&&ke.append("file",de);const{reactionService:Ue}=await zt(async()=>{const{reactionService:ve}=await import("./reaction.service-DocHTqao.js");return{reactionService:ve}},__vite__mapDeps([3,1,2]));await Ue.createReaction(ke)}catch(ke){throw console.error("Failed to create custom reaction:",ke),ke}},Ln=async(ae,de,ke,Ue,ve)=>{try{const ze=new FormData;ae&&ze.append("Username",ae),ze.append("Description",ke||"");let $e="Everyone";Ue==="chatted"?$e="WithConversations":Ue==="nobody"&&($e="Nobody"),ze.append("AddChatMinLvl",$e),ve&&ze.append("file",ve),console.log("[Dashboard] Updating profile with FormData:");for(const[rt,En]of ze.entries())console.log(`  ${rt}:`,En instanceof File?`File(${En.name})`:En);const ot=await(await zt(()=>Promise.resolve().then(()=>fa),void 0).then(rt=>rt.userService)).updateProfile(ze);wt.getState().setUser(ot)}catch(ze){throw console.error("Failed to update profile:",ze),ze}},is=async ae=>{He(ae),Ae([]),ae.trim()&&(Qt.current&&clearTimeout(Qt.current),ie(!0),Qt.current=setTimeout(async()=>{try{const de=await zt(()=>Promise.resolve().then(()=>fa),void 0).then($e=>$e.userService),ke=Ee,Ue=[];try{const $e=await de.searchUsers(ae);console.log("[Search] User search results:",$e),Array.isArray($e)&&$e.forEach(ce=>{const ot=ce.EntityId||ce.entityId||ce.id,Ve=ce.displayName||ce.DisplayName||ce.username||ce.name||"Unknown User";console.log("[Search] Mapping user result:",{EntityId:ce.EntityId,entityId:ce.entityId,id:ce.id,displayName:ce.displayName,DisplayName:ce.DisplayName,username:ce.username,finalUserId:ot,finalName:Ve}),Ue.push({id:ot,name:Ve,type:"user",avatar:pt(ce.avatarUrl||ce.avatar||ce.profileImage)})})}catch($e){console.error("User search failed:",$e)}try{const $e=await ke.searchChats(ae);console.log("[Search] Chat results:",$e,"Type:",typeof $e,"IsArray:",Array.isArray($e)),Array.isArray($e)?$e.forEach((ce,ot)=>{console.log(`[Search] Processing chat result #${ot}:`,ce),console.log(`[Search] Result #${ot} - chatType:`,ce.chatType,"type:",ce.type,"displayName:",ce.displayName,"name:",ce.name);let Ve="channel";if(typeof ce.chatType=="number")Ve=ce.chatType===0?"user":ce.chatType===1?"group":"channel",console.log(`[Search] Used numeric chatType (${ce.chatType}) -> ${Ve}`);else if(ce.type&&typeof ce.type=="string"){const kt=String(ce.type).toLowerCase().trim();if(kt==="dm"||kt==="directmessage")Ve="user",console.log("[Search] Used type field 'dm/directmessage' -> user");else if(kt==="group")Ve="group",console.log("[Search] Used type field 'group' -> group");else if(kt==="channel")Ve="channel",console.log("[Search] Used type field 'channel' -> channel");else if(console.log(`[Search] type field '${ce.type}' is unknown, trying chatType...`),ce.chatType&&typeof ce.chatType=="string"){const Mt=String(ce.chatType).toLowerCase().trim();Mt==="conversation"||Mt==="dm"||Mt==="directmessage"?(Ve="user",console.log("[Search] Used chatType field 'conversation/dm' -> user")):Mt==="group"?(Ve="group",console.log("[Search] Used chatType field 'group' -> group")):Mt==="channel"?(Ve="channel",console.log("[Search] Used chatType field 'channel' -> channel")):console.log(`[Search] chatType '${Mt}' unknown, defaulting to channel`)}}else if(ce.chatType&&typeof ce.chatType=="string"){const kt=String(ce.chatType).toLowerCase().trim();kt==="conversation"||kt==="dm"||kt==="directmessage"||kt==="0"?(Ve="user",console.log(`[Search] Used string chatType '${ce.chatType}' (${kt}) -> user`)):kt==="group"||kt==="1"?(Ve="group",console.log(`[Search] Used string chatType '${ce.chatType}' (${kt}) -> group`)):kt==="channel"||kt==="2"?(Ve="channel",console.log(`[Search] Used string chatType '${ce.chatType}' (${kt}) -> channel`)):console.log(`[Search] string chatType '${kt}' unknown, defaulting to channel`)}else console.log("[Search] No type info found, using default (channel)");const rt=String(ce.displayName||ce.name||ce.username||ce.title||"Unknown").trim(),En=pt(ce.avatarUrl||ce.avatar||ce.profileImage)||"",jn={id:String(ce.entityId||ce.id||"unknown"),name:rt==="Unknown"||rt.length===0?"Unknown User":rt,type:Ve,avatar:En||void 0};console.log("[Search] Mapped result:",jn,"Original:",{displayName:ce.displayName,name:ce.name,username:ce.username,avatar:ce.avatar,avatarUrl:ce.avatarUrl}),Ue.push(jn)}):(console.warn("[Search] Chat results is not an array:",$e),console.warn("[Search] Type of chatsResults:",typeof $e))}catch($e){console.error("Chat search failed:",$e)}const ve=new Set,ze=Ue.filter($e=>{const ce=`${$e.name.toLowerCase().trim()}|${$e.type}`;return ve.has(ce)?(console.log(`[Search] Filtered duplicate: ${ce}`),!1):(ve.add(ce),!0)});ze.sort(($e,ce)=>{const ot={user:0,group:1,channel:2};return(ot[$e.type]??3)-(ot[ce.type]??3)}),console.log("[Search] Final deduplicated results (by name+type):",ze,"Removed duplicates:",Ue.length-ze.length),Ae(ze),ie(!1)}catch(de){console.error("Search error:",de),ie(!1)}},300))},ga=async ae=>{if(console.log("[Search] Selected result:",ae,"Type:",ae.type),ae.type==="user"){Ct(null),jt(ae),Tt(!0);try{const de=await zt(()=>Promise.resolve().then(()=>fa),void 0).then(Ue=>Ue.userService);console.log("[Search] Loading user profile for ID:",ae.id);const ke=await de.getUserProfile(ae.id);console.log("[Search] Loaded user profile:",ke),Ct(ke),he(!0)}catch(de){console.error("[Search] Failed to load user profile:",de),Ct(ae),he(!0)}finally{Tt(!1)}}else{console.log("[Search] Opening group/channel profile for:",ae.name),Ct(null),Tt(!0);try{const de=await Ee.getChatProfile(ae.id);console.log("[Search] Loaded chat profile:",de),Le.getState().setCurrentChat(de),gt(!0)}catch(de){console.error("[Search] Failed to load chat profile:",de)}finally{Tt(!1)}}He(""),Ae([])},Bs=async(ae,de)=>{try{if(!ae){console.error("Error: User ID not found");return}console.log("[Dashboard] handleSendMessage called with userId:",ae,"message:",de),he(!1),Ct(null),jt(null);const ke=Le.getState();console.log("[Dashboard] Looking for existing DM with user:",ae);const Ue=ke.chats;let ve=Ue.find(ot=>ot.type!=="dm"?!1:ot.members&&ot.members.length>0?ot.members.some(Ve=>Ve.userId===ae||Ve.id===ae||Ve.user?.id===ae||Ve.user?.userId===ae):!1);if(!ve){const ot=Ue.filter(Ve=>Ve.type==="dm"&&(!Ve.members||Ve.members.length===0));console.log("[Dashboard] Checking",ot.length,"DM chats without members");for(const Ve of ot)try{const rt=await Ee.getChatProfile(Ve.id);if(console.log("[Dashboard] Fetched full DM profile:",rt.id,"members:",rt.members?.length),rt.members&&rt.members.length>0&&rt.members.some(jn=>jn.userId===ae||jn.id===ae||jn.user?.id===ae||jn.user?.userId===ae)){console.log("[Dashboard] Found existing DM by fetching profile:",rt.id),ve=rt;break}}catch(rt){console.error("[Dashboard] Error fetching DM profile:",rt)}}if(ve){console.log("[Dashboard] Opening existing DM:",ve.id),ke.setCurrentChat(ve);return}console.log("[Dashboard] No existing DM found, creating temporary blank chat for user:",ae);let ze=_t?.username||"User",$e=_t?.avatar;if(!_t)try{const Ve=await(await zt(()=>Promise.resolve().then(()=>fa),void 0).then(rt=>rt.userService)).getUserProfile(ae);ze=Ve.username||"User",$e=Ve.avatar,console.log("[Dashboard] Fetched user profile for blank chat:",ze)}catch(ot){console.error("[Dashboard] Failed to fetch user profile:",ot)}const ce={id:`temp_dm_${ae}`,name:ze,type:"dm",avatar:$e,description:"",privacy:"private",members:[],unreadCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(console.log("[Dashboard] Setting current chat to blank:",ce.id),ke.setCurrentChat(ce),de&&de.trim()){console.log("[Dashboard] Sending initial message to user:",ae);try{const ot=new FormData;ot.append("receiverId",ae),ot.append("content",de),await De.post("/messages/",ot,{headers:{"Content-Type":"multipart/form-data"}}),console.log("[Dashboard] Message sent successfully, backend auto-created DM"),await new Promise(En=>setTimeout(En,500)),await ke.loadChats();const rt=ke.chats.find(En=>En.type!=="dm"||!En.members||En.members.length===0?!1:En.members.some(jn=>jn.userId===ae||jn.id===ae||jn.user?.id===ae||jn.user?.userId===ae));rt&&(console.log("[Dashboard] Found newly created DM:",rt.id),ke.setCurrentChat(rt))}catch(ot){console.error("[Dashboard] Error sending message:",ot)}}}catch(ke){console.error("[Dashboard] Failed to open DM:",ke)}};return r.jsxs("div",{className:`${N.dashboard} ${Zt?N.darkMode:""}`,children:[r.jsx(mD,{chats:s,currentChat:o,onSelectChat:ae=>{dt(ae),at(!1)},isLoadingChats:c,user:t,onLogout:ct,onMenuOpen:()=>le(!ne),searchQuery:Se,onSearchChange:is,searchResults:we,onSelectSearchResult:ae=>{ga(ae),at(!1)},isSearching:je,isDarkMode:Zt,onClearSearch:()=>{He(""),jt(null),he(!1)},isMobileOpen:yn,onMobileClose:()=>at(!1),onlineUsers:h}),r.jsx(KS,{isOpen:ne,onClose:()=>le(!1),onCreateGroup:()=>E(!0),onCreateChannel:()=>L(!0),onEditProfile:()=>Q(!0),onShowNotifications:()=>me(!0),onShowAdminPanel:()=>Re(!0),onShowBlockedUsers:()=>B(!0),isDarkMode:Zt,onToggleDarkMode:g,onLogout:ct,fancyAnimations:y,onToggleFancyAnimations:v}),r.jsx(VD,{currentChat:o,messages:u,isLoadingMessages:j,onSendMessage:Ut,onOpenGroupCreate:()=>E(!0),onOpenChannelCreate:()=>L(!0),onOpenUserProfile:async ae=>{Tt(!0),he(!0),jt(null);try{const ke=await(await zt(()=>Promise.resolve().then(()=>fa),void 0).then(Ue=>Ue.userService)).getUserProfile(ae);Ct(ke)}catch(de){console.error("Failed to load user profile:",de)}finally{Tt(!1)}},onOpenMobileSidebar:()=>at(!0),onOpenChatProfile:()=>gt(!0)}),o?.type==="dm"&&r.jsx(QD,{currentChat:o,onReloadChat:async()=>{if(o){const ae=await Ee.getChatProfile(o.id);Le.getState().setCurrentChat(ae)}},onViewUserProfile:ae=>{Vt(ae),ft(!0)},onConversationDeleted:()=>{Le.getState().setCurrentChat(null),Le.getState().loadChats()}}),r.jsx(gb,{isOpen:T,onClose:()=>E(!1),onCreate:xn,isDarkMode:Zt,isChannel:!1}),r.jsx(gb,{isOpen:z,onClose:()=>L(!1),onCreate:$,isDarkMode:Zt,isChannel:!0}),r.jsx(JD,{isOpen:R,onClose:()=>{X(!1),te(null)},chat:P,onUpdate:Y,isDarkMode:Zt,isChannel:P?.type==="channel"}),r.jsx(e6,{isOpen:re,onClose:()=>Q(!1),user:t,onUpdate:Ln,isDarkMode:Zt}),r.jsx(t6,{isOpen:ge,onClose:()=>me(!1),isDarkMode:Zt,onNavigateToChat:async ae=>{try{let de=s.find(ke=>ke.id===ae);if(de||(console.log("[Dashboard] Chat not in list, reloading chats..."),await Le.getState().loadChats(),de=Le.getState().chats.find(Ue=>Ue.id===ae)),de)await dt(de);else{console.log("[Dashboard] Chat still not in list, loading profile directly...");const ke=await Ee.getChatProfile(ae);ke?await dt(ke):console.error("Chat not found")}}catch(de){console.error("[Dashboard] Failed to load chat from notification:",de)}}}),r.jsx(ZD,{isOpen:Pe,onClose:()=>qe(!1),onCreate:zs,isDarkMode:Zt}),r.jsx(DS,{isOpen:Qe,onClose:()=>Re(!1),isDarkMode:Zt}),r.jsx(XS,{isOpen:Te,onClose:()=>B(!1),isDarkMode:Zt}),_e&&_t&&r.jsx(Oh,{isOpen:_e,onClose:()=>{he(!1),Ct(null),jt(null)},userId:_t.id,onSendMessage:Bs,onBlockUser:ma,onUnblockUser:Kn,fancyAnimations:y}),o&&(o.type==="group"||o.type==="channel")&&r.jsx(YS,{isOpen:ln,onClose:()=>gt(!1),chat:o,currentUserId:t?.id||"",onEditGroup:()=>{gt(!1),te(o),X(!0)},onLeaveGroup:ut,onDeleteGroup:On,onKickMember:ye,onBanMember:I,onUnbanMember:pe,onUpdatePrivacy:Oe,onViewUserProfile:ae=>{Vt(ae),ft(!0)},fancyAnimations:y}),xt&&r.jsx(Oh,{isOpen:In,onClose:()=>{ft(!1),Vt(null)},userId:xt,onSendMessage:Bs,onBlockUser:ma,onUnblockUser:Kn,fancyAnimations:y})]})},a6="_dashboardContainer_1w0cn_47",s6="_togglePanelBtn_1w0cn_111",i6="_clickable_1w0cn_213",o6="_chatItem_1w0cn_215",r6="_searchResultItem_1w0cn_217",l6="_mainWrapper_1w0cn_267",c6="_sidebar_1w0cn_283",u6="_searchSection_1w0cn_307",d6="_searchContainer_1w0cn_315",p6="_searchWrapper_1w0cn_323",f6="_searchIcon_1w0cn_335",h6="_searchInput_1w0cn_363",m6="_clearSearch_1w0cn_499",g6="_searchDropdown_1w0cn_557",y6="_dropdownHeader_1w0cn_587",x6="_resultAvatar_1w0cn_689",v6="_resultInfo_1w0cn_755",b6="_resultName_1w0cn_769",S6="_resultUsername_1w0cn_791",w6="_resultType_1w0cn_811",_6="_resultTypeIcon_1w0cn_823",C6="_group_1w0cn_849",j6="_channel_1w0cn_859",T6="_noResults_1w0cn_921",k6="_chatList_1w0cn_969",M6="_sidebarFooter_1w0cn_1017",E6="_settingsButton_1w0cn_1029",A6="_userStatus_1w0cn_1069",R6="_userInfo_1w0cn_1077",N6="_userAvatar_1w0cn_1089",D6="_userDetails_1w0cn_1129",z6="_userName_1w0cn_1143",B6="_active_1w0cn_1203",U6="_chatAvatar_1w0cn_1219",I6="_chatOnlineStatus_1w0cn_1293",O6="_chatInfo_1w0cn_1331",L6="_chatNameRow_1w0cn_1341",P6="_chatName_1w0cn_1341",H6="_chatTime_1w0cn_1373",$6="_chatPreviewRow_1w0cn_1387",V6="_chatPreview_1w0cn_1387",F6="_unreadBadge_1w0cn_1419",q6="_mainContent_1w0cn_1451",G6="_mobileHeader_1w0cn_1471",W6="_mobileTitle_1w0cn_1489",Y6="_mobileMenuBtn_1w0cn_1501",X6="_emptyState_1w0cn_1559",K6="_emptyStateIcon_1w0cn_1579",Q6="_emptyStateTitle_1w0cn_1617",Z6="_emptyStateText_1w0cn_1631",J6="_rightPanel_1w0cn_1649",ez="_collapsed_1w0cn_1671",tz="_rightPanelHeader_1w0cn_1687",nz="_rightPanelTitle_1w0cn_1703",az="_closePanel_1w0cn_1717",sz="_rightPanelContent_1w0cn_1773",iz="_panelPlaceholder_1w0cn_1811",oz="_mobileOverlay_1w0cn_1945",rz="_visible_1w0cn_1969",lz="_open_1w0cn_2041",cz="_loadingChats_1w0cn_2211",uz="_noChats_1w0cn_2213",dz="_loadingMessages_1w0cn_2215",pz="_noMessages_1w0cn_2217",fz="_spinner_1w0cn_2275",hz="_chatViewContainer_1w0cn_2303",mz="_chatHeader_1w0cn_2319",gz="_chatHeaderLeft_1w0cn_2339",yz="_chatHeaderAvatar_1w0cn_2351",xz="_chatHeaderInfo_1w0cn_2423",vz="_chatHeaderName_1w0cn_2435",bz="_chatHeaderStatus_1w0cn_2449",Sz="_chatHeaderRight_1w0cn_2459",wz="_chatHeaderBtn_1w0cn_2471",_z="_messagesContainer_1w0cn_2511",Cz="_message_1w0cn_2511",jz="_own_1w0cn_2573",Tz="_messageAvatar_1w0cn_2583",kz="_messageBubble_1w0cn_2627",Mz="_messageSender_1w0cn_2675",Ez="_messageText_1w0cn_2701",Az="_messageTime_1w0cn_2725",Rz="_seenIndicator_1w0cn_2755",Nz="_seen_1w0cn_2755",Dz="_delivered_1w0cn_2779",zz="_messageAttachment_1w0cn_2807",Bz="_attachmentImage_1w0cn_2815",Uz="_attachmentLink_1w0cn_2829",Iz="_messageInputContainer_1w0cn_2899",Oz="_inputDisabledNotice_1w0cn_2913",Lz="_filePreview_1w0cn_2937",Pz="_fileName_1w0cn_2957",Hz="_removeFile_1w0cn_2973",$z="_messageInputRow_1w0cn_3033",Vz="_fileInput_1w0cn_3045",Fz="_attachBtn_1w0cn_3053",qz="_messageInput_1w0cn_2899",Gz="_sendBtn_1w0cn_3227",Wz="_panelDetails_1w0cn_3307",Yz="_panelAvatar_1w0cn_3323",Xz="_panelName_1w0cn_3387",Kz="_panelType_1w0cn_3401",Qz="_panelDescription_1w0cn_3417",Zz="_panelMemberCount_1w0cn_3433",Jz="_replyPreview_1w0cn_3473",eB="_replyAuthor_1w0cn_3551",tB="_replyContent_1w0cn_3571",nB="_messageReactions_1w0cn_3601",aB="_reactionBadge_1w0cn_3615",sB="_messageFooter_1w0cn_3741",iB="_editedLabel_1w0cn_3757",oB="_contextMenu_1w0cn_3811",rB="_contextReactions_1w0cn_3833",lB="_contextReactionBtn_1w0cn_3847",cB="_contextDivider_1w0cn_3887",uB="_contextMenuItem_1w0cn_3899",dB="_danger_1w0cn_3957",pB="_highlighted_1w0cn_3987",fB="_scrollToBottomBtn_1w0cn_3997",hB="_replyBar_1w0cn_4065",mB="_replyBarContent_1w0cn_4087",gB="_replyBarIcon_1w0cn_4103",yB="_replyBarInfo_1w0cn_4125",xB="_replyBarLabel_1w0cn_4139",vB="_replyBarText_1w0cn_4151",bB="_replyBarClose_1w0cn_4169",SB="_editBar_1w0cn_4227",wB="_editBarContent_1w0cn_4249",_B="_editBarIcon_1w0cn_4265",CB="_editBarInfo_1w0cn_4287",jB="_editBarLabel_1w0cn_4301",TB="_editBarText_1w0cn_4313",kB="_editBarClose_1w0cn_4331",MB="_pinnedBar_1w0cn_4477",EB="_pinnedBarHeader_1w0cn_4489",AB="_pinnedBarLeft_1w0cn_4521",RB="_pinnedBarChevron_1w0cn_4547",NB="_expanded_1w0cn_4557",DB="_pinnedBarContent_1w0cn_4565",zB="_pinnedLoading_1w0cn_4575",BB="_pinnedItem_1w0cn_4589",UB="_pinnedItemInfo_1w0cn_4623",IB="_pinnedItemSender_1w0cn_4639",OB="_pinnedItemPreview_1w0cn_4651",LB="_pinnedItemJump_1w0cn_4667",PB="_panelClickHint_1w0cn_4729",HB="_modalBackdrop_1w0cn_4745",$B="_subModal_1w0cn_6407",VB="_subModalHeader_1w0cn_6433",FB="_subModalSearch_1w0cn_6515",qB="_subModalContent_1w0cn_6567",GB="_subModalLoading_1w0cn_6597",WB="_subModalEmpty_1w0cn_6625",YB="_subModalItem_1w0cn_6639",XB="_subModalItemAvatar_1w0cn_6665",KB="_subModalItemInfo_1w0cn_6713",QB="_subModalItemName_1w0cn_6727",ZB="_subModalItemMeta_1w0cn_6739",JB="_subModalItemBtn_1w0cn_6749",eU="_unban_1w0cn_6781",M={dashboardContainer:a6,togglePanelBtn:s6,clickable:i6,chatItem:o6,searchResultItem:r6,mainWrapper:l6,sidebar:c6,searchSection:u6,searchContainer:d6,searchWrapper:p6,searchIcon:f6,searchInput:h6,clearSearch:m6,searchDropdown:g6,dropdownHeader:y6,resultAvatar:x6,resultInfo:v6,resultName:b6,resultUsername:S6,resultType:w6,resultTypeIcon:_6,group:C6,channel:j6,noResults:T6,chatList:k6,sidebarFooter:M6,settingsButton:E6,userStatus:A6,userInfo:R6,userAvatar:N6,userDetails:D6,userName:z6,active:B6,chatAvatar:U6,chatOnlineStatus:I6,chatInfo:O6,chatNameRow:L6,chatName:P6,chatTime:H6,chatPreviewRow:$6,chatPreview:V6,unreadBadge:F6,mainContent:q6,mobileHeader:G6,mobileTitle:W6,mobileMenuBtn:Y6,emptyState:X6,emptyStateIcon:K6,emptyStateTitle:Q6,emptyStateText:Z6,rightPanel:J6,collapsed:ez,rightPanelHeader:tz,rightPanelTitle:nz,closePanel:az,rightPanelContent:sz,panelPlaceholder:iz,mobileOverlay:oz,visible:rz,open:lz,loadingChats:cz,noChats:uz,loadingMessages:dz,noMessages:pz,spinner:fz,chatViewContainer:hz,chatHeader:mz,chatHeaderLeft:gz,chatHeaderAvatar:yz,chatHeaderInfo:xz,chatHeaderName:vz,chatHeaderStatus:bz,chatHeaderRight:Sz,chatHeaderBtn:wz,messagesContainer:_z,message:Cz,own:jz,messageAvatar:Tz,messageBubble:kz,messageSender:Mz,messageText:Ez,messageTime:Az,seenIndicator:Rz,seen:Nz,delivered:Dz,messageAttachment:zz,attachmentImage:Bz,attachmentLink:Uz,messageInputContainer:Iz,inputDisabledNotice:Oz,filePreview:Lz,fileName:Pz,removeFile:Hz,messageInputRow:$z,fileInput:Vz,attachBtn:Fz,messageInput:qz,sendBtn:Gz,panelDetails:Wz,panelAvatar:Yz,panelName:Xz,panelType:Kz,panelDescription:Qz,panelMemberCount:Zz,replyPreview:Jz,replyAuthor:eB,replyContent:tB,messageReactions:nB,reactionBadge:aB,messageFooter:sB,editedLabel:iB,contextMenu:oB,contextReactions:rB,contextReactionBtn:lB,contextDivider:cB,contextMenuItem:uB,danger:dB,highlighted:pB,scrollToBottomBtn:fB,replyBar:hB,replyBarContent:mB,replyBarIcon:gB,replyBarInfo:yB,replyBarLabel:xB,replyBarText:vB,replyBarClose:bB,editBar:SB,editBarContent:wB,editBarIcon:_B,editBarInfo:CB,editBarLabel:jB,editBarText:TB,editBarClose:kB,pinnedBar:MB,pinnedBarHeader:EB,pinnedBarLeft:AB,pinnedBarChevron:RB,expanded:NB,pinnedBarContent:DB,pinnedLoading:zB,pinnedItem:BB,pinnedItemInfo:UB,pinnedItemSender:IB,pinnedItemPreview:OB,pinnedItemJump:LB,panelClickHint:PB,modalBackdrop:HB,subModal:$B,subModalHeader:VB,subModalSearch:FB,subModalContent:qB,subModalLoading:GB,subModalEmpty:WB,subModalItem:YB,subModalItemAvatar:XB,subModalItemInfo:KB,subModalItemName:QB,subModalItemMeta:ZB,subModalItemBtn:JB,unban:eU},tU=()=>{const{user:t,logout:n}=wt(),{theme:s,toggleTheme:o}=RS(),{fancyAnimations:c,toggleFancyAnimations:u}=NS(),p=s==="dark",{chats:h,currentChat:m,messages:g,isLoadingChats:y,isLoadingMessages:v,setCurrentChat:S,loadChats:j,loadMessages:C,sendMessage:T,isUserOnline:E,deleteMessage:z,editMessage:L,isBlockedBy:R,hasBlocked:X,loadPinnedMessages:P,getPinnedMessages:te,unpinMessage:re,isLoadingPinned:Q,addBlockedUser:ge,removeBlockedUser:me,setInitialPresenceStates:Pe}=Le(),{canSendMessage:qe}=id(m?.id),Qe=()=>{if(!m||m.type!=="dm"||!t)return null;const _=m.members?.find(W=>(W.userId||W.id)!==t.id);return _?.userId||_?.id||null},Re=Qe(),Te=Re?R(Re):!1,B=Re?X(Re):!1,ne=Te||B,[le,Se]=b.useState(""),[He,we]=b.useState(!1),[Ae,je]=b.useState([]),[ie,_e]=b.useState(!1),[he,_t]=b.useState(()=>window.innerWidth>768),[Ct,Bt]=b.useState(!1),[jt,rn]=b.useState(""),[Tt,ln]=b.useState(!1),[gt,In]=b.useState(null),[ft,xt]=b.useState(null),[Vt,yn]=b.useState(null),[at,Qt]=b.useState(null),[Zt,Gn]=b.useState(!1),[oe,ue]=b.useState(!1),[dt,ct]=b.useState(!1),[Ut,xn]=b.useState(!1),[$,Y]=b.useState(!1),[I,pe]=b.useState(!1),[ye,Oe]=b.useState(!1),[ut,On]=b.useState(!1),[ma,Kn]=b.useState(!1),[zs,Ln]=b.useState(!1),[is,ga]=b.useState(null),[Bs,ae]=b.useState(null),[de,ke]=b.useState(!1),[Ue,ve]=b.useState(null),[ze,$e]=b.useState(!1),[ce,ot]=b.useState(!1),[Ve,rt]=b.useState(null),[En,jn]=b.useState(!1),[kt,Mt]=b.useState(!1),[An,os]=b.useState(""),[co,yr]=b.useState([]),[Kl,xr]=b.useState(!1),[bi,uo]=b.useState(!1),[rs,Us]=b.useState([]),[Is,ls]=b.useState(!1),[cn,Ql]=b.useState(!1),[vr,cs]=b.useState(null),[Os,Si]=b.useState(!1),[$a,br]=b.useState(""),[Sr,wi]=b.useState(""),[Va,ya]=b.useState(null),[Rn,wr]=b.useState(null),[Jt,po]=b.useState(!1),[Pn,Ls]=b.useState(""),[fo,Hn]=b.useState(""),[Ps,_r]=b.useState(null),[Hs,us]=b.useState(null),[Ze,_i]=b.useState(!1),[en,Ci]=b.useState("public"),[ds,Cr]=b.useState(""),[ho,Zl]=b.useState(""),[Jl,ji]=b.useState(null),[xa,mo]=b.useState(null),[vn,ps]=b.useState(!1),[Fa,jr]=b.useState(!1),Ti=b.useRef(null),Tr=b.useRef(null),qa=b.useRef(null),va=b.useRef(null),Ga=b.useRef(null),$s=b.useRef(null),ba=b.useRef(null),go=b.useRef(null),Vs=b.useRef(null);b.useEffect(()=>{h.length===0&&j()},[]),b.useEffect(()=>{const _=()=>{const W=window.innerWidth<=768;W||Bt(!1),W&&_t(!1)};return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]),b.useEffect(()=>{const _=W=>{Ti.current&&!Ti.current.contains(W.target)&&we(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),b.useEffect(()=>{m&&m.id!==go.current&&(go.current=m.id,C(m.id),P(m.id),tt.joinChat(m.id),tt.markMessagesAsSeen(m.id).catch(_=>{console.warn("[DashboardLayout] Failed to mark messages as seen:",_)}),Le.getState().resetUnreadCount(m.id),jr(!1))},[m?.id]),b.useEffect(()=>{qa.current&&qa.current.scrollIntoView({behavior:"smooth"})},[g.length]),b.useEffect(()=>{const _=W=>{Vs.current&&!Vs.current.contains(W.target)&&xt(null)};return ft&&document.addEventListener("click",_),()=>document.removeEventListener("click",_)},[ft]),b.useEffect(()=>{const _=va.current;if(!_)return;const W=()=>{const{scrollTop:Ce,scrollHeight:Ge,clientHeight:tn}=_,ia=Ge-Ce-tn<100;Gn(!ia)};return _.addEventListener("scroll",W),()=>_.removeEventListener("scroll",W)},[m?.id]);const ec=(_,W)=>{_.preventDefault(),_.stopPropagation(),xt({messageId:W.messageId,x:_.clientX,y:_.clientY})},ki=async(_,W)=>{try{await Le.getState().toggleReaction(_,W)}catch(Ce){console.error("Failed to toggle reaction:",Ce)}xt(null)},yo=_=>{yn(_),xt(null),$s.current?.focus()},tc=_=>{Qt(_),rn(_.content||""),xt(null),$s.current?.focus()},$n=async _=>{if(await Cn({title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger",icon:"delete"})){try{await z(_)}catch(Ce){console.error("Failed to delete message:",Ce)}xt(null)}},fs=async _=>{try{_.isPinned?await re(_.messageId):await Le.getState().pinMessage(_.messageId)}catch(W){console.error("Failed to toggle pin:",W)}xt(null)},xo=()=>{qa.current?.scrollIntoView({behavior:"smooth"})},Fs=_=>{const W=document.getElementById(`msg-${_}`);W&&(W.scrollIntoView({behavior:"smooth",block:"center"}),W.classList.add(M.highlighted),setTimeout(()=>W.classList.remove(M.highlighted),2e3))},od=["","","","",""],vo={Like:"",Love:"",Laugh:"",Sad:"",Angry:""},kr=b.useCallback(_=>{if(Se(_),!_.trim()){je([]),_e(!1);return}ba.current&&clearTimeout(ba.current),_e(!0),ba.current=setTimeout(async()=>{try{const[W,Ce]=await Promise.all([mn.searchUsers(_).catch(()=>[]),Ee.searchChats(_).catch(()=>[])]),Ge=W.map(It=>({id:It.id,name:It.username,type:"user",avatar:It.avatar,username:It.username})),tn=Ce.filter(It=>{const Ya=It.type||It.chatType;return Ya!=="dm"&&Ya!==0}).map(It=>({id:It.id||It.entityId,name:It.name||It.displayName,type:It.type==="group"||It.chatType===1?"group":It.type==="channel"||It.chatType===2?"channel":"group",avatar:It.avatar||It.avatarUrl})),ia=[...Ge,...tn],cc=new Set,uc=ia.filter(It=>{const Ya=`${It.type}-${It.name.toLowerCase()}`;return cc.has(Ya)?!1:(cc.add(Ya),!0)});uc.sort((It,Ya)=>{const Nr={user:0,group:1,channel:2};return Nr[It.type]-Nr[Ya.type]}),je(uc)}catch(W){console.error("Search failed:",W),je([])}finally{_e(!1)}},300)},[]),qs=h.filter(_=>_.name.toLowerCase().includes(le.toLowerCase())),bo=He&&le.length>0,nc=()=>{Se(""),je([]),Tr.current?.focus()},Mr=async _=>{if(Se(""),je([]),we(!1),_.type==="user")Mi(_.id),Ln(!0);else{const W=h.find(Ce=>Ce.id===_.id);if(W)S(W),Bt(!1);else try{const Ce=await Ee.getChatProfile(_.id);rt(Ce);const Ge={id:_.id,name:_.name,type:_.type,avatar:_.avatar,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),unreadCount:0,members:[]};S(Ge),Kn(!0)}catch(Ce){console.error("Failed to load profile:",Ce)}}},rd=_=>{S(_),Bt(!1)},ac=async _=>{if(_&&(_.preventDefault(),_.stopPropagation()),console.log("[DashboardLayout] handleSendMessage called",{hasText:!!jt.trim(),hasFile:!!gt,fileName:gt?.name,chatId:m?.id}),!jt.trim()&&!gt||!m||Tt){console.log("[DashboardLayout] Skipping send - validation failed");return}ln(!0);try{if(at){await L(at.messageId,jt.trim()),Qt(null),rn("");return}let W;if(m.type==="dm"&&m.members){const Ce=m.members.find(Ge=>(Ge.userId||Ge.id)!==t?.id);W=Ce?.userId||Ce?.id}console.log("[DashboardLayout] Sending message...",{chatId:m.id,receiverId:W,hasFile:!!gt,replyId:Vt?.messageId}),await T(m.id,W,jt.trim(),gt||void 0,Vt?.messageId),console.log("[DashboardLayout] Message sent successfully"),rn(""),In(null),yn(null),Ga.current&&(Ga.current.value="")}catch(W){console.error("[DashboardLayout] Failed to send message:",W)}finally{console.log("[DashboardLayout] Send complete, resetting isSending"),ln(!1)}},Er=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),ac())},sc=_=>{if(_.type!=="dm")return!1;if(!_.members||!t)return _.isOnline||!1;const W=_.members.find(Ge=>(Ge.userId||Ge.id)!==t.id);if(!W)return!1;const Ce=W.userId||W.id;return E(Ce)},ld=_=>{if(_.lastMessage){const W=_.lastMessage.content||"";return _.lastMessage.fileUrl&&!W?" Attachment":P0(W,40)}return"No messages yet"},cd=_=>_.lastMessage?.createdAt?Hu(_.lastMessage.createdAt):Hu(_.updatedAt||_.createdAt),Mi=async _=>{ga(_),ke(!0),ve(null);try{const W=await mn.getUserProfile(_);ae(W);const Ce=await mn.getMutualBlockStatus(_);$e(Ce.iBlockedThem),ot(Ce.theyBlockedMe)}catch(W){ve(W.response?.data?.message||"Failed to load profile")}finally{ke(!1)}},ud=async _=>{try{await mn.blockUser(_),ge(_),$e(!0)}catch(W){console.error("Failed to block user:",W)}},ic=async _=>{try{await mn.unblockUser(_),me(_),$e(!1)}catch(W){console.error("Failed to unblock user:",W)}},dd=async _=>{try{const W=h.find(Ge=>Ge.type!=="dm"?!1:Ge.members&&Ge.members.length>0?Ge.members.some(tn=>(tn.userId||tn.id)===_):!1);if(W){S(W),Ln(!1),Bt(!1);return}for(const Ge of h.filter(tn=>tn.type==="dm"))if(!Ge.members||Ge.members.length===0)try{if((await Ee.getChatProfile(Ge.id)).members?.some(ia=>ia.userId===_||ia.user?.id===_)){S(Ge),Ln(!1),Bt(!1);return}}catch{}const Ce=await Ee.createOrGetDM(_);Ce&&(S(Ce),await j()),Ln(!1)}catch(W){console.error("Failed to start conversation:",W),console.error("Failed to start conversation")}},Wa=async _=>{jn(!0);try{const W=await Ee.getChatProfile(_);rt(W);const Ce=W.members?.map(Ge=>Ge.userId)||[];if(Ce.length>0)try{const Ge=await tt.getPresenceStates(Ce);Object.keys(Ge).length>0&&Pe(Ge)}catch(Ge){console.error("Failed to load presence states:",Ge)}}catch(W){console.error("Failed to load group profile:",W)}finally{jn(!1)}},pd=async _=>{if(os(_),!_.trim()){yr([]);return}xr(!0);try{const W=await mn.searchUsers(_),Ce=new Set(Ve?.members?.map(tn=>tn.userId)||[]),Ge=W.filter(tn=>!Ce.has(tn.id));yr(Ge)}catch(W){console.error("Failed to search users:",W)}finally{xr(!1)}},fd=async _=>{if(m)try{m.type==="group"?await Ee.addMemberToGroup(m.id,_):m.type==="channel"&&await Ee.addMemberToChannel(m.id,_),Mt(!1),os(""),yr([]),await Wa(m.id)}catch(W){console.error("Failed to add member:",W)}},Ar=async _=>{if(m)try{m.type==="group"?await Ee.removeMemberFromGroup(m.id,_):m.type==="channel"&&await Ee.removeMemberFromChannel(m.id,_),await Wa(m.id)}catch(W){console.error("Failed to remove member:",W)}},hd=async _=>{if(m)try{await Ee.banUser(m.id,_),await Wa(m.id)}catch(W){console.error("Failed to ban member:",W)}},oc=async(_,W)=>{if(m)try{await Ee.unbanUser(m.id,_),await md()}catch(Ce){console.error("Failed to unban member:",Ce)}},md=async()=>{if(m){ls(!0);try{const _=await Ee.getBannedUsers(m.id);Us(_)}catch(_){console.error("Failed to load banned users:",_)}finally{ls(!1)}}},rc=async()=>{if(m)try{await Ee.leaveChat(m.id,m.type),Kn(!1),S(null),j()}catch(_){console.error("Failed to leave:",_)}},gd=async()=>{if(m)try{await Ee.deleteChat(m.id,m.type),Kn(!1),S(null),j()}catch(_){console.error("Failed to delete:",_)}},yd=async _=>{if(m)try{await Ee.updateChatPrivacy(m.id,_),S({...m,privacy:_}),Wa(m.id)}catch(W){console.error("Failed to update privacy:",W)}},xd=()=>{m&&(br(m.name||""),wi(m.description||""),ya(null),wr(m.avatar?pt(m.avatar)??null:null),Si(!0))},vd=_=>{const W=_.target.files?.[0];if(W){ya(W);const Ce=new FileReader;Ce.onloadend=()=>{wr(Ce.result)},Ce.readAsDataURL(W)}},bd=async()=>{if(!(!m||!$a.trim())){po(!0);try{const _=new FormData;_.append("Name",$a.trim()),_.append("Description",Sr.trim()),Va&&(_.append("file",Va),console.log("[EditGroup] Appending avatar file:",Va.name,Va.size,"bytes")),console.log("[EditGroup] Sending update for chat:",m.id,m.type),await Ee.updateChat(m.id,m.type,_);const W={...m,name:$a.trim(),description:Sr.trim(),...Va&&Rn?{avatar:Rn}:{}};S(W),Si(!1),j(),setTimeout(()=>{Wa(m.id)},300)}catch(_){console.error("Failed to update group:",_)}finally{po(!1)}}},Sa=()=>{Ls(""),Hn(""),_r(null),us(null),Ci("public")},lc=_=>{const W=_.target.files?.[0];if(W){_r(W);const Ce=new FileReader;Ce.onloadend=()=>{us(Ce.result)},Ce.readAsDataURL(W)}},Sd=async()=>{if(console.log("[DashboardLayout] handleCreateGroup called"),console.log("[DashboardLayout] createGroupName:",Pn),!Pn.trim()){console.log("[DashboardLayout] Group name is empty, returning");return}_i(!0);try{const _=new FormData;_.append("Name",Pn.trim()),_.append("Description",fo.trim()),_.append("PrivacyType",en==="public"?"Public":"Private"),Ps&&_.append("file",Ps),console.log("[DashboardLayout] FormData contents:");for(const[Ce,Ge]of _.entries())console.log(`  ${Ce}:`,Ge instanceof File?`File(${Ge.name})`:Ge);console.log("[DashboardLayout] Calling chatService.createGroup...");const W=await Ee.createGroup(_);console.log("[DashboardLayout] createGroup response:",W),ct(!1),Sa(),await j(),W&&S(W),console.log("[DashboardLayout] Group created successfully!")}catch(_){console.error("[DashboardLayout] Failed to create group:",_)}finally{_i(!1)}},wd=async()=>{if(Pn.trim()){_i(!0);try{const _=new FormData;_.append("Name",Pn.trim()),_.append("Description",fo.trim()),_.append("PrivacyType",en==="public"?"Public":"Private"),Ps&&_.append("file",Ps);const W=await Ee.createChannel(_);xn(!1),Sa(),await j(),W&&S(W)}catch(_){console.error("Failed to create channel:",_)}finally{_i(!1)}}},Rr=()=>{Cr(t?.username||""),Zl(t?.bio||""),ji(null),mo(t?.avatar?pt(t.avatar)??null:null),Y(!0)},Ei=_=>{const W=_.target.files?.[0];if(W){ji(W);const Ce=new FileReader;Ce.onloadend=()=>{mo(Ce.result)},Ce.readAsDataURL(W)}},_d=async()=>{if(ds.trim()){ps(!0);try{const _=new FormData;_.append("Username",ds.trim()),_.append("Description",ho.trim()),Jl&&_.append("file",Jl);const W=await mn.updateProfile(_);W&&wt.getState().setUser(W),Y(!1)}catch(_){console.error("Failed to update profile:",_)}finally{ps(!1)}}};return r.jsxs("div",{className:M.dashboardContainer,children:[r.jsx("div",{className:`${M.mobileOverlay} ${Ct?M.visible:""}`,onClick:()=>Bt(!1)}),r.jsxs("div",{className:M.mainWrapper,children:[r.jsxs("aside",{className:`${M.sidebar} ${Ct?M.open:""}`,children:[r.jsx("div",{className:M.searchSection,ref:Ti,children:r.jsxs("div",{className:M.searchContainer,children:[r.jsxs("div",{className:M.searchWrapper,children:[r.jsx("input",{ref:Tr,type:"text",className:M.searchInput,placeholder:"Search...",value:le,onChange:_=>kr(_.target.value),onFocus:()=>we(!0)}),r.jsx(_l,{className:M.searchIcon,size:15,strokeWidth:2}),le&&r.jsx("button",{className:M.clearSearch,onClick:nc,"aria-label":"Clear",type:"button",children:r.jsx(kn,{size:12,strokeWidth:2})})]}),bo&&r.jsx("div",{className:M.searchDropdown,children:ie?r.jsxs("div",{className:M.noResults,children:[r.jsx(sn,{size:18,className:M.spinner}),r.jsx("span",{children:"Searching..."})]}):Ae.length>0?r.jsxs(r.Fragment,{children:[Ae.filter(_=>_.type==="user").length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:M.dropdownHeader,children:[r.jsx(wn,{size:12}),"Users"]}),Ae.filter(_=>_.type==="user").map(_=>r.jsxs("button",{className:M.searchResultItem,onClick:()=>Mr(_),type:"button",children:[r.jsx("div",{className:M.resultAvatar,children:_.avatar?r.jsx("img",{src:pt(_.avatar),alt:_.name}):Mn(_.name)}),r.jsxs("div",{className:M.resultInfo,children:[r.jsx("span",{className:M.resultName,children:_.name}),r.jsxs("span",{className:M.resultUsername,children:["@",_.username||_.name]})]}),r.jsx("div",{className:M.resultTypeIcon,children:r.jsx(wn,{size:14})})]},`user-${_.id}`))]}),Ae.filter(_=>_.type==="group").length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:M.dropdownHeader,children:[r.jsx(wn,{size:12}),"Groups"]}),Ae.filter(_=>_.type==="group").map(_=>r.jsxs("button",{className:M.searchResultItem,onClick:()=>Mr(_),type:"button",children:[r.jsx("div",{className:`${M.resultAvatar} ${M.group}`,children:_.avatar?r.jsx("img",{src:pt(_.avatar),alt:_.name}):r.jsx(wn,{size:16})}),r.jsxs("div",{className:M.resultInfo,children:[r.jsx("span",{className:M.resultName,children:_.name}),r.jsx("span",{className:M.resultType,children:"Group"})]}),r.jsx("div",{className:`${M.resultTypeIcon} ${M.group}`,children:r.jsx(wn,{size:14})})]},`group-${_.id}`))]}),Ae.filter(_=>_.type==="channel").length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:M.dropdownHeader,children:[r.jsx(ts,{size:12}),"Channels"]}),Ae.filter(_=>_.type==="channel").map(_=>r.jsxs("button",{className:M.searchResultItem,onClick:()=>Mr(_),type:"button",children:[r.jsx("div",{className:`${M.resultAvatar} ${M.channel}`,children:_.avatar?r.jsx("img",{src:pt(_.avatar),alt:_.name}):r.jsx(ts,{size:16})}),r.jsxs("div",{className:M.resultInfo,children:[r.jsx("span",{className:M.resultName,children:_.name}),r.jsx("span",{className:M.resultType,children:"Channel"})]}),r.jsx("div",{className:`${M.resultTypeIcon} ${M.channel}`,children:r.jsx(ts,{size:14})})]},`channel-${_.id}`))]})]}):r.jsxs("div",{className:M.noResults,children:[r.jsx(_l,{size:18,strokeWidth:1.5}),r.jsx("span",{children:"No results found"})]})})]})}),r.jsx("div",{className:M.chatList,children:y?r.jsxs("div",{className:M.loadingChats,children:[r.jsx(sn,{size:24,className:M.spinner}),r.jsx("span",{children:"Loading chats..."})]}):qs.length===0?r.jsxs("div",{className:M.noChats,children:[r.jsx(_u,{size:24,strokeWidth:1.5}),r.jsx("span",{children:"No conversations yet"})]}):qs.map(_=>r.jsxs("div",{className:`${M.chatItem} ${m?.id===_.id?M.active:""}`,onClick:()=>rd(_),children:[r.jsxs("div",{className:`${M.chatAvatar} ${_.type!=="dm"?M.group:""}`,children:[_.avatar?r.jsx("img",{src:pt(_.avatar),alt:_.name}):_.type==="group"?r.jsx(wn,{size:18,strokeWidth:2}):_.type==="channel"?r.jsx(ts,{size:18,strokeWidth:2}):Mn(_.name),_.type==="dm"&&sc(_)&&r.jsx("div",{className:M.chatOnlineStatus})]}),r.jsxs("div",{className:M.chatInfo,children:[r.jsxs("div",{className:M.chatNameRow,children:[r.jsx("span",{className:M.chatName,children:_.name}),r.jsx("span",{className:M.chatTime,children:cd(_)})]}),r.jsxs("div",{className:M.chatPreviewRow,children:[r.jsx("span",{className:M.chatPreview,children:ld(_)}),_.unreadCount>0&&r.jsx("span",{className:M.unreadBadge,children:_.unreadCount})]})]})]},_.id))}),r.jsx("div",{className:M.sidebarFooter,children:r.jsxs("button",{className:M.settingsButton,onClick:()=>ue(!0),type:"button",children:[r.jsxs("div",{className:M.userInfo,children:[r.jsx("div",{className:M.userAvatar,children:t?.avatar?r.jsx("img",{src:pt(t.avatar),alt:t.username}):Mn(t?.username||"U")}),r.jsxs("div",{className:M.userDetails,children:[r.jsx("span",{className:M.userName,children:t?.username||"User"}),r.jsx("span",{className:M.userStatus,children:"Online"})]})]}),r.jsx(nh,{size:18,strokeWidth:2})]})})]}),r.jsxs("main",{className:M.mainContent,children:[r.jsxs("div",{className:M.mobileHeader,children:[r.jsx("button",{className:M.mobileMenuBtn,onClick:()=>Bt(!Ct),"aria-label":"Toggle menu",type:"button",children:r.jsx(jb,{size:20,strokeWidth:2})}),r.jsx("span",{className:M.mobileTitle,children:m?m.name:"Messages"})]}),m?r.jsxs("div",{className:M.chatViewContainer,children:[r.jsxs("div",{className:M.chatHeader,children:[r.jsxs("div",{className:M.chatHeaderLeft,children:[r.jsx("div",{className:`${M.chatHeaderAvatar} ${m.type!=="dm"?M.group:""}`,children:m.avatar?r.jsx("img",{src:pt(m.avatar),alt:m.name}):m.type==="group"?r.jsx(wn,{size:20,strokeWidth:2}):m.type==="channel"?r.jsx(ts,{size:20,strokeWidth:2}):Mn(m.name)}),r.jsxs("div",{className:M.chatHeaderInfo,children:[r.jsx("h3",{className:M.chatHeaderName,children:m.name}),r.jsx("span",{className:M.chatHeaderStatus,children:m.type==="dm"?sc(m)?"Online":"Offline":`${m.members?.length||m.participantsCount||0} members`})]})]}),r.jsx("div",{className:M.chatHeaderRight,children:m.type!=="dm"&&r.jsx("button",{className:M.chatHeaderBtn,onClick:()=>{Kn(!0),Wa(m.id)},title:`${m.type==="channel"?"Channel":"Group"} Info`,type:"button",children:r.jsx(Vh,{size:18,strokeWidth:2,style:{flexShrink:0,minWidth:18}})})})]}),(()=>{const _=te(m.id);return _.length===0?null:r.jsxs("div",{className:M.pinnedBar,children:[r.jsxs("button",{className:M.pinnedBarHeader,onClick:()=>jr(!Fa),type:"button",children:[r.jsxs("div",{className:M.pinnedBarLeft,children:[r.jsx(Al,{size:14}),r.jsxs("span",{children:[_.length," pinned message",_.length!==1?"s":""]})]}),r.jsx(ah,{size:16,className:`${M.pinnedBarChevron} ${Fa?M.expanded:""}`})]}),r.jsx(Yn,{children:Fa&&r.jsx(se.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:M.pinnedBarContent,children:Q?r.jsx("div",{className:M.pinnedLoading,children:r.jsx(sn,{size:16,className:M.spinner})}):_.map(W=>r.jsxs("div",{className:M.pinnedItem,children:[r.jsxs("div",{className:M.pinnedItemInfo,children:[r.jsx("span",{className:M.pinnedItemSender,children:W.senderUsername}),r.jsx("span",{className:M.pinnedItemPreview,children:W.content?P0(W.content,50):W.fileUrl?"Attachment":"Empty"})]}),r.jsx("button",{className:M.pinnedItemJump,onClick:()=>Fs(W.messageId),type:"button",children:"Jump"})]},W.messageId))})})]})})(),r.jsxs("div",{className:M.messagesContainer,ref:va,children:[v?r.jsxs("div",{className:M.loadingMessages,children:[r.jsx(sn,{size:24,className:M.spinner}),r.jsx("span",{children:"Loading messages..."})]}):g.length===0?r.jsxs("div",{className:M.noMessages,children:[r.jsx(_u,{size:24,strokeWidth:1.5}),r.jsx("span",{children:"No messages yet. Start the conversation!"})]}):g.map(_=>r.jsxs("div",{id:`msg-${_.messageId}`,className:`${M.message} ${_.isCurrentUser?M.own:""}`,children:[!_.isCurrentUser&&r.jsx("div",{className:M.messageAvatar,onClick:()=>{_.senderId&&(Mi(_.senderId),Ln(!0))},style:{cursor:"pointer"},title:`View ${_.senderUsername}'s profile`,children:_.senderAvatarUrl?r.jsx("img",{src:pt(_.senderAvatarUrl),alt:_.senderUsername}):Mn(_.senderUsername)}),r.jsxs("div",{className:M.messageBubble,onContextMenu:W=>ec(W,_),onClick:W=>{if("ontouchstart"in window&&W.detail===1){const Ce=W.target;if(Ce.closest("button")||Ce.closest("a")||Ce.closest(`.${M.replyPreview}`))return;W.preventDefault(),xt({messageId:_.messageId,x:W.clientX,y:W.clientY})}},children:[!_.isCurrentUser&&m.type!=="dm"&&r.jsx("span",{className:M.messageSender,onClick:W=>{W.stopPropagation(),_.senderId&&(Mi(_.senderId),Ln(!0))},style:{cursor:"pointer"},title:`View ${_.senderUsername}'s profile`,children:_.senderUsername}),_.replyId&&(()=>{const W=g.find(Ce=>Ce.messageId===_.replyId);return r.jsxs("div",{className:M.replyPreview,onClick:()=>W&&Fs(_.replyId),children:[r.jsx(xf,{size:12}),r.jsx("span",{className:M.replyAuthor,children:W?.senderUsername||"Unknown"}),r.jsxs("span",{className:M.replyContent,children:[W?.content?.substring(0,40)||(W?.fileUrl?" File":"Deleted"),W?.content&&W.content.length>40?"...":""]})]})})(),_.fileUrl&&r.jsx("div",{className:M.messageAttachment,children:/\.(jpg|jpeg|png|gif|webp)$/i.test(_.fileUrl)?r.jsx("img",{src:pt(_.fileUrl),alt:"Attachment",className:M.attachmentImage}):r.jsxs("a",{href:pt(_.fileUrl),target:"_blank",rel:"noopener noreferrer",className:M.attachmentLink,children:[r.jsx(Jx,{size:14}),r.jsx("span",{children:"View Attachment"})]})}),_.content&&r.jsx("p",{className:M.messageText,children:_.content}),_.messageReactions&&_.messageReactions.length>0&&(()=>{const W=_.messageReactions.reduce((Ce,Ge)=>{const tn=Ge.reactionType||Ge.type||"Like";return Ce[tn]||(Ce[tn]={count:0,users:[]}),Ce[tn].count++,Ce[tn].users.push(Ge.userName||Ge.userId||"User"),Ce},{});return r.jsx("div",{className:M.messageReactions,children:Object.entries(W).map(([Ce,Ge])=>r.jsxs("button",{className:M.reactionBadge,onClick:()=>ki(_.messageId,vo[Ce]||""),title:Ge.users.join(", "),children:[vo[Ce]||"",Ge.count>1&&r.jsx("span",{children:Ge.count})]},Ce))})})(),r.jsxs("div",{className:M.messageFooter,children:[r.jsxs("span",{className:M.messageTime,children:[nA(_.sentAt),_.editedAt&&r.jsx("span",{className:M.editedLabel,children:" (edited)"})]}),"isSeen"in _&&r.jsx("span",{className:`${M.seenIndicator} ${_.isSeen?M.seen:M.delivered}`,children:_.isSeen?"":""})]}),ft?.messageId===_.messageId&&r.jsxs("div",{ref:Vs,className:M.contextMenu,style:{position:"fixed",top:Math.min(ft.y,window.innerHeight-220),left:Math.min(ft.x,window.innerWidth-160)},children:[r.jsx("div",{className:M.contextReactions,children:od.map(W=>r.jsx("button",{className:M.contextReactionBtn,onClick:()=>ki(_.messageId,W),children:W},W))}),r.jsx("div",{className:M.contextDivider}),r.jsxs("button",{className:M.contextMenuItem,onClick:()=>yo(_),children:[r.jsx(xf,{size:14})," Reply"]}),r.jsxs("button",{className:M.contextMenuItem,onClick:()=>fs(_),children:[r.jsx(Al,{size:14})," ",_.isPinned?"Unpin":"Pin"]}),_.isCurrentUser&&r.jsxs("button",{className:M.contextMenuItem,onClick:()=>tc(_),children:[r.jsx(ev,{size:14})," Edit"]}),_.isCurrentUser&&r.jsxs("button",{className:`${M.contextMenuItem} ${M.danger}`,onClick:()=>$n(_.messageId),children:[r.jsx(Wu,{size:14})," Delete"]})]})]})]},_.messageId)),r.jsx("div",{ref:qa})]}),Zt&&r.jsx("button",{className:M.scrollToBottomBtn,onClick:xo,type:"button","aria-label":"Scroll to bottom",children:r.jsx(ah,{size:18})}),r.jsx("div",{className:M.messageInputContainer,children:ne?r.jsx("div",{className:M.inputDisabledNotice,children:r.jsx("span",{children:B?"You have blocked this user. Unblock to send messages.":"You cannot message this user."})}):!qe&&m.type!=="dm"?r.jsx("div",{className:M.inputDisabledNotice,children:r.jsx("span",{children:"You don't have permission to send messages in this chat."})}):r.jsxs(r.Fragment,{children:[Vt&&r.jsxs("div",{className:M.replyBar,children:[r.jsxs("div",{className:M.replyBarContent,children:[r.jsx("div",{className:M.replyBarIcon,children:r.jsx(xf,{size:14})}),r.jsxs("div",{className:M.replyBarInfo,children:[r.jsxs("span",{className:M.replyBarLabel,children:["Replying to ",Vt.senderUsername]}),r.jsxs("span",{className:M.replyBarText,children:[Vt.content?.substring(0,50)||" Attachment",Vt.content&&Vt.content.length>50?"...":""]})]})]}),r.jsx("button",{className:M.replyBarClose,onClick:()=>yn(null),type:"button",children:r.jsx(kn,{size:14})})]}),at&&r.jsxs("div",{className:M.editBar,children:[r.jsxs("div",{className:M.editBarContent,children:[r.jsx("div",{className:M.editBarIcon,children:r.jsx(ev,{size:14})}),r.jsxs("div",{className:M.editBarInfo,children:[r.jsx("span",{className:M.editBarLabel,children:"Editing message"}),r.jsxs("span",{className:M.editBarText,children:[at.content?.substring(0,50)||"",at.content&&at.content.length>50?"...":""]})]})]}),r.jsx("button",{className:M.editBarClose,onClick:()=>{Qt(null),rn("")},type:"button",children:r.jsx(kn,{size:14})})]}),gt&&r.jsxs("div",{className:M.filePreview,children:[r.jsx("span",{className:M.fileName,children:gt.name}),r.jsx("button",{className:M.removeFile,onClick:()=>{In(null),Ga.current&&(Ga.current.value="")},children:r.jsx(kn,{size:14})})]}),r.jsxs("div",{className:M.messageInputRow,children:[r.jsx("input",{type:"file",ref:Ga,className:M.fileInput,onChange:_=>{_.preventDefault(),_.stopPropagation();const W=_.target.files?.[0]||null;console.log("[DashboardLayout] File selected:",W?.name,W?.size),In(W)}}),r.jsx("button",{className:M.attachBtn,onClick:()=>Ga.current?.click(),type:"button",children:r.jsx(Jx,{size:18,strokeWidth:2})}),r.jsx("input",{type:"text",className:M.messageInput,placeholder:"Type a message...",value:jt,onChange:_=>rn(_.target.value),onKeyPress:Er,disabled:Tt}),r.jsx("button",{className:M.sendBtn,onClick:_=>ac(_),disabled:!jt.trim()&&!gt||Tt,type:"button",children:Tt?r.jsx(sn,{size:18,className:M.spinner}):r.jsx(V_,{size:18,strokeWidth:2})})]})]})})]}):r.jsxs("div",{className:M.emptyState,children:[r.jsx("div",{className:M.emptyStateIcon,children:r.jsx(_u,{size:32,strokeWidth:1.5})}),r.jsx("h2",{className:M.emptyStateTitle,children:"Select a conversation"}),r.jsx("p",{className:M.emptyStateText,children:"Choose a chat from the sidebar to start messaging"})]}),!he&&m&&r.jsx("button",{className:M.togglePanelBtn,onClick:()=>_t(!0),"aria-label":"Open panel",type:"button",children:r.jsx(F_,{size:16,strokeWidth:2})})]}),r.jsxs("aside",{className:`${M.rightPanel} ${he?"":M.collapsed}`,children:[r.jsxs("div",{className:M.rightPanelHeader,children:[r.jsx("span",{className:M.rightPanelTitle,children:"Details"}),r.jsx("button",{className:M.closePanel,onClick:()=>_t(!1),"aria-label":"Close panel",type:"button",children:r.jsx(kn,{size:16,strokeWidth:2})})]}),r.jsx("div",{className:M.rightPanelContent,children:m?r.jsxs("div",{className:`${M.panelDetails} ${M.clickable}`,onClick:()=>{if(console.log("[DashboardLayout] Panel details clicked",{chatType:m.type,members:m.members,currentUserId:t?.id}),m.type==="dm"){const _=Qe();console.log("[DashboardLayout] DM profile click, otherUserId:",_),_?(Ln(!0),Mi(_)):console.warn("[DashboardLayout] Could not find other user in DM")}else(m.type==="group"||m.type==="channel")&&(Kn(!0),Wa(m.id))},children:[r.jsx("div",{className:M.panelAvatar,children:m.avatar?r.jsx("img",{src:pt(m.avatar),alt:m.name}):m.type==="group"?r.jsx(wn,{size:32,strokeWidth:1.5}):m.type==="channel"?r.jsx(ts,{size:32,strokeWidth:1.5}):r.jsx("span",{children:Mn(m.name)})}),r.jsx("h3",{className:M.panelName,children:m.name}),r.jsx("p",{className:M.panelType,children:m.type==="dm"?"Direct Message":m.type==="group"?"Group Chat":"Channel"}),m.description&&r.jsx("p",{className:M.panelDescription,children:m.description}),m.type!=="dm"&&r.jsxs("div",{className:M.panelMemberCount,children:[r.jsx(wn,{size:16}),r.jsxs("span",{children:[m.members?.length||m.participantsCount||0," members"]})]}),r.jsx("p",{className:M.panelClickHint,children:m.type==="dm"?"Click to view profile":"Click to view details"})]}):r.jsxs("div",{className:M.panelPlaceholder,children:[r.jsx(wn,{size:28,strokeWidth:1.5}),r.jsx("p",{children:"Select a conversation to view details"})]})})]})]}),r.jsx(KS,{isOpen:oe,onClose:()=>ue(!1),onCreateGroup:()=>{Sa(),ct(!0)},onCreateChannel:()=>{Sa(),xn(!0)},onEditProfile:Rr,onShowNotifications:()=>pe(!0),onShowAdminPanel:()=>Oe(!0),onShowBlockedUsers:()=>On(!0),isDarkMode:p,onToggleDarkMode:o,onLogout:n,fancyAnimations:c,onToggleFancyAnimations:u}),is&&r.jsx(Oh,{isOpen:zs,onClose:()=>{Ln(!1),ga(null)},userId:is,onSendMessage:_=>{dd(_)},onBlockUser:_=>{ud(_)},onUnblockUser:_=>{ic(_)},fancyAnimations:c}),m&&m.type!=="dm"&&r.jsx(YS,{isOpen:ma,onClose:()=>Kn(!1),chat:m,currentUserId:t?.id||"",onEditGroup:xd,onDeleteGroup:gd,onLeaveGroup:rc,onKickMember:Ar,onViewUserProfile:_=>{Kn(!1),Mi(_),Ln(!0)},onBanMember:async _=>{await hd(_)},onUnbanMember:async _=>{await oc(_)},onUpdatePrivacy:async _=>{await yd(_)},fancyAnimations:c}),r.jsx(Yn,{children:Os&&m&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Si(!1),children:r.jsxs(se.div,{className:M.subModal,style:{maxWidth:"400px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsxs("h3",{children:["Edit ",m.type==="channel"?"Channel":"Group"]}),r.jsx("button",{onClick:()=>Si(!1),type:"button",disabled:Jt,children:r.jsx(kn,{size:18})})]}),r.jsxs("div",{className:M.subModalContent,style:{padding:"20px",position:"relative"},children:[Jt&&r.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.4)",borderRadius:"0 0 12px 12px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(2px)"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",color:"var(--dash-text)"},children:[r.jsx(sn,{size:32,className:M.spinner,style:{color:"var(--dash-primary)"}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"Saving changes..."})]})}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"24px",opacity:Jt?.5:1,pointerEvents:Jt?"none":"auto"},children:[r.jsxs("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"var(--dash-surface-elevated)",border:"2px solid var(--dash-border-light)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:Jt?"not-allowed":"pointer",position:"relative"},onClick:()=>!Jt&&document.getElementById("editGroupAvatarInput")?.click(),children:[Rn?r.jsx("img",{src:Rn,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):m.type==="channel"?r.jsx(ts,{size:40,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}):r.jsx(wn,{size:40,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",padding:"4px",textAlign:"center",fontSize:"11px",color:"var(--dash-text)"},children:"Change"})]}),r.jsx("input",{type:"file",id:"editGroupAvatarInput",accept:"image/*",style:{display:"none"},onChange:vd}),r.jsx("span",{style:{fontSize:"12px",color:"var(--dash-text-muted)",marginTop:"8px"},children:"Click to change avatar"})]}),r.jsxs("div",{style:{marginBottom:"16px",opacity:Jt?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"6px"},children:"Name"}),r.jsx("input",{type:"text",value:$a,onChange:_=>br(_.target.value),placeholder:`${m.type==="channel"?"Channel":"Group"} name`,disabled:Jt,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",cursor:Jt?"not-allowed":"text"}})]}),r.jsxs("div",{style:{marginBottom:"24px",opacity:Jt?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"6px"},children:"Description"}),r.jsx("textarea",{value:Sr,onChange:_=>wi(_.target.value),placeholder:"Add a description...",rows:3,disabled:Jt,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",resize:"none",cursor:Jt?"not-allowed":"text"}})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",opacity:Jt?.5:1},children:[r.jsx("button",{onClick:()=>Si(!1),disabled:Jt,style:{flex:1,padding:"10px 16px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",fontWeight:500,cursor:Jt?"not-allowed":"pointer"},children:"Cancel"}),r.jsx("button",{onClick:bd,disabled:Jt||!$a.trim(),style:{flex:1,padding:"10px 16px",background:"var(--dash-primary)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"14px",fontWeight:500,cursor:Jt||!$a.trim()?"not-allowed":"pointer",opacity:Jt||!$a.trim()?.6:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:Jt?r.jsxs(r.Fragment,{children:[r.jsx(sn,{size:16,className:M.spinner}),"Saving..."]}):"Save Changes"})]})]})]})})}),r.jsx(Yn,{children:kt&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Mt(!1),children:r.jsxs(se.div,{className:M.subModal,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsx("h3",{children:"Add Member"}),r.jsx("button",{onClick:()=>Mt(!1),type:"button",children:r.jsx(kn,{size:18})})]}),r.jsxs("div",{className:M.subModalSearch,children:[r.jsx(_l,{size:14}),r.jsx("input",{type:"text",placeholder:"Search users to add...",value:An,onChange:_=>pd(_.target.value),autoFocus:!0})]}),r.jsxs("div",{className:M.subModalContent,children:[Kl&&r.jsxs("div",{className:M.subModalLoading,children:[r.jsx(sn,{size:20,className:M.spinner}),r.jsx("span",{children:"Searching..."})]}),!Kl&&An&&co.length===0&&r.jsx("div",{className:M.subModalEmpty,children:"No users found"}),co.map(_=>r.jsxs("div",{className:M.subModalItem,children:[r.jsx("div",{className:M.subModalItemAvatar,children:_.avatar?r.jsx("img",{src:pt(_.avatar),alt:_.username}):r.jsx("span",{children:Mn(_.username)})}),r.jsx("div",{className:M.subModalItemInfo,children:r.jsx("span",{className:M.subModalItemName,children:_.username})}),r.jsx("button",{className:M.subModalItemBtn,onClick:()=>fd(_.id),type:"button",children:"Add"})]},_.id))]})]})})}),r.jsx(Yn,{children:bi&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>uo(!1),children:r.jsxs(se.div,{className:M.subModal,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsxs("h3",{children:[r.jsx(As,{size:18}),"Banned Users"]}),r.jsx("button",{onClick:()=>uo(!1),type:"button",children:r.jsx(kn,{size:18})})]}),r.jsxs("div",{className:M.subModalContent,children:[Is&&r.jsxs("div",{className:M.subModalLoading,children:[r.jsx(sn,{size:20,className:M.spinner}),r.jsx("span",{children:"Loading..."})]}),!Is&&rs.length===0&&r.jsx("div",{className:M.subModalEmpty,children:"No banned users"}),rs.map(_=>r.jsxs("div",{className:M.subModalItem,children:[r.jsx("div",{className:M.subModalItemAvatar,children:_.avatarUrl?r.jsx("img",{src:pt(_.avatarUrl),alt:_.username}):r.jsx("span",{children:Mn(_.username)})}),r.jsxs("div",{className:M.subModalItemInfo,children:[r.jsx("span",{className:M.subModalItemName,children:_.username}),r.jsxs("span",{className:M.subModalItemMeta,children:["Banned ",new Date(_.bannedAt).toLocaleDateString()]})]}),r.jsx("button",{className:`${M.subModalItemBtn} ${M.unban}`,onClick:()=>oc(_.userId,_.username),type:"button",children:"Unban"})]},_.userId))]})]})})}),m&&vr&&r.jsx(zm,{isOpen:cn,onClose:()=>{Ql(!1),cs(null)},chatId:m.id,member:vr,onPermissionsChanged:async()=>{m&&await Wa(m.id)}}),r.jsx(Yn,{children:dt&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{Ze||(ct(!1),Sa())},children:r.jsxs(se.div,{className:M.subModal,style:{maxWidth:"420px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsx("h3",{children:"Create Group"}),r.jsx("button",{onClick:()=>{Ze||(ct(!1),Sa())},type:"button",disabled:Ze,children:r.jsx(kn,{size:18})})]}),r.jsxs("div",{className:M.subModalContent,style:{padding:"20px",position:"relative"},children:[Ze&&r.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.4)",borderRadius:"0 0 12px 12px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(2px)"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",color:"var(--dash-text)"},children:[r.jsx(sn,{size:32,className:M.spinner,style:{color:"var(--dash-primary)"}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"Creating group..."})]})}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px",opacity:Ze?.5:1},children:[r.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"var(--dash-surface-elevated)",border:"2px solid var(--dash-border-light)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:Ze?"not-allowed":"pointer",position:"relative"},onClick:()=>!Ze&&document.getElementById("createGroupAvatarInput")?.click(),children:[Hs?r.jsx("img",{src:Hs,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx(wn,{size:32,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",padding:"3px",textAlign:"center",fontSize:"10px",color:"var(--dash-text)"},children:"Add Photo"})]}),r.jsx("input",{type:"file",id:"createGroupAvatarInput",accept:"image/*",style:{display:"none"},onChange:lc})]}),r.jsxs("div",{style:{marginBottom:"14px",opacity:Ze?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Group Name *"}),r.jsx("input",{type:"text",value:Pn,onChange:_=>Ls(_.target.value),placeholder:"Enter group name",disabled:Ze,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none"}})]}),r.jsxs("div",{style:{marginBottom:"14px",opacity:Ze?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Description"}),r.jsx("textarea",{value:fo,onChange:_=>Hn(_.target.value),placeholder:"Add a description (optional)",rows:2,disabled:Ze,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",resize:"none"}})]}),r.jsxs("div",{style:{marginBottom:"20px",opacity:Ze?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"8px"},children:"Privacy"}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{type:"button",onClick:()=>Ci("public"),disabled:Ze,style:{flex:1,padding:"10px",background:en==="public"?"var(--dash-primary)":"var(--dash-surface)",border:`1px solid ${en==="public"?"var(--dash-primary)":"var(--dash-border)"}`,borderRadius:"8px",color:en==="public"?"#fff":"var(--dash-text)",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Public"}),r.jsx("button",{type:"button",onClick:()=>Ci("private"),disabled:Ze,style:{flex:1,padding:"10px",background:en==="private"?"var(--dash-primary)":"var(--dash-surface)",border:`1px solid ${en==="private"?"var(--dash-primary)":"var(--dash-border)"}`,borderRadius:"8px",color:en==="private"?"#fff":"var(--dash-text)",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Private"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:()=>{ct(!1),Sa()},disabled:Ze,style:{flex:1,padding:"10px 16px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:Sd,disabled:Ze||!Pn.trim(),style:{flex:1,padding:"10px 16px",background:"var(--dash-primary)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"14px",fontWeight:500,cursor:Ze||!Pn.trim()?"not-allowed":"pointer",opacity:Ze||!Pn.trim()?.6:1},children:"Create Group"})]})]})]})})}),r.jsx(Yn,{children:Ut&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{Ze||(xn(!1),Sa())},children:r.jsxs(se.div,{className:M.subModal,style:{maxWidth:"420px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsx("h3",{children:"Create Channel"}),r.jsx("button",{onClick:()=>{Ze||(xn(!1),Sa())},type:"button",disabled:Ze,children:r.jsx(kn,{size:18})})]}),r.jsxs("div",{className:M.subModalContent,style:{padding:"20px",position:"relative"},children:[Ze&&r.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.4)",borderRadius:"0 0 12px 12px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(2px)"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",color:"var(--dash-text)"},children:[r.jsx(sn,{size:32,className:M.spinner,style:{color:"var(--dash-primary)"}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"Creating channel..."})]})}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px",opacity:Ze?.5:1},children:[r.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"var(--dash-surface-elevated)",border:"2px solid var(--dash-border-light)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:Ze?"not-allowed":"pointer",position:"relative"},onClick:()=>!Ze&&document.getElementById("createChannelAvatarInput")?.click(),children:[Hs?r.jsx("img",{src:Hs,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx(ts,{size:32,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",padding:"3px",textAlign:"center",fontSize:"10px",color:"var(--dash-text)"},children:"Add Photo"})]}),r.jsx("input",{type:"file",id:"createChannelAvatarInput",accept:"image/*",style:{display:"none"},onChange:lc})]}),r.jsxs("div",{style:{marginBottom:"14px",opacity:Ze?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Channel Name *"}),r.jsx("input",{type:"text",value:Pn,onChange:_=>Ls(_.target.value),placeholder:"Enter channel name",disabled:Ze,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none"}})]}),r.jsxs("div",{style:{marginBottom:"14px",opacity:Ze?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Description"}),r.jsx("textarea",{value:fo,onChange:_=>Hn(_.target.value),placeholder:"Add a description (optional)",rows:2,disabled:Ze,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",resize:"none"}})]}),r.jsxs("div",{style:{marginBottom:"20px",opacity:Ze?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"8px"},children:"Privacy"}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{type:"button",onClick:()=>Ci("public"),disabled:Ze,style:{flex:1,padding:"10px",background:en==="public"?"var(--dash-primary)":"var(--dash-surface)",border:`1px solid ${en==="public"?"var(--dash-primary)":"var(--dash-border)"}`,borderRadius:"8px",color:en==="public"?"#fff":"var(--dash-text)",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Public"}),r.jsx("button",{type:"button",onClick:()=>Ci("private"),disabled:Ze,style:{flex:1,padding:"10px",background:en==="private"?"var(--dash-primary)":"var(--dash-surface)",border:`1px solid ${en==="private"?"var(--dash-primary)":"var(--dash-border)"}`,borderRadius:"8px",color:en==="private"?"#fff":"var(--dash-text)",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Private"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:()=>{xn(!1),Sa()},disabled:Ze,style:{flex:1,padding:"10px 16px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:wd,disabled:Ze||!Pn.trim(),style:{flex:1,padding:"10px 16px",background:"var(--dash-primary)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"14px",fontWeight:500,cursor:Ze||!Pn.trim()?"not-allowed":"pointer",opacity:Ze||!Pn.trim()?.6:1},children:"Create Channel"})]})]})]})})}),r.jsx(Yn,{children:$&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{vn||Y(!1)},children:r.jsxs(se.div,{className:M.subModal,style:{maxWidth:"420px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsx("h3",{children:"Edit Profile"}),r.jsx("button",{onClick:()=>{vn||Y(!1)},type:"button",disabled:vn,children:r.jsx(kn,{size:18})})]}),r.jsxs("div",{className:M.subModalContent,style:{padding:"20px",position:"relative"},children:[vn&&r.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.4)",borderRadius:"0 0 12px 12px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(2px)"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",color:"var(--dash-text)"},children:[r.jsx(sn,{size:32,className:M.spinner,style:{color:"var(--dash-primary)"}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"Saving profile..."})]})}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px",opacity:vn?.5:1},children:[r.jsxs("div",{style:{width:"90px",height:"90px",borderRadius:"50%",background:"var(--dash-surface-elevated)",border:"2px solid var(--dash-border-light)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:vn?"not-allowed":"pointer",position:"relative"},onClick:()=>!vn&&document.getElementById("editProfileAvatarInput")?.click(),children:[xa?r.jsx("img",{src:xa,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx(Du,{size:36,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",padding:"3px",textAlign:"center",fontSize:"10px",color:"var(--dash-text)"},children:"Change Photo"})]}),r.jsx("input",{type:"file",id:"editProfileAvatarInput",accept:"image/*",style:{display:"none"},onChange:Ei})]}),r.jsxs("div",{style:{marginBottom:"14px",opacity:vn?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Username *"}),r.jsx("input",{type:"text",value:ds,onChange:_=>Cr(_.target.value),placeholder:"Enter username",disabled:vn,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none"}})]}),r.jsxs("div",{style:{marginBottom:"20px",opacity:vn?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Bio"}),r.jsx("textarea",{value:ho,onChange:_=>Zl(_.target.value),placeholder:"Tell us about yourself (optional)",rows:3,disabled:vn,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",resize:"none"}})]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:()=>Y(!1),disabled:vn,style:{flex:1,padding:"10px 16px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:_d,disabled:vn||!ds.trim(),style:{flex:1,padding:"10px 16px",background:"var(--dash-primary)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"14px",fontWeight:500,cursor:vn||!ds.trim()?"not-allowed":"pointer",opacity:vn||!ds.trim()?.6:1},children:"Save Changes"})]})]})]})})}),r.jsx(Yn,{children:I&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>pe(!1),children:r.jsxs(se.div,{className:M.subModal,style:{maxWidth:"400px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsx("h3",{children:"Notifications"}),r.jsx("button",{onClick:()=>pe(!1),type:"button",children:r.jsx(kn,{size:18})})]}),r.jsxs("div",{className:M.subModalContent,style:{padding:"24px",textAlign:"center"},children:[r.jsx($h,{size:48,style:{color:"var(--dash-primary)",marginBottom:"16px"}}),r.jsx("p",{style:{color:"var(--dash-text-secondary)",fontSize:"14px"},children:"No new notifications"})]})]})})}),r.jsx(DS,{isOpen:ye,onClose:()=>Oe(!1),isDarkMode:p}),r.jsx(XS,{isOpen:ut,onClose:()=>On(!1),isDarkMode:p})]})},nU=Pl(t=>({notifications:[],isLoading:!1,error:null,loadNotifications:async()=>{t({isLoading:!0,error:null});try{const n=await ar.getNotifications();t({notifications:n,isLoading:!1})}catch(n){const s=n.response?.data?.message||"Failed to load notifications";t({error:s,isLoading:!1})}},markAsSeen:async n=>{t({error:null});try{await ar.markAsSeen(n),t(s=>({notifications:s.notifications.map(o=>o.id===n?{...o,seen:!0}:o)}))}catch(s){const o=s.response?.data?.message||"Failed to mark notification as seen";t({error:o})}},markMultipleAsSeen:async n=>{t({error:null});try{await ar.markMultipleAsSeen(n),t(s=>({notifications:s.notifications.map(o=>n.includes(o.id)?{...o,seen:!0}:o)}))}catch(s){const o=s.response?.data?.message||"Failed to mark notifications as seen";t({error:o})}},markAllAsSeen:async()=>{t({error:null});try{await ar.markAllAsSeen(),t(n=>({notifications:n.notifications.map(s=>({...s,seen:!0}))}))}catch(n){const s=n.response?.data?.message||"Failed to mark all notifications as seen";t({error:s})}},clearError:()=>t({error:null}),handleNewNotification:n=>{console.log("[NotificationStore] New notification:",n),t(s=>{const o={id:n.messageId,messageId:n.messageId,chatId:n.chatId,chatName:n.chatName,chatAvatar:n.chatAvatar,senderName:n.senderName,content:n.content,sentTime:n.sentTime,seen:!1,fileUrl:n.fileUrl};return s.notifications.some(u=>u.chatId===o.chatId&&u.sentTime===o.sentTime)?s:{notifications:[o,...s.notifications]}})}})),aU="_container_nzeaj_52",sU="_toast_nzeaj_64",iU="_slideIn_nzeaj_1",oU="_glowPulse_nzeaj_1",rU="_exit_nzeaj_84",lU="_slideOut_nzeaj_1",cU="_success_nzeaj_89",uU="_error_nzeaj_97",dU="_warning_nzeaj_105",pU="_info_nzeaj_113",fU="_iconWrapper_nzeaj_120",hU="_iconBounce_nzeaj_1",mU="_message_nzeaj_134",gU="_closeBtn_nzeaj_143",yU="_progressBar_nzeaj_168",xU="_progressShrink_nzeaj_1",Ki={container:aU,toast:sU,slideIn:iU,glowPulse:oU,exit:rU,slideOut:lU,success:cU,error:uU,warning:dU,info:pU,iconWrapper:fU,iconBounce:hU,message:mU,closeBtn:gU,progressBar:yU,progressShrink:xU},vU=({toast:t,onClose:n})=>{const[s,o]=b.useState(!1);b.useEffect(()=>{const p=t.duration||4e3,h=setTimeout(()=>{o(!0)},p-300),m=setTimeout(()=>{n(t.id)},p);return()=>{clearTimeout(h),clearTimeout(m)}},[t.id,t.duration,n]);const c=()=>{o(!0),setTimeout(()=>n(t.id),300)},u=()=>{switch(t.type){case"success":return r.jsx(bb,{size:22});case"error":return r.jsx(q_,{size:22});case"warning":return r.jsx(Rs,{size:22});case"info":return r.jsx(Vh,{size:22})}};return r.jsxs("div",{className:`${Ki.toast} ${Ki[t.type]} ${s?Ki.exit:""}`,children:[r.jsx("div",{className:Ki.iconWrapper,children:u()}),r.jsx("span",{className:Ki.message,children:t.message}),r.jsx("button",{onClick:c,"aria-label":"Close",style:{background:"rgba(255, 255, 255, 0.15)",border:"none",borderRadius:"6px",color:"#ffffff",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"8px",fontSize:"16px",fontWeight:"bold",lineHeight:1},children:""}),r.jsx("div",{className:Ki.progressBar,style:{animationDuration:`${t.duration||4e3}ms`}})]})},bU=({toasts:t,onClose:n})=>r.jsx("div",{className:Ki.container,children:t.map(s=>r.jsx(vU,{toast:s,onClose:n},s.id))});class SU{toasts=[];listeners=[];subscribe(n){return this.listeners.push(n),()=>{this.listeners=this.listeners.filter(s=>s!==n)}}notify(){this.listeners.forEach(n=>n([...this.toasts]))}show(n,s,o){const c=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,u={id:c,type:n,message:s,duration:o};return this.toasts.push(u),this.notify(),c}success(n,s){return this.show("success",n,s)}error(n,s){return this.show("error",n,s||5e3)}warning(n,s){return this.show("warning",n,s)}info(n,s){return this.show("info",n,s)}remove(n){this.toasts=this.toasts.filter(s=>s.id!==n),this.notify()}getToasts(){return[...this.toasts]}}const yb=new SU;function wU(){const{isAuthenticated:t}=ql();return console.log("[AppRoutes] Rendering with isAuthenticated:",t),r.jsxs(M_,{children:[r.jsx(qi,{path:"/",element:t?r.jsx(Qo,{to:"/dashboard-new",replace:!0}):r.jsx(wE,{})}),r.jsx(qi,{path:"/login",element:t?r.jsx(Qo,{to:"/dashboard-new",replace:!0}):r.jsx(tA,{})}),r.jsx(qi,{path:"/register",element:t?r.jsx(Qo,{to:"/dashboard-new",replace:!0}):r.jsx(rA,{})}),r.jsx(qi,{path:"/forgot-password",element:t?r.jsx(Qo,{to:"/dashboard-new",replace:!0}):r.jsx(pA,{})}),r.jsx(qi,{path:"/dashboard",element:r.jsx(Tv,{children:r.jsx(n6,{})})}),r.jsx(qi,{path:"/dashboard-new",element:r.jsx(Tv,{children:r.jsx(tU,{})})}),r.jsx(qi,{path:"*",element:r.jsx(Qo,{to:"/",replace:!0})})]})}function _U(){const{isAuthenticated:t}=ql(),[n,s]=b.useState([]);b.useEffect(()=>yb.subscribe(s),[]);const o=c=>{yb.remove(c)};b.useEffect(()=>{(async()=>{console.log("[App] Initializing auth from localStorage..."),await wt.getState().initializeAuth(),console.log("[App] Auth initialization complete")})()},[]),b.useEffect(()=>{if(!t){console.log("[App] Not authenticated, skipping SignalR initialization");return}console.log("[App] Setting up SignalR event handlers...");const c=Le.getState(),u=nU.getState();return tt.setEventHandlers({onUserOnline:h=>{c.handleUserOnline(h)},onUserOffline:h=>{c.handleUserOffline({...h,lastSeen:h.lastSeen||new Date().toISOString()})},onReceiveMessage:h=>{c.handleReceiveMessage(h)},onMessageEdited:h=>{c.handleMessageEdited(h)},onMessageDeleted:h=>{c.handleMessageDeleted(h)},onReactionAdded:h=>{c.handleReactionAdded(h)},onReactionRemoved:h=>{c.handleReactionRemoved(h)},onUserTyping:h=>{c.handleUserTyping(h)},onUserStoppedTyping:h=>{c.handleUserStoppedTyping(h)},onNewNotification:h=>{u.handleNewNotification(h)},onMessagePinned:h=>{c.handleMessagePinned(h)},onMessageUnpinned:h=>{c.handleMessageUnpinned(h)},onAddedToChat:h=>{c.handleAddedToChat(h)},onNewConversation:h=>{c.handleNewConversation(h)},onConversationCreated:h=>{c.handleConversationCreated(h)},onPermissionGranted:h=>{c.handlePermissionGranted(h)},onPermissionRevoked:h=>{c.handlePermissionRevoked(h)},onAllPermissionsRevoked:h=>{c.handleAllPermissionsRevoked(h)},onUserBlockedYou:h=>{c.handleUserBlockedYou(h)},onYouBlockedUser:h=>{c.handleYouBlockedUser(h)},onUserUnblockedYou:h=>{c.handleUserUnblockedYou(h)},onYouUnblockedUser:h=>{c.handleYouUnblockedUser(h)},onChatDeleted:h=>{c.handleChatDeleted(h)},onRemovedFromChat:h=>{c.handleRemovedFromChat(h)},onMessagesMarkedSeen:h=>{c.handleMessagesMarkedSeen(h)},onError:h=>{console.error("[App] SignalR Error:",h)}}),(async()=>{try{console.log("[App] Starting SignalR connection..."),await tt.start(),console.log("[App] SignalR connected successfully");const h=Le.getState();h.chats.length===0&&(console.log("[App] Loading chats before fetching presence states..."),await h.loadChats());const m=new Set;h.chats.forEach(y=>{y.members&&y.members.forEach(v=>{const S=v.userId||v.id||v.user?.id;S&&m.add(S)})});const g=Array.from(m);if(g.length>0){console.log("[App] Fetching presence states for",g.length,"users:",g);try{const y=await tt.getPresenceStates(g);console.log("[App] Received presence states:",y),console.log("[App] Presence states type check:",typeof y,Object.keys(y).length,"keys"),h.setInitialPresenceStates(y),console.log("[App] Presence states initialized successfully"),console.log("[App] OnlineUsers map after init:",h.onlineUsers)}catch(y){console.error("[App] Failed to fetch initial presence states:",y)}}else console.log("[App] No user IDs available from chat list - presence will be fetched when chats are opened")}catch(h){console.error("[App] Failed to start SignalR:",h)}})(),()=>{console.log("[App] Stopping SignalR connection..."),tt.stop()}},[t]);try{return r.jsxs(r.Fragment,{children:[r.jsx(k_,{children:r.jsx(wU,{})}),r.jsx(bU,{toasts:n,onClose:o}),r.jsx(iR,{})]})}catch(c){return console.error("App Error:",c),r.jsxs("div",{style:{padding:"20px",color:"red"},children:[r.jsx("h1",{children:"Error Loading Application"}),r.jsx("p",{children:"Check browser console for details"}),r.jsx("pre",{children:String(c)})]})}}const QS=document.getElementById("root");if(!QS)throw new Error("Root element not found");console.log("React app starting...");Z_.createRoot(QS).render(r.jsx(b.StrictMode,{children:r.jsx(_U,{})}));console.log("React app rendered");export{De as a};
