const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/permission.service-k-pqJdLT.js","assets/vendor-DW-3xwEg.js","assets/ui-CTXuJ5QJ.js","assets/reaction.service-Cz3kUL1F.js"])))=>i.map(i=>d[i]);
import{a as sw,b as iw,R as Oa,N as mo,r as b,L as Ia,u as $p,g as Ab,B as ow,c as rw,d as gi}from"./vendor-DW-3xwEg.js";import{M as Vr,S as lw,A as Ys,L as cw,B as Mb,Z as uw,a as ls,U as Hn,C as Ws,E as Fr,b as $r,c as Eb,d as rp,K as dw,I as Rb,e as fw,f as pw,T as hw,g as mw,h as gw,i as ta,j as Xc,k as qp,l as La,P as qr,m as Nb,n as yw,o as Ci,p as Gp,q as vw,r as Db,s as Dr,t as Yp,u as Co,X as da,v as xw,w as Bb,x as bw,y as lp,z as Sw,R as Br,D as _w,F as ww,G as Cw,H as jw,J as Mc,N as Tf,O as hv,Q as mv,V as Tw,W as kw}from"./ui-CTXuJ5QJ.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();var kf={exports:{}},Mr={};var gv;function Aw(){if(gv)return Mr;gv=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(o,c,u){var f=null;if(u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),"key"in c){u={};for(var h in c)h!=="key"&&(u[h]=c[h])}else u=c;return c=u.ref,{$$typeof:t,type:o,key:f,ref:c!==void 0?c:null,props:u}}return Mr.Fragment=n,Mr.jsx=s,Mr.jsxs=s,Mr}var yv;function Mw(){return yv||(yv=1,kf.exports=Aw()),kf.exports}var l=Mw(),Af={exports:{}},Er={},Mf={exports:{}},Ef={};var vv;function Ew(){return vv||(vv=1,(function(t){function n(z,ae){var le=z.length;z.push(ae);e:for(;0<le;){var Se=le-1>>>1,ze=z[Se];if(0<c(ze,ae))z[Se]=ae,z[le]=ze,le=Se;else break e}}function s(z){return z.length===0?null:z[0]}function o(z){if(z.length===0)return null;var ae=z[0],le=z.pop();if(le!==ae){z[0]=le;e:for(var Se=0,ze=z.length,ve=ze>>>1;Se<ve;){var Ne=2*(Se+1)-1,Ce=z[Ne],te=Ne+1,he=z[te];if(0>c(Ce,le))te<ze&&0>c(he,Ce)?(z[Se]=he,z[te]=le,Se=te):(z[Se]=Ce,z[Ne]=le,Se=Ne);else if(te<ze&&0>c(he,le))z[Se]=he,z[te]=le,Se=te;else break e}}return ae}function c(z,ae){var le=z.sortIndex-ae.sortIndex;return le!==0?le:z.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var f=Date,h=f.now();t.unstable_now=function(){return f.now()-h}}var m=[],g=[],y=1,v=null,_=3,C=!1,w=!1,A=!1,M=!1,B=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function U(z){for(var ae=s(g);ae!==null;){if(ae.callback===null)o(g);else if(ae.startTime<=z)o(g),ae.sortIndex=ae.expirationTime,n(m,ae);else break;ae=s(g)}}function H(z){if(A=!1,U(z),!w)if(s(m)!==null)w=!0,ee||(ee=!0,Ze());else{var ae=s(g);ae!==null&&He(H,ae.startTime-z)}}var ee=!1,re=-1,Z=5,pe=-1;function ue(){return M?!0:!(t.unstable_now()-pe<Z)}function Be(){if(M=!1,ee){var z=t.unstable_now();pe=z;var ae=!0;try{e:{w=!1,A&&(A=!1,P(re),re=-1),C=!0;var le=_;try{t:{for(U(z),v=s(m);v!==null&&!(v.expirationTime>z&&ue());){var Se=v.callback;if(typeof Se=="function"){v.callback=null,_=v.priorityLevel;var ze=Se(v.expirationTime<=z);if(z=t.unstable_now(),typeof ze=="function"){v.callback=ze,U(z),ae=!0;break t}v===s(m)&&o(m),U(z)}else o(m);v=s(m)}if(v!==null)ae=!0;else{var ve=s(g);ve!==null&&He(H,ve.startTime-z),ae=!1}}break e}finally{v=null,_=le,C=!1}ae=void 0}}finally{ae?Ze():ee=!1}}}var Ze;if(typeof E=="function")Ze=function(){E(Be)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Re=me.port2;me.port1.onmessage=Be,Ze=function(){Re.postMessage(null)}}else Ze=function(){B(Be,0)};function He(z,ae){re=B(function(){z(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(z){switch(_){case 1:case 2:case 3:var ae=3;break;default:ae=_}var le=_;_=ae;try{return z()}finally{_=le}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(z,ae){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var le=_;_=z;try{return ae()}finally{_=le}},t.unstable_scheduleCallback=function(z,ae,le){var Se=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Se+le:Se):le=Se,z){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=le+ze,z={id:y++,callback:ae,priorityLevel:z,startTime:le,expirationTime:ze,sortIndex:-1},le>Se?(z.sortIndex=le,n(g,z),s(m)===null&&z===s(g)&&(A?(P(re),re=-1):A=!0,He(H,le-Se))):(z.sortIndex=ze,n(m,z),w||C||(w=!0,ee||(ee=!0,Ze()))),z},t.unstable_shouldYield=ue,t.unstable_wrapCallback=function(z){var ae=_;return function(){var le=_;_=ae;try{return z.apply(this,arguments)}finally{_=le}}}})(Ef)),Ef}var xv;function Rw(){return xv||(xv=1,Mf.exports=Ew()),Mf.exports}var bv;function Nw(){if(bv)return Er;bv=1;var t=Rw(),n=sw(),s=iw();function o(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var a=e,i=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(i=a.return),e=a.return;while(e)}return a.tag===3?i:null}function f(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function h(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(o(188))}function g(e){var a=e.alternate;if(!a){if(a=u(e),a===null)throw Error(o(188));return a!==e?null:e}for(var i=e,r=a;;){var d=i.return;if(d===null)break;var p=d.alternate;if(p===null){if(r=d.return,r!==null){i=r;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===i)return m(d),e;if(p===r)return m(d),a;p=p.sibling}throw Error(o(188))}if(i.return!==r.return)i=d,r=p;else{for(var x=!1,S=d.child;S;){if(S===i){x=!0,i=d,r=p;break}if(S===r){x=!0,r=d,i=p;break}S=S.sibling}if(!x){for(S=p.child;S;){if(S===i){x=!0,i=p,r=d;break}if(S===r){x=!0,r=p,i=d;break}S=S.sibling}if(!x)throw Error(o(189))}}if(i.alternate!==r)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:a}function y(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=y(e),a!==null)return a;e=e.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),E=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),pe=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),Be=Symbol.iterator;function Ze(e){return e===null||typeof e!="object"?null:(e=Be&&e[Be]||e["@@iterator"],typeof e=="function"?e:null)}var me=Symbol.for("react.client.reference");function Re(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===me?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case B:return"Profiler";case M:return"StrictMode";case H:return"Suspense";case ee:return"SuspenseList";case pe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case E:return e.displayName||"Context";case P:return(e._context.displayName||"Context")+".Consumer";case U:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return a=e.displayName||null,a!==null?a:Re(e.type)||"Memo";case Z:a=e._payload,e=e._init;try{return Re(e(a))}catch{}}return null}var He=Array.isArray,z=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Se=[],ze=-1;function ve(e){return{current:e}}function Ne(e){0>ze||(e.current=Se[ze],Se[ze]=null,ze--)}function Ce(e,a){ze++,Se[ze]=e.current,e.current=a}var te=ve(null),he=ve(null),de=ve(null),$t=ve(null);function jt(e,a){switch(Ce(de,a),Ce(he,e),Ce(te,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?Iy(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=Iy(a),e=Oy(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ne(te),Ce(te,e)}function Ot(){Ne(te),Ne(he),Ne(de)}function Xe(e){e.memoizedState!==null&&Ce($t,e);var a=te.current,i=Oy(a,e.type);a!==i&&(Ce(he,e),Ce(te,i))}function qt(e){he.current===e&&(Ne(te),Ne(he)),$t.current===e&&(Ne($t),jr._currentValue=le)}var Mt,Dt;function Bt(e){if(Mt===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);Mt=a&&a[1]||"",Dt=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mt+e+Dt}var Gt=!1;function Et(e,a){if(!e||Gt)return"";Gt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(a){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch($){var V=$}Reflect.construct(e,[],J)}else{try{J.call()}catch($){V=$}e.call(J.prototype)}}else{try{throw Error()}catch($){V=$}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch($){if($&&V&&typeof $.stack=="string")return[$.stack,V.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=r.DetermineComponentFrameRoot(),x=p[0],S=p[1];if(x&&S){var k=x.split(`
`),L=S.split(`
`);for(d=r=0;r<k.length&&!k[r].includes("DetermineComponentFrameRoot");)r++;for(;d<L.length&&!L[d].includes("DetermineComponentFrameRoot");)d++;if(r===k.length||d===L.length)for(r=k.length-1,d=L.length-1;1<=r&&0<=d&&k[r]!==L[d];)d--;for(;1<=r&&0<=d;r--,d--)if(k[r]!==L[d]){if(r!==1||d!==1)do if(r--,d--,0>d||k[r]!==L[d]){var W=`
`+k[r].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=r&&0<=d);break}}}finally{Gt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Bt(i):""}function Qt(e,a){switch(e.tag){case 26:case 27:case 5:return Bt(e.type);case 16:return Bt("Lazy");case 13:return e.child!==a&&a!==null?Bt("Suspense Fallback"):Bt("Suspense");case 19:return Bt("SuspenseList");case 0:case 15:return Et(e.type,!1);case 11:return Et(e.type.render,!1);case 1:return Et(e.type,!0);case 31:return Bt("Activity");default:return""}}function Zt(e){try{var a="",i=null;do a+=Qt(e,i),i=e,e=e.return;while(e);return a}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Lt=Object.prototype.hasOwnProperty,ft=t.unstable_scheduleCallback,mn=t.unstable_cancelCallback,an=t.unstable_shouldYield,rt=t.unstable_requestPaint,ie=t.unstable_now,xe=t.unstable_getCurrentPriorityLevel,Qe=t.unstable_ImmediatePriority,$e=t.unstable_UserBlockingPriority,X=t.unstable_NormalPriority,lt=t.unstable_LowPriority,O=t.unstable_IdlePriority,G=t.log,ge=t.unstable_setDisableYieldValue,Te=null,Ue=null;function ot(e){if(typeof G=="function"&&ge(e),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(Te,e)}catch{}}var gt=Math.clz32?Math.clz32:ds,mt=Math.log,ma=Math.LN2;function ds(e){return e>>>=0,e===0?32:31-(mt(e)/ma|0)|0}var Va=256,ga=262144,Ma=4194304;function ne(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function oe(e,a,i){var r=e.pendingLanes;if(r===0)return 0;var d=0,p=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var S=r&134217727;return S!==0?(r=S&~p,r!==0?d=ne(r):(x&=S,x!==0?d=ne(x):i||(i=S&~e,i!==0&&(d=ne(i))))):(S=r&~p,S!==0?d=ne(S):x!==0?d=ne(x):i||(i=r&~e,i!==0&&(d=ne(i)))),d===0?0:a!==0&&a!==d&&(a&p)===0&&(p=d&-d,i=a&-a,p>=i||p===32&&(i&4194048)!==0)?a:d}function ye(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function ke(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _e(){var e=Ma;return Ma<<=1,(Ma&62914560)===0&&(Ma=4194304),e}function je(e){for(var a=[],i=0;31>i;i++)a.push(e);return a}function Ve(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function fe(e,a,i,r,d,p){var x=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var S=e.entanglements,k=e.expirationTimes,L=e.hiddenUpdates;for(i=x&~i;0<i;){var W=31-gt(i),J=1<<W;S[W]=0,k[W]=-1;var V=L[W];if(V!==null)for(L[W]=null,W=0;W<V.length;W++){var $=V[W];$!==null&&($.lane&=-536870913)}i&=~J}r!==0&&it(e,r,0),p!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=p&~(x&~a))}function it(e,a,i){e.pendingLanes|=a,e.suspendedLanes&=~a;var r=31-gt(a);e.entangledLanes|=a,e.entanglements[r]=e.entanglements[r]|1073741824|i&261930}function qe(e,a){var i=e.entangledLanes|=a;for(e=e.entanglements;i;){var r=31-gt(i),d=1<<r;d&a|e[r]&a&&(e[r]|=a),i&=~d}}function ct(e,a){var i=a&-a;return i=(i&42)!==0?1:En(i),(i&(e.suspendedLanes|a))!==0?0:i}function En(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function fn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Pt(){var e=ae.p;return e!==0?e:(e=window.event,e===void 0?32:rv(e.type))}function Gn(e,a){var i=ae.p;try{return ae.p=e,a()}finally{ae.p=i}}var ya=Math.random().toString(36).slice(2),Jt="__reactFiber$"+ya,xn="__reactProps$"+ya,va="__reactContainer$"+ya,Di="__reactEvents$"+ya,fs="__reactListeners$"+ya,ul="__reactHandles$"+ya,Bi="__reactResources$"+ya,ps="__reactMarker$"+ya;function Zs(e){delete e[Jt],delete e[xn],delete e[Di],delete e[fs],delete e[ul]}function hs(e){var a=e[Jt];if(a)return a;for(var i=e.parentNode;i;){if(a=i[va]||i[Jt]){if(i=a.alternate,a.child!==null||i!==null&&i.child!==null)for(e=qy(e);e!==null;){if(i=e[Jt])return i;e=qy(e)}return a}e=i,i=e.parentNode}return null}function Fa(e){if(e=e[Jt]||e[va]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function Js(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(o(33))}function ms(e){var a=e[Bi];return a||(a=e[Bi]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function sn(e){e[ps]=!0}var dl=new Set,fl={};function Ea(e,a){gs(e,a),gs(e+"Capture",a)}function gs(e,a){for(fl[e]=a,e=0;e<a.length;e++)dl.add(a[e])}var pl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hl={},zo={};function Su(e){return Lt.call(zo,e)?!0:Lt.call(hl,e)?!1:pl.test(e)?zo[e]=!0:(hl[e]=!0,!1)}function zi(e,a,i){if(Su(a))if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var r=a.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+i)}}function Ui(e,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+i)}}function xa(e,a,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(a,i,""+r)}}function Rn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ml(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function gl(e,a,i){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,p=r.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return d.call(this)},set:function(x){i=""+x,p.call(this,x)}}),Object.defineProperty(e,a,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(x){i=""+x},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Uo(e){if(!e._valueTracker){var a=ml(e)?"checked":"value";e._valueTracker=gl(e,a,""+e[a])}}function yl(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var i=a.getValue(),r="";return e&&(r=ml(e)?e.checked?"true":"false":e.value),e=r,e!==i?(a.setValue(e),!0):!1}function $a(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var _u=/[\n"\\]/g;function Bn(e){return e.replace(_u,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Io(e,a,i,r,d,p,x,S){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),a!=null?x==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+Rn(a)):e.value!==""+Rn(a)&&(e.value=""+Rn(a)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),a!=null?Oo(e,x,Rn(a)):i!=null?Oo(e,x,Rn(i)):r!=null&&e.removeAttribute("value"),d==null&&p!=null&&(e.defaultChecked=!!p),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+Rn(S):e.removeAttribute("name")}function ys(e,a,i,r,d,p,x,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),a!=null||i!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){Uo(e);return}i=i!=null?""+Rn(i):"",a=a!=null?""+Rn(a):i,S||a===e.value||(e.value=a),e.defaultValue=a}r=r??d,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=S?e.checked:!!r,e.defaultChecked=!!r,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x),Uo(e)}function Oo(e,a,i){a==="number"&&$a(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function vs(e,a,i,r){if(e=e.options,a){a={};for(var d=0;d<i.length;d++)a["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=a.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&r&&(e[i].defaultSelected=!0)}else{for(i=""+Rn(i),a=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,r&&(e[d].defaultSelected=!0);return}a!==null||e[d].disabled||(a=e[d])}a!==null&&(a.selected=!0)}}function Lo(e,a,i){if(a!=null&&(a=""+Rn(a),a!==e.value&&(e.value=a),i==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=i!=null?""+Rn(i):""}function Po(e,a,i,r){if(a==null){if(r!=null){if(i!=null)throw Error(o(92));if(He(r)){if(1<r.length)throw Error(o(93));r=r[0]}i=r}i==null&&(i=""),a=i}i=Rn(a),e.defaultValue=i,r=e.textContent,r===i&&r!==""&&r!==null&&(e.value=r),Uo(e)}function xs(e,a){if(a){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=a;return}}e.textContent=a}var vl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xl(e,a,i){var r=a.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?r?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":r?e.setProperty(a,i):typeof i!="number"||i===0||vl.has(a)?a==="float"?e.cssFloat=i:e[a]=(""+i).trim():e[a]=i+"px"}function bl(e,a,i){if(a!=null&&typeof a!="object")throw Error(o(62));if(e=e.style,i!=null){for(var r in i)!i.hasOwnProperty(r)||a!=null&&a.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var d in a)r=a[d],a.hasOwnProperty(d)&&i[d]!==r&&xl(e,d,r)}else for(var p in a)a.hasOwnProperty(p)&&xl(e,p,a[p])}function Ho(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function T(e){return bs.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Y(){}var ce=null;function pt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bn=null,Ss=null;function Uh(e){var a=Fa(e);if(a&&(e=a.stateNode)){var i=e[xn]||null;e:switch(e=a.stateNode,a.type){case"input":if(Io(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),a=i.name,i.type==="radio"&&a!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Bn(""+a)+'"][type="radio"]'),a=0;a<i.length;a++){var r=i[a];if(r!==e&&r.form===e.form){var d=r[xn]||null;if(!d)throw Error(o(90));Io(r,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(a=0;a<i.length;a++)r=i[a],r.form===e.form&&yl(r)}break e;case"textarea":Lo(e,i.value,i.defaultValue);break e;case"select":a=i.value,a!=null&&vs(e,!!i.multiple,a,!1)}}}var Cu=!1;function Ih(e,a,i){if(Cu)return e(a,i);Cu=!0;try{var r=e(a);return r}finally{if(Cu=!1,(bn!==null||Ss!==null)&&(rc(),bn&&(a=bn,e=Ss,Ss=bn=null,Uh(a),e)))for(a=0;a<e.length;a++)Uh(e[a])}}function Vo(e,a){var i=e.stateNode;if(i===null)return null;var r=i[xn]||null;if(r===null)return null;i=r[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,a,typeof i));return i}var qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ju=!1;if(qa)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){ju=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{ju=!1}var _s=null,Tu=null,Sl=null;function Oh(){if(Sl)return Sl;var e,a=Tu,i=a.length,r,d="value"in _s?_s.value:_s.textContent,p=d.length;for(e=0;e<i&&a[e]===d[e];e++);var x=i-e;for(r=1;r<=x&&a[i-r]===d[p-r];r++);return Sl=d.slice(e,1<r?1-r:void 0)}function _l(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function wl(){return!0}function Lh(){return!1}function zn(e){function a(i,r,d,p,x){this._reactName=i,this._targetInst=d,this.type=r,this.nativeEvent=p,this.target=x,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(i=e[S],this[S]=i?i(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?wl:Lh,this.isPropagationStopped=Lh,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),a}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cl=zn(ei),$o=v({},ei,{view:0,detail:0}),nS=zn($o),ku,Au,qo,jl=v({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qo&&(qo&&e.type==="mousemove"?(ku=e.screenX-qo.screenX,Au=e.screenY-qo.screenY):Au=ku=0,qo=e),ku)},movementY:function(e){return"movementY"in e?e.movementY:Au}}),Ph=zn(jl),aS=v({},jl,{dataTransfer:0}),sS=zn(aS),iS=v({},$o,{relatedTarget:0}),Mu=zn(iS),oS=v({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),rS=zn(oS),lS=v({},ei,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cS=zn(lS),uS=v({},ei,{data:0}),Hh=zn(uS),dS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hS(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=pS[e])?!!a[e]:!1}function Eu(){return hS}var mS=v({},$o,{key:function(e){if(e.key){var a=dS[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=_l(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eu,charCode:function(e){return e.type==="keypress"?_l(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_l(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gS=zn(mS),yS=v({},jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vh=zn(yS),vS=v({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eu}),xS=zn(vS),bS=v({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),SS=zn(bS),_S=v({},jl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wS=zn(_S),CS=v({},ei,{newState:0,oldState:0}),jS=zn(CS),TS=[9,13,27,32],Ru=qa&&"CompositionEvent"in window,Go=null;qa&&"documentMode"in document&&(Go=document.documentMode);var kS=qa&&"TextEvent"in window&&!Go,Fh=qa&&(!Ru||Go&&8<Go&&11>=Go),$h=" ",qh=!1;function Gh(e,a){switch(e){case"keyup":return TS.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ii=!1;function AS(e,a){switch(e){case"compositionend":return Yh(a);case"keypress":return a.which!==32?null:(qh=!0,$h);case"textInput":return e=a.data,e===$h&&qh?null:e;default:return null}}function MS(e,a){if(Ii)return e==="compositionend"||!Ru&&Gh(e,a)?(e=Oh(),Sl=Tu=_s=null,Ii=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Fh&&a.locale!=="ko"?null:a.data;default:return null}}var ES={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wh(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!ES[e.type]:a==="textarea"}function Xh(e,a,i,r){bn?Ss?Ss.push(r):Ss=[r]:bn=r,a=hc(a,"onChange"),0<a.length&&(i=new Cl("onChange","change",null,i,r),e.push({event:i,listeners:a}))}var Yo=null,Wo=null;function RS(e){Ry(e,0)}function Tl(e){var a=Js(e);if(yl(a))return e}function Kh(e,a){if(e==="change")return a}var Qh=!1;if(qa){var Nu;if(qa){var Du="oninput"in document;if(!Du){var Zh=document.createElement("div");Zh.setAttribute("oninput","return;"),Du=typeof Zh.oninput=="function"}Nu=Du}else Nu=!1;Qh=Nu&&(!document.documentMode||9<document.documentMode)}function Jh(){Yo&&(Yo.detachEvent("onpropertychange",em),Wo=Yo=null)}function em(e){if(e.propertyName==="value"&&Tl(Wo)){var a=[];Xh(a,Wo,e,pt(e)),Ih(RS,a)}}function NS(e,a,i){e==="focusin"?(Jh(),Yo=a,Wo=i,Yo.attachEvent("onpropertychange",em)):e==="focusout"&&Jh()}function DS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tl(Wo)}function BS(e,a){if(e==="click")return Tl(a)}function zS(e,a){if(e==="input"||e==="change")return Tl(a)}function US(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var Yn=typeof Object.is=="function"?Object.is:US;function Xo(e,a){if(Yn(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var i=Object.keys(e),r=Object.keys(a);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var d=i[r];if(!Lt.call(a,d)||!Yn(e[d],a[d]))return!1}return!0}function tm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nm(e,a){var i=tm(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=a&&r>=a)return{node:i,offset:a-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=tm(i)}}function am(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?am(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function sm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=$a(e.document);a instanceof e.HTMLIFrameElement;){try{var i=typeof a.contentWindow.location.href=="string"}catch{i=!1}if(i)e=a.contentWindow;else break;a=$a(e.document)}return a}function Bu(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var IS=qa&&"documentMode"in document&&11>=document.documentMode,Oi=null,zu=null,Ko=null,Uu=!1;function im(e,a,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Uu||Oi==null||Oi!==$a(r)||(r=Oi,"selectionStart"in r&&Bu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ko&&Xo(Ko,r)||(Ko=r,r=hc(zu,"onSelect"),0<r.length&&(a=new Cl("onSelect","select",null,a,i),e.push({event:a,listeners:r}),a.target=Oi)))}function ti(e,a){var i={};return i[e.toLowerCase()]=a.toLowerCase(),i["Webkit"+e]="webkit"+a,i["Moz"+e]="moz"+a,i}var Li={animationend:ti("Animation","AnimationEnd"),animationiteration:ti("Animation","AnimationIteration"),animationstart:ti("Animation","AnimationStart"),transitionrun:ti("Transition","TransitionRun"),transitionstart:ti("Transition","TransitionStart"),transitioncancel:ti("Transition","TransitionCancel"),transitionend:ti("Transition","TransitionEnd")},Iu={},om={};qa&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function ni(e){if(Iu[e])return Iu[e];if(!Li[e])return e;var a=Li[e],i;for(i in a)if(a.hasOwnProperty(i)&&i in om)return Iu[e]=a[i];return e}var rm=ni("animationend"),lm=ni("animationiteration"),cm=ni("animationstart"),OS=ni("transitionrun"),LS=ni("transitionstart"),PS=ni("transitioncancel"),um=ni("transitionend"),dm=new Map,Ou="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ou.push("scrollEnd");function ba(e,a){dm.set(e,a),Ea(a,[e])}var kl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},aa=[],Pi=0,Lu=0;function Al(){for(var e=Pi,a=Lu=Pi=0;a<e;){var i=aa[a];aa[a++]=null;var r=aa[a];aa[a++]=null;var d=aa[a];aa[a++]=null;var p=aa[a];if(aa[a++]=null,r!==null&&d!==null){var x=r.pending;x===null?d.next=d:(d.next=x.next,x.next=d),r.pending=d}p!==0&&fm(i,d,p)}}function Ml(e,a,i,r){aa[Pi++]=e,aa[Pi++]=a,aa[Pi++]=i,aa[Pi++]=r,Lu|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Pu(e,a,i,r){return Ml(e,a,i,r),El(e)}function ai(e,a){return Ml(e,null,null,a),El(e)}function fm(e,a,i){e.lanes|=i;var r=e.alternate;r!==null&&(r.lanes|=i);for(var d=!1,p=e.return;p!==null;)p.childLanes|=i,r=p.alternate,r!==null&&(r.childLanes|=i),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(d=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,d&&a!==null&&(d=31-gt(i),e=p.hiddenUpdates,r=e[d],r===null?e[d]=[a]:r.push(a),a.lane=i|536870912),p):null}function El(e){if(50<vr)throw vr=0,Xd=null,Error(o(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var Hi={};function HS(e,a,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(e,a,i,r){return new HS(e,a,i,r)}function Hu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ga(e,a){var i=e.alternate;return i===null?(i=Wn(e.tag,a,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=a,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,a=e.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function pm(e,a){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,a=i.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function Rl(e,a,i,r,d,p){var x=0;if(r=e,typeof e=="function")Hu(e)&&(x=1);else if(typeof e=="string")x=G_(e,i,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case pe:return e=Wn(31,i,a,d),e.elementType=pe,e.lanes=p,e;case A:return si(i.children,d,p,a);case M:x=8,d|=24;break;case B:return e=Wn(12,i,a,d|2),e.elementType=B,e.lanes=p,e;case H:return e=Wn(13,i,a,d),e.elementType=H,e.lanes=p,e;case ee:return e=Wn(19,i,a,d),e.elementType=ee,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case E:x=10;break e;case P:x=9;break e;case U:x=11;break e;case re:x=14;break e;case Z:x=16,r=null;break e}x=29,i=Error(o(130,e===null?"null":typeof e,"")),r=null}return a=Wn(x,i,a,d),a.elementType=e,a.type=r,a.lanes=p,a}function si(e,a,i,r){return e=Wn(7,e,r,a),e.lanes=i,e}function Vu(e,a,i){return e=Wn(6,e,null,a),e.lanes=i,e}function hm(e){var a=Wn(18,null,null,0);return a.stateNode=e,a}function Fu(e,a,i){return a=Wn(4,e.children!==null?e.children:[],e.key,a),a.lanes=i,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var mm=new WeakMap;function sa(e,a){if(typeof e=="object"&&e!==null){var i=mm.get(e);return i!==void 0?i:(a={value:e,source:a,stack:Zt(a)},mm.set(e,a),a)}return{value:e,source:a,stack:Zt(a)}}var Vi=[],Fi=0,Nl=null,Qo=0,ia=[],oa=0,ws=null,Ra=1,Na="";function Ya(e,a){Vi[Fi++]=Qo,Vi[Fi++]=Nl,Nl=e,Qo=a}function gm(e,a,i){ia[oa++]=Ra,ia[oa++]=Na,ia[oa++]=ws,ws=e;var r=Ra;e=Na;var d=32-gt(r)-1;r&=~(1<<d),i+=1;var p=32-gt(a)+d;if(30<p){var x=d-d%5;p=(r&(1<<x)-1).toString(32),r>>=x,d-=x,Ra=1<<32-gt(a)+d|i<<d|r,Na=p+e}else Ra=1<<p|i<<d|r,Na=e}function $u(e){e.return!==null&&(Ya(e,1),gm(e,1,0))}function qu(e){for(;e===Nl;)Nl=Vi[--Fi],Vi[Fi]=null,Qo=Vi[--Fi],Vi[Fi]=null;for(;e===ws;)ws=ia[--oa],ia[oa]=null,Na=ia[--oa],ia[oa]=null,Ra=ia[--oa],ia[oa]=null}function ym(e,a){ia[oa++]=Ra,ia[oa++]=Na,ia[oa++]=ws,Ra=a.id,Na=a.overflow,ws=e}var Sn=null,Rt=null,st=!1,Cs=null,ra=!1,Gu=Error(o(519));function js(e){var a=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zo(sa(a,e)),Gu}function vm(e){var a=e.stateNode,i=e.type,r=e.memoizedProps;switch(a[Jt]=e,a[xn]=r,i){case"dialog":et("cancel",a),et("close",a);break;case"iframe":case"object":case"embed":et("load",a);break;case"video":case"audio":for(i=0;i<br.length;i++)et(br[i],a);break;case"source":et("error",a);break;case"img":case"image":case"link":et("error",a),et("load",a);break;case"details":et("toggle",a);break;case"input":et("invalid",a),ys(a,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":et("invalid",a);break;case"textarea":et("invalid",a),Po(a,r.value,r.defaultValue,r.children)}i=r.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||a.textContent===""+i||r.suppressHydrationWarning===!0||zy(a.textContent,i)?(r.popover!=null&&(et("beforetoggle",a),et("toggle",a)),r.onScroll!=null&&et("scroll",a),r.onScrollEnd!=null&&et("scrollend",a),r.onClick!=null&&(a.onclick=Y),a=!0):a=!1,a||js(e,!0)}function xm(e){for(Sn=e.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:ra=!1;return;case 27:case 3:ra=!0;return;default:Sn=Sn.return}}function $i(e){if(e!==Sn)return!1;if(!st)return xm(e),st=!0,!1;var a=e.tag,i;if((i=a!==3&&a!==27)&&((i=a===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||df(e.type,e.memoizedProps)),i=!i),i&&Rt&&js(e),xm(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Rt=$y(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Rt=$y(e)}else a===27?(a=Rt,Ls(e.type)?(e=gf,gf=null,Rt=e):Rt=a):Rt=Sn?ca(e.stateNode.nextSibling):null;return!0}function ii(){Rt=Sn=null,st=!1}function Yu(){var e=Cs;return e!==null&&(Ln===null?Ln=e:Ln.push.apply(Ln,e),Cs=null),e}function Zo(e){Cs===null?Cs=[e]:Cs.push(e)}var Wu=ve(null),oi=null,Wa=null;function Ts(e,a,i){Ce(Wu,a._currentValue),a._currentValue=i}function Xa(e){e._currentValue=Wu.current,Ne(Wu)}function Xu(e,a,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,r!==null&&(r.childLanes|=a)):r!==null&&(r.childLanes&a)!==a&&(r.childLanes|=a),e===i)break;e=e.return}}function Ku(e,a,i,r){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var p=d.dependencies;if(p!==null){var x=d.child;p=p.firstContext;e:for(;p!==null;){var S=p;p=d;for(var k=0;k<a.length;k++)if(S.context===a[k]){p.lanes|=i,S=p.alternate,S!==null&&(S.lanes|=i),Xu(p.return,i,e),r||(x=null);break e}p=S.next}}else if(d.tag===18){if(x=d.return,x===null)throw Error(o(341));x.lanes|=i,p=x.alternate,p!==null&&(p.lanes|=i),Xu(x,i,e),x=null}else x=d.child;if(x!==null)x.return=d;else for(x=d;x!==null;){if(x===e){x=null;break}if(d=x.sibling,d!==null){d.return=x.return,x=d;break}x=x.return}d=x}}function qi(e,a,i,r){e=null;for(var d=a,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var x=d.alternate;if(x===null)throw Error(o(387));if(x=x.memoizedProps,x!==null){var S=d.type;Yn(d.pendingProps.value,x.value)||(e!==null?e.push(S):e=[S])}}else if(d===$t.current){if(x=d.alternate,x===null)throw Error(o(387));x.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(jr):e=[jr])}d=d.return}e!==null&&Ku(a,e,i,r),a.flags|=262144}function Dl(e){for(e=e.firstContext;e!==null;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ri(e){oi=e,Wa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _n(e){return bm(oi,e)}function Bl(e,a){return oi===null&&ri(e),bm(e,a)}function bm(e,a){var i=a._currentValue;if(a={context:a,memoizedValue:i,next:null},Wa===null){if(e===null)throw Error(o(308));Wa=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else Wa=Wa.next=a;return i}var VS=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(i,r){e.push(r)}};this.abort=function(){a.aborted=!0,e.forEach(function(i){return i()})}},FS=t.unstable_scheduleCallback,$S=t.unstable_NormalPriority,on={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qu(){return{controller:new VS,data:new Map,refCount:0}}function Jo(e){e.refCount--,e.refCount===0&&FS($S,function(){e.controller.abort()})}var er=null,Zu=0,Gi=0,Yi=null;function qS(e,a){if(er===null){var i=er=[];Zu=0,Gi=tf(),Yi={status:"pending",value:void 0,then:function(r){i.push(r)}}}return Zu++,a.then(Sm,Sm),a}function Sm(){if(--Zu===0&&er!==null){Yi!==null&&(Yi.status="fulfilled");var e=er;er=null,Gi=0,Yi=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function GS(e,a){var i=[],r={status:"pending",value:null,reason:null,then:function(d){i.push(d)}};return e.then(function(){r.status="fulfilled",r.value=a;for(var d=0;d<i.length;d++)(0,i[d])(a)},function(d){for(r.status="rejected",r.reason=d,d=0;d<i.length;d++)(0,i[d])(void 0)}),r}var _m=z.S;z.S=function(e,a){iy=ie(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&qS(e,a),_m!==null&&_m(e,a)};var li=ve(null);function Ju(){var e=li.current;return e!==null?e:Tt.pooledCache}function zl(e,a){a===null?Ce(li,li.current):Ce(li,a.pool)}function wm(){var e=Ju();return e===null?null:{parent:on._currentValue,pool:e}}var Wi=Error(o(460)),ed=Error(o(474)),Ul=Error(o(542)),Il={then:function(){}};function Cm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function jm(e,a,i){switch(i=e[i],i===void 0?e.push(a):i!==a&&(a.then(Y,Y),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,km(e),e;default:if(typeof a.status=="string")a.then(Y,Y);else{if(e=Tt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=a,e.status="pending",e.then(function(r){if(a.status==="pending"){var d=a;d.status="fulfilled",d.value=r}},function(r){if(a.status==="pending"){var d=a;d.status="rejected",d.reason=r}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,km(e),e}throw ui=a,Wi}}function ci(e){try{var a=e._init;return a(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ui=i,Wi):i}}var ui=null;function Tm(){if(ui===null)throw Error(o(459));var e=ui;return ui=null,e}function km(e){if(e===Wi||e===Ul)throw Error(o(483))}var Xi=null,tr=0;function Ol(e){var a=tr;return tr+=1,Xi===null&&(Xi=[]),jm(Xi,e,a)}function nr(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Ll(e,a){throw a.$$typeof===_?Error(o(525)):(e=Object.prototype.toString.call(a),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function Am(e){function a(D,R){if(e){var I=D.deletions;I===null?(D.deletions=[R],D.flags|=16):I.push(R)}}function i(D,R){if(!e)return null;for(;R!==null;)a(D,R),R=R.sibling;return null}function r(D){for(var R=new Map;D!==null;)D.key!==null?R.set(D.key,D):R.set(D.index,D),D=D.sibling;return R}function d(D,R){return D=Ga(D,R),D.index=0,D.sibling=null,D}function p(D,R,I){return D.index=I,e?(I=D.alternate,I!==null?(I=I.index,I<R?(D.flags|=67108866,R):I):(D.flags|=67108866,R)):(D.flags|=1048576,R)}function x(D){return e&&D.alternate===null&&(D.flags|=67108866),D}function S(D,R,I,K){return R===null||R.tag!==6?(R=Vu(I,D.mode,K),R.return=D,R):(R=d(R,I),R.return=D,R)}function k(D,R,I,K){var Ae=I.type;return Ae===A?W(D,R,I.props.children,K,I.key):R!==null&&(R.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===Z&&ci(Ae)===R.type)?(R=d(R,I.props),nr(R,I),R.return=D,R):(R=Rl(I.type,I.key,I.props,null,D.mode,K),nr(R,I),R.return=D,R)}function L(D,R,I,K){return R===null||R.tag!==4||R.stateNode.containerInfo!==I.containerInfo||R.stateNode.implementation!==I.implementation?(R=Fu(I,D.mode,K),R.return=D,R):(R=d(R,I.children||[]),R.return=D,R)}function W(D,R,I,K,Ae){return R===null||R.tag!==7?(R=si(I,D.mode,K,Ae),R.return=D,R):(R=d(R,I),R.return=D,R)}function J(D,R,I){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Vu(""+R,D.mode,I),R.return=D,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case C:return I=Rl(R.type,R.key,R.props,null,D.mode,I),nr(I,R),I.return=D,I;case w:return R=Fu(R,D.mode,I),R.return=D,R;case Z:return R=ci(R),J(D,R,I)}if(He(R)||Ze(R))return R=si(R,D.mode,I,null),R.return=D,R;if(typeof R.then=="function")return J(D,Ol(R),I);if(R.$$typeof===E)return J(D,Bl(D,R),I);Ll(D,R)}return null}function V(D,R,I,K){var Ae=R!==null?R.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return Ae!==null?null:S(D,R,""+I,K);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case C:return I.key===Ae?k(D,R,I,K):null;case w:return I.key===Ae?L(D,R,I,K):null;case Z:return I=ci(I),V(D,R,I,K)}if(He(I)||Ze(I))return Ae!==null?null:W(D,R,I,K,null);if(typeof I.then=="function")return V(D,R,Ol(I),K);if(I.$$typeof===E)return V(D,R,Bl(D,I),K);Ll(D,I)}return null}function $(D,R,I,K,Ae){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return D=D.get(I)||null,S(R,D,""+K,Ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return D=D.get(K.key===null?I:K.key)||null,k(R,D,K,Ae);case w:return D=D.get(K.key===null?I:K.key)||null,L(R,D,K,Ae);case Z:return K=ci(K),$(D,R,I,K,Ae)}if(He(K)||Ze(K))return D=D.get(I)||null,W(R,D,K,Ae,null);if(typeof K.then=="function")return $(D,R,I,Ol(K),Ae);if(K.$$typeof===E)return $(D,R,I,Bl(R,K),Ae);Ll(R,K)}return null}function be(D,R,I,K){for(var Ae=null,ut=null,we=R,Ke=R=0,at=null;we!==null&&Ke<I.length;Ke++){we.index>Ke?(at=we,we=null):at=we.sibling;var dt=V(D,we,I[Ke],K);if(dt===null){we===null&&(we=at);break}e&&we&&dt.alternate===null&&a(D,we),R=p(dt,R,Ke),ut===null?Ae=dt:ut.sibling=dt,ut=dt,we=at}if(Ke===I.length)return i(D,we),st&&Ya(D,Ke),Ae;if(we===null){for(;Ke<I.length;Ke++)we=J(D,I[Ke],K),we!==null&&(R=p(we,R,Ke),ut===null?Ae=we:ut.sibling=we,ut=we);return st&&Ya(D,Ke),Ae}for(we=r(we);Ke<I.length;Ke++)at=$(we,D,Ke,I[Ke],K),at!==null&&(e&&at.alternate!==null&&we.delete(at.key===null?Ke:at.key),R=p(at,R,Ke),ut===null?Ae=at:ut.sibling=at,ut=at);return e&&we.forEach(function($s){return a(D,$s)}),st&&Ya(D,Ke),Ae}function Ie(D,R,I,K){if(I==null)throw Error(o(151));for(var Ae=null,ut=null,we=R,Ke=R=0,at=null,dt=I.next();we!==null&&!dt.done;Ke++,dt=I.next()){we.index>Ke?(at=we,we=null):at=we.sibling;var $s=V(D,we,dt.value,K);if($s===null){we===null&&(we=at);break}e&&we&&$s.alternate===null&&a(D,we),R=p($s,R,Ke),ut===null?Ae=$s:ut.sibling=$s,ut=$s,we=at}if(dt.done)return i(D,we),st&&Ya(D,Ke),Ae;if(we===null){for(;!dt.done;Ke++,dt=I.next())dt=J(D,dt.value,K),dt!==null&&(R=p(dt,R,Ke),ut===null?Ae=dt:ut.sibling=dt,ut=dt);return st&&Ya(D,Ke),Ae}for(we=r(we);!dt.done;Ke++,dt=I.next())dt=$(we,D,Ke,dt.value,K),dt!==null&&(e&&dt.alternate!==null&&we.delete(dt.key===null?Ke:dt.key),R=p(dt,R,Ke),ut===null?Ae=dt:ut.sibling=dt,ut=dt);return e&&we.forEach(function(aw){return a(D,aw)}),st&&Ya(D,Ke),Ae}function wt(D,R,I,K){if(typeof I=="object"&&I!==null&&I.type===A&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case C:e:{for(var Ae=I.key;R!==null;){if(R.key===Ae){if(Ae=I.type,Ae===A){if(R.tag===7){i(D,R.sibling),K=d(R,I.props.children),K.return=D,D=K;break e}}else if(R.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===Z&&ci(Ae)===R.type){i(D,R.sibling),K=d(R,I.props),nr(K,I),K.return=D,D=K;break e}i(D,R);break}else a(D,R);R=R.sibling}I.type===A?(K=si(I.props.children,D.mode,K,I.key),K.return=D,D=K):(K=Rl(I.type,I.key,I.props,null,D.mode,K),nr(K,I),K.return=D,D=K)}return x(D);case w:e:{for(Ae=I.key;R!==null;){if(R.key===Ae)if(R.tag===4&&R.stateNode.containerInfo===I.containerInfo&&R.stateNode.implementation===I.implementation){i(D,R.sibling),K=d(R,I.children||[]),K.return=D,D=K;break e}else{i(D,R);break}else a(D,R);R=R.sibling}K=Fu(I,D.mode,K),K.return=D,D=K}return x(D);case Z:return I=ci(I),wt(D,R,I,K)}if(He(I))return be(D,R,I,K);if(Ze(I)){if(Ae=Ze(I),typeof Ae!="function")throw Error(o(150));return I=Ae.call(I),Ie(D,R,I,K)}if(typeof I.then=="function")return wt(D,R,Ol(I),K);if(I.$$typeof===E)return wt(D,R,Bl(D,I),K);Ll(D,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,R!==null&&R.tag===6?(i(D,R.sibling),K=d(R,I),K.return=D,D=K):(i(D,R),K=Vu(I,D.mode,K),K.return=D,D=K),x(D)):i(D,R)}return function(D,R,I,K){try{tr=0;var Ae=wt(D,R,I,K);return Xi=null,Ae}catch(we){if(we===Wi||we===Ul)throw we;var ut=Wn(29,we,null,D.mode);return ut.lanes=K,ut.return=D,ut}finally{}}}var di=Am(!0),Mm=Am(!1),ks=!1;function td(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nd(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function As(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ms(e,a,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(ht&2)!==0){var d=r.pending;return d===null?a.next=a:(a.next=d.next,d.next=a),r.pending=a,a=El(e),fm(e,null,i),a}return Ml(e,r,a,i),El(e)}function ar(e,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var r=a.lanes;r&=e.pendingLanes,i|=r,a.lanes=i,qe(e,i)}}function ad(e,a){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var d=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var x={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};p===null?d=p=x:p=p.next=x,i=i.next}while(i!==null);p===null?d=p=a:p=p.next=a}else d=p=a;i={baseState:r.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:r.shared,callbacks:r.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=a:e.next=a,i.lastBaseUpdate=a}var sd=!1;function sr(){if(sd){var e=Yi;if(e!==null)throw e}}function ir(e,a,i,r){sd=!1;var d=e.updateQueue;ks=!1;var p=d.firstBaseUpdate,x=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var k=S,L=k.next;k.next=null,x===null?p=L:x.next=L,x=k;var W=e.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==x&&(S===null?W.firstBaseUpdate=L:S.next=L,W.lastBaseUpdate=k))}if(p!==null){var J=d.baseState;x=0,W=L=k=null,S=p;do{var V=S.lane&-536870913,$=V!==S.lane;if($?(nt&V)===V:(r&V)===V){V!==0&&V===Gi&&(sd=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var be=e,Ie=S;V=a;var wt=i;switch(Ie.tag){case 1:if(be=Ie.payload,typeof be=="function"){J=be.call(wt,J,V);break e}J=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ie.payload,V=typeof be=="function"?be.call(wt,J,V):be,V==null)break e;J=v({},J,V);break e;case 2:ks=!0}}V=S.callback,V!==null&&(e.flags|=64,$&&(e.flags|=8192),$=d.callbacks,$===null?d.callbacks=[V]:$.push(V))}else $={lane:V,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(L=W=$,k=J):W=W.next=$,x|=V;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;$=S,S=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);W===null&&(k=J),d.baseState=k,d.firstBaseUpdate=L,d.lastBaseUpdate=W,p===null&&(d.shared.lanes=0),Bs|=x,e.lanes=x,e.memoizedState=J}}function Em(e,a){if(typeof e!="function")throw Error(o(191,e));e.call(a)}function Rm(e,a){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Em(i[e],a)}var Ki=ve(null),Pl=ve(0);function Nm(e,a){e=ss,Ce(Pl,e),Ce(Ki,a),ss=e|a.baseLanes}function id(){Ce(Pl,ss),Ce(Ki,Ki.current)}function od(){ss=Pl.current,Ne(Ki),Ne(Pl)}var Xn=ve(null),la=null;function Es(e){var a=e.alternate;Ce(en,en.current&1),Ce(Xn,e),la===null&&(a===null||Ki.current!==null||a.memoizedState!==null)&&(la=e)}function rd(e){Ce(en,en.current),Ce(Xn,e),la===null&&(la=e)}function Dm(e){e.tag===22?(Ce(en,en.current),Ce(Xn,e),la===null&&(la=e)):Rs()}function Rs(){Ce(en,en.current),Ce(Xn,Xn.current)}function Kn(e){Ne(Xn),la===e&&(la=null),Ne(en)}var en=ve(0);function Hl(e){for(var a=e;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||hf(i)||mf(i)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ka=0,Ye=null,St=null,rn=null,Vl=!1,Qi=!1,fi=!1,Fl=0,or=0,Zi=null,YS=0;function Yt(){throw Error(o(321))}function ld(e,a){if(a===null)return!1;for(var i=0;i<a.length&&i<e.length;i++)if(!Yn(e[i],a[i]))return!1;return!0}function cd(e,a,i,r,d,p){return Ka=p,Ye=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,z.H=e===null||e.memoizedState===null?gg:Cd,fi=!1,p=i(r,d),fi=!1,Qi&&(p=zm(a,i,r,d)),Bm(e),p}function Bm(e){z.H=cr;var a=St!==null&&St.next!==null;if(Ka=0,rn=St=Ye=null,Vl=!1,or=0,Zi=null,a)throw Error(o(300));e===null||ln||(e=e.dependencies,e!==null&&Dl(e)&&(ln=!0))}function zm(e,a,i,r){Ye=e;var d=0;do{if(Qi&&(Zi=null),or=0,Qi=!1,25<=d)throw Error(o(301));if(d+=1,rn=St=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}z.H=yg,p=a(i,r)}while(Qi);return p}function WS(){var e=z.H,a=e.useState()[0];return a=typeof a.then=="function"?rr(a):a,e=e.useState()[0],(St!==null?St.memoizedState:null)!==e&&(Ye.flags|=1024),a}function ud(){var e=Fl!==0;return Fl=0,e}function dd(e,a,i){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~i}function fd(e){if(Vl){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}Vl=!1}Ka=0,rn=St=Ye=null,Qi=!1,or=Fl=0,Zi=null}function Nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Ye.memoizedState=rn=e:rn=rn.next=e,rn}function tn(){if(St===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=St.next;var a=rn===null?Ye.memoizedState:rn.next;if(a!==null)rn=a,St=e;else{if(e===null)throw Ye.alternate===null?Error(o(467)):Error(o(310));St=e,e={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},rn===null?Ye.memoizedState=rn=e:rn=rn.next=e}return rn}function $l(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rr(e){var a=or;return or+=1,Zi===null&&(Zi=[]),e=jm(Zi,e,a),a=Ye,(rn===null?a.memoizedState:rn.next)===null&&(a=a.alternate,z.H=a===null||a.memoizedState===null?gg:Cd),e}function ql(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return rr(e);if(e.$$typeof===E)return _n(e)}throw Error(o(438,String(e)))}function pd(e){var a=null,i=Ye.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var r=Ye.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(a={data:r.data.map(function(d){return d.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=$l(),Ye.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(e),r=0;r<e;r++)i[r]=ue;return a.index++,i}function Qa(e,a){return typeof a=="function"?a(e):a}function Gl(e){var a=tn();return hd(a,St,e)}function hd(e,a,i){var r=e.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=i;var d=e.baseQueue,p=r.pending;if(p!==null){if(d!==null){var x=d.next;d.next=p.next,p.next=x}a.baseQueue=d=p,r.pending=null}if(p=e.baseState,d===null)e.memoizedState=p;else{a=d.next;var S=x=null,k=null,L=a,W=!1;do{var J=L.lane&-536870913;if(J!==L.lane?(nt&J)===J:(Ka&J)===J){var V=L.revertLane;if(V===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),J===Gi&&(W=!0);else if((Ka&V)===V){L=L.next,V===Gi&&(W=!0);continue}else J={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},k===null?(S=k=J,x=p):k=k.next=J,Ye.lanes|=V,Bs|=V;J=L.action,fi&&i(p,J),p=L.hasEagerState?L.eagerState:i(p,J)}else V={lane:J,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},k===null?(S=k=V,x=p):k=k.next=V,Ye.lanes|=J,Bs|=J;L=L.next}while(L!==null&&L!==a);if(k===null?x=p:k.next=S,!Yn(p,e.memoizedState)&&(ln=!0,W&&(i=Yi,i!==null)))throw i;e.memoizedState=p,e.baseState=x,e.baseQueue=k,r.lastRenderedState=p}return d===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function md(e){var a=tn(),i=a.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var r=i.dispatch,d=i.pending,p=a.memoizedState;if(d!==null){i.pending=null;var x=d=d.next;do p=e(p,x.action),x=x.next;while(x!==d);Yn(p,a.memoizedState)||(ln=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),i.lastRenderedState=p}return[p,r]}function Um(e,a,i){var r=Ye,d=tn(),p=st;if(p){if(i===void 0)throw Error(o(407));i=i()}else i=a();var x=!Yn((St||d).memoizedState,i);if(x&&(d.memoizedState=i,ln=!0),d=d.queue,vd(Lm.bind(null,r,d,e),[e]),d.getSnapshot!==a||x||rn!==null&&rn.memoizedState.tag&1){if(r.flags|=2048,Ji(9,{destroy:void 0},Om.bind(null,r,d,i,a),null),Tt===null)throw Error(o(349));p||(Ka&127)!==0||Im(r,a,i)}return i}function Im(e,a,i){e.flags|=16384,e={getSnapshot:a,value:i},a=Ye.updateQueue,a===null?(a=$l(),Ye.updateQueue=a,a.stores=[e]):(i=a.stores,i===null?a.stores=[e]:i.push(e))}function Om(e,a,i,r){a.value=i,a.getSnapshot=r,Pm(a)&&Hm(e)}function Lm(e,a,i){return i(function(){Pm(a)&&Hm(e)})}function Pm(e){var a=e.getSnapshot;e=e.value;try{var i=a();return!Yn(e,i)}catch{return!0}}function Hm(e){var a=ai(e,2);a!==null&&Pn(a,e,2)}function gd(e){var a=Nn();if(typeof e=="function"){var i=e;if(e=i(),fi){ot(!0);try{i()}finally{ot(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:e},a}function Vm(e,a,i,r){return e.baseState=i,hd(e,St,typeof r=="function"?r:Qa)}function XS(e,a,i,r,d){if(Xl(e))throw Error(o(485));if(e=a.action,e!==null){var p={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){p.listeners.push(x)}};z.T!==null?i(!0):p.isTransition=!1,r(p),i=a.pending,i===null?(p.next=a.pending=p,Fm(a,p)):(p.next=i.next,a.pending=i.next=p)}}function Fm(e,a){var i=a.action,r=a.payload,d=e.state;if(a.isTransition){var p=z.T,x={};z.T=x;try{var S=i(d,r),k=z.S;k!==null&&k(x,S),$m(e,a,S)}catch(L){yd(e,a,L)}finally{p!==null&&x.types!==null&&(p.types=x.types),z.T=p}}else try{p=i(d,r),$m(e,a,p)}catch(L){yd(e,a,L)}}function $m(e,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(r){qm(e,a,r)},function(r){return yd(e,a,r)}):qm(e,a,i)}function qm(e,a,i){a.status="fulfilled",a.value=i,Gm(a),e.state=i,a=e.pending,a!==null&&(i=a.next,i===a?e.pending=null:(i=i.next,a.next=i,Fm(e,i)))}function yd(e,a,i){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do a.status="rejected",a.reason=i,Gm(a),a=a.next;while(a!==r)}e.action=null}function Gm(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Ym(e,a){return a}function Wm(e,a){if(st){var i=Tt.formState;if(i!==null){e:{var r=Ye;if(st){if(Rt){t:{for(var d=Rt,p=ra;d.nodeType!==8;){if(!p){d=null;break t}if(d=ca(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){Rt=ca(d.nextSibling),r=d.data==="F!";break e}}js(r)}r=!1}r&&(a=i[0])}}return i=Nn(),i.memoizedState=i.baseState=a,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ym,lastRenderedState:a},i.queue=r,i=pg.bind(null,Ye,r),r.dispatch=i,r=gd(!1),p=wd.bind(null,Ye,!1,r.queue),r=Nn(),d={state:a,dispatch:null,action:e,pending:null},r.queue=d,i=XS.bind(null,Ye,d,p,i),d.dispatch=i,r.memoizedState=e,[a,i,!1]}function Xm(e){var a=tn();return Km(a,St,e)}function Km(e,a,i){if(a=hd(e,a,Ym)[0],e=Gl(Qa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var r=rr(a)}catch(x){throw x===Wi?Ul:x}else r=a;a=tn();var d=a.queue,p=d.dispatch;return i!==a.memoizedState&&(Ye.flags|=2048,Ji(9,{destroy:void 0},KS.bind(null,d,i),null)),[r,p,e]}function KS(e,a){e.action=a}function Qm(e){var a=tn(),i=St;if(i!==null)return Km(a,i,e);tn(),a=a.memoizedState,i=tn();var r=i.queue.dispatch;return i.memoizedState=e,[a,r,!1]}function Ji(e,a,i,r){return e={tag:e,create:i,deps:r,inst:a,next:null},a=Ye.updateQueue,a===null&&(a=$l(),Ye.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,a.lastEffect=e),e}function Zm(){return tn().memoizedState}function Yl(e,a,i,r){var d=Nn();Ye.flags|=e,d.memoizedState=Ji(1|a,{destroy:void 0},i,r===void 0?null:r)}function Wl(e,a,i,r){var d=tn();r=r===void 0?null:r;var p=d.memoizedState.inst;St!==null&&r!==null&&ld(r,St.memoizedState.deps)?d.memoizedState=Ji(a,p,i,r):(Ye.flags|=e,d.memoizedState=Ji(1|a,p,i,r))}function Jm(e,a){Yl(8390656,8,e,a)}function vd(e,a){Wl(2048,8,e,a)}function QS(e){Ye.flags|=4;var a=Ye.updateQueue;if(a===null)a=$l(),Ye.updateQueue=a,a.events=[e];else{var i=a.events;i===null?a.events=[e]:i.push(e)}}function eg(e){var a=tn().memoizedState;return QS({ref:a,nextImpl:e}),function(){if((ht&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}function tg(e,a){return Wl(4,2,e,a)}function ng(e,a){return Wl(4,4,e,a)}function ag(e,a){if(typeof a=="function"){e=e();var i=a(e);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function sg(e,a,i){i=i!=null?i.concat([e]):null,Wl(4,4,ag.bind(null,a,e),i)}function xd(){}function ig(e,a){var i=tn();a=a===void 0?null:a;var r=i.memoizedState;return a!==null&&ld(a,r[1])?r[0]:(i.memoizedState=[e,a],e)}function og(e,a){var i=tn();a=a===void 0?null:a;var r=i.memoizedState;if(a!==null&&ld(a,r[1]))return r[0];if(r=e(),fi){ot(!0);try{e()}finally{ot(!1)}}return i.memoizedState=[r,a],r}function bd(e,a,i){return i===void 0||(Ka&1073741824)!==0&&(nt&261930)===0?e.memoizedState=a:(e.memoizedState=i,e=ry(),Ye.lanes|=e,Bs|=e,i)}function rg(e,a,i,r){return Yn(i,a)?i:Ki.current!==null?(e=bd(e,i,r),Yn(e,a)||(ln=!0),e):(Ka&42)===0||(Ka&1073741824)!==0&&(nt&261930)===0?(ln=!0,e.memoizedState=i):(e=ry(),Ye.lanes|=e,Bs|=e,a)}function lg(e,a,i,r,d){var p=ae.p;ae.p=p!==0&&8>p?p:8;var x=z.T,S={};z.T=S,wd(e,!1,a,i);try{var k=d(),L=z.S;if(L!==null&&L(S,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var W=GS(k,r);lr(e,a,W,Jn(e))}else lr(e,a,r,Jn(e))}catch(J){lr(e,a,{then:function(){},status:"rejected",reason:J},Jn())}finally{ae.p=p,x!==null&&S.types!==null&&(x.types=S.types),z.T=x}}function ZS(){}function Sd(e,a,i,r){if(e.tag!==5)throw Error(o(476));var d=cg(e).queue;lg(e,d,a,le,i===null?ZS:function(){return ug(e),i(r)})}function cg(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:le},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:i},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function ug(e){var a=cg(e);a.next===null&&(a=e.alternate.memoizedState),lr(e,a.next.queue,{},Jn())}function _d(){return _n(jr)}function dg(){return tn().memoizedState}function fg(){return tn().memoizedState}function JS(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var i=Jn();e=As(i);var r=Ms(a,e,i);r!==null&&(Pn(r,a,i),ar(r,a,i)),a={cache:Qu()},e.payload=a;return}a=a.return}}function e_(e,a,i){var r=Jn();i={lane:r,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Xl(e)?hg(a,i):(i=Pu(e,a,i,r),i!==null&&(Pn(i,e,r),mg(i,a,r)))}function pg(e,a,i){var r=Jn();lr(e,a,i,r)}function lr(e,a,i,r){var d={lane:r,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Xl(e))hg(a,d);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var x=a.lastRenderedState,S=p(x,i);if(d.hasEagerState=!0,d.eagerState=S,Yn(S,x))return Ml(e,a,d,0),Tt===null&&Al(),!1}catch{}finally{}if(i=Pu(e,a,d,r),i!==null)return Pn(i,e,r),mg(i,a,r),!0}return!1}function wd(e,a,i,r){if(r={lane:2,revertLane:tf(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Xl(e)){if(a)throw Error(o(479))}else a=Pu(e,i,r,2),a!==null&&Pn(a,e,2)}function Xl(e){var a=e.alternate;return e===Ye||a!==null&&a===Ye}function hg(e,a){Qi=Vl=!0;var i=e.pending;i===null?a.next=a:(a.next=i.next,i.next=a),e.pending=a}function mg(e,a,i){if((i&4194048)!==0){var r=a.lanes;r&=e.pendingLanes,i|=r,a.lanes=i,qe(e,i)}}var cr={readContext:_n,use:ql,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt};cr.useEffectEvent=Yt;var gg={readContext:_n,use:ql,useCallback:function(e,a){return Nn().memoizedState=[e,a===void 0?null:a],e},useContext:_n,useEffect:Jm,useImperativeHandle:function(e,a,i){i=i!=null?i.concat([e]):null,Yl(4194308,4,ag.bind(null,a,e),i)},useLayoutEffect:function(e,a){return Yl(4194308,4,e,a)},useInsertionEffect:function(e,a){Yl(4,2,e,a)},useMemo:function(e,a){var i=Nn();a=a===void 0?null:a;var r=e();if(fi){ot(!0);try{e()}finally{ot(!1)}}return i.memoizedState=[r,a],r},useReducer:function(e,a,i){var r=Nn();if(i!==void 0){var d=i(a);if(fi){ot(!0);try{i(a)}finally{ot(!1)}}}else d=a;return r.memoizedState=r.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},r.queue=e,e=e.dispatch=e_.bind(null,Ye,e),[r.memoizedState,e]},useRef:function(e){var a=Nn();return e={current:e},a.memoizedState=e},useState:function(e){e=gd(e);var a=e.queue,i=pg.bind(null,Ye,a);return a.dispatch=i,[e.memoizedState,i]},useDebugValue:xd,useDeferredValue:function(e,a){var i=Nn();return bd(i,e,a)},useTransition:function(){var e=gd(!1);return e=lg.bind(null,Ye,e.queue,!0,!1),Nn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,i){var r=Ye,d=Nn();if(st){if(i===void 0)throw Error(o(407));i=i()}else{if(i=a(),Tt===null)throw Error(o(349));(nt&127)!==0||Im(r,a,i)}d.memoizedState=i;var p={value:i,getSnapshot:a};return d.queue=p,Jm(Lm.bind(null,r,p,e),[e]),r.flags|=2048,Ji(9,{destroy:void 0},Om.bind(null,r,p,i,a),null),i},useId:function(){var e=Nn(),a=Tt.identifierPrefix;if(st){var i=Na,r=Ra;i=(r&~(1<<32-gt(r)-1)).toString(32)+i,a="_"+a+"R_"+i,i=Fl++,0<i&&(a+="H"+i.toString(32)),a+="_"}else i=YS++,a="_"+a+"r_"+i.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:_d,useFormState:Wm,useActionState:Wm,useOptimistic:function(e){var a=Nn();a.memoizedState=a.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=wd.bind(null,Ye,!0,i),i.dispatch=a,[e,a]},useMemoCache:pd,useCacheRefresh:function(){return Nn().memoizedState=JS.bind(null,Ye)},useEffectEvent:function(e){var a=Nn(),i={impl:e};return a.memoizedState=i,function(){if((ht&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}},Cd={readContext:_n,use:ql,useCallback:ig,useContext:_n,useEffect:vd,useImperativeHandle:sg,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:og,useReducer:Gl,useRef:Zm,useState:function(){return Gl(Qa)},useDebugValue:xd,useDeferredValue:function(e,a){var i=tn();return rg(i,St.memoizedState,e,a)},useTransition:function(){var e=Gl(Qa)[0],a=tn().memoizedState;return[typeof e=="boolean"?e:rr(e),a]},useSyncExternalStore:Um,useId:dg,useHostTransitionStatus:_d,useFormState:Xm,useActionState:Xm,useOptimistic:function(e,a){var i=tn();return Vm(i,St,e,a)},useMemoCache:pd,useCacheRefresh:fg};Cd.useEffectEvent=eg;var yg={readContext:_n,use:ql,useCallback:ig,useContext:_n,useEffect:vd,useImperativeHandle:sg,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:og,useReducer:md,useRef:Zm,useState:function(){return md(Qa)},useDebugValue:xd,useDeferredValue:function(e,a){var i=tn();return St===null?bd(i,e,a):rg(i,St.memoizedState,e,a)},useTransition:function(){var e=md(Qa)[0],a=tn().memoizedState;return[typeof e=="boolean"?e:rr(e),a]},useSyncExternalStore:Um,useId:dg,useHostTransitionStatus:_d,useFormState:Qm,useActionState:Qm,useOptimistic:function(e,a){var i=tn();return St!==null?Vm(i,St,e,a):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:pd,useCacheRefresh:fg};yg.useEffectEvent=eg;function jd(e,a,i,r){a=e.memoizedState,i=i(r,a),i=i==null?a:v({},a,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Td={enqueueSetState:function(e,a,i){e=e._reactInternals;var r=Jn(),d=As(r);d.payload=a,i!=null&&(d.callback=i),a=Ms(e,d,r),a!==null&&(Pn(a,e,r),ar(a,e,r))},enqueueReplaceState:function(e,a,i){e=e._reactInternals;var r=Jn(),d=As(r);d.tag=1,d.payload=a,i!=null&&(d.callback=i),a=Ms(e,d,r),a!==null&&(Pn(a,e,r),ar(a,e,r))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var i=Jn(),r=As(i);r.tag=2,a!=null&&(r.callback=a),a=Ms(e,r,i),a!==null&&(Pn(a,e,i),ar(a,e,i))}};function vg(e,a,i,r,d,p,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,p,x):a.prototype&&a.prototype.isPureReactComponent?!Xo(i,r)||!Xo(d,p):!0}function xg(e,a,i,r){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,r),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,r),a.state!==e&&Td.enqueueReplaceState(a,a.state,null)}function pi(e,a){var i=a;if("ref"in a){i={};for(var r in a)r!=="ref"&&(i[r]=a[r])}if(e=e.defaultProps){i===a&&(i=v({},i));for(var d in e)i[d]===void 0&&(i[d]=e[d])}return i}function bg(e){kl(e)}function Sg(e){console.error(e)}function _g(e){kl(e)}function Kl(e,a){try{var i=e.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(r){setTimeout(function(){throw r})}}function wg(e,a,i){try{var r=e.onCaughtError;r(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function kd(e,a,i){return i=As(i),i.tag=3,i.payload={element:null},i.callback=function(){Kl(e,a)},i}function Cg(e){return e=As(e),e.tag=3,e}function jg(e,a,i,r){var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var p=r.value;e.payload=function(){return d(p)},e.callback=function(){wg(a,i,r)}}var x=i.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){wg(a,i,r),typeof d!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var S=r.stack;this.componentDidCatch(r.value,{componentStack:S!==null?S:""})})}function t_(e,a,i,r,d){if(i.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(a=i.alternate,a!==null&&qi(a,i,d,!0),i=Xn.current,i!==null){switch(i.tag){case 31:case 13:return la===null?lc():i.alternate===null&&Wt===0&&(Wt=3),i.flags&=-257,i.flags|=65536,i.lanes=d,r===Il?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([r]):a.add(r),Zd(e,r,d)),!1;case 22:return i.flags|=65536,r===Il?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([r]):i.add(r)),Zd(e,r,d)),!1}throw Error(o(435,i.tag))}return Zd(e,r,d),lc(),!1}if(st)return a=Xn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=d,r!==Gu&&(e=Error(o(422),{cause:r}),Zo(sa(e,i)))):(r!==Gu&&(a=Error(o(423),{cause:r}),Zo(sa(a,i))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,r=sa(r,i),d=kd(e.stateNode,r,d),ad(e,d),Wt!==4&&(Wt=2)),!1;var p=Error(o(520),{cause:r});if(p=sa(p,i),yr===null?yr=[p]:yr.push(p),Wt!==4&&(Wt=2),a===null)return!0;r=sa(r,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,e=d&-d,i.lanes|=e,e=kd(i.stateNode,r,e),ad(i,e),!1;case 1:if(a=i.type,p=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(zs===null||!zs.has(p))))return i.flags|=65536,d&=-d,i.lanes|=d,d=Cg(d),jg(d,e,i,r),ad(i,d),!1}i=i.return}while(i!==null);return!1}var Ad=Error(o(461)),ln=!1;function wn(e,a,i,r){a.child=e===null?Mm(a,null,i,r):di(a,e.child,i,r)}function Tg(e,a,i,r,d){i=i.render;var p=a.ref;if("ref"in r){var x={};for(var S in r)S!=="ref"&&(x[S]=r[S])}else x=r;return ri(a),r=cd(e,a,i,x,p,d),S=ud(),e!==null&&!ln?(dd(e,a,d),Za(e,a,d)):(st&&S&&$u(a),a.flags|=1,wn(e,a,r,d),a.child)}function kg(e,a,i,r,d){if(e===null){var p=i.type;return typeof p=="function"&&!Hu(p)&&p.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=p,Ag(e,a,p,r,d)):(e=Rl(i.type,null,r,a,a.mode,d),e.ref=a.ref,e.return=a,a.child=e)}if(p=e.child,!Ud(e,d)){var x=p.memoizedProps;if(i=i.compare,i=i!==null?i:Xo,i(x,r)&&e.ref===a.ref)return Za(e,a,d)}return a.flags|=1,e=Ga(p,r),e.ref=a.ref,e.return=a,a.child=e}function Ag(e,a,i,r,d){if(e!==null){var p=e.memoizedProps;if(Xo(p,r)&&e.ref===a.ref)if(ln=!1,a.pendingProps=r=p,Ud(e,d))(e.flags&131072)!==0&&(ln=!0);else return a.lanes=e.lanes,Za(e,a,d)}return Md(e,a,i,r,d)}function Mg(e,a,i,r){var d=r.children,p=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|i:i,e!==null){for(r=a.child=e.child,d=0;r!==null;)d=d|r.lanes|r.childLanes,r=r.sibling;r=d&~p}else r=0,a.child=null;return Eg(e,a,p,i,r)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&zl(a,p!==null?p.cachePool:null),p!==null?Nm(a,p):id(),Dm(a);else return r=a.lanes=536870912,Eg(e,a,p!==null?p.baseLanes|i:i,i,r)}else p!==null?(zl(a,p.cachePool),Nm(a,p),Rs(),a.memoizedState=null):(e!==null&&zl(a,null),id(),Rs());return wn(e,a,d,i),a.child}function ur(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Eg(e,a,i,r,d){var p=Ju();return p=p===null?null:{parent:on._currentValue,pool:p},a.memoizedState={baseLanes:i,cachePool:p},e!==null&&zl(a,null),id(),Dm(a),e!==null&&qi(e,a,r,!0),a.childLanes=d,null}function Ql(e,a){return a=Jl({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function Rg(e,a,i){return di(a,e.child,null,i),e=Ql(a,a.pendingProps),e.flags|=2,Kn(a),a.memoizedState=null,e}function n_(e,a,i){var r=a.pendingProps,d=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(st){if(r.mode==="hidden")return e=Ql(a,r),a.lanes=536870912,ur(null,e);if(rd(a),(e=Rt)?(e=Fy(e,ra),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:ws!==null?{id:Ra,overflow:Na}:null,retryLane:536870912,hydrationErrors:null},i=hm(e),i.return=a,a.child=i,Sn=a,Rt=null)):e=null,e===null)throw js(a);return a.lanes=536870912,null}return Ql(a,r)}var p=e.memoizedState;if(p!==null){var x=p.dehydrated;if(rd(a),d)if(a.flags&256)a.flags&=-257,a=Rg(e,a,i);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(o(558));else if(ln||qi(e,a,i,!1),d=(i&e.childLanes)!==0,ln||d){if(r=Tt,r!==null&&(x=ct(r,i),x!==0&&x!==p.retryLane))throw p.retryLane=x,ai(e,x),Pn(r,e,x),Ad;lc(),a=Rg(e,a,i)}else e=p.treeContext,Rt=ca(x.nextSibling),Sn=a,st=!0,Cs=null,ra=!1,e!==null&&ym(a,e),a=Ql(a,r),a.flags|=4096;return a}return e=Ga(e.child,{mode:r.mode,children:r.children}),e.ref=a.ref,a.child=e,e.return=a,e}function Zl(e,a){var i=a.ref;if(i===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(a.flags|=4194816)}}function Md(e,a,i,r,d){return ri(a),i=cd(e,a,i,r,void 0,d),r=ud(),e!==null&&!ln?(dd(e,a,d),Za(e,a,d)):(st&&r&&$u(a),a.flags|=1,wn(e,a,i,d),a.child)}function Ng(e,a,i,r,d,p){return ri(a),a.updateQueue=null,i=zm(a,r,i,d),Bm(e),r=ud(),e!==null&&!ln?(dd(e,a,p),Za(e,a,p)):(st&&r&&$u(a),a.flags|=1,wn(e,a,i,p),a.child)}function Dg(e,a,i,r,d){if(ri(a),a.stateNode===null){var p=Hi,x=i.contextType;typeof x=="object"&&x!==null&&(p=_n(x)),p=new i(r,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Td,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=r,p.state=a.memoizedState,p.refs={},td(a),x=i.contextType,p.context=typeof x=="object"&&x!==null?_n(x):Hi,p.state=a.memoizedState,x=i.getDerivedStateFromProps,typeof x=="function"&&(jd(a,i,x,r),p.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(x=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),x!==p.state&&Td.enqueueReplaceState(p,p.state,null),ir(a,r,p,d),sr(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),r=!0}else if(e===null){p=a.stateNode;var S=a.memoizedProps,k=pi(i,S);p.props=k;var L=p.context,W=i.contextType;x=Hi,typeof W=="object"&&W!==null&&(x=_n(W));var J=i.getDerivedStateFromProps;W=typeof J=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,W||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||L!==x)&&xg(a,p,r,x),ks=!1;var V=a.memoizedState;p.state=V,ir(a,r,p,d),sr(),L=a.memoizedState,S||V!==L||ks?(typeof J=="function"&&(jd(a,i,J,r),L=a.memoizedState),(k=ks||vg(a,i,k,r,V,L,x))?(W||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=r,a.memoizedState=L),p.props=r,p.state=L,p.context=x,r=k):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),r=!1)}else{p=a.stateNode,nd(e,a),x=a.memoizedProps,W=pi(i,x),p.props=W,J=a.pendingProps,V=p.context,L=i.contextType,k=Hi,typeof L=="object"&&L!==null&&(k=_n(L)),S=i.getDerivedStateFromProps,(L=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x!==J||V!==k)&&xg(a,p,r,k),ks=!1,V=a.memoizedState,p.state=V,ir(a,r,p,d),sr();var $=a.memoizedState;x!==J||V!==$||ks||e!==null&&e.dependencies!==null&&Dl(e.dependencies)?(typeof S=="function"&&(jd(a,i,S,r),$=a.memoizedState),(W=ks||vg(a,i,W,r,V,$,k)||e!==null&&e.dependencies!==null&&Dl(e.dependencies))?(L||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(r,$,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(r,$,k)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||x===e.memoizedProps&&V===e.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&V===e.memoizedState||(a.flags|=1024),a.memoizedProps=r,a.memoizedState=$),p.props=r,p.state=$,p.context=k,r=W):(typeof p.componentDidUpdate!="function"||x===e.memoizedProps&&V===e.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&V===e.memoizedState||(a.flags|=1024),r=!1)}return p=r,Zl(e,a),r=(a.flags&128)!==0,p||r?(p=a.stateNode,i=r&&typeof i.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,e!==null&&r?(a.child=di(a,e.child,null,d),a.child=di(a,null,i,d)):wn(e,a,i,d),a.memoizedState=p.state,e=a.child):e=Za(e,a,d),e}function Bg(e,a,i,r){return ii(),a.flags|=256,wn(e,a,i,r),a.child}var Ed={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rd(e){return{baseLanes:e,cachePool:wm()}}function Nd(e,a,i){return e=e!==null?e.childLanes&~i:0,a&&(e|=Zn),e}function zg(e,a,i){var r=a.pendingProps,d=!1,p=(a.flags&128)!==0,x;if((x=p)||(x=e!==null&&e.memoizedState===null?!1:(en.current&2)!==0),x&&(d=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,e===null){if(st){if(d?Es(a):Rs(),(e=Rt)?(e=Fy(e,ra),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:ws!==null?{id:Ra,overflow:Na}:null,retryLane:536870912,hydrationErrors:null},i=hm(e),i.return=a,a.child=i,Sn=a,Rt=null)):e=null,e===null)throw js(a);return mf(e)?a.lanes=32:a.lanes=536870912,null}var S=r.children;return r=r.fallback,d?(Rs(),d=a.mode,S=Jl({mode:"hidden",children:S},d),r=si(r,d,i,null),S.return=a,r.return=a,S.sibling=r,a.child=S,r=a.child,r.memoizedState=Rd(i),r.childLanes=Nd(e,x,i),a.memoizedState=Ed,ur(null,r)):(Es(a),Dd(a,S))}var k=e.memoizedState;if(k!==null&&(S=k.dehydrated,S!==null)){if(p)a.flags&256?(Es(a),a.flags&=-257,a=Bd(e,a,i)):a.memoizedState!==null?(Rs(),a.child=e.child,a.flags|=128,a=null):(Rs(),S=r.fallback,d=a.mode,r=Jl({mode:"visible",children:r.children},d),S=si(S,d,i,null),S.flags|=2,r.return=a,S.return=a,r.sibling=S,a.child=r,di(a,e.child,null,i),r=a.child,r.memoizedState=Rd(i),r.childLanes=Nd(e,x,i),a.memoizedState=Ed,a=ur(null,r));else if(Es(a),mf(S)){if(x=S.nextSibling&&S.nextSibling.dataset,x)var L=x.dgst;x=L,r=Error(o(419)),r.stack="",r.digest=x,Zo({value:r,source:null,stack:null}),a=Bd(e,a,i)}else if(ln||qi(e,a,i,!1),x=(i&e.childLanes)!==0,ln||x){if(x=Tt,x!==null&&(r=ct(x,i),r!==0&&r!==k.retryLane))throw k.retryLane=r,ai(e,r),Pn(x,e,r),Ad;hf(S)||lc(),a=Bd(e,a,i)}else hf(S)?(a.flags|=192,a.child=e.child,a=null):(e=k.treeContext,Rt=ca(S.nextSibling),Sn=a,st=!0,Cs=null,ra=!1,e!==null&&ym(a,e),a=Dd(a,r.children),a.flags|=4096);return a}return d?(Rs(),S=r.fallback,d=a.mode,k=e.child,L=k.sibling,r=Ga(k,{mode:"hidden",children:r.children}),r.subtreeFlags=k.subtreeFlags&65011712,L!==null?S=Ga(L,S):(S=si(S,d,i,null),S.flags|=2),S.return=a,r.return=a,r.sibling=S,a.child=r,ur(null,r),r=a.child,S=e.child.memoizedState,S===null?S=Rd(i):(d=S.cachePool,d!==null?(k=on._currentValue,d=d.parent!==k?{parent:k,pool:k}:d):d=wm(),S={baseLanes:S.baseLanes|i,cachePool:d}),r.memoizedState=S,r.childLanes=Nd(e,x,i),a.memoizedState=Ed,ur(e.child,r)):(Es(a),i=e.child,e=i.sibling,i=Ga(i,{mode:"visible",children:r.children}),i.return=a,i.sibling=null,e!==null&&(x=a.deletions,x===null?(a.deletions=[e],a.flags|=16):x.push(e)),a.child=i,a.memoizedState=null,i)}function Dd(e,a){return a=Jl({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function Jl(e,a){return e=Wn(22,e,null,a),e.lanes=0,e}function Bd(e,a,i){return di(a,e.child,null,i),e=Dd(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function Ug(e,a,i){e.lanes|=a;var r=e.alternate;r!==null&&(r.lanes|=a),Xu(e.return,a,i)}function zd(e,a,i,r,d,p){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:d,treeForkCount:p}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=r,x.tail=i,x.tailMode=d,x.treeForkCount=p)}function Ig(e,a,i){var r=a.pendingProps,d=r.revealOrder,p=r.tail;r=r.children;var x=en.current,S=(x&2)!==0;if(S?(x=x&1|2,a.flags|=128):x&=1,Ce(en,x),wn(e,a,r,i),r=st?Qo:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ug(e,i,a);else if(e.tag===19)Ug(e,i,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(i=a.child,d=null;i!==null;)e=i.alternate,e!==null&&Hl(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=a.child,a.child=null):(d=i.sibling,i.sibling=null),zd(a,!1,d,i,p,r);break;case"backwards":case"unstable_legacy-backwards":for(i=null,d=a.child,a.child=null;d!==null;){if(e=d.alternate,e!==null&&Hl(e)===null){a.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}zd(a,!0,i,null,p,r);break;case"together":zd(a,!1,null,null,void 0,r);break;default:a.memoizedState=null}return a.child}function Za(e,a,i){if(e!==null&&(a.dependencies=e.dependencies),Bs|=a.lanes,(i&a.childLanes)===0)if(e!==null){if(qi(e,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(o(153));if(a.child!==null){for(e=a.child,i=Ga(e,e.pendingProps),a.child=i,i.return=a;e.sibling!==null;)e=e.sibling,i=i.sibling=Ga(e,e.pendingProps),i.return=a;i.sibling=null}return a.child}function Ud(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&Dl(e)))}function a_(e,a,i){switch(a.tag){case 3:jt(a,a.stateNode.containerInfo),Ts(a,on,e.memoizedState.cache),ii();break;case 27:case 5:Xe(a);break;case 4:jt(a,a.stateNode.containerInfo);break;case 10:Ts(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,rd(a),null;break;case 13:var r=a.memoizedState;if(r!==null)return r.dehydrated!==null?(Es(a),a.flags|=128,null):(i&a.child.childLanes)!==0?zg(e,a,i):(Es(a),e=Za(e,a,i),e!==null?e.sibling:null);Es(a);break;case 19:var d=(e.flags&128)!==0;if(r=(i&a.childLanes)!==0,r||(qi(e,a,i,!1),r=(i&a.childLanes)!==0),d){if(r)return Ig(e,a,i);a.flags|=128}if(d=a.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(en,en.current),r)break;return null;case 22:return a.lanes=0,Mg(e,a,i,a.pendingProps);case 24:Ts(a,on,e.memoizedState.cache)}return Za(e,a,i)}function Og(e,a,i){if(e!==null)if(e.memoizedProps!==a.pendingProps)ln=!0;else{if(!Ud(e,i)&&(a.flags&128)===0)return ln=!1,a_(e,a,i);ln=(e.flags&131072)!==0}else ln=!1,st&&(a.flags&1048576)!==0&&gm(a,Qo,a.index);switch(a.lanes=0,a.tag){case 16:e:{var r=a.pendingProps;if(e=ci(a.elementType),a.type=e,typeof e=="function")Hu(e)?(r=pi(e,r),a.tag=1,a=Dg(null,a,e,r,i)):(a.tag=0,a=Md(null,a,e,r,i));else{if(e!=null){var d=e.$$typeof;if(d===U){a.tag=11,a=Tg(null,a,e,r,i);break e}else if(d===re){a.tag=14,a=kg(null,a,e,r,i);break e}}throw a=Re(e)||e,Error(o(306,a,""))}}return a;case 0:return Md(e,a,a.type,a.pendingProps,i);case 1:return r=a.type,d=pi(r,a.pendingProps),Dg(e,a,r,d,i);case 3:e:{if(jt(a,a.stateNode.containerInfo),e===null)throw Error(o(387));r=a.pendingProps;var p=a.memoizedState;d=p.element,nd(e,a),ir(a,r,null,i);var x=a.memoizedState;if(r=x.cache,Ts(a,on,r),r!==p.cache&&Ku(a,[on],i,!0),sr(),r=x.element,p.isDehydrated)if(p={element:r,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=Bg(e,a,r,i);break e}else if(r!==d){d=sa(Error(o(424)),a),Zo(d),a=Bg(e,a,r,i);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Rt=ca(e.firstChild),Sn=a,st=!0,Cs=null,ra=!0,i=Mm(a,null,r,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ii(),r===d){a=Za(e,a,i);break e}wn(e,a,r,i)}a=a.child}return a;case 26:return Zl(e,a),e===null?(i=Xy(a.type,null,a.pendingProps,null))?a.memoizedState=i:st||(i=a.type,e=a.pendingProps,r=mc(de.current).createElement(i),r[Jt]=a,r[xn]=e,Cn(r,i,e),sn(r),a.stateNode=r):a.memoizedState=Xy(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return Xe(a),e===null&&st&&(r=a.stateNode=Gy(a.type,a.pendingProps,de.current),Sn=a,ra=!0,d=Rt,Ls(a.type)?(gf=d,Rt=ca(r.firstChild)):Rt=d),wn(e,a,a.pendingProps.children,i),Zl(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&st&&((d=r=Rt)&&(r=D_(r,a.type,a.pendingProps,ra),r!==null?(a.stateNode=r,Sn=a,Rt=ca(r.firstChild),ra=!1,d=!0):d=!1),d||js(a)),Xe(a),d=a.type,p=a.pendingProps,x=e!==null?e.memoizedProps:null,r=p.children,df(d,p)?r=null:x!==null&&df(d,x)&&(a.flags|=32),a.memoizedState!==null&&(d=cd(e,a,WS,null,null,i),jr._currentValue=d),Zl(e,a),wn(e,a,r,i),a.child;case 6:return e===null&&st&&((e=i=Rt)&&(i=B_(i,a.pendingProps,ra),i!==null?(a.stateNode=i,Sn=a,Rt=null,e=!0):e=!1),e||js(a)),null;case 13:return zg(e,a,i);case 4:return jt(a,a.stateNode.containerInfo),r=a.pendingProps,e===null?a.child=di(a,null,r,i):wn(e,a,r,i),a.child;case 11:return Tg(e,a,a.type,a.pendingProps,i);case 7:return wn(e,a,a.pendingProps,i),a.child;case 8:return wn(e,a,a.pendingProps.children,i),a.child;case 12:return wn(e,a,a.pendingProps.children,i),a.child;case 10:return r=a.pendingProps,Ts(a,a.type,r.value),wn(e,a,r.children,i),a.child;case 9:return d=a.type._context,r=a.pendingProps.children,ri(a),d=_n(d),r=r(d),a.flags|=1,wn(e,a,r,i),a.child;case 14:return kg(e,a,a.type,a.pendingProps,i);case 15:return Ag(e,a,a.type,a.pendingProps,i);case 19:return Ig(e,a,i);case 31:return n_(e,a,i);case 22:return Mg(e,a,i,a.pendingProps);case 24:return ri(a),r=_n(on),e===null?(d=Ju(),d===null&&(d=Tt,p=Qu(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=i),d=p),a.memoizedState={parent:r,cache:d},td(a),Ts(a,on,d)):((e.lanes&i)!==0&&(nd(e,a),ir(a,null,null,i),sr()),d=e.memoizedState,p=a.memoizedState,d.parent!==r?(d={parent:r,cache:r},a.memoizedState=d,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=d),Ts(a,on,r)):(r=p.cache,Ts(a,on,r),r!==d.cache&&Ku(a,[on],i,!0))),wn(e,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function Ja(e){e.flags|=4}function Id(e,a,i,r,d){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(dy())e.flags|=8192;else throw ui=Il,ed}else e.flags&=-16777217}function Lg(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ev(a))if(dy())e.flags|=8192;else throw ui=Il,ed}function ec(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?_e():536870912,e.lanes|=a,ao|=a)}function dr(e,a){if(!st)switch(e.tailMode){case"hidden":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Nt(e){var a=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(a)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,r|=d.subtreeFlags&65011712,r|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,r|=d.subtreeFlags,r|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=r,e.childLanes=i,a}function s_(e,a,i){var r=a.pendingProps;switch(qu(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(a),null;case 1:return Nt(a),null;case 3:return i=a.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Xa(on),Ot(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&($i(a)?Ja(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Yu())),Nt(a),null;case 26:var d=a.type,p=a.memoizedState;return e===null?(Ja(a),p!==null?(Nt(a),Lg(a,p)):(Nt(a),Id(a,d,null,r,i))):p?p!==e.memoizedState?(Ja(a),Nt(a),Lg(a,p)):(Nt(a),a.flags&=-16777217):(e=e.memoizedProps,e!==r&&Ja(a),Nt(a),Id(a,d,e,r,i)),null;case 27:if(qt(a),i=de.current,d=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==r&&Ja(a);else{if(!r){if(a.stateNode===null)throw Error(o(166));return Nt(a),null}e=te.current,$i(a)?vm(a):(e=Gy(d,r,i),a.stateNode=e,Ja(a))}return Nt(a),null;case 5:if(qt(a),d=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==r&&Ja(a);else{if(!r){if(a.stateNode===null)throw Error(o(166));return Nt(a),null}if(p=te.current,$i(a))vm(a);else{var x=mc(de.current);switch(p){case 1:p=x.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=x.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=x.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=x.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=x.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof r.is=="string"?x.createElement("select",{is:r.is}):x.createElement("select"),r.multiple?p.multiple=!0:r.size&&(p.size=r.size);break;default:p=typeof r.is=="string"?x.createElement(d,{is:r.is}):x.createElement(d)}}p[Jt]=a,p[xn]=r;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)p.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=p;e:switch(Cn(p,d,r),d){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Ja(a)}}return Nt(a),Id(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,i),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==r&&Ja(a);else{if(typeof r!="string"&&a.stateNode===null)throw Error(o(166));if(e=de.current,$i(a)){if(e=a.stateNode,i=a.memoizedProps,r=null,d=Sn,d!==null)switch(d.tag){case 27:case 5:r=d.memoizedProps}e[Jt]=a,e=!!(e.nodeValue===i||r!==null&&r.suppressHydrationWarning===!0||zy(e.nodeValue,i)),e||js(a,!0)}else e=mc(e).createTextNode(r),e[Jt]=a,a.stateNode=e}return Nt(a),null;case 31:if(i=a.memoizedState,e===null||e.memoizedState!==null){if(r=$i(a),i!==null){if(e===null){if(!r)throw Error(o(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[Jt]=a}else ii(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Nt(a),e=!1}else i=Yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return a.flags&256?(Kn(a),a):(Kn(a),null);if((a.flags&128)!==0)throw Error(o(558))}return Nt(a),null;case 13:if(r=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=$i(a),r!==null&&r.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[Jt]=a}else ii(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Nt(a),d=!1}else d=Yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return a.flags&256?(Kn(a),a):(Kn(a),null)}return Kn(a),(a.flags&128)!==0?(a.lanes=i,a):(i=r!==null,e=e!==null&&e.memoizedState!==null,i&&(r=a.child,d=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(d=r.alternate.memoizedState.cachePool.pool),p=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(p=r.memoizedState.cachePool.pool),p!==d&&(r.flags|=2048)),i!==e&&i&&(a.child.flags|=8192),ec(a,a.updateQueue),Nt(a),null);case 4:return Ot(),e===null&&of(a.stateNode.containerInfo),Nt(a),null;case 10:return Xa(a.type),Nt(a),null;case 19:if(Ne(en),r=a.memoizedState,r===null)return Nt(a),null;if(d=(a.flags&128)!==0,p=r.rendering,p===null)if(d)dr(r,!1);else{if(Wt!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(p=Hl(e),p!==null){for(a.flags|=128,dr(r,!1),e=p.updateQueue,a.updateQueue=e,ec(a,e),a.subtreeFlags=0,e=i,i=a.child;i!==null;)pm(i,e),i=i.sibling;return Ce(en,en.current&1|2),st&&Ya(a,r.treeForkCount),a.child}e=e.sibling}r.tail!==null&&ie()>ic&&(a.flags|=128,d=!0,dr(r,!1),a.lanes=4194304)}else{if(!d)if(e=Hl(p),e!==null){if(a.flags|=128,d=!0,e=e.updateQueue,a.updateQueue=e,ec(a,e),dr(r,!0),r.tail===null&&r.tailMode==="hidden"&&!p.alternate&&!st)return Nt(a),null}else 2*ie()-r.renderingStartTime>ic&&i!==536870912&&(a.flags|=128,d=!0,dr(r,!1),a.lanes=4194304);r.isBackwards?(p.sibling=a.child,a.child=p):(e=r.last,e!==null?e.sibling=p:a.child=p,r.last=p)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ie(),e.sibling=null,i=en.current,Ce(en,d?i&1|2:i&1),st&&Ya(a,r.treeForkCount),e):(Nt(a),null);case 22:case 23:return Kn(a),od(),r=a.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(a.flags|=8192):r&&(a.flags|=8192),r?(i&536870912)!==0&&(a.flags&128)===0&&(Nt(a),a.subtreeFlags&6&&(a.flags|=8192)):Nt(a),i=a.updateQueue,i!==null&&ec(a,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==i&&(a.flags|=2048),e!==null&&Ne(li),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),Xa(on),Nt(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function i_(e,a){switch(qu(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return Xa(on),Ot(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return qt(a),null;case 31:if(a.memoizedState!==null){if(Kn(a),a.alternate===null)throw Error(o(340));ii()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(Kn(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(o(340));ii()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return Ne(en),null;case 4:return Ot(),null;case 10:return Xa(a.type),null;case 22:case 23:return Kn(a),od(),e!==null&&Ne(li),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return Xa(on),null;case 25:return null;default:return null}}function Pg(e,a){switch(qu(a),a.tag){case 3:Xa(on),Ot();break;case 26:case 27:case 5:qt(a);break;case 4:Ot();break;case 31:a.memoizedState!==null&&Kn(a);break;case 13:Kn(a);break;case 19:Ne(en);break;case 10:Xa(a.type);break;case 22:case 23:Kn(a),od(),e!==null&&Ne(li);break;case 24:Xa(on)}}function fr(e,a){try{var i=a.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var d=r.next;i=d;do{if((i.tag&e)===e){r=void 0;var p=i.create,x=i.inst;r=p(),x.destroy=r}i=i.next}while(i!==d)}}catch(S){vt(a,a.return,S)}}function Ns(e,a,i){try{var r=a.updateQueue,d=r!==null?r.lastEffect:null;if(d!==null){var p=d.next;r=p;do{if((r.tag&e)===e){var x=r.inst,S=x.destroy;if(S!==void 0){x.destroy=void 0,d=a;var k=i,L=S;try{L()}catch(W){vt(d,k,W)}}}r=r.next}while(r!==p)}}catch(W){vt(a,a.return,W)}}function Hg(e){var a=e.updateQueue;if(a!==null){var i=e.stateNode;try{Rm(a,i)}catch(r){vt(e,e.return,r)}}}function Vg(e,a,i){i.props=pi(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(r){vt(e,a,r)}}function pr(e,a){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof i=="function"?e.refCleanup=i(r):i.current=r}}catch(d){vt(e,a,d)}}function Da(e,a){var i=e.ref,r=e.refCleanup;if(i!==null)if(typeof r=="function")try{r()}catch(d){vt(e,a,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(d){vt(e,a,d)}else i.current=null}function Fg(e){var a=e.type,i=e.memoizedProps,r=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break e;case"img":i.src?r.src=i.src:i.srcSet&&(r.srcset=i.srcSet)}}catch(d){vt(e,e.return,d)}}function Od(e,a,i){try{var r=e.stateNode;k_(r,e.type,i,a),r[xn]=a}catch(d){vt(e,e.return,d)}}function $g(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ls(e.type)||e.tag===4}function Ld(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$g(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ls(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pd(e,a,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,a?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,a):(a=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.appendChild(e),i=i._reactRootContainer,i!=null||a.onclick!==null||(a.onclick=Y));else if(r!==4&&(r===27&&Ls(e.type)&&(i=e.stateNode,a=null),e=e.child,e!==null))for(Pd(e,a,i),e=e.sibling;e!==null;)Pd(e,a,i),e=e.sibling}function tc(e,a,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,a?i.insertBefore(e,a):i.appendChild(e);else if(r!==4&&(r===27&&Ls(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(tc(e,a,i),e=e.sibling;e!==null;)tc(e,a,i),e=e.sibling}function qg(e){var a=e.stateNode,i=e.memoizedProps;try{for(var r=e.type,d=a.attributes;d.length;)a.removeAttributeNode(d[0]);Cn(a,r,i),a[Jt]=e,a[xn]=i}catch(p){vt(e,e.return,p)}}var es=!1,cn=!1,Hd=!1,Gg=typeof WeakSet=="function"?WeakSet:Set,gn=null;function o_(e,a){if(e=e.containerInfo,cf=_c,e=sm(e),Bu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var d=r.anchorOffset,p=r.focusNode;r=r.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var x=0,S=-1,k=-1,L=0,W=0,J=e,V=null;t:for(;;){for(var $;J!==i||d!==0&&J.nodeType!==3||(S=x+d),J!==p||r!==0&&J.nodeType!==3||(k=x+r),J.nodeType===3&&(x+=J.nodeValue.length),($=J.firstChild)!==null;)V=J,J=$;for(;;){if(J===e)break t;if(V===i&&++L===d&&(S=x),V===p&&++W===r&&(k=x),($=J.nextSibling)!==null)break;J=V,V=J.parentNode}J=$}i=S===-1||k===-1?null:{start:S,end:k}}else i=null}i=i||{start:0,end:0}}else i=null;for(uf={focusedElem:e,selectionRange:i},_c=!1,gn=a;gn!==null;)if(a=gn,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,gn=e;else for(;gn!==null;){switch(a=gn,p=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)d=e[i],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,i=a,d=p.memoizedProps,p=p.memoizedState,r=i.stateNode;try{var be=pi(i.type,d);e=r.getSnapshotBeforeUpdate(be,p),r.__reactInternalSnapshotBeforeUpdate=e}catch(Ie){vt(i,i.return,Ie)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,i=e.nodeType,i===9)pf(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=a.sibling,e!==null){e.return=a.return,gn=e;break}gn=a.return}}function Yg(e,a,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:ns(e,i),r&4&&fr(5,i);break;case 1:if(ns(e,i),r&4)if(e=i.stateNode,a===null)try{e.componentDidMount()}catch(x){vt(i,i.return,x)}else{var d=pi(i.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(d,a,e.__reactInternalSnapshotBeforeUpdate)}catch(x){vt(i,i.return,x)}}r&64&&Hg(i),r&512&&pr(i,i.return);break;case 3:if(ns(e,i),r&64&&(e=i.updateQueue,e!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}try{Rm(e,a)}catch(x){vt(i,i.return,x)}}break;case 27:a===null&&r&4&&qg(i);case 26:case 5:ns(e,i),a===null&&r&4&&Fg(i),r&512&&pr(i,i.return);break;case 12:ns(e,i);break;case 31:ns(e,i),r&4&&Kg(e,i);break;case 13:ns(e,i),r&4&&Qg(e,i),r&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=m_.bind(null,i),z_(e,i))));break;case 22:if(r=i.memoizedState!==null||es,!r){a=a!==null&&a.memoizedState!==null||cn,d=es;var p=cn;es=r,(cn=a)&&!p?as(e,i,(i.subtreeFlags&8772)!==0):ns(e,i),es=d,cn=p}break;case 30:break;default:ns(e,i)}}function Wg(e){var a=e.alternate;a!==null&&(e.alternate=null,Wg(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&Zs(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var zt=null,Un=!1;function ts(e,a,i){for(i=i.child;i!==null;)Xg(e,a,i),i=i.sibling}function Xg(e,a,i){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(Te,i)}catch{}switch(i.tag){case 26:cn||Da(i,a),ts(e,a,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:cn||Da(i,a);var r=zt,d=Un;Ls(i.type)&&(zt=i.stateNode,Un=!1),ts(e,a,i),_r(i.stateNode),zt=r,Un=d;break;case 5:cn||Da(i,a);case 6:if(r=zt,d=Un,zt=null,ts(e,a,i),zt=r,Un=d,zt!==null)if(Un)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(i.stateNode)}catch(p){vt(i,a,p)}else try{zt.removeChild(i.stateNode)}catch(p){vt(i,a,p)}break;case 18:zt!==null&&(Un?(e=zt,Hy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),fo(e)):Hy(zt,i.stateNode));break;case 4:r=zt,d=Un,zt=i.stateNode.containerInfo,Un=!0,ts(e,a,i),zt=r,Un=d;break;case 0:case 11:case 14:case 15:Ns(2,i,a),cn||Ns(4,i,a),ts(e,a,i);break;case 1:cn||(Da(i,a),r=i.stateNode,typeof r.componentWillUnmount=="function"&&Vg(i,a,r)),ts(e,a,i);break;case 21:ts(e,a,i);break;case 22:cn=(r=cn)||i.memoizedState!==null,ts(e,a,i),cn=r;break;default:ts(e,a,i)}}function Kg(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{fo(e)}catch(i){vt(a,a.return,i)}}}function Qg(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{fo(e)}catch(i){vt(a,a.return,i)}}function r_(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new Gg),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new Gg),a;default:throw Error(o(435,e.tag))}}function nc(e,a){var i=r_(e);a.forEach(function(r){if(!i.has(r)){i.add(r);var d=g_.bind(null,e,r);r.then(d,d)}})}function In(e,a){var i=a.deletions;if(i!==null)for(var r=0;r<i.length;r++){var d=i[r],p=e,x=a,S=x;e:for(;S!==null;){switch(S.tag){case 27:if(Ls(S.type)){zt=S.stateNode,Un=!1;break e}break;case 5:zt=S.stateNode,Un=!1;break e;case 3:case 4:zt=S.stateNode.containerInfo,Un=!0;break e}S=S.return}if(zt===null)throw Error(o(160));Xg(p,x,d),zt=null,Un=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Zg(a,e),a=a.sibling}var Sa=null;function Zg(e,a){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:In(a,e),On(e),r&4&&(Ns(3,e,e.return),fr(3,e),Ns(5,e,e.return));break;case 1:In(a,e),On(e),r&512&&(cn||i===null||Da(i,i.return)),r&64&&es&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?r:i.concat(r))));break;case 26:var d=Sa;if(In(a,e),On(e),r&512&&(cn||i===null||Da(i,i.return)),r&4){var p=i!==null?i.memoizedState:null;if(r=e.memoizedState,i===null)if(r===null)if(e.stateNode===null){e:{r=e.type,i=e.memoizedProps,d=d.ownerDocument||d;t:switch(r){case"title":p=d.getElementsByTagName("title")[0],(!p||p[ps]||p[Jt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(r),d.head.insertBefore(p,d.querySelector("head > title"))),Cn(p,r,i),p[Jt]=e,sn(p),r=p;break e;case"link":var x=Zy("link","href",d).get(r+(i.href||""));if(x){for(var S=0;S<x.length;S++)if(p=x[S],p.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&p.getAttribute("rel")===(i.rel==null?null:i.rel)&&p.getAttribute("title")===(i.title==null?null:i.title)&&p.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){x.splice(S,1);break t}}p=d.createElement(r),Cn(p,r,i),d.head.appendChild(p);break;case"meta":if(x=Zy("meta","content",d).get(r+(i.content||""))){for(S=0;S<x.length;S++)if(p=x[S],p.getAttribute("content")===(i.content==null?null:""+i.content)&&p.getAttribute("name")===(i.name==null?null:i.name)&&p.getAttribute("property")===(i.property==null?null:i.property)&&p.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&p.getAttribute("charset")===(i.charSet==null?null:i.charSet)){x.splice(S,1);break t}}p=d.createElement(r),Cn(p,r,i),d.head.appendChild(p);break;default:throw Error(o(468,r))}p[Jt]=e,sn(p),r=p}e.stateNode=r}else Jy(d,e.type,e.stateNode);else e.stateNode=Qy(d,r,e.memoizedProps);else p!==r?(p===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):p.count--,r===null?Jy(d,e.type,e.stateNode):Qy(d,r,e.memoizedProps)):r===null&&e.stateNode!==null&&Od(e,e.memoizedProps,i.memoizedProps)}break;case 27:In(a,e),On(e),r&512&&(cn||i===null||Da(i,i.return)),i!==null&&r&4&&Od(e,e.memoizedProps,i.memoizedProps);break;case 5:if(In(a,e),On(e),r&512&&(cn||i===null||Da(i,i.return)),e.flags&32){d=e.stateNode;try{xs(d,"")}catch(be){vt(e,e.return,be)}}r&4&&e.stateNode!=null&&(d=e.memoizedProps,Od(e,d,i!==null?i.memoizedProps:d)),r&1024&&(Hd=!0);break;case 6:if(In(a,e),On(e),r&4){if(e.stateNode===null)throw Error(o(162));r=e.memoizedProps,i=e.stateNode;try{i.nodeValue=r}catch(be){vt(e,e.return,be)}}break;case 3:if(vc=null,d=Sa,Sa=gc(a.containerInfo),In(a,e),Sa=d,On(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{fo(a.containerInfo)}catch(be){vt(e,e.return,be)}Hd&&(Hd=!1,Jg(e));break;case 4:r=Sa,Sa=gc(e.stateNode.containerInfo),In(a,e),On(e),Sa=r;break;case 12:In(a,e),On(e);break;case 31:In(a,e),On(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,nc(e,r)));break;case 13:In(a,e),On(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(sc=ie()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,nc(e,r)));break;case 22:d=e.memoizedState!==null;var k=i!==null&&i.memoizedState!==null,L=es,W=cn;if(es=L||d,cn=W||k,In(a,e),cn=W,es=L,On(e),r&8192)e:for(a=e.stateNode,a._visibility=d?a._visibility&-2:a._visibility|1,d&&(i===null||k||es||cn||hi(e)),i=null,a=e;;){if(a.tag===5||a.tag===26){if(i===null){k=i=a;try{if(p=k.stateNode,d)x=p.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{S=k.stateNode;var J=k.memoizedProps.style,V=J!=null&&J.hasOwnProperty("display")?J.display:null;S.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(be){vt(k,k.return,be)}}}else if(a.tag===6){if(i===null){k=a;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(be){vt(k,k.return,be)}}}else if(a.tag===18){if(i===null){k=a;try{var $=k.stateNode;d?Vy($,!0):Vy(k.stateNode,!1)}catch(be){vt(k,k.return,be)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}r&4&&(r=e.updateQueue,r!==null&&(i=r.retryQueue,i!==null&&(r.retryQueue=null,nc(e,i))));break;case 19:In(a,e),On(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,nc(e,r)));break;case 30:break;case 21:break;default:In(a,e),On(e)}}function On(e){var a=e.flags;if(a&2){try{for(var i,r=e.return;r!==null;){if($g(r)){i=r;break}r=r.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var d=i.stateNode,p=Ld(e);tc(e,p,d);break;case 5:var x=i.stateNode;i.flags&32&&(xs(x,""),i.flags&=-33);var S=Ld(e);tc(e,S,x);break;case 3:case 4:var k=i.stateNode.containerInfo,L=Ld(e);Pd(e,L,k);break;default:throw Error(o(161))}}catch(W){vt(e,e.return,W)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Jg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Jg(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function ns(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Yg(e,a.alternate,a),a=a.sibling}function hi(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:Ns(4,a,a.return),hi(a);break;case 1:Da(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&Vg(a,a.return,i),hi(a);break;case 27:_r(a.stateNode);case 26:case 5:Da(a,a.return),hi(a);break;case 22:a.memoizedState===null&&hi(a);break;case 30:hi(a);break;default:hi(a)}e=e.sibling}}function as(e,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var r=a.alternate,d=e,p=a,x=p.flags;switch(p.tag){case 0:case 11:case 15:as(d,p,i),fr(4,p);break;case 1:if(as(d,p,i),r=p,d=r.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(L){vt(r,r.return,L)}if(r=p,d=r.updateQueue,d!==null){var S=r.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)Em(k[d],S)}catch(L){vt(r,r.return,L)}}i&&x&64&&Hg(p),pr(p,p.return);break;case 27:qg(p);case 26:case 5:as(d,p,i),i&&r===null&&x&4&&Fg(p),pr(p,p.return);break;case 12:as(d,p,i);break;case 31:as(d,p,i),i&&x&4&&Kg(d,p);break;case 13:as(d,p,i),i&&x&4&&Qg(d,p);break;case 22:p.memoizedState===null&&as(d,p,i),pr(p,p.return);break;case 30:break;default:as(d,p,i)}a=a.sibling}}function Vd(e,a){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Jo(i))}function Fd(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Jo(e))}function _a(e,a,i,r){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ey(e,a,i,r),a=a.sibling}function ey(e,a,i,r){var d=a.flags;switch(a.tag){case 0:case 11:case 15:_a(e,a,i,r),d&2048&&fr(9,a);break;case 1:_a(e,a,i,r);break;case 3:_a(e,a,i,r),d&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Jo(e)));break;case 12:if(d&2048){_a(e,a,i,r),e=a.stateNode;try{var p=a.memoizedProps,x=p.id,S=p.onPostCommit;typeof S=="function"&&S(x,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){vt(a,a.return,k)}}else _a(e,a,i,r);break;case 31:_a(e,a,i,r);break;case 13:_a(e,a,i,r);break;case 23:break;case 22:p=a.stateNode,x=a.alternate,a.memoizedState!==null?p._visibility&2?_a(e,a,i,r):hr(e,a):p._visibility&2?_a(e,a,i,r):(p._visibility|=2,eo(e,a,i,r,(a.subtreeFlags&10256)!==0||!1)),d&2048&&Vd(x,a);break;case 24:_a(e,a,i,r),d&2048&&Fd(a.alternate,a);break;default:_a(e,a,i,r)}}function eo(e,a,i,r,d){for(d=d&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=e,x=a,S=i,k=r,L=x.flags;switch(x.tag){case 0:case 11:case 15:eo(p,x,S,k,d),fr(8,x);break;case 23:break;case 22:var W=x.stateNode;x.memoizedState!==null?W._visibility&2?eo(p,x,S,k,d):hr(p,x):(W._visibility|=2,eo(p,x,S,k,d)),d&&L&2048&&Vd(x.alternate,x);break;case 24:eo(p,x,S,k,d),d&&L&2048&&Fd(x.alternate,x);break;default:eo(p,x,S,k,d)}a=a.sibling}}function hr(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=e,r=a,d=r.flags;switch(r.tag){case 22:hr(i,r),d&2048&&Vd(r.alternate,r);break;case 24:hr(i,r),d&2048&&Fd(r.alternate,r);break;default:hr(i,r)}a=a.sibling}}var mr=8192;function to(e,a,i){if(e.subtreeFlags&mr)for(e=e.child;e!==null;)ty(e,a,i),e=e.sibling}function ty(e,a,i){switch(e.tag){case 26:to(e,a,i),e.flags&mr&&e.memoizedState!==null&&Y_(i,Sa,e.memoizedState,e.memoizedProps);break;case 5:to(e,a,i);break;case 3:case 4:var r=Sa;Sa=gc(e.stateNode.containerInfo),to(e,a,i),Sa=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=mr,mr=16777216,to(e,a,i),mr=r):to(e,a,i));break;default:to(e,a,i)}}function ny(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function gr(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var r=a[i];gn=r,sy(r,e)}ny(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ay(e),e=e.sibling}function ay(e){switch(e.tag){case 0:case 11:case 15:gr(e),e.flags&2048&&Ns(9,e,e.return);break;case 3:gr(e);break;case 12:gr(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,ac(e)):gr(e);break;default:gr(e)}}function ac(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var r=a[i];gn=r,sy(r,e)}ny(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:Ns(8,a,a.return),ac(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,ac(a));break;default:ac(a)}e=e.sibling}}function sy(e,a){for(;gn!==null;){var i=gn;switch(i.tag){case 0:case 11:case 15:Ns(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var r=i.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Jo(i.memoizedState.cache)}if(r=i.child,r!==null)r.return=i,gn=r;else e:for(i=e;gn!==null;){r=gn;var d=r.sibling,p=r.return;if(Wg(r),r===i){gn=null;break e}if(d!==null){d.return=p,gn=d;break e}gn=p}}}var l_={getCacheForType:function(e){var a=_n(on),i=a.data.get(e);return i===void 0&&(i=e(),a.data.set(e,i)),i},cacheSignal:function(){return _n(on).controller.signal}},c_=typeof WeakMap=="function"?WeakMap:Map,ht=0,Tt=null,Je=null,nt=0,yt=0,Qn=null,Ds=!1,no=!1,$d=!1,ss=0,Wt=0,Bs=0,mi=0,qd=0,Zn=0,ao=0,yr=null,Ln=null,Gd=!1,sc=0,iy=0,ic=1/0,oc=null,zs=null,pn=0,Us=null,so=null,is=0,Yd=0,Wd=null,oy=null,vr=0,Xd=null;function Jn(){return(ht&2)!==0&&nt!==0?nt&-nt:z.T!==null?tf():Pt()}function ry(){if(Zn===0)if((nt&536870912)===0||st){var e=ga;ga<<=1,(ga&3932160)===0&&(ga=262144),Zn=e}else Zn=536870912;return e=Xn.current,e!==null&&(e.flags|=32),Zn}function Pn(e,a,i){(e===Tt&&(yt===2||yt===9)||e.cancelPendingCommit!==null)&&(io(e,0),Is(e,nt,Zn,!1)),Ve(e,i),((ht&2)===0||e!==Tt)&&(e===Tt&&((ht&2)===0&&(mi|=i),Wt===4&&Is(e,nt,Zn,!1)),Ba(e))}function ly(e,a,i){if((ht&6)!==0)throw Error(o(327));var r=!i&&(a&127)===0&&(a&e.expiredLanes)===0||ye(e,a),d=r?f_(e,a):Qd(e,a,!0),p=r;do{if(d===0){no&&!r&&Is(e,a,0,!1);break}else{if(i=e.current.alternate,p&&!u_(i)){d=Qd(e,a,!1),p=!1;continue}if(d===2){if(p=a,e.errorRecoveryDisabledLanes&p)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var S=e;d=yr;var k=S.current.memoizedState.isDehydrated;if(k&&(io(S,x).flags|=256),x=Qd(S,x,!1),x!==2){if($d&&!k){S.errorRecoveryDisabledLanes|=p,mi|=p,d=4;break e}p=Ln,Ln=d,p!==null&&(Ln===null?Ln=p:Ln.push.apply(Ln,p))}d=x}if(p=!1,d!==2)continue}}if(d===1){io(e,0),Is(e,a,0,!0);break}e:{switch(r=e,p=d,p){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:Is(r,a,Zn,!Ds);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(d=sc+300-ie(),10<d)){if(Is(r,a,Zn,!Ds),oe(r,0,!0)!==0)break e;is=a,r.timeoutHandle=Ly(cy.bind(null,r,i,Ln,oc,Gd,a,Zn,mi,ao,Ds,p,"Throttled",-0,0),d);break e}cy(r,i,Ln,oc,Gd,a,Zn,mi,ao,Ds,p,null,-0,0)}}break}while(!0);Ba(e)}function cy(e,a,i,r,d,p,x,S,k,L,W,J,V,$){if(e.timeoutHandle=-1,J=a.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Y},ty(a,p,J);var be=(p&62914560)===p?sc-ie():(p&4194048)===p?iy-ie():0;if(be=W_(J,be),be!==null){is=p,e.cancelPendingCommit=be(yy.bind(null,e,a,p,i,r,d,x,S,k,W,J,null,V,$)),Is(e,p,x,!L);return}}yy(e,a,p,i,r,d,x,S,k)}function u_(e){for(var a=e;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var r=0;r<i.length;r++){var d=i[r],p=d.getSnapshot;d=d.value;try{if(!Yn(p(),d))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Is(e,a,i,r){a&=~qd,a&=~mi,e.suspendedLanes|=a,e.pingedLanes&=~a,r&&(e.warmLanes|=a),r=e.expirationTimes;for(var d=a;0<d;){var p=31-gt(d),x=1<<p;r[p]=-1,d&=~x}i!==0&&it(e,i,a)}function rc(){return(ht&6)===0?(xr(0),!1):!0}function Kd(){if(Je!==null){if(yt===0)var e=Je.return;else e=Je,Wa=oi=null,fd(e),Xi=null,tr=0,e=Je;for(;e!==null;)Pg(e.alternate,e),e=e.return;Je=null}}function io(e,a){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,E_(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),is=0,Kd(),Tt=e,Je=i=Ga(e.current,null),nt=a,yt=0,Qn=null,Ds=!1,no=ye(e,a),$d=!1,ao=Zn=qd=mi=Bs=Wt=0,Ln=yr=null,Gd=!1,(a&8)!==0&&(a|=a&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=a;0<r;){var d=31-gt(r),p=1<<d;a|=e[d],r&=~p}return ss=a,Al(),i}function uy(e,a){Ye=null,z.H=cr,a===Wi||a===Ul?(a=Tm(),yt=3):a===ed?(a=Tm(),yt=4):yt=a===Ad?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Qn=a,Je===null&&(Wt=1,Kl(e,sa(a,e.current)))}function dy(){var e=Xn.current;return e===null?!0:(nt&4194048)===nt?la===null:(nt&62914560)===nt||(nt&536870912)!==0?e===la:!1}function fy(){var e=z.H;return z.H=cr,e===null?cr:e}function py(){var e=z.A;return z.A=l_,e}function lc(){Wt=4,Ds||(nt&4194048)!==nt&&Xn.current!==null||(no=!0),(Bs&134217727)===0&&(mi&134217727)===0||Tt===null||Is(Tt,nt,Zn,!1)}function Qd(e,a,i){var r=ht;ht|=2;var d=fy(),p=py();(Tt!==e||nt!==a)&&(oc=null,io(e,a)),a=!1;var x=Wt;e:do try{if(yt!==0&&Je!==null){var S=Je,k=Qn;switch(yt){case 8:Kd(),x=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(a=!0);var L=yt;if(yt=0,Qn=null,oo(e,S,k,L),i&&no){x=0;break e}break;default:L=yt,yt=0,Qn=null,oo(e,S,k,L)}}d_(),x=Wt;break}catch(W){uy(e,W)}while(!0);return a&&e.shellSuspendCounter++,Wa=oi=null,ht=r,z.H=d,z.A=p,Je===null&&(Tt=null,nt=0,Al()),x}function d_(){for(;Je!==null;)hy(Je)}function f_(e,a){var i=ht;ht|=2;var r=fy(),d=py();Tt!==e||nt!==a?(oc=null,ic=ie()+500,io(e,a)):no=ye(e,a);e:do try{if(yt!==0&&Je!==null){a=Je;var p=Qn;t:switch(yt){case 1:yt=0,Qn=null,oo(e,a,p,1);break;case 2:case 9:if(Cm(p)){yt=0,Qn=null,my(a);break}a=function(){yt!==2&&yt!==9||Tt!==e||(yt=7),Ba(e)},p.then(a,a);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:Cm(p)?(yt=0,Qn=null,my(a)):(yt=0,Qn=null,oo(e,a,p,7));break;case 5:var x=null;switch(Je.tag){case 26:x=Je.memoizedState;case 5:case 27:var S=Je;if(x?ev(x):S.stateNode.complete){yt=0,Qn=null;var k=S.sibling;if(k!==null)Je=k;else{var L=S.return;L!==null?(Je=L,cc(L)):Je=null}break t}}yt=0,Qn=null,oo(e,a,p,5);break;case 6:yt=0,Qn=null,oo(e,a,p,6);break;case 8:Kd(),Wt=6;break e;default:throw Error(o(462))}}p_();break}catch(W){uy(e,W)}while(!0);return Wa=oi=null,z.H=r,z.A=d,ht=i,Je!==null?0:(Tt=null,nt=0,Al(),Wt)}function p_(){for(;Je!==null&&!an();)hy(Je)}function hy(e){var a=Og(e.alternate,e,ss);e.memoizedProps=e.pendingProps,a===null?cc(e):Je=a}function my(e){var a=e,i=a.alternate;switch(a.tag){case 15:case 0:a=Ng(i,a,a.pendingProps,a.type,void 0,nt);break;case 11:a=Ng(i,a,a.pendingProps,a.type.render,a.ref,nt);break;case 5:fd(a);default:Pg(i,a),a=Je=pm(a,ss),a=Og(i,a,ss)}e.memoizedProps=e.pendingProps,a===null?cc(e):Je=a}function oo(e,a,i,r){Wa=oi=null,fd(a),Xi=null,tr=0;var d=a.return;try{if(t_(e,d,a,i,nt)){Wt=1,Kl(e,sa(i,e.current)),Je=null;return}}catch(p){if(d!==null)throw Je=d,p;Wt=1,Kl(e,sa(i,e.current)),Je=null;return}a.flags&32768?(st||r===1?e=!0:no||(nt&536870912)!==0?e=!1:(Ds=e=!0,(r===2||r===9||r===3||r===6)&&(r=Xn.current,r!==null&&r.tag===13&&(r.flags|=16384))),gy(a,e)):cc(a)}function cc(e){var a=e;do{if((a.flags&32768)!==0){gy(a,Ds);return}e=a.return;var i=s_(a.alternate,a,ss);if(i!==null){Je=i;return}if(a=a.sibling,a!==null){Je=a;return}Je=a=e}while(a!==null);Wt===0&&(Wt=5)}function gy(e,a){do{var i=i_(e.alternate,e);if(i!==null){i.flags&=32767,Je=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(e=e.sibling,e!==null)){Je=e;return}Je=e=i}while(e!==null);Wt=6,Je=null}function yy(e,a,i,r,d,p,x,S,k){e.cancelPendingCommit=null;do uc();while(pn!==0);if((ht&6)!==0)throw Error(o(327));if(a!==null){if(a===e.current)throw Error(o(177));if(p=a.lanes|a.childLanes,p|=Lu,fe(e,i,p,x,S,k),e===Tt&&(Je=Tt=null,nt=0),so=a,Us=e,is=i,Yd=p,Wd=d,oy=r,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,y_(X,function(){return _y(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||r){r=z.T,z.T=null,d=ae.p,ae.p=2,x=ht,ht|=4;try{o_(e,a,i)}finally{ht=x,ae.p=d,z.T=r}}pn=1,vy(),xy(),by()}}function vy(){if(pn===1){pn=0;var e=Us,a=so,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=z.T,z.T=null;var r=ae.p;ae.p=2;var d=ht;ht|=4;try{Zg(a,e);var p=uf,x=sm(e.containerInfo),S=p.focusedElem,k=p.selectionRange;if(x!==S&&S&&S.ownerDocument&&am(S.ownerDocument.documentElement,S)){if(k!==null&&Bu(S)){var L=k.start,W=k.end;if(W===void 0&&(W=L),"selectionStart"in S)S.selectionStart=L,S.selectionEnd=Math.min(W,S.value.length);else{var J=S.ownerDocument||document,V=J&&J.defaultView||window;if(V.getSelection){var $=V.getSelection(),be=S.textContent.length,Ie=Math.min(k.start,be),wt=k.end===void 0?Ie:Math.min(k.end,be);!$.extend&&Ie>wt&&(x=wt,wt=Ie,Ie=x);var D=nm(S,Ie),R=nm(S,wt);if(D&&R&&($.rangeCount!==1||$.anchorNode!==D.node||$.anchorOffset!==D.offset||$.focusNode!==R.node||$.focusOffset!==R.offset)){var I=J.createRange();I.setStart(D.node,D.offset),$.removeAllRanges(),Ie>wt?($.addRange(I),$.extend(R.node,R.offset)):(I.setEnd(R.node,R.offset),$.addRange(I))}}}}for(J=[],$=S;$=$.parentNode;)$.nodeType===1&&J.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<J.length;S++){var K=J[S];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}_c=!!cf,uf=cf=null}finally{ht=d,ae.p=r,z.T=i}}e.current=a,pn=2}}function xy(){if(pn===2){pn=0;var e=Us,a=so,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=z.T,z.T=null;var r=ae.p;ae.p=2;var d=ht;ht|=4;try{Yg(e,a.alternate,a)}finally{ht=d,ae.p=r,z.T=i}}pn=3}}function by(){if(pn===4||pn===3){pn=0,rt();var e=Us,a=so,i=is,r=oy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?pn=5:(pn=0,so=Us=null,Sy(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(zs=null),fn(i),a=a.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(Te,a,void 0,(a.current.flags&128)===128)}catch{}if(r!==null){a=z.T,d=ae.p,ae.p=2,z.T=null;try{for(var p=e.onRecoverableError,x=0;x<r.length;x++){var S=r[x];p(S.value,{componentStack:S.stack})}}finally{z.T=a,ae.p=d}}(is&3)!==0&&uc(),Ba(e),d=e.pendingLanes,(i&261930)!==0&&(d&42)!==0?e===Xd?vr++:(vr=0,Xd=e):vr=0,xr(0)}}function Sy(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Jo(a)))}function uc(){return vy(),xy(),by(),_y()}function _y(){if(pn!==5)return!1;var e=Us,a=Yd;Yd=0;var i=fn(is),r=z.T,d=ae.p;try{ae.p=32>i?32:i,z.T=null,i=Wd,Wd=null;var p=Us,x=is;if(pn=0,so=Us=null,is=0,(ht&6)!==0)throw Error(o(331));var S=ht;if(ht|=4,ay(p.current),ey(p,p.current,x,i),ht=S,xr(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(Te,p)}catch{}return!0}finally{ae.p=d,z.T=r,Sy(e,a)}}function wy(e,a,i){a=sa(i,a),a=kd(e.stateNode,a,2),e=Ms(e,a,2),e!==null&&(Ve(e,2),Ba(e))}function vt(e,a,i){if(e.tag===3)wy(e,e,i);else for(;a!==null;){if(a.tag===3){wy(a,e,i);break}else if(a.tag===1){var r=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zs===null||!zs.has(r))){e=sa(i,e),i=Cg(2),r=Ms(a,i,2),r!==null&&(jg(i,r,a,e),Ve(r,2),Ba(r));break}}a=a.return}}function Zd(e,a,i){var r=e.pingCache;if(r===null){r=e.pingCache=new c_;var d=new Set;r.set(a,d)}else d=r.get(a),d===void 0&&(d=new Set,r.set(a,d));d.has(i)||($d=!0,d.add(i),e=h_.bind(null,e,a,i),a.then(e,e))}function h_(e,a,i){var r=e.pingCache;r!==null&&r.delete(a),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Tt===e&&(nt&i)===i&&(Wt===4||Wt===3&&(nt&62914560)===nt&&300>ie()-sc?(ht&2)===0&&io(e,0):qd|=i,ao===nt&&(ao=0)),Ba(e)}function Cy(e,a){a===0&&(a=_e()),e=ai(e,a),e!==null&&(Ve(e,a),Ba(e))}function m_(e){var a=e.memoizedState,i=0;a!==null&&(i=a.retryLane),Cy(e,i)}function g_(e,a){var i=0;switch(e.tag){case 31:case 13:var r=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}r!==null&&r.delete(a),Cy(e,i)}function y_(e,a){return ft(e,a)}var dc=null,ro=null,Jd=!1,fc=!1,ef=!1,Os=0;function Ba(e){e!==ro&&e.next===null&&(ro===null?dc=ro=e:ro=ro.next=e),fc=!0,Jd||(Jd=!0,x_())}function xr(e,a){if(!ef&&fc){ef=!0;do for(var i=!1,r=dc;r!==null;){if(e!==0){var d=r.pendingLanes;if(d===0)var p=0;else{var x=r.suspendedLanes,S=r.pingedLanes;p=(1<<31-gt(42|e)+1)-1,p&=d&~(x&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(i=!0,Ay(r,p))}else p=nt,p=oe(r,r===Tt?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(p&3)===0||ye(r,p)||(i=!0,Ay(r,p));r=r.next}while(i);ef=!1}}function v_(){jy()}function jy(){fc=Jd=!1;var e=0;Os!==0&&M_()&&(e=Os);for(var a=ie(),i=null,r=dc;r!==null;){var d=r.next,p=Ty(r,a);p===0?(r.next=null,i===null?dc=d:i.next=d,d===null&&(ro=i)):(i=r,(e!==0||(p&3)!==0)&&(fc=!0)),r=d}pn!==0&&pn!==5||xr(e),Os!==0&&(Os=0)}function Ty(e,a){for(var i=e.suspendedLanes,r=e.pingedLanes,d=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var x=31-gt(p),S=1<<x,k=d[x];k===-1?((S&i)===0||(S&r)!==0)&&(d[x]=ke(S,a)):k<=a&&(e.expiredLanes|=S),p&=~S}if(a=Tt,i=nt,i=oe(e,e===a?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,i===0||e===a&&(yt===2||yt===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&mn(r),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||ye(e,i)){if(a=i&-i,a===e.callbackPriority)return a;switch(r!==null&&mn(r),fn(i)){case 2:case 8:i=$e;break;case 32:i=X;break;case 268435456:i=O;break;default:i=X}return r=ky.bind(null,e),i=ft(i,r),e.callbackPriority=a,e.callbackNode=i,a}return r!==null&&r!==null&&mn(r),e.callbackPriority=2,e.callbackNode=null,2}function ky(e,a){if(pn!==0&&pn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(uc()&&e.callbackNode!==i)return null;var r=nt;return r=oe(e,e===Tt?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(ly(e,r,a),Ty(e,ie()),e.callbackNode!=null&&e.callbackNode===i?ky.bind(null,e):null)}function Ay(e,a){if(uc())return null;ly(e,a,!0)}function x_(){R_(function(){(ht&6)!==0?ft(Qe,v_):jy()})}function tf(){if(Os===0){var e=Gi;e===0&&(e=Va,Va<<=1,(Va&261888)===0&&(Va=256)),Os=e}return Os}function My(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:T(""+e)}function Ey(e,a){var i=a.ownerDocument.createElement("input");return i.name=a.name,i.value=a.value,e.id&&i.setAttribute("form",e.id),a.parentNode.insertBefore(i,a),e=new FormData(e),i.parentNode.removeChild(i),e}function b_(e,a,i,r,d){if(a==="submit"&&i&&i.stateNode===d){var p=My((d[xn]||null).action),x=r.submitter;x&&(a=(a=x[xn]||null)?My(a.formAction):x.getAttribute("formAction"),a!==null&&(p=a,x=null));var S=new Cl("action","action",null,r,d);e.push({event:S,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Os!==0){var k=x?Ey(d,x):new FormData(d);Sd(i,{pending:!0,data:k,method:d.method,action:p},null,k)}}else typeof p=="function"&&(S.preventDefault(),k=x?Ey(d,x):new FormData(d),Sd(i,{pending:!0,data:k,method:d.method,action:p},p,k))},currentTarget:d}]})}}for(var nf=0;nf<Ou.length;nf++){var af=Ou[nf],S_=af.toLowerCase(),__=af[0].toUpperCase()+af.slice(1);ba(S_,"on"+__)}ba(rm,"onAnimationEnd"),ba(lm,"onAnimationIteration"),ba(cm,"onAnimationStart"),ba("dblclick","onDoubleClick"),ba("focusin","onFocus"),ba("focusout","onBlur"),ba(OS,"onTransitionRun"),ba(LS,"onTransitionStart"),ba(PS,"onTransitionCancel"),ba(um,"onTransitionEnd"),gs("onMouseEnter",["mouseout","mouseover"]),gs("onMouseLeave",["mouseout","mouseover"]),gs("onPointerEnter",["pointerout","pointerover"]),gs("onPointerLeave",["pointerout","pointerover"]),Ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ea("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(br));function Ry(e,a){a=(a&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],d=r.event;r=r.listeners;e:{var p=void 0;if(a)for(var x=r.length-1;0<=x;x--){var S=r[x],k=S.instance,L=S.currentTarget;if(S=S.listener,k!==p&&d.isPropagationStopped())break e;p=S,d.currentTarget=L;try{p(d)}catch(W){kl(W)}d.currentTarget=null,p=k}else for(x=0;x<r.length;x++){if(S=r[x],k=S.instance,L=S.currentTarget,S=S.listener,k!==p&&d.isPropagationStopped())break e;p=S,d.currentTarget=L;try{p(d)}catch(W){kl(W)}d.currentTarget=null,p=k}}}}function et(e,a){var i=a[Di];i===void 0&&(i=a[Di]=new Set);var r=e+"__bubble";i.has(r)||(Ny(a,e,2,!1),i.add(r))}function sf(e,a,i){var r=0;a&&(r|=4),Ny(i,e,r,a)}var pc="_reactListening"+Math.random().toString(36).slice(2);function of(e){if(!e[pc]){e[pc]=!0,dl.forEach(function(i){i!=="selectionchange"&&(w_.has(i)||sf(i,!1,e),sf(i,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[pc]||(a[pc]=!0,sf("selectionchange",!1,a))}}function Ny(e,a,i,r){switch(rv(a)){case 2:var d=Q_;break;case 8:d=Z_;break;default:d=Sf}i=d.bind(null,a,i,e),d=void 0,!ju||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(d=!0),r?d!==void 0?e.addEventListener(a,i,{capture:!0,passive:d}):e.addEventListener(a,i,!0):d!==void 0?e.addEventListener(a,i,{passive:d}):e.addEventListener(a,i,!1)}function rf(e,a,i,r,d){var p=r;if((a&1)===0&&(a&2)===0&&r!==null)e:for(;;){if(r===null)return;var x=r.tag;if(x===3||x===4){var S=r.stateNode.containerInfo;if(S===d)break;if(x===4)for(x=r.return;x!==null;){var k=x.tag;if((k===3||k===4)&&x.stateNode.containerInfo===d)return;x=x.return}for(;S!==null;){if(x=hs(S),x===null)return;if(k=x.tag,k===5||k===6||k===26||k===27){r=p=x;continue e}S=S.parentNode}}r=r.return}Ih(function(){var L=p,W=pt(i),J=[];e:{var V=dm.get(e);if(V!==void 0){var $=Cl,be=e;switch(e){case"keypress":if(_l(i)===0)break e;case"keydown":case"keyup":$=gS;break;case"focusin":be="focus",$=Mu;break;case"focusout":be="blur",$=Mu;break;case"beforeblur":case"afterblur":$=Mu;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Ph;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=sS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=xS;break;case rm:case lm:case cm:$=rS;break;case um:$=SS;break;case"scroll":case"scrollend":$=nS;break;case"wheel":$=wS;break;case"copy":case"cut":case"paste":$=cS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Vh;break;case"toggle":case"beforetoggle":$=jS}var Ie=(a&4)!==0,wt=!Ie&&(e==="scroll"||e==="scrollend"),D=Ie?V!==null?V+"Capture":null:V;Ie=[];for(var R=L,I;R!==null;){var K=R;if(I=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||I===null||D===null||(K=Vo(R,D),K!=null&&Ie.push(Sr(R,K,I))),wt)break;R=R.return}0<Ie.length&&(V=new $(V,be,null,i,W),J.push({event:V,listeners:Ie}))}}if((a&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",V&&i!==ce&&(be=i.relatedTarget||i.fromElement)&&(hs(be)||be[va]))break e;if(($||V)&&(V=W.window===W?W:(V=W.ownerDocument)?V.defaultView||V.parentWindow:window,$?(be=i.relatedTarget||i.toElement,$=L,be=be?hs(be):null,be!==null&&(wt=u(be),Ie=be.tag,be!==wt||Ie!==5&&Ie!==27&&Ie!==6)&&(be=null)):($=null,be=L),$!==be)){if(Ie=Ph,K="onMouseLeave",D="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(Ie=Vh,K="onPointerLeave",D="onPointerEnter",R="pointer"),wt=$==null?V:Js($),I=be==null?V:Js(be),V=new Ie(K,R+"leave",$,i,W),V.target=wt,V.relatedTarget=I,K=null,hs(W)===L&&(Ie=new Ie(D,R+"enter",be,i,W),Ie.target=I,Ie.relatedTarget=wt,K=Ie),wt=K,$&&be)t:{for(Ie=C_,D=$,R=be,I=0,K=D;K;K=Ie(K))I++;K=0;for(var Ae=R;Ae;Ae=Ie(Ae))K++;for(;0<I-K;)D=Ie(D),I--;for(;0<K-I;)R=Ie(R),K--;for(;I--;){if(D===R||R!==null&&D===R.alternate){Ie=D;break t}D=Ie(D),R=Ie(R)}Ie=null}else Ie=null;$!==null&&Dy(J,V,$,Ie,!1),be!==null&&wt!==null&&Dy(J,wt,be,Ie,!0)}}e:{if(V=L?Js(L):window,$=V.nodeName&&V.nodeName.toLowerCase(),$==="select"||$==="input"&&V.type==="file")var ut=Kh;else if(Wh(V))if(Qh)ut=zS;else{ut=DS;var we=NS}else $=V.nodeName,!$||$.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?L&&Ho(L.elementType)&&(ut=Kh):ut=BS;if(ut&&(ut=ut(e,L))){Xh(J,ut,i,W);break e}we&&we(e,V,L),e==="focusout"&&L&&V.type==="number"&&L.memoizedProps.value!=null&&Oo(V,"number",V.value)}switch(we=L?Js(L):window,e){case"focusin":(Wh(we)||we.contentEditable==="true")&&(Oi=we,zu=L,Ko=null);break;case"focusout":Ko=zu=Oi=null;break;case"mousedown":Uu=!0;break;case"contextmenu":case"mouseup":case"dragend":Uu=!1,im(J,i,W);break;case"selectionchange":if(IS)break;case"keydown":case"keyup":im(J,i,W)}var Ke;if(Ru)e:{switch(e){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Ii?Gh(e,i)&&(at="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(at="onCompositionStart");at&&(Fh&&i.locale!=="ko"&&(Ii||at!=="onCompositionStart"?at==="onCompositionEnd"&&Ii&&(Ke=Oh()):(_s=W,Tu="value"in _s?_s.value:_s.textContent,Ii=!0)),we=hc(L,at),0<we.length&&(at=new Hh(at,e,null,i,W),J.push({event:at,listeners:we}),Ke?at.data=Ke:(Ke=Yh(i),Ke!==null&&(at.data=Ke)))),(Ke=kS?AS(e,i):MS(e,i))&&(at=hc(L,"onBeforeInput"),0<at.length&&(we=new Hh("onBeforeInput","beforeinput",null,i,W),J.push({event:we,listeners:at}),we.data=Ke)),b_(J,e,L,i,W)}Ry(J,a)})}function Sr(e,a,i){return{instance:e,listener:a,currentTarget:i}}function hc(e,a){for(var i=a+"Capture",r=[];e!==null;){var d=e,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=Vo(e,i),d!=null&&r.unshift(Sr(e,d,p)),d=Vo(e,a),d!=null&&r.push(Sr(e,d,p))),e.tag===3)return r;e=e.return}return[]}function C_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dy(e,a,i,r,d){for(var p=a._reactName,x=[];i!==null&&i!==r;){var S=i,k=S.alternate,L=S.stateNode;if(S=S.tag,k!==null&&k===r)break;S!==5&&S!==26&&S!==27||L===null||(k=L,d?(L=Vo(i,p),L!=null&&x.unshift(Sr(i,L,k))):d||(L=Vo(i,p),L!=null&&x.push(Sr(i,L,k)))),i=i.return}x.length!==0&&e.push({event:a,listeners:x})}var j_=/\r\n?/g,T_=/\u0000|\uFFFD/g;function By(e){return(typeof e=="string"?e:""+e).replace(j_,`
`).replace(T_,"")}function zy(e,a){return a=By(a),By(e)===a}function _t(e,a,i,r,d,p){switch(i){case"children":typeof r=="string"?a==="body"||a==="textarea"&&r===""||xs(e,r):(typeof r=="number"||typeof r=="bigint")&&a!=="body"&&xs(e,""+r);break;case"className":Ui(e,"class",r);break;case"tabIndex":Ui(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Ui(e,i,r);break;case"style":bl(e,r,p);break;case"data":if(a!=="object"){Ui(e,"data",r);break}case"src":case"href":if(r===""&&(a!=="a"||i!=="href")){e.removeAttribute(i);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=T(""+r),e.setAttribute(i,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(i==="formAction"?(a!=="input"&&_t(e,a,"name",d.name,d,null),_t(e,a,"formEncType",d.formEncType,d,null),_t(e,a,"formMethod",d.formMethod,d,null),_t(e,a,"formTarget",d.formTarget,d,null)):(_t(e,a,"encType",d.encType,d,null),_t(e,a,"method",d.method,d,null),_t(e,a,"target",d.target,d,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=T(""+r),e.setAttribute(i,r);break;case"onClick":r!=null&&(e.onclick=Y);break;case"onScroll":r!=null&&et("scroll",e);break;case"onScrollEnd":r!=null&&et("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(o(61));if(i=r.__html,i!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}i=T(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""+r):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":r===!0?e.setAttribute(i,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,r):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(i,r):e.removeAttribute(i);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(i):e.setAttribute(i,r);break;case"popover":et("beforetoggle",e),et("toggle",e),zi(e,"popover",r);break;case"xlinkActuate":xa(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":xa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":xa(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":xa(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":xa(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":xa(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":xa(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":xa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":xa(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":zi(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=wu.get(i)||i,zi(e,i,r))}}function lf(e,a,i,r,d,p){switch(i){case"style":bl(e,r,p);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(o(61));if(i=r.__html,i!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof r=="string"?xs(e,r):(typeof r=="number"||typeof r=="bigint")&&xs(e,""+r);break;case"onScroll":r!=null&&et("scroll",e);break;case"onScrollEnd":r!=null&&et("scrollend",e);break;case"onClick":r!=null&&(e.onclick=Y);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fl.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(d=i.endsWith("Capture"),a=i.slice(2,d?i.length-7:void 0),p=e[xn]||null,p=p!=null?p[i]:null,typeof p=="function"&&e.removeEventListener(a,p,d),typeof r=="function")){typeof p!="function"&&p!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(a,r,d);break e}i in e?e[i]=r:r===!0?e.setAttribute(i,""):zi(e,i,r)}}}function Cn(e,a,i){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",e),et("load",e);var r=!1,d=!1,p;for(p in i)if(i.hasOwnProperty(p)){var x=i[p];if(x!=null)switch(p){case"src":r=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:_t(e,a,p,x,i,null)}}d&&_t(e,a,"srcSet",i.srcSet,i,null),r&&_t(e,a,"src",i.src,i,null);return;case"input":et("invalid",e);var S=p=x=d=null,k=null,L=null;for(r in i)if(i.hasOwnProperty(r)){var W=i[r];if(W!=null)switch(r){case"name":d=W;break;case"type":x=W;break;case"checked":k=W;break;case"defaultChecked":L=W;break;case"value":p=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(o(137,a));break;default:_t(e,a,r,W,i,null)}}ys(e,p,S,k,L,x,d,!1);return;case"select":et("invalid",e),r=x=p=null;for(d in i)if(i.hasOwnProperty(d)&&(S=i[d],S!=null))switch(d){case"value":p=S;break;case"defaultValue":x=S;break;case"multiple":r=S;default:_t(e,a,d,S,i,null)}a=p,i=x,e.multiple=!!r,a!=null?vs(e,!!r,a,!1):i!=null&&vs(e,!!r,i,!0);return;case"textarea":et("invalid",e),p=d=r=null;for(x in i)if(i.hasOwnProperty(x)&&(S=i[x],S!=null))switch(x){case"value":r=S;break;case"defaultValue":d=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(o(91));break;default:_t(e,a,x,S,i,null)}Po(e,r,d,p);return;case"option":for(k in i)if(i.hasOwnProperty(k)&&(r=i[k],r!=null))switch(k){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:_t(e,a,k,r,i,null)}return;case"dialog":et("beforetoggle",e),et("toggle",e),et("cancel",e),et("close",e);break;case"iframe":case"object":et("load",e);break;case"video":case"audio":for(r=0;r<br.length;r++)et(br[r],e);break;case"image":et("error",e),et("load",e);break;case"details":et("toggle",e);break;case"embed":case"source":case"link":et("error",e),et("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in i)if(i.hasOwnProperty(L)&&(r=i[L],r!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:_t(e,a,L,r,i,null)}return;default:if(Ho(a)){for(W in i)i.hasOwnProperty(W)&&(r=i[W],r!==void 0&&lf(e,a,W,r,i,void 0));return}}for(S in i)i.hasOwnProperty(S)&&(r=i[S],r!=null&&_t(e,a,S,r,i,null))}function k_(e,a,i,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,x=null,S=null,k=null,L=null,W=null;for($ in i){var J=i[$];if(i.hasOwnProperty($)&&J!=null)switch($){case"checked":break;case"value":break;case"defaultValue":k=J;default:r.hasOwnProperty($)||_t(e,a,$,null,r,J)}}for(var V in r){var $=r[V];if(J=i[V],r.hasOwnProperty(V)&&($!=null||J!=null))switch(V){case"type":p=$;break;case"name":d=$;break;case"checked":L=$;break;case"defaultChecked":W=$;break;case"value":x=$;break;case"defaultValue":S=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(o(137,a));break;default:$!==J&&_t(e,a,V,$,r,J)}}Io(e,x,S,k,L,W,p,d);return;case"select":$=x=S=V=null;for(p in i)if(k=i[p],i.hasOwnProperty(p)&&k!=null)switch(p){case"value":break;case"multiple":$=k;default:r.hasOwnProperty(p)||_t(e,a,p,null,r,k)}for(d in r)if(p=r[d],k=i[d],r.hasOwnProperty(d)&&(p!=null||k!=null))switch(d){case"value":V=p;break;case"defaultValue":S=p;break;case"multiple":x=p;default:p!==k&&_t(e,a,d,p,r,k)}a=S,i=x,r=$,V!=null?vs(e,!!i,V,!1):!!r!=!!i&&(a!=null?vs(e,!!i,a,!0):vs(e,!!i,i?[]:"",!1));return;case"textarea":$=V=null;for(S in i)if(d=i[S],i.hasOwnProperty(S)&&d!=null&&!r.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:_t(e,a,S,null,r,d)}for(x in r)if(d=r[x],p=i[x],r.hasOwnProperty(x)&&(d!=null||p!=null))switch(x){case"value":V=d;break;case"defaultValue":$=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:d!==p&&_t(e,a,x,d,r,p)}Lo(e,V,$);return;case"option":for(var be in i)if(V=i[be],i.hasOwnProperty(be)&&V!=null&&!r.hasOwnProperty(be))switch(be){case"selected":e.selected=!1;break;default:_t(e,a,be,null,r,V)}for(k in r)if(V=r[k],$=i[k],r.hasOwnProperty(k)&&V!==$&&(V!=null||$!=null))switch(k){case"selected":e.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:_t(e,a,k,V,r,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in i)V=i[Ie],i.hasOwnProperty(Ie)&&V!=null&&!r.hasOwnProperty(Ie)&&_t(e,a,Ie,null,r,V);for(L in r)if(V=r[L],$=i[L],r.hasOwnProperty(L)&&V!==$&&(V!=null||$!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,a));break;default:_t(e,a,L,V,r,$)}return;default:if(Ho(a)){for(var wt in i)V=i[wt],i.hasOwnProperty(wt)&&V!==void 0&&!r.hasOwnProperty(wt)&&lf(e,a,wt,void 0,r,V);for(W in r)V=r[W],$=i[W],!r.hasOwnProperty(W)||V===$||V===void 0&&$===void 0||lf(e,a,W,V,r,$);return}}for(var D in i)V=i[D],i.hasOwnProperty(D)&&V!=null&&!r.hasOwnProperty(D)&&_t(e,a,D,null,r,V);for(J in r)V=r[J],$=i[J],!r.hasOwnProperty(J)||V===$||V==null&&$==null||_t(e,a,J,V,r,$)}function Uy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function A_(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,i=performance.getEntriesByType("resource"),r=0;r<i.length;r++){var d=i[r],p=d.transferSize,x=d.initiatorType,S=d.duration;if(p&&S&&Uy(x)){for(x=0,S=d.responseEnd,r+=1;r<i.length;r++){var k=i[r],L=k.startTime;if(L>S)break;var W=k.transferSize,J=k.initiatorType;W&&Uy(J)&&(k=k.responseEnd,x+=W*(k<S?1:(S-L)/(k-L)))}if(--r,a+=8*(p+x)/(d.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var cf=null,uf=null;function mc(e){return e.nodeType===9?e:e.ownerDocument}function Iy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Oy(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function df(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ff=null;function M_(){var e=window.event;return e&&e.type==="popstate"?e===ff?!1:(ff=e,!0):(ff=null,!1)}var Ly=typeof setTimeout=="function"?setTimeout:void 0,E_=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,R_=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(e){return Py.resolve(null).then(e).catch(N_)}:Ly;function N_(e){setTimeout(function(){throw e})}function Ls(e){return e==="head"}function Hy(e,a){var i=a,r=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"||i==="/&"){if(r===0){e.removeChild(d),fo(a);return}r--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")r++;else if(i==="html")_r(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,_r(i);for(var p=i.firstChild;p;){var x=p.nextSibling,S=p.nodeName;p[ps]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&p.rel.toLowerCase()==="stylesheet"||i.removeChild(p),p=x}}else i==="body"&&_r(e.ownerDocument.body);i=d}while(i);fo(a)}function Vy(e,a){var i=e;e=0;do{var r=i.nextSibling;if(i.nodeType===1?a?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(a?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=r}while(i)}function pf(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var i=a;switch(a=a.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":pf(i),Zs(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function D_(e,a,i,r){for(;e.nodeType===1;){var d=i;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[ps])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=ca(e.nextSibling),e===null)break}return null}function B_(e,a,i){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ca(e.nextSibling),e===null))return null;return e}function Fy(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ca(e.nextSibling),e===null))return null;return e}function hf(e){return e.data==="$?"||e.data==="$~"}function mf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function z_(e,a){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||i.readyState!=="loading")a();else{var r=function(){a(),i.removeEventListener("DOMContentLoaded",r)};i.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function ca(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var gf=null;function $y(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(a===0)return ca(e.nextSibling);a--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||a++}e=e.nextSibling}return null}function qy(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(a===0)return e;a--}else i!=="/$"&&i!=="/&"||a++}e=e.previousSibling}return null}function Gy(e,a,i){switch(a=mc(i),e){case"html":if(e=a.documentElement,!e)throw Error(o(452));return e;case"head":if(e=a.head,!e)throw Error(o(453));return e;case"body":if(e=a.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function _r(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Zs(e)}var ua=new Map,Yy=new Set;function gc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var os=ae.d;ae.d={f:U_,r:I_,D:O_,C:L_,L:P_,m:H_,X:F_,S:V_,M:$_};function U_(){var e=os.f(),a=rc();return e||a}function I_(e){var a=Fa(e);a!==null&&a.tag===5&&a.type==="form"?ug(a):os.r(e)}var lo=typeof document>"u"?null:document;function Wy(e,a,i){var r=lo;if(r&&typeof a=="string"&&a){var d=Bn(a);d='link[rel="'+e+'"][href="'+d+'"]',typeof i=="string"&&(d+='[crossorigin="'+i+'"]'),Yy.has(d)||(Yy.add(d),e={rel:e,crossOrigin:i,href:a},r.querySelector(d)===null&&(a=r.createElement("link"),Cn(a,"link",e),sn(a),r.head.appendChild(a)))}}function O_(e){os.D(e),Wy("dns-prefetch",e,null)}function L_(e,a){os.C(e,a),Wy("preconnect",e,a)}function P_(e,a,i){os.L(e,a,i);var r=lo;if(r&&e&&a){var d='link[rel="preload"][as="'+Bn(a)+'"]';a==="image"&&i&&i.imageSrcSet?(d+='[imagesrcset="'+Bn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(d+='[imagesizes="'+Bn(i.imageSizes)+'"]')):d+='[href="'+Bn(e)+'"]';var p=d;switch(a){case"style":p=co(e);break;case"script":p=uo(e)}ua.has(p)||(e=v({rel:"preload",href:a==="image"&&i&&i.imageSrcSet?void 0:e,as:a},i),ua.set(p,e),r.querySelector(d)!==null||a==="style"&&r.querySelector(wr(p))||a==="script"&&r.querySelector(Cr(p))||(a=r.createElement("link"),Cn(a,"link",e),sn(a),r.head.appendChild(a)))}}function H_(e,a){os.m(e,a);var i=lo;if(i&&e){var r=a&&typeof a.as=="string"?a.as:"script",d='link[rel="modulepreload"][as="'+Bn(r)+'"][href="'+Bn(e)+'"]',p=d;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=uo(e)}if(!ua.has(p)&&(e=v({rel:"modulepreload",href:e},a),ua.set(p,e),i.querySelector(d)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Cr(p)))return}r=i.createElement("link"),Cn(r,"link",e),sn(r),i.head.appendChild(r)}}}function V_(e,a,i){os.S(e,a,i);var r=lo;if(r&&e){var d=ms(r).hoistableStyles,p=co(e);a=a||"default";var x=d.get(p);if(!x){var S={loading:0,preload:null};if(x=r.querySelector(wr(p)))S.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":a},i),(i=ua.get(p))&&yf(e,i);var k=x=r.createElement("link");sn(k),Cn(k,"link",e),k._p=new Promise(function(L,W){k.onload=L,k.onerror=W}),k.addEventListener("load",function(){S.loading|=1}),k.addEventListener("error",function(){S.loading|=2}),S.loading|=4,yc(x,a,r)}x={type:"stylesheet",instance:x,count:1,state:S},d.set(p,x)}}}function F_(e,a){os.X(e,a);var i=lo;if(i&&e){var r=ms(i).hoistableScripts,d=uo(e),p=r.get(d);p||(p=i.querySelector(Cr(d)),p||(e=v({src:e,async:!0},a),(a=ua.get(d))&&vf(e,a),p=i.createElement("script"),sn(p),Cn(p,"link",e),i.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},r.set(d,p))}}function $_(e,a){os.M(e,a);var i=lo;if(i&&e){var r=ms(i).hoistableScripts,d=uo(e),p=r.get(d);p||(p=i.querySelector(Cr(d)),p||(e=v({src:e,async:!0,type:"module"},a),(a=ua.get(d))&&vf(e,a),p=i.createElement("script"),sn(p),Cn(p,"link",e),i.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},r.set(d,p))}}function Xy(e,a,i,r){var d=(d=de.current)?gc(d):null;if(!d)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(a=co(i.href),i=ms(d).hoistableStyles,r=i.get(a),r||(r={type:"style",instance:null,count:0,state:null},i.set(a,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=co(i.href);var p=ms(d).hoistableStyles,x=p.get(e);if(x||(d=d.ownerDocument||d,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,x),(p=d.querySelector(wr(e)))&&!p._p&&(x.instance=p,x.state.loading=5),ua.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ua.set(e,i),p||q_(d,e,i,x.state))),a&&r===null)throw Error(o(528,""));return x}if(a&&r!==null)throw Error(o(529,""));return null;case"script":return a=i.async,i=i.src,typeof i=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=uo(i),i=ms(d).hoistableScripts,r=i.get(a),r||(r={type:"script",instance:null,count:0,state:null},i.set(a,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function co(e){return'href="'+Bn(e)+'"'}function wr(e){return'link[rel="stylesheet"]['+e+"]"}function Ky(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function q_(e,a,i,r){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?r.loading=1:(a=e.createElement("link"),r.preload=a,a.addEventListener("load",function(){return r.loading|=1}),a.addEventListener("error",function(){return r.loading|=2}),Cn(a,"link",i),sn(a),e.head.appendChild(a))}function uo(e){return'[src="'+Bn(e)+'"]'}function Cr(e){return"script[async]"+e}function Qy(e,a,i){if(a.count++,a.instance===null)switch(a.type){case"style":var r=e.querySelector('style[data-href~="'+Bn(i.href)+'"]');if(r)return a.instance=r,sn(r),r;var d=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),sn(r),Cn(r,"style",d),yc(r,i.precedence,e),a.instance=r;case"stylesheet":d=co(i.href);var p=e.querySelector(wr(d));if(p)return a.state.loading|=4,a.instance=p,sn(p),p;r=Ky(i),(d=ua.get(d))&&yf(r,d),p=(e.ownerDocument||e).createElement("link"),sn(p);var x=p;return x._p=new Promise(function(S,k){x.onload=S,x.onerror=k}),Cn(p,"link",r),a.state.loading|=4,yc(p,i.precedence,e),a.instance=p;case"script":return p=uo(i.src),(d=e.querySelector(Cr(p)))?(a.instance=d,sn(d),d):(r=i,(d=ua.get(p))&&(r=v({},i),vf(r,d)),e=e.ownerDocument||e,d=e.createElement("script"),sn(d),Cn(d,"link",r),e.head.appendChild(d),a.instance=d);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(r=a.instance,a.state.loading|=4,yc(r,i.precedence,e));return a.instance}function yc(e,a,i){for(var r=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=r.length?r[r.length-1]:null,p=d,x=0;x<r.length;x++){var S=r[x];if(S.dataset.precedence===a)p=S;else if(p!==d)break}p?p.parentNode.insertBefore(e,p.nextSibling):(a=i.nodeType===9?i.head:i,a.insertBefore(e,a.firstChild))}function yf(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function vf(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var vc=null;function Zy(e,a,i){if(vc===null){var r=new Map,d=vc=new Map;d.set(i,r)}else d=vc,r=d.get(i),r||(r=new Map,d.set(i,r));if(r.has(e))return r;for(r.set(e,null),i=i.getElementsByTagName(e),d=0;d<i.length;d++){var p=i[d];if(!(p[ps]||p[Jt]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var x=p.getAttribute(a)||"";x=e+x;var S=r.get(x);S?S.push(p):r.set(x,[p])}}return r}function Jy(e,a,i){e=e.ownerDocument||e,e.head.insertBefore(i,a==="title"?e.querySelector("head > title"):null)}function G_(e,a,i){if(i===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function ev(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Y_(e,a,i,r){if(i.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=co(r.href),p=a.querySelector(wr(d));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=xc.bind(e),a.then(e,e)),i.state.loading|=4,i.instance=p,sn(p);return}p=a.ownerDocument||a,r=Ky(r),(d=ua.get(d))&&yf(r,d),p=p.createElement("link"),sn(p);var x=p;x._p=new Promise(function(S,k){x.onload=S,x.onerror=k}),Cn(p,"link",r),i.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=xc.bind(e),a.addEventListener("load",i),a.addEventListener("error",i))}}var xf=0;function W_(e,a){return e.stylesheets&&e.count===0&&Sc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var r=setTimeout(function(){if(e.stylesheets&&Sc(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+a);0<e.imgBytes&&xf===0&&(xf=62500*A_());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Sc(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>xf?50:800)+a);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(d)}}:null}function xc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var bc=null;function Sc(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,bc=new Map,a.forEach(X_,e),bc=null,xc.call(e))}function X_(e,a){if(!(a.state.loading&4)){var i=bc.get(e);if(i)var r=i.get(null);else{i=new Map,bc.set(e,i);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var x=d[p];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(i.set(x.dataset.precedence,x),r=x)}r&&i.set(null,r)}d=a.instance,x=d.getAttribute("data-precedence"),p=i.get(x)||r,p===r&&i.set(null,d),i.set(x,d),this.count++,r=xc.bind(this),d.addEventListener("load",r),d.addEventListener("error",r),p?p.parentNode.insertBefore(d,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),a.state.loading|=4}}var jr={$$typeof:E,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function K_(e,a,i,r,d,p,x,S,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=r,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function tv(e,a,i,r,d,p,x,S,k,L,W,J){return e=new K_(e,a,i,x,k,L,W,J,S),a=1,p===!0&&(a|=24),p=Wn(3,null,null,a),e.current=p,p.stateNode=e,a=Qu(),a.refCount++,e.pooledCache=a,a.refCount++,p.memoizedState={element:r,isDehydrated:i,cache:a},td(p),e}function nv(e){return e?(e=Hi,e):Hi}function av(e,a,i,r,d,p){d=nv(d),r.context===null?r.context=d:r.pendingContext=d,r=As(a),r.payload={element:i},p=p===void 0?null:p,p!==null&&(r.callback=p),i=Ms(e,r,a),i!==null&&(Pn(i,e,a),ar(i,e,a))}function sv(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<a?i:a}}function bf(e,a){sv(e,a),(e=e.alternate)&&sv(e,a)}function iv(e){if(e.tag===13||e.tag===31){var a=ai(e,67108864);a!==null&&Pn(a,e,67108864),bf(e,67108864)}}function ov(e){if(e.tag===13||e.tag===31){var a=Jn();a=En(a);var i=ai(e,a);i!==null&&Pn(i,e,a),bf(e,a)}}var _c=!0;function Q_(e,a,i,r){var d=z.T;z.T=null;var p=ae.p;try{ae.p=2,Sf(e,a,i,r)}finally{ae.p=p,z.T=d}}function Z_(e,a,i,r){var d=z.T;z.T=null;var p=ae.p;try{ae.p=8,Sf(e,a,i,r)}finally{ae.p=p,z.T=d}}function Sf(e,a,i,r){if(_c){var d=_f(r);if(d===null)rf(e,a,r,wc,i),lv(e,r);else if(ew(d,e,a,i,r))r.stopPropagation();else if(lv(e,r),a&4&&-1<J_.indexOf(e)){for(;d!==null;){var p=Fa(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var x=ne(p.pendingLanes);if(x!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;x;){var k=1<<31-gt(x);S.entanglements[1]|=k,x&=~k}Ba(p),(ht&6)===0&&(ic=ie()+500,xr(0))}}break;case 31:case 13:S=ai(p,2),S!==null&&Pn(S,p,2),rc(),bf(p,2)}if(p=_f(r),p===null&&rf(e,a,r,wc,i),p===d)break;d=p}d!==null&&r.stopPropagation()}else rf(e,a,r,null,i)}}function _f(e){return e=pt(e),wf(e)}var wc=null;function wf(e){if(wc=null,e=hs(e),e!==null){var a=u(e);if(a===null)e=null;else{var i=a.tag;if(i===13){if(e=f(a),e!==null)return e;e=null}else if(i===31){if(e=h(a),e!==null)return e;e=null}else if(i===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return wc=e,null}function rv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xe()){case Qe:return 2;case $e:return 8;case X:case lt:return 32;case O:return 268435456;default:return 32}default:return 32}}var Cf=!1,Ps=null,Hs=null,Vs=null,Tr=new Map,kr=new Map,Fs=[],J_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lv(e,a){switch(e){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":Tr.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":kr.delete(a.pointerId)}}function Ar(e,a,i,r,d,p){return e===null||e.nativeEvent!==p?(e={blockedOn:a,domEventName:i,eventSystemFlags:r,nativeEvent:p,targetContainers:[d]},a!==null&&(a=Fa(a),a!==null&&iv(a)),e):(e.eventSystemFlags|=r,a=e.targetContainers,d!==null&&a.indexOf(d)===-1&&a.push(d),e)}function ew(e,a,i,r,d){switch(a){case"focusin":return Ps=Ar(Ps,e,a,i,r,d),!0;case"dragenter":return Hs=Ar(Hs,e,a,i,r,d),!0;case"mouseover":return Vs=Ar(Vs,e,a,i,r,d),!0;case"pointerover":var p=d.pointerId;return Tr.set(p,Ar(Tr.get(p)||null,e,a,i,r,d)),!0;case"gotpointercapture":return p=d.pointerId,kr.set(p,Ar(kr.get(p)||null,e,a,i,r,d)),!0}return!1}function cv(e){var a=hs(e.target);if(a!==null){var i=u(a);if(i!==null){if(a=i.tag,a===13){if(a=f(i),a!==null){e.blockedOn=a,Gn(e.priority,function(){ov(i)});return}}else if(a===31){if(a=h(i),a!==null){e.blockedOn=a,Gn(e.priority,function(){ov(i)});return}}else if(a===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cc(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var i=_f(e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);ce=r,i.target.dispatchEvent(r),ce=null}else return a=Fa(i),a!==null&&iv(a),e.blockedOn=i,!1;a.shift()}return!0}function uv(e,a,i){Cc(e)&&i.delete(a)}function tw(){Cf=!1,Ps!==null&&Cc(Ps)&&(Ps=null),Hs!==null&&Cc(Hs)&&(Hs=null),Vs!==null&&Cc(Vs)&&(Vs=null),Tr.forEach(uv),kr.forEach(uv)}function jc(e,a){e.blockedOn===a&&(e.blockedOn=null,Cf||(Cf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,tw)))}var Tc=null;function dv(e){Tc!==e&&(Tc=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Tc===e&&(Tc=null);for(var a=0;a<e.length;a+=3){var i=e[a],r=e[a+1],d=e[a+2];if(typeof r!="function"){if(wf(r||i)===null)continue;break}var p=Fa(i);p!==null&&(e.splice(a,3),a-=3,Sd(p,{pending:!0,data:d,method:i.method,action:r},r,d))}}))}function fo(e){function a(k){return jc(k,e)}Ps!==null&&jc(Ps,e),Hs!==null&&jc(Hs,e),Vs!==null&&jc(Vs,e),Tr.forEach(a),kr.forEach(a);for(var i=0;i<Fs.length;i++){var r=Fs[i];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Fs.length&&(i=Fs[0],i.blockedOn===null);)cv(i),i.blockedOn===null&&Fs.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(r=0;r<i.length;r+=3){var d=i[r],p=i[r+1],x=d[xn]||null;if(typeof p=="function")x||dv(i);else if(x){var S=null;if(p&&p.hasAttribute("formAction")){if(d=p,x=p[xn]||null)S=x.formAction;else if(wf(d)!==null)continue}else S=x.action;typeof S=="function"?i[r+1]=S:(i.splice(r,3),r-=3),dv(i)}}}function fv(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(x){return d=x})},focusReset:"manual",scroll:"manual"})}function a(){d!==null&&(d(),d=null),r||setTimeout(i,20)}function i(){if(!r&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(i,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),d!==null&&(d(),d=null)}}}function jf(e){this._internalRoot=e}kc.prototype.render=jf.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(o(409));var i=a.current,r=Jn();av(i,r,e,a,null,null)},kc.prototype.unmount=jf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;av(e.current,2,null,e,null,null),rc(),a[va]=null}};function kc(e){this._internalRoot=e}kc.prototype.unstable_scheduleHydration=function(e){if(e){var a=Pt();e={blockedOn:null,target:e,priority:a};for(var i=0;i<Fs.length&&a!==0&&a<Fs[i].priority;i++);Fs.splice(i,0,e),i===0&&cv(e)}};var pv=n.version;if(pv!=="19.2.0")throw Error(o(527,pv,"19.2.0"));ae.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(a),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var nw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ac.isDisabled&&Ac.supportsFiber)try{Te=Ac.inject(nw),Ue=Ac}catch{}}return Er.createRoot=function(e,a){if(!c(e))throw Error(o(299));var i=!1,r="",d=bg,p=Sg,x=_g;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(r=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=tv(e,1,!1,null,null,i,r,null,d,p,x,fv),e[va]=a.current,of(e),new jf(a)},Er.hydrateRoot=function(e,a,i){if(!c(e))throw Error(o(299));var r=!1,d="",p=bg,x=Sg,S=_g,k=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(x=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.formState!==void 0&&(k=i.formState)),a=tv(e,1,!0,a,i??null,r,d,k,p,x,S,fv),a.context=nv(null),i=a.current,r=Jn(),r=En(r),d=As(r),d.callback=null,Ms(i,d,r),i=r,a.current.lanes=i,Ve(a,i),Ba(a),e[va]=a.current,of(e),new kc(a)},Er.version="19.2.0",Er}var Sv;function Dw(){if(Sv)return Af.exports;Sv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Af.exports=Nw(),Af.exports}var Bw=Dw();const zw="modulepreload",Uw=function(t){return"/"+t},_v={},bt=function(n,s,o){let c=Promise.resolve();if(s&&s.length>0){let m=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),h=f?.nonce||f?.getAttribute("nonce");c=m(s.map(g=>{if(g=Uw(g),g in _v)return;_v[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const _=document.createElement("link");if(_.rel=y?"stylesheet":zw,y||(_.as="script"),_.crossOrigin="",_.href=g,h&&_.setAttribute("nonce",h),document.head.appendChild(_),y)return new Promise((C,w)=>{_.addEventListener("load",C),_.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return c.then(f=>{for(const h of f||[])h.status==="rejected"&&u(h.reason);return n().catch(u)})},wv=t=>{let n;const s=new Set,o=(g,y)=>{const v=typeof g=="function"?g(n):g;if(!Object.is(v,n)){const _=n;n=y??(typeof v!="object"||v===null)?v:Object.assign({},n,v),s.forEach(C=>C(n,_))}},c=()=>n,h={setState:o,getState:c,getInitialState:()=>m,subscribe:g=>(s.add(g),()=>s.delete(g))},m=n=t(o,c,h);return h},Iw=(t=>t?wv(t):wv),Ow=t=>t;function Lw(t,n=Ow){const s=Oa.useSyncExternalStore(t.subscribe,Oa.useCallback(()=>n(t.getState()),[t,n]),Oa.useCallback(()=>n(t.getInitialState()),[t,n]));return Oa.useDebugValue(s),s}const Cv=t=>{const n=Iw(t),s=o=>Lw(n,o);return Object.assign(s,n),s},cu=(t=>t?Cv(t):Cv);function zb(t,n){return function(){return t.apply(n,arguments)}}const{toString:Pw}=Object.prototype,{getPrototypeOf:Wp}=Object,{iterator:uu,toStringTag:Ub}=Symbol,du=(t=>n=>{const s=Pw.call(n);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Aa=t=>(t=t.toLowerCase(),n=>du(n)===t),fu=t=>n=>typeof n===t,{isArray:Eo}=Array,jo=fu("undefined");function el(t){return t!==null&&!jo(t)&&t.constructor!==null&&!jo(t.constructor)&&$n(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ib=Aa("ArrayBuffer");function Hw(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&Ib(t.buffer),n}const Vw=fu("string"),$n=fu("function"),Ob=fu("number"),tl=t=>t!==null&&typeof t=="object",Fw=t=>t===!0||t===!1,Lc=t=>{if(du(t)!=="object")return!1;const n=Wp(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Ub in t)&&!(uu in t)},$w=t=>{if(!tl(t)||el(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},qw=Aa("Date"),Gw=Aa("File"),Yw=Aa("Blob"),Ww=Aa("FileList"),Xw=t=>tl(t)&&$n(t.pipe),Kw=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||$n(t.append)&&((n=du(t))==="formdata"||n==="object"&&$n(t.toString)&&t.toString()==="[object FormData]"))},Qw=Aa("URLSearchParams"),[Zw,Jw,eC,tC]=["ReadableStream","Request","Response","Headers"].map(Aa),nC=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function nl(t,n,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let o,c;if(typeof t!="object"&&(t=[t]),Eo(t))for(o=0,c=t.length;o<c;o++)n.call(null,t[o],o,t);else{if(el(t))return;const u=s?Object.getOwnPropertyNames(t):Object.keys(t),f=u.length;let h;for(o=0;o<f;o++)h=u[o],n.call(null,t[h],h,t)}}function Lb(t,n){if(el(t))return null;n=n.toLowerCase();const s=Object.keys(t);let o=s.length,c;for(;o-- >0;)if(c=s[o],n===c.toLowerCase())return c;return null}const Si=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Pb=t=>!jo(t)&&t!==Si;function cp(){const{caseless:t,skipUndefined:n}=Pb(this)&&this||{},s={},o=(c,u)=>{const f=t&&Lb(s,u)||u;Lc(s[f])&&Lc(c)?s[f]=cp(s[f],c):Lc(c)?s[f]=cp({},c):Eo(c)?s[f]=c.slice():(!n||!jo(c))&&(s[f]=c)};for(let c=0,u=arguments.length;c<u;c++)arguments[c]&&nl(arguments[c],o);return s}const aC=(t,n,s,{allOwnKeys:o}={})=>(nl(n,(c,u)=>{s&&$n(c)?t[u]=zb(c,s):t[u]=c},{allOwnKeys:o}),t),sC=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),iC=(t,n,s,o)=>{t.prototype=Object.create(n.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),s&&Object.assign(t.prototype,s)},oC=(t,n,s,o)=>{let c,u,f;const h={};if(n=n||{},t==null)return n;do{for(c=Object.getOwnPropertyNames(t),u=c.length;u-- >0;)f=c[u],(!o||o(f,t,n))&&!h[f]&&(n[f]=t[f],h[f]=!0);t=s!==!1&&Wp(t)}while(t&&(!s||s(t,n))&&t!==Object.prototype);return n},rC=(t,n,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=n.length;const o=t.indexOf(n,s);return o!==-1&&o===s},lC=t=>{if(!t)return null;if(Eo(t))return t;let n=t.length;if(!Ob(n))return null;const s=new Array(n);for(;n-- >0;)s[n]=t[n];return s},cC=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&Wp(Uint8Array)),uC=(t,n)=>{const o=(t&&t[uu]).call(t);let c;for(;(c=o.next())&&!c.done;){const u=c.value;n.call(t,u[0],u[1])}},dC=(t,n)=>{let s;const o=[];for(;(s=t.exec(n))!==null;)o.push(s);return o},fC=Aa("HTMLFormElement"),pC=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,o,c){return o.toUpperCase()+c}),jv=(({hasOwnProperty:t})=>(n,s)=>t.call(n,s))(Object.prototype),hC=Aa("RegExp"),Hb=(t,n)=>{const s=Object.getOwnPropertyDescriptors(t),o={};nl(s,(c,u)=>{let f;(f=n(c,u,t))!==!1&&(o[u]=f||c)}),Object.defineProperties(t,o)},mC=t=>{Hb(t,(n,s)=>{if($n(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const o=t[s];if($n(o)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},gC=(t,n)=>{const s={},o=c=>{c.forEach(u=>{s[u]=!0})};return Eo(t)?o(t):o(String(t).split(n)),s},yC=()=>{},vC=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function xC(t){return!!(t&&$n(t.append)&&t[Ub]==="FormData"&&t[uu])}const bC=t=>{const n=new Array(10),s=(o,c)=>{if(tl(o)){if(n.indexOf(o)>=0)return;if(el(o))return o;if(!("toJSON"in o)){n[c]=o;const u=Eo(o)?[]:{};return nl(o,(f,h)=>{const m=s(f,c+1);!jo(m)&&(u[h]=m)}),n[c]=void 0,u}}return o};return s(t,0)},SC=Aa("AsyncFunction"),_C=t=>t&&(tl(t)||$n(t))&&$n(t.then)&&$n(t.catch),Vb=((t,n)=>t?setImmediate:n?((s,o)=>(Si.addEventListener("message",({source:c,data:u})=>{c===Si&&u===s&&o.length&&o.shift()()},!1),c=>{o.push(c),Si.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",$n(Si.postMessage)),wC=typeof queueMicrotask<"u"?queueMicrotask.bind(Si):typeof process<"u"&&process.nextTick||Vb,CC=t=>t!=null&&$n(t[uu]),F={isArray:Eo,isArrayBuffer:Ib,isBuffer:el,isFormData:Kw,isArrayBufferView:Hw,isString:Vw,isNumber:Ob,isBoolean:Fw,isObject:tl,isPlainObject:Lc,isEmptyObject:$w,isReadableStream:Zw,isRequest:Jw,isResponse:eC,isHeaders:tC,isUndefined:jo,isDate:qw,isFile:Gw,isBlob:Yw,isRegExp:hC,isFunction:$n,isStream:Xw,isURLSearchParams:Qw,isTypedArray:cC,isFileList:Ww,forEach:nl,merge:cp,extend:aC,trim:nC,stripBOM:sC,inherits:iC,toFlatObject:oC,kindOf:du,kindOfTest:Aa,endsWith:rC,toArray:lC,forEachEntry:uC,matchAll:dC,isHTMLForm:fC,hasOwnProperty:jv,hasOwnProp:jv,reduceDescriptors:Hb,freezeMethods:mC,toObjectSet:gC,toCamelCase:pC,noop:yC,toFiniteNumber:vC,findKey:Lb,global:Si,isContextDefined:Pb,isSpecCompliantForm:xC,toJSONObject:bC,isAsyncFn:SC,isThenable:_C,setImmediate:Vb,asap:wC,isIterable:CC};function We(t,n,s,o,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),s&&(this.config=s),o&&(this.request=o),c&&(this.response=c,this.status=c.status?c.status:null)}F.inherits(We,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.status}}});const Fb=We.prototype,$b={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{$b[t]={value:t}});Object.defineProperties(We,$b);Object.defineProperty(Fb,"isAxiosError",{value:!0});We.from=(t,n,s,o,c,u)=>{const f=Object.create(Fb);F.toFlatObject(t,f,function(y){return y!==Error.prototype},g=>g!=="isAxiosError");const h=t&&t.message?t.message:"Error",m=n==null&&t?t.code:n;return We.call(f,h,m,s,o,c),t&&f.cause==null&&Object.defineProperty(f,"cause",{value:t,configurable:!0}),f.name=t&&t.name||"Error",u&&Object.assign(f,u),f};const jC=null;function up(t){return F.isPlainObject(t)||F.isArray(t)}function qb(t){return F.endsWith(t,"[]")?t.slice(0,-2):t}function Tv(t,n,s){return t?t.concat(n).map(function(c,u){return c=qb(c),!s&&u?"["+c+"]":c}).join(s?".":""):n}function TC(t){return F.isArray(t)&&!t.some(up)}const kC=F.toFlatObject(F,{},null,function(n){return/^is[A-Z]/.test(n)});function pu(t,n,s){if(!F.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,s=F.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,M){return!F.isUndefined(M[A])});const o=s.metaTokens,c=s.visitor||y,u=s.dots,f=s.indexes,m=(s.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(n);if(!F.isFunction(c))throw new TypeError("visitor must be a function");function g(w){if(w===null)return"";if(F.isDate(w))return w.toISOString();if(F.isBoolean(w))return w.toString();if(!m&&F.isBlob(w))throw new We("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(w)||F.isTypedArray(w)?m&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function y(w,A,M){let B=w;if(w&&!M&&typeof w=="object"){if(F.endsWith(A,"{}"))A=o?A:A.slice(0,-2),w=JSON.stringify(w);else if(F.isArray(w)&&TC(w)||(F.isFileList(w)||F.endsWith(A,"[]"))&&(B=F.toArray(w)))return A=qb(A),B.forEach(function(E,U){!(F.isUndefined(E)||E===null)&&n.append(f===!0?Tv([A],U,u):f===null?A:A+"[]",g(E))}),!1}return up(w)?!0:(n.append(Tv(M,A,u),g(w)),!1)}const v=[],_=Object.assign(kC,{defaultVisitor:y,convertValue:g,isVisitable:up});function C(w,A){if(!F.isUndefined(w)){if(v.indexOf(w)!==-1)throw Error("Circular reference detected in "+A.join("."));v.push(w),F.forEach(w,function(B,P){(!(F.isUndefined(B)||B===null)&&c.call(n,B,F.isString(P)?P.trim():P,A,_))===!0&&C(B,A?A.concat(P):[P])}),v.pop()}}if(!F.isObject(t))throw new TypeError("data must be an object");return C(t),n}function kv(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return n[o]})}function Xp(t,n){this._pairs=[],t&&pu(t,this,n)}const Gb=Xp.prototype;Gb.append=function(n,s){this._pairs.push([n,s])};Gb.toString=function(n){const s=n?function(o){return n.call(this,o,kv)}:kv;return this._pairs.map(function(c){return s(c[0])+"="+s(c[1])},"").join("&")};function AC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Yb(t,n,s){if(!n)return t;const o=s&&s.encode||AC;F.isFunction(s)&&(s={serialize:s});const c=s&&s.serialize;let u;if(c?u=c(n,s):u=F.isURLSearchParams(n)?n.toString():new Xp(n,s).toString(o),u){const f=t.indexOf("#");f!==-1&&(t=t.slice(0,f)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t}class Av{constructor(){this.handlers=[]}use(n,s,o){return this.handlers.push({fulfilled:n,rejected:s,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){F.forEach(this.handlers,function(o){o!==null&&n(o)})}}const Wb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},MC=typeof URLSearchParams<"u"?URLSearchParams:Xp,EC=typeof FormData<"u"?FormData:null,RC=typeof Blob<"u"?Blob:null,NC={isBrowser:!0,classes:{URLSearchParams:MC,FormData:EC,Blob:RC},protocols:["http","https","file","blob","url","data"]},Kp=typeof window<"u"&&typeof document<"u",dp=typeof navigator=="object"&&navigator||void 0,DC=Kp&&(!dp||["ReactNative","NativeScript","NS"].indexOf(dp.product)<0),BC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zC=Kp&&window.location.href||"http://localhost",UC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Kp,hasStandardBrowserEnv:DC,hasStandardBrowserWebWorkerEnv:BC,navigator:dp,origin:zC},Symbol.toStringTag,{value:"Module"})),An={...UC,...NC};function IC(t,n){return pu(t,new An.classes.URLSearchParams,{visitor:function(s,o,c,u){return An.isNode&&F.isBuffer(s)?(this.append(o,s.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)},...n})}function OC(t){return F.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function LC(t){const n={},s=Object.keys(t);let o;const c=s.length;let u;for(o=0;o<c;o++)u=s[o],n[u]=t[u];return n}function Xb(t){function n(s,o,c,u){let f=s[u++];if(f==="__proto__")return!0;const h=Number.isFinite(+f),m=u>=s.length;return f=!f&&F.isArray(c)?c.length:f,m?(F.hasOwnProp(c,f)?c[f]=[c[f],o]:c[f]=o,!h):((!c[f]||!F.isObject(c[f]))&&(c[f]=[]),n(s,o,c[f],u)&&F.isArray(c[f])&&(c[f]=LC(c[f])),!h)}if(F.isFormData(t)&&F.isFunction(t.entries)){const s={};return F.forEachEntry(t,(o,c)=>{n(OC(o),c,s,0)}),s}return null}function PC(t,n,s){if(F.isString(t))try{return(n||JSON.parse)(t),F.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(s||JSON.stringify)(t)}const al={transitional:Wb,adapter:["xhr","http","fetch"],transformRequest:[function(n,s){const o=s.getContentType()||"",c=o.indexOf("application/json")>-1,u=F.isObject(n);if(u&&F.isHTMLForm(n)&&(n=new FormData(n)),F.isFormData(n))return c?JSON.stringify(Xb(n)):n;if(F.isArrayBuffer(n)||F.isBuffer(n)||F.isStream(n)||F.isFile(n)||F.isBlob(n)||F.isReadableStream(n))return n;if(F.isArrayBufferView(n))return n.buffer;if(F.isURLSearchParams(n))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let h;if(u){if(o.indexOf("application/x-www-form-urlencoded")>-1)return IC(n,this.formSerializer).toString();if((h=F.isFileList(n))||o.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return pu(h?{"files[]":n}:n,m&&new m,this.formSerializer)}}return u||c?(s.setContentType("application/json",!1),PC(n)):n}],transformResponse:[function(n){const s=this.transitional||al.transitional,o=s&&s.forcedJSONParsing,c=this.responseType==="json";if(F.isResponse(n)||F.isReadableStream(n))return n;if(n&&F.isString(n)&&(o&&!this.responseType||c)){const f=!(s&&s.silentJSONParsing)&&c;try{return JSON.parse(n,this.parseReviver)}catch(h){if(f)throw h.name==="SyntaxError"?We.from(h,We.ERR_BAD_RESPONSE,this,null,this.response):h}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:An.classes.FormData,Blob:An.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],t=>{al.headers[t]={}});const HC=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VC=t=>{const n={};let s,o,c;return t&&t.split(`
`).forEach(function(f){c=f.indexOf(":"),s=f.substring(0,c).trim().toLowerCase(),o=f.substring(c+1).trim(),!(!s||n[s]&&HC[s])&&(s==="set-cookie"?n[s]?n[s].push(o):n[s]=[o]:n[s]=n[s]?n[s]+", "+o:o)}),n},Mv=Symbol("internals");function Rr(t){return t&&String(t).trim().toLowerCase()}function Pc(t){return t===!1||t==null?t:F.isArray(t)?t.map(Pc):String(t)}function FC(t){const n=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=s.exec(t);)n[o[1]]=o[2];return n}const $C=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Rf(t,n,s,o,c){if(F.isFunction(o))return o.call(this,n,s);if(c&&(n=s),!!F.isString(n)){if(F.isString(o))return n.indexOf(o)!==-1;if(F.isRegExp(o))return o.test(n)}}function qC(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,s,o)=>s.toUpperCase()+o)}function GC(t,n){const s=F.toCamelCase(" "+n);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+s,{value:function(c,u,f){return this[o].call(this,n,c,u,f)},configurable:!0})})}let qn=class{constructor(n){n&&this.set(n)}set(n,s,o){const c=this;function u(h,m,g){const y=Rr(m);if(!y)throw new Error("header name must be a non-empty string");const v=F.findKey(c,y);(!v||c[v]===void 0||g===!0||g===void 0&&c[v]!==!1)&&(c[v||m]=Pc(h))}const f=(h,m)=>F.forEach(h,(g,y)=>u(g,y,m));if(F.isPlainObject(n)||n instanceof this.constructor)f(n,s);else if(F.isString(n)&&(n=n.trim())&&!$C(n))f(VC(n),s);else if(F.isObject(n)&&F.isIterable(n)){let h={},m,g;for(const y of n){if(!F.isArray(y))throw TypeError("Object iterator must return a key-value pair");h[g=y[0]]=(m=h[g])?F.isArray(m)?[...m,y[1]]:[m,y[1]]:y[1]}f(h,s)}else n!=null&&u(s,n,o);return this}get(n,s){if(n=Rr(n),n){const o=F.findKey(this,n);if(o){const c=this[o];if(!s)return c;if(s===!0)return FC(c);if(F.isFunction(s))return s.call(this,c,o);if(F.isRegExp(s))return s.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,s){if(n=Rr(n),n){const o=F.findKey(this,n);return!!(o&&this[o]!==void 0&&(!s||Rf(this,this[o],o,s)))}return!1}delete(n,s){const o=this;let c=!1;function u(f){if(f=Rr(f),f){const h=F.findKey(o,f);h&&(!s||Rf(o,o[h],h,s))&&(delete o[h],c=!0)}}return F.isArray(n)?n.forEach(u):u(n),c}clear(n){const s=Object.keys(this);let o=s.length,c=!1;for(;o--;){const u=s[o];(!n||Rf(this,this[u],u,n,!0))&&(delete this[u],c=!0)}return c}normalize(n){const s=this,o={};return F.forEach(this,(c,u)=>{const f=F.findKey(o,u);if(f){s[f]=Pc(c),delete s[u];return}const h=n?qC(u):String(u).trim();h!==u&&delete s[u],s[h]=Pc(c),o[h]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const s=Object.create(null);return F.forEach(this,(o,c)=>{o!=null&&o!==!1&&(s[c]=n&&F.isArray(o)?o.join(", "):o)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,s])=>n+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...s){const o=new this(n);return s.forEach(c=>o.set(c)),o}static accessor(n){const o=(this[Mv]=this[Mv]={accessors:{}}).accessors,c=this.prototype;function u(f){const h=Rr(f);o[h]||(GC(c,f),o[h]=!0)}return F.isArray(n)?n.forEach(u):u(n),this}};qn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(qn.prototype,({value:t},n)=>{let s=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(o){this[s]=o}}});F.freezeMethods(qn);function Nf(t,n){const s=this||al,o=n||s,c=qn.from(o.headers);let u=o.data;return F.forEach(t,function(h){u=h.call(s,u,c.normalize(),n?n.status:void 0)}),c.normalize(),u}function Kb(t){return!!(t&&t.__CANCEL__)}function Ro(t,n,s){We.call(this,t??"canceled",We.ERR_CANCELED,n,s),this.name="CanceledError"}F.inherits(Ro,We,{__CANCEL__:!0});function Qb(t,n,s){const o=s.config.validateStatus;!s.status||!o||o(s.status)?t(s):n(new We("Request failed with status code "+s.status,[We.ERR_BAD_REQUEST,We.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function YC(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function WC(t,n){t=t||10;const s=new Array(t),o=new Array(t);let c=0,u=0,f;return n=n!==void 0?n:1e3,function(m){const g=Date.now(),y=o[u];f||(f=g),s[c]=m,o[c]=g;let v=u,_=0;for(;v!==c;)_+=s[v++],v=v%t;if(c=(c+1)%t,c===u&&(u=(u+1)%t),g-f<n)return;const C=y&&g-y;return C?Math.round(_*1e3/C):void 0}}function XC(t,n){let s=0,o=1e3/n,c,u;const f=(g,y=Date.now())=>{s=y,c=null,u&&(clearTimeout(u),u=null),t(...g)};return[(...g)=>{const y=Date.now(),v=y-s;v>=o?f(g,y):(c=g,u||(u=setTimeout(()=>{u=null,f(c)},o-v)))},()=>c&&f(c)]}const Kc=(t,n,s=3)=>{let o=0;const c=WC(50,250);return XC(u=>{const f=u.loaded,h=u.lengthComputable?u.total:void 0,m=f-o,g=c(m),y=f<=h;o=f;const v={loaded:f,total:h,progress:h?f/h:void 0,bytes:m,rate:g||void 0,estimated:g&&h&&y?(h-f)/g:void 0,event:u,lengthComputable:h!=null,[n?"download":"upload"]:!0};t(v)},s)},Ev=(t,n)=>{const s=t!=null;return[o=>n[0]({lengthComputable:s,total:t,loaded:o}),n[1]]},Rv=t=>(...n)=>F.asap(()=>t(...n)),KC=An.hasStandardBrowserEnv?((t,n)=>s=>(s=new URL(s,An.origin),t.protocol===s.protocol&&t.host===s.host&&(n||t.port===s.port)))(new URL(An.origin),An.navigator&&/(msie|trident)/i.test(An.navigator.userAgent)):()=>!0,QC=An.hasStandardBrowserEnv?{write(t,n,s,o,c,u,f){if(typeof document>"u")return;const h=[`${t}=${encodeURIComponent(n)}`];F.isNumber(s)&&h.push(`expires=${new Date(s).toUTCString()}`),F.isString(o)&&h.push(`path=${o}`),F.isString(c)&&h.push(`domain=${c}`),u===!0&&h.push("secure"),F.isString(f)&&h.push(`SameSite=${f}`),document.cookie=h.join("; ")},read(t){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ZC(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function JC(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function Zb(t,n,s){let o=!ZC(n);return t&&(o||s==!1)?JC(t,n):n}const Nv=t=>t instanceof qn?{...t}:t;function Ei(t,n){n=n||{};const s={};function o(g,y,v,_){return F.isPlainObject(g)&&F.isPlainObject(y)?F.merge.call({caseless:_},g,y):F.isPlainObject(y)?F.merge({},y):F.isArray(y)?y.slice():y}function c(g,y,v,_){if(F.isUndefined(y)){if(!F.isUndefined(g))return o(void 0,g,v,_)}else return o(g,y,v,_)}function u(g,y){if(!F.isUndefined(y))return o(void 0,y)}function f(g,y){if(F.isUndefined(y)){if(!F.isUndefined(g))return o(void 0,g)}else return o(void 0,y)}function h(g,y,v){if(v in n)return o(g,y);if(v in t)return o(void 0,g)}const m={url:u,method:u,data:u,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h,headers:(g,y,v)=>c(Nv(g),Nv(y),v,!0)};return F.forEach(Object.keys({...t,...n}),function(y){const v=m[y]||c,_=v(t[y],n[y],y);F.isUndefined(_)&&v!==h||(s[y]=_)}),s}const Jb=t=>{const n=Ei({},t);let{data:s,withXSRFToken:o,xsrfHeaderName:c,xsrfCookieName:u,headers:f,auth:h}=n;if(n.headers=f=qn.from(f),n.url=Yb(Zb(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&f.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),F.isFormData(s)){if(An.hasStandardBrowserEnv||An.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(F.isFunction(s.getHeaders)){const m=s.getHeaders(),g=["content-type","content-length"];Object.entries(m).forEach(([y,v])=>{g.includes(y.toLowerCase())&&f.set(y,v)})}}if(An.hasStandardBrowserEnv&&(o&&F.isFunction(o)&&(o=o(n)),o||o!==!1&&KC(n.url))){const m=c&&u&&QC.read(u);m&&f.set(c,m)}return n},ej=typeof XMLHttpRequest<"u",tj=ej&&function(t){return new Promise(function(s,o){const c=Jb(t);let u=c.data;const f=qn.from(c.headers).normalize();let{responseType:h,onUploadProgress:m,onDownloadProgress:g}=c,y,v,_,C,w;function A(){C&&C(),w&&w(),c.cancelToken&&c.cancelToken.unsubscribe(y),c.signal&&c.signal.removeEventListener("abort",y)}let M=new XMLHttpRequest;M.open(c.method.toUpperCase(),c.url,!0),M.timeout=c.timeout;function B(){if(!M)return;const E=qn.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),H={data:!h||h==="text"||h==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:E,config:t,request:M};Qb(function(re){s(re),A()},function(re){o(re),A()},H),M=null}"onloadend"in M?M.onloadend=B:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(B)},M.onabort=function(){M&&(o(new We("Request aborted",We.ECONNABORTED,t,M)),M=null)},M.onerror=function(U){const H=U&&U.message?U.message:"Network Error",ee=new We(H,We.ERR_NETWORK,t,M);ee.event=U||null,o(ee),M=null},M.ontimeout=function(){let U=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const H=c.transitional||Wb;c.timeoutErrorMessage&&(U=c.timeoutErrorMessage),o(new We(U,H.clarifyTimeoutError?We.ETIMEDOUT:We.ECONNABORTED,t,M)),M=null},u===void 0&&f.setContentType(null),"setRequestHeader"in M&&F.forEach(f.toJSON(),function(U,H){M.setRequestHeader(H,U)}),F.isUndefined(c.withCredentials)||(M.withCredentials=!!c.withCredentials),h&&h!=="json"&&(M.responseType=c.responseType),g&&([_,w]=Kc(g,!0),M.addEventListener("progress",_)),m&&M.upload&&([v,C]=Kc(m),M.upload.addEventListener("progress",v),M.upload.addEventListener("loadend",C)),(c.cancelToken||c.signal)&&(y=E=>{M&&(o(!E||E.type?new Ro(null,t,M):E),M.abort(),M=null)},c.cancelToken&&c.cancelToken.subscribe(y),c.signal&&(c.signal.aborted?y():c.signal.addEventListener("abort",y)));const P=YC(c.url);if(P&&An.protocols.indexOf(P)===-1){o(new We("Unsupported protocol "+P+":",We.ERR_BAD_REQUEST,t));return}M.send(u||null)})},nj=(t,n)=>{const{length:s}=t=t?t.filter(Boolean):[];if(n||s){let o=new AbortController,c;const u=function(g){if(!c){c=!0,h();const y=g instanceof Error?g:this.reason;o.abort(y instanceof We?y:new Ro(y instanceof Error?y.message:y))}};let f=n&&setTimeout(()=>{f=null,u(new We(`timeout ${n} of ms exceeded`,We.ETIMEDOUT))},n);const h=()=>{t&&(f&&clearTimeout(f),f=null,t.forEach(g=>{g.unsubscribe?g.unsubscribe(u):g.removeEventListener("abort",u)}),t=null)};t.forEach(g=>g.addEventListener("abort",u));const{signal:m}=o;return m.unsubscribe=()=>F.asap(h),m}},aj=function*(t,n){let s=t.byteLength;if(s<n){yield t;return}let o=0,c;for(;o<s;)c=o+n,yield t.slice(o,c),o=c},sj=async function*(t,n){for await(const s of ij(t))yield*aj(s,n)},ij=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:s,value:o}=await n.read();if(s)break;yield o}}finally{await n.cancel()}},Dv=(t,n,s,o)=>{const c=sj(t,n);let u=0,f,h=m=>{f||(f=!0,o&&o(m))};return new ReadableStream({async pull(m){try{const{done:g,value:y}=await c.next();if(g){h(),m.close();return}let v=y.byteLength;if(s){let _=u+=v;s(_)}m.enqueue(new Uint8Array(y))}catch(g){throw h(g),g}},cancel(m){return h(m),c.return()}},{highWaterMark:2})},Bv=64*1024,{isFunction:Ec}=F,oj=(({Request:t,Response:n})=>({Request:t,Response:n}))(F.global),{ReadableStream:zv,TextEncoder:Uv}=F.global,Iv=(t,...n)=>{try{return!!t(...n)}catch{return!1}},rj=t=>{t=F.merge.call({skipUndefined:!0},oj,t);const{fetch:n,Request:s,Response:o}=t,c=n?Ec(n):typeof fetch=="function",u=Ec(s),f=Ec(o);if(!c)return!1;const h=c&&Ec(zv),m=c&&(typeof Uv=="function"?(w=>A=>w.encode(A))(new Uv):async w=>new Uint8Array(await new s(w).arrayBuffer())),g=u&&h&&Iv(()=>{let w=!1;const A=new s(An.origin,{body:new zv,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!A}),y=f&&h&&Iv(()=>F.isReadableStream(new o("").body)),v={stream:y&&(w=>w.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!v[w]&&(v[w]=(A,M)=>{let B=A&&A[w];if(B)return B.call(A);throw new We(`Response type '${w}' is not supported`,We.ERR_NOT_SUPPORT,M)})});const _=async w=>{if(w==null)return 0;if(F.isBlob(w))return w.size;if(F.isSpecCompliantForm(w))return(await new s(An.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(F.isArrayBufferView(w)||F.isArrayBuffer(w))return w.byteLength;if(F.isURLSearchParams(w)&&(w=w+""),F.isString(w))return(await m(w)).byteLength},C=async(w,A)=>{const M=F.toFiniteNumber(w.getContentLength());return M??_(A)};return async w=>{let{url:A,method:M,data:B,signal:P,cancelToken:E,timeout:U,onDownloadProgress:H,onUploadProgress:ee,responseType:re,headers:Z,withCredentials:pe="same-origin",fetchOptions:ue}=Jb(w),Be=n||fetch;re=re?(re+"").toLowerCase():"text";let Ze=nj([P,E&&E.toAbortSignal()],U),me=null;const Re=Ze&&Ze.unsubscribe&&(()=>{Ze.unsubscribe()});let He;try{if(ee&&g&&M!=="get"&&M!=="head"&&(He=await C(Z,B))!==0){let ve=new s(A,{method:"POST",body:B,duplex:"half"}),Ne;if(F.isFormData(B)&&(Ne=ve.headers.get("content-type"))&&Z.setContentType(Ne),ve.body){const[Ce,te]=Ev(He,Kc(Rv(ee)));B=Dv(ve.body,Bv,Ce,te)}}F.isString(pe)||(pe=pe?"include":"omit");const z=u&&"credentials"in s.prototype,ae={...ue,signal:Ze,method:M.toUpperCase(),headers:Z.normalize().toJSON(),body:B,duplex:"half",credentials:z?pe:void 0};me=u&&new s(A,ae);let le=await(u?Be(me,ue):Be(A,ae));const Se=y&&(re==="stream"||re==="response");if(y&&(H||Se&&Re)){const ve={};["status","statusText","headers"].forEach(he=>{ve[he]=le[he]});const Ne=F.toFiniteNumber(le.headers.get("content-length")),[Ce,te]=H&&Ev(Ne,Kc(Rv(H),!0))||[];le=new o(Dv(le.body,Bv,Ce,()=>{te&&te(),Re&&Re()}),ve)}re=re||"text";let ze=await v[F.findKey(v,re)||"text"](le,w);return!Se&&Re&&Re(),await new Promise((ve,Ne)=>{Qb(ve,Ne,{data:ze,headers:qn.from(le.headers),status:le.status,statusText:le.statusText,config:w,request:me})})}catch(z){throw Re&&Re(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new We("Network Error",We.ERR_NETWORK,w,me),{cause:z.cause||z}):We.from(z,z&&z.code,w,me)}}},lj=new Map,e0=t=>{let n=t&&t.env||{};const{fetch:s,Request:o,Response:c}=n,u=[o,c,s];let f=u.length,h=f,m,g,y=lj;for(;h--;)m=u[h],g=y.get(m),g===void 0&&y.set(m,g=h?new Map:rj(n)),y=g;return g};e0();const Qp={http:jC,xhr:tj,fetch:{get:e0}};F.forEach(Qp,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const Ov=t=>`- ${t}`,cj=t=>F.isFunction(t)||t===null||t===!1;function uj(t,n){t=F.isArray(t)?t:[t];const{length:s}=t;let o,c;const u={};for(let f=0;f<s;f++){o=t[f];let h;if(c=o,!cj(o)&&(c=Qp[(h=String(o)).toLowerCase()],c===void 0))throw new We(`Unknown adapter '${h}'`);if(c&&(F.isFunction(c)||(c=c.get(n))))break;u[h||"#"+f]=c}if(!c){const f=Object.entries(u).map(([m,g])=>`adapter ${m} `+(g===!1?"is not supported by the environment":"is not available in the build"));let h=s?f.length>1?`since :
`+f.map(Ov).join(`
`):" "+Ov(f[0]):"as no adapter specified";throw new We("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return c}const t0={getAdapter:uj,adapters:Qp};function Df(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ro(null,t)}function Lv(t){return Df(t),t.headers=qn.from(t.headers),t.data=Nf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),t0.getAdapter(t.adapter||al.adapter,t)(t).then(function(o){return Df(t),o.data=Nf.call(t,t.transformResponse,o),o.headers=qn.from(o.headers),o},function(o){return Kb(o)||(Df(t),o&&o.response&&(o.response.data=Nf.call(t,t.transformResponse,o.response),o.response.headers=qn.from(o.response.headers))),Promise.reject(o)})}const n0="1.13.2",hu={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{hu[t]=function(o){return typeof o===t||"a"+(n<1?"n ":" ")+t}});const Pv={};hu.transitional=function(n,s,o){function c(u,f){return"[Axios v"+n0+"] Transitional option '"+u+"'"+f+(o?". "+o:"")}return(u,f,h)=>{if(n===!1)throw new We(c(f," has been removed"+(s?" in "+s:"")),We.ERR_DEPRECATED);return s&&!Pv[f]&&(Pv[f]=!0,console.warn(c(f," has been deprecated since v"+s+" and will be removed in the near future"))),n?n(u,f,h):!0}};hu.spelling=function(n){return(s,o)=>(console.warn(`${o} is likely a misspelling of ${n}`),!0)};function dj(t,n,s){if(typeof t!="object")throw new We("options must be an object",We.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let c=o.length;for(;c-- >0;){const u=o[c],f=n[u];if(f){const h=t[u],m=h===void 0||f(h,u,t);if(m!==!0)throw new We("option "+u+" must be "+m,We.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new We("Unknown option "+u,We.ERR_BAD_OPTION)}}const Hc={assertOptions:dj,validators:hu},za=Hc.validators;let ji=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Av,response:new Av}}async request(n,s){try{return await this._request(n,s)}catch(o){if(o instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const u=c.stack?c.stack.replace(/^.+\n/,""):"";try{o.stack?u&&!String(o.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+u):o.stack=u}catch{}}throw o}}_request(n,s){typeof n=="string"?(s=s||{},s.url=n):s=n||{},s=Ei(this.defaults,s);const{transitional:o,paramsSerializer:c,headers:u}=s;o!==void 0&&Hc.assertOptions(o,{silentJSONParsing:za.transitional(za.boolean),forcedJSONParsing:za.transitional(za.boolean),clarifyTimeoutError:za.transitional(za.boolean)},!1),c!=null&&(F.isFunction(c)?s.paramsSerializer={serialize:c}:Hc.assertOptions(c,{encode:za.function,serialize:za.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Hc.assertOptions(s,{baseUrl:za.spelling("baseURL"),withXsrfToken:za.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let f=u&&F.merge(u.common,u[s.method]);u&&F.forEach(["delete","get","head","post","put","patch","common"],w=>{delete u[w]}),s.headers=qn.concat(f,u);const h=[];let m=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(s)===!1||(m=m&&A.synchronous,h.unshift(A.fulfilled,A.rejected))});const g=[];this.interceptors.response.forEach(function(A){g.push(A.fulfilled,A.rejected)});let y,v=0,_;if(!m){const w=[Lv.bind(this),void 0];for(w.unshift(...h),w.push(...g),_=w.length,y=Promise.resolve(s);v<_;)y=y.then(w[v++],w[v++]);return y}_=h.length;let C=s;for(;v<_;){const w=h[v++],A=h[v++];try{C=w(C)}catch(M){A.call(this,M);break}}try{y=Lv.call(this,C)}catch(w){return Promise.reject(w)}for(v=0,_=g.length;v<_;)y=y.then(g[v++],g[v++]);return y}getUri(n){n=Ei(this.defaults,n);const s=Zb(n.baseURL,n.url,n.allowAbsoluteUrls);return Yb(s,n.params,n.paramsSerializer)}};F.forEach(["delete","get","head","options"],function(n){ji.prototype[n]=function(s,o){return this.request(Ei(o||{},{method:n,url:s,data:(o||{}).data}))}});F.forEach(["post","put","patch"],function(n){function s(o){return function(u,f,h){return this.request(Ei(h||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:u,data:f}))}}ji.prototype[n]=s(),ji.prototype[n+"Form"]=s(!0)});let fj=class a0{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(u){s=u});const o=this;this.promise.then(c=>{if(!o._listeners)return;let u=o._listeners.length;for(;u-- >0;)o._listeners[u](c);o._listeners=null}),this.promise.then=c=>{let u;const f=new Promise(h=>{o.subscribe(h),u=h}).then(c);return f.cancel=function(){o.unsubscribe(u)},f},n(function(u,f,h){o.reason||(o.reason=new Ro(u,f,h),s(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const s=this._listeners.indexOf(n);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const n=new AbortController,s=o=>{n.abort(o)};return this.subscribe(s),n.signal.unsubscribe=()=>this.unsubscribe(s),n.signal}static source(){let n;return{token:new a0(function(c){n=c}),cancel:n}}};function pj(t){return function(s){return t.apply(null,s)}}function hj(t){return F.isObject(t)&&t.isAxiosError===!0}const fp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(fp).forEach(([t,n])=>{fp[n]=t});function s0(t){const n=new ji(t),s=zb(ji.prototype.request,n);return F.extend(s,ji.prototype,n,{allOwnKeys:!0}),F.extend(s,n,null,{allOwnKeys:!0}),s.create=function(c){return s0(Ei(t,c))},s}const nn=s0(al);nn.Axios=ji;nn.CanceledError=Ro;nn.CancelToken=fj;nn.isCancel=Kb;nn.VERSION=n0;nn.toFormData=pu;nn.AxiosError=We;nn.Cancel=nn.CanceledError;nn.all=function(n){return Promise.all(n)};nn.spread=pj;nn.isAxiosError=hj;nn.mergeConfig=Ei;nn.AxiosHeaders=qn;nn.formToJSON=t=>Xb(F.isHTMLForm(t)?new FormData(t):t);nn.getAdapter=t0.getAdapter;nn.HttpStatusCode=fp;nn.default=nn;const{Axios:DU,AxiosError:BU,CanceledError:zU,isCancel:UU,CancelToken:IU,VERSION:OU,all:LU,Cancel:PU,isAxiosError:HU,spread:VU,toFormData:FU,AxiosHeaders:$U,HttpStatusCode:qU,formToJSON:GU,getAdapter:YU,mergeConfig:WU}=nn,mj="https://your-domain.com/api",Ee=nn.create({baseURL:mj,headers:{"Content-Type":"application/json"},withCredentials:!0});Ee.interceptors.request.use(t=>{const n=localStorage.getItem("token");return n&&(console.log("[API] Adding token to request:",t.url,"Token:",n.substring(0,20)+"..."),t.headers.Authorization=`Bearer ${n}`),t});Ee.interceptors.response.use(t=>t,t=>(t.response?.status===401?(console.warn("[API] 401 Unauthorized - logging out user"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"):t.response?.status===400&&console.error("[API] 400 Bad Request:",t.response?.data),Promise.reject(t)));const Gs={login:async t=>{const n=await Ee.post("/auth/login",t);return n.data?.data||n.data},register:async t=>{const n=await Ee.post("/auth/register",t);return n.data?.data||n.data},sendOTP:async t=>(await Ee.post(`/otp/send-to-email?email=${encodeURIComponent(t)}`)).data,updatePassword:async(t,n)=>(await Ee.put("/auth/update-password",{oldPassword:t,newPassword:n})).data,resetPasswordByEmail:async(t,n,s)=>(await Ee.put("/auth/reset-password-by-email",{email:t,password:n,otp:s})).data,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")}};function Fe(t,n="An error occurred"){if(t.response?.data?.error?.message)return t.response.data.error.message;if(t.response?.data?.message)return t.response.data.message;if(t.response?.data?.validationErrors){const s=t.response.data.validationErrors,o=Object.values(s)[0];if(Array.isArray(o)&&o.length>0)return o[0]}return t.message?t.message:n}function sl(t){return t.response?.data?.error?.code?t.response.data.error.code:null}function pp(t){return sl(t)==="Chat.Ban.UserBanned"}function Ir(t){switch(sl(t)){case"Chat.Ban.UserBanned":return"You are banned from this chat and cannot perform this action.";case"Chat.Ban.AlreadyBanned":return"This user is already banned from this chat.";case"Chat.Ban.CannotBanSelf":return"You cannot ban yourself.";case"Chat.Ban.CannotBanOwner":return"You cannot ban the owner of this chat.";default:return Fe(t,"An error occurred")}}function gj(t){const n=sl(t);return n==="UserBan.UserBanned"||n==="UserBan.CannotMessageBannedUser"}function yj(t){return sl(t)==="UserBan.UserBanned"}function vj(t){switch(sl(t)){case"UserBan.UserBanned":return"This user has blocked you. You cannot send them messages.";case"UserBan.CannotMessageBannedUser":return"You have blocked this user. Unblock them to send messages.";case"UserBan.AlreadyBanned":return"You have already blocked this user.";case"UserBan.CannotBanSelf":return"You cannot block yourself.";case"UserBan.NotFound":return"Block record not found.";default:return Fe(t,"An error occurred")}}const xj=()=>{try{return localStorage.getItem("token")}catch{return null}},bj=()=>{try{const t=localStorage.getItem("user");return t?JSON.parse(t):null}catch{return null}},Ct=cu(t=>({user:null,token:null,isLoading:!1,error:null,initialized:!1,initializeAuth:async()=>{const n=bj(),s=xj();if(console.log("[authStore] Initializing auth:",{hasUser:!!n,hasToken:!!s,user:n}),s&&n)try{console.log("[authStore] Validating stored token...");const{userService:o}=await bt(async()=>{const{userService:u}=await Promise.resolve().then(()=>Vn);return{userService:u}},void 0),c=await o.getCurrentUser();console.log("[authStore] Token is valid, user:",c),t({user:c,token:s,initialized:!0})}catch(o){console.warn("[authStore] Stored token is invalid, clearing auth:",o?.message),localStorage.removeItem("token"),localStorage.removeItem("user"),t({user:null,token:null,initialized:!0})}else t({user:n,token:s,initialized:!0})},login:async n=>{t({isLoading:!0,error:null});try{console.log("[authStore] Logging in...");const s=await Gs.login(n);if(console.log("[authStore] Token received:",s?s.substring(0,20)+"...":"No token"),!s)throw new Error("No token received from login");localStorage.setItem("token",s),console.log("[authStore] Fetching user profile from /users/me...");const{userService:o}=await bt(async()=>{const{userService:u}=await Promise.resolve().then(()=>Vn);return{userService:u}},void 0),c=await o.getCurrentUser();!c.email&&n.credential.includes("@")&&(c.email=n.credential),console.log("[authStore] User profile fetched:",c),localStorage.setItem("user",JSON.stringify(c)),console.log("[authStore] Updating state with user and token..."),t({user:c,token:s,isLoading:!1}),console.log("[authStore] Login complete, state updated")}catch(s){const o=Fe(s,"Login failed");throw console.error("[authStore] Login error:",o,s),t({error:o,isLoading:!1}),s}},register:async(n,s,o,c)=>{t({isLoading:!0,error:null});try{console.log("[authStore] Registering user...");const u=await Gs.register({email:n,username:s,password:o,otpCode:c});if(console.log("[authStore] Token received:",u?u.substring(0,20)+"...":"No token"),!u)throw new Error("No token received from registration");localStorage.setItem("token",u),console.log("[authStore] Fetching user profile from /users/me...");const{userService:f}=await bt(async()=>{const{userService:m}=await Promise.resolve().then(()=>Vn);return{userService:m}},void 0),h=await f.getCurrentUser();h.email||(h.email=n),console.log("[authStore] User profile fetched:",h),localStorage.setItem("user",JSON.stringify(h)),console.log("[authStore] Updating state with user and token..."),t({user:h,token:u,isLoading:!1}),console.log("[authStore] Registration complete, state updated")}catch(u){const f=Fe(u,"Registration failed");throw console.error("[authStore] Registration error:",f,u),t({error:f,isLoading:!1}),u}},logout:()=>{Gs.logout(),t({user:null,token:null})},setUser:n=>{localStorage.setItem("user",JSON.stringify(n)),t({user:n})},clearError:()=>t({error:null})})),il=()=>{const t=Ct(v=>v.user),n=Ct(v=>v.token),s=Ct(v=>v.isLoading),o=Ct(v=>v.initialized),c=Ct(v=>v.error),u=Ct(v=>v.login),f=Ct(v=>v.register),h=Ct(v=>v.logout),m=Ct(v=>v.setUser),g=Ct(v=>v.clearError),y=Ct(v=>v.initializeAuth);return{user:t,token:n,isLoading:s,initialized:o,error:c,login:u,register:f,logout:h,setUser:m,clearError:g,initializeAuth:y,isAuthenticated:!!n&&!!t}},Hv=({children:t})=>{const{isAuthenticated:n,isLoading:s,initialized:o}=il();return console.log("[ProtectedRoute] Current state:",{isAuthenticated:n,isLoading:s,initialized:o}),s||!o?l.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"var(--background)",color:"var(--text)"},children:l.jsx("div",{children:"Loading..."})}):n?l.jsx(l.Fragment,{children:t}):(console.warn("[ProtectedRoute] Not authenticated, redirecting to login"),l.jsx(mo,{to:"/login",replace:!0}))},Zp=b.createContext({});function Jp(t){const n=b.useRef(null);return n.current===null&&(n.current=t()),n.current}const eh=typeof window<"u",i0=eh?b.useLayoutEffect:b.useEffect,mu=b.createContext(null);function th(t,n){t.indexOf(n)===-1&&t.push(n)}function nh(t,n){const s=t.indexOf(n);s>-1&&t.splice(s,1)}const cs=(t,n,s)=>s>n?n:s<t?t:s;let ah=()=>{};const us={},o0=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function r0(t){return typeof t=="object"&&t!==null}const l0=t=>/^0[^.\s]+$/u.test(t);function sh(t){let n;return()=>(n===void 0&&(n=t()),n)}const ha=t=>t,Sj=(t,n)=>s=>n(t(s)),ol=(...t)=>t.reduce(Sj),Gr=(t,n,s)=>{const o=n-t;return o===0?1:(s-t)/o};class ih{constructor(){this.subscriptions=[]}add(n){return th(this.subscriptions,n),()=>nh(this.subscriptions,n)}notify(n,s,o){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](n,s,o);else for(let u=0;u<c;u++){const f=this.subscriptions[u];f&&f(n,s,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Pa=t=>t*1e3,pa=t=>t/1e3;function c0(t,n){return n?t*(1e3/n):0}const u0=(t,n,s)=>(((1-3*s+3*n)*t+(3*s-6*n))*t+3*n)*t,_j=1e-7,wj=12;function Cj(t,n,s,o,c){let u,f,h=0;do f=n+(s-n)/2,u=u0(f,o,c)-t,u>0?s=f:n=f;while(Math.abs(u)>_j&&++h<wj);return f}function rl(t,n,s,o){if(t===n&&s===o)return ha;const c=u=>Cj(u,0,1,t,s);return u=>u===0||u===1?u:u0(c(u),n,o)}const d0=t=>n=>n<=.5?t(2*n)/2:(2-t(2*(1-n)))/2,f0=t=>n=>1-t(1-n),p0=rl(.33,1.53,.69,.99),oh=f0(p0),h0=d0(oh),m0=t=>(t*=2)<1?.5*oh(t):.5*(2-Math.pow(2,-10*(t-1))),rh=t=>1-Math.sin(Math.acos(t)),g0=f0(rh),y0=d0(rh),jj=rl(.42,0,1,1),Tj=rl(0,0,.58,1),v0=rl(.42,0,.58,1),kj=t=>Array.isArray(t)&&typeof t[0]!="number",x0=t=>Array.isArray(t)&&typeof t[0]=="number",Aj={linear:ha,easeIn:jj,easeInOut:v0,easeOut:Tj,circIn:rh,circInOut:y0,circOut:g0,backIn:oh,backInOut:h0,backOut:p0,anticipate:m0},Mj=t=>typeof t=="string",Vv=t=>{if(x0(t)){ah(t.length===4);const[n,s,o,c]=t;return rl(n,s,o,c)}else if(Mj(t))return Aj[t];return t},Rc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Ej(t,n){let s=new Set,o=new Set,c=!1,u=!1;const f=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function m(y){f.has(y)&&(g.schedule(y),t()),y(h)}const g={schedule:(y,v=!1,_=!1)=>{const w=_&&c?s:o;return v&&f.add(y),w.has(y)||w.add(y),y},cancel:y=>{o.delete(y),f.delete(y)},process:y=>{if(h=y,c){u=!0;return}c=!0,[s,o]=[o,s],s.forEach(m),s.clear(),c=!1,u&&(u=!1,g.process(y))}};return g}const Rj=40;function b0(t,n){let s=!1,o=!0;const c={delta:0,timestamp:0,isProcessing:!1},u=()=>s=!0,f=Rc.reduce((E,U)=>(E[U]=Ej(u),E),{}),{setup:h,read:m,resolveKeyframes:g,preUpdate:y,update:v,preRender:_,render:C,postRender:w}=f,A=()=>{const E=us.useManualTiming?c.timestamp:performance.now();s=!1,us.useManualTiming||(c.delta=o?1e3/60:Math.max(Math.min(E-c.timestamp,Rj),1)),c.timestamp=E,c.isProcessing=!0,h.process(c),m.process(c),g.process(c),y.process(c),v.process(c),_.process(c),C.process(c),w.process(c),c.isProcessing=!1,s&&n&&(o=!1,t(A))},M=()=>{s=!0,o=!0,c.isProcessing||t(A)};return{schedule:Rc.reduce((E,U)=>{const H=f[U];return E[U]=(ee,re=!1,Z=!1)=>(s||M(),H.schedule(ee,re,Z)),E},{}),cancel:E=>{for(let U=0;U<Rc.length;U++)f[Rc[U]].cancel(E)},state:c,steps:f}}const{schedule:It,cancel:Xs,state:jn,steps:Bf}=b0(typeof requestAnimationFrame<"u"?requestAnimationFrame:ha,!0);let Vc;function Nj(){Vc=void 0}const Fn={now:()=>(Vc===void 0&&Fn.set(jn.isProcessing||us.useManualTiming?jn.timestamp:performance.now()),Vc),set:t=>{Vc=t,queueMicrotask(Nj)}},S0=t=>n=>typeof n=="string"&&n.startsWith(t),_0=S0("--"),Dj=S0("var(--"),lh=t=>Dj(t)?Bj.test(t.split("/*")[0].trim()):!1,Bj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,No={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Yr={...No,transform:t=>cs(0,1,t)},Nc={...No,default:1},Or=t=>Math.round(t*1e5)/1e5,ch=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zj(t){return t==null}const Uj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,uh=(t,n)=>s=>!!(typeof s=="string"&&Uj.test(s)&&s.startsWith(t)||n&&!zj(s)&&Object.prototype.hasOwnProperty.call(s,n)),w0=(t,n,s)=>o=>{if(typeof o!="string")return o;const[c,u,f,h]=o.match(ch);return{[t]:parseFloat(c),[n]:parseFloat(u),[s]:parseFloat(f),alpha:h!==void 0?parseFloat(h):1}},Ij=t=>cs(0,255,t),zf={...No,transform:t=>Math.round(Ij(t))},_i={test:uh("rgb","red"),parse:w0("red","green","blue"),transform:({red:t,green:n,blue:s,alpha:o=1})=>"rgba("+zf.transform(t)+", "+zf.transform(n)+", "+zf.transform(s)+", "+Or(Yr.transform(o))+")"};function Oj(t){let n="",s="",o="",c="";return t.length>5?(n=t.substring(1,3),s=t.substring(3,5),o=t.substring(5,7),c=t.substring(7,9)):(n=t.substring(1,2),s=t.substring(2,3),o=t.substring(3,4),c=t.substring(4,5),n+=n,s+=s,o+=o,c+=c),{red:parseInt(n,16),green:parseInt(s,16),blue:parseInt(o,16),alpha:c?parseInt(c,16)/255:1}}const hp={test:uh("#"),parse:Oj,transform:_i.transform},ll=t=>({test:n=>typeof n=="string"&&n.endsWith(t)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${t}`}),qs=ll("deg"),Ha=ll("%"),Le=ll("px"),Lj=ll("vh"),Pj=ll("vw"),Fv={...Ha,parse:t=>Ha.parse(t)/100,transform:t=>Ha.transform(t*100)},go={test:uh("hsl","hue"),parse:w0("hue","saturation","lightness"),transform:({hue:t,saturation:n,lightness:s,alpha:o=1})=>"hsla("+Math.round(t)+", "+Ha.transform(Or(n))+", "+Ha.transform(Or(s))+", "+Or(Yr.transform(o))+")"},un={test:t=>_i.test(t)||hp.test(t)||go.test(t),parse:t=>_i.test(t)?_i.parse(t):go.test(t)?go.parse(t):hp.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_i.transform(t):go.transform(t),getAnimatableNone:t=>{const n=un.parse(t);return n.alpha=0,un.transform(n)}},Hj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Vj(t){return isNaN(t)&&typeof t=="string"&&(t.match(ch)?.length||0)+(t.match(Hj)?.length||0)>0}const C0="number",j0="color",Fj="var",$j="var(",$v="${}",qj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wr(t){const n=t.toString(),s=[],o={color:[],number:[],var:[]},c=[];let u=0;const h=n.replace(qj,m=>(un.test(m)?(o.color.push(u),c.push(j0),s.push(un.parse(m))):m.startsWith($j)?(o.var.push(u),c.push(Fj),s.push(m)):(o.number.push(u),c.push(C0),s.push(parseFloat(m))),++u,$v)).split($v);return{values:s,split:h,indexes:o,types:c}}function T0(t){return Wr(t).values}function k0(t){const{split:n,types:s}=Wr(t),o=n.length;return c=>{let u="";for(let f=0;f<o;f++)if(u+=n[f],c[f]!==void 0){const h=s[f];h===C0?u+=Or(c[f]):h===j0?u+=un.transform(c[f]):u+=c[f]}return u}}const Gj=t=>typeof t=="number"?0:un.test(t)?un.getAnimatableNone(t):t;function Yj(t){const n=T0(t);return k0(t)(n.map(Gj))}const Ks={test:Vj,parse:T0,createTransformer:k0,getAnimatableNone:Yj};function Uf(t,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(n-t)*6*s:s<1/2?n:s<2/3?t+(n-t)*(2/3-s)*6:t}function Wj({hue:t,saturation:n,lightness:s,alpha:o}){t/=360,n/=100,s/=100;let c=0,u=0,f=0;if(!n)c=u=f=s;else{const h=s<.5?s*(1+n):s+n-s*n,m=2*s-h;c=Uf(m,h,t+1/3),u=Uf(m,h,t),f=Uf(m,h,t-1/3)}return{red:Math.round(c*255),green:Math.round(u*255),blue:Math.round(f*255),alpha:o}}function Qc(t,n){return s=>s>0?n:t}const Ft=(t,n,s)=>t+(n-t)*s,If=(t,n,s)=>{const o=t*t,c=s*(n*n-o)+o;return c<0?0:Math.sqrt(c)},Xj=[hp,_i,go],Kj=t=>Xj.find(n=>n.test(t));function qv(t){const n=Kj(t);if(!n)return!1;let s=n.parse(t);return n===go&&(s=Wj(s)),s}const Gv=(t,n)=>{const s=qv(t),o=qv(n);if(!s||!o)return Qc(t,n);const c={...s};return u=>(c.red=If(s.red,o.red,u),c.green=If(s.green,o.green,u),c.blue=If(s.blue,o.blue,u),c.alpha=Ft(s.alpha,o.alpha,u),_i.transform(c))},mp=new Set(["none","hidden"]);function Qj(t,n){return mp.has(t)?s=>s<=0?t:n:s=>s>=1?n:t}function Zj(t,n){return s=>Ft(t,n,s)}function dh(t){return typeof t=="number"?Zj:typeof t=="string"?lh(t)?Qc:un.test(t)?Gv:tT:Array.isArray(t)?A0:typeof t=="object"?un.test(t)?Gv:Jj:Qc}function A0(t,n){const s=[...t],o=s.length,c=t.map((u,f)=>dh(u)(u,n[f]));return u=>{for(let f=0;f<o;f++)s[f]=c[f](u);return s}}function Jj(t,n){const s={...t,...n},o={};for(const c in s)t[c]!==void 0&&n[c]!==void 0&&(o[c]=dh(t[c])(t[c],n[c]));return c=>{for(const u in o)s[u]=o[u](c);return s}}function eT(t,n){const s=[],o={color:0,var:0,number:0};for(let c=0;c<n.values.length;c++){const u=n.types[c],f=t.indexes[u][o[u]],h=t.values[f]??0;s[c]=h,o[u]++}return s}const tT=(t,n)=>{const s=Ks.createTransformer(n),o=Wr(t),c=Wr(n);return o.indexes.var.length===c.indexes.var.length&&o.indexes.color.length===c.indexes.color.length&&o.indexes.number.length>=c.indexes.number.length?mp.has(t)&&!c.values.length||mp.has(n)&&!o.values.length?Qj(t,n):ol(A0(eT(o,c),c.values),s):Qc(t,n)};function M0(t,n,s){return typeof t=="number"&&typeof n=="number"&&typeof s=="number"?Ft(t,n,s):dh(t)(t,n)}const nT=t=>{const n=({timestamp:s})=>t(s);return{start:(s=!0)=>It.update(n,s),stop:()=>Xs(n),now:()=>jn.isProcessing?jn.timestamp:Fn.now()}},E0=(t,n,s=10)=>{let o="";const c=Math.max(Math.round(n/s),2);for(let u=0;u<c;u++)o+=Math.round(t(u/(c-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},Zc=2e4;function fh(t){let n=0;const s=50;let o=t.next(n);for(;!o.done&&n<Zc;)n+=s,o=t.next(n);return n>=Zc?1/0:n}function aT(t,n=100,s){const o=s({...t,keyframes:[0,n]}),c=Math.min(fh(o),Zc);return{type:"keyframes",ease:u=>o.next(c*u).value/n,duration:pa(c)}}const sT=5;function R0(t,n,s){const o=Math.max(n-sT,0);return c0(s-t(o),n-o)}const Kt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Of=.001;function iT({duration:t=Kt.duration,bounce:n=Kt.bounce,velocity:s=Kt.velocity,mass:o=Kt.mass}){let c,u,f=1-n;f=cs(Kt.minDamping,Kt.maxDamping,f),t=cs(Kt.minDuration,Kt.maxDuration,pa(t)),f<1?(c=g=>{const y=g*f,v=y*t,_=y-s,C=gp(g,f),w=Math.exp(-v);return Of-_/C*w},u=g=>{const v=g*f*t,_=v*s+s,C=Math.pow(f,2)*Math.pow(g,2)*t,w=Math.exp(-v),A=gp(Math.pow(g,2),f);return(-c(g)+Of>0?-1:1)*((_-C)*w)/A}):(c=g=>{const y=Math.exp(-g*t),v=(g-s)*t+1;return-Of+y*v},u=g=>{const y=Math.exp(-g*t),v=(s-g)*(t*t);return y*v});const h=5/t,m=rT(c,u,h);if(t=Pa(t),isNaN(m))return{stiffness:Kt.stiffness,damping:Kt.damping,duration:t};{const g=Math.pow(m,2)*o;return{stiffness:g,damping:f*2*Math.sqrt(o*g),duration:t}}}const oT=12;function rT(t,n,s){let o=s;for(let c=1;c<oT;c++)o=o-t(o)/n(o);return o}function gp(t,n){return t*Math.sqrt(1-n*n)}const lT=["duration","bounce"],cT=["stiffness","damping","mass"];function Yv(t,n){return n.some(s=>t[s]!==void 0)}function uT(t){let n={velocity:Kt.velocity,stiffness:Kt.stiffness,damping:Kt.damping,mass:Kt.mass,isResolvedFromDuration:!1,...t};if(!Yv(t,cT)&&Yv(t,lT))if(t.visualDuration){const s=t.visualDuration,o=2*Math.PI/(s*1.2),c=o*o,u=2*cs(.05,1,1-(t.bounce||0))*Math.sqrt(c);n={...n,mass:Kt.mass,stiffness:c,damping:u}}else{const s=iT(t);n={...n,...s,mass:Kt.mass},n.isResolvedFromDuration=!0}return n}function Jc(t=Kt.visualDuration,n=Kt.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:n}:t;let{restSpeed:o,restDelta:c}=s;const u=s.keyframes[0],f=s.keyframes[s.keyframes.length-1],h={done:!1,value:u},{stiffness:m,damping:g,mass:y,duration:v,velocity:_,isResolvedFromDuration:C}=uT({...s,velocity:-pa(s.velocity||0)}),w=_||0,A=g/(2*Math.sqrt(m*y)),M=f-u,B=pa(Math.sqrt(m/y)),P=Math.abs(M)<5;o||(o=P?Kt.restSpeed.granular:Kt.restSpeed.default),c||(c=P?Kt.restDelta.granular:Kt.restDelta.default);let E;if(A<1){const H=gp(B,A);E=ee=>{const re=Math.exp(-A*B*ee);return f-re*((w+A*B*M)/H*Math.sin(H*ee)+M*Math.cos(H*ee))}}else if(A===1)E=H=>f-Math.exp(-B*H)*(M+(w+B*M)*H);else{const H=B*Math.sqrt(A*A-1);E=ee=>{const re=Math.exp(-A*B*ee),Z=Math.min(H*ee,300);return f-re*((w+A*B*M)*Math.sinh(Z)+H*M*Math.cosh(Z))/H}}const U={calculatedDuration:C&&v||null,next:H=>{const ee=E(H);if(C)h.done=H>=v;else{let re=H===0?w:0;A<1&&(re=H===0?Pa(w):R0(E,H,ee));const Z=Math.abs(re)<=o,pe=Math.abs(f-ee)<=c;h.done=Z&&pe}return h.value=h.done?f:ee,h},toString:()=>{const H=Math.min(fh(U),Zc),ee=E0(re=>U.next(H*re).value,H,30);return H+"ms "+ee},toTransition:()=>{}};return U}Jc.applyToOptions=t=>{const n=aT(t,100,Jc);return t.ease=n.ease,t.duration=Pa(n.duration),t.type="keyframes",t};function yp({keyframes:t,velocity:n=0,power:s=.8,timeConstant:o=325,bounceDamping:c=10,bounceStiffness:u=500,modifyTarget:f,min:h,max:m,restDelta:g=.5,restSpeed:y}){const v=t[0],_={done:!1,value:v},C=Z=>h!==void 0&&Z<h||m!==void 0&&Z>m,w=Z=>h===void 0?m:m===void 0||Math.abs(h-Z)<Math.abs(m-Z)?h:m;let A=s*n;const M=v+A,B=f===void 0?M:f(M);B!==M&&(A=B-v);const P=Z=>-A*Math.exp(-Z/o),E=Z=>B+P(Z),U=Z=>{const pe=P(Z),ue=E(Z);_.done=Math.abs(pe)<=g,_.value=_.done?B:ue};let H,ee;const re=Z=>{C(_.value)&&(H=Z,ee=Jc({keyframes:[_.value,w(_.value)],velocity:R0(E,Z,_.value),damping:c,stiffness:u,restDelta:g,restSpeed:y}))};return re(0),{calculatedDuration:null,next:Z=>{let pe=!1;return!ee&&H===void 0&&(pe=!0,U(Z),re(Z)),H!==void 0&&Z>=H?ee.next(Z-H):(!pe&&U(Z),_)}}}function dT(t,n,s){const o=[],c=s||us.mix||M0,u=t.length-1;for(let f=0;f<u;f++){let h=c(t[f],t[f+1]);if(n){const m=Array.isArray(n)?n[f]||ha:n;h=ol(m,h)}o.push(h)}return o}function fT(t,n,{clamp:s=!0,ease:o,mixer:c}={}){const u=t.length;if(ah(u===n.length),u===1)return()=>n[0];if(u===2&&n[0]===n[1])return()=>n[1];const f=t[0]===t[1];t[0]>t[u-1]&&(t=[...t].reverse(),n=[...n].reverse());const h=dT(n,o,c),m=h.length,g=y=>{if(f&&y<t[0])return n[0];let v=0;if(m>1)for(;v<t.length-2&&!(y<t[v+1]);v++);const _=Gr(t[v],t[v+1],y);return h[v](_)};return s?y=>g(cs(t[0],t[u-1],y)):g}function pT(t,n){const s=t[t.length-1];for(let o=1;o<=n;o++){const c=Gr(0,n,o);t.push(Ft(s,1,c))}}function hT(t){const n=[0];return pT(n,t.length-1),n}function mT(t,n){return t.map(s=>s*n)}function gT(t,n){return t.map(()=>n||v0).splice(0,t.length-1)}function Lr({duration:t=300,keyframes:n,times:s,ease:o="easeInOut"}){const c=kj(o)?o.map(Vv):Vv(o),u={done:!1,value:n[0]},f=mT(s&&s.length===n.length?s:hT(n),t),h=fT(f,n,{ease:Array.isArray(c)?c:gT(n,c)});return{calculatedDuration:t,next:m=>(u.value=h(m),u.done=m>=t,u)}}const yT=t=>t!==null;function ph(t,{repeat:n,repeatType:s="loop"},o,c=1){const u=t.filter(yT),h=c<0||n&&s!=="loop"&&n%2===1?0:u.length-1;return!h||o===void 0?u[h]:o}const vT={decay:yp,inertia:yp,tween:Lr,keyframes:Lr,spring:Jc};function N0(t){typeof t.type=="string"&&(t.type=vT[t.type])}class hh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,s){return this.finished.then(n,s)}}const xT=t=>t/100;class mh extends hh{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==Fn.now()&&this.tick(Fn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;N0(n);const{type:s=Lr,repeat:o=0,repeatDelay:c=0,repeatType:u,velocity:f=0}=n;let{keyframes:h}=n;const m=s||Lr;m!==Lr&&typeof h[0]!="number"&&(this.mixKeyframes=ol(xT,M0(h[0],h[1])),h=[0,100]);const g=m({...n,keyframes:h});u==="mirror"&&(this.mirroredGenerator=m({...n,keyframes:[...h].reverse(),velocity:-f})),g.calculatedDuration===null&&(g.calculatedDuration=fh(g));const{calculatedDuration:y}=g;this.calculatedDuration=y,this.resolvedDuration=y+c,this.totalDuration=this.resolvedDuration*(o+1)-c,this.generator=g}updateTime(n){const s=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(n,s=!1){const{generator:o,totalDuration:c,mixKeyframes:u,mirroredGenerator:f,resolvedDuration:h,calculatedDuration:m}=this;if(this.startTime===null)return o.next(0);const{delay:g=0,keyframes:y,repeat:v,repeatType:_,repeatDelay:C,type:w,onUpdate:A,finalKeyframe:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-c/this.speed,this.startTime)),s?this.currentTime=n:this.updateTime(n);const B=this.currentTime-g*(this.playbackSpeed>=0?1:-1),P=this.playbackSpeed>=0?B<0:B>c;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let E=this.currentTime,U=o;if(v){const Z=Math.min(this.currentTime,c)/h;let pe=Math.floor(Z),ue=Z%1;!ue&&Z>=1&&(ue=1),ue===1&&pe--,pe=Math.min(pe,v+1),!!(pe%2)&&(_==="reverse"?(ue=1-ue,C&&(ue-=C/h)):_==="mirror"&&(U=f)),E=cs(0,1,ue)*h}const H=P?{done:!1,value:y[0]}:U.next(E);u&&(H.value=u(H.value));let{done:ee}=H;!P&&m!==null&&(ee=this.playbackSpeed>=0?this.currentTime>=c:this.currentTime<=0);const re=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ee);return re&&w!==yp&&(H.value=ph(y,this.options,M,this.speed)),A&&A(H.value),re&&this.finish(),H}then(n,s){return this.finished.then(n,s)}get duration(){return pa(this.calculatedDuration)}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+pa(n)}get time(){return pa(this.currentTime)}set time(n){n=Pa(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(Fn.now());const s=this.playbackSpeed!==n;this.playbackSpeed=n,s&&(this.time=pa(this.currentTime))}play(){if(this.isStopped)return;const{driver:n=nT,startTime:s}=this.options;this.driver||(this.driver=n(c=>this.tick(c))),this.options.onPlay?.();const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=s??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Fn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),n.observe(this)}}function bT(t){for(let n=1;n<t.length;n++)t[n]??(t[n]=t[n-1])}const wi=t=>t*180/Math.PI,vp=t=>{const n=wi(Math.atan2(t[1],t[0]));return xp(n)},ST={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:vp,rotateZ:vp,skewX:t=>wi(Math.atan(t[1])),skewY:t=>wi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},xp=t=>(t=t%360,t<0&&(t+=360),t),Wv=vp,Xv=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Kv=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),_T={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Xv,scaleY:Kv,scale:t=>(Xv(t)+Kv(t))/2,rotateX:t=>xp(wi(Math.atan2(t[6],t[5]))),rotateY:t=>xp(wi(Math.atan2(-t[2],t[0]))),rotateZ:Wv,rotate:Wv,skewX:t=>wi(Math.atan(t[4])),skewY:t=>wi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function bp(t){return t.includes("scale")?1:0}function Sp(t,n){if(!t||t==="none")return bp(n);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,c;if(s)o=_T,c=s;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=ST,c=h}if(!c)return bp(n);const u=o[n],f=c[1].split(",").map(CT);return typeof u=="function"?u(f):f[u]}const wT=(t,n)=>{const{transform:s="none"}=getComputedStyle(t);return Sp(s,n)};function CT(t){return parseFloat(t.trim())}const Do=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bo=new Set(Do),Qv=t=>t===No||t===Le,jT=new Set(["x","y","z"]),TT=Do.filter(t=>!jT.has(t));function kT(t){const n=[];return TT.forEach(s=>{const o=t.getValue(s);o!==void 0&&(n.push([s,o.get()]),o.set(s.startsWith("scale")?1:0))}),n}const Ti={width:({x:t},{paddingLeft:n="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(n)-parseFloat(s),height:({y:t},{paddingTop:n="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(n)-parseFloat(s),top:(t,{top:n})=>parseFloat(n),left:(t,{left:n})=>parseFloat(n),bottom:({y:t},{top:n})=>parseFloat(n)+(t.max-t.min),right:({x:t},{left:n})=>parseFloat(n)+(t.max-t.min),x:(t,{transform:n})=>Sp(n,"x"),y:(t,{transform:n})=>Sp(n,"y")};Ti.translateX=Ti.x;Ti.translateY=Ti.y;const ki=new Set;let _p=!1,wp=!1,Cp=!1;function D0(){if(wp){const t=Array.from(ki).filter(o=>o.needsMeasurement),n=new Set(t.map(o=>o.element)),s=new Map;n.forEach(o=>{const c=kT(o);c.length&&(s.set(o,c),o.render())}),t.forEach(o=>o.measureInitialState()),n.forEach(o=>{o.render();const c=s.get(o);c&&c.forEach(([u,f])=>{o.getValue(u)?.set(f)})}),t.forEach(o=>o.measureEndState()),t.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}wp=!1,_p=!1,ki.forEach(t=>t.complete(Cp)),ki.clear()}function B0(){ki.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(wp=!0)})}function AT(){Cp=!0,B0(),D0(),Cp=!1}class gh{constructor(n,s,o,c,u,f=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=s,this.name=o,this.motionValue=c,this.element=u,this.isAsync=f}scheduleResolve(){this.state="scheduled",this.isAsync?(ki.add(this),_p||(_p=!0,It.read(B0),It.resolveKeyframes(D0))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:s,element:o,motionValue:c}=this;if(n[0]===null){const u=c?.get(),f=n[n.length-1];if(u!==void 0)n[0]=u;else if(o&&s){const h=o.readValue(s,f);h!=null&&(n[0]=h)}n[0]===void 0&&(n[0]=f),c&&u===void 0&&c.set(n[0])}bT(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),ki.delete(this)}cancel(){this.state==="scheduled"&&(ki.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const MT=t=>t.startsWith("--");function ET(t,n,s){MT(n)?t.style.setProperty(n,s):t.style[n]=s}const RT=sh(()=>window.ScrollTimeline!==void 0),NT={};function DT(t,n){const s=sh(t);return()=>NT[n]??s()}const z0=DT(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zr=([t,n,s,o])=>`cubic-bezier(${t}, ${n}, ${s}, ${o})`,Zv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zr([0,.65,.55,1]),circOut:zr([.55,0,1,.45]),backIn:zr([.31,.01,.66,-.59]),backOut:zr([.33,1.53,.69,.99])};function U0(t,n){if(t)return typeof t=="function"?z0()?E0(t,n):"ease-out":x0(t)?zr(t):Array.isArray(t)?t.map(s=>U0(s,n)||Zv.easeOut):Zv[t]}function BT(t,n,s,{delay:o=0,duration:c=300,repeat:u=0,repeatType:f="loop",ease:h="easeOut",times:m}={},g=void 0){const y={[n]:s};m&&(y.offset=m);const v=U0(h,c);Array.isArray(v)&&(y.easing=v);const _={delay:o,duration:c,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:u+1,direction:f==="reverse"?"alternate":"normal"};return g&&(_.pseudoElement=g),t.animate(y,_)}function I0(t){return typeof t=="function"&&"applyToOptions"in t}function zT({type:t,...n}){return I0(t)&&z0()?t.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class UT extends hh{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:s,name:o,keyframes:c,pseudoElement:u,allowFlatten:f=!1,finalKeyframe:h,onComplete:m}=n;this.isPseudoElement=!!u,this.allowFlatten=f,this.options=n,ah(typeof n.type!="string");const g=zT(n);this.animation=BT(s,o,c,g,u),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const y=ph(c,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(y):ET(s,o,y),this.animation.cancel()}m?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const n=this.animation.effect?.getComputedTiming?.().duration||0;return pa(Number(n))}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+pa(n)}get time(){return pa(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=Pa(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,n&&RT()?(this.animation.timeline=n,ha):s(this)}}const O0={anticipate:m0,backInOut:h0,circInOut:y0};function IT(t){return t in O0}function OT(t){typeof t.ease=="string"&&IT(t.ease)&&(t.ease=O0[t.ease])}const Jv=10;class LT extends UT{constructor(n){OT(n),N0(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:s,onUpdate:o,onComplete:c,element:u,...f}=this.options;if(!s)return;if(n!==void 0){s.set(n);return}const h=new mh({...f,autoplay:!1}),m=Pa(this.finishedTime??this.time);s.setWithVelocity(h.sample(m-Jv).value,h.sample(m).value,Jv),h.stop()}}const ex=(t,n)=>n==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ks.test(t)||t==="0")&&!t.startsWith("url("));function PT(t){const n=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==n)return!0}function HT(t,n,s,o){const c=t[0];if(c===null)return!1;if(n==="display"||n==="visibility")return!0;const u=t[t.length-1],f=ex(c,n),h=ex(u,n);return!f||!h?!1:PT(t)||(s==="spring"||I0(s))&&o}function jp(t){t.duration=0,t.type="keyframes"}const VT=new Set(["opacity","clipPath","filter","transform"]),FT=sh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function $T(t){const{motionValue:n,name:s,repeatDelay:o,repeatType:c,damping:u,type:f}=t;if(!(n?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:g}=n.owner.getProps();return FT()&&s&&VT.has(s)&&(s!=="transform"||!g)&&!m&&!o&&c!=="mirror"&&u!==0&&f!=="inertia"}const qT=40;class GT extends hh{constructor({autoplay:n=!0,delay:s=0,type:o="keyframes",repeat:c=0,repeatDelay:u=0,repeatType:f="loop",keyframes:h,name:m,motionValue:g,element:y,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Fn.now();const _={autoplay:n,delay:s,type:o,repeat:c,repeatDelay:u,repeatType:f,name:m,motionValue:g,element:y,...v},C=y?.KeyframeResolver||gh;this.keyframeResolver=new C(h,(w,A,M)=>this.onKeyframesResolved(w,A,_,!M),m,g,y),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(n,s,o,c){this.keyframeResolver=void 0;const{name:u,type:f,velocity:h,delay:m,isHandoff:g,onUpdate:y}=o;this.resolvedAt=Fn.now(),HT(n,u,f,h)||((us.instantAnimations||!m)&&y?.(ph(n,o,s)),n[0]=n[n.length-1],jp(o),o.repeat=0);const _={startTime:c?this.resolvedAt?this.resolvedAt-this.createdAt>qT?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...o,keyframes:n},C=!g&&$T(_)?new LT({..._,element:_.motionValue.owner.current}):new mh(_);C.finished.then(()=>this.notifyFinished()).catch(ha),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(n,s){return this.finished.finally(n).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),AT()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const YT=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function WT(t){const n=YT.exec(t);if(!n)return[,];const[,s,o,c]=n;return[`--${s??o}`,c]}function L0(t,n,s=1){const[o,c]=WT(t);if(!o)return;const u=window.getComputedStyle(n).getPropertyValue(o);if(u){const f=u.trim();return o0(f)?parseFloat(f):f}return lh(c)?L0(c,n,s+1):c}function yh(t,n){return t?.[n]??t?.default??t}const P0=new Set(["width","height","top","left","right","bottom",...Do]),XT={test:t=>t==="auto",parse:t=>t},H0=t=>n=>n.test(t),V0=[No,Le,Ha,qs,Pj,Lj,XT],tx=t=>V0.find(H0(t));function KT(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||l0(t):!0}const QT=new Set(["brightness","contrast","saturate","opacity"]);function ZT(t){const[n,s]=t.slice(0,-1).split("(");if(n==="drop-shadow")return t;const[o]=s.match(ch)||[];if(!o)return t;const c=s.replace(o,"");let u=QT.has(n)?1:0;return o!==s&&(u*=100),n+"("+u+c+")"}const JT=/\b([a-z-]*)\(.*?\)/gu,Tp={...Ks,getAnimatableNone:t=>{const n=t.match(JT);return n?n.map(ZT).join(" "):t}},nx={...No,transform:Math.round},e2={rotate:qs,rotateX:qs,rotateY:qs,rotateZ:qs,scale:Nc,scaleX:Nc,scaleY:Nc,scaleZ:Nc,skew:qs,skewX:qs,skewY:qs,distance:Le,translateX:Le,translateY:Le,translateZ:Le,x:Le,y:Le,z:Le,perspective:Le,transformPerspective:Le,opacity:Yr,originX:Fv,originY:Fv,originZ:Le},vh={borderWidth:Le,borderTopWidth:Le,borderRightWidth:Le,borderBottomWidth:Le,borderLeftWidth:Le,borderRadius:Le,radius:Le,borderTopLeftRadius:Le,borderTopRightRadius:Le,borderBottomRightRadius:Le,borderBottomLeftRadius:Le,width:Le,maxWidth:Le,height:Le,maxHeight:Le,top:Le,right:Le,bottom:Le,left:Le,padding:Le,paddingTop:Le,paddingRight:Le,paddingBottom:Le,paddingLeft:Le,margin:Le,marginTop:Le,marginRight:Le,marginBottom:Le,marginLeft:Le,backgroundPositionX:Le,backgroundPositionY:Le,...e2,zIndex:nx,fillOpacity:Yr,strokeOpacity:Yr,numOctaves:nx},t2={...vh,color:un,backgroundColor:un,outlineColor:un,fill:un,stroke:un,borderColor:un,borderTopColor:un,borderRightColor:un,borderBottomColor:un,borderLeftColor:un,filter:Tp,WebkitFilter:Tp},F0=t=>t2[t];function $0(t,n){let s=F0(t);return s!==Tp&&(s=Ks),s.getAnimatableNone?s.getAnimatableNone(n):void 0}const n2=new Set(["auto","none","0"]);function a2(t,n,s){let o=0,c;for(;o<t.length&&!c;){const u=t[o];typeof u=="string"&&!n2.has(u)&&Wr(u).values.length&&(c=t[o]),o++}if(c&&s)for(const u of n)t[u]=$0(s,c)}class s2 extends gh{constructor(n,s,o,c,u){super(n,s,o,c,u,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:s,name:o}=this;if(!s||!s.current)return;super.readKeyframes();for(let m=0;m<n.length;m++){let g=n[m];if(typeof g=="string"&&(g=g.trim(),lh(g))){const y=L0(g,s.current);y!==void 0&&(n[m]=y),m===n.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!P0.has(o)||n.length!==2)return;const[c,u]=n,f=tx(c),h=tx(u);if(f!==h)if(Qv(f)&&Qv(h))for(let m=0;m<n.length;m++){const g=n[m];typeof g=="string"&&(n[m]=parseFloat(g))}else Ti[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:s}=this,o=[];for(let c=0;c<n.length;c++)(n[c]===null||KT(n[c]))&&o.push(c);o.length&&a2(n,o,s)}measureInitialState(){const{element:n,unresolvedKeyframes:s,name:o}=this;if(!n||!n.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ti[o](n.measureViewportBox(),window.getComputedStyle(n.current)),s[0]=this.measuredOrigin;const c=s[s.length-1];c!==void 0&&n.getValue(o,c).jump(c,!1)}measureEndState(){const{element:n,name:s,unresolvedKeyframes:o}=this;if(!n||!n.current)return;const c=n.getValue(s);c&&c.jump(this.measuredOrigin,!1);const u=o.length-1,f=o[u];o[u]=Ti[s](n.measureViewportBox(),window.getComputedStyle(n.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,m])=>{n.getValue(h).set(m)}),this.resolveNoneKeyframes()}}function i2(t,n,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let o=document;const c=s?.[t]??o.querySelectorAll(t);return c?Array.from(c):[]}return Array.from(t)}const q0=(t,n)=>n&&typeof t=="number"?n.transform(t):t;function G0(t){return r0(t)&&"offsetHeight"in t}const ax=30,o2=t=>!isNaN(parseFloat(t));class r2{constructor(n,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{const c=Fn.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(n),this.owner=s.owner}setCurrent(n){this.current=n,this.updatedAt=Fn.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=o2(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,s){this.events[n]||(this.events[n]=new ih);const o=this.events[n].add(s);return n==="change"?()=>{o(),It.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,s){this.passiveEffect=n,this.stopPassiveEffect=s}set(n){this.passiveEffect?this.passiveEffect(n,this.updateAndNotify):this.updateAndNotify(n)}setWithVelocity(n,s,o){this.set(s),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-o}jump(n,s=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=Fn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>ax)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,ax);return c0(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(n){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=n(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function To(t,n){return new r2(t,n)}const{schedule:xh}=b0(queueMicrotask,!1),Ca={x:!1,y:!1};function Y0(){return Ca.x||Ca.y}function l2(t){return t==="x"||t==="y"?Ca[t]?null:(Ca[t]=!0,()=>{Ca[t]=!1}):Ca.x||Ca.y?null:(Ca.x=Ca.y=!0,()=>{Ca.x=Ca.y=!1})}function W0(t,n){const s=i2(t),o=new AbortController,c={passive:!0,...n,signal:o.signal};return[s,c,()=>o.abort()]}function sx(t){return!(t.pointerType==="touch"||Y0())}function c2(t,n,s={}){const[o,c,u]=W0(t,s),f=h=>{if(!sx(h))return;const{target:m}=h,g=n(m,h);if(typeof g!="function"||!m)return;const y=v=>{sx(v)&&(g(v),m.removeEventListener("pointerleave",y))};m.addEventListener("pointerleave",y,c)};return o.forEach(h=>{h.addEventListener("pointerenter",f,c)}),u}const X0=(t,n)=>n?t===n?!0:X0(t,n.parentElement):!1,bh=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,u2=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function d2(t){return u2.has(t.tagName)||t.tabIndex!==-1}const Fc=new WeakSet;function ix(t){return n=>{n.key==="Enter"&&t(n)}}function Lf(t,n){t.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const f2=(t,n)=>{const s=t.currentTarget;if(!s)return;const o=ix(()=>{if(Fc.has(s))return;Lf(s,"down");const c=ix(()=>{Lf(s,"up")}),u=()=>Lf(s,"cancel");s.addEventListener("keyup",c,n),s.addEventListener("blur",u,n)});s.addEventListener("keydown",o,n),s.addEventListener("blur",()=>s.removeEventListener("keydown",o),n)};function ox(t){return bh(t)&&!Y0()}function p2(t,n,s={}){const[o,c,u]=W0(t,s),f=h=>{const m=h.currentTarget;if(!ox(h))return;Fc.add(m);const g=n(m,h),y=(C,w)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),Fc.has(m)&&Fc.delete(m),ox(C)&&typeof g=="function"&&g(C,{success:w})},v=C=>{y(C,m===window||m===document||s.useGlobalTarget||X0(m,C.target))},_=C=>{y(C,!1)};window.addEventListener("pointerup",v,c),window.addEventListener("pointercancel",_,c)};return o.forEach(h=>{(s.useGlobalTarget?window:h).addEventListener("pointerdown",f,c),G0(h)&&(h.addEventListener("focus",g=>f2(g,c)),!d2(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),u}function K0(t){return r0(t)&&"ownerSVGElement"in t}function h2(t){return K0(t)&&t.tagName==="svg"}const Mn=t=>!!(t&&t.getVelocity),m2=[...V0,un,Ks],g2=t=>m2.find(H0(t)),Sh=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function rx(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function y2(...t){return n=>{let s=!1;const o=t.map(c=>{const u=rx(c,n);return!s&&typeof u=="function"&&(s=!0),u});if(s)return()=>{for(let c=0;c<o.length;c++){const u=o[c];typeof u=="function"?u():rx(t[c],null)}}}}function v2(...t){return b.useCallback(y2(...t),t)}class x2 extends b.Component{getSnapshotBeforeUpdate(n){const s=this.props.childRef.current;if(s&&n.isPresent&&!this.props.isPresent){const o=s.offsetParent,c=G0(o)&&o.offsetWidth||0,u=this.props.sizeRef.current;u.height=s.offsetHeight||0,u.width=s.offsetWidth||0,u.top=s.offsetTop,u.left=s.offsetLeft,u.right=c-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function b2({children:t,isPresent:n,anchorX:s,root:o}){const c=b.useId(),u=b.useRef(null),f=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=b.useContext(Sh),m=v2(u,t?.ref);return b.useInsertionEffect(()=>{const{width:g,height:y,top:v,left:_,right:C}=f.current;if(n||!u.current||!g||!y)return;const w=s==="left"?`left: ${_}`:`right: ${C}`;u.current.dataset.motionPopId=c;const A=document.createElement("style");h&&(A.nonce=h);const M=o??document.head;return M.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${y}px !important;
            ${w}px !important;
            top: ${v}px !important;
          }
        `),()=>{M.contains(A)&&M.removeChild(A)}},[n]),l.jsx(x2,{isPresent:n,childRef:u,sizeRef:f,children:b.cloneElement(t,{ref:m})})}const S2=({children:t,initial:n,isPresent:s,onExitComplete:o,custom:c,presenceAffectsLayout:u,mode:f,anchorX:h,root:m})=>{const g=Jp(_2),y=b.useId();let v=!0,_=b.useMemo(()=>(v=!1,{id:y,initial:n,isPresent:s,custom:c,onExitComplete:C=>{g.set(C,!0);for(const w of g.values())if(!w)return;o&&o()},register:C=>(g.set(C,!1),()=>g.delete(C))}),[s,g,o]);return u&&v&&(_={..._}),b.useMemo(()=>{g.forEach((C,w)=>g.set(w,!1))},[s]),b.useEffect(()=>{!s&&!g.size&&o&&o()},[s]),f==="popLayout"&&(t=l.jsx(b2,{isPresent:s,anchorX:h,root:m,children:t})),l.jsx(mu.Provider,{value:_,children:t})};function _2(){return new Map}function Q0(t=!0){const n=b.useContext(mu);if(n===null)return[!0,null];const{isPresent:s,onExitComplete:o,register:c}=n,u=b.useId();b.useEffect(()=>{if(t)return c(u)},[t]);const f=b.useCallback(()=>t&&o&&o(u),[u,o,t]);return!s&&o?[!1,f]:[!0]}const Dc=t=>t.key||"";function lx(t){const n=[];return b.Children.forEach(t,s=>{b.isValidElement(s)&&n.push(s)}),n}const Ta=({children:t,custom:n,initial:s=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:u="sync",propagate:f=!1,anchorX:h="left",root:m})=>{const[g,y]=Q0(f),v=b.useMemo(()=>lx(t),[t]),_=f&&!g?[]:v.map(Dc),C=b.useRef(!0),w=b.useRef(v),A=Jp(()=>new Map),[M,B]=b.useState(v),[P,E]=b.useState(v);i0(()=>{C.current=!1,w.current=v;for(let ee=0;ee<P.length;ee++){const re=Dc(P[ee]);_.includes(re)?A.delete(re):A.get(re)!==!0&&A.set(re,!1)}},[P,_.length,_.join("-")]);const U=[];if(v!==M){let ee=[...v];for(let re=0;re<P.length;re++){const Z=P[re],pe=Dc(Z);_.includes(pe)||(ee.splice(re,0,Z),U.push(Z))}return u==="wait"&&U.length&&(ee=U),E(lx(ee)),B(v),null}const{forceRender:H}=b.useContext(Zp);return l.jsx(l.Fragment,{children:P.map(ee=>{const re=Dc(ee),Z=f&&!g?!1:v===P||_.includes(re),pe=()=>{if(A.has(re))A.set(re,!0);else return;let ue=!0;A.forEach(Be=>{Be||(ue=!1)}),ue&&(H?.(),E(w.current),f&&y?.(),o&&o())};return l.jsx(S2,{isPresent:Z,initial:!C.current||s?void 0:!1,custom:n,presenceAffectsLayout:c,mode:u,root:m,onExitComplete:Z?void 0:pe,anchorX:h,children:ee},re)})})},Z0=b.createContext({strict:!1}),cx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ko={};for(const t in cx)ko[t]={isEnabled:n=>cx[t].some(s=>!!n[s])};function w2(t){for(const n in t)ko[n]={...ko[n],...t[n]}}const C2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function eu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||C2.has(t)}let J0=t=>!eu(t);function j2(t){typeof t=="function"&&(J0=n=>n.startsWith("on")?!eu(n):t(n))}try{j2(require("@emotion/is-prop-valid").default)}catch{}function T2(t,n,s){const o={};for(const c in t)c==="values"&&typeof t.values=="object"||(J0(c)||s===!0&&eu(c)||!n&&!eu(c)||t.draggable&&c.startsWith("onDrag"))&&(o[c]=t[c]);return o}const gu=b.createContext({});function yu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Xr(t){return typeof t=="string"||Array.isArray(t)}const _h=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wh=["initial",..._h];function vu(t){return yu(t.animate)||wh.some(n=>Xr(t[n]))}function e1(t){return!!(vu(t)||t.variants)}function k2(t,n){if(vu(t)){const{initial:s,animate:o}=t;return{initial:s===!1||Xr(s)?s:void 0,animate:Xr(o)?o:void 0}}return t.inherit!==!1?n:{}}function A2(t){const{initial:n,animate:s}=k2(t,b.useContext(gu));return b.useMemo(()=>({initial:n,animate:s}),[ux(n),ux(s)])}function ux(t){return Array.isArray(t)?t.join(" "):t}function dx(t,n){return n.max===n.min?0:t/(n.max-n.min)*100}const Nr={correct:(t,n)=>{if(!n.target)return t;if(typeof t=="string")if(Le.test(t))t=parseFloat(t);else return t;const s=dx(t,n.target.x),o=dx(t,n.target.y);return`${s}% ${o}%`}},M2={correct:(t,{treeScale:n,projectionDelta:s})=>{const o=t,c=Ks.parse(t);if(c.length>5)return o;const u=Ks.createTransformer(t),f=typeof c[0]!="number"?1:0,h=s.x.scale*n.x,m=s.y.scale*n.y;c[0+f]/=h,c[1+f]/=m;const g=Ft(h,m,.5);return typeof c[2+f]=="number"&&(c[2+f]/=g),typeof c[3+f]=="number"&&(c[3+f]/=g),u(c)}},kp={borderRadius:{...Nr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Nr,borderTopRightRadius:Nr,borderBottomLeftRadius:Nr,borderBottomRightRadius:Nr,boxShadow:M2};function t1(t,{layout:n,layoutId:s}){return Bo.has(t)||t.startsWith("origin")||(n||s!==void 0)&&(!!kp[t]||t==="opacity")}const E2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},R2=Do.length;function N2(t,n,s){let o="",c=!0;for(let u=0;u<R2;u++){const f=Do[u],h=t[f];if(h===void 0)continue;let m=!0;if(typeof h=="number"?m=h===(f.startsWith("scale")?1:0):m=parseFloat(h)===0,!m||s){const g=q0(h,vh[f]);if(!m){c=!1;const y=E2[f]||f;o+=`${y}(${g}) `}s&&(n[f]=g)}}return o=o.trim(),s?o=s(n,c?"":o):c&&(o="none"),o}function Ch(t,n,s){const{style:o,vars:c,transformOrigin:u}=t;let f=!1,h=!1;for(const m in n){const g=n[m];if(Bo.has(m)){f=!0;continue}else if(_0(m)){c[m]=g;continue}else{const y=q0(g,vh[m]);m.startsWith("origin")?(h=!0,u[m]=y):o[m]=y}}if(n.transform||(f||s?o.transform=N2(n,t.transform,s):o.transform&&(o.transform="none")),h){const{originX:m="50%",originY:g="50%",originZ:y=0}=u;o.transformOrigin=`${m} ${g} ${y}`}}const jh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function n1(t,n,s){for(const o in n)!Mn(n[o])&&!t1(o,s)&&(t[o]=n[o])}function D2({transformTemplate:t},n){return b.useMemo(()=>{const s=jh();return Ch(s,n,t),Object.assign({},s.vars,s.style)},[n])}function B2(t,n){const s=t.style||{},o={};return n1(o,s,t),Object.assign(o,D2(t,n)),o}function z2(t,n){const s={},o=B2(t,n);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=o,s}const U2={offset:"stroke-dashoffset",array:"stroke-dasharray"},I2={offset:"strokeDashoffset",array:"strokeDasharray"};function O2(t,n,s=1,o=0,c=!0){t.pathLength=1;const u=c?U2:I2;t[u.offset]=Le.transform(-o);const f=Le.transform(n),h=Le.transform(s);t[u.array]=`${f} ${h}`}function a1(t,{attrX:n,attrY:s,attrScale:o,pathLength:c,pathSpacing:u=1,pathOffset:f=0,...h},m,g,y){if(Ch(t,h,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:_}=t;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=y?.transformBox??"fill-box",delete v.transformBox),n!==void 0&&(v.x=n),s!==void 0&&(v.y=s),o!==void 0&&(v.scale=o),c!==void 0&&O2(v,c,u,f,!1)}const s1=()=>({...jh(),attrs:{}}),i1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function L2(t,n,s,o){const c=b.useMemo(()=>{const u=s1();return a1(u,n,i1(o),t.transformTemplate,t.style),{...u.attrs,style:{...u.style}}},[n]);if(t.style){const u={};n1(u,t.style,t),c.style={...u,...c.style}}return c}const P2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Th(t){return typeof t!="string"||t.includes("-")?!1:!!(P2.indexOf(t)>-1||/[A-Z]/u.test(t))}function H2(t,n,s,{latestValues:o},c,u=!1){const h=(Th(t)?L2:z2)(n,o,c,t),m=T2(n,typeof t=="string",u),g=t!==b.Fragment?{...m,...h,ref:s}:{},{children:y}=n,v=b.useMemo(()=>Mn(y)?y.get():y,[y]);return b.createElement(t,{...g,children:v})}function fx(t){const n=[{},{}];return t?.values.forEach((s,o)=>{n[0][o]=s.get(),n[1][o]=s.getVelocity()}),n}function kh(t,n,s,o){if(typeof n=="function"){const[c,u]=fx(o);n=n(s!==void 0?s:t.custom,c,u)}if(typeof n=="string"&&(n=t.variants&&t.variants[n]),typeof n=="function"){const[c,u]=fx(o);n=n(s!==void 0?s:t.custom,c,u)}return n}function $c(t){return Mn(t)?t.get():t}function V2({scrapeMotionValuesFromProps:t,createRenderState:n},s,o,c){return{latestValues:F2(s,o,c,t),renderState:n()}}function F2(t,n,s,o){const c={},u=o(t,{});for(const _ in u)c[_]=$c(u[_]);let{initial:f,animate:h}=t;const m=vu(t),g=e1(t);n&&g&&!m&&t.inherit!==!1&&(f===void 0&&(f=n.initial),h===void 0&&(h=n.animate));let y=s?s.initial===!1:!1;y=y||f===!1;const v=y?h:f;if(v&&typeof v!="boolean"&&!yu(v)){const _=Array.isArray(v)?v:[v];for(let C=0;C<_.length;C++){const w=kh(t,_[C]);if(w){const{transitionEnd:A,transition:M,...B}=w;for(const P in B){let E=B[P];if(Array.isArray(E)){const U=y?E.length-1:0;E=E[U]}E!==null&&(c[P]=E)}for(const P in A)c[P]=A[P]}}}return c}const o1=t=>(n,s)=>{const o=b.useContext(gu),c=b.useContext(mu),u=()=>V2(t,n,o,c);return s?u():Jp(u)};function Ah(t,n,s){const{style:o}=t,c={};for(const u in o)(Mn(o[u])||n.style&&Mn(n.style[u])||t1(u,t)||s?.getValue(u)?.liveStyle!==void 0)&&(c[u]=o[u]);return c}const $2=o1({scrapeMotionValuesFromProps:Ah,createRenderState:jh});function r1(t,n,s){const o=Ah(t,n,s);for(const c in t)if(Mn(t[c])||Mn(n[c])){const u=Do.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;o[u]=t[c]}return o}const q2=o1({scrapeMotionValuesFromProps:r1,createRenderState:s1}),G2=Symbol.for("motionComponentSymbol");function yo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Y2(t,n,s){return b.useCallback(o=>{o&&t.onMount&&t.onMount(o),n&&(o?n.mount(o):n.unmount()),s&&(typeof s=="function"?s(o):yo(s)&&(s.current=o))},[n])}const Mh=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),W2="framerAppearId",l1="data-"+Mh(W2),c1=b.createContext({});function X2(t,n,s,o,c){const{visualElement:u}=b.useContext(gu),f=b.useContext(Z0),h=b.useContext(mu),m=b.useContext(Sh).reducedMotion,g=b.useRef(null);o=o||f.renderer,!g.current&&o&&(g.current=o(t,{visualState:n,parent:u,props:s,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const y=g.current,v=b.useContext(c1);y&&!y.projection&&c&&(y.type==="html"||y.type==="svg")&&K2(g.current,s,c,v);const _=b.useRef(!1);b.useInsertionEffect(()=>{y&&_.current&&y.update(s,h)});const C=s[l1],w=b.useRef(!!C&&!window.MotionHandoffIsComplete?.(C)&&window.MotionHasOptimisedAnimation?.(C));return i0(()=>{y&&(_.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),w.current&&y.animationState&&y.animationState.animateChanges())}),b.useEffect(()=>{y&&(!w.current&&y.animationState&&y.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(C)}),w.current=!1),y.enteringChildren=void 0)}),y}function K2(t,n,s,o){const{layoutId:c,layout:u,drag:f,dragConstraints:h,layoutScroll:m,layoutRoot:g,layoutCrossfade:y}=n;t.projection=new s(t.latestValues,n["data-framer-portal-id"]?void 0:u1(t.parent)),t.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!f||h&&yo(h),visualElement:t,animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,crossfade:y,layoutScroll:m,layoutRoot:g})}function u1(t){if(t)return t.options.allowProjection!==!1?t.projection:u1(t.parent)}function Pf(t,{forwardMotionProps:n=!1}={},s,o){s&&w2(s);const c=Th(t)?q2:$2;function u(h,m){let g;const y={...b.useContext(Sh),...h,layoutId:Q2(h)},{isStatic:v}=y,_=A2(h),C=c(h,v);if(!v&&eh){Z2();const w=J2(y);g=w.MeasureLayout,_.visualElement=X2(t,C,y,o,w.ProjectionNode)}return l.jsxs(gu.Provider,{value:_,children:[g&&_.visualElement?l.jsx(g,{visualElement:_.visualElement,...y}):null,H2(t,h,Y2(C,_.visualElement,m),C,v,n)]})}u.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const f=b.forwardRef(u);return f[G2]=t,f}function Q2({layoutId:t}){const n=b.useContext(Zp).id;return n&&t!==void 0?n+"-"+t:t}function Z2(t,n){b.useContext(Z0).strict}function J2(t){const{drag:n,layout:s}=ko;if(!n&&!s)return{};const o={...n,...s};return{MeasureLayout:n?.isEnabled(t)||s?.isEnabled(t)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function e3(t,n){if(typeof Proxy>"u")return Pf;const s=new Map,o=(u,f)=>Pf(u,f,t,n),c=(u,f)=>o(u,f);return new Proxy(c,{get:(u,f)=>f==="create"?o:(s.has(f)||s.set(f,Pf(f,void 0,t,n)),s.get(f))})}function d1({top:t,left:n,right:s,bottom:o}){return{x:{min:n,max:s},y:{min:t,max:o}}}function t3({x:t,y:n}){return{top:n.min,right:t.max,bottom:n.max,left:t.min}}function n3(t,n){if(!n)return t;const s=n({x:t.left,y:t.top}),o=n({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:o.y,right:o.x}}function Hf(t){return t===void 0||t===1}function Ap({scale:t,scaleX:n,scaleY:s}){return!Hf(t)||!Hf(n)||!Hf(s)}function vi(t){return Ap(t)||f1(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function f1(t){return px(t.x)||px(t.y)}function px(t){return t&&t!=="0%"}function tu(t,n,s){const o=t-s,c=n*o;return s+c}function hx(t,n,s,o,c){return c!==void 0&&(t=tu(t,c,o)),tu(t,s,o)+n}function Mp(t,n=0,s=1,o,c){t.min=hx(t.min,n,s,o,c),t.max=hx(t.max,n,s,o,c)}function p1(t,{x:n,y:s}){Mp(t.x,n.translate,n.scale,n.originPoint),Mp(t.y,s.translate,s.scale,s.originPoint)}const mx=.999999999999,gx=1.0000000000001;function a3(t,n,s,o=!1){const c=s.length;if(!c)return;n.x=n.y=1;let u,f;for(let h=0;h<c;h++){u=s[h],f=u.projectionDelta;const{visualElement:m}=u.options;m&&m.props.style&&m.props.style.display==="contents"||(o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&xo(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),f&&(n.x*=f.x.scale,n.y*=f.y.scale,p1(t,f)),o&&vi(u.latestValues)&&xo(t,u.latestValues))}n.x<gx&&n.x>mx&&(n.x=1),n.y<gx&&n.y>mx&&(n.y=1)}function vo(t,n){t.min=t.min+n,t.max=t.max+n}function yx(t,n,s,o,c=.5){const u=Ft(t.min,t.max,c);Mp(t,n,s,u,o)}function xo(t,n){yx(t.x,n.x,n.scaleX,n.scale,n.originX),yx(t.y,n.y,n.scaleY,n.scale,n.originY)}function h1(t,n){return d1(n3(t.getBoundingClientRect(),n))}function s3(t,n,s){const o=h1(t,s),{scroll:c}=n;return c&&(vo(o.x,c.offset.x),vo(o.y,c.offset.y)),o}const vx=()=>({translate:0,scale:1,origin:0,originPoint:0}),bo=()=>({x:vx(),y:vx()}),xx=()=>({min:0,max:0}),hn=()=>({x:xx(),y:xx()}),Ep={current:null},m1={current:!1};function i3(){if(m1.current=!0,!!eh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),n=()=>Ep.current=t.matches;t.addEventListener("change",n),n()}else Ep.current=!1}const o3=new WeakMap;function r3(t,n,s){for(const o in n){const c=n[o],u=s[o];if(Mn(c))t.addValue(o,c);else if(Mn(u))t.addValue(o,To(c,{owner:t}));else if(u!==c)if(t.hasValue(o)){const f=t.getValue(o);f.liveStyle===!0?f.jump(c):f.hasAnimated||f.set(c)}else{const f=t.getStaticValue(o);t.addValue(o,To(f!==void 0?f:c,{owner:t}))}}for(const o in s)n[o]===void 0&&t.removeValue(o);return n}const bx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class l3{scrapeMotionValuesFromProps(n,s,o){return{}}constructor({parent:n,props:s,presenceContext:o,reducedMotionConfig:c,blockInitialAnimation:u,visualState:f},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Fn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,It.render(this.render,!1,!0))};const{latestValues:m,renderState:g}=f;this.latestValues=m,this.baseTarget={...m},this.initialValues=s.initial?{...m}:{},this.renderState=g,this.parent=n,this.props=s,this.presenceContext=o,this.depth=n?n.depth+1:0,this.reducedMotionConfig=c,this.options=h,this.blockInitialAnimation=!!u,this.isControllingVariants=vu(s),this.isVariantNode=e1(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:y,...v}=this.scrapeMotionValuesFromProps(s,{},this);for(const _ in v){const C=v[_];m[_]!==void 0&&Mn(C)&&C.set(m[_])}}mount(n){this.current=n,o3.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),m1.current||i3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ep.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Xs(this.notifyUpdate),Xs(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(n){this.children.add(n),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(n)}removeChild(n){this.children.delete(n),this.enteringChildren&&this.enteringChildren.delete(n)}bindToMotionValue(n,s){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const o=Bo.has(n);o&&this.onBindTransform&&this.onBindTransform();const c=s.on("change",f=>{this.latestValues[n]=f,this.props.onUpdate&&It.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,n,s)),this.valueSubscriptions.set(n,()=>{c(),u&&u(),s.owner&&s.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in ko){const s=ko[n];if(!s)continue;const{isEnabled:o,Feature:c}=s;if(!this.features[n]&&c&&o(this.props)&&(this.features[n]=new c(this)),this.features[n]){const u=this.features[n];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hn()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,s){this.latestValues[n]=s}update(n,s){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let o=0;o<bx.length;o++){const c=bx[o];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const u="on"+c,f=n[u];f&&(this.propEventSubscriptions[c]=this.on(c,f))}this.prevMotionValues=r3(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(n),()=>s.variantChildren.delete(n)}addValue(n,s){const o=this.values.get(n);s!==o&&(o&&this.removeValue(n),this.bindToMotionValue(n,s),this.values.set(n,s),this.latestValues[n]=s.get())}removeValue(n){this.values.delete(n);const s=this.valueSubscriptions.get(n);s&&(s(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,s){if(this.props.values&&this.props.values[n])return this.props.values[n];let o=this.values.get(n);return o===void 0&&s!==void 0&&(o=To(s===null?void 0:s,{owner:this}),this.addValue(n,o)),o}readValue(n,s){let o=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return o!=null&&(typeof o=="string"&&(o0(o)||l0(o))?o=parseFloat(o):!g2(o)&&Ks.test(s)&&(o=$0(n,s)),this.setBaseTarget(n,Mn(o)?o.get():o)),Mn(o)?o.get():o}setBaseTarget(n,s){this.baseTarget[n]=s}getBaseTarget(n){const{initial:s}=this.props;let o;if(typeof s=="string"||typeof s=="object"){const u=kh(this.props,s,this.presenceContext?.custom);u&&(o=u[n])}if(s&&o!==void 0)return o;const c=this.getBaseTargetFromProps(this.props,n);return c!==void 0&&!Mn(c)?c:this.initialValues[n]!==void 0&&o===void 0?void 0:this.baseTarget[n]}on(n,s){return this.events[n]||(this.events[n]=new ih),this.events[n].add(s)}notify(n,...s){this.events[n]&&this.events[n].notify(...s)}scheduleRenderMicrotask(){xh.render(this.render)}}class g1 extends l3{constructor(){super(...arguments),this.KeyframeResolver=s2}sortInstanceNodePosition(n,s){return n.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(n,s){return n.style?n.style[s]:void 0}removeValueFromRenderState(n,{vars:s,style:o}){delete s[n],delete o[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;Mn(n)&&(this.childSubscription=n.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function y1(t,{style:n,vars:s},o,c){const u=t.style;let f;for(f in n)u[f]=n[f];c?.applyProjectionStyles(u,o);for(f in s)u.setProperty(f,s[f])}function c3(t){return window.getComputedStyle(t)}class u3 extends g1{constructor(){super(...arguments),this.type="html",this.renderInstance=y1}readValueFromInstance(n,s){if(Bo.has(s))return this.projection?.isProjecting?bp(s):wT(n,s);{const o=c3(n),c=(_0(s)?o.getPropertyValue(s):o[s])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(n,{transformPagePoint:s}){return h1(n,s)}build(n,s,o){Ch(n,s,o.transformTemplate)}scrapeMotionValuesFromProps(n,s,o){return Ah(n,s,o)}}const v1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function d3(t,n,s,o){y1(t,n,void 0,o);for(const c in n.attrs)t.setAttribute(v1.has(c)?c:Mh(c),n.attrs[c])}class f3 extends g1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hn}getBaseTargetFromProps(n,s){return n[s]}readValueFromInstance(n,s){if(Bo.has(s)){const o=F0(s);return o&&o.default||0}return s=v1.has(s)?s:Mh(s),n.getAttribute(s)}scrapeMotionValuesFromProps(n,s,o){return r1(n,s,o)}build(n,s,o){a1(n,s,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(n,s,o,c){d3(n,s,o,c)}mount(n){this.isSVGTag=i1(n.tagName),super.mount(n)}}const p3=(t,n)=>Th(t)?new f3(n):new u3(n,{allowProjection:t!==b.Fragment});function wo(t,n,s){const o=t.getProps();return kh(o,n,s!==void 0?s:o.custom,t)}const Rp=t=>Array.isArray(t);function h3(t,n,s){t.hasValue(n)?t.getValue(n).set(s):t.addValue(n,To(s))}function m3(t){return Rp(t)?t[t.length-1]||0:t}function g3(t,n){const s=wo(t,n);let{transitionEnd:o={},transition:c={},...u}=s||{};u={...u,...o};for(const f in u){const h=m3(u[f]);h3(t,f,h)}}function y3(t){return!!(Mn(t)&&t.add)}function Np(t,n){const s=t.getValue("willChange");if(y3(s))return s.add(n);if(!s&&us.WillChange){const o=new us.WillChange("auto");t.addValue("willChange",o),o.add(n)}}function x1(t){return t.props[l1]}const v3=t=>t!==null;function x3(t,{repeat:n,repeatType:s="loop"},o){const c=t.filter(v3),u=n&&s!=="loop"&&n%2===1?0:c.length-1;return c[u]}const b3={type:"spring",stiffness:500,damping:25,restSpeed:10},S3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),_3={type:"keyframes",duration:.8},w3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},C3=(t,{keyframes:n})=>n.length>2?_3:Bo.has(t)?t.startsWith("scale")?S3(n[1]):b3:w3;function j3({when:t,delay:n,delayChildren:s,staggerChildren:o,staggerDirection:c,repeat:u,repeatType:f,repeatDelay:h,from:m,elapsed:g,...y}){return!!Object.keys(y).length}const Eh=(t,n,s,o={},c,u)=>f=>{const h=yh(o,t)||{},m=h.delay||o.delay||0;let{elapsed:g=0}=o;g=g-Pa(m);const y={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:n.getVelocity(),...h,delay:-g,onUpdate:_=>{n.set(_),h.onUpdate&&h.onUpdate(_)},onComplete:()=>{f(),h.onComplete&&h.onComplete()},name:t,motionValue:n,element:u?void 0:c};j3(h)||Object.assign(y,C3(t,y)),y.duration&&(y.duration=Pa(y.duration)),y.repeatDelay&&(y.repeatDelay=Pa(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let v=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(jp(y),y.delay===0&&(v=!0)),(us.instantAnimations||us.skipAnimations)&&(v=!0,jp(y),y.delay=0),y.allowFlatten=!h.type&&!h.ease,v&&!u&&n.get()!==void 0){const _=x3(y.keyframes,h);if(_!==void 0){It.update(()=>{y.onUpdate(_),y.onComplete()});return}}return h.isSync?new mh(y):new GT(y)};function T3({protectedKeys:t,needsAnimating:n},s){const o=t.hasOwnProperty(s)&&n[s]!==!0;return n[s]=!1,o}function b1(t,n,{delay:s=0,transitionOverride:o,type:c}={}){let{transition:u=t.getDefaultTransition(),transitionEnd:f,...h}=n;o&&(u=o);const m=[],g=c&&t.animationState&&t.animationState.getState()[c];for(const y in h){const v=t.getValue(y,t.latestValues[y]??null),_=h[y];if(_===void 0||g&&T3(g,y))continue;const C={delay:s,...yh(u||{},y)},w=v.get();if(w!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===w&&!C.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const B=x1(t);if(B){const P=window.MotionHandoffAnimation(B,y,It);P!==null&&(C.startTime=P,A=!0)}}Np(t,y),v.start(Eh(y,v,_,t.shouldReduceMotion&&P0.has(y)?{type:!1}:C,t,A));const M=v.animation;M&&m.push(M)}return f&&Promise.all(m).then(()=>{It.update(()=>{f&&g3(t,f)})}),m}function S1(t,n,s,o=0,c=1){const u=Array.from(t).sort((g,y)=>g.sortNodePosition(y)).indexOf(n),f=t.size,h=(f-1)*o;return typeof s=="function"?s(u,f):c===1?u*o:h-u*o}function Dp(t,n,s={}){const o=wo(t,n,s.type==="exit"?t.presenceContext?.custom:void 0);let{transition:c=t.getDefaultTransition()||{}}=o||{};s.transitionOverride&&(c=s.transitionOverride);const u=o?()=>Promise.all(b1(t,o,s)):()=>Promise.resolve(),f=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:v}=c;return k3(t,n,m,g,y,v,s)}:()=>Promise.resolve(),{when:h}=c;if(h){const[m,g]=h==="beforeChildren"?[u,f]:[f,u];return m().then(()=>g())}else return Promise.all([u(),f(s.delay)])}function k3(t,n,s=0,o=0,c=0,u=1,f){const h=[];for(const m of t.variantChildren)m.notify("AnimationStart",n),h.push(Dp(m,n,{...f,delay:s+(typeof o=="function"?0:o)+S1(t.variantChildren,m,o,c,u)}).then(()=>m.notify("AnimationComplete",n)));return Promise.all(h)}function A3(t,n,s={}){t.notify("AnimationStart",n);let o;if(Array.isArray(n)){const c=n.map(u=>Dp(t,u,s));o=Promise.all(c)}else if(typeof n=="string")o=Dp(t,n,s);else{const c=typeof n=="function"?wo(t,n,s.custom):n;o=Promise.all(b1(t,c,s))}return o.then(()=>{t.notify("AnimationComplete",n)})}function _1(t,n){if(!Array.isArray(n))return!1;const s=n.length;if(s!==t.length)return!1;for(let o=0;o<s;o++)if(n[o]!==t[o])return!1;return!0}const M3=wh.length;function w1(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?w1(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const n={};for(let s=0;s<M3;s++){const o=wh[s],c=t.props[o];(Xr(c)||c===!1)&&(n[o]=c)}return n}const E3=[..._h].reverse(),R3=_h.length;function N3(t){return n=>Promise.all(n.map(({animation:s,options:o})=>A3(t,s,o)))}function D3(t){let n=N3(t),s=Sx(),o=!0;const c=m=>(g,y)=>{const v=wo(t,y,m==="exit"?t.presenceContext?.custom:void 0);if(v){const{transition:_,transitionEnd:C,...w}=v;g={...g,...w,...C}}return g};function u(m){n=m(t)}function f(m){const{props:g}=t,y=w1(t.parent)||{},v=[],_=new Set;let C={},w=1/0;for(let M=0;M<R3;M++){const B=E3[M],P=s[B],E=g[B]!==void 0?g[B]:y[B],U=Xr(E),H=B===m?P.isActive:null;H===!1&&(w=M);let ee=E===y[B]&&E!==g[B]&&U;if(ee&&o&&t.manuallyAnimateOnMount&&(ee=!1),P.protectedKeys={...C},!P.isActive&&H===null||!E&&!P.prevProp||yu(E)||typeof E=="boolean")continue;const re=B3(P.prevProp,E);let Z=re||B===m&&P.isActive&&!ee&&U||M>w&&U,pe=!1;const ue=Array.isArray(E)?E:[E];let Be=ue.reduce(c(B),{});H===!1&&(Be={});const{prevResolvedValues:Ze={}}=P,me={...Ze,...Be},Re=ae=>{Z=!0,_.has(ae)&&(pe=!0,_.delete(ae)),P.needsAnimating[ae]=!0;const le=t.getValue(ae);le&&(le.liveStyle=!1)};for(const ae in me){const le=Be[ae],Se=Ze[ae];if(C.hasOwnProperty(ae))continue;let ze=!1;Rp(le)&&Rp(Se)?ze=!_1(le,Se):ze=le!==Se,ze?le!=null?Re(ae):_.add(ae):le!==void 0&&_.has(ae)?Re(ae):P.protectedKeys[ae]=!0}P.prevProp=E,P.prevResolvedValues=Be,P.isActive&&(C={...C,...Be}),o&&t.blockInitialAnimation&&(Z=!1);const He=ee&&re;Z&&(!He||pe)&&v.push(...ue.map(ae=>{const le={type:B};if(typeof ae=="string"&&o&&!He&&t.manuallyAnimateOnMount&&t.parent){const{parent:Se}=t,ze=wo(Se,ae);if(Se.enteringChildren&&ze){const{delayChildren:ve}=ze.transition||{};le.delay=S1(Se.enteringChildren,t,ve)}}return{animation:ae,options:le}}))}if(_.size){const M={};if(typeof g.initial!="boolean"){const B=wo(t,Array.isArray(g.initial)?g.initial[0]:g.initial);B&&B.transition&&(M.transition=B.transition)}_.forEach(B=>{const P=t.getBaseTarget(B),E=t.getValue(B);E&&(E.liveStyle=!0),M[B]=P??null}),v.push({animation:M})}let A=!!v.length;return o&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(A=!1),o=!1,A?n(v):Promise.resolve()}function h(m,g){if(s[m].isActive===g)return Promise.resolve();t.variantChildren?.forEach(v=>v.animationState?.setActive(m,g)),s[m].isActive=g;const y=f(m);for(const v in s)s[v].protectedKeys={};return y}return{animateChanges:f,setActive:h,setAnimateFunction:u,getState:()=>s,reset:()=>{s=Sx()}}}function B3(t,n){return typeof n=="string"?n!==t:Array.isArray(n)?!_1(n,t):!1}function yi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Sx(){return{animate:yi(!0),whileInView:yi(),whileHover:yi(),whileTap:yi(),whileDrag:yi(),whileFocus:yi(),exit:yi()}}class Qs{constructor(n){this.isMounted=!1,this.node=n}update(){}}class z3 extends Qs{constructor(n){super(n),n.animationState||(n.animationState=D3(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();yu(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:s}=this.node.prevProps||{};n!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let U3=0;class I3 extends Qs{constructor(){super(...arguments),this.id=U3++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:s}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===o)return;const c=this.node.animationState.setActive("exit",!n);s&&!n&&c.then(()=>{s(this.id)})}mount(){const{register:n,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const O3={animation:{Feature:z3},exit:{Feature:I3}};function Kr(t,n,s,o={passive:!0}){return t.addEventListener(n,s,o),()=>t.removeEventListener(n,s)}function cl(t){return{point:{x:t.pageX,y:t.pageY}}}const L3=t=>n=>bh(n)&&t(n,cl(n));function Pr(t,n,s,o){return Kr(t,n,L3(s),o)}const C1=1e-4,P3=1-C1,H3=1+C1,j1=.01,V3=0-j1,F3=0+j1;function Dn(t){return t.max-t.min}function $3(t,n,s){return Math.abs(t-n)<=s}function _x(t,n,s,o=.5){t.origin=o,t.originPoint=Ft(n.min,n.max,t.origin),t.scale=Dn(s)/Dn(n),t.translate=Ft(s.min,s.max,t.origin)-t.originPoint,(t.scale>=P3&&t.scale<=H3||isNaN(t.scale))&&(t.scale=1),(t.translate>=V3&&t.translate<=F3||isNaN(t.translate))&&(t.translate=0)}function Hr(t,n,s,o){_x(t.x,n.x,s.x,o?o.originX:void 0),_x(t.y,n.y,s.y,o?o.originY:void 0)}function wx(t,n,s){t.min=s.min+n.min,t.max=t.min+Dn(n)}function q3(t,n,s){wx(t.x,n.x,s.x),wx(t.y,n.y,s.y)}function Cx(t,n,s){t.min=n.min-s.min,t.max=t.min+Dn(n)}function nu(t,n,s){Cx(t.x,n.x,s.x),Cx(t.y,n.y,s.y)}function fa(t){return[t("x"),t("y")]}const T1=({current:t})=>t?t.ownerDocument.defaultView:null,jx=(t,n)=>Math.abs(t-n);function G3(t,n){const s=jx(t.x,n.x),o=jx(t.y,n.y);return Math.sqrt(s**2+o**2)}class k1{constructor(n,s,{transformPagePoint:o,contextWindow:c=window,dragSnapToOrigin:u=!1,distanceThreshold:f=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Ff(this.lastMoveEventInfo,this.history),C=this.startEvent!==null,w=G3(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!C&&!w)return;const{point:A}=_,{timestamp:M}=jn;this.history.push({...A,timestamp:M});const{onStart:B,onMove:P}=this.handlers;C||(B&&B(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,_)},this.handlePointerMove=(_,C)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Vf(C,this.transformPagePoint),It.update(this.updatePoint,!0)},this.handlePointerUp=(_,C)=>{this.end();const{onEnd:w,onSessionEnd:A,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=Ff(_.type==="pointercancel"?this.lastMoveEventInfo:Vf(C,this.transformPagePoint),this.history);this.startEvent&&w&&w(_,B),A&&A(_,B)},!bh(n))return;this.dragSnapToOrigin=u,this.handlers=s,this.transformPagePoint=o,this.distanceThreshold=f,this.contextWindow=c||window;const h=cl(n),m=Vf(h,this.transformPagePoint),{point:g}=m,{timestamp:y}=jn;this.history=[{...g,timestamp:y}];const{onSessionStart:v}=s;v&&v(n,Ff(m,this.history)),this.removeListeners=ol(Pr(this.contextWindow,"pointermove",this.handlePointerMove),Pr(this.contextWindow,"pointerup",this.handlePointerUp),Pr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),Xs(this.updatePoint)}}function Vf(t,n){return n?{point:n(t.point)}:t}function Tx(t,n){return{x:t.x-n.x,y:t.y-n.y}}function Ff({point:t},n){return{point:t,delta:Tx(t,A1(n)),offset:Tx(t,Y3(n)),velocity:W3(n,.1)}}function Y3(t){return t[0]}function A1(t){return t[t.length-1]}function W3(t,n){if(t.length<2)return{x:0,y:0};let s=t.length-1,o=null;const c=A1(t);for(;s>=0&&(o=t[s],!(c.timestamp-o.timestamp>Pa(n)));)s--;if(!o)return{x:0,y:0};const u=pa(c.timestamp-o.timestamp);if(u===0)return{x:0,y:0};const f={x:(c.x-o.x)/u,y:(c.y-o.y)/u};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function X3(t,{min:n,max:s},o){return n!==void 0&&t<n?t=o?Ft(n,t,o.min):Math.max(t,n):s!==void 0&&t>s&&(t=o?Ft(s,t,o.max):Math.min(t,s)),t}function kx(t,n,s){return{min:n!==void 0?t.min+n:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function K3(t,{top:n,left:s,bottom:o,right:c}){return{x:kx(t.x,s,c),y:kx(t.y,n,o)}}function Ax(t,n){let s=n.min-t.min,o=n.max-t.max;return n.max-n.min<t.max-t.min&&([s,o]=[o,s]),{min:s,max:o}}function Q3(t,n){return{x:Ax(t.x,n.x),y:Ax(t.y,n.y)}}function Z3(t,n){let s=.5;const o=Dn(t),c=Dn(n);return c>o?s=Gr(n.min,n.max-o,t.min):o>c&&(s=Gr(t.min,t.max-c,n.min)),cs(0,1,s)}function J3(t,n){const s={};return n.min!==void 0&&(s.min=n.min-t.min),n.max!==void 0&&(s.max=n.max-t.min),s}const Bp=.35;function ek(t=Bp){return t===!1?t=0:t===!0&&(t=Bp),{x:Mx(t,"left","right"),y:Mx(t,"top","bottom")}}function Mx(t,n,s){return{min:Ex(t,n),max:Ex(t,s)}}function Ex(t,n){return typeof t=="number"?t:t[n]||0}const tk=new WeakMap;class nk{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:s=!1,distanceThreshold:o}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const u=v=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(cl(v).point)},f=(v,_)=>{const{drag:C,dragPropagation:w,onDragStart:A}=this.getProps();if(C&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=l2(C),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fa(B=>{let P=this.getAxisMotionValue(B).get()||0;if(Ha.test(P)){const{projection:E}=this.visualElement;if(E&&E.layout){const U=E.layout.layoutBox[B];U&&(P=Dn(U)*(parseFloat(P)/100))}}this.originPoint[B]=P}),A&&It.postRender(()=>A(v,_)),Np(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},h=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_;const{dragPropagation:C,dragDirectionLock:w,onDirectionLock:A,onDrag:M}=this.getProps();if(!C&&!this.openDragLock)return;const{offset:B}=_;if(w&&this.currentDirection===null){this.currentDirection=ak(B),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",_.point,B),this.updateAxis("y",_.point,B),this.visualElement.render(),M&&M(v,_)},m=(v,_)=>{this.latestPointerEvent=v,this.latestPanInfo=_,this.stop(v,_),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>fa(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:y}=this.getProps();this.panSession=new k1(n,{onSessionStart:u,onStart:f,onMove:h,onSessionEnd:m,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:o,contextWindow:T1(this.visualElement)})}stop(n,s){const o=n||this.latestPointerEvent,c=s||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!c||!o)return;const{velocity:f}=c;this.startAnimation(f);const{onDragEnd:h}=this.getProps();h&&It.postRender(()=>h(o,c))}cancel(){this.isDragging=!1;const{projection:n,animationState:s}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(n,s,o){const{drag:c}=this.getProps();if(!o||!Bc(n,c,this.currentDirection))return;const u=this.getAxisMotionValue(n);let f=this.originPoint[n]+o[n];this.constraints&&this.constraints[n]&&(f=X3(f,this.constraints[n],this.elastic[n])),u.set(f)}resolveConstraints(){const{dragConstraints:n,dragElastic:s}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,c=this.constraints;n&&yo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=K3(o.layoutBox,n):this.constraints=!1,this.elastic=ek(s),c!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&fa(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=J3(o.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:s}=this.getProps();if(!n||!yo(n))return!1;const o=n.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const u=s3(o,c.root,this.visualElement.getTransformPagePoint());let f=Q3(c.layout.layoutBox,u);if(s){const h=s(t3(f));this.hasMutatedConstraints=!!h,h&&(f=d1(h))}return f}startAnimation(n){const{drag:s,dragMomentum:o,dragElastic:c,dragTransition:u,dragSnapToOrigin:f,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},g=fa(y=>{if(!Bc(y,s,this.currentDirection))return;let v=m&&m[y]||{};f&&(v={min:0,max:0});const _=c?200:1e6,C=c?40:1e7,w={type:"inertia",velocity:o?n[y]:0,bounceStiffness:_,bounceDamping:C,timeConstant:750,restDelta:1,restSpeed:10,...u,...v};return this.startAxisValueAnimation(y,w)});return Promise.all(g).then(h)}startAxisValueAnimation(n,s){const o=this.getAxisMotionValue(n);return Np(this.visualElement,n),o.start(Eh(n,o,0,s,this.visualElement,!1))}stopAnimation(){fa(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){fa(n=>this.getAxisMotionValue(n).animation?.pause())}getAnimationState(n){return this.getAxisMotionValue(n).animation?.state}getAxisMotionValue(n){const s=`_drag${n.toUpperCase()}`,o=this.visualElement.getProps(),c=o[s];return c||this.visualElement.getValue(n,(o.initial?o.initial[n]:void 0)||0)}snapToCursor(n){fa(s=>{const{drag:o}=this.getProps();if(!Bc(s,o,this.currentDirection))return;const{projection:c}=this.visualElement,u=this.getAxisMotionValue(s);if(c&&c.layout){const{min:f,max:h}=c.layout.layoutBox[s];u.set(n[s]-Ft(f,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:s}=this.getProps(),{projection:o}=this.visualElement;if(!yo(s)||!o||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};fa(f=>{const h=this.getAxisMotionValue(f);if(h&&this.constraints!==!1){const m=h.get();c[f]=Z3({min:m,max:m},this.constraints[f])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),fa(f=>{if(!Bc(f,n,null))return;const h=this.getAxisMotionValue(f),{min:m,max:g}=this.constraints[f];h.set(Ft(m,g,c[f]))})}addListeners(){if(!this.visualElement.current)return;tk.set(this.visualElement,this);const n=this.visualElement.current,s=Pr(n,"pointerdown",m=>{const{drag:g,dragListener:y=!0}=this.getProps();g&&y&&this.start(m)}),o=()=>{const{dragConstraints:m}=this.getProps();yo(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,u=c.addEventListener("measure",o);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),It.read(o);const f=Kr(window,"resize",()=>this.scalePositionWithinConstraints()),h=c.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:g})=>{this.isDragging&&g&&(fa(y=>{const v=this.getAxisMotionValue(y);v&&(this.originPoint[y]+=m[y].translate,v.set(v.get()+m[y].translate))}),this.visualElement.render())}));return()=>{f(),s(),u(),h&&h()}}getProps(){const n=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:o=!1,dragPropagation:c=!1,dragConstraints:u=!1,dragElastic:f=Bp,dragMomentum:h=!0}=n;return{...n,drag:s,dragDirectionLock:o,dragPropagation:c,dragConstraints:u,dragElastic:f,dragMomentum:h}}}function Bc(t,n,s){return(n===!0||n===t)&&(s===null||s===t)}function ak(t,n=10){let s=null;return Math.abs(t.y)>n?s="y":Math.abs(t.x)>n&&(s="x"),s}class sk extends Qs{constructor(n){super(n),this.removeGroupControls=ha,this.removeListeners=ha,this.controls=new nk(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ha}unmount(){this.removeGroupControls(),this.removeListeners()}}const Rx=t=>(n,s)=>{t&&It.postRender(()=>t(n,s))};class ik extends Qs{constructor(){super(...arguments),this.removePointerDownListener=ha}onPointerDown(n){this.session=new k1(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:T1(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:s,onPan:o,onPanEnd:c}=this.node.getProps();return{onSessionStart:Rx(n),onStart:Rx(s),onMove:o,onEnd:(u,f)=>{delete this.session,c&&It.postRender(()=>c(u,f))}}}mount(){this.removePointerDownListener=Pr(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const qc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let $f=!1;class ok extends b.Component{componentDidMount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:o,layoutId:c}=this.props,{projection:u}=n;u&&(s.group&&s.group.add(u),o&&o.register&&c&&o.register(u),$f&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),qc.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:s,visualElement:o,drag:c,isPresent:u}=this.props,{projection:f}=o;return f&&(f.isPresent=u,$f=!0,c||n.layoutDependency!==s||s===void 0||n.isPresent!==u?f.willUpdate():this.safeToRemove(),n.isPresent!==u&&(u?f.promote():f.relegate()||It.postRender(()=>{const h=f.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),xh.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:o}=this.props,{projection:c}=n;$f=!0,c&&(c.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(c),o&&o.deregister&&o.deregister(c))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function M1(t){const[n,s]=Q0(),o=b.useContext(Zp);return l.jsx(ok,{...t,layoutGroup:o,switchLayoutGroup:b.useContext(c1),isPresent:n,safeToRemove:s})}function rk(t,n,s){const o=Mn(t)?t:To(t);return o.start(Eh("",o,n,s)),o.animation}const lk=(t,n)=>t.depth-n.depth;class ck{constructor(){this.children=[],this.isDirty=!1}add(n){th(this.children,n),this.isDirty=!0}remove(n){nh(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(lk),this.isDirty=!1,this.children.forEach(n)}}function uk(t,n){const s=Fn.now(),o=({timestamp:c})=>{const u=c-s;u>=n&&(Xs(o),t(u-n))};return It.setup(o,!0),()=>Xs(o)}const E1=["TopLeft","TopRight","BottomLeft","BottomRight"],dk=E1.length,Nx=t=>typeof t=="string"?parseFloat(t):t,Dx=t=>typeof t=="number"||Le.test(t);function fk(t,n,s,o,c,u){c?(t.opacity=Ft(0,s.opacity??1,pk(o)),t.opacityExit=Ft(n.opacity??1,0,hk(o))):u&&(t.opacity=Ft(n.opacity??1,s.opacity??1,o));for(let f=0;f<dk;f++){const h=`border${E1[f]}Radius`;let m=Bx(n,h),g=Bx(s,h);if(m===void 0&&g===void 0)continue;m||(m=0),g||(g=0),m===0||g===0||Dx(m)===Dx(g)?(t[h]=Math.max(Ft(Nx(m),Nx(g),o),0),(Ha.test(g)||Ha.test(m))&&(t[h]+="%")):t[h]=g}(n.rotate||s.rotate)&&(t.rotate=Ft(n.rotate||0,s.rotate||0,o))}function Bx(t,n){return t[n]!==void 0?t[n]:t.borderRadius}const pk=R1(0,.5,g0),hk=R1(.5,.95,ha);function R1(t,n,s){return o=>o<t?0:o>n?1:s(Gr(t,n,o))}function zx(t,n){t.min=n.min,t.max=n.max}function wa(t,n){zx(t.x,n.x),zx(t.y,n.y)}function Ux(t,n){t.translate=n.translate,t.scale=n.scale,t.originPoint=n.originPoint,t.origin=n.origin}function Ix(t,n,s,o,c){return t-=n,t=tu(t,1/s,o),c!==void 0&&(t=tu(t,1/c,o)),t}function mk(t,n=0,s=1,o=.5,c,u=t,f=t){if(Ha.test(n)&&(n=parseFloat(n),n=Ft(f.min,f.max,n/100)-f.min),typeof n!="number")return;let h=Ft(u.min,u.max,o);t===u&&(h-=n),t.min=Ix(t.min,n,s,h,c),t.max=Ix(t.max,n,s,h,c)}function Ox(t,n,[s,o,c],u,f){mk(t,n[s],n[o],n[c],n.scale,u,f)}const gk=["x","scaleX","originX"],yk=["y","scaleY","originY"];function Lx(t,n,s,o){Ox(t.x,n,gk,s?s.x:void 0,o?o.x:void 0),Ox(t.y,n,yk,s?s.y:void 0,o?o.y:void 0)}function Px(t){return t.translate===0&&t.scale===1}function N1(t){return Px(t.x)&&Px(t.y)}function Hx(t,n){return t.min===n.min&&t.max===n.max}function vk(t,n){return Hx(t.x,n.x)&&Hx(t.y,n.y)}function Vx(t,n){return Math.round(t.min)===Math.round(n.min)&&Math.round(t.max)===Math.round(n.max)}function D1(t,n){return Vx(t.x,n.x)&&Vx(t.y,n.y)}function Fx(t){return Dn(t.x)/Dn(t.y)}function $x(t,n){return t.translate===n.translate&&t.scale===n.scale&&t.originPoint===n.originPoint}class xk{constructor(){this.members=[]}add(n){th(this.members,n),n.scheduleRender()}remove(n){if(nh(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(n){const s=this.members.findIndex(c=>n===c);if(s===0)return!1;let o;for(let c=s;c>=0;c--){const u=this.members[c];if(u.isPresent!==!1){o=u;break}}return o?(this.promote(o),!0):!1}promote(n,s){const o=this.lead;if(n!==o&&(this.prevLead=o,this.lead=n,n.show(),o)){o.instance&&o.scheduleRender(),n.scheduleRender(),n.resumeFrom=o,s&&(n.resumeFrom.preserveOpacity=!0),o.snapshot&&(n.snapshot=o.snapshot,n.snapshot.latestValues=o.animationValues||o.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:c}=n.options;c===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:s,resumingFrom:o}=n;s.onExitComplete&&s.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bk(t,n,s){let o="";const c=t.x.translate/n.x,u=t.y.translate/n.y,f=s?.z||0;if((c||u||f)&&(o=`translate3d(${c}px, ${u}px, ${f}px) `),(n.x!==1||n.y!==1)&&(o+=`scale(${1/n.x}, ${1/n.y}) `),s){const{transformPerspective:g,rotate:y,rotateX:v,rotateY:_,skewX:C,skewY:w}=s;g&&(o=`perspective(${g}px) ${o}`),y&&(o+=`rotate(${y}deg) `),v&&(o+=`rotateX(${v}deg) `),_&&(o+=`rotateY(${_}deg) `),C&&(o+=`skewX(${C}deg) `),w&&(o+=`skewY(${w}deg) `)}const h=t.x.scale*n.x,m=t.y.scale*n.y;return(h!==1||m!==1)&&(o+=`scale(${h}, ${m})`),o||"none"}const qf=["","X","Y","Z"],Sk=1e3;let _k=0;function Gf(t,n,s,o){const{latestValues:c}=n;c[t]&&(s[t]=c[t],n.setStaticValue(t,0),o&&(o[t]=0))}function B1(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:n}=t.options;if(!n)return;const s=x1(n);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:c,layoutId:u}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",It,!(c||u))}const{parent:o}=t;o&&!o.hasCheckedOptimisedAppear&&B1(o)}function z1({attachResizeListener:t,defaultParent:n,measureScroll:s,checkIsScrollRoot:o,resetTransform:c}){return class{constructor(f={},h=n?.()){this.id=_k++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(jk),this.nodes.forEach(Mk),this.nodes.forEach(Ek),this.nodes.forEach(Tk)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new ck)}addEventListener(f,h){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new ih),this.eventHandlers.get(f).add(h)}notifyListeners(f,...h){const m=this.eventHandlers.get(f);m&&m.notify(...h)}hasListeners(f){return this.eventHandlers.has(f)}mount(f){if(this.instance)return;this.isSVG=K0(f)&&!h2(f),this.instance=f;const{layoutId:h,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||h)&&(this.isLayoutDirty=!0),t){let y,v=0;const _=()=>this.root.updateBlockedByResize=!1;It.read(()=>{v=window.innerWidth}),t(f,()=>{const C=window.innerWidth;C!==v&&(v=C,this.root.updateBlockedByResize=!0,y&&y(),y=uk(_,250),qc.hasAnimatedSinceResize&&(qc.hasAnimatedSinceResize=!1,this.nodes.forEach(Yx)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||m)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||g.getDefaultTransition()||zk,{onLayoutAnimationStart:A,onLayoutAnimationComplete:M}=g.getProps(),B=!this.targetLayout||!D1(this.targetLayout,C),P=!v&&_;if(this.options.layoutRoot||this.resumeFrom||P||v&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...yh(w,"layout"),onPlay:A,onComplete:M};(g.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(y,P)}else v||Yx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Xs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Rk),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&B1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const v=this.path[y];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Gx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Ak),this.nodes.forEach(wk),this.nodes.forEach(Ck)):this.nodes.forEach(Gx),this.clearAllSnapshots();const h=Fn.now();jn.delta=cs(0,1e3/60,h-jn.timestamp),jn.timestamp=h,jn.isProcessing=!0,Bf.update.process(jn),Bf.preRender.process(jn),Bf.render.process(jn),jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(kk),this.sharedNodes.forEach(Nk)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,It.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){It.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dn(this.snapshot.measuredBox.x)&&!Dn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=hn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(h=!1),h&&this.instance){const m=o(this.instance);this.scroll={animationId:this.root.animationId,phase:f,isRoot:m,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!c)return;const f=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!N1(this.projectionDelta),m=this.getTransformTemplate(),g=m?m(this.latestValues,""):void 0,y=g!==this.prevTransformTemplateValue;f&&this.instance&&(h||vi(this.latestValues)||y)&&(c(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return f&&(m=this.removeTransform(m)),Uk(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:f}=this.options;if(!f)return hn();const h=f.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Ik))){const{scroll:g}=this.root;g&&(vo(h.x,g.offset.x),vo(h.y,g.offset.y))}return h}removeElementScroll(f){const h=hn();if(wa(h,f),this.scroll?.wasRoot)return h;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:y,options:v}=g;g!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&wa(h,f),vo(h.x,y.offset.x),vo(h.y,y.offset.y))}return h}applyTransform(f,h=!1){const m=hn();wa(m,f);for(let g=0;g<this.path.length;g++){const y=this.path[g];!h&&y.options.layoutScroll&&y.scroll&&y!==y.root&&xo(m,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),vi(y.latestValues)&&xo(m,y.latestValues)}return vi(this.latestValues)&&xo(m,this.latestValues),m}removeTransform(f){const h=hn();wa(h,f);for(let m=0;m<this.path.length;m++){const g=this.path[m];if(!g.instance||!vi(g.latestValues))continue;Ap(g.latestValues)&&g.updateSnapshot();const y=hn(),v=g.measurePageBox();wa(y,v),Lx(h,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,y)}return vi(this.latestValues)&&Lx(h,this.latestValues),h}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(f||m&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:v}=this.options;if(!this.layout||!(y||v))return;this.resolvedRelativeTargetAt=jn.timestamp;const _=this.getClosestProjectingParent();_&&this.linkedParentVersion!==_.layoutVersion&&!_.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(_&&_.layout?this.createRelativeTarget(_,this.layout.layoutBox,_.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hn(),this.targetWithTransforms=hn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),q3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wa(this.target,this.layout.layoutBox),p1(this.target,this.targetDelta)):wa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?this.createRelativeTarget(_,this.target,_.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Ap(this.parent.latestValues)||f1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(f,h,m){this.relativeParent=f,this.linkedParentVersion=f.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),nu(this.relativeTargetOrigin,h,m),wa(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const f=this.getLead(),h=!!this.resumingFrom||this!==f;let m=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===jn.timestamp&&(m=!1),m)return;const{layout:g,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||y))return;wa(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;a3(this.layoutCorrected,this.treeScale,this.path,h),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=hn());const{target:C}=f;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ux(this.prevProjectionDelta.x,this.projectionDelta.x),Ux(this.prevProjectionDelta.y,this.projectionDelta.y)),Hr(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!$x(this.projectionDelta.x,this.prevProjectionDelta.x)||!$x(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){if(this.options.visualElement?.scheduleRender(),f){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=bo(),this.projectionDelta=bo(),this.projectionDeltaWithTransform=bo()}setAnimationOrigin(f,h=!1){const m=this.snapshot,g=m?m.latestValues:{},y={...this.latestValues},v=bo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const _=hn(),C=m?m.source:void 0,w=this.layout?this.layout.source:void 0,A=C!==w,M=this.getStack(),B=!M||M.members.length<=1,P=!!(A&&!B&&this.options.crossfade===!0&&!this.path.some(Bk));this.animationProgress=0;let E;this.mixTargetDelta=U=>{const H=U/1e3;Wx(v.x,f.x,H),Wx(v.y,f.y,H),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nu(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Dk(this.relativeTarget,this.relativeTargetOrigin,_,H),E&&vk(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=hn()),wa(E,this.relativeTarget)),A&&(this.animationValues=y,fk(y,g,this.latestValues,H,P,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Xs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=It.update(()=>{qc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=To(0)),this.currentAnimation=rk(this.motionValue,[0,1e3],{...f,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),f.onUpdate&&f.onUpdate(h)},onStop:()=>{},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Sk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:h,target:m,layout:g,latestValues:y}=f;if(!(!h||!m||!g)){if(this!==f&&this.layout&&g&&U1(this.options.animationType,this.layout.layoutBox,g.layoutBox)){m=this.target||hn();const v=Dn(this.layout.layoutBox.x);m.x.min=f.target.x.min,m.x.max=m.x.min+v;const _=Dn(this.layout.layoutBox.y);m.y.min=f.target.y.min,m.y.max=m.y.min+_}wa(h,m),xo(h,y),Hr(this.projectionDeltaWithTransform,this.layoutCorrected,h,y)}}registerSharedNode(f,h){this.sharedNodes.has(f)||this.sharedNodes.set(f,new xk),this.sharedNodes.get(f).add(h);const g=h.options.initialPromotionConfig;h.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(h):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){const{layoutId:f}=this.options;return f?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:f}=this.options;return f?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:h,preserveFollowOpacity:m}={}){const g=this.getStack();g&&g.promote(this,m),f&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetSkewAndRotation(){const{visualElement:f}=this.options;if(!f)return;let h=!1;const{latestValues:m}=f;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(h=!0),!h)return;const g={};m.z&&Gf("z",f,g,this.animationValues);for(let y=0;y<qf.length;y++)Gf(`rotate${qf[y]}`,f,g,this.animationValues),Gf(`skew${qf[y]}`,f,g,this.animationValues);f.render();for(const y in g)f.setStaticValue(y,g[y]),this.animationValues&&(this.animationValues[y]=g[y]);f.scheduleRender()}applyProjectionStyles(f,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){f.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,f.visibility="",f.opacity="",f.pointerEvents=$c(h?.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=$c(h?.pointerEvents)||""),this.hasProjected&&!vi(this.latestValues)&&(f.transform=m?m({},""):"none",this.hasProjected=!1);return}f.visibility="";const y=g.animationValues||g.latestValues;this.applyTransformsToTarget();let v=bk(this.projectionDeltaWithTransform,this.treeScale,y);m&&(v=m(y,v)),f.transform=v;const{x:_,y:C}=this.projectionDelta;f.transformOrigin=`${_.origin*100}% ${C.origin*100}% 0`,g.animationValues?f.opacity=g===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:f.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const w in kp){if(y[w]===void 0)continue;const{correct:A,applyTo:M,isCSSVariable:B}=kp[w],P=v==="none"?y[w]:A(y[w],g);if(M){const E=M.length;for(let U=0;U<E;U++)f[M[U]]=P}else B?this.options.visualElement.renderState.vars[w]=P:f[w]=P}this.options.layoutId&&(f.pointerEvents=g===this?$c(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>f.currentAnimation?.stop()),this.root.nodes.forEach(qx),this.root.sharedNodes.clear()}}}function wk(t){t.updateLayout()}function Ck(t){const n=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=t.layout,{animationType:c}=t.options,u=n.source!==t.layout.source;c==="size"?fa(y=>{const v=u?n.measuredBox[y]:n.layoutBox[y],_=Dn(v);v.min=s[y].min,v.max=v.min+_}):U1(c,n.layoutBox,s)&&fa(y=>{const v=u?n.measuredBox[y]:n.layoutBox[y],_=Dn(s[y]);v.max=v.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+_)});const f=bo();Hr(f,s,n.layoutBox);const h=bo();u?Hr(h,t.applyTransform(o,!0),n.measuredBox):Hr(h,s,n.layoutBox);const m=!N1(f);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:_}=y;if(v&&_){const C=hn();nu(C,n.layoutBox,v.layoutBox);const w=hn();nu(w,s,_.layoutBox),D1(C,w)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=C,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:h,layoutDelta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function jk(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Tk(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function kk(t){t.clearSnapshot()}function qx(t){t.clearMeasurements()}function Gx(t){t.isLayoutDirty=!1}function Ak(t){const{visualElement:n}=t.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),t.resetTransform()}function Yx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Mk(t){t.resolveTargetDelta()}function Ek(t){t.calcProjection()}function Rk(t){t.resetSkewAndRotation()}function Nk(t){t.removeLeadSnapshot()}function Wx(t,n,s){t.translate=Ft(n.translate,0,s),t.scale=Ft(n.scale,1,s),t.origin=n.origin,t.originPoint=n.originPoint}function Xx(t,n,s,o){t.min=Ft(n.min,s.min,o),t.max=Ft(n.max,s.max,o)}function Dk(t,n,s,o){Xx(t.x,n.x,s.x,o),Xx(t.y,n.y,s.y,o)}function Bk(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const zk={duration:.45,ease:[.4,0,.1,1]},Kx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Qx=Kx("applewebkit/")&&!Kx("chrome/")?Math.round:ha;function Zx(t){t.min=Qx(t.min),t.max=Qx(t.max)}function Uk(t){Zx(t.x),Zx(t.y)}function U1(t,n,s){return t==="position"||t==="preserve-aspect"&&!$3(Fx(n),Fx(s),.2)}function Ik(t){return t!==t.root&&t.scroll?.wasRoot}const Ok=z1({attachResizeListener:(t,n)=>Kr(t,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yf={current:void 0},I1=z1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Yf.current){const t=new Ok({});t.mount(window),t.setOptions({layoutScroll:!0}),Yf.current=t}return Yf.current},resetTransform:(t,n)=>{t.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Lk={pan:{Feature:ik},drag:{Feature:sk,ProjectionNode:I1,MeasureLayout:M1}};function Jx(t,n,s){const{props:o}=t;t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",s==="Start");const c="onHover"+s,u=o[c];u&&It.postRender(()=>u(n,cl(n)))}class Pk extends Qs{mount(){const{current:n}=this.node;n&&(this.unmount=c2(n,(s,o)=>(Jx(this.node,o,"Start"),c=>Jx(this.node,c,"End"))))}unmount(){}}class Hk extends Qs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ol(Kr(this.node.current,"focus",()=>this.onFocus()),Kr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function eb(t,n,s){const{props:o}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&o.whileTap&&t.animationState.setActive("whileTap",s==="Start");const c="onTap"+(s==="End"?"":s),u=o[c];u&&It.postRender(()=>u(n,cl(n)))}class Vk extends Qs{mount(){const{current:n}=this.node;n&&(this.unmount=p2(n,(s,o)=>(eb(this.node,o,"Start"),(c,{success:u})=>eb(this.node,c,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const zp=new WeakMap,Wf=new WeakMap,Fk=t=>{const n=zp.get(t.target);n&&n(t)},$k=t=>{t.forEach(Fk)};function qk({root:t,...n}){const s=t||document;Wf.has(s)||Wf.set(s,{});const o=Wf.get(s),c=JSON.stringify(n);return o[c]||(o[c]=new IntersectionObserver($k,{root:t,...n})),o[c]}function Gk(t,n,s){const o=qk(n);return zp.set(t,s),o.observe(t),()=>{zp.delete(t),o.unobserve(t)}}const Yk={some:0,all:1};class Wk extends Qs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:s,margin:o,amount:c="some",once:u}=n,f={root:s?s.current:void 0,rootMargin:o,threshold:typeof c=="number"?c:Yk[c]},h=m=>{const{isIntersecting:g}=m;if(this.isInView===g||(this.isInView=g,u&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:y,onViewportLeave:v}=this.node.getProps(),_=g?y:v;_&&_(m)};return Gk(this.node.current,f,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:s}=this.node;["amount","margin","root"].some(Xk(n,s))&&this.startObserver()}unmount(){}}function Xk({viewport:t={}},{viewport:n={}}={}){return s=>t[s]!==n[s]}const Kk={inView:{Feature:Wk},tap:{Feature:Vk},focus:{Feature:Hk},hover:{Feature:Pk}},Qk={layout:{ProjectionNode:I1,MeasureLayout:M1}},Zk={...O3,...Kk,...Lk,...Qk},Pe=e3(Zk,p3),Xf=t=>{const[n,s]=b.useState(!1);return b.useEffect(()=>{const o=window.matchMedia(t);o.matches!==n&&s(o.matches);const c=()=>s(o.matches);return o.addEventListener("change",c),()=>o.removeEventListener("change",c)},[n,t]),n},Jk=()=>{const[t,n]=b.useState({x:0,y:0}),[s,o]=b.useState(!1),[c,u]=b.useState(!1),[f,h]=b.useState(!1);return b.useEffect(()=>{const m=C=>{n({x:C.clientX,y:C.clientY}),u(!0);const A=C.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');o(!!A)},g=()=>h(!0),y=()=>h(!1),v=()=>u(!1),_=()=>u(!0);return document.addEventListener("mousemove",m),document.addEventListener("mousedown",g),document.addEventListener("mouseup",y),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",_),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",y),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",_)}},[]),c?l.jsxs(l.Fragment,{children:[l.jsx(Pe.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?40:12,height:s?40:12,borderRadius:"50%",background:s?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:s?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${f?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),l.jsx(Pe.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?50:32,height:s?50:32,borderRadius:"50%",border:`1.5px solid ${s?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"},animate:{x:t.x-t.x,y:t.y-t.y},transition:{type:"spring",stiffness:150,damping:15,mass:.1}})]}):null},eA=`
  /* Custom scrollbar - only for devices with fine pointer (mouse) */
  @media (pointer: fine) {
    /* Hide default cursor on landing page */
    .landing-page-custom-cursor {
      cursor: none !important;
    }
    .landing-page-custom-cursor * {
      cursor: none !important;
    }

    /* Custom Scrollbar for html/body */
    html:has(.landing-page-custom-cursor)::-webkit-scrollbar,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.landing-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    /* Firefox scrollbar */
    html:has(.landing-page-custom-cursor),
    body:has(.landing-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  /* Touch devices - use default cursor and scrollbar */
  @media (pointer: coarse) {
    .landing-page-custom-cursor {
      cursor: auto !important;
    }
    .landing-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,ja={page:{background:"#050505",fontFamily:'"DM Sans", sans-serif',color:"#f1f5f9",minHeight:"100vh",overflowX:"hidden"},h1:{fontFamily:'"Syne", sans-serif',color:"#ffffff",fontSize:"clamp(2.5rem, 8vw, 4.5rem)",fontWeight:700,lineHeight:1.1,marginBottom:"1.5rem"},h2:{fontFamily:'"Syne", sans-serif',color:"#f1f5f9",fontSize:"clamp(2rem, 5vw, 3rem)",fontWeight:700,lineHeight:1.2,marginBottom:"1.5rem"},h3:{fontFamily:'"Syne", sans-serif',color:"#f1f5f9",fontSize:"1.25rem",fontWeight:700,lineHeight:1.4,marginBottom:"0.75rem"},text:{color:"#94a3b8",fontSize:"1rem",lineHeight:1.7,marginBottom:0},textLarge:{color:"#94a3b8",fontSize:"1.125rem",lineHeight:1.7,marginBottom:0},gradientText:{background:"linear-gradient(135deg, #10b981 0%, #14b8a6 50%, #34d399 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"}},tA=({delay:t,duration:n,size:s,left:o,top:c})=>l.jsx(Pe.div,{className:"absolute rounded-full",style:{width:s,height:s,left:o,top:c,background:"radial-gradient(circle, rgba(16,185,129,0.4) 0%, transparent 70%)",filter:"blur(1px)"},animate:{y:[-20,20,-20],x:[-10,10,-10],opacity:[.3,.6,.3],scale:[1,1.2,1]},transition:{duration:n,delay:t,repeat:1/0,ease:"easeInOut"}}),po=({size:t,color:n,delay:s,x:o,y:c})=>l.jsx(Pe.div,{style:{position:"absolute",left:o,top:c},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1,y:[0,-15,0]},transition:{opacity:{duration:.6,delay:s},scale:{duration:.6,delay:s},y:{duration:3,delay:s+.5,repeat:1/0,ease:"easeInOut"}},children:l.jsxs("div",{style:{position:"relative",width:t,height:t,transformStyle:"preserve-3d",transform:"rotateX(-20deg) rotateY(45deg)"},children:[l.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(135deg, ${n} 0%, ${n}99 100%)`,transform:`translateZ(${t/2}px)`,borderRadius:8,boxShadow:`0 0 30px ${n}66`}}),l.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(180deg, ${n}cc 0%, ${n}66 100%)`,transform:`rotateX(-90deg) translateZ(${t/2}px)`,borderRadius:8}}),l.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(90deg, ${n}99 0%, ${n}44 100%)`,transform:`rotateY(90deg) translateZ(${t/2}px)`,borderRadius:8}})]})}),nA=({icon:t,title:n,description:s})=>l.jsx(Pe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.5},whileHover:{y:-8,scale:1.02},style:{position:"relative"},children:l.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"1rem",padding:"2rem",height:"100%",background:"linear-gradient(145deg, rgba(20,20,20,0.95) 0%, rgba(10,10,10,0.98) 100%)",border:"1px solid rgba(16,185,129,0.2)"},children:[l.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"3.5rem",height:"3.5rem",borderRadius:"0.75rem",marginBottom:"1.5rem",background:"linear-gradient(135deg, rgba(16,185,129,0.2) 0%, rgba(20,184,166,0.1) 100%)",border:"1px solid rgba(16,185,129,0.3)"},children:l.jsx(t,{style:{width:"1.75rem",height:"1.75rem",color:"#34d399"}})}),l.jsx("h3",{style:ja.h3,children:n}),l.jsx("p",{style:ja.text,children:s})]})}),aA=()=>{const t=b.useRef(null),n=Xf("(max-width: 640px)"),s=Xf("(max-width: 1024px)"),o=Xf("(pointer: fine)");b.useEffect(()=>{const f="landing-page-custom-styles";if(!document.getElementById(f)){const h=document.createElement("style");h.id=f,h.textContent=eA,document.head.appendChild(h)}return()=>{const h=document.getElementById(f);h&&h.remove()}},[]);const c=Array.from({length:20},(f,h)=>({id:h,delay:Math.random()*2,duration:4+Math.random()*3,size:4+Math.random()*8,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`})),u=[{icon:uw,title:"Real-time Messaging",description:"Lightning-fast message delivery with live typing indicators. Your conversations flow naturally without any delays."},{icon:ls,title:"End-to-End Security",description:"Your conversations stay private with military-grade encryption. Only you and your recipients can read your messages."},{icon:Hn,title:"Group Collaboration",description:"Create channels, manage groups, and share files seamlessly. Perfect for teams of any size."}];return l.jsxs("div",{ref:t,className:o?"landing-page-custom-cursor":"",style:ja.page,children:[o&&l.jsx(Jk,{}),l.jsx("div",{className:"fixed inset-0 pointer-events-none",style:{background:`
            radial-gradient(ellipse 80% 50% at 20% -10%, rgba(16,185,129,0.15) 0%, transparent 50%),
            radial-gradient(ellipse 60% 40% at 80% 10%, rgba(20,184,166,0.1) 0%, transparent 50%),
            radial-gradient(ellipse 50% 30% at 50% 100%, rgba(16,185,129,0.08) 0%, transparent 50%)
          `}}),l.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:c.map(f=>l.jsx(tA,{...f},f.id))}),l.jsx(Pe.nav,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},style:{position:"fixed",top:0,left:0,right:0,zIndex:50,backdropFilter:"blur(12px)",background:"rgba(5,5,5,0.85)",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:l.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"0.875rem 1rem":"1rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsxs(Ia,{to:"/",style:{display:"flex",alignItems:"center",gap:n?"0.5rem":"0.75rem",textDecoration:"none"},children:[l.jsx("div",{style:{width:n?"2rem":"2.5rem",height:n?"2rem":"2.5rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",boxShadow:"0 0 20px rgba(16,185,129,0.4)"},children:l.jsx(Vr,{style:{width:n?"1rem":"1.25rem",height:n?"1rem":"1.25rem",color:"#ffffff"}})}),l.jsx("span",{style:{fontSize:n?"1rem":"1.25rem",fontWeight:700,color:"#ffffff",fontFamily:'"Syne", sans-serif'},children:"Simpchat"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:n?"0.5rem":"0.75rem"},children:[l.jsx(Ia,{to:"/login",style:{padding:n?"0.375rem 0.625rem":"0.5rem 1rem",fontSize:n?"0.813rem":"0.875rem",fontWeight:600,color:"#10b981",textDecoration:"none",borderRadius:"0.5rem",transition:"all 0.2s ease"},children:"Sign In"}),l.jsx(Ia,{to:"/register",style:{display:"inline-flex",alignItems:"center",gap:"0.375rem",padding:n?"0.5rem 0.875rem":"0.625rem 1.25rem",fontSize:n?"0.813rem":"0.875rem",fontWeight:600,borderRadius:"0.5rem",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",color:"#050505",textDecoration:"none",boxShadow:"0 0 20px rgba(16,185,129,0.3)",transition:"all 0.2s ease"},children:"Get Started"})]})]})}),l.jsxs("section",{style:{position:"relative",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"5rem"},children:[l.jsx("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"3rem 1rem":"5rem 1.5rem"},children:l.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"repeat(2, 1fr)",gap:s?"2rem":"4rem",alignItems:"center"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx(Pe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},style:{marginBottom:"1.5rem"},children:l.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:500,background:"rgba(16,185,129,0.1)",border:"1px solid rgba(16,185,129,0.3)",color:"#10b981"},children:[l.jsx(lw,{style:{width:"1rem",height:"1rem"}}),"Simple. Secure. Seamless."]})}),l.jsxs(Pe.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},style:ja.h1,children:[l.jsx("span",{style:{color:"#ffffff"},children:"Connect."}),l.jsx("br",{}),l.jsx("span",{style:ja.gradientText,children:"Chat."}),l.jsx("br",{}),l.jsx("span",{style:{color:"#ffffff"},children:"Simplify."})]}),l.jsx(Pe.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},style:{...ja.textLarge,marginBottom:"2.5rem",maxWidth:"32rem",margin:"0 auto 2.5rem auto"},children:"Experience real-time messaging reimagined. Simpchat brings you instant communication with uncompromising security and elegant simplicity."}),l.jsxs(Pe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},style:{display:"flex",flexDirection:"row",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[l.jsxs(Ia,{to:"/register",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.875rem 1.75rem",fontSize:"0.938rem",fontWeight:600,borderRadius:"0.75rem",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",color:"#050505",boxShadow:"0 0 25px rgba(16,185,129,0.35)",textDecoration:"none",transition:"all 0.3s ease"},children:["Start Chatting Free",l.jsx(Ys,{style:{width:"1.125rem",height:"1.125rem"}})]}),l.jsx(Ia,{to:"/login",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.875rem 1.75rem",fontSize:"0.938rem",fontWeight:600,borderRadius:"0.75rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.15)",color:"#f1f5f9",textDecoration:"none",transition:"all 0.3s ease"},children:"Open App"})]}),l.jsxs(Pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.7},style:{display:"flex",flexDirection:n?"column":"row",alignItems:"center",gap:n?"0.75rem":"2rem",marginTop:"2.5rem",justifyContent:"center"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(cw,{style:{width:"1rem",height:"1rem",color:"#34d399"}}),l.jsx("span",{style:{fontSize:n?"0.813rem":"0.875rem",color:"#64748b"},children:"End-to-end encrypted"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Mb,{style:{width:"1rem",height:"1rem",color:"#34d399"}}),l.jsx("span",{style:{fontSize:n?"0.813rem":"0.875rem",color:"#64748b"},children:"Real-time notifications"})]})]})]}),!s&&l.jsx("div",{style:{position:"relative",height:"500px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:[l.jsx("div",{style:{position:"absolute",width:"20rem",height:"20rem",borderRadius:"50%",background:"radial-gradient(circle, rgba(16,185,129,0.25) 0%, transparent 70%)",filter:"blur(40px)"}}),l.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",perspective:"1000px"},children:[l.jsx(po,{size:100,color:"#10b981",delay:0,x:180,y:120}),l.jsx(po,{size:70,color:"#14b8a6",delay:.2,x:280,y:180}),l.jsx(po,{size:50,color:"#34d399",delay:.4,x:220,y:250}),l.jsx(po,{size:80,color:"#10b981",delay:.3,x:120,y:200}),l.jsx(po,{size:60,color:"#0d9488",delay:.5,x:300,y:280}),l.jsx(po,{size:40,color:"#14b8a6",delay:.6,x:160,y:300})]}),l.jsx(Pe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.8},style:{position:"absolute",top:"25%",right:"2.5rem"},children:l.jsx("div",{style:{padding:"1rem 1.5rem",borderRadius:"1rem",borderBottomRightRadius:"0.375rem",background:"linear-gradient(135deg, rgba(16,185,129,0.2) 0%, rgba(16,185,129,0.1) 100%)",border:"1px solid rgba(16,185,129,0.3)",backdropFilter:"blur(10px)"},children:l.jsx("p",{style:{fontSize:"0.875rem",fontWeight:500,color:"#6ee7b7",margin:0},children:"Hey! Welcome to Simpchat"})})}),l.jsx(Pe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:1},style:{position:"absolute",bottom:"25%",left:"2.5rem"},children:l.jsx("div",{style:{padding:"1rem 1.5rem",borderRadius:"1rem",borderBottomLeftRadius:"0.375rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",backdropFilter:"blur(10px)"},children:l.jsx("p",{style:{fontSize:"0.875rem",fontWeight:500,color:"#cbd5e1",margin:0},children:"Thanks! This is amazing"})})})]})})]})}),l.jsxs(Pe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},style:{position:"absolute",bottom:"2.5rem",left:"50%",transform:"translateX(-50%)",cursor:"pointer"},onClick:()=>document.getElementById("features")?.scrollIntoView({behavior:"smooth"}),children:[l.jsx(Pe.div,{animate:{y:[0,10,0]},transition:{duration:1.5,repeat:1/0},style:{width:"2rem",height:"3.5rem",borderRadius:"9999px",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:"0.625rem",border:"2px solid rgba(255,255,255,0.25)",background:"rgba(255,255,255,0.03)"},children:l.jsx(Pe.div,{animate:{y:[0,8,0],opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},style:{width:"0.5rem",height:"1rem",borderRadius:"9999px",background:"linear-gradient(180deg, #10b981 0%, #14b8a6 100%)",boxShadow:"0 0 8px rgba(16,185,129,0.5)"}})}),l.jsx("p",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.4)",marginTop:"0.5rem",textAlign:"center",fontWeight:500},children:"Scroll"})]})]}),l.jsx("section",{id:"features",style:{position:"relative",padding:n?"4rem 0":"8rem 0"},children:l.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"0 1rem":"0 1.5rem"},children:[l.jsxs(Pe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},style:{textAlign:"center",marginBottom:"4rem"},children:[l.jsxs("h2",{style:ja.h2,children:["Built for"," ",l.jsx("span",{style:ja.gradientText,children:"Modern Teams"})]}),l.jsx("p",{style:{...ja.textLarge,maxWidth:"42rem",margin:"0 auto"},children:"Everything you need for seamless communication, wrapped in an elegant interface that stays out of your way."})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",gap:n?"1rem":"1.5rem"},children:u.map((f,h)=>l.jsx(nA,{...f,index:h},f.title))})]})}),l.jsx("section",{style:{position:"relative",padding:n?"4rem 0":"8rem 0"},children:l.jsx("div",{style:{maxWidth:"56rem",margin:"0 auto",padding:n?"0 1rem":"0 1.5rem",textAlign:"center"},children:l.jsxs(Pe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},style:{position:"relative",borderRadius:n?"1rem":"1.5rem",padding:n?"2.5rem 1.5rem":"4rem 3rem",overflow:"hidden",background:"linear-gradient(145deg, rgba(16,185,129,0.1) 0%, rgba(5,5,5,0.9) 100%)",border:"1px solid rgba(16,185,129,0.2)"},children:[l.jsx("div",{style:{position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",width:"100%",height:"50%",background:"radial-gradient(ellipse at center top, rgba(16,185,129,0.15) 0%, transparent 70%)"}}),l.jsx("h2",{style:{...ja.h2,position:"relative"},children:"Ready to simplify your conversations?"}),l.jsx("p",{style:{...ja.textLarge,position:"relative",maxWidth:"32rem",margin:"0 auto 2.5rem auto"},children:"Join thousands of users who have already made the switch to simpler, more secure messaging."}),l.jsxs(Ia,{to:"/register",style:{position:"relative",display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",fontSize:"1rem",fontWeight:600,borderRadius:"0.75rem",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",color:"#050505",boxShadow:"0 0 40px rgba(16,185,129,0.4)",textDecoration:"none"},children:["Get Started  It's Free",l.jsx(Ys,{style:{width:"1.25rem",height:"1.25rem"}})]})]})})}),l.jsx("footer",{style:{position:"relative",padding:n?"2rem 0":"3rem 0",borderTop:"1px solid rgba(255,255,255,0.05)"},children:l.jsx("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"0 1rem":"0 1.5rem"},children:l.jsxs("div",{style:{display:"flex",flexDirection:n?"column":"row",alignItems:"center",justifyContent:n?"center":"space-between",gap:n?"1rem":"1.5rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx("div",{style:{width:"2rem",height:"2rem",borderRadius:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)"},children:l.jsx(Vr,{style:{width:"1rem",height:"1rem",color:"#ffffff"}})}),l.jsx("span",{style:{fontSize:"1.125rem",fontWeight:700,color:"#ffffff",fontFamily:'"Syne", sans-serif'},children:"Simpchat"})]}),l.jsxs("p",{style:{fontSize:"0.875rem",color:"#64748b",margin:0},children:[" ",new Date().getFullYear()," Simpchat. All rights reserved."]})]})})})]})},sA="_authContainer_1u6uv_47",iA="_orb_1u6uv_99",oA="_orb1_1u6uv_117",rA="_orb2_1u6uv_135",lA="_orb3_1u6uv_153",cA="_authCard_1u6uv_175",uA="_header_1u6uv_213",dA="_iconWrapper_1u6uv_225",fA="_title_1u6uv_257",pA="_subtitle_1u6uv_277",hA="_errorAlert_1u6uv_293",mA="_successAlert_1u6uv_343",gA="_form_1u6uv_393",yA="_inputGroup_1u6uv_401",vA="_label_1u6uv_409",xA="_inputWrapper_1u6uv_425",bA="_input_1u6uv_401",SA="_inputPassword_1u6uv_507",_A="_togglePassword_1u6uv_515",wA="_forgotLink_1u6uv_555",CA="_submitBtn_1u6uv_599",jA="_footer_1u6uv_689",TA="_backBtn_1u6uv_747",kA="_verifiedBadge_1u6uv_789",AA="_otpInput_1u6uv_837",MA="_resendSection_1u6uv_855",EA="_resendBtn_1u6uv_879",RA="_spinner_1u6uv_923",q={authContainer:sA,orb:iA,orb1:oA,orb2:rA,orb3:lA,authCard:cA,header:uA,iconWrapper:dA,title:fA,subtitle:pA,errorAlert:hA,successAlert:mA,form:gA,inputGroup:yA,label:vA,inputWrapper:xA,input:bA,inputPassword:SA,togglePassword:_A,forgotLink:wA,submitBtn:CA,footer:jA,backBtn:TA,verifiedBadge:kA,otpInput:AA,resendSection:MA,resendBtn:EA,spinner:RA},NA=()=>{const t=$p(),{login:n,isLoading:s,error:o,clearError:c}=il(),[u,f]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState(!1),v=async _=>{_.preventDefault(),c();try{console.log("[LoginForm] Starting login..."),await n({credential:u,password:h});const C=Ct.getState();console.log("[LoginForm] Login successful. Auth state:",{hasToken:!!C.token,hasUser:!!C.user,isLoading:C.isLoading}),C.token&&C.user?(console.log("[LoginForm] Auth state verified, navigating to dashboard..."),t("/dashboard-new")):console.error("[LoginForm] Login completed but auth state not set!")}catch(C){console.error("[LoginForm] Login error:",C)}};return l.jsxs("div",{className:q.authContainer,children:[l.jsx("div",{className:`${q.orb} ${q.orb1}`}),l.jsx("div",{className:`${q.orb} ${q.orb2}`}),l.jsx("div",{className:`${q.orb} ${q.orb3}`}),l.jsxs("div",{className:q.authCard,children:[l.jsxs("div",{className:q.header,children:[l.jsx("div",{className:q.iconWrapper,children:l.jsx(Vr,{size:32,color:"#ffffff"})}),l.jsx("h1",{className:q.title,children:"Sign In"}),l.jsx("p",{className:q.subtitle,children:"Welcome back to Simpchat"})]}),o&&l.jsxs("div",{className:q.errorAlert,children:[l.jsx(Ws,{size:20}),l.jsx("p",{children:o})]}),l.jsxs("form",{onSubmit:v,className:q.form,children:[l.jsxs("div",{className:q.inputGroup,children:[l.jsx("label",{htmlFor:"credential",className:q.label,children:"Email or Username"}),l.jsx("input",{id:"credential",type:"text",value:u,onChange:_=>f(_.target.value),placeholder:"john@example.com",required:!0,disabled:s,className:q.input})]}),l.jsxs("div",{className:q.inputGroup,children:[l.jsx("label",{htmlFor:"password",className:q.label,children:"Password"}),l.jsxs("div",{className:q.inputWrapper,children:[l.jsx("input",{id:"password",type:g?"text":"password",value:h,onChange:_=>m(_.target.value),placeholder:"",required:!0,disabled:s,className:`${q.input} ${q.inputPassword}`}),l.jsx("button",{type:"button",onClick:()=>y(!g),disabled:s,className:q.togglePassword,children:g?l.jsx(Fr,{size:20}):l.jsx($r,{size:20})})]})]}),l.jsx("div",{className:q.forgotLink,children:l.jsx(Ia,{to:"/forgot-password",children:"Forgot password?"})}),l.jsx("button",{type:"submit",disabled:s||!u||!h,className:q.submitBtn,children:s?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:q.spinner}),"Signing in..."]}):l.jsxs(l.Fragment,{children:["Sign In",l.jsx(Ys,{size:20})]})})]}),l.jsxs("div",{className:q.footer,children:[l.jsx("p",{children:"Don't have an account?"}),l.jsx(Ia,{to:"/register",children:"Create Account "})]})]})]})},DA=t=>{const[n,s]=b.useState(!1);return b.useEffect(()=>{const o=window.matchMedia(t);o.matches!==n&&s(o.matches);const c=()=>s(o.matches);return o.addEventListener("change",c),()=>o.removeEventListener("change",c)},[n,t]),n},BA=()=>{const[t,n]=b.useState({x:0,y:0}),[s,o]=b.useState(!1),[c,u]=b.useState(!1),[f,h]=b.useState(!1);return b.useEffect(()=>{const m=C=>{n({x:C.clientX,y:C.clientY}),u(!0);const A=C.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');o(!!A)},g=()=>h(!0),y=()=>h(!1),v=()=>u(!1),_=()=>u(!0);return document.addEventListener("mousemove",m),document.addEventListener("mousedown",g),document.addEventListener("mouseup",y),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",_),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",y),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",_)}},[]),c?l.jsxs(l.Fragment,{children:[l.jsx(Pe.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?40:12,height:s?40:12,borderRadius:"50%",background:s?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:s?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${f?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),l.jsx(Pe.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?50:32,height:s?50:32,borderRadius:"50%",border:`1.5px solid ${s?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"}})]}):null},zA=`
  @media (pointer: fine) {
    .auth-page-custom-cursor {
      cursor: none !important;
    }
    .auth-page-custom-cursor * {
      cursor: none !important;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    html:has(.auth-page-custom-cursor),
    body:has(.auth-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  @media (pointer: coarse) {
    .auth-page-custom-cursor {
      cursor: auto !important;
    }
    .auth-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,UA=()=>{const t=DA("(pointer: fine)");return b.useEffect(()=>{const n="auth-page-custom-styles";if(!document.getElementById(n)){const s=document.createElement("style");s.id=n,s.textContent=zA,document.head.appendChild(s)}return()=>{const s=document.getElementById(n);s&&s.remove()}},[]),l.jsxs("div",{className:t?"auth-page-custom-cursor":"",children:[t&&l.jsx(BA,{}),l.jsx(NA,{})]})},au=t=>{const n=typeof t=="string"?new Date(t):t,o=new Date().getTime()-n.getTime(),c=Math.floor(o/6e4),u=Math.floor(o/36e5),f=Math.floor(o/864e5);return c<1?"just now":c<60?`${c}m ago`:u<24?`${u}h ago`:f<7?`${f}d ago`:n.toLocaleDateString()},IA=t=>(typeof t=="string"?new Date(t):t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),tb=(t,n)=>t.length<=n?t:t.substring(0,n)+"...",Tn=t=>{if(!t||t==="undefined"||t==="null")return"?";const n=String(t).trim();if(!n||n.length===0)return"?";const s=n.split(/\s+/).filter(o=>o.length>0);return s.length===0?"?":s.length===1?s[0][0]?.toUpperCase()||"?":s.map(o=>o[0]).join("").toUpperCase().slice(0,2)||"?"},O1=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),At=t=>{if(t)return t.replace("simpchat.filestorage:9000","localhost:9000").replace("localhost:9000","localhost:9000")},su=t=>{if(!t)return"Unknown";const n=new Date(t),o=new Date().getTime()-n.getTime(),c=Math.floor(o/6e4),u=Math.floor(o/36e5),f=Math.floor(o/864e5);if(c<1)return"just now";if(c===1)return"1 minute ago";if(c<60)return`${c} minutes ago`;if(u===1)return"1 hour ago";if(u<24)return`${u} hours ago`;if(f===1)return`Yesterday at ${n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`;if(f<7){const h=n.toLocaleDateString([],{weekday:"long"}),m=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`${h} at ${m}`}return n.toLocaleDateString([],{month:"short",day:"numeric",year:"numeric"})},OA=()=>{const t=$p(),{register:n,isLoading:s}=il(),[o,c]=b.useState("email"),[u,f]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState(""),[v,_]=b.useState(""),[C,w]=b.useState(""),[A,M]=b.useState(!1),[B,P]=b.useState(!1),[E,U]=b.useState(""),[H,ee]=b.useState(!1),re=async ue=>{if(ue.preventDefault(),U(""),!O1(u)){U("Please enter a valid email address");return}ee(!0);try{await Gs.sendOTP(u),c("complete")}catch(Be){U(Fe(Be,"Failed to send verification code"))}finally{ee(!1)}},Z=async ue=>{if(ue.preventDefault(),U(""),!h.trim()){U("Username is required");return}if(h.length<3){U("Username must be at least 3 characters");return}if(g.length<5){U("Password must be at least 5 characters");return}if(g!==v){U("Passwords do not match");return}if(!C.trim()){U("Verification code is required");return}try{console.log("[RegisterForm] Registering user..."),await n(u,h,g,C);const Be=Ct.getState();console.log("[RegisterForm] Registration successful. Auth state:",{hasToken:!!Be.token,hasUser:!!Be.user,isLoading:Be.isLoading}),Be.token&&Be.user?(console.log("[RegisterForm] Auth state verified, navigating to dashboard..."),t("/dashboard-new")):console.error("[RegisterForm] Registration completed but auth state not set!")}catch(Be){U(Fe(Be,"Registration failed"))}},pe=async()=>{U(""),ee(!0);try{await Gs.sendOTP(u)}catch(ue){U(Fe(ue,"Failed to resend code"))}finally{ee(!1)}};return o==="email"?l.jsxs("div",{className:q.authContainer,children:[l.jsx("div",{className:`${q.orb} ${q.orb1}`}),l.jsx("div",{className:`${q.orb} ${q.orb2}`}),l.jsx("div",{className:`${q.orb} ${q.orb3}`}),l.jsxs("div",{className:q.authCard,children:[l.jsxs("div",{className:q.header,children:[l.jsx("div",{className:q.iconWrapper,children:l.jsx(Vr,{size:32,color:"#ffffff"})}),l.jsx("h1",{className:q.title,children:"Create Account"}),l.jsx("p",{className:q.subtitle,children:"Join Simpchat today"})]}),E&&l.jsxs("div",{className:q.errorAlert,children:[l.jsx(Ws,{size:20}),l.jsx("p",{children:E})]}),l.jsxs("form",{onSubmit:re,className:q.form,children:[l.jsxs("div",{className:q.inputGroup,children:[l.jsx("label",{htmlFor:"email",className:q.label,children:"Email Address"}),l.jsx("input",{id:"email",type:"email",value:u,onChange:ue=>f(ue.target.value),placeholder:"you@example.com",required:!0,disabled:H,className:q.input})]}),l.jsx("button",{type:"submit",disabled:H||!u,className:q.submitBtn,children:H?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:q.spinner}),"Sending..."]}):l.jsxs(l.Fragment,{children:["Continue",l.jsx(Ys,{size:20})]})})]}),l.jsxs("div",{className:q.footer,children:[l.jsx("p",{children:"Already have an account?"}),l.jsx(Ia,{to:"/login",children:"Sign In "})]})]})]}):l.jsxs("div",{className:q.authContainer,children:[l.jsx("div",{className:`${q.orb} ${q.orb1}`}),l.jsx("div",{className:`${q.orb} ${q.orb2}`}),l.jsx("div",{className:`${q.orb} ${q.orb3}`}),l.jsxs("div",{className:q.authCard,children:[l.jsxs("div",{className:q.header,style:{textAlign:"left"},children:[l.jsxs("button",{onClick:()=>c("email"),className:q.backBtn,children:[l.jsx(Eb,{size:16}),"Back"]}),l.jsx("h1",{className:q.title,style:{textAlign:"left"},children:"Complete Profile"}),l.jsxs("div",{className:q.verifiedBadge,children:[l.jsx(rp,{size:16}),l.jsxs("p",{children:["Email verified: ",u]})]})]}),E&&l.jsxs("div",{className:q.errorAlert,children:[l.jsx(Ws,{size:20}),l.jsx("p",{children:E})]}),l.jsxs("form",{onSubmit:Z,className:q.form,children:[l.jsxs("div",{className:q.inputGroup,children:[l.jsx("label",{htmlFor:"username",className:q.label,children:"Username"}),l.jsx("input",{id:"username",type:"text",value:h,onChange:ue=>m(ue.target.value),placeholder:"johndoe",required:!0,disabled:s,className:q.input})]}),l.jsxs("div",{className:q.inputGroup,children:[l.jsx("label",{htmlFor:"password",className:q.label,children:"Password"}),l.jsxs("div",{className:q.inputWrapper,children:[l.jsx("input",{id:"password",type:A?"text":"password",value:g,onChange:ue=>y(ue.target.value),placeholder:"",required:!0,disabled:s,className:`${q.input} ${q.inputPassword}`}),l.jsx("button",{type:"button",onClick:()=>M(!A),disabled:s,className:q.togglePassword,children:A?l.jsx(Fr,{size:20}):l.jsx($r,{size:20})})]})]}),l.jsxs("div",{className:q.inputGroup,children:[l.jsx("label",{htmlFor:"confirm-password",className:q.label,children:"Confirm Password"}),l.jsxs("div",{className:q.inputWrapper,children:[l.jsx("input",{id:"confirm-password",type:B?"text":"password",value:v,onChange:ue=>_(ue.target.value),placeholder:"",required:!0,disabled:s,className:`${q.input} ${q.inputPassword}`}),l.jsx("button",{type:"button",onClick:()=>P(!B),disabled:s,className:q.togglePassword,children:B?l.jsx(Fr,{size:20}):l.jsx($r,{size:20})})]})]}),l.jsxs("div",{className:q.inputGroup,children:[l.jsx("label",{htmlFor:"otp-code",className:q.label,children:"Verification Code"}),l.jsx("input",{id:"otp-code",type:"text",value:C,onChange:ue=>w(ue.target.value),placeholder:"000000",required:!0,disabled:s,className:`${q.input} ${q.otpInput}`})]}),l.jsx("button",{type:"submit",disabled:s||!h||!g||!v||!C,className:q.submitBtn,children:s?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:q.spinner}),"Creating..."]}):l.jsxs(l.Fragment,{children:["Create Account",l.jsx(Ys,{size:20})]})})]}),l.jsxs("div",{className:q.resendSection,children:[l.jsx("p",{children:"Didn't get the code?"}),l.jsx("button",{onClick:pe,disabled:H,className:q.resendBtn,children:H?"Resending...":"Resend Code"})]})]})]})},LA=t=>{const[n,s]=b.useState(!1);return b.useEffect(()=>{const o=window.matchMedia(t);o.matches!==n&&s(o.matches);const c=()=>s(o.matches);return o.addEventListener("change",c),()=>o.removeEventListener("change",c)},[n,t]),n},PA=()=>{const[t,n]=b.useState({x:0,y:0}),[s,o]=b.useState(!1),[c,u]=b.useState(!1),[f,h]=b.useState(!1);return b.useEffect(()=>{const m=C=>{n({x:C.clientX,y:C.clientY}),u(!0);const A=C.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');o(!!A)},g=()=>h(!0),y=()=>h(!1),v=()=>u(!1),_=()=>u(!0);return document.addEventListener("mousemove",m),document.addEventListener("mousedown",g),document.addEventListener("mouseup",y),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",_),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",y),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",_)}},[]),c?l.jsxs(l.Fragment,{children:[l.jsx(Pe.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?40:12,height:s?40:12,borderRadius:"50%",background:s?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:s?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${f?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),l.jsx(Pe.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?50:32,height:s?50:32,borderRadius:"50%",border:`1.5px solid ${s?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"}})]}):null},HA=`
  @media (pointer: fine) {
    .auth-page-custom-cursor {
      cursor: none !important;
    }
    .auth-page-custom-cursor * {
      cursor: none !important;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    html:has(.auth-page-custom-cursor),
    body:has(.auth-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  @media (pointer: coarse) {
    .auth-page-custom-cursor {
      cursor: auto !important;
    }
    .auth-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,VA=()=>{const t=LA("(pointer: fine)");return b.useEffect(()=>{const n="auth-page-custom-styles";if(!document.getElementById(n)){const s=document.createElement("style");s.id=n,s.textContent=HA,document.head.appendChild(s)}return()=>{const s=document.getElementById(n);s&&s.remove()}},[]),l.jsxs("div",{className:t?"auth-page-custom-cursor":"",children:[t&&l.jsx(PA,{}),l.jsx(OA,{})]})},FA=()=>{const t=$p(),[n,s]=b.useState("email"),[o,c]=b.useState(""),[u,f]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState(""),[v,_]=b.useState(!1),[C,w]=b.useState(!1),[A,M]=b.useState(""),[B,P]=b.useState(""),[E,U]=b.useState(!1),H=async Z=>{if(Z.preventDefault(),M(""),!O1(o)){M("Please enter a valid email address");return}U(!0);try{await Gs.sendOTP(o),s("reset")}catch(pe){M(Fe(pe,"Failed to send verification code"))}finally{U(!1)}},ee=async Z=>{if(Z.preventDefault(),M(""),P(""),u.length<5){M("Password must be at least 5 characters");return}if(u!==h){M("Passwords do not match");return}if(!g.trim()){M("Verification code is required");return}U(!0);try{await Gs.resetPasswordByEmail(o,u,g),P("Password reset successfully! Redirecting to login..."),setTimeout(()=>{t("/login")},2e3)}catch(pe){M(Fe(pe,"Failed to reset password"))}finally{U(!1)}},re=async()=>{M(""),U(!0);try{await Gs.sendOTP(o)}catch(Z){M(Fe(Z,"Failed to resend code"))}finally{U(!1)}};return n==="email"?l.jsxs("div",{className:q.authContainer,children:[l.jsx("div",{className:`${q.orb} ${q.orb1}`}),l.jsx("div",{className:`${q.orb} ${q.orb2}`}),l.jsx("div",{className:`${q.orb} ${q.orb3}`}),l.jsxs("div",{className:q.authCard,children:[l.jsxs("div",{className:q.header,children:[l.jsx("div",{className:q.iconWrapper,children:l.jsx(dw,{size:32,color:"#ffffff"})}),l.jsx("h1",{className:q.title,children:"Forgot Password"}),l.jsx("p",{className:q.subtitle,children:"Enter your email to reset your password"})]}),A&&l.jsxs("div",{className:q.errorAlert,children:[l.jsx(Ws,{size:20}),l.jsx("p",{children:A})]}),l.jsxs("form",{onSubmit:H,className:q.form,children:[l.jsxs("div",{className:q.inputGroup,children:[l.jsx("label",{htmlFor:"email",className:q.label,children:"Email Address"}),l.jsx("input",{id:"email",type:"email",value:o,onChange:Z=>c(Z.target.value),placeholder:"you@example.com",required:!0,disabled:E,className:q.input})]}),l.jsx("button",{type:"submit",disabled:E||!o,className:q.submitBtn,children:E?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:q.spinner}),"Sending..."]}):l.jsxs(l.Fragment,{children:["Send Reset Code",l.jsx(Ys,{size:20})]})})]}),l.jsxs("div",{className:q.footer,children:[l.jsx("p",{children:"Remember your password?"}),l.jsx(Ia,{to:"/login",children:"Back to Sign In "})]})]})]}):l.jsxs("div",{className:q.authContainer,children:[l.jsx("div",{className:`${q.orb} ${q.orb1}`}),l.jsx("div",{className:`${q.orb} ${q.orb2}`}),l.jsx("div",{className:`${q.orb} ${q.orb3}`}),l.jsxs("div",{className:q.authCard,children:[l.jsxs("div",{className:q.header,style:{textAlign:"left"},children:[l.jsxs("button",{onClick:()=>s("email"),className:q.backBtn,children:[l.jsx(Eb,{size:16}),"Back"]}),l.jsx("h1",{className:q.title,style:{textAlign:"left"},children:"Reset Password"}),l.jsxs("div",{className:q.verifiedBadge,children:[l.jsx(rp,{size:16}),l.jsxs("p",{children:["Code sent to: ",o]})]})]}),B&&l.jsxs("div",{className:q.successAlert,children:[l.jsx(rp,{size:20}),l.jsx("p",{children:B})]}),A&&l.jsxs("div",{className:q.errorAlert,children:[l.jsx(Ws,{size:20}),l.jsx("p",{children:A})]}),l.jsxs("form",{onSubmit:ee,className:q.form,children:[l.jsxs("div",{className:q.inputGroup,children:[l.jsx("label",{htmlFor:"password",className:q.label,children:"New Password"}),l.jsxs("div",{className:q.inputWrapper,children:[l.jsx("input",{id:"password",type:v?"text":"password",value:u,onChange:Z=>f(Z.target.value),placeholder:"",required:!0,disabled:E||!!B,className:`${q.input} ${q.inputPassword}`}),l.jsx("button",{type:"button",onClick:()=>_(!v),disabled:E||!!B,className:q.togglePassword,children:v?l.jsx(Fr,{size:20}):l.jsx($r,{size:20})})]})]}),l.jsxs("div",{className:q.inputGroup,children:[l.jsx("label",{htmlFor:"confirm-password",className:q.label,children:"Confirm New Password"}),l.jsxs("div",{className:q.inputWrapper,children:[l.jsx("input",{id:"confirm-password",type:C?"text":"password",value:h,onChange:Z=>m(Z.target.value),placeholder:"",required:!0,disabled:E||!!B,className:`${q.input} ${q.inputPassword}`}),l.jsx("button",{type:"button",onClick:()=>w(!C),disabled:E||!!B,className:q.togglePassword,children:C?l.jsx(Fr,{size:20}):l.jsx($r,{size:20})})]})]}),l.jsxs("div",{className:q.inputGroup,children:[l.jsx("label",{htmlFor:"otp-code",className:q.label,children:"Verification Code"}),l.jsx("input",{id:"otp-code",type:"text",value:g,onChange:Z=>y(Z.target.value),placeholder:"000000",required:!0,disabled:E||!!B,className:`${q.input} ${q.otpInput}`})]}),l.jsx("button",{type:"submit",disabled:E||!u||!h||!g||!!B,className:q.submitBtn,children:E?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:q.spinner}),"Resetting..."]}):l.jsxs(l.Fragment,{children:["Reset Password",l.jsx(Ys,{size:20})]})})]}),!B&&l.jsxs("div",{className:q.resendSection,children:[l.jsx("p",{children:"Didn't get the code?"}),l.jsx("button",{onClick:re,disabled:E,className:q.resendBtn,children:E?"Resending...":"Resend Code"})]})]})]})},$A=t=>{const[n,s]=b.useState(!1);return b.useEffect(()=>{const o=window.matchMedia(t);o.matches!==n&&s(o.matches);const c=()=>s(o.matches);return o.addEventListener("change",c),()=>o.removeEventListener("change",c)},[n,t]),n},qA=()=>{const[t,n]=b.useState({x:0,y:0}),[s,o]=b.useState(!1),[c,u]=b.useState(!1),[f,h]=b.useState(!1);return b.useEffect(()=>{const m=C=>{n({x:C.clientX,y:C.clientY}),u(!0);const A=C.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');o(!!A)},g=()=>h(!0),y=()=>h(!1),v=()=>u(!1),_=()=>u(!0);return document.addEventListener("mousemove",m),document.addEventListener("mousedown",g),document.addEventListener("mouseup",y),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",_),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",y),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",_)}},[]),c?l.jsxs(l.Fragment,{children:[l.jsx(Pe.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?40:12,height:s?40:12,borderRadius:"50%",background:s?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:s?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${f?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),l.jsx(Pe.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?50:32,height:s?50:32,borderRadius:"50%",border:`1.5px solid ${s?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"}})]}):null},GA=`
  @media (pointer: fine) {
    .auth-page-custom-cursor {
      cursor: none !important;
    }
    .auth-page-custom-cursor * {
      cursor: none !important;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    html:has(.auth-page-custom-cursor),
    body:has(.auth-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  @media (pointer: coarse) {
    .auth-page-custom-cursor {
      cursor: auto !important;
    }
    .auth-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,YA=()=>{const t=$A("(pointer: fine)");return b.useEffect(()=>{const n="auth-page-custom-styles";if(!document.getElementById(n)){const s=document.createElement("style");s.id=n,s.textContent=GA,document.head.appendChild(s)}return()=>{const s=document.getElementById(n);s&&s.remove()}},[]),l.jsxs("div",{className:t?"auth-page-custom-cursor":"",children:[t&&l.jsx(qA,{}),l.jsx(FA,{})]})},WA=t=>{if(!t)return"channel";const n=String(t).toLowerCase().trim();return n==="conversation"||n==="dm"||n==="directmessage"?"dm":n==="group"?"group":(n==="channel"||console.warn("[Normalizer] Unknown chat type:",t,"defaulting to channel"),"channel")},Ur=t=>{if(!t)return{};console.log("[Normalizer] Raw chat data:",{id:t.id,name:t.name,participantsCount:t.participantsCount,ParticipantsCount:t.ParticipantsCount,membersLength:t.members?.length});let n;t.privacy!==null&&t.privacy!==void 0&&(typeof t.privacy=="number"?n=t.privacy===0?"public":"private":typeof t.privacy=="string"&&(n=t.privacy.toLowerCase()));const s={id:t.id,name:t.name||"Unknown",type:WA(t.type),avatar:At(t.avatarUrl||t.AvatarUrl||t.avatar||t.profileImage),description:t.description||"",privacy:n,members:(t.members||[]).map(o=>{const c=o.user?{...o.user,id:o.user.id||o.user.userId||o.userId,avatar:At(o.user.avatarUrl||o.user.AvatarUrl||o.user.avatar||o.user.profileImage)}:{id:o.userId||o.id,username:o.username||"Unknown",email:"",avatar:At(o.avatarUrl||o.AvatarUrl||o.avatar),onlineStatus:"offline",lastSeen:new Date().toISOString()};return{id:o.id||o.userId||o.user?.id,userId:o.userId||o.id||o.user?.id,user:c,joinedAt:o.joinedAt,role:o.role||"member"}}),lastMessage:t.lastMessage?{id:t.lastMessage.id,content:t.lastMessage.content,createdAt:t.lastMessage.createdAt||t.lastMessage.sentAt||new Date().toISOString(),senderId:t.lastMessage.senderId,senderUsername:t.lastMessage.senderUsername,fileUrl:At(t.lastMessage.fileUrl),replyId:t.lastMessage.replyId,isSeen:t.lastMessage.isSeen??!1}:void 0,unreadCount:t.unreadCount!==void 0?t.unreadCount:t.notificationsCount||0,createdAt:t.created||t.createdAt||new Date().toISOString(),updatedAt:t.userLastMessage||t.updatedAt||t.createdAt||new Date().toISOString(),messages:t.messages?t.messages.map(o=>({...o,fileUrl:At(o.fileUrl),senderAvatarUrl:At(o.senderAvatarUrl),isSeen:o.isSeen??o.IsSeen??!1,seenAt:o.seenAt??o.SeenAt,isCurrentUser:o.isCurrentUser??o.IsCurrentUser??!1})):void 0,participantsCount:t.participantsCount??t.ParticipantsCount,participantsOnline:t.participantsOnline??t.ParticipantsOnline,notificationsCount:t.notificationsCount??t.NotificationsCount,isOnline:t.isOnline??t.IsOnline??!1,createdById:t.createdById??t.CreatedById??t.ownerId??t.OwnerId};return console.log("[Normalizer] Normalized chat result:",{id:s.id,name:s.name,participantsCount:s.participantsCount,createdById:s.createdById,membersCount:s.members?.length}),s},Up=t=>{if(!t)return{};console.log("[Normalizer] Normalizing user:",t),console.log("[Normalizer] User description fields:",{description:t.description,Description:t.Description,bio:t.bio});const n=t.userId||t.id||t.entityId||t.EntityId;let s="offline";return typeof t.onlineStatus=="string"?s=t.onlineStatus.toLowerCase()||"offline":typeof t.isOnline=="boolean"&&(s=t.isOnline?"online":"offline"),{id:n,username:t.username||t.displayName||t.name||"Unknown",email:t.email||"",avatar:At(t.avatarUrl||t.AvatarUrl||t.avatar||t.profileImage),bio:t.description||t.Description||t.bio||"",onlineStatus:s,lastSeen:t.lastSeen||new Date().toISOString(),addMePolicy:t.addMePolicy||"everyone"}},XA=t=>Array.isArray(t)?t.map(n=>Ur(n)):(console.warn("[Normalizer] Expected array of chats, got:",typeof t),[]),nb=t=>Array.isArray(t)?t.map(n=>Up(n)):(console.warn("[Normalizer] Expected array of users, got:",typeof t),[]),Me={getAllChats:async()=>{const t=await Ee.get("/chats/me");console.log("[ChatService] Raw API response:",t.data);const n=t.data?.data||t.data;console.log("[ChatService] Extracted rawChats:",n),console.log("[ChatService] First chat participantsCount:",n?.[0]?.participantsCount);const s=XA(n);return console.log("[ChatService] After normalization, first chat participantsCount:",s?.[0]?.participantsCount),s},getChat:async t=>{const n=await Ee.get(`/chats/${t}`),s=n.data?.data||n.data;return Ur(s)},getChatProfile:async t=>{const n=await Ee.get(`/chats/${t}/profile`),s=n.data?.data||n.data;return console.log("[ChatService] getChatProfile raw response:",{chatId:t,rawChat:s,hasMembers:!!s?.members,membersLength:s?.members?.length,hasParticipants:!!s?.participants,participantsLength:s?.participants?.length,createdById:s?.createdById,ownerId:s?.ownerId,CreatedById:s?.CreatedById,OwnerId:s?.OwnerId}),Ur(s)},createGroup:async t=>{const n=await Ee.post("/groups",t,{headers:{"Content-Type":"multipart/form-data"}}),s=n.data?.data||n.data;return Ur(s)},createChannel:async t=>{const n=await Ee.post("/channels",t,{headers:{"Content-Type":"multipart/form-data"}}),s=n.data?.data||n.data;return Ur(s)},updateChat:async(t,n,s)=>{const o=n==="group"?"/groups":"/channels",c=await Ee.put(o,s,{headers:{"Content-Type":"multipart/form-data"},params:{chatId:t}});return c.data?.data||c.data},deleteChat:async(t,n)=>{const s=n==="group"?"/groups":"/channels",o=await Ee.delete(s,{params:{chatId:t}});return o.data?.data||o.data},deleteConversation:async t=>{const n=await Ee.delete("/conversations",{params:{conversationId:t}});return n.data?.data||n.data},joinChat:async(t,n)=>{const s=n==="group"?"/groups/join":"/channels/join",o=n==="group"?"groupId":"channelId",c=await Ee.post(s,null,{params:{[o]:t}});return c.data?.data||c.data},leaveChat:async(t,n)=>{const s=n==="group"?"/groups/leave":"/channels/leave",o=await Ee.post(s,null,{params:{chatId:t}});return o.data?.data||o.data},searchChats:async t=>{const n=await Ee.post("/chats/search",{pageNumber:1,pageSize:10,searchTerm:t});console.log("[ChatService] searchChats full response:",n);const s=n.data?.data;if(!Array.isArray(s))return console.warn("[ChatService] Search returned non-array data:",s),[];const o=s.map(c=>{const u=c.type||c.chatType,f=String(u).toLowerCase().trim();let h="channel";return f==="conversation"||f==="dm"||f==="directmessage"?h="dm":f==="group"?h="group":f==="channel"&&(h="channel"),{id:c.id||c.entityId,name:c.name||c.displayName||"Unknown",type:h,avatar:At(c.avatarUrl||c.avatar||c.profileImage),description:c.description||"",memberCount:c.memberCount||c.participantsCount||0}});return console.log("[ChatService] Normalized search results:",o),o},banUser:async(t,n)=>{const s=await Ee.post(`/chats/ban/${n}`,null,{params:{chatId:t}});return s.data?.data||s.data},unbanUser:async(t,n)=>{const s=await Ee.post(`/chats/unban/${n}`,null,{params:{chatId:t}});return s.data?.data||s.data},getBannedUsers:async t=>{const n=await Ee.get(`/chats/${t}/banned-users`);return n.data?.data||n.data||[]},addMemberToGroup:async(t,n)=>{const s=await Ee.post("/groups/add-member",null,{params:{chatId:t,addingUserId:n}});return s.data?.data||s.data},addMemberToChannel:async(t,n)=>{const s=await Ee.post("/channels/add-member",null,{params:{chatId:t,addingUserId:n}});return s.data?.data||s.data},removeMemberFromGroup:async(t,n)=>{const s=await Ee.post("/groups/remove-member",null,{params:{chatId:t,removingUserId:n}});return s.data?.data||s.data},removeMemberFromChannel:async(t,n)=>{const s=await Ee.post("/channels/remove-member",null,{params:{chatId:t,removingUserId:n}});return s.data?.data||s.data},updateChatPrivacy:async(t,n)=>{const s=n==="public"?0:1,o=await Ee.put("/chats/privacy-type",null,{params:{chatId:t,privacyType:s}});return o.data?.data||o.data},addUserPermission:async(t,n,s)=>{const o=await Ee.post("/chats/add-user-permission",null,{params:{chatId:t,addingUserId:n,permissionName:s}});return o.data?.data||o.data},createOrGetDM:async(t,n)=>{try{if(console.log("[ChatService] createOrGetDM called with:",{recipientId:t,recipientIdType:typeof t,initialMessage:n,isRecipientIdValid:t&&t!=="undefined"}),!t||t==="undefined")throw new Error(`Invalid recipientId: ${t}`);const s=await Me.getAllChats();console.log("[ChatService] Fetched chats, looking for existing DM with recipient:",t);let o;for(const c of s)if(console.log("[ChatService] Checking chat:",{chatId:c.id,type:c.type,memberCount:c.members?.length||0}),c.type==="dm")if(c.members&&c.members.length>0){if(c.members.some(f=>{const h=f.userId===t||f.id===t||f.user?.id===t;return h&&console.log("[ChatService] Found matching member:",f),h})){o=c;break}}else{console.log("[ChatService] Members array empty for DM, fetching full details for chat:",c.id);try{const u=await Me.getChat(c.id);if(console.log("[ChatService] Full chat details:",{id:u.id,memberCount:u.members?.length||0,members:u.members?.map(f=>({userId:f.userId,id:f.id}))}),u.members&&u.members.length>0&&u.members.some(h=>{const m=h.userId===t||h.id===t||h.user?.id===t;return m&&console.log("[ChatService] Found matching member in full chat:",h),m})){o=u;break}}catch(u){console.error("[ChatService] Error fetching full chat details:",u)}}if(console.log("[ChatService] DM chat found:",o?.id||"NOT FOUND"),o&&n){console.log("[ChatService] Sending to existing DM with chatId:",o.id);const c=new FormData;return c.append("chatId",o.id),c.append("content",n),console.log("[ChatService] FormData entries:",{chatId:o.id,content:n}),await Ee.post("/messages/",c,{headers:{"Content-Type":"multipart/form-data"}}),console.log("[ChatService] Message sent to existing DM:",o.id),o}if(!o&&n){console.log("[ChatService] Creating new DM conversation with user:",t);const c=new FormData;c.append("receiverId",t),c.append("content",n),console.log("[ChatService] FormData entries for new DM:",{receiverId:t,content:n});const u=await Ee.post("/messages/",c,{headers:{"Content-Type":"multipart/form-data"}});console.log("[ChatService] Message sent to new DM, conversation auto-created. Response:",u);const h=(await Me.getAllChats()).find(m=>m.type==="dm"&&m.members?.some(g=>g.id===t||g.userId===t));return console.log("[ChatService] Newly created DM:",h?.id||"NOT FOUND"),h}return console.log("[ChatService] No action taken (no message to send)"),o}catch(s){throw console.error("[ChatService] Error in createOrGetDM:",s),s}}},KA=Object.freeze(Object.defineProperty({__proto__:null,chatService:Me},Symbol.toStringTag,{value:"Module"})),L1={"":"Like","":"Love","":"Laugh","":"Sad","":"Angry"},QA={Like:"",Love:"",Laugh:"",Sad:"",Angry:""},ZA=[{emoji:"",type:"Like",label:"Like"},{emoji:"",type:"Love",label:"Love"},{emoji:"",type:"Laugh",label:"Laugh"},{emoji:"",type:"Sad",label:"Sad"},{emoji:"",type:"Angry",label:"Angry"}],rs={sendMessage:async t=>{try{console.log("[MessageService] sendMessage called"),console.log("[MessageService] FormData entries:");for(const[s,o]of t.entries())o instanceof File?console.log(`  ${s}: File(${o.name}, ${o.size} bytes, ${o.type})`):console.log(`  ${s}: ${o}`);const n=await Ee.post("/messages",t,{headers:{"Content-Type":"multipart/form-data"}});return console.log("[MessageService] Response:",n.data),n.data?.data||n.data}catch(n){throw console.error("[MessageService] Error sending message:",n),n}},editMessage:async(t,n)=>{const s=new FormData;s.append("Content",n);const o=await Ee.put(`/messages/${t}`,s,{headers:{"Content-Type":"multipart/form-data"}});return o.data?.data||o.data},deleteMessage:async t=>{const n=await Ee.delete(`/messages/${t}`);return n.data?.data||n.data},toggleReaction:async(t,n)=>{const s=await Ee.post(`/messages/${t}/reactions/${n}`);return s.data?.data??s.data},toggleReactionByEmoji:async(t,n)=>{const s=L1[n];if(!s)throw new Error(`Unknown emoji: ${n}`);return rs.toggleReaction(t,s)},getReactions:async t=>{const n=await Ee.get(`/messages/${t}/reactions`);return n.data?.data||n.data||[]},pinMessage:async t=>{const n=await Ee.post(`/messages/${t}/pin`);return n.data?.data||n.data},unpinMessage:async t=>{const n=await Ee.post(`/messages/${t}/unpin`);return n.data?.data||n.data},getPinnedMessages:async t=>{const n=await Ee.get(`/messages/pinned/${t}`);return n.data?.data||n.data}},Gc=Object.freeze(Object.defineProperty({__proto__:null,AVAILABLE_REACTIONS:ZA,EMOJI_TO_REACTION_TYPE:L1,REACTION_TYPE_TO_EMOJI:QA,messageService:rs},Symbol.toStringTag,{value:"Module"})),Oe=cu((t,n)=>({chats:[],currentChat:null,messages:[],pinnedMessages:new Map,chatPermissions:new Map,isLoadingChats:!1,isLoadingMessages:!1,isLoadingPinned:!1,permissionsLoading:!1,error:null,typingUsers:new Map,onlineUsers:new Map,userLastSeen:new Map,blockedByUsers:new Set,usersYouBlocked:new Set,loadChats:async()=>{t({isLoadingChats:!0,error:null});try{const s=await Me.getAllChats();console.log("[ChatStore] Chats from API (already normalized):",s),console.log("[ChatStore] Sample chat participantsCount:",s[0]?.participantsCount,s[0]?.name),t({chats:s,isLoadingChats:!1})}catch(s){const o=Fe(s,"Failed to load chats");console.error("[ChatStore] Error loading chats:",s),t({error:o,isLoadingChats:!1})}},setCurrentChat:s=>{console.log("[ChatStore] setCurrentChat called with:",{chatId:s?.id,chatName:s?.name,participantsCount:s?.participantsCount,membersLength:s?.members?.length}),t({currentChat:s})},setMessages:s=>{t({messages:s})},loadMessages:async(s,o=1)=>{t({isLoadingMessages:!0,error:null});try{const{chatService:c}=await bt(async()=>{const{chatService:f}=await Promise.resolve().then(()=>KA);return{chatService:f}},void 0),u=await c.getChat(s);t({messages:u.messages||[],isLoadingMessages:!1})}catch(c){const u=Fe(c,"Failed to load messages");t({error:u,isLoadingMessages:!1})}},sendMessage:async(s,o,c,u,f)=>{t({error:null});try{if(u){const h=new FormData;s&&h.append("chatId",s),o&&h.append("receiverId",o),c&&h.append("content",c),f&&h.append("replyId",f),h.append("file",u);const m=await rs.sendMessage(h);t(g=>({messages:[...g.messages,m]}))}else await(await bt(()=>Promise.resolve().then(()=>Ip),void 0).then(m=>m.signalRService)).sendMessage(s,c,o||void 0,f||null)}catch(h){const m=Fe(h,"Failed to send message");t({error:m})}},editMessage:async(s,o)=>{t({error:null});try{const c=await rs.editMessage(s,o);t(u=>({messages:u.messages.map(f=>f.messageId===s?c:f)}))}catch(c){const u=Fe(c,"Failed to edit message");t({error:u})}},deleteMessage:async s=>{t({error:null});try{await rs.deleteMessage(s),t(o=>({messages:o.messages.filter(c=>c.messageId!==s)}))}catch(o){const c=Fe(o,"Failed to delete message");t({error:c})}},toggleReaction:async(s,o)=>{t({error:null});try{return await rs.toggleReactionByEmoji(s,o)}catch(c){const u=Fe(c,"Failed to toggle reaction");return t({error:u}),!1}},clearError:()=>t({error:null}),loadPinnedMessages:async s=>{t({isLoadingPinned:!0});try{const o=await rs.getPinnedMessages(s);t(c=>{const u=new Map(c.pinnedMessages);return u.set(s,o||[]),{pinnedMessages:u,isLoadingPinned:!1}})}catch(o){console.error("[ChatStore] Error loading pinned messages:",o),t({isLoadingPinned:!1})}},pinMessage:async s=>{try{await rs.pinMessage(s)}catch(o){const c=Fe(o,"Failed to pin message");throw t({error:c}),o}},unpinMessage:async s=>{try{await rs.unpinMessage(s)}catch(o){const c=Fe(o,"Failed to unpin message");throw t({error:c}),o}},getPinnedMessages:s=>n().pinnedMessages.get(s)||[],loadPermissions:async s=>{const{user:o}=Ct.getState();if(console.log("[loadPermissions] Called with:",{chatId:s,userId:o?.id,username:o?.username}),!o||!s){console.log("[loadPermissions] Early return - no user or chatId");return}t({permissionsLoading:!0});try{const{permissionService:c}=await bt(async()=>{const{permissionService:m}=await import("./permission.service-k-pqJdLT.js");return{permissionService:m}},__vite__mapDeps([0,1,2]));console.log("[loadPermissions] Calling API: GET /permissions/",s,"/user/",o.id);const u=await c.getUserPermissions(s,o.id);console.log("[loadPermissions] API response:",u);const f=u?.permissions||u||[],h=Array.isArray(f)?f.map(m=>m.permissionName||m.name||m):[];console.log("[ChatStore] Loaded permissions for chat",s,":",h),t(m=>({chatPermissions:new Map(m.chatPermissions).set(s,h),permissionsLoading:!1}))}catch(c){console.error("[ChatStore] Failed to load permissions:",c),t(u=>({chatPermissions:new Map(u.chatPermissions).set(s,[]),permissionsLoading:!1}))}},hasPermission:(s,o)=>{const{currentChat:c,chatPermissions:u}=n(),{user:f}=Ct.getState();if(console.log("[hasPermission] Checking permission:",{chatId:s,permission:o,currentChatId:c?.id,currentChatType:c?.type,userId:f?.id,createdById:c?.createdById,membersCount:c?.members?.length}),c?.type==="dm")return["SendMessage","PinMessages"].includes(o)?(console.log("[hasPermission] DM chat - allowing:",o),!0):!1;if(c&&f&&c.createdById===f.id)return console.log("[hasPermission] User is chat creator - granting all permissions"),!0;if(c&&f&&c.members){const g=c.members.find(v=>v.userId===f.id);console.log("[hasPermission] Current member:",{found:!!g,memberId:g?.userId,role:g?.role});const y=g?.role?.toLowerCase();if(y==="admin"||y==="owner")return console.log("[hasPermission] User has admin/owner role - granting all permissions"),!0}const h=u.get(s)||[],m=h.includes(o);return console.log("[hasPermission] Checking cached permissions:",{cachedPermissions:h,hasPermission:m}),m},clearPermissions:s=>{t(s?o=>{const c=new Map(o.chatPermissions);return c.delete(s),{chatPermissions:c}}:{chatPermissions:new Map})},grantPermission:(s,o)=>{console.log("[ChatStore] Granting permission:",{chatId:s,permissionName:o}),t(c=>{const u=new Map(c.chatPermissions),f=u.get(s)||[];return f.includes(o)||u.set(s,[...f,o]),{chatPermissions:u}})},revokePermission:(s,o)=>{console.log("[ChatStore] Revoking permission:",{chatId:s,permissionName:o}),t(c=>{const u=new Map(c.chatPermissions),f=u.get(s)||[];return u.set(s,f.filter(h=>h!==o)),{chatPermissions:u}})},isUserOnline:s=>n().onlineUsers.get(s)||!1,getUserLastSeen:s=>n().userLastSeen.get(s),getOnlineMembersCount:s=>{const o=n().chats.find(f=>f.id===s);if(!o||!o.members)return 0;let c=0;const u=n().onlineUsers;for(const f of o.members)u.get(f.userId)&&c++;return c},setInitialPresenceStates:s=>{console.log("[ChatStore] Setting initial presence states for",Object.keys(s).length,"users"),console.log("[ChatStore] Raw presence states:",s);const o=new Map,c=new Map;Object.entries(s).forEach(([u,f])=>{console.log(`[ChatStore] Processing user ${u}, state:`,f,"type:",typeof f),typeof f=="boolean"?(o.set(u,f),console.log(`[ChatStore] Set user ${u} to ${f?"online":"offline"}`)):(o.set(u,f.isOnline),f.lastSeen&&c.set(u,f.lastSeen),console.log(`[ChatStore] Set user ${u} to ${f.isOnline?"online":"offline"}, lastSeen: ${f.lastSeen||"none"}`))}),t({onlineUsers:o,userLastSeen:c}),console.log("[ChatStore] Presence states initialized:",{online:Array.from(o.entries()).filter(([u,f])=>f).length,total:o.size,onlineUserIds:Array.from(o.entries()).filter(([u,f])=>f).map(([u])=>u)})},handleReceiveMessage:s=>{console.log("[ChatStore] Received message:",s);const o=n(),c=Ct.getState().user?.id;if(o.currentChat&&s.chatId===o.currentChat.id&&!o.messages.some(f=>f.messageId===s.messageId)){const f={messageId:s.messageId,chatId:s.chatId,senderId:s.senderId,senderUsername:s.senderUsername||"Unknown",senderAvatarUrl:s.senderAvatarUrl,content:s.content,fileUrl:s.fileUrl,replyId:s.replyId,sentAt:s.sentAt,isSeen:s.isSeen??!1,seenAt:s.seenAt,isNotificated:!1,notificationId:"",messageReactions:[],isCurrentUser:s.senderId===c};t({messages:[...o.messages,f]}),console.log("[ChatStore] Added new message to state, isCurrentUser:",f.isCurrentUser)}n().loadChats()},handleMessageEdited:s=>{console.log("[ChatStore] Message edited:",s),t(o=>({messages:o.messages.map(c=>c.messageId===s.messageId?{...c,content:s.content}:c)}))},handleMessageDeleted:s=>{console.log("[ChatStore] Message deleted:",s),t(o=>({messages:o.messages.filter(c=>c.messageId!==s.messageId)}))},handleReactionAdded:s=>{console.log("[ChatStore] Reaction added event received:",s);const o=n();console.log("[ChatStore] Current messages count:",o.messages.length),console.log("[ChatStore] Looking for messageId:",s.messageId);const c=o.messages.find(u=>u.messageId===s.messageId);console.log("[ChatStore] Found message:",c?"YES":"NO"),c&&(t(u=>({messages:u.messages.map(f=>f.messageId===s.messageId?{...f,messageReactions:[...f.messageReactions||[],{reactionType:s.reactionType,userId:s.userId,userName:""}]}:f)})),console.log("[ChatStore] Reaction added to message"))},handleReactionRemoved:s=>{console.log("[ChatStore] Reaction removed:",s),t(o=>({messages:o.messages.map(c=>c.messageId===s.messageId?{...c,messageReactions:(c.messageReactions||[]).filter(u=>!(u.userId===s.userId&&u.reactionType===s.reactionType))}:c)}))},handleUserOnline:s=>{console.log("[ChatStore] User online:",s),t(o=>{const c=new Map(o.onlineUsers);c.set(s.userId,!0);const u=new Map(o.userLastSeen);return u.delete(s.userId),{onlineUsers:c,userLastSeen:u,chats:o.chats.map(f=>f.members?.some(m=>m.userId===s.userId)?{...f,isOnline:f.type==="dm"?!0:f.isOnline,members:f.members?.map(m=>m.userId===s.userId?{...m,user:{...m.user,onlineStatus:"online",lastSeen:""}}:m)}:f)}})},handleUserOffline:s=>{console.log("[ChatStore] User offline:",s),t(o=>{const c=new Map(o.onlineUsers);c.set(s.userId,!1);const u=new Map(o.userLastSeen);return s.lastSeen&&u.set(s.userId,s.lastSeen),{onlineUsers:c,userLastSeen:u,chats:o.chats.map(f=>f.members?.some(m=>m.userId===s.userId)?{...f,isOnline:f.type==="dm"?!1:f.isOnline,members:f.members?.map(m=>m.userId===s.userId?{...m,user:{...m.user,onlineStatus:"offline",lastSeen:s.lastSeen}}:m)}:f)}})},handleUserTyping:s=>{console.log("[ChatStore] User typing:",s),t(o=>{const c=new Map(o.typingUsers);return c.set(`${s.chatId}-${s.userId}`,{userId:s.userId,timestamp:Date.now()}),{typingUsers:c}}),setTimeout(()=>{t(o=>{const c=new Map(o.typingUsers);return c.delete(`${s.chatId}-${s.userId}`),{typingUsers:c}})},3e3)},handleUserStoppedTyping:s=>{console.log("[ChatStore] User stopped typing:",s),t(o=>{const c=new Map(o.typingUsers);return c.delete(`${s.chatId}-${s.userId}`),{typingUsers:c}})},handleMessagePinned:s=>{console.log("[ChatStore] Message pinned:",s),t(o=>({messages:o.messages.map(c=>c.messageId===s.messageId?{...c,isPinned:!0,pinnedAt:s.pinnedAt,pinnedById:s.pinnedById,pinnedByUsername:s.pinnedByUsername}:c)})),n().loadPinnedMessages(s.chatId)},handleMessageUnpinned:s=>{console.log("[ChatStore] Message unpinned:",s),t(o=>({messages:o.messages.map(c=>c.messageId===s.messageId?{...c,isPinned:!1,pinnedAt:void 0,pinnedById:void 0,pinnedByUsername:void 0}:c)})),t(o=>{const c=new Map(o.pinnedMessages),u=c.get(s.chatId)||[];return c.set(s.chatId,u.filter(f=>f.messageId!==s.messageId)),{pinnedMessages:c}})},handleAddedToChat:s=>{console.log("[ChatStore] Added to chat:",s),n().loadChats()},handleNewConversation:s=>{console.log("[ChatStore] New conversation:",s),n().loadChats()},handleConversationCreated:async s=>{console.log("[ChatStore] Conversation created (sender notification):",s);const c=n().currentChat;if(c&&c.id.startsWith("temp_dm_")&&c.id.includes(s.receiverId)){console.log("[ChatStore] Switching from temp chat to real conversation:",s.conversationId),await n().loadChats();const f=n().chats.find(h=>h.id===s.conversationId);if(f){console.log("[ChatStore] Found new conversation, switching to it:",f.id),t({currentChat:f});try{await(await bt(()=>Promise.resolve().then(()=>Ip),void 0).then(m=>m.signalRService)).joinChat(f.id)}catch(h){console.error("[ChatStore] Failed to join new chat:",h)}}}else n().loadChats()},handlePermissionGranted:s=>{console.log("[ChatStore] Permission granted:",s);const{user:o}=Ct.getState();o&&s.userId===o.id&&t(c=>{const u=new Map(c.chatPermissions),f=u.get(s.chatId)||[];return f.includes(s.permissionName)||u.set(s.chatId,[...f,s.permissionName]),{chatPermissions:u}})},handlePermissionRevoked:s=>{console.log("[ChatStore] Permission revoked:",s);const{user:o}=Ct.getState();o&&s.userId===o.id&&t(c=>{const u=new Map(c.chatPermissions),f=u.get(s.chatId)||[];return u.set(s.chatId,f.filter(h=>h!==s.permissionName)),{chatPermissions:u}})},handleAllPermissionsRevoked:s=>{console.log("[ChatStore] All permissions revoked:",s);const{user:o}=Ct.getState();o&&s.userId===o.id&&t(c=>{const u=new Map(c.chatPermissions);return u.set(s.chatId,[]),{chatPermissions:u}})},handleUserBlockedYou:s=>{console.log("[ChatStore] User blocked you:",s),t(o=>{const c=new Set(o.blockedByUsers);return c.add(s.blockerId),{blockedByUsers:c}})},handleYouBlockedUser:s=>{console.log("[ChatStore] You blocked user:",s),s.blockedUserId&&t(o=>{const c=new Set(o.usersYouBlocked);return c.add(s.blockedUserId),{usersYouBlocked:c}})},handleUserUnblockedYou:s=>{console.log("[ChatStore] User unblocked you:",s),t(o=>{const c=new Set(o.blockedByUsers);return c.delete(s.unblockerId),{blockedByUsers:c}})},handleYouUnblockedUser:s=>{console.log("[ChatStore] You unblocked user:",s),s.unblockedUserId&&t(o=>{const c=new Set(o.usersYouBlocked);return c.delete(s.unblockedUserId),{usersYouBlocked:c}})},handleChatDeleted:s=>{console.log("[ChatStore] Chat deleted:",s);const o=n();t({chats:o.chats.filter(c=>c.id!==s.chatId),currentChat:o.currentChat?.id===s.chatId?null:o.currentChat,messages:o.currentChat?.id===s.chatId?[]:o.messages}),t(c=>{const u=new Map(c.chatPermissions);return u.delete(s.chatId),{chatPermissions:u}})},handleRemovedFromChat:s=>{console.log("[ChatStore] Removed from chat:",s);const o=n();t({chats:o.chats.filter(c=>c.id!==s.chatId),currentChat:o.currentChat?.id===s.chatId?null:o.currentChat,messages:o.currentChat?.id===s.chatId?[]:o.messages}),t(c=>{const u=new Map(c.chatPermissions);return u.delete(s.chatId),{chatPermissions:u}})},handleMessagesMarkedSeen:s=>{console.log("[ChatStore] Messages marked as seen:",s);const o=n();o.currentChat&&s.chatId===o.currentChat.id&&t({messages:o.messages.map(u=>s.messageIds.includes(u.messageId)?{...u,isSeen:!0,seenAt:s.seenAt}:u)});const c=Ct.getState().user?.id;c&&s.seenByUserId===c&&t(u=>({chats:u.chats.map(f=>f.id===s.chatId?{...f,unreadCount:Math.max(0,(f.unreadCount||0)-s.messageIds.length)}:f),currentChat:u.currentChat?.id===s.chatId?{...u.currentChat,unreadCount:Math.max(0,(u.currentChat.unreadCount||0)-s.messageIds.length)}:u.currentChat}))},resetUnreadCount:s=>{console.log("[ChatStore] Resetting unread count for chat:",s),t(o=>({chats:o.chats.map(c=>c.id===s?{...c,unreadCount:0}:c),currentChat:o.currentChat?.id===s?{...o.currentChat,unreadCount:0}:o.currentChat}))},isBlockedBy:s=>n().blockedByUsers.has(s),hasBlocked:s=>n().usersYouBlocked.has(s),addBlockedUser:s=>{console.log("[ChatStore] Adding blocked user:",s),t(o=>{const c=new Set(o.usersYouBlocked);return c.add(s),{usersYouBlocked:c}})},removeBlockedUser:s=>{console.log("[ChatStore] Removing blocked user:",s),t(o=>{const c=new Set(o.usersYouBlocked);return c.delete(s),{usersYouBlocked:c}})}})),JA=()=>{const t=localStorage.getItem("simpchat-theme");return t==="dark"||t==="light"?t:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},Kf=t=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("simpchat-theme",t)},eM=cu(t=>{const n=JA();return Kf(n),{theme:n,toggleTheme:()=>{t(s=>{const o=s.theme==="light"?"dark":"light";return Kf(o),{theme:o}})},setTheme:s=>{Kf(s),t({theme:s})}}}),tM="_dashboard_1003y_106",nM="_gradientFlow_1003y_1",aM="_darkMode_1003y_137",sM="_leftPanel_1003y_151",iM="_panelGlow_1003y_1",oM="_panelHeader_1003y_172",rM="_title_1003y_203",lM="_menuButton_1003y_226",cM="_searchBar_1003y_261",uM="_searchInput_1003y_266",dM="_searchResults_1003y_296",fM="_slideDown_1003y_1",pM="_searchResultItem_1003y_330",hM="_searchResultAvatar_1003y_356",mM="_searchResultInfo_1003y_372",gM="_searchResultName_1003y_377",yM="_searchResultType_1003y_390",vM="_searchResultTypeIcon_1003y_400",xM="_searchLoading_1003y_407",bM="_searchNoResults_1003y_408",SM="_chatList_1003y_421",_M="_emptyState_1003y_455",wM="_loading_1003y_456",CM="_chatItem_1003y_469",jM="_active_1003y_483",TM="_chatAvatar_1003y_511",kM="_avatarFallback_1003y_537",AM="_onlineIndicator_1003y_548",MM="_chatInfo_1003y_564",EM="_chatHeader_1003y_571",RM="_chatNameWithType_1003y_578",NM="_headerRight_1003y_586",DM="_chatName_1003y_578",BM="_chatTypeIcon_1003y_606",zM="_iconDm_1003y_623",UM="_iconGroup_1003y_634",IM="_iconChannel_1003y_645",OM="_timestamp_1003y_655",LM="_chatPreview_1003y_666",PM="_unreadBadge_1003y_679",HM="_unreadPulse_1003y_1",VM="_chatHeader2_1003y_703",FM="_headerInfo_1003y_720",$M="_headerTitle_1003y_727",qM="_chatTitle_1003y_733",GM="_headerChatType_1003y_750",YM="_headerActions_1003y_760",WM="_headerButton_1003y_766",XM="_messagesContainer_1003y_804",KM="_noMessages_1003y_838",QM="_welcomeScreen_1003y_850",ZM="_welcomeIcon_1003y_865",JM="_welcomeText_1003y_871",eE="_welcomeSubtext_1003y_882",tE="_inputArea_1003y_892",nE="_inputWrapper_1003y_906",aE="_messageInput_1003y_912",sE="_sendButton_1003y_952",iE="_modalOverlay_1003y_999",oE="_modalFadeIn_1003y_1",rE="_modal_1003y_999",lE="_modalSlideUp_1003y_1",cE="_modalHeader_1003y_1031",uE="_closeButton_1003y_1054",dE="_modalBody_1003y_1084",fE="_modalFooter_1003y_1121",pE="_formGroup_1003y_1133",hE="_formInput_1003y_1149",mE="_primaryButton_1003y_1179",gE="_secondaryButton_1003y_1205",yE="_profileContent_1003y_1235",vE="_profileInfo_1003y_1241",xE="_avatarSection_1003y_1247",bE="_largeAvatar_1003y_1253",SE="_profileField_1003y_1274",_E="_loadingState_1003y_1305",wE="_menuDropdown_1003y_1312",CE="_menuItem_1003y_1344",jE="_menuDivider_1003y_1385",TE="_mainContent_1003y_1396",kE="_chatHeaderBar_1003y_1419",AE="_headerLeft_1003y_1434",ME="_headerAvatar_1003y_1441",EE="_headerStatus_1003y_1493",RE="_online_1003y_548",NE="_messageGroup_1003y_1513",DE="_ownMessage_1003y_1521",BE="_messageBubble_1003y_1525",zE="_otherMessage_1003y_1531",UE="_senderAvatar_1003y_1546",IE="_senderName_1003y_1584",OE="_messageContent_1003y_1592",LE="_messageTime_1003y_1599",PE="_attachment_1003y_1607",HE="_reactionsContainer_1003y_1626",VE="_reaction_1003y_1626",FE="_inputField_1003y_1663",$E="_emojiButton_1003y_1700",qE="_attachButton_1003y_1701",GE="_rightPanel_1003y_1731",YE="_chatInfoPanel_1003y_1772",WE="_chatInfoHeader_1003y_1779",XE="_chatInfoAvatar_1003y_1789",KE="_chatInfoName_1003y_1810",QE="_chatInfoType_1003y_1821",ZE="_editChatButton_1003y_1831",JE="_infoContent_1003y_1850",eR="_infoSection_1003y_1856",tR="_infoLabel_1003y_1860",nR="_memberList_1003y_1873",aR="_memberItem_1003y_1879",sR="_memberAvatar_1003y_1895",iR="_memberInfo_1003y_1916",oR="_memberName_1003y_1921",rR="_memberRole_1003y_1934",lR="_memberStatus_1003y_1944",cR="_emptyScreen_1003y_1954",uR="_emptyIcon_1003y_1964",dR="_emptyActions_1003y_1991",fR="_actionButton_1003y_1997",pR="_userSection_1003y_2020",hR="_userAvatar_1003y_2040",mR="_userInfo_1003y_2061",gR="_username_1003y_2066",yR="_userStatus_1003y_2080",vR="_logoutButton_1003y_2090",xR="_hidden_1003y_2122",bR="_truncate_1003y_2126",SR="_mobileMenuButton_1003y_2133",_R="_mobileOverlay_1003y_2138",wR="_mobileOpen_1003y_2190",CR="_borderGlow_1003y_1",jR="_chatItemHoverGlow_1003y_1",TR="_buttonPulse_1003y_1",kR="_inputFocusGlow_1003y_1",AR="_subtleFloat_1003y_1",MR="_messageSlideIn_1003y_1",ER="_shimmer_1003y_1",N={dashboard:tM,gradientFlow:nM,darkMode:aM,leftPanel:sM,panelGlow:iM,panelHeader:oM,title:rM,menuButton:lM,searchBar:cM,searchInput:uM,searchResults:dM,slideDown:fM,searchResultItem:pM,searchResultAvatar:hM,searchResultInfo:mM,searchResultName:gM,searchResultType:yM,searchResultTypeIcon:vM,searchLoading:xM,searchNoResults:bM,chatList:SM,emptyState:_M,loading:wM,chatItem:CM,active:jM,chatAvatar:TM,avatarFallback:kM,onlineIndicator:AM,chatInfo:MM,chatHeader:EM,chatNameWithType:RM,headerRight:NM,chatName:DM,chatTypeIcon:BM,iconDm:zM,iconGroup:UM,iconChannel:IM,timestamp:OM,chatPreview:LM,unreadBadge:PM,unreadPulse:HM,chatHeader2:VM,headerInfo:FM,headerTitle:$M,chatTitle:qM,headerChatType:GM,headerActions:YM,headerButton:WM,messagesContainer:XM,noMessages:KM,welcomeScreen:QM,welcomeIcon:ZM,welcomeText:JM,welcomeSubtext:eE,inputArea:tE,inputWrapper:nE,messageInput:aE,sendButton:sE,modalOverlay:iE,modalFadeIn:oE,modal:rE,modalSlideUp:lE,modalHeader:cE,closeButton:uE,modalBody:dE,modalFooter:fE,formGroup:pE,formInput:hE,primaryButton:mE,secondaryButton:gE,profileContent:yE,profileInfo:vE,avatarSection:xE,largeAvatar:bE,profileField:SE,loadingState:_E,menuDropdown:wE,menuItem:CE,menuDivider:jE,mainContent:TE,chatHeaderBar:kE,headerLeft:AE,headerAvatar:ME,headerStatus:EE,online:RE,messageGroup:NE,ownMessage:DE,messageBubble:BE,otherMessage:zE,senderAvatar:UE,senderName:IE,messageContent:OE,messageTime:LE,attachment:PE,reactionsContainer:HE,reaction:VE,inputField:FE,emojiButton:$E,attachButton:qE,rightPanel:GE,chatInfoPanel:YE,chatInfoHeader:WE,chatInfoAvatar:XE,chatInfoName:KE,chatInfoType:QE,editChatButton:ZE,infoContent:JE,infoSection:eR,infoLabel:tR,memberList:nR,memberItem:aR,memberAvatar:sR,memberInfo:iR,memberName:oR,memberRole:rR,memberStatus:lR,emptyScreen:cR,emptyIcon:uR,emptyActions:dR,actionButton:fR,userSection:pR,userAvatar:hR,userInfo:mR,username:gR,userStatus:yR,logoutButton:vR,hidden:xR,truncate:bR,mobileMenuButton:SR,mobileOverlay:_R,mobileOpen:wR,borderGlow:CR,chatItemHoverGlow:jR,buttonPulse:TR,inputFocusGlow:kR,subtleFloat:AR,messageSlideIn:MR,shimmer:ER},yn={getCurrentUser:async()=>{const t=await Ee.get("/users/me"),n=t.data?.data||t.data;return Up(n)},updateProfile:async t=>(await Ee.put("/users/me",t,{headers:{"Content-Type":"multipart/form-data"}}),yn.getCurrentUser()),searchUsers:async t=>{const n=await Ee.get(`/users/search/${encodeURIComponent(t)}`),s=n.data?.data||n.data;return nb(s)},getUserProfile:async t=>{const n=await Ee.get(`/users/${t}`);console.log("[UserService] getUserProfile raw response:",n.data);const s=n.data?.data||n.data;return console.log("[UserService] getUserProfile rawUser:",s),console.log("[UserService] getUserProfile description:",s?.description,s?.Description),Up(s)},updateLastSeen:async()=>{const t=await Ee.put("/users/last-seen");return t.data?.data||t.data},getAllUsers:async()=>{const t=await Ee.get("/users"),n=t.data?.data||t.data;return nb(n)},deleteUser:async t=>{const n=await Ee.delete(`/users/${t}`);return n.data?.data||n.data},blockUser:async t=>{const n=await Ee.post(`/users/blocks/${t}`);return n.data?.data||n.data},unblockUser:async t=>{const n=await Ee.delete(`/users/blocks/${t}`);return n.data?.data||n.data},getBlockedUsers:async()=>{const t=await Ee.get("/users/blocks");return t.data?.data||t.data||[]},getBlockStatus:async t=>(await Ee.get(`/users/blocks/${t}/status`)).data?.isBlocked||!1,getMutualBlockStatus:async t=>{const n=await Ee.get(`/users/blocks/${t}/mutual-status`);return{iBlockedThem:n.data?.iBlockedThem||!1,theyBlockedMe:n.data?.theyBlockedMe||!1}}},Vn=Object.freeze(Object.defineProperty({__proto__:null,userService:yn},Symbol.toStringTag,{value:"Module"})),RR="_container_nzeaj_52",NR="_toast_nzeaj_64",DR="_slideIn_nzeaj_1",BR="_glowPulse_nzeaj_1",zR="_exit_nzeaj_84",UR="_slideOut_nzeaj_1",IR="_success_nzeaj_89",OR="_error_nzeaj_97",LR="_warning_nzeaj_105",PR="_info_nzeaj_113",HR="_iconWrapper_nzeaj_120",VR="_iconBounce_nzeaj_1",FR="_message_nzeaj_134",$R="_closeBtn_nzeaj_143",qR="_progressBar_nzeaj_168",GR="_progressShrink_nzeaj_1",xi={container:RR,toast:NR,slideIn:DR,glowPulse:BR,exit:zR,slideOut:UR,success:IR,error:OR,warning:LR,info:PR,iconWrapper:HR,iconBounce:VR,message:FR,closeBtn:$R,progressBar:qR,progressShrink:GR},YR=({toast:t,onClose:n})=>{const[s,o]=b.useState(!1);b.useEffect(()=>{const f=t.duration||4e3,h=setTimeout(()=>{o(!0)},f-300),m=setTimeout(()=>{n(t.id)},f);return()=>{clearTimeout(h),clearTimeout(m)}},[t.id,t.duration,n]);const c=()=>{o(!0),setTimeout(()=>n(t.id),300)},u=()=>{switch(t.type){case"success":return l.jsx(pw,{size:22});case"error":return l.jsx(fw,{size:22});case"warning":return l.jsx(Ws,{size:22});case"info":return l.jsx(Rb,{size:22})}};return l.jsxs("div",{className:`${xi.toast} ${xi[t.type]} ${s?xi.exit:""}`,children:[l.jsx("div",{className:xi.iconWrapper,children:u()}),l.jsx("span",{className:xi.message,children:t.message}),l.jsx("button",{onClick:c,"aria-label":"Close",style:{background:"rgba(255, 255, 255, 0.15)",border:"none",borderRadius:"6px",color:"#ffffff",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"8px",fontSize:"16px",fontWeight:"bold",lineHeight:1},children:""}),l.jsx("div",{className:xi.progressBar,style:{animationDuration:`${t.duration||4e3}ms`}})]})},WR=({toasts:t,onClose:n})=>l.jsx("div",{className:xi.container,children:t.map(s=>l.jsx(YR,{toast:s,onClose:n},s.id))});class XR{toasts=[];listeners=[];subscribe(n){return this.listeners.push(n),()=>{this.listeners=this.listeners.filter(s=>s!==n)}}notify(){this.listeners.forEach(n=>n([...this.toasts]))}show(n,s,o){const c=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,u={id:c,type:n,message:s,duration:o};return this.toasts.push(u),this.notify(),c}success(n,s){return this.show("success",n,s)}error(n,s){return this.show("error",n,s||5e3)}warning(n,s){return this.show("warning",n,s)}info(n,s){return this.show("info",n,s)}remove(n){this.toasts=this.toasts.filter(s=>s.id!==n),this.notify()}getToasts(){return[...this.toasts]}}const So=new XR,se={success:(t,n)=>So.success(t,n),error:(t,n)=>So.error(t,n),warning:(t,n)=>So.warning(t,n),info:(t,n)=>So.info(t,n)},KR=({isOpen:t,title:n,message:s,confirmText:o="Confirm",cancelText:c="Cancel",variant:u="danger",onConfirm:f,onCancel:h})=>l.jsx(Ta,{children:t&&l.jsx(Pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},onClick:h,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:l.jsxs(Pe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.15},onClick:m=>m.stopPropagation(),style:{width:"100%",maxWidth:"400px",background:"#1e293b",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.3)",overflow:"hidden"},children:[l.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[l.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:u==="danger"?"#ef4444":u==="warning"?"#f59e0b":"#6366f1",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(hw,{size:20,color:"white"})}),l.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:600,color:"#f1f5f9"},children:n})]}),l.jsx("button",{onClick:h,"aria-label":"Close",style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",transition:"color 0.15s ease",fontSize:"22px",fontWeight:300,lineHeight:1},onMouseEnter:m=>m.currentTarget.style.color="#f1f5f9",onMouseLeave:m=>m.currentTarget.style.color="#94a3b8",children:""})]}),l.jsx("div",{style:{padding:"20px"},children:l.jsx("p",{style:{margin:0,fontSize:"14px",lineHeight:1.6,color:"#94a3b8"},children:s})}),l.jsxs("div",{style:{padding:"12px 20px 20px",display:"flex",gap:"10px",justifyContent:"flex-end"},children:[l.jsx("button",{onClick:h,style:{padding:"10px 20px",borderRadius:"10px",border:"1px solid rgba(255, 255, 255, 0.15)",background:"rgba(255, 255, 255, 0.05)",color:"#94a3b8",fontSize:"14px",fontWeight:500,cursor:"pointer",transition:"background 0.15s ease"},onMouseEnter:m=>m.currentTarget.style.background="rgba(255, 255, 255, 0.1)",onMouseLeave:m=>m.currentTarget.style.background="rgba(255, 255, 255, 0.05)",children:c}),l.jsx("button",{onClick:f,style:{padding:"10px 20px",borderRadius:"10px",border:"none",background:u==="danger"?"#ef4444":u==="warning"?"#f59e0b":"#6366f1",color:"white",fontSize:"14px",fontWeight:500,cursor:"pointer",transition:"background 0.15s ease"},onMouseEnter:m=>m.currentTarget.style.opacity="0.9",onMouseLeave:m=>m.currentTarget.style.opacity="1",children:o})]})]})})});let ho=null;const Yc={init:t=>{ho=t},show:t=>new Promise(n=>{console.log("[ConfirmModal] show() called, setConfirmState exists:",!!ho),ho?ho({isOpen:!0,title:t.title,message:t.message,confirmText:t.confirmText||"Confirm",cancelText:t.cancelText||"Cancel",variant:t.variant||"danger",callback:n}):(console.warn("[ConfirmModal] Store not initialized! Using native confirm."),n(window.confirm(t.message)))}),close:t=>{ho&&ho(n=>(n.callback&&n.callback(t),{...n,isOpen:!1,callback:null}))}},vn=Yc.show,QR=()=>{const[t,n]=Oa.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",variant:"danger",callback:null});return Oa.useEffect(()=>(console.log("[ConfirmModal] Initializing confirm store..."),Yc.init(n),()=>{console.log("[ConfirmModal] Cleanup - resetting store")}),[]),l.jsx(KR,{isOpen:t.isOpen,title:t.title,message:t.message,confirmText:t.confirmText,cancelText:t.cancelText,variant:t.variant,onConfirm:()=>Yc.close(!0),onCancel:()=>Yc.close(!1)})},ZR=t=>{if(!t||t==="undefined"||t==="null")return"?";const n=String(t).trim();if(!n||n.length===0)return"?";const s=n.split(/\s+/).filter(o=>o.length>0);return s.length===0?"?":s.length===1?s[0][0]?.toUpperCase()||"?":s.map(o=>o[0]).join("").toUpperCase().slice(0,2)||"?"},JR=({isOpen:t,onClose:n,isDarkMode:s=!1})=>{const[o,c]=b.useState([]),[u,f]=b.useState(!1),[h,m]=b.useState(""),[g,y]=b.useState(null);b.useEffect(()=>{t&&v()},[t]);const v=async()=>{f(!0),y(null);try{const w=await yn.getAllUsers();c(w)}catch(w){console.error("Failed to load users:",w),w.response?.status===403?y("Access denied. You need admin privileges to view this panel."):y("Failed to load users. Please try again.")}finally{f(!1)}},_=async(w,A)=>{if(await vn({title:"Delete User",message:`Are you sure you want to delete user "${A}"? This action cannot be undone and all their data will be permanently deleted.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))try{await yn.deleteUser(w),await v(),se.success(`User "${A}" has been deleted successfully.`)}catch(B){console.error("Failed to delete user:",B),B.response?.status===403?se.error("Access denied. You need admin privileges to delete users."):se.error("Failed to delete user. Please try again.")}},C=o.filter(w=>w.username.toLowerCase().includes(h.toLowerCase())||w.email.toLowerCase().includes(h.toLowerCase()));return t?l.jsx("div",{className:`${N.modalOverlay} ${s?N.darkMode:""}`,onClick:n,children:l.jsxs("div",{className:N.modal,onClick:w=>w.stopPropagation(),style:{maxWidth:"900px",width:"90%"},children:[l.jsxs("div",{className:N.modalHeader,children:[l.jsx("h2",{children:" Admin Panel - User Management"}),l.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),l.jsxs("div",{className:N.modalBody,style:{maxHeight:"70vh",overflowY:"auto"},children:[g&&l.jsx("div",{style:{padding:"12px",backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)",borderRadius:"6px",color:"#d32f2f",marginBottom:"16px"},children:g}),l.jsx("div",{className:N.formGroup,style:{marginBottom:"16px"},children:l.jsx("input",{type:"text",placeholder:"Search users by username or email...",value:h,onChange:w=>m(w.target.value),className:N.formInput,style:{margin:0}})}),u?l.jsx("div",{className:N.loadingState,children:"Loading users..."}):C.length===0?l.jsx("div",{className:N.emptyState,children:h?"No users match your search":"No users found"}):l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[l.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"6px",fontWeight:600,fontSize:"14px",color:"var(--text)"},children:["Total Users: ",C.length]}),l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"var(--surface)",borderRadius:"8px",overflow:"hidden"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{backgroundColor:"var(--background)",borderBottom:"2px solid var(--border)"},children:[l.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"User"}),l.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Email"}),l.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Status"}),l.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Actions"})]})}),l.jsx("tbody",{children:C.map(w=>l.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",transition:"background-color 0.2s"},onMouseEnter:A=>{A.currentTarget.style.backgroundColor="var(--background)"},onMouseLeave:A=>{A.currentTarget.style.backgroundColor="transparent"},children:[l.jsx("td",{style:{padding:"12px"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[w.avatar?l.jsx("img",{src:w.avatar,alt:w.username,style:{width:"36px",height:"36px",borderRadius:"50%",objectFit:"cover"}}):l.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:"var(--accent)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"14px"},children:ZR(w.username)}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:w.username}),w.bio&&l.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:w.bio})]})]})}),l.jsx("td",{style:{padding:"12px",fontSize:"13px",color:"var(--text-secondary)"},children:w.email}),l.jsx("td",{style:{padding:"12px"},children:l.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:600,backgroundColor:w.onlineStatus==="online"?"rgba(16, 185, 129, 0.15)":w.onlineStatus==="away"?"rgba(245, 158, 11, 0.15)":"rgba(107, 114, 128, 0.15)",color:w.onlineStatus==="online"?"#10b981":w.onlineStatus==="away"?"#f59e0b":"#6b7280"},children:w.onlineStatus})}),l.jsx("td",{style:{padding:"12px",textAlign:"center"},children:l.jsx("button",{onClick:()=>_(w.id,w.username),style:{padding:"6px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:A=>{A.currentTarget.style.opacity="0.9",A.currentTarget.style.transform="scale(1.05)"},onMouseLeave:A=>{A.currentTarget.style.opacity="1",A.currentTarget.style.transform="scale(1)"},children:" Delete"})})]},w.id))})]})})]})]}),l.jsxs("div",{className:N.modalFooter,children:[l.jsx("button",{onClick:v,className:N.secondaryButton,disabled:u,children:" Refresh"}),l.jsx("button",{onClick:n,className:N.primaryButton,children:"Close"})]})]})}):null};class Ai extends Error{constructor(n,s){const o=new.target.prototype;super(`${n}: Status code '${s}'`),this.statusCode=s,this.__proto__=o}}class Rh extends Error{constructor(n="A timeout occurred."){const s=new.target.prototype;super(n),this.__proto__=s}}class ka extends Error{constructor(n="An abort occurred."){const s=new.target.prototype;super(n),this.__proto__=s}}class e5 extends Error{constructor(n,s){const o=new.target.prototype;super(n),this.transport=s,this.errorType="UnsupportedTransportError",this.__proto__=o}}class t5 extends Error{constructor(n,s){const o=new.target.prototype;super(n),this.transport=s,this.errorType="DisabledTransportError",this.__proto__=o}}class n5 extends Error{constructor(n,s){const o=new.target.prototype;super(n),this.transport=s,this.errorType="FailedToStartTransportError",this.__proto__=o}}class ab extends Error{constructor(n){const s=new.target.prototype;super(n),this.errorType="FailedToNegotiateWithServerError",this.__proto__=s}}class a5 extends Error{constructor(n,s){const o=new.target.prototype;super(n),this.innerErrors=s,this.__proto__=o}}class P1{constructor(n,s,o){this.statusCode=n,this.statusText=s,this.content=o}}class xu{get(n,s){return this.send({...s,method:"GET",url:n})}post(n,s){return this.send({...s,method:"POST",url:n})}delete(n,s){return this.send({...s,method:"DELETE",url:n})}getCookieString(n){return""}}var Q;(function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"})(Q||(Q={}));class Qr{constructor(){}log(n,s){}}Qr.instance=new Qr;const s5="10.0.0";class dn{static isRequired(n,s){if(n==null)throw new Error(`The '${s}' argument is required.`)}static isNotEmpty(n,s){if(!n||n.match(/^\s*$/))throw new Error(`The '${s}' argument should not be empty.`)}static isIn(n,s,o){if(!(n in s))throw new Error(`Unknown ${o} value: ${n}.`)}}class Vt{static get isBrowser(){return!Vt.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Vt.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Vt.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Zr(t,n){let s="";return Ri(t)?(s=`Binary data of length ${t.byteLength}`,n&&(s+=`. Content: '${i5(t)}'`)):typeof t=="string"&&(s=`String data of length ${t.length}`,n&&(s+=`. Content: '${t}'`)),s}function i5(t){const n=new Uint8Array(t);let s="";return n.forEach(o=>{const c=o<16?"0":"";s+=`0x${c}${o.toString(16)} `}),s.substring(0,s.length-1)}function Ri(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}async function H1(t,n,s,o,c,u){const f={},[h,m]=Ao();f[h]=m,t.log(Q.Trace,`(${n} transport) sending data. ${Zr(c,u.logMessageContent)}.`);const g=Ri(c)?"arraybuffer":"text",y=await s.post(o,{content:c,headers:{...f,...u.headers},responseType:g,timeout:u.timeout,withCredentials:u.withCredentials});t.log(Q.Trace,`(${n} transport) request complete. Response status: ${y.statusCode}.`)}function o5(t){return t===void 0?new iu(Q.Information):t===null?Qr.instance:t.log!==void 0?t:new iu(t)}class r5{constructor(n,s){this._subject=n,this._observer=s}dispose(){const n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(s=>{})}}class iu{constructor(n){this._minLevel=n,this.out=console}log(n,s){if(n>=this._minLevel){const o=`[${new Date().toISOString()}] ${Q[n]}: ${s}`;switch(n){case Q.Critical:case Q.Error:this.out.error(o);break;case Q.Warning:this.out.warn(o);break;case Q.Information:this.out.info(o);break;default:this.out.log(o);break}}}}function Ao(){let t="X-SignalR-User-Agent";return Vt.isNode&&(t="User-Agent"),[t,l5(s5,c5(),d5(),u5())]}function l5(t,n,s,o){let c="Microsoft SignalR/";const u=t.split(".");return c+=`${u[0]}.${u[1]}`,c+=` (${t}; `,n&&n!==""?c+=`${n}; `:c+="Unknown OS; ",c+=`${s}`,o?c+=`; ${o}`:c+="; Unknown Runtime Version",c+=")",c}function c5(){if(Vt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function u5(){if(Vt.isNode)return process.versions.node}function d5(){return Vt.isNode?"NodeJS":"Browser"}function Qf(t){return t.stack?t.stack:t.message?t.message:`${t}`}function f5(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class p5 extends xu{constructor(n){if(super(),this._logger=n,typeof fetch>"u"||Vt.isNode){const s=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(s("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=s("node-fetch"):this._fetchType=fetch,this._fetchType=s("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(f5());if(typeof AbortController>"u"){const s=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=s("abort-controller")}else this._abortControllerType=AbortController}async send(n){if(n.abortSignal&&n.abortSignal.aborted)throw new ka;if(!n.method)throw new Error("No method defined.");if(!n.url)throw new Error("No url defined.");const s=new this._abortControllerType;let o;n.abortSignal&&(n.abortSignal.onabort=()=>{s.abort(),o=new ka});let c=null;if(n.timeout){const m=n.timeout;c=setTimeout(()=>{s.abort(),this._logger.log(Q.Warning,"Timeout from HTTP request."),o=new Rh},m)}n.content===""&&(n.content=void 0),n.content&&(n.headers=n.headers||{},Ri(n.content)?n.headers["Content-Type"]="application/octet-stream":n.headers["Content-Type"]="text/plain;charset=UTF-8");let u;try{u=await this._fetchType(n.url,{body:n.content,cache:"no-cache",credentials:n.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...n.headers},method:n.method,mode:"cors",redirect:"follow",signal:s.signal})}catch(m){throw o||(this._logger.log(Q.Warning,`Error from HTTP request. ${m}.`),m)}finally{c&&clearTimeout(c),n.abortSignal&&(n.abortSignal.onabort=null)}if(!u.ok){const m=await sb(u,"text");throw new Ai(m||u.statusText,u.status)}const h=await sb(u,n.responseType);return new P1(u.status,u.statusText,h)}getCookieString(n){let s="";return Vt.isNode&&this._jar&&this._jar.getCookies(n,(o,c)=>s=c.join("; ")),s}}function sb(t,n){let s;switch(n){case"arraybuffer":s=t.arrayBuffer();break;case"text":s=t.text();break;case"blob":case"document":case"json":throw new Error(`${n} is not supported.`);default:s=t.text();break}return s}class h5 extends xu{constructor(n){super(),this._logger=n}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new ka):n.method?n.url?new Promise((s,o)=>{const c=new XMLHttpRequest;c.open(n.method,n.url,!0),c.withCredentials=n.withCredentials===void 0?!0:n.withCredentials,c.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.content===""&&(n.content=void 0),n.content&&(Ri(n.content)?c.setRequestHeader("Content-Type","application/octet-stream"):c.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const u=n.headers;u&&Object.keys(u).forEach(f=>{c.setRequestHeader(f,u[f])}),n.responseType&&(c.responseType=n.responseType),n.abortSignal&&(n.abortSignal.onabort=()=>{c.abort(),o(new ka)}),n.timeout&&(c.timeout=n.timeout),c.onload=()=>{n.abortSignal&&(n.abortSignal.onabort=null),c.status>=200&&c.status<300?s(new P1(c.status,c.statusText,c.response||c.responseText)):o(new Ai(c.response||c.responseText||c.statusText,c.status))},c.onerror=()=>{this._logger.log(Q.Warning,`Error from HTTP request. ${c.status}: ${c.statusText}.`),o(new Ai(c.statusText,c.status))},c.ontimeout=()=>{this._logger.log(Q.Warning,"Timeout from HTTP request."),o(new Rh)},c.send(n.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class m5 extends xu{constructor(n){if(super(),typeof fetch<"u"||Vt.isNode)this._httpClient=new p5(n);else if(typeof XMLHttpRequest<"u")this._httpClient=new h5(n);else throw new Error("No usable HttpClient found.")}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new ka):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(n){return this._httpClient.getCookieString(n)}}class na{static write(n){return`${n}${na.RecordSeparator}`}static parse(n){if(n[n.length-1]!==na.RecordSeparator)throw new Error("Message is incomplete.");const s=n.split(na.RecordSeparator);return s.pop(),s}}na.RecordSeparatorCode=30;na.RecordSeparator=String.fromCharCode(na.RecordSeparatorCode);class g5{writeHandshakeRequest(n){return na.write(JSON.stringify(n))}parseHandshakeResponse(n){let s,o;if(Ri(n)){const h=new Uint8Array(n),m=h.indexOf(na.RecordSeparatorCode);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;s=String.fromCharCode.apply(null,Array.prototype.slice.call(h.slice(0,g))),o=h.byteLength>g?h.slice(g).buffer:null}else{const h=n,m=h.indexOf(na.RecordSeparator);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;s=h.substring(0,g),o=h.length>g?h.substring(g):null}const c=na.parse(s),u=JSON.parse(c[0]);if(u.type)throw new Error("Expected a handshake response from the server.");return[o,u]}}var Ge;(function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close",t[t.Ack=8]="Ack",t[t.Sequence=9]="Sequence"})(Ge||(Ge={}));class y5{constructor(){this.observers=[]}next(n){for(const s of this.observers)s.next(n)}error(n){for(const s of this.observers)s.error&&s.error(n)}complete(){for(const n of this.observers)n.complete&&n.complete()}subscribe(n){return this.observers.push(n),new r5(this,n)}}class v5{constructor(n,s,o){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=n,this._connection=s,this._bufferSize=o}async _send(n){const s=this._protocol.writeMessage(n);let o=Promise.resolve();if(this._isInvocationMessage(n)){this._totalMessageCount++;let c=()=>{},u=()=>{};Ri(s)?this._bufferedByteCount+=s.byteLength:this._bufferedByteCount+=s.length,this._bufferedByteCount>=this._bufferSize&&(o=new Promise((f,h)=>{c=f,u=h})),this._messages.push(new x5(s,this._totalMessageCount,c,u))}try{this._reconnectInProgress||await this._connection.send(s)}catch{this._disconnected()}await o}_ack(n){let s=-1;for(let o=0;o<this._messages.length;o++){const c=this._messages[o];if(c._id<=n.sequenceId)s=o,Ri(c._message)?this._bufferedByteCount-=c._message.byteLength:this._bufferedByteCount-=c._message.length,c._resolver();else if(this._bufferedByteCount<this._bufferSize)c._resolver();else break}s!==-1&&(this._messages=this._messages.slice(s+1))}_shouldProcessMessage(n){if(this._waitForSequenceMessage)return n.type!==Ge.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(n))return!0;const s=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,s<=this._latestReceivedSequenceId?(s===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=s,this._ackTimer(),!0)}_resetSequence(n){if(n.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=n.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const n=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ge.Sequence,sequenceId:n}));const s=this._messages;for(const o of s)await this._connection.send(o._message);this._reconnectInProgress=!1}_dispose(n){n??(n=new Error("Unable to reconnect to server."));for(const s of this._messages)s._rejector(n)}_isInvocationMessage(n){switch(n.type){case Ge.Invocation:case Ge.StreamItem:case Ge.Completion:case Ge.StreamInvocation:case Ge.CancelInvocation:return!0;case Ge.Close:case Ge.Sequence:case Ge.Ping:case Ge.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ge.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class x5{constructor(n,s,o,c){this._message=n,this._id=s,this._resolver=o,this._rejector=c}}const b5=30*1e3,S5=15*1e3,_5=1e5;var xt;(function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"})(xt||(xt={}));class Nh{static create(n,s,o,c,u,f,h){return new Nh(n,s,o,c,u,f,h)}constructor(n,s,o,c,u,f,h){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Q.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},dn.isRequired(n,"connection"),dn.isRequired(s,"logger"),dn.isRequired(o,"protocol"),this.serverTimeoutInMilliseconds=u??b5,this.keepAliveIntervalInMilliseconds=f??S5,this._statefulReconnectBufferSize=h??_5,this._logger=s,this._protocol=o,this.connection=n,this._reconnectPolicy=c,this._handshakeProtocol=new g5,this.connection.onreceive=m=>this._processIncomingData(m),this.connection.onclose=m=>this._connectionClosed(m),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=xt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ge.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(n){if(this._connectionState!==xt.Disconnected&&this._connectionState!==xt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==xt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=xt.Connecting,this._logger.log(Q.Debug,"Starting HubConnection.");try{await this._startInternal(),Vt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=xt.Connected,this._connectionStarted=!0,this._logger.log(Q.Debug,"HubConnection connected successfully.")}catch(n){return this._connectionState=xt.Disconnected,this._logger.log(Q.Debug,`HubConnection failed to start successfully because of error '${n}'.`),Promise.reject(n)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const n=new Promise((s,o)=>{this._handshakeResolver=s,this._handshakeRejecter=o});await this.connection.start(this._protocol.transferFormat);try{let s=this._protocol.version;this.connection.features.reconnect||(s=1);const o={protocol:this._protocol.name,version:s};if(this._logger.log(Q.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(o)),this._logger.log(Q.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await n,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new v5(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(s){throw this._logger.log(Q.Debug,`Hub handshake failed with error '${s}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(s),s}}async stop(){const n=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await n}catch{}}_stopInternal(n){if(this._connectionState===xt.Disconnected)return this._logger.log(Q.Debug,`Call to HubConnection.stop(${n}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===xt.Disconnecting)return this._logger.log(Q.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const s=this._connectionState;return this._connectionState=xt.Disconnecting,this._logger.log(Q.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Q.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(s===xt.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=n||new ka("The connection was stopped before the hub handshake could complete."),this.connection.stop(n))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(n,...s){const[o,c]=this._replaceStreamingParams(s),u=this._createStreamInvocation(n,s,c);let f;const h=new y5;return h.cancelCallback=()=>{const m=this._createCancelInvocation(u.invocationId);return delete this._callbacks[u.invocationId],f.then(()=>this._sendWithProtocol(m))},this._callbacks[u.invocationId]=(m,g)=>{if(g){h.error(g);return}else m&&(m.type===Ge.Completion?m.error?h.error(new Error(m.error)):h.complete():h.next(m.item))},f=this._sendWithProtocol(u).catch(m=>{h.error(m),delete this._callbacks[u.invocationId]}),this._launchStreams(o,f),h}_sendMessage(n){return this._resetKeepAliveInterval(),this.connection.send(n)}_sendWithProtocol(n){return this._messageBuffer?this._messageBuffer._send(n):this._sendMessage(this._protocol.writeMessage(n))}send(n,...s){const[o,c]=this._replaceStreamingParams(s),u=this._sendWithProtocol(this._createInvocation(n,s,!0,c));return this._launchStreams(o,u),u}invoke(n,...s){const[o,c]=this._replaceStreamingParams(s),u=this._createInvocation(n,s,!1,c);return new Promise((h,m)=>{this._callbacks[u.invocationId]=(y,v)=>{if(v){m(v);return}else y&&(y.type===Ge.Completion?y.error?m(new Error(y.error)):h(y.result):m(new Error(`Unexpected message type: ${y.type}`)))};const g=this._sendWithProtocol(u).catch(y=>{m(y),delete this._callbacks[u.invocationId]});this._launchStreams(o,g)})}on(n,s){!n||!s||(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),this._methods[n].indexOf(s)===-1&&this._methods[n].push(s))}off(n,s){if(!n)return;n=n.toLowerCase();const o=this._methods[n];if(o)if(s){const c=o.indexOf(s);c!==-1&&(o.splice(c,1),o.length===0&&delete this._methods[n])}else delete this._methods[n]}onclose(n){n&&this._closedCallbacks.push(n)}onreconnecting(n){n&&this._reconnectingCallbacks.push(n)}onreconnected(n){n&&this._reconnectedCallbacks.push(n)}_processIncomingData(n){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(n=this._processHandshakeResponse(n),this._receivedHandshakeResponse=!0),n){const s=this._protocol.parseMessages(n,this._logger);for(const o of s)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(o)))switch(o.type){case Ge.Invocation:this._invokeClientMethod(o).catch(c=>{this._logger.log(Q.Error,`Invoke client method threw error: ${Qf(c)}`)});break;case Ge.StreamItem:case Ge.Completion:{const c=this._callbacks[o.invocationId];if(c){o.type===Ge.Completion&&delete this._callbacks[o.invocationId];try{c(o)}catch(u){this._logger.log(Q.Error,`Stream callback threw error: ${Qf(u)}`)}}break}case Ge.Ping:break;case Ge.Close:{this._logger.log(Q.Information,"Close message received from server.");const c=o.error?new Error("Server returned an error on close: "+o.error):void 0;o.allowReconnect===!0?this.connection.stop(c):this._stopPromise=this._stopInternal(c);break}case Ge.Ack:this._messageBuffer&&this._messageBuffer._ack(o);break;case Ge.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(o);break;default:this._logger.log(Q.Warning,`Invalid message type: ${o.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(n){let s,o;try{[o,s]=this._handshakeProtocol.parseHandshakeResponse(n)}catch(c){const u="Error parsing handshake response: "+c;this._logger.log(Q.Error,u);const f=new Error(u);throw this._handshakeRejecter(f),f}if(s.error){const c="Server returned handshake error: "+s.error;this._logger.log(Q.Error,c);const u=new Error(c);throw this._handshakeRejecter(u),u}else this._logger.log(Q.Debug,"Server handshake complete.");return this._handshakeResolver(),o}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!this.connection.features||!this.connection.features.inherentKeepAlive){this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds);let n=this._nextKeepAlive-new Date().getTime();if(n<0){this._connectionState===xt.Connected&&this._trySendPingMessage();return}this._pingServerHandle===void 0&&(n<0&&(n=0),this._pingServerHandle=setTimeout(async()=>{this._connectionState===xt.Connected&&await this._trySendPingMessage()},n))}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(n){const s=n.target.toLowerCase(),o=this._methods[s];if(!o){this._logger.log(Q.Warning,`No client method with the name '${s}' found.`),n.invocationId&&(this._logger.log(Q.Warning,`No result given for '${s}' method and invocation ID '${n.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)));return}const c=o.slice(),u=!!n.invocationId;let f,h,m;for(const g of c)try{const y=f;f=await g.apply(this,n.arguments),u&&f&&y&&(this._logger.log(Q.Error,`Multiple results provided for '${s}'. Sending error to server.`),m=this._createCompletionMessage(n.invocationId,"Client provided multiple results.",null)),h=void 0}catch(y){h=y,this._logger.log(Q.Error,`A callback for the method '${s}' threw error '${y}'.`)}m?await this._sendWithProtocol(m):u?(h?m=this._createCompletionMessage(n.invocationId,`${h}`,null):f!==void 0?m=this._createCompletionMessage(n.invocationId,null,f):(this._logger.log(Q.Warning,`No result given for '${s}' method and invocation ID '${n.invocationId}'.`),m=this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(m)):f&&this._logger.log(Q.Error,`Result given for '${s}' method but server is not expecting a result.`)}_connectionClosed(n){this._logger.log(Q.Debug,`HubConnection.connectionClosed(${n}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||n||new ka("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(n||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===xt.Disconnecting?this._completeClose(n):this._connectionState===xt.Connected&&this._reconnectPolicy?this._reconnect(n):this._connectionState===xt.Connected&&this._completeClose(n)}_completeClose(n){if(this._connectionStarted){this._connectionState=xt.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(n??new Error("Connection closed.")),this._messageBuffer=void 0),Vt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(s=>s.apply(this,[n]))}catch(s){this._logger.log(Q.Error,`An onclose callback called with error '${n}' threw error '${s}'.`)}}}async _reconnect(n){const s=Date.now();let o=0,c=n!==void 0?n:new Error("Attempting to reconnect due to a unknown error."),u=this._getNextRetryDelay(o,0,c);if(u===null){this._logger.log(Q.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(n);return}if(this._connectionState=xt.Reconnecting,n?this._logger.log(Q.Information,`Connection reconnecting because of error '${n}'.`):this._logger.log(Q.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(f=>f.apply(this,[n]))}catch(f){this._logger.log(Q.Error,`An onreconnecting callback called with error '${n}' threw error '${f}'.`)}if(this._connectionState!==xt.Reconnecting){this._logger.log(Q.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;u!==null;){if(this._logger.log(Q.Information,`Reconnect attempt number ${o+1} will start in ${u} ms.`),await new Promise(f=>{this._reconnectDelayHandle=setTimeout(f,u)}),this._reconnectDelayHandle=void 0,this._connectionState!==xt.Reconnecting){this._logger.log(Q.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=xt.Connected,this._logger.log(Q.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(f=>f.apply(this,[this.connection.connectionId]))}catch(f){this._logger.log(Q.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${f}'.`)}return}catch(f){if(this._logger.log(Q.Information,`Reconnect attempt failed because of error '${f}'.`),this._connectionState!==xt.Reconnecting){this._logger.log(Q.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===xt.Disconnecting&&this._completeClose();return}o++,c=f instanceof Error?f:new Error(f.toString()),u=this._getNextRetryDelay(o,Date.now()-s,c)}}this._logger.log(Q.Information,`Reconnect retries have been exhausted after ${Date.now()-s} ms and ${o} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(n,s,o){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:s,previousRetryCount:n,retryReason:o})}catch(c){return this._logger.log(Q.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${n}, ${s}) threw error '${c}'.`),null}}_cancelCallbacksWithError(n){const s=this._callbacks;this._callbacks={},Object.keys(s).forEach(o=>{const c=s[o];try{c(null,n)}catch(u){this._logger.log(Q.Error,`Stream 'error' callback called with '${n}' threw error: ${Qf(u)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(n,s,o,c){if(o)return c.length!==0?{target:n,arguments:s,streamIds:c,type:Ge.Invocation}:{target:n,arguments:s,type:Ge.Invocation};{const u=this._invocationId;return this._invocationId++,c.length!==0?{target:n,arguments:s,invocationId:u.toString(),streamIds:c,type:Ge.Invocation}:{target:n,arguments:s,invocationId:u.toString(),type:Ge.Invocation}}}_launchStreams(n,s){if(n.length!==0){s||(s=Promise.resolve());for(const o in n)n[o].subscribe({complete:()=>{s=s.then(()=>this._sendWithProtocol(this._createCompletionMessage(o)))},error:c=>{let u;c instanceof Error?u=c.message:c&&c.toString?u=c.toString():u="Unknown error",s=s.then(()=>this._sendWithProtocol(this._createCompletionMessage(o,u)))},next:c=>{s=s.then(()=>this._sendWithProtocol(this._createStreamItemMessage(o,c)))}})}}_replaceStreamingParams(n){const s=[],o=[];for(let c=0;c<n.length;c++){const u=n[c];if(this._isObservable(u)){const f=this._invocationId;this._invocationId++,s[f]=u,o.push(f.toString()),n.splice(c,1)}}return[s,o]}_isObservable(n){return n&&n.subscribe&&typeof n.subscribe=="function"}_createStreamInvocation(n,s,o){const c=this._invocationId;return this._invocationId++,o.length!==0?{target:n,arguments:s,invocationId:c.toString(),streamIds:o,type:Ge.StreamInvocation}:{target:n,arguments:s,invocationId:c.toString(),type:Ge.StreamInvocation}}_createCancelInvocation(n){return{invocationId:n,type:Ge.CancelInvocation}}_createStreamItemMessage(n,s){return{invocationId:n,item:s,type:Ge.StreamItem}}_createCompletionMessage(n,s,o){return s?{error:s,invocationId:n,type:Ge.Completion}:{invocationId:n,result:o,type:Ge.Completion}}_createCloseMessage(){return{type:Ge.Close}}async _trySendPingMessage(){try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}}const w5=[0,2e3,1e4,3e4,null];class ib{constructor(n){this._retryDelays=n!==void 0?[...n,null]:w5}nextRetryDelayInMilliseconds(n){return this._retryDelays[n.previousRetryCount]}}class Mi{}Mi.Authorization="Authorization";Mi.Cookie="Cookie";class C5 extends xu{constructor(n,s){super(),this._innerClient=n,this._accessTokenFactory=s}async send(n){let s=!0;this._accessTokenFactory&&(!this._accessToken||n.url&&n.url.indexOf("/negotiate?")>0)&&(s=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(n);const o=await this._innerClient.send(n);return s&&o.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(n),await this._innerClient.send(n)):o}_setAuthorizationHeader(n){n.headers||(n.headers={}),this._accessToken?n.headers[Mi.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&n.headers[Mi.Authorization]&&delete n.headers[Mi.Authorization]}getCookieString(n){return this._innerClient.getCookieString(n)}}var Xt;(function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"})(Xt||(Xt={}));var kn;(function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"})(kn||(kn={}));let j5=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class ob{get pollAborted(){return this._pollAbort.aborted}constructor(n,s,o){this._httpClient=n,this._logger=s,this._pollAbort=new j5,this._options=o,this._running=!1,this.onreceive=null,this.onclose=null}async connect(n,s){if(dn.isRequired(n,"url"),dn.isRequired(s,"transferFormat"),dn.isIn(s,kn,"transferFormat"),this._url=n,this._logger.log(Q.Trace,"(LongPolling transport) Connecting."),s===kn.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[o,c]=Ao(),u={[o]:c,...this._options.headers},f={abortSignal:this._pollAbort.signal,headers:u,timeout:1e5,withCredentials:this._options.withCredentials};s===kn.Binary&&(f.responseType="arraybuffer");const h=`${n}&_=${Date.now()}`;this._logger.log(Q.Trace,`(LongPolling transport) polling: ${h}.`);const m=await this._httpClient.get(h,f);m.statusCode!==200?(this._logger.log(Q.Error,`(LongPolling transport) Unexpected response code: ${m.statusCode}.`),this._closeError=new Ai(m.statusText||"",m.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,f)}async _poll(n,s){try{for(;this._running;)try{const o=`${n}&_=${Date.now()}`;this._logger.log(Q.Trace,`(LongPolling transport) polling: ${o}.`);const c=await this._httpClient.get(o,s);c.statusCode===204?(this._logger.log(Q.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):c.statusCode!==200?(this._logger.log(Q.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new Ai(c.statusText||"",c.statusCode),this._running=!1):c.content?(this._logger.log(Q.Trace,`(LongPolling transport) data received. ${Zr(c.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(c.content)):this._logger.log(Q.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(o){this._running?o instanceof Rh?this._logger.log(Q.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=o,this._running=!1):this._logger.log(Q.Trace,`(LongPolling transport) Poll errored after shutdown: ${o.message}`)}}finally{this._logger.log(Q.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(n){return this._running?H1(this._logger,"LongPolling",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Q.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Q.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const n={},[s,o]=Ao();n[s]=o;const c={headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let u;try{await this._httpClient.delete(this._url,c)}catch(f){u=f}u?u instanceof Ai&&(u.statusCode===404?this._logger.log(Q.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Q.Trace,`(LongPolling transport) Error sending a DELETE request: ${u}`)):this._logger.log(Q.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Q.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let n="(LongPolling transport) Firing onclose event.";this._closeError&&(n+=" Error: "+this._closeError),this._logger.log(Q.Trace,n),this.onclose(this._closeError)}}}class T5{constructor(n,s,o,c){this._httpClient=n,this._accessToken=s,this._logger=o,this._options=c,this.onreceive=null,this.onclose=null}async connect(n,s){return dn.isRequired(n,"url"),dn.isRequired(s,"transferFormat"),dn.isIn(s,kn,"transferFormat"),this._logger.log(Q.Trace,"(SSE transport) Connecting."),this._url=n,this._accessToken&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((o,c)=>{let u=!1;if(s!==kn.Text){c(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let f;if(Vt.isBrowser||Vt.isWebWorker)f=new this._options.EventSource(n,{withCredentials:this._options.withCredentials});else{const h=this._httpClient.getCookieString(n),m={};m.Cookie=h;const[g,y]=Ao();m[g]=y,f=new this._options.EventSource(n,{withCredentials:this._options.withCredentials,headers:{...m,...this._options.headers}})}try{f.onmessage=h=>{if(this.onreceive)try{this._logger.log(Q.Trace,`(SSE transport) data received. ${Zr(h.data,this._options.logMessageContent)}.`),this.onreceive(h.data)}catch(m){this._close(m);return}},f.onerror=h=>{u?this._close():c(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},f.onopen=()=>{this._logger.log(Q.Information,`SSE connected to ${this._url}`),this._eventSource=f,u=!0,o()}}catch(h){c(h);return}})}async send(n){return this._eventSource?H1(this._logger,"SSE",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}class k5{constructor(n,s,o,c,u,f){this._logger=o,this._accessTokenFactory=s,this._logMessageContent=c,this._webSocketConstructor=u,this._httpClient=n,this.onreceive=null,this.onclose=null,this._headers=f}async connect(n,s){dn.isRequired(n,"url"),dn.isRequired(s,"transferFormat"),dn.isIn(s,kn,"transferFormat"),this._logger.log(Q.Trace,"(WebSockets transport) Connecting.");let o;return this._accessTokenFactory&&(o=await this._accessTokenFactory()),new Promise((c,u)=>{n=n.replace(/^http/,"ws");let f;const h=this._httpClient.getCookieString(n);let m=!1;if(Vt.isNode||Vt.isReactNative){const g={},[y,v]=Ao();g[y]=v,o&&(g[Mi.Authorization]=`Bearer ${o}`),h&&(g[Mi.Cookie]=h),f=new this._webSocketConstructor(n,void 0,{headers:{...g,...this._headers}})}else o&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(o)}`);f||(f=new this._webSocketConstructor(n)),s===kn.Binary&&(f.binaryType="arraybuffer"),f.onopen=g=>{this._logger.log(Q.Information,`WebSocket connected to ${n}.`),this._webSocket=f,m=!0,c()},f.onerror=g=>{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="There was an error with the transport",this._logger.log(Q.Information,`(WebSockets transport) ${y}.`)},f.onmessage=g=>{if(this._logger.log(Q.Trace,`(WebSockets transport) data received. ${Zr(g.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(g.data)}catch(y){this._close(y);return}},f.onclose=g=>{if(m)this._close(g);else{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",u(new Error(y))}}})}send(n){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Q.Trace,`(WebSockets transport) sending data. ${Zr(n,this._logMessageContent)}.`),this._webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(n){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Q.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(n)&&(n.wasClean===!1||n.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${n.code} (${n.reason||"no reason given"}).`)):n instanceof Error?this.onclose(n):this.onclose())}_isCloseEvent(n){return n&&typeof n.wasClean=="boolean"&&typeof n.code=="number"}}const rb=100;class A5{constructor(n,s={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,dn.isRequired(n,"url"),this._logger=o5(s.logger),this.baseUrl=this._resolveUrl(n),s=s||{},s.logMessageContent=s.logMessageContent===void 0?!1:s.logMessageContent,typeof s.withCredentials=="boolean"||s.withCredentials===void 0)s.withCredentials=s.withCredentials===void 0?!0:s.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");s.timeout=s.timeout===void 0?100*1e3:s.timeout;let o=null,c=null;if(Vt.isNode&&typeof require<"u"){const u=typeof __webpack_require__=="function"?__non_webpack_require__:require;o=u("ws"),c=u("eventsource")}!Vt.isNode&&typeof WebSocket<"u"&&!s.WebSocket?s.WebSocket=WebSocket:Vt.isNode&&!s.WebSocket&&o&&(s.WebSocket=o),!Vt.isNode&&typeof EventSource<"u"&&!s.EventSource?s.EventSource=EventSource:Vt.isNode&&!s.EventSource&&typeof c<"u"&&(s.EventSource=c),this._httpClient=new C5(s.httpClient||new m5(this._logger),s.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=s,this.onreceive=null,this.onclose=null}async start(n){if(n=n||kn.Binary,dn.isIn(n,kn,"transferFormat"),this._logger.log(Q.Debug,`Starting connection with transfer format '${kn[n]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(n),await this._startInternalPromise,this._connectionState==="Disconnecting"){const s="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Q.Error,s),await this._stopPromise,Promise.reject(new ka(s))}else if(this._connectionState!=="Connected"){const s="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Q.Error,s),Promise.reject(new ka(s))}this._connectionStarted=!0}send(n){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Dh(this.transport)),this._sendQueue.send(n))}async stop(n){if(this._connectionState==="Disconnected")return this._logger.log(Q.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(Q.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(s=>{this._stopPromiseResolver=s}),await this._stopInternal(n),await this._stopPromise}async _stopInternal(n){this._stopError=n;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(s){this._logger.log(Q.Error,`HttpConnection.transport.stop() threw error '${s}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(Q.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(n){let s=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Xt.WebSockets)this.transport=this._constructTransport(Xt.WebSockets),await this._startTransport(s,n);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let o=null,c=0;do{if(o=await this._getNegotiationResponse(s),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new ka("The connection was stopped during negotiation.");if(o.error)throw new Error(o.error);if(o.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(o.url&&(s=o.url),o.accessToken){const u=o.accessToken;this._accessTokenFactory=()=>u,this._httpClient._accessToken=u,this._httpClient._accessTokenFactory=void 0}c++}while(o.url&&c<rb);if(c===rb&&o.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(s,this._options.transport,o,n)}this.transport instanceof ob&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(Q.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(o){return this._logger.log(Q.Error,"Failed to start the connection: "+o),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(o)}}async _getNegotiationResponse(n){const s={},[o,c]=Ao();s[o]=c;const u=this._resolveNegotiateUrl(n);this._logger.log(Q.Debug,`Sending negotiation request: ${u}.`);try{const f=await this._httpClient.post(u,{content:"",headers:{...s,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(f.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${f.statusCode}'`));const h=JSON.parse(f.content);return(!h.negotiateVersion||h.negotiateVersion<1)&&(h.connectionToken=h.connectionId),h.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new ab("Client didn't negotiate Stateful Reconnect but the server did.")):h}catch(f){let h="Failed to complete negotiation with the server: "+f;return f instanceof Ai&&f.statusCode===404&&(h=h+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Q.Error,h),Promise.reject(new ab(h))}}_createConnectUrl(n,s){return s?n+(n.indexOf("?")===-1?"?":"&")+`id=${s}`:n}async _createTransport(n,s,o,c){let u=this._createConnectUrl(n,o.connectionToken);if(this._isITransport(s)){this._logger.log(Q.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=s,await this._startTransport(u,c),this.connectionId=o.connectionId;return}const f=[],h=o.availableTransports||[];let m=o;for(const g of h){const y=this._resolveTransportOrError(g,s,c,m?.useStatefulReconnect===!0);if(y instanceof Error)f.push(`${g.transport} failed:`),f.push(y);else if(this._isITransport(y)){if(this.transport=y,!m){try{m=await this._getNegotiationResponse(n)}catch(v){return Promise.reject(v)}u=this._createConnectUrl(n,m.connectionToken)}try{await this._startTransport(u,c),this.connectionId=m.connectionId;return}catch(v){if(this._logger.log(Q.Error,`Failed to start the transport '${g.transport}': ${v}`),m=void 0,f.push(new n5(`${g.transport} failed: ${v}`,Xt[g.transport])),this._connectionState!=="Connecting"){const _="Failed to select transport before stop() was called.";return this._logger.log(Q.Debug,_),Promise.reject(new ka(_))}}}}return f.length>0?Promise.reject(new a5(`Unable to connect to the server with any of the available transports. ${f.join(" ")}`,f)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(n){switch(n){case Xt.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new k5(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Xt.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new T5(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Xt.LongPolling:return new ob(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${n}.`)}}_startTransport(n,s){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async o=>{let c=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(n,s),await this.features.resend()}catch{c=!0}else{this._stopConnection(o);return}c&&this._stopConnection(o)}:this.transport.onclose=o=>this._stopConnection(o),this.transport.connect(n,s)}_resolveTransportOrError(n,s,o,c){const u=Xt[n.transport];if(u==null)return this._logger.log(Q.Debug,`Skipping transport '${n.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${n.transport}' because it is not supported by this client.`);if(M5(s,u))if(n.transferFormats.map(h=>kn[h]).indexOf(o)>=0){if(u===Xt.WebSockets&&!this._options.WebSocket||u===Xt.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Q.Debug,`Skipping transport '${Xt[u]}' because it is not supported in your environment.'`),new e5(`'${Xt[u]}' is not supported in your environment.`,u);this._logger.log(Q.Debug,`Selecting transport '${Xt[u]}'.`);try{return this.features.reconnect=u===Xt.WebSockets?c:void 0,this._constructTransport(u)}catch(h){return h}}else return this._logger.log(Q.Debug,`Skipping transport '${Xt[u]}' because it does not support the requested transfer format '${kn[o]}'.`),new Error(`'${Xt[u]}' does not support ${kn[o]}.`);else return this._logger.log(Q.Debug,`Skipping transport '${Xt[u]}' because it was disabled by the client.`),new t5(`'${Xt[u]}' is disabled by the client.`,u)}_isITransport(n){return n&&typeof n=="object"&&"connect"in n}_stopConnection(n){if(this._logger.log(Q.Debug,`HttpConnection.stopConnection(${n}) called while in state ${this._connectionState}.`),this.transport=void 0,n=this._stopError||n,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(Q.Debug,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(Q.Warning,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${n}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),n?this._logger.log(Q.Error,`Connection disconnected with error '${n}'.`):this._logger.log(Q.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(s=>{this._logger.log(Q.Error,`TransportSendQueue.stop() threw error '${s}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(n)}catch(s){this._logger.log(Q.Error,`HttpConnection.onclose(${n}) threw error '${s}'.`)}}}_resolveUrl(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(!Vt.isBrowser)throw new Error(`Cannot resolve '${n}'.`);const s=window.document.createElement("a");return s.href=n,this._logger.log(Q.Information,`Normalizing '${n}' to '${s.href}'.`),s.href}_resolveNegotiateUrl(n){const s=new URL(n);s.pathname.endsWith("/")?s.pathname+="negotiate":s.pathname+="/negotiate";const o=new URLSearchParams(s.searchParams);return o.has("negotiateVersion")||o.append("negotiateVersion",this._negotiateVersion.toString()),o.has("useStatefulReconnect")?o.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&o.append("useStatefulReconnect","true"),s.search=o.toString(),s.toString()}}function M5(t,n){return!t||(n&t)!==0}class Dh{constructor(n){this._transport=n,this._buffer=[],this._executing=!0,this._sendBufferedData=new zc,this._transportResult=new zc,this._sendLoopPromise=this._sendLoop()}send(n){return this._bufferData(n),this._transportResult||(this._transportResult=new zc),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(n){if(this._buffer.length&&typeof this._buffer[0]!=typeof n)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof n}`);this._buffer.push(n),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new zc;const n=this._transportResult;this._transportResult=void 0;const s=typeof this._buffer[0]=="string"?this._buffer.join(""):Dh._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(s),n.resolve()}catch(o){n.reject(o)}}}static _concatBuffers(n){const s=n.map(u=>u.byteLength).reduce((u,f)=>u+f),o=new Uint8Array(s);let c=0;for(const u of n)o.set(new Uint8Array(u),c),c+=u.byteLength;return o.buffer}}class zc{constructor(){this.promise=new Promise((n,s)=>[this._resolver,this._rejecter]=[n,s])}resolve(){this._resolver()}reject(n){this._rejecter(n)}}const E5="json";class R5{constructor(){this.name=E5,this.version=2,this.transferFormat=kn.Text}parseMessages(n,s){if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];s===null&&(s=Qr.instance);const o=na.parse(n),c=[];for(const u of o){const f=JSON.parse(u);if(typeof f.type!="number")throw new Error("Invalid payload.");switch(f.type){case Ge.Invocation:this._isInvocationMessage(f);break;case Ge.StreamItem:this._isStreamItemMessage(f);break;case Ge.Completion:this._isCompletionMessage(f);break;case Ge.Ping:break;case Ge.Close:break;case Ge.Ack:this._isAckMessage(f);break;case Ge.Sequence:this._isSequenceMessage(f);break;default:s.log(Q.Information,"Unknown message type '"+f.type+"' ignored.");continue}c.push(f)}return c}writeMessage(n){return na.write(JSON.stringify(n))}_isInvocationMessage(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message."),n.invocationId!==void 0&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message."),this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}_isAckMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(n,s){if(typeof n!="string"||n==="")throw new Error(s)}}const N5={trace:Q.Trace,debug:Q.Debug,info:Q.Information,information:Q.Information,warn:Q.Warning,warning:Q.Warning,error:Q.Error,critical:Q.Critical,none:Q.None};function D5(t){const n=N5[t.toLowerCase()];if(typeof n<"u")return n;throw new Error(`Unknown log level: ${t}`)}class B5{configureLogging(n){if(dn.isRequired(n,"logging"),z5(n))this.logger=n;else if(typeof n=="string"){const s=D5(n);this.logger=new iu(s)}else this.logger=new iu(n);return this}withUrl(n,s){return dn.isRequired(n,"url"),dn.isNotEmpty(n,"url"),this.url=n,typeof s=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...s}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:s},this}withHubProtocol(n){return dn.isRequired(n,"protocol"),this.protocol=n,this}withAutomaticReconnect(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return n?Array.isArray(n)?this.reconnectPolicy=new ib(n):this.reconnectPolicy=n:this.reconnectPolicy=new ib,this}withServerTimeout(n){return dn.isRequired(n,"milliseconds"),this._serverTimeoutInMilliseconds=n,this}withKeepAliveInterval(n){return dn.isRequired(n,"milliseconds"),this._keepAliveIntervalInMilliseconds=n,this}withStatefulReconnect(n){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=n?.bufferSize,this}build(){const n=this.httpConnectionOptions||{};if(n.logger===void 0&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const s=new A5(this.url,n);return Nh.create(s,this.logger||Qr.instance,this.protocol||new R5,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function z5(t){return t.log!==void 0}class U5{connection=null;eventHandlers={};reconnectAttempts=0;maxReconnectAttempts=5;isManualDisconnect=!1;constructor(){const s="https://your-domain.com/api".replace("/api","/hubs/chat");this.connection=new B5().withUrl(s,{accessTokenFactory:()=>localStorage.getItem("token")||"",skipNegotiation:!1,withCredentials:!0,transport:Xt.WebSockets|Xt.ServerSentEvents|Xt.LongPolling}).withAutomaticReconnect({nextRetryDelayInMilliseconds:o=>o.previousRetryCount>=this.maxReconnectAttempts?null:Math.min(1e3*Math.pow(2,o.previousRetryCount),32e3)}).configureLogging(Q.Information).build(),this.setupConnectionHandlers(),this.setupEventListeners()}setupConnectionHandlers(){this.connection&&(this.connection.onreconnecting(n=>{console.warn("SignalR reconnecting...",n),this.reconnectAttempts++}),this.connection.onreconnected(n=>{console.log("SignalR reconnected:",n),this.reconnectAttempts=0,this.rejoinChats()}),this.connection.onclose(n=>{console.error("SignalR connection closed:",n),!this.isManualDisconnect&&this.reconnectAttempts<this.maxReconnectAttempts&&setTimeout(()=>this.start(),5e3)}))}setupEventListeners(){this.connection&&(this.connection.on("UserOnline",n=>{console.log("[SignalR] UserOnline event received:",n),this.eventHandlers.onUserOnline?.(n)}),this.connection.on("UserOffline",n=>{console.log("[SignalR] UserOffline event received:",n),this.eventHandlers.onUserOffline?.(n)}),this.connection.on("ReceiveMessage",n=>{this.eventHandlers.onReceiveMessage?.(n)}),this.connection.on("MessageEdited",n=>{this.eventHandlers.onMessageEdited?.(n)}),this.connection.on("MessageDeleted",n=>{this.eventHandlers.onMessageDeleted?.(n)}),this.connection.on("ReactionAdded",n=>{console.log("[SignalR] ReactionAdded event received:",n),this.eventHandlers.onReactionAdded?.(n)}),this.connection.on("ReactionRemoved",n=>{console.log("[SignalR] ReactionRemoved event received:",n),this.eventHandlers.onReactionRemoved?.(n)}),this.connection.on("UserTyping",n=>{this.eventHandlers.onUserTyping?.(n)}),this.connection.on("UserStoppedTyping",n=>{this.eventHandlers.onUserStoppedTyping?.(n)}),this.connection.on("NewNotification",n=>{this.eventHandlers.onNewNotification?.(n)}),this.connection.on("NotificationsMarkedSeen",n=>{this.eventHandlers.onNotificationsMarkedSeen?.(n)}),this.connection.on("MessagePinned",n=>{this.eventHandlers.onMessagePinned?.(n)}),this.connection.on("MessageUnpinned",n=>{this.eventHandlers.onMessageUnpinned?.(n)}),this.connection.on("AddedToChat",n=>{console.log("[SignalR] AddedToChat:",n),this.eventHandlers.onAddedToChat?.(n)}),this.connection.on("NewConversation",n=>{console.log("[SignalR] NewConversation:",n),this.eventHandlers.onNewConversation?.(n)}),this.connection.on("ConversationCreated",n=>{console.log("[SignalR] ConversationCreated:",n),this.eventHandlers.onConversationCreated?.(n)}),this.connection.on("PermissionGranted",n=>{console.log("[SignalR] PermissionGranted:",n),this.eventHandlers.onPermissionGranted?.(n)}),this.connection.on("PermissionRevoked",n=>{console.log("[SignalR] PermissionRevoked:",n),this.eventHandlers.onPermissionRevoked?.(n)}),this.connection.on("AllPermissionsRevoked",n=>{console.log("[SignalR] AllPermissionsRevoked:",n),this.eventHandlers.onAllPermissionsRevoked?.(n)}),this.connection.on("UserBlockedYou",n=>{console.log("[SignalR] UserBlockedYou:",n),this.eventHandlers.onUserBlockedYou?.(n)}),this.connection.on("YouBlockedUser",n=>{console.log("[SignalR] YouBlockedUser:",n),this.eventHandlers.onYouBlockedUser?.(n)}),this.connection.on("UserUnblockedYou",n=>{console.log("[SignalR] UserUnblockedYou:",n),this.eventHandlers.onUserUnblockedYou?.(n)}),this.connection.on("YouUnblockedUser",n=>{console.log("[SignalR] YouUnblockedUser:",n),this.eventHandlers.onYouUnblockedUser?.(n)}),this.connection.on("ChatDeleted",n=>{console.log("[SignalR] ChatDeleted:",n),this.eventHandlers.onChatDeleted?.(n)}),this.connection.on("RemovedFromChat",n=>{console.log("[SignalR] RemovedFromChat:",n),this.eventHandlers.onRemovedFromChat?.(n)}),this.connection.on("MessagesMarkedSeen",n=>{console.log("[SignalR] MessagesMarkedSeen:",n),this.eventHandlers.onMessagesMarkedSeen?.(n)}),this.connection.on("Error",n=>{console.error("SignalR Error:",n),this.eventHandlers.onError?.(n)}))}setEventHandlers(n){this.eventHandlers={...this.eventHandlers,...n}}async start(){if(this.connection)try{this.connection.state===xt.Disconnected&&(this.isManualDisconnect=!1,await this.connection.start(),console.log("SignalR Connected:",this.connection.connectionId))}catch(n){throw console.error("Error starting SignalR connection:",n),n}}async getPresenceStates(n){if(!this.connection||this.connection.state!==xt.Connected)return console.warn("Cannot fetch presence states: not connected"),{};try{const s=await this.connection.invoke("GetPresenceStates",n);return console.log(`Fetched initial presence states for ${n.length} users`),s}catch(s){return console.error("Error fetching presence states:",s),{}}}async stop(){if(this.connection)try{this.isManualDisconnect=!0,await this.connection.stop(),console.log("SignalR Disconnected")}catch(n){console.error("Error stopping SignalR connection:",n)}}getConnectionState(){return this.connection?.state||xt.Disconnected}isConnected(){return this.connection?.state===xt.Connected}activeChats=new Set;async joinChat(n){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("JoinChat",n),this.activeChats.add(n),console.log("Joined chat:",n)}catch(s){throw console.error("Error joining chat:",s),s}}async leaveChat(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("LeaveChat",n),this.activeChats.delete(n),console.log("Left chat:",n)}catch(s){console.error("Error leaving chat:",s)}}async rejoinChats(){const n=Array.from(this.activeChats);for(const s of n)try{await this.connection?.invoke("JoinChat",s)}catch(o){console.error("Error rejoining chat:",s,o)}}async sendMessage(n,s,o=null,c=null){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("SendMessage",{chatId:n,content:s,receiverId:o,replyId:c})}catch(u){throw console.error("Error sending message:",u),u}}async editMessage(n,s,o){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("EditMessage",n,s,o)}catch(c){throw console.error("Error editing message:",c),c}}async deleteMessage(n,s){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("DeleteMessage",n,s)}catch(o){throw console.error("Error deleting message:",o),o}}async addReaction(n,s,o){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("AddReaction",n,s,o)}catch(c){throw console.error("Error adding reaction:",c),c}}async removeReaction(n,s){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("RemoveReaction",n,s)}catch(o){throw console.error("Error removing reaction:",o),o}}async sendTyping(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("Typing",n)}catch(s){console.error("Error sending typing indicator:",s)}}async sendStopTyping(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("StopTyping",n)}catch(s){console.error("Error sending stop typing indicator:",s)}}async markNotificationsAsSeen(n){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("MarkAsSeen",n)}catch(s){throw console.error("Error marking notifications as seen:",s),s}}markSeenDebounceTimers=new Map;async markMessagesAsSeen(n){if(!this.connection||!this.isConnected())return;const s=this.markSeenDebounceTimers.get(n);return s&&clearTimeout(s),new Promise(o=>{const c=setTimeout(async()=>{if(this.markSeenDebounceTimers.delete(n),!this.connection||!this.isConnected()){o();return}try{await this.connection.invoke("MarkMessagesAsSeen",n)}catch(u){u?.message?.includes("connection being closed")||console.error("Error marking messages as seen:",u)}o()},300);this.markSeenDebounceTimers.set(n,c)})}}const tt=new U5,Ip=Object.freeze(Object.defineProperty({__proto__:null,signalRService:tt},Symbol.toStringTag,{value:"Module"})),I5=t=>{const[n,s]=b.useState(tt.getConnectionState()),[o,c]=b.useState(tt.isConnected());return b.useEffect(()=>{const u=setInterval(()=>{s(tt.getConnectionState()),c(tt.isConnected())},1e3);return()=>clearInterval(u)},[t]),{connectionState:n,isConnected:o,joinChat:tt.joinChat.bind(tt),leaveChat:tt.leaveChat.bind(tt),sendMessage:tt.sendMessage.bind(tt),editMessage:tt.editMessage.bind(tt),deleteMessage:tt.deleteMessage.bind(tt),addReaction:tt.addReaction.bind(tt),removeReaction:tt.removeReaction.bind(tt),sendTyping:tt.sendTyping.bind(tt),sendStopTyping:tt.sendStopTyping.bind(tt),markNotificationsAsSeen:tt.markNotificationsAsSeen.bind(tt),markMessagesAsSeen:tt.markMessagesAsSeen.bind(tt),getPresenceStates:tt.getPresenceStates.bind(tt)}};var Zf={exports:{}},Jf,lb;function O5(){if(lb)return Jf;lb=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Jf=t,Jf}var ep,cb;function L5(){if(cb)return ep;cb=1;var t=O5();function n(){}function s(){}return s.resetWarningCache=n,ep=function(){function o(f,h,m,g,y,v){if(v!==t){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}o.isRequired=o;function c(){return o}var u={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:c,element:o,elementType:o,instanceOf:c,node:o,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:s,resetWarningCache:n};return u.PropTypes=u,u},ep}var ub;function P5(){return ub||(ub=1,Zf.exports=L5()()),Zf.exports}var H5=P5();const kt=Ab(H5);function Ni(t,n,s,o){function c(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function h(y){try{g(o.next(y))}catch(v){f(v)}}function m(y){try{g(o.throw(y))}catch(v){f(v)}}function g(y){y.done?u(y.value):c(y.value).then(h,m)}g((o=o.apply(t,n||[])).next())})}const V5=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Mo(t,n,s){const o=F5(t),{webkitRelativePath:c}=t,u=typeof n=="string"?n:typeof c=="string"&&c.length>0?c:`./${t.name}`;return typeof o.path!="string"&&db(o,"path",u),db(o,"relativePath",u),o}function F5(t){const{name:n}=t;if(n&&n.lastIndexOf(".")!==-1&&!t.type){const o=n.split(".").pop().toLowerCase(),c=V5.get(o);c&&Object.defineProperty(t,"type",{value:c,writable:!1,configurable:!1,enumerable:!0})}return t}function db(t,n,s){Object.defineProperty(t,n,{value:s,writable:!1,configurable:!1,enumerable:!0})}const $5=[".DS_Store","Thumbs.db"];function q5(t){return Ni(this,void 0,void 0,function*(){return ou(t)&&G5(t.dataTransfer)?K5(t.dataTransfer,t.type):Y5(t)?W5(t):Array.isArray(t)&&t.every(n=>"getFile"in n&&typeof n.getFile=="function")?X5(t):[]})}function G5(t){return ou(t)}function Y5(t){return ou(t)&&ou(t.target)}function ou(t){return typeof t=="object"&&t!==null}function W5(t){return Op(t.target.files).map(n=>Mo(n))}function X5(t){return Ni(this,void 0,void 0,function*(){return(yield Promise.all(t.map(s=>s.getFile()))).map(s=>Mo(s))})}function K5(t,n){return Ni(this,void 0,void 0,function*(){if(t.items){const s=Op(t.items).filter(c=>c.kind==="file");if(n!=="drop")return s;const o=yield Promise.all(s.map(Q5));return fb(V1(o))}return fb(Op(t.files).map(s=>Mo(s)))})}function fb(t){return t.filter(n=>$5.indexOf(n.name)===-1)}function Op(t){if(t===null)return[];const n=[];for(let s=0;s<t.length;s++){const o=t[s];n.push(o)}return n}function Q5(t){if(typeof t.webkitGetAsEntry!="function")return pb(t);const n=t.webkitGetAsEntry();return n&&n.isDirectory?F1(n):pb(t,n)}function V1(t){return t.reduce((n,s)=>[...n,...Array.isArray(s)?V1(s):[s]],[])}function pb(t,n){return Ni(this,void 0,void 0,function*(){var s;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const u=yield t.getAsFileSystemHandle();if(u===null)throw new Error(`${t} is not a File`);if(u!==void 0){const f=yield u.getFile();return f.handle=u,Mo(f)}}const o=t.getAsFile();if(!o)throw new Error(`${t} is not a File`);return Mo(o,(s=n?.fullPath)!==null&&s!==void 0?s:void 0)})}function Z5(t){return Ni(this,void 0,void 0,function*(){return t.isDirectory?F1(t):J5(t)})}function F1(t){const n=t.createReader();return new Promise((s,o)=>{const c=[];function u(){n.readEntries(f=>Ni(this,void 0,void 0,function*(){if(f.length){const h=Promise.all(f.map(Z5));c.push(h),u()}else try{const h=yield Promise.all(c);s(h)}catch(h){o(h)}}),f=>{o(f)})}u()})}function J5(t){return Ni(this,void 0,void 0,function*(){return new Promise((n,s)=>{t.file(o=>{const c=Mo(o,t.fullPath);n(c)},o=>{s(o)})})})}var Uc={},hb;function eN(){return hb||(hb=1,Uc.__esModule=!0,Uc.default=function(t,n){if(t&&n){var s=Array.isArray(n)?n:n.split(",");if(s.length===0)return!0;var o=t.name||"",c=(t.type||"").toLowerCase(),u=c.replace(/\/.*$/,"");return s.some(function(f){var h=f.trim().toLowerCase();return h.charAt(0)==="."?o.toLowerCase().endsWith(h):h.endsWith("/*")?u===h.replace(/\/.*$/,""):c===h})}return!0}),Uc}var tN=eN();const tp=Ab(tN);function mb(t){return sN(t)||aN(t)||q1(t)||nN()}function nN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aN(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sN(t){if(Array.isArray(t))return Lp(t)}function gb(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),s.push.apply(s,o)}return s}function yb(t){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?gb(Object(s),!0).forEach(function(o){$1(t,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):gb(Object(s)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(s,o))})}return t}function $1(t,n,s){return n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,t}function Jr(t,n){return rN(t)||oN(t,n)||q1(t,n)||iN()}function iN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q1(t,n){if(t){if(typeof t=="string")return Lp(t,n);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Lp(t,n)}}function Lp(t,n){(n==null||n>t.length)&&(n=t.length);for(var s=0,o=new Array(n);s<n;s++)o[s]=t[s];return o}function oN(t,n){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var o=[],c=!0,u=!1,f,h;try{for(s=s.call(t);!(c=(f=s.next()).done)&&(o.push(f.value),!(n&&o.length===n));c=!0);}catch(m){u=!0,h=m}finally{try{!c&&s.return!=null&&s.return()}finally{if(u)throw h}}return o}}function rN(t){if(Array.isArray(t))return t}var lN=typeof tp=="function"?tp:tp.default,cN="file-invalid-type",uN="file-too-large",dN="file-too-small",fN="too-many-files",pN=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=n.split(","),o=s.length>1?"one of ".concat(s.join(", ")):s[0];return{code:cN,message:"File type must be ".concat(o)}},vb=function(n){return{code:uN,message:"File is larger than ".concat(n," ").concat(n===1?"byte":"bytes")}},xb=function(n){return{code:dN,message:"File is smaller than ".concat(n," ").concat(n===1?"byte":"bytes")}},hN={code:fN,message:"Too many files"};function G1(t,n){var s=t.type==="application/x-moz-file"||lN(t,n);return[s,s?null:pN(n)]}function Y1(t,n,s){if(bi(t.size))if(bi(n)&&bi(s)){if(t.size>s)return[!1,vb(s)];if(t.size<n)return[!1,xb(n)]}else{if(bi(n)&&t.size<n)return[!1,xb(n)];if(bi(s)&&t.size>s)return[!1,vb(s)]}return[!0,null]}function bi(t){return t!=null}function mN(t){var n=t.files,s=t.accept,o=t.minSize,c=t.maxSize,u=t.multiple,f=t.maxFiles,h=t.validator;return!u&&n.length>1||u&&f>=1&&n.length>f?!1:n.every(function(m){var g=G1(m,s),y=Jr(g,1),v=y[0],_=Y1(m,o,c),C=Jr(_,1),w=C[0],A=h?h(m):null;return v&&w&&!A})}function ru(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Ic(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(n){return n==="Files"||n==="application/x-moz-file"}):!!t.target&&!!t.target.files}function bb(t){t.preventDefault()}function gN(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function yN(t){return t.indexOf("Edge/")!==-1}function vN(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return gN(t)||yN(t)}function Ua(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return function(o){for(var c=arguments.length,u=new Array(c>1?c-1:0),f=1;f<c;f++)u[f-1]=arguments[f];return n.some(function(h){return!ru(o)&&h&&h.apply(void 0,[o].concat(u)),ru(o)})}}function xN(){return"showOpenFilePicker"in window}function bN(t){if(bi(t)){var n=Object.entries(t).filter(function(s){var o=Jr(s,2),c=o[0],u=o[1],f=!0;return W1(c)||(console.warn('Skipped "'.concat(c,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),f=!1),(!Array.isArray(u)||!u.every(X1))&&(console.warn('Skipped "'.concat(c,'" because an invalid file extension was provided.')),f=!1),f}).reduce(function(s,o){var c=Jr(o,2),u=c[0],f=c[1];return yb(yb({},s),{},$1({},u,f))},{});return[{description:"Files",accept:n}]}return t}function SN(t){if(bi(t))return Object.entries(t).reduce(function(n,s){var o=Jr(s,2),c=o[0],u=o[1];return[].concat(mb(n),[c],mb(u))},[]).filter(function(n){return W1(n)||X1(n)}).join(",")}function _N(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function wN(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function W1(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function X1(t){return/^.*\.[\w]+$/.test(t)}var CN=["children"],jN=["open"],TN=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],kN=["refKey","onChange","onClick"];function AN(t){return RN(t)||EN(t)||K1(t)||MN()}function MN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EN(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function RN(t){if(Array.isArray(t))return Pp(t)}function np(t,n){return BN(t)||DN(t,n)||K1(t,n)||NN()}function NN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K1(t,n){if(t){if(typeof t=="string")return Pp(t,n);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Pp(t,n)}}function Pp(t,n){(n==null||n>t.length)&&(n=t.length);for(var s=0,o=new Array(n);s<n;s++)o[s]=t[s];return o}function DN(t,n){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var o=[],c=!0,u=!1,f,h;try{for(s=s.call(t);!(c=(f=s.next()).done)&&(o.push(f.value),!(n&&o.length===n));c=!0);}catch(m){u=!0,h=m}finally{try{!c&&s.return!=null&&s.return()}finally{if(u)throw h}}return o}}function BN(t){if(Array.isArray(t))return t}function Sb(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),s.push.apply(s,o)}return s}function Ht(t){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Sb(Object(s),!0).forEach(function(o){Hp(t,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Sb(Object(s)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(s,o))})}return t}function Hp(t,n,s){return n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,t}function lu(t,n){if(t==null)return{};var s=zN(t,n),o,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(c=0;c<u.length;c++)o=u[c],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(s[o]=t[o])}return s}function zN(t,n){if(t==null)return{};var s={},o=Object.keys(t),c,u;for(u=0;u<o.length;u++)c=o[u],!(n.indexOf(c)>=0)&&(s[c]=t[c]);return s}var Bh=b.forwardRef(function(t,n){var s=t.children,o=lu(t,CN),c=Z1(o),u=c.open,f=lu(c,jN);return b.useImperativeHandle(n,function(){return{open:u}},[u]),Oa.createElement(b.Fragment,null,s(Ht(Ht({},f),{},{open:u})))});Bh.displayName="Dropzone";var Q1={disabled:!1,getFilesFromEvent:q5,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Bh.defaultProps=Q1;Bh.propTypes={children:kt.func,accept:kt.objectOf(kt.arrayOf(kt.string)),multiple:kt.bool,preventDropOnDocument:kt.bool,noClick:kt.bool,noKeyboard:kt.bool,noDrag:kt.bool,noDragEventsBubbling:kt.bool,minSize:kt.number,maxSize:kt.number,maxFiles:kt.number,disabled:kt.bool,getFilesFromEvent:kt.func,onFileDialogCancel:kt.func,onFileDialogOpen:kt.func,useFsAccessApi:kt.bool,autoFocus:kt.bool,onDragEnter:kt.func,onDragLeave:kt.func,onDragOver:kt.func,onDrop:kt.func,onDropAccepted:kt.func,onDropRejected:kt.func,onError:kt.func,validator:kt.func};var Vp={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Z1(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=Ht(Ht({},Q1),t),s=n.accept,o=n.disabled,c=n.getFilesFromEvent,u=n.maxSize,f=n.minSize,h=n.multiple,m=n.maxFiles,g=n.onDragEnter,y=n.onDragLeave,v=n.onDragOver,_=n.onDrop,C=n.onDropAccepted,w=n.onDropRejected,A=n.onFileDialogCancel,M=n.onFileDialogOpen,B=n.useFsAccessApi,P=n.autoFocus,E=n.preventDropOnDocument,U=n.noClick,H=n.noKeyboard,ee=n.noDrag,re=n.noDragEventsBubbling,Z=n.onError,pe=n.validator,ue=b.useMemo(function(){return SN(s)},[s]),Be=b.useMemo(function(){return bN(s)},[s]),Ze=b.useMemo(function(){return typeof M=="function"?M:_b},[M]),me=b.useMemo(function(){return typeof A=="function"?A:_b},[A]),Re=b.useRef(null),He=b.useRef(null),z=b.useReducer(UN,Vp),ae=np(z,2),le=ae[0],Se=ae[1],ze=le.isFocused,ve=le.isFileDialogActive,Ne=b.useRef(typeof window<"u"&&window.isSecureContext&&B&&xN()),Ce=function(){!Ne.current&&ve&&setTimeout(function(){if(He.current){var xe=He.current.files;xe.length||(Se({type:"closeDialog"}),me())}},300)};b.useEffect(function(){return window.addEventListener("focus",Ce,!1),function(){window.removeEventListener("focus",Ce,!1)}},[He,ve,me,Ne]);var te=b.useRef([]),he=function(xe){Re.current&&Re.current.contains(xe.target)||(xe.preventDefault(),te.current=[])};b.useEffect(function(){return E&&(document.addEventListener("dragover",bb,!1),document.addEventListener("drop",he,!1)),function(){E&&(document.removeEventListener("dragover",bb),document.removeEventListener("drop",he))}},[Re,E]),b.useEffect(function(){return!o&&P&&Re.current&&Re.current.focus(),function(){}},[Re,P,o]);var de=b.useCallback(function(ie){Z?Z(ie):console.error(ie)},[Z]),$t=b.useCallback(function(ie){ie.preventDefault(),ie.persist(),ft(ie),te.current=[].concat(AN(te.current),[ie.target]),Ic(ie)&&Promise.resolve(c(ie)).then(function(xe){if(!(ru(ie)&&!re)){var Qe=xe.length,$e=Qe>0&&mN({files:xe,accept:ue,minSize:f,maxSize:u,multiple:h,maxFiles:m,validator:pe}),X=Qe>0&&!$e;Se({isDragAccept:$e,isDragReject:X,isDragActive:!0,type:"setDraggedFiles"}),g&&g(ie)}}).catch(function(xe){return de(xe)})},[c,g,de,re,ue,f,u,h,m,pe]),jt=b.useCallback(function(ie){ie.preventDefault(),ie.persist(),ft(ie);var xe=Ic(ie);if(xe&&ie.dataTransfer)try{ie.dataTransfer.dropEffect="copy"}catch{}return xe&&v&&v(ie),!1},[v,re]),Ot=b.useCallback(function(ie){ie.preventDefault(),ie.persist(),ft(ie);var xe=te.current.filter(function($e){return Re.current&&Re.current.contains($e)}),Qe=xe.indexOf(ie.target);Qe!==-1&&xe.splice(Qe,1),te.current=xe,!(xe.length>0)&&(Se({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ic(ie)&&y&&y(ie))},[Re,y,re]),Xe=b.useCallback(function(ie,xe){var Qe=[],$e=[];ie.forEach(function(X){var lt=G1(X,ue),O=np(lt,2),G=O[0],ge=O[1],Te=Y1(X,f,u),Ue=np(Te,2),ot=Ue[0],gt=Ue[1],mt=pe?pe(X):null;if(G&&ot&&!mt)Qe.push(X);else{var ma=[ge,gt];mt&&(ma=ma.concat(mt)),$e.push({file:X,errors:ma.filter(function(ds){return ds})})}}),(!h&&Qe.length>1||h&&m>=1&&Qe.length>m)&&(Qe.forEach(function(X){$e.push({file:X,errors:[hN]})}),Qe.splice(0)),Se({acceptedFiles:Qe,fileRejections:$e,isDragReject:$e.length>0,type:"setFiles"}),_&&_(Qe,$e,xe),$e.length>0&&w&&w($e,xe),Qe.length>0&&C&&C(Qe,xe)},[Se,h,ue,f,u,m,_,C,w,pe]),qt=b.useCallback(function(ie){ie.preventDefault(),ie.persist(),ft(ie),te.current=[],Ic(ie)&&Promise.resolve(c(ie)).then(function(xe){ru(ie)&&!re||Xe(xe,ie)}).catch(function(xe){return de(xe)}),Se({type:"reset"})},[c,Xe,de,re]),Mt=b.useCallback(function(){if(Ne.current){Se({type:"openDialog"}),Ze();var ie={multiple:h,types:Be};window.showOpenFilePicker(ie).then(function(xe){return c(xe)}).then(function(xe){Xe(xe,null),Se({type:"closeDialog"})}).catch(function(xe){_N(xe)?(me(xe),Se({type:"closeDialog"})):wN(xe)?(Ne.current=!1,He.current?(He.current.value=null,He.current.click()):de(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):de(xe)});return}He.current&&(Se({type:"openDialog"}),Ze(),He.current.value=null,He.current.click())},[Se,Ze,me,B,Xe,de,Be,h]),Dt=b.useCallback(function(ie){!Re.current||!Re.current.isEqualNode(ie.target)||(ie.key===" "||ie.key==="Enter"||ie.keyCode===32||ie.keyCode===13)&&(ie.preventDefault(),Mt())},[Re,Mt]),Bt=b.useCallback(function(){Se({type:"focus"})},[]),Gt=b.useCallback(function(){Se({type:"blur"})},[]),Et=b.useCallback(function(){U||(vN()?setTimeout(Mt,0):Mt())},[U,Mt]),Qt=function(xe){return o?null:xe},Zt=function(xe){return H?null:Qt(xe)},Lt=function(xe){return ee?null:Qt(xe)},ft=function(xe){re&&xe.stopPropagation()},mn=b.useMemo(function(){return function(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},xe=ie.refKey,Qe=xe===void 0?"ref":xe,$e=ie.role,X=ie.onKeyDown,lt=ie.onFocus,O=ie.onBlur,G=ie.onClick,ge=ie.onDragEnter,Te=ie.onDragOver,Ue=ie.onDragLeave,ot=ie.onDrop,gt=lu(ie,TN);return Ht(Ht(Hp({onKeyDown:Zt(Ua(X,Dt)),onFocus:Zt(Ua(lt,Bt)),onBlur:Zt(Ua(O,Gt)),onClick:Qt(Ua(G,Et)),onDragEnter:Lt(Ua(ge,$t)),onDragOver:Lt(Ua(Te,jt)),onDragLeave:Lt(Ua(Ue,Ot)),onDrop:Lt(Ua(ot,qt)),role:typeof $e=="string"&&$e!==""?$e:"presentation"},Qe,Re),!o&&!H?{tabIndex:0}:{}),gt)}},[Re,Dt,Bt,Gt,Et,$t,jt,Ot,qt,H,ee,o]),an=b.useCallback(function(ie){ie.stopPropagation()},[]),rt=b.useMemo(function(){return function(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},xe=ie.refKey,Qe=xe===void 0?"ref":xe,$e=ie.onChange,X=ie.onClick,lt=lu(ie,kN),O=Hp({accept:ue,multiple:h,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Qt(Ua($e,qt)),onClick:Qt(Ua(X,an)),tabIndex:-1},Qe,He);return Ht(Ht({},O),lt)}},[He,s,h,qt,o]);return Ht(Ht({},le),{},{isFocused:ze&&!o,getRootProps:mn,getInputProps:rt,rootRef:Re,inputRef:He,open:Qt(Mt)})}function UN(t,n){switch(n.type){case"focus":return Ht(Ht({},t),{},{isFocused:!0});case"blur":return Ht(Ht({},t),{},{isFocused:!1});case"openDialog":return Ht(Ht({},Vp),{},{isFileDialogActive:!0});case"closeDialog":return Ht(Ht({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Ht(Ht({},t),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return Ht(Ht({},t),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections,isDragReject:n.isDragReject});case"reset":return Ht({},Vp);default:return t}}function _b(){}const wb=5*1024*1024,IN=["image/png","image/jpeg","image/jpg","image/gif","image/webp"],ON=t=>IN.includes(t.type)?t.size>wb?{valid:!1,error:`File too large. Maximum size is ${J1(wb)}.`}:{valid:!0}:{valid:!1,error:"Invalid file type. Please upload an image (PNG, JPG, GIF, or WEBP)."},J1=t=>{if(t===0)return"0 Bytes";const n=1024,s=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(t)/Math.log(n));return`${Math.round(t/Math.pow(n,o)*100)/100} ${s[o]}`},LN=t=>new Promise((n,s)=>{const o=new FileReader;o.onloadend=()=>{typeof o.result=="string"?n(o.result):s(new Error("Failed to read file"))},o.onerror=()=>{s(new Error("Error reading file"))},o.readAsDataURL(t)}),zh=({onFileAccepted:t,currentPreview:n,maxSize:s=5*1024*1024,label:o="Upload Image",helperText:c="Drag and drop an image here, or click to browse",disabled:u=!1})=>{const[f,h]=b.useState(n||null),[m,g]=b.useState(null),[y,v]=b.useState(!1),_=b.useCallback(async P=>{g(null),v(!0);const E=P[0];if(!E){v(!1);return}const U=ON(E);if(!U.valid){g(U.error||"Invalid file"),v(!1);return}try{const H=await LN(E);h(H),t(E)}catch(H){g("Failed to process image"),console.error("Error processing image:",H)}finally{v(!1)}},[t]),{getRootProps:C,getInputProps:w,isDragActive:A,isDragReject:M}=Z1({onDrop:_,accept:{"image/*":[".png",".jpg",".jpeg",".gif",".webp"]},maxSize:s,multiple:!1,disabled:u||y}),B=P=>{P.stopPropagation(),h(null),g(null)};return l.jsxs("div",{style:{width:"100%"},children:[o&&l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:600,color:"var(--text)"},children:o}),l.jsxs("div",{...C(),style:{border:`2px dashed ${m||M?"#ff6b6b":A?"var(--accent)":"var(--border)"}`,borderRadius:"12px",padding:f?"0":"32px",textAlign:"center",cursor:u||y?"not-allowed":"pointer",transition:"all 0.3s ease",backgroundColor:A?"var(--background)":f?"transparent":"var(--surface)",position:"relative",opacity:u||y?.6:1},children:[l.jsx("input",{...w()}),f?l.jsxs("div",{style:{position:"relative"},children:[l.jsx("img",{src:f,alt:"Preview",style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"10px"}}),!u&&l.jsx("button",{onClick:B,"aria-label":"Remove image",style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"background 0.2s ease",fontSize:"20px",fontWeight:300,lineHeight:1},onMouseEnter:P=>{P.currentTarget.style.background="rgba(0, 0, 0, 0.9)"},onMouseLeave:P=>{P.currentTarget.style.background="rgba(0, 0, 0, 0.7)"},children:""}),l.jsxs("div",{style:{position:"absolute",bottom:"8px",right:"8px",background:"rgba(76, 175, 80, 0.9)",color:"white",padding:"4px 12px",borderRadius:"16px",fontSize:"12px",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[l.jsx(mw,{size:14}),"Image selected"]})]}):l.jsxs("div",{children:[l.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"12px"},children:y?l.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid var(--border)",borderTop:"4px solid var(--accent)",borderRadius:"50%",animation:"spin 1s linear infinite"}}):M||m?l.jsx(Ws,{size:48,color:"#ff6b6b"}):l.jsx(gw,{size:48,color:A?"var(--accent)":"var(--text-muted)"})}),y?l.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"14px",fontWeight:600,color:"var(--text)"},children:"Processing..."}):l.jsxs(l.Fragment,{children:[l.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"14px",fontWeight:600,color:A?"var(--accent)":"var(--text)"},children:M?"Invalid file type":A?"Drop image here":c}),l.jsxs("p",{style:{margin:0,fontSize:"12px",color:"var(--text-muted)"},children:["PNG, JPG, GIF or WEBP (max ",J1(s),")"]})]})]})]}),m&&l.jsxs("div",{style:{marginTop:"8px",padding:"8px 12px",backgroundColor:"#fee",border:"1px solid #fcc",borderRadius:"6px",display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx(Ws,{size:16,color:"#ff6b6b"}),l.jsx("span",{style:{fontSize:"13px",color:"#c33"},children:m})]}),l.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},PN={sm:8,md:10,lg:12},Cb={scale:[1,1.2,1],opacity:[1,.8,1]},HN={boxShadow:["0 0 0 0 rgba(34, 197, 94, 0.4)","0 0 0 4px rgba(34, 197, 94, 0.2)","0 0 0 0 rgba(34, 197, 94, 0)"]},Fp=({isOnline:t,size:n="sm",showLabel:s=!1,lastSeen:o,position:c="standalone",className:u=""})=>{const f=PN[n],g={width:f,height:f,backgroundColor:t?"var(--online-color, #22c55e)":"var(--offline-color, #94a3b8)",borderRadius:"50%"};return c==="avatar-overlay"?l.jsx(Pe.div,{className:u,style:{...g,position:"absolute",bottom:0,right:0,border:"2px solid var(--surface)",boxShadow:t?"0 0 8px rgba(34, 197, 94, 0.5)":"none"},animate:t?{...Cb,...HN}:{},transition:{duration:2,repeat:1/0,ease:"easeInOut"},title:t?"Online":o?`Last seen ${su(o)}`:"Offline"}):l.jsxs("div",{className:u,style:{display:"flex",alignItems:"center",gap:s?"6px":"0"},children:[l.jsx(Pe.div,{style:{...g,flexShrink:0,boxShadow:t?"0 0 8px rgba(34, 197, 94, 0.5)":"none"},animate:t?Cb:{},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),s&&l.jsx(Pe.span,{initial:{opacity:0,x:-5},animate:{opacity:1,x:0},transition:{duration:.2},style:{fontSize:"13px",color:t?"var(--online-color, #22c55e)":"var(--text-muted)",whiteSpace:"nowrap",fontWeight:t?500:400},children:t?"Online":o?`Last seen ${su(o)}`:"Offline"})]})},jb=[],bu=t=>{const n=Oe(h=>h.permissionsLoading),s=Oe(h=>h.currentChat),o=Ct(h=>h.user),c=Oe(h=>t?h.chatPermissions.get(t)??jb:jb),u=(()=>{if(!t||!s||!o)return!1;if(s.createdById===o.id)return!0;const m=s.members?.find(g=>g.userId===o.id)?.role?.toLowerCase();return m==="admin"||m==="owner"})(),f=h=>u?!0:c.includes(h);return s?.type==="dm"?{canSendMessage:!0,canAddUsers:!1,canPinMessages:!0,canManageMessages:!1,canManageBans:!1,canManageChatInfo:!1,canManageUsers:!1,isLoading:!1}:t?{canSendMessage:f("SendMessage"),canAddUsers:f("AddUsers"),canPinMessages:f("PinMessages"),canManageMessages:f("ManageMessages"),canManageBans:f("ManageBans"),canManageChatInfo:f("ManageChatInfo"),canManageUsers:f("ManageUsers"),isLoading:n}:{canSendMessage:!1,canAddUsers:!1,canPinMessages:!1,canManageMessages:!1,canManageBans:!1,canManageChatInfo:!1,canManageUsers:!1,isLoading:!1}},VN="_overlay_oomqs_47",FN="_fadeIn_oomqs_1",$N="_closing_oomqs_63",qN="_fadeOut_oomqs_1",GN="_modal_oomqs_68",YN="_slideUp_oomqs_1",WN="_slideDown_oomqs_1",XN="_header_oomqs_87",KN="_headerContent_oomqs_96",QN="_headerIcon_oomqs_102",ZN="_title_oomqs_114",JN="_subtitle_oomqs_121",eD="_closeBtn_oomqs_127",tD="_content_oomqs_150",nD="_userCard_oomqs_174",aD="_userAvatar_oomqs_185",sD="_userInfo_oomqs_207",iD="_userName_oomqs_212",oD="_userRole_oomqs_219",rD="_roleBadge_oomqs_224",lD="_admin_oomqs_233",cD="_moderator_oomqs_238",uD="_member_oomqs_243",dD="_permissionStats_oomqs_248",fD="_statNumber_oomqs_256",pD="_statLabel_oomqs_262",hD="_loadingState_oomqs_268",mD="_loadingSpinner_oomqs_273",gD="_spin_oomqs_277",yD="_skeletonList_oomqs_288",vD="_skeletonItem_oomqs_294",xD="_skeletonIcon_oomqs_303",bD="_shimmer_oomqs_1",SD="_skeletonText_oomqs_312",_D="_skeletonLine_oomqs_316",wD="_skeletonToggle_oomqs_329",CD="_permissionsList_oomqs_339",jD="_category_oomqs_346",TD="_categoryHeader_oomqs_350",kD="_categoryLabel_oomqs_358",AD="_categoryCount_oomqs_366",MD="_categoryItems_oomqs_372",ED="_permissionItem_oomqs_379",RD="_granted_oomqs_395",ND="_updating_oomqs_405",DD="_permissionIcon_oomqs_410",BD="_permissionInfo_oomqs_428",zD="_permissionLabel_oomqs_433",UD="_permissionDescription_oomqs_440",ID="_toggleSwitch_oomqs_447",OD="_toggleTrack_oomqs_457",LD="_on_oomqs_466",PD="_toggleThumb_oomqs_470",HD="_footer_oomqs_496",VD="_footerInfo_oomqs_505",FD="_doneButton_oomqs_517",De={overlay:VN,fadeIn:FN,closing:$N,fadeOut:qN,modal:GN,slideUp:YN,slideDown:WN,header:XN,headerContent:KN,headerIcon:QN,title:ZN,subtitle:JN,closeBtn:eD,content:tD,userCard:nD,userAvatar:aD,userInfo:sD,userName:iD,userRole:oD,roleBadge:rD,admin:lD,moderator:cD,member:uD,permissionStats:dD,statNumber:fD,statLabel:pD,loadingState:hD,loadingSpinner:mD,spin:gD,skeletonList:yD,skeletonItem:vD,skeletonIcon:xD,shimmer:bD,skeletonText:SD,skeletonLine:_D,skeletonToggle:wD,permissionsList:CD,category:jD,categoryHeader:TD,categoryLabel:kD,categoryCount:AD,categoryItems:MD,permissionItem:ED,granted:RD,updating:ND,permissionIcon:DD,permissionInfo:BD,permissionLabel:zD,permissionDescription:UD,toggleSwitch:ID,toggleTrack:OD,on:LD,toggleThumb:PD,footer:HD,footerInfo:VD,doneButton:FD},Oc=[{name:"SendMessage",label:"Send Messages",description:"Allow sending messages in this chat",icon:l.jsx(Vr,{size:18}),category:"messaging"},{name:"ManageMessages",label:"Manage Messages",description:"Edit or delete messages from other users",icon:l.jsx(Xc,{size:18}),category:"moderation"},{name:"AddUsers",label:"Add Users",description:"Invite new members to this chat",icon:l.jsx(qp,{size:18}),category:"management"},{name:"ManageUsers",label:"Manage Users",description:"Remove members and manage their roles",icon:l.jsx(Hn,{size:18}),category:"management"},{name:"ManageChatInfo",label:"Manage Chat Info",description:"Edit chat name, description, and avatar",icon:l.jsx(Xc,{size:18}),category:"management"},{name:"ManageBans",label:"Manage Bans",description:"Ban or unban users from this chat",icon:l.jsx(La,{size:18}),category:"moderation"},{name:"PinMessages",label:"Pin Messages",description:"Pin important messages for all members",icon:l.jsx(qr,{size:18}),category:"messaging"}],ap={messaging:{label:"Messaging",order:1},moderation:{label:"Moderation",order:2},management:{label:"Management",order:3}},eS=({isOpen:t,onClose:n,chatId:s,member:o,onPermissionsChanged:c})=>{const[u,f]=b.useState([]),[h,m]=b.useState(!1),[g,y]=b.useState(null),[v,_]=b.useState(!1);b.useEffect(()=>{t&&(C(),_(!1))},[t,s,o.userId]);const C=async()=>{m(!0);try{const{permissionService:H}=await bt(async()=>{const{permissionService:pe}=await import("./permission.service-k-pqJdLT.js");return{permissionService:pe}},__vite__mapDeps([0,1,2])),ee=await H.getUserPermissions(s,o.userId),re=ee?.permissions||ee,Z=Array.isArray(re)?re.map(pe=>pe.permissionName||pe.name||pe):[];f(Z)}catch(H){console.error("Failed to load permissions:",H),f([])}finally{m(!1)}},w=async H=>{const ee=u.includes(H);y(H);const Z=Ct.getState().user?.id===o.userId;try{const{permissionService:pe}=await bt(async()=>{const{permissionService:ue}=await import("./permission.service-k-pqJdLT.js");return{permissionService:ue}},__vite__mapDeps([0,1,2]));ee?(await pe.revokePermission(s,o.userId,H),f(u.filter(ue=>ue!==H)),Z&&Oe.getState().revokePermission(s,H),se.success(`Revoked "${Oc.find(ue=>ue.name===H)?.label}" permission`)):(await pe.grantPermission(s,o.userId,H),f([...u,H]),Z&&Oe.getState().grantPermission(s,H),se.success(`Granted "${Oc.find(ue=>ue.name===H)?.label}" permission`)),await c()}catch(pe){console.error("Failed to update permission:",pe),se.error(Fe(pe,"Failed to update permission"))}finally{y(null)}},A=()=>{_(!0),setTimeout(()=>{n(),_(!1)},200)};if(!t)return null;const M=H=>H.slice(0,2).toUpperCase(),B=Oc.reduce((H,ee)=>(H[ee.category]||(H[ee.category]=[]),H[ee.category].push(ee),H),{}),P=Object.entries(B).sort(([H],[ee])=>ap[H].order-ap[ee].order),E=u.length,U=Oc.length;return l.jsx("div",{className:`${De.overlay} ${v?De.closing:""}`,onClick:A,children:l.jsxs("div",{className:`${De.modal} ${v?De.closing:""}`,onClick:H=>H.stopPropagation(),children:[l.jsxs("div",{className:De.header,children:[l.jsxs("div",{className:De.headerContent,children:[l.jsx("div",{className:De.headerIcon,children:l.jsx(ls,{size:20})}),l.jsxs("div",{children:[l.jsx("h2",{className:De.title,children:"Manage Permissions"}),l.jsx("p",{className:De.subtitle,children:"Configure access for this member"})]})]}),l.jsx("button",{onClick:A,className:De.closeBtn,"aria-label":"Close",children:""})]}),l.jsxs("div",{className:De.content,children:[l.jsxs("div",{className:De.userCard,children:[l.jsx("div",{className:De.userAvatar,children:o.user.avatarUrl?l.jsx("img",{src:o.user.avatarUrl,alt:o.user.username}):M(o.user.username)}),l.jsxs("div",{className:De.userInfo,children:[l.jsx("div",{className:De.userName,children:o.user.username}),l.jsx("div",{className:De.userRole,children:l.jsx("span",{className:`${De.roleBadge} ${De[o.role]}`,children:o.role.charAt(0).toUpperCase()+o.role.slice(1)})})]}),l.jsxs("div",{className:De.permissionStats,children:[l.jsx("div",{className:De.statNumber,children:E}),l.jsxs("div",{className:De.statLabel,children:["of ",U]})]})]}),h?l.jsxs("div",{className:De.loadingState,children:[l.jsx("div",{className:De.loadingSpinner,children:l.jsx(ta,{size:32,className:De.spin})}),l.jsx("p",{children:"Loading permissions..."}),l.jsx("div",{className:De.skeletonList,children:[1,2,3,4].map(H=>l.jsxs("div",{className:De.skeletonItem,children:[l.jsx("div",{className:De.skeletonIcon}),l.jsxs("div",{className:De.skeletonText,children:[l.jsx("div",{className:De.skeletonLine,style:{width:"60%"}}),l.jsx("div",{className:De.skeletonLine,style:{width:"80%"}})]}),l.jsx("div",{className:De.skeletonToggle})]},H))})]}):l.jsx("div",{className:De.permissionsList,children:P.map(([H,ee],re)=>l.jsxs("div",{className:De.category,style:{animationDelay:`${re*.1}s`},children:[l.jsxs("div",{className:De.categoryHeader,children:[l.jsx("span",{className:De.categoryLabel,children:ap[H].label}),l.jsxs("span",{className:De.categoryCount,children:[ee.filter(Z=>u.includes(Z.name)).length," / ",ee.length]})]}),l.jsx("div",{className:De.categoryItems,children:ee.map((Z,pe)=>{const ue=u.includes(Z.name),Be=g===Z.name;return l.jsxs("div",{className:`${De.permissionItem} ${ue?De.granted:""} ${Be?De.updating:""}`,style:{animationDelay:`${re*.1+pe*.05}s`},children:[l.jsx("div",{className:De.permissionIcon,children:Z.icon}),l.jsxs("div",{className:De.permissionInfo,children:[l.jsx("div",{className:De.permissionLabel,children:Z.label}),l.jsx("div",{className:De.permissionDescription,children:Z.description})]}),l.jsx("button",{className:`${De.toggleSwitch} ${ue?De.on:De.off}`,onClick:()=>w(Z.name),disabled:Be,children:l.jsx("div",{className:De.toggleTrack,children:l.jsx("div",{className:De.toggleThumb,children:Be&&l.jsx(ta,{size:12,className:De.spin})})})})]},Z.name)})})]},H))})]}),l.jsxs("div",{className:De.footer,children:[l.jsxs("div",{className:De.footerInfo,children:[l.jsx(ls,{size:14}),l.jsx("span",{children:"Changes take effect immediately"})]}),l.jsx("button",{onClick:A,className:De.doneButton,children:"Done"})]})]})})},$D=({isOpen:t,onClose:n,chat:s,currentUserId:o,onEditGroup:c,onDeleteGroup:u,onLeaveGroup:f,onKickMember:h,onViewUserProfile:m,onBanMember:g,onUpdatePrivacy:y})=>{const[v,_]=b.useState(null),[C,w]=b.useState(!1),[A,M]=b.useState(null),[B,P]=b.useState(""),[E,U]=b.useState([]),[H,ee]=b.useState(!1),[re,Z]=b.useState(""),[pe,ue]=b.useState([]),[Be,Ze]=b.useState(!1),[me,Re]=b.useState(!1),[He,z]=b.useState(!1),[ae,le]=b.useState(!1),[Se,ze]=b.useState(!1),[ve,Ne]=b.useState([]),[Ce,te]=b.useState(!1),{isUserOnline:he,getUserLastSeen:de,loadChats:$t,setInitialPresenceStates:jt}=Oe(),Xe=v?.members.find(X=>X.userId===o)?.role==="admin",{canAddUsers:qt,canManageChatInfo:Mt,canManageBans:Dt,canManageUsers:Bt}=bu(s?.id);b.useEffect(()=>{t&&s.id&&(z(!1),le(!1),Gt())},[t,s.id]);const Gt=async()=>{w(!0),M(null);try{const X=await Me.getChatProfile(s.id);_(X);const lt=X.members?.map(O=>O.userId)||[];if(lt.length>0)try{const O=await tt.getPresenceStates(lt);Object.keys(O).length>0&&(jt(O),le(!0))}catch(O){console.error("[GroupProfileModal] Failed to fetch presence states:",O)}}catch(X){M(X.response?.data?.message||"Failed to load profile")}finally{w(!1)}},Et=v?.members.some(X=>X.userId===o),Qt=async()=>{if(!(!s||!s.type)){Re(!0);try{const X=s.type;await Me.joinChat(s.id,X),se.success(`Successfully joined the ${X}!`),await $t(),await Gt()}catch(X){console.error("Failed to join:",X),pp(X)?(z(!0),se.error(Ir(X))):se.error(Fe(X,"Failed to join"))}finally{Re(!1)}}},Zt=async()=>{if(!(!s?.id||!Xe&&!Dt)){te(!0);try{const X=await Me.getBannedUsers(s.id);Ne(X)}catch(X){console.error("[GroupProfileModal] Failed to load banned users:",X),se.error(Fe(X,"Failed to load banned users"))}finally{te(!1)}}},Lt=async(X,lt)=>{if(await vn({title:"Unban User",message:`Are you sure you want to unban ${lt}? They will be able to rejoin this ${s.type==="channel"?"channel":"group"}.`,confirmText:"Unban",cancelText:"Cancel",variant:"info"}))try{await Me.unbanUser(s.id,X),se.success(`${lt} has been unbanned`),await Zt()}catch(G){console.error("[GroupProfileModal] Failed to unban user:",G),se.error(Fe(G,"Failed to unban user"))}};b.useEffect(()=>{Se&&(Xe||Dt)&&Zt()},[Se,Xe,Dt]),b.useEffect(()=>{if(!v?.members){U([]);return}if(!B.trim()){U(v.members);return}const X=B.toLowerCase(),lt=v.members.filter(O=>O.user.username.toLowerCase().includes(X)||O.user.email?.toLowerCase().includes(X));U(lt)},[v?.members,B]);const ft=async X=>{if(!h)return;await vn({title:"Remove Member",message:"Are you sure you want to remove this member from the group?",confirmText:"Remove",cancelText:"Cancel",variant:"danger"})&&h(X)},mn=async X=>{if(Z(X),!X.trim()){ue([]);return}Ze(!0);try{const O=await(await bt(()=>Promise.resolve().then(()=>Vn),void 0).then(Te=>Te.userService)).searchUsers(X),G=new Set(v?.members.map(Te=>Te.userId)||[]),ge=O.filter(Te=>!G.has(Te.id));ue(ge)}catch(lt){console.error("Failed to search users:",lt)}finally{Ze(!1)}},an=async X=>{if(!(!s||!Xe&&!qt))try{s.type==="group"?await Me.addMemberToGroup(s.id,X):s.type==="channel"&&await Me.addMemberToChannel(s.id,X),se.success("Member added successfully"),ee(!1),Z(""),ue([]),await Gt()}catch(lt){console.error("Failed to add member:",lt),pp(lt)?se.error("This user is banned from this chat and cannot be added."):se.error(Fe(lt,"Failed to add member"))}},rt=async()=>{if(!f)return;await vn({title:"Leave Group",message:"Are you sure you want to leave this group? You will lose access to all messages and content.",confirmText:"Leave",cancelText:"Stay",variant:"warning"})&&(f(),n())},ie=async()=>{if(!u)return;await vn({title:"Delete Group",message:"Are you sure you want to delete this group? This action cannot be undone and all messages will be permanently deleted.",confirmText:"Delete Forever",cancelText:"Cancel",variant:"danger"})&&(u(),n())},xe={admin:[],moderator:[],member:[]};E.forEach(X=>{xe[X.role].push(X)});const Qe=v?.members.filter(X=>he(X.userId)).length||0,$e=v?.members.length||0;return console.log("[GroupProfileModal] Online count:",Qe,"Total members:",$e,"Presence loaded:",ae),l.jsxs(l.Fragment,{children:[l.jsx(Ta,{children:t&&l.jsx(Pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:n,children:l.jsxs(Pe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.15},style:{backgroundColor:"var(--surface)",borderRadius:"12px",maxWidth:"600px",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.2)"},onClick:X=>X.stopPropagation(),children:[l.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("h2",{style:{margin:0,fontSize:"20px",fontWeight:700,color:"var(--text)"},children:[s.type==="channel"?"Channel":"Group"," Profile"]}),l.jsx("button",{onClick:n,"aria-label":"Close",style:{background:"none",border:"none",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"background-color 0.2s",fontSize:"24px",fontWeight:300,lineHeight:1,color:"var(--text)"},onMouseEnter:X=>{X.currentTarget.style.backgroundColor="var(--background)"},onMouseLeave:X=>{X.currentTarget.style.backgroundColor="transparent"},children:""})]}),l.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"20px"},children:[C&&l.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-muted)"},children:"Loading profile..."}),A&&l.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#ff6b6b"},children:A}),!C&&!A&&v&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[v.avatar?l.jsx("img",{src:v.avatar,alt:v.name,style:{width:"120px",height:"120px",borderRadius:"50%",objectFit:"cover",marginBottom:"16px"}}):l.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",backgroundColor:"var(--accent)",color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"48px",fontWeight:700,marginBottom:"16px"},children:v.name.charAt(0).toUpperCase()}),l.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"24px",fontWeight:700,color:"var(--text)"},children:v.name}),v.description&&l.jsx("p",{style:{margin:"0 0 16px 0",fontSize:"14px",color:"var(--text-muted)"},children:v.description})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",marginBottom:"24px"},children:[l.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[l.jsx(Hn,{size:20,color:"var(--text-muted)",style:{marginBottom:"4px"}}),l.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"var(--text)"},children:$e}),l.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Total Members"})]}),l.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[l.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"#51cf66",margin:"0 auto 4px auto"}}),l.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"#51cf66"},children:Qe}),l.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Online Now"})]}),l.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[l.jsx(Nb,{size:20,color:"var(--text-muted)",style:{marginBottom:"4px"}}),l.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"var(--text)"},children:new Date(v.createdAt).toLocaleDateString()}),l.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Created"})]})]}),v.privacy&&l.jsxs("div",{style:{marginBottom:"24px"},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:700,color:"var(--text)"},children:"Privacy"}),l.jsxs("div",{style:{padding:"16px",backgroundColor:"var(--background)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"var(--text)",marginBottom:"4px"},children:v.privacy==="public"?"Public":"Private"}),l.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:v.privacy==="public"?"Anyone can find and join":"Invite-only membership"})]}),Xe&&y&&l.jsxs("button",{onClick:async()=>{const X=v.privacy==="public"?"private":"public";await vn({title:"Change Privacy",message:`Change this ${s?.type||"chat"} to ${X}? ${X==="private"?"Only invited members will be able to join.":"Anyone will be able to find and join."}`,confirmText:"Change",cancelText:"Cancel",variant:"info"})&&y(X)},style:{padding:"8px 16px",backgroundColor:"var(--accent)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,transition:"opacity 0.2s"},onMouseEnter:X=>{X.currentTarget.style.opacity="0.8"},onMouseLeave:X=>{X.currentTarget.style.opacity="1"},children:["Change to ",v.privacy==="public"?"Private":"Public"]})]})]}),(Xe||qt||Mt)&&l.jsx("div",{style:{marginBottom:"24px"},children:l.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(Xe||qt)&&l.jsxs("button",{onClick:()=>ee(!0),style:{flex:1,padding:"10px 16px",backgroundColor:"#51cf66",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[l.jsx(Hn,{size:16}),"Add Member"]}),(Xe||Mt)&&c&&l.jsxs("button",{onClick:c,style:{flex:1,padding:"10px 16px",backgroundColor:"var(--accent)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[l.jsx(yw,{size:16}),"Edit ",s.type==="channel"?"Channel":"Group"]}),Xe&&u&&l.jsxs("button",{onClick:ie,style:{padding:"10px 16px",backgroundColor:"#ff6b6b",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[l.jsx(Ci,{size:16}),"Delete"]})]})}),He&&l.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",textAlign:"center"},children:[l.jsx(La,{size:32,color:"#ef4444",style:{marginBottom:"8px"}}),l.jsx("h4",{style:{margin:"0 0 8px 0",color:"#ef4444",fontSize:"16px",fontWeight:600},children:"You Are Banned"}),l.jsxs("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"14px"},children:["Sorry, you have been banned from this ",s.type==="channel"?"channel":"group"," and cannot rejoin."]})]}),!Et&&!He&&v?.privacy==="public"&&l.jsx("div",{style:{marginBottom:"24px"},children:l.jsxs("button",{onClick:Qt,disabled:me,style:{width:"100%",padding:"12px 16px",backgroundColor:me?"var(--text-muted)":"#51cf66",color:"white",border:"none",borderRadius:"8px",cursor:me?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background-color 0.2s"},children:[l.jsx(qp,{size:18}),me?"Joining...":`Join ${s.type==="channel"?"Channel":"Group"}`]})}),!Et&&!He&&v?.privacy==="private"&&l.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[l.jsx(ls,{size:24,color:"var(--text-muted)",style:{marginBottom:"8px"}}),l.jsxs("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"14px"},children:["This is a private ",s.type==="channel"?"channel":"group",". You need an invitation to join."]})]}),!Xe&&Et&&f&&l.jsx("div",{style:{marginBottom:"24px"},children:l.jsxs("button",{onClick:rt,style:{width:"100%",padding:"10px 16px",backgroundColor:"#ff6b6b",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[l.jsx(Gp,{size:16}),"Leave ",s.type==="channel"?"Channel":"Group"]})}),(Xe||Dt)&&l.jsx("div",{style:{marginBottom:"24px"},children:l.jsxs("button",{onClick:()=>ze(!0),style:{width:"100%",padding:"10px 16px",backgroundColor:"var(--background)",color:"var(--text)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background-color 0.2s"},onMouseEnter:X=>{X.currentTarget.style.backgroundColor="var(--border)"},onMouseLeave:X=>{X.currentTarget.style.backgroundColor="var(--background)"},children:[l.jsx(La,{size:16}),"View Banned Users"]})}),l.jsxs("div",{children:[l.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:700,color:"var(--text)"},children:["Members (",$e,")"]}),$e>5&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("input",{type:"text",placeholder:"Search members...",value:B,onChange:X=>P(X.target.value),style:{width:"100%",padding:"10px 16px",backgroundColor:"var(--background)",border:"2px solid var(--border)",borderRadius:"8px",fontSize:"14px",color:"var(--text)",transition:"border-color 0.2s"},onFocus:X=>{X.currentTarget.style.borderColor="var(--accent)"},onBlur:X=>{X.currentTarget.style.borderColor="var(--border)"}}),l.jsxs("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px"},children:["Showing ",E.length," of ",$e," members"]})]}),xe.admin.length>0&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("div",{style:{fontSize:"12px",fontWeight:700,color:"var(--text-muted)",marginBottom:"8px",textTransform:"uppercase"},children:"Admins"}),xe.admin.map(X=>l.jsx(sp,{member:X,currentUserId:o,isAdmin:Xe,isUserOnline:he,getUserLastSeen:de,onViewProfile:m,onKick:ft,onBanMember:g,chatId:s.id,canManageBans:Dt,canManageUsers:Bt},X.id))]}),xe.moderator.length>0&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("div",{style:{fontSize:"12px",fontWeight:700,color:"var(--text-muted)",marginBottom:"8px",textTransform:"uppercase"},children:"Moderators"}),xe.moderator.map(X=>l.jsx(sp,{member:X,currentUserId:o,isAdmin:Xe,isUserOnline:he,getUserLastSeen:de,onViewProfile:m,onKick:ft,onBanMember:g,chatId:s.id,canManageBans:Dt,canManageUsers:Bt},X.id))]}),xe.member.length>0&&l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"12px",fontWeight:700,color:"var(--text-muted)",marginBottom:"8px",textTransform:"uppercase"},children:"Members"}),xe.member.map(X=>l.jsx(sp,{member:X,currentUserId:o,isAdmin:Xe,isUserOnline:he,getUserLastSeen:de,onViewProfile:m,onKick:ft,onBanMember:g,chatId:s.id,canManageBans:Dt,canManageUsers:Bt},X.id))]})]})]})]})]})})}),l.jsx(Ta,{children:H&&l.jsx(Pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},onClick:()=>ee(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"16px"},children:l.jsxs(Pe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.15},onClick:X=>X.stopPropagation(),style:{backgroundColor:"var(--surface)",borderRadius:"12px",maxWidth:"500px",width:"100%",padding:"20px",maxHeight:"80vh",overflow:"auto"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[l.jsx("h3",{style:{margin:0,color:"var(--text)"},children:"Add Member"}),l.jsx("button",{onClick:()=>ee(!1),"aria-label":"Close",style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"var(--text-muted)",fontSize:"22px",fontWeight:300,lineHeight:1},children:""})]}),l.jsx("input",{type:"text",placeholder:"Search users...",value:re,onChange:X=>mn(X.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",backgroundColor:"var(--background)",color:"var(--text)",fontSize:"14px",marginBottom:"16px"},autoFocus:!0}),Be&&l.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"Searching..."}),!Be&&pe.length===0&&re&&l.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"No users found"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:pe.map(X=>l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[l.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600},children:X.username?.charAt(0).toUpperCase()||"?"}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:600,color:"var(--text)"},children:X.username}),X.email&&l.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:X.email})]})]}),l.jsx("button",{onClick:()=>an(X.id),style:{padding:"8px 16px",backgroundColor:"var(--accent)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Add"})]},X.id))})]})})}),l.jsx(Ta,{children:Se&&l.jsx(Pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1002},onClick:()=>ze(!1),children:l.jsxs(Pe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:X=>X.stopPropagation(),style:{backgroundColor:"var(--card)",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"400px",maxHeight:"500px",overflowY:"auto"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[l.jsxs("h3",{style:{margin:0,color:"var(--text)",display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx(La,{size:20,color:"#ef4444"}),"Banned Users"]}),l.jsx("button",{onClick:()=>ze(!1),"aria-label":"Close",style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"var(--text-muted)",fontSize:"22px",fontWeight:300,lineHeight:1},children:""})]}),Ce&&l.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"Loading banned users..."}),!Ce&&ve.length===0&&l.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"No banned users"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:ve.map(X=>l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[X.avatarUrl?l.jsx("img",{src:X.avatarUrl,alt:X.username,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"}}):l.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600},children:X.username?.charAt(0).toUpperCase()||"?"}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:500,color:"var(--text)"},children:X.username}),l.jsxs("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:["Banned ",new Date(X.bannedAt).toLocaleDateString()]})]})]}),l.jsx("button",{onClick:()=>Lt(X.userId,X.username),style:{padding:"8px 16px",backgroundColor:"#51cf66",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Unban"})]},X.userId))})]})})})]})},sp=({member:t,currentUserId:n,isAdmin:s,isUserOnline:o,getUserLastSeen:c,onViewProfile:u,onKick:f,onBanMember:h,chatId:m,canManageBans:g=!1,canManageUsers:y=!1})=>{const[v,_]=b.useState(!1),[C,w]=b.useState(!1),A=o(t.userId),M=c(t.userId),B=t.userId===n,P=()=>t.role==="admin"?l.jsxs("span",{style:{padding:"3px 8px",backgroundColor:"#fbbf24",color:"#000",borderRadius:"4px",fontSize:"11px",fontWeight:600,display:"inline-flex",alignItems:"center",gap:"4px"},children:[l.jsx(Db,{size:12}),"Admin"]}):t.role==="moderator"?l.jsxs("span",{style:{padding:"3px 8px",backgroundColor:"#60a5fa",color:"#000",borderRadius:"4px",fontSize:"11px",fontWeight:600,display:"inline-flex",alignItems:"center",gap:"4px"},children:[l.jsx(ls,{size:12}),"Mod"]}):t.role==="member"?l.jsx("span",{style:{padding:"3px 8px",backgroundColor:"#94a3b8",color:"#fff",borderRadius:"4px",fontSize:"11px",fontWeight:500,display:"inline-flex",alignItems:"center",gap:"4px"},children:"Member"}):null,E=!B&&t.role!=="admin"&&(s||g||y);return l.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px",marginBottom:"8px",cursor:u?"pointer":"default",transition:"background-color 0.2s",position:"relative"},onClick:()=>u&&u(t.userId),onMouseEnter:U=>{u&&(U.currentTarget.style.backgroundColor="var(--border)")},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="var(--background)"},children:[l.jsxs("div",{style:{position:"relative",marginRight:"12px"},children:[t.user.avatar?l.jsx("img",{src:t.user.avatar,alt:t.user.username,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"}}):l.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"var(--accent)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:700},children:t.user.username.charAt(0).toUpperCase()}),l.jsx(Fp,{isOnline:A,lastSeen:M,size:"sm",position:"avatar-overlay"})]}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"2px"},children:[l.jsxs("span",{style:{fontSize:"14px",fontWeight:600,color:"var(--text)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.user.username,B&&" (You)"]}),P()]}),l.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:A?"Online":M?`Last seen ${su(M)}`:"Offline"})]}),E&&l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{onClick:U=>{U.stopPropagation(),_(!v)},style:{background:"none",border:"none",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",transition:"background 0.15s ease"},onMouseEnter:U=>U.currentTarget.style.background="var(--background)",onMouseLeave:U=>U.currentTarget.style.background="none",children:l.jsx(Xc,{size:18,color:"var(--text-muted)"})}),l.jsx(Ta,{children:v&&l.jsxs(Pe.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.1},style:{position:"absolute",right:0,bottom:"100%",marginBottom:"4px",background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",minWidth:"180px",zIndex:1e3,overflow:"hidden"},children:[l.jsx("div",{style:{padding:"10px 12px",borderBottom:"1px solid var(--border)"},children:l.jsxs("span",{style:{fontSize:"11px",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Manage ",t.user.username]})}),(s||y)&&l.jsxs("button",{onClick:U=>{U.stopPropagation(),_(!1),w(!0)},style:{width:"100%",padding:"10px 12px",background:"transparent",border:"none",textAlign:"left",cursor:"pointer",fontSize:"13px",fontWeight:500,color:"var(--text)",display:"flex",alignItems:"center",gap:"8px",transition:"background 0.1s ease"},onMouseEnter:U=>U.currentTarget.style.background="var(--background)",onMouseLeave:U=>U.currentTarget.style.background="transparent",children:[l.jsx(vw,{size:14,color:"var(--text-muted)"}),"Manage Permissions"]}),l.jsxs("div",{style:{borderTop:"1px solid var(--border)"},children:[(s||g)&&h&&l.jsxs("button",{onClick:async U=>{U.stopPropagation(),await vn({title:"Ban Member",message:`Are you sure you want to ban ${t.user.username}? They will not be able to rejoin this group.`,confirmText:"Ban",cancelText:"Cancel",variant:"danger"})&&h(t.userId),_(!1)},style:{width:"100%",padding:"10px 12px",background:"transparent",border:"none",textAlign:"left",cursor:"pointer",fontSize:"13px",fontWeight:500,color:"#ef4444",display:"flex",alignItems:"center",gap:"8px",transition:"background 0.1s ease"},onMouseEnter:U=>U.currentTarget.style.background="rgba(239, 68, 68, 0.1)",onMouseLeave:U=>U.currentTarget.style.background="transparent",children:[l.jsx(ls,{size:14}),"Ban Member"]}),s&&f&&l.jsxs("button",{onClick:U=>{U.stopPropagation(),f(t.userId),_(!1)},style:{width:"100%",padding:"10px 12px",background:"transparent",border:"none",textAlign:"left",cursor:"pointer",fontSize:"13px",fontWeight:500,color:"#f97316",display:"flex",alignItems:"center",gap:"8px",transition:"background 0.1s ease"},onMouseEnter:U=>U.currentTarget.style.background="rgba(249, 115, 22, 0.1)",onMouseLeave:U=>U.currentTarget.style.background="transparent",children:[l.jsx(Ci,{size:14}),"Remove Member"]})]})]})})]}),l.jsx(eS,{isOpen:C,onClose:()=>w(!1),chatId:m,member:{id:t.id||t.userId||"",userId:t.userId,user:{id:t.user.id||t.userId,username:t.user.username,avatarUrl:t.user.avatar},role:t.role||"member"},onPermissionsChanged:async()=>{}})]})},Tb=({isOpen:t,onClose:n,userId:s,onSendMessage:o,onBlockUser:c,onUnblockUser:u})=>{const[f,h]=b.useState(null),[m,g]=b.useState(!1),[y,v]=b.useState(null),[_,C]=b.useState(!1),[w,A]=b.useState(!1),[M,B]=b.useState(!1),{isUserOnline:P,usersYouBlocked:E,blockedByUsers:U}=Oe();b.useEffect(()=>{t&&s&&(H(),ee())},[t,s]),b.useEffect(()=>{if(!t||!s)return;const me=E.has(s),Re=U.has(s);console.log("[UserProfileViewer] Store block status changed:",{userId:s,iBlockedInStore:me,blockedByInStore:Re}),me!==_&&C(me),Re!==w&&A(Re)},[t,s,E,U]);const H=async()=>{g(!0),v(null);try{const me=await yn.getUserProfile(s);console.log("[UserProfileViewer] Loaded profile:",me),console.log("[UserProfileViewer] Bio field:",me.bio),h(me)}catch(me){console.error("[UserProfileViewer] Error loading profile:",me),v(me.response?.data?.message||"Failed to load user profile")}finally{g(!1)}},ee=async()=>{B(!0);try{const me=await yn.getMutualBlockStatus(s);console.log("[UserProfileViewer] Block status:",me),C(me.iBlockedThem),A(me.theyBlockedMe)}catch(me){console.error("[UserProfileViewer] Error checking block status:",me),C(!1),A(!1)}finally{B(!1)}},re=()=>{o&&(o(s),n())},Z=async()=>{if(!c)return;await vn({title:"Block User",message:`Are you sure you want to block ${f?.username||"this user"}? They won't be able to message you.`,confirmText:"Block",cancelText:"Cancel",variant:"danger"})&&(c(s),C(!0))},pe=async()=>{if(!u)return;await vn({title:"Unblock User",message:`Are you sure you want to unblock ${f?.username||"this user"}? They will be able to message you again.`,confirmText:"Unblock",cancelText:"Cancel",variant:"info"})&&(u(s),C(!1))},ue=_||w,Be=f?P(f.id):!1;return l.jsx(Ta,{children:t&&l.jsxs(Pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:n,children:[l.jsx("style",{children:`
    .userProfileScrollContainer::-webkit-scrollbar {
      width: 6px;
    }
    .userProfileScrollContainer::-webkit-scrollbar-track {
      background: rgba(99, 102, 241, 0.1);
      border-radius: 3px;
    }
    .userProfileScrollContainer::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
      border-radius: 3px;
    }
    .userProfileScrollContainer::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #764ba2 0%, #667eea 100%);
    }
  `}),l.jsxs(Pe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.15},style:{background:"#1e293b",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",maxWidth:"400px",width:"100%",maxHeight:"85vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.3)",overflow:"hidden"},onClick:me=>me.stopPropagation(),children:[l.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#f1f5f9"},children:"User Profile"}),l.jsx("button",{onClick:n,"aria-label":"Close",style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",transition:"color 0.15s ease",fontSize:"24px",fontWeight:300,lineHeight:1},onMouseEnter:me=>me.currentTarget.style.color="#f1f5f9",onMouseLeave:me=>me.currentTarget.style.color="#94a3b8",children:""})]}),l.jsxs("div",{className:"userProfileScrollContainer",style:{overflowY:"auto",flex:1,padding:"24px"},children:[m&&l.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#94a3b8"},children:[l.jsx(Pe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{width:"40px",height:"40px",border:"3px solid rgba(99, 102, 241, 0.2)",borderTopColor:"#818cf8",borderRadius:"50%",margin:"0 auto 16px"}}),"Loading profile..."]}),y&&l.jsx("div",{style:{textAlign:"center",padding:"60px 20px",color:"#f87171"},children:y}),!m&&!y&&f&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[l.jsxs("div",{style:{position:"relative",display:"inline-block",marginBottom:"16px"},children:[f.avatar?l.jsx("img",{src:f.avatar,alt:f.username,style:{width:"100px",height:"100px",borderRadius:"50%",objectFit:"cover",border:"3px solid rgba(255, 255, 255, 0.1)"}}):l.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"#6366f1",color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"40px",fontWeight:600},children:f.username.charAt(0).toUpperCase()}),l.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:"20px",height:"20px",borderRadius:"50%",background:Be?"#22c55e":"#64748b",border:"3px solid #1e293b"}})]}),l.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"20px",fontWeight:600,color:"#f1f5f9"},children:f.username}),l.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 12px",borderRadius:"12px",background:Be?"rgba(34, 197, 94, 0.15)":"rgba(100, 116, 139, 0.15)"},children:[l.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:Be?"#22c55e":"#64748b"}}),l.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:Be?"#4ade80":"#94a3b8"},children:Be?"Online":"Offline"})]})]}),l.jsxs("div",{style:{padding:"14px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",marginBottom:"16px"},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"11px",fontWeight:600,color:"#94a3b8",textTransform:"uppercase",letterSpacing:"0.5px"},children:"About"}),l.jsx("p",{style:{margin:0,fontSize:"14px",color:"#cbd5e1",lineHeight:"1.5"},children:f.bio||l.jsx("span",{style:{color:"#64748b",fontStyle:"italic"},children:"No bio set"})})]}),!M&&(w||_)&&l.jsxs("div",{style:{padding:"12px 14px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"10px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"10px"},children:[l.jsx(La,{size:18,color:"#f87171"}),l.jsx("span",{style:{fontSize:"14px",color:"#f87171"},children:w&&_?"You have blocked each other":w?"This user has blocked you":"You have blocked this user"})]}),l.jsxs("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[o&&l.jsxs("button",{onClick:re,disabled:ue||M,style:{width:"100%",padding:"12px 16px",background:ue?"#4b5563":"#6366f1",color:"white",border:"none",borderRadius:"10px",cursor:ue?"not-allowed":"pointer",fontSize:"14px",fontWeight:500,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background 0.15s ease",opacity:ue?.6:1},onMouseEnter:me=>{ue||(me.currentTarget.style.background="#5558e3")},onMouseLeave:me=>{ue||(me.currentTarget.style.background="#6366f1")},children:[l.jsx(Dr,{size:18}),ue?"Cannot Message":"Send Message"]}),_?u&&l.jsxs("button",{onClick:pe,style:{width:"100%",padding:"12px 16px",background:"rgba(34, 197, 94, 0.1)",color:"#4ade80",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"10px",cursor:"pointer",fontSize:"14px",fontWeight:500,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background 0.15s ease"},onMouseEnter:me=>me.currentTarget.style.background="rgba(34, 197, 94, 0.2)",onMouseLeave:me=>me.currentTarget.style.background="rgba(34, 197, 94, 0.1)",children:[l.jsx(Yp,{size:18}),"Unblock User"]}):c&&l.jsxs("button",{onClick:Z,style:{width:"100%",padding:"12px 16px",background:"rgba(239, 68, 68, 0.1)",color:"#f87171",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"10px",cursor:"pointer",fontSize:"14px",fontWeight:500,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"background 0.15s ease"},onMouseEnter:me=>me.currentTarget.style.background="rgba(239, 68, 68, 0.2)",onMouseLeave:me=>me.currentTarget.style.background="rgba(239, 68, 68, 0.1)",children:[l.jsx(Co,{size:18}),"Block User"]})]})]})]})]})]})})},qD=({isOpen:t,onClose:n,isDarkMode:s=!1})=>{const[o,c]=b.useState([]),[u,f]=b.useState(!1),[h,m]=b.useState(null);b.useEffect(()=>{t&&g()},[t]);const g=async()=>{f(!0);try{const v=await yn.getBlockedUsers();c(v||[])}catch(v){console.error("Failed to load blocked users:",v),se.error(Fe(v,"Failed to load blocked users"))}finally{f(!1)}},y=async v=>{if(await vn({title:"Unblock User",message:`Are you sure you want to unblock ${v.username}? They will be able to message you again.`,confirmText:"Unblock",cancelText:"Cancel",variant:"warning"})){m(v.userId);try{await yn.unblockUser(v.userId),c(C=>C.filter(w=>w.userId!==v.userId)),se.success(`${v.username} has been unblocked`)}catch(C){console.error("Failed to unblock user:",C),se.error(Fe(C,"Failed to unblock user"))}finally{m(null)}}};return t?l.jsxs(l.Fragment,{children:[l.jsx("div",{onClick:n,style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998}}),l.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"480px",maxHeight:"80vh",backgroundColor:s?"#1e293b":"#ffffff",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:`1px solid ${s?"#334155":"#e2e8f0"}`},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[l.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"#dc2626",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Co,{size:20,color:"white"})}),l.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:700,color:s?"#f1f5f9":"#1e293b"},children:"Blocked Users"})]}),l.jsx("button",{onClick:n,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",color:s?"#94a3b8":"#64748b",transition:"background-color 0.2s"},onMouseEnter:v=>{v.currentTarget.style.backgroundColor=s?"#334155":"#f1f5f9"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor="transparent"},children:l.jsx(da,{size:20})})]}),l.jsx("div",{style:{flex:1,overflow:"auto",padding:"16px 24px"},children:u?l.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 0",color:s?"#94a3b8":"#64748b"},children:"Loading..."}):o.length===0?l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 0",color:s?"#94a3b8":"#64748b"},children:[l.jsx(Co,{size:48,style:{marginBottom:"16px",opacity:.5}}),l.jsx("p",{style:{margin:0,fontSize:"14px"},children:"You haven't blocked any users"})]}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:o.map(v=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:s?"#334155":"#f8fafc",borderRadius:"12px",border:`1px solid ${s?"#475569":"#e2e8f0"}`},children:[l.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"50%",overflow:"hidden",flexShrink:0},children:v.avatarUrl?l.jsx("img",{src:At(v.avatarUrl),alt:v.username,style:{width:"100%",height:"100%",objectFit:"cover"}}):l.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#6366f1",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600,fontSize:"16px"},children:Tn(v.username)})}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:s?"#f1f5f9":"#1e293b",marginBottom:"2px"},children:v.username}),l.jsxs("div",{style:{fontSize:"12px",color:s?"#94a3b8":"#64748b"},children:["Blocked ",new Date(v.blockedAt).toLocaleDateString()]})]}),l.jsxs("button",{onClick:()=>y(v),disabled:h===v.userId,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",backgroundColor:s?"#475569":"#e2e8f0",color:s?"#f1f5f9":"#1e293b",border:"none",borderRadius:"8px",cursor:h===v.userId?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,opacity:h===v.userId?.6:1,transition:"all 0.2s"},onMouseEnter:_=>{h!==v.userId&&(_.currentTarget.style.backgroundColor="#10b981",_.currentTarget.style.color="white")},onMouseLeave:_=>{h!==v.userId&&(_.currentTarget.style.backgroundColor=s?"#475569":"#e2e8f0",_.currentTarget.style.color=s?"#f1f5f9":"#1e293b")},children:[l.jsx(xw,{size:14}),h===v.userId?"Unblocking...":"Unblock"]})]},v.userId))})}),l.jsx("div",{style:{padding:"16px 24px",borderTop:`1px solid ${s?"#334155":"#e2e8f0"}`,display:"flex",justifyContent:"flex-end"},children:l.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:s?"#334155":"#e2e8f0",color:s?"#f1f5f9":"#1e293b",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,transition:"background-color 0.2s"},onMouseEnter:v=>{v.currentTarget.style.backgroundColor=s?"#475569":"#cbd5e1"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor=s?"#334155":"#e2e8f0"},children:"Close"})})]})]}):null},GD=t=>{if(!t||t==="undefined"||t==="null")return"?";const n=String(t).trim();if(!n||n.length===0)return"?";const s=n.split(/\s+/).filter(o=>o.length>0);return s.length===0?"?":s.length===1?s[0][0]?.toUpperCase()||"?":s.map(o=>o[0]).join("").toUpperCase().slice(0,2)||"?"},Wc=({src:t,name:n,fallbackClass:s})=>{const[o,c]=Oa.useState(!t),[u,f]=Oa.useState(!1);Oa.useEffect(()=>{t?(c(!1),f(!1)):c(!0)},[t]);const h=()=>{f(!0),c(!0)};return o||u||!t?l.jsx("div",{className:s,children:GD(n)}):l.jsx("img",{src:t,alt:n,className:s,onError:h,loading:"lazy"})},YD=t=>{if(!t)return"Unknown";try{const n=new Date(t);if(isNaN(n.getTime()))return console.warn("Invalid date string:",t),"Invalid date";const s=new Date,o=new Date(s.getFullYear(),s.getMonth(),s.getDate()),c=new Date(o);c.setDate(c.getDate()-1);const u=new Date(n.getFullYear(),n.getMonth(),n.getDate());return u.getTime()===o.getTime()?n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):u.getTime()===c.getTime()?"Yesterday":s.getTime()-n.getTime()<10080*60*1e3?n.toLocaleString("en-US",{weekday:"short"}):n.toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch(n){return console.error("Error formatting time:",n,t),"Invalid date"}},WD=(t,n)=>{if(!t.lastMessage)return{preview:"No messages yet",isReply:!1,hasMention:!1,hasAttachment:!1,isOwnMessage:!1,isSeen:!1};const s=t.lastMessage,o=s.content||"",c=!!s.replyId,u=!!s.fileUrl,f=n?s.senderId===n:!1,h=s.isSeen===!0,m=n?/@\w+/.test(o):!1;let g=o;if(!o&&u&&(g=" Attachment"),t.type!=="dm"&&s.senderUsername){const v=`${s.senderUsername||"Unknown"}: ${g}`;return{preview:v.length>40?v.substring(0,37)+"...":v,isReply:c,hasMention:m,hasAttachment:u,isOwnMessage:f,isSeen:h}}return{preview:g.length>40?g.substring(0,37)+"...":g,isReply:c,hasMention:m,hasAttachment:u,isOwnMessage:f,isSeen:h}},XD=({chats:t,currentChat:n,onSelectChat:s,isLoadingChats:o,user:c,onLogout:u,onMenuOpen:f,searchQuery:h,onSearchChange:m,searchResults:g,onSelectSearchResult:y,isSearching:v,isDarkMode:_,onClearSearch:C,isMobileOpen:w=!1,onMobileClose:A,onlineUsers:M})=>{const B=E=>{if(E.type!=="dm")return!1;if(M&&E.members){const U=E.members.find(H=>H.userId!==c?.id);if(U?.userId&&M.has(U.userId))return M.get(U.userId)||!1}return E.isOnline||!1},P=b.useRef(null);return b.useEffect(()=>{const E=U=>{P.current&&!P.current.contains(U.target)&&C()};return h&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[h,C]),l.jsxs(l.Fragment,{children:[w&&l.jsx("div",{className:N.mobileOverlay,onClick:A,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99,display:"none"}}),l.jsxs("div",{className:`${N.leftPanel} ${_?N.darkMode:""} ${w?N.mobileOpen:""}`,children:[l.jsx("div",{className:N.panelHeader,children:l.jsx("button",{className:N.menuButton,onClick:f,title:"Settings",style:{background:"transparent",border:"none",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:_?"#94a3b8":"#64748b",transition:"background 0.15s ease, color 0.15s ease"},onMouseEnter:E=>{E.currentTarget.style.background=_?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",E.currentTarget.style.color=_?"#f1f5f9":"#1e293b"},onMouseLeave:E=>{E.currentTarget.style.background="transparent",E.currentTarget.style.color=_?"#94a3b8":"#64748b"},children:l.jsx(Bb,{size:22})})}),l.jsxs("div",{className:N.searchBar,ref:P,children:[l.jsx("input",{type:"text",placeholder:"Search chats, users...",className:N.searchInput,value:h,onChange:E=>m(E.target.value)}),h&&l.jsxs("div",{className:`${N.searchResults} ${_?N.darkMode:""}`,onClick:E=>E.stopPropagation(),children:[v&&l.jsx("div",{className:N.searchLoading,children:"Searching..."}),!v&&g.length===0&&l.jsx("div",{className:N.searchNoResults,children:"No results found"}),g.map(E=>l.jsxs("div",{className:N.searchResultItem,onClick:()=>{y(E),C()},children:[l.jsx("div",{className:N.searchResultAvatar,children:l.jsx(Wc,{src:E.avatar,name:E.name,fallbackClass:N.avatarFallback})}),l.jsxs("div",{className:N.searchResultInfo,children:[l.jsxs("div",{className:N.searchResultName,children:[E.name,l.jsx("span",{className:N.searchResultTypeIcon,title:E.type,children:E.type==="user"?" ":E.type==="group"?" ":E.type==="channel"?" ":""})]}),l.jsx("div",{className:N.searchResultType,children:E.type==="user"?"User":E.type==="group"?"Group":E.type==="channel"?"Channel":"Unknown"})]})]},E.id))]})]}),l.jsxs("div",{className:N.chatList,children:[o&&l.jsx("div",{className:N.loading,children:"Loading chats..."}),!o&&t.length===0&&l.jsx("div",{className:N.emptyState,children:"No chats yet. Start a conversation!"}),t.map(E=>l.jsxs("div",{className:`${N.chatItem} ${n?.id===E.id?N.active:""}`,onClick:()=>s(E),children:[l.jsxs("div",{className:N.chatAvatar,children:[l.jsx(Wc,{src:E.avatar,name:E.name,fallbackClass:N.avatarFallback}),E.type==="dm"&&B(E)&&l.jsx("div",{className:N.onlineIndicator})]}),l.jsxs("div",{className:N.chatInfo,children:[l.jsxs("div",{className:N.chatHeader,children:[l.jsxs("div",{className:N.chatNameWithType,children:[l.jsx("span",{className:N.chatName,children:E.name}),l.jsx("span",{className:`${N.chatTypeIcon} ${N[`icon${E.type.charAt(0).toUpperCase()+E.type.slice(1)}`]}`,title:E.type,children:E.type==="dm"?"":E.type==="group"?"":E.type==="channel"?"":""})]}),l.jsxs("div",{className:N.headerRight,children:[l.jsx("span",{className:N.timestamp,children:YD(E.updatedAt)}),E.unreadCount>0&&l.jsx("span",{className:N.unreadBadge,children:E.unreadCount})]})]}),l.jsx("div",{className:N.chatPreview,children:(()=>{const U=WD(E,c?.id);return l.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[l.jsx("span",{style:{fontSize:"10px",color:U.isSeen?"#51cf66":"var(--text-secondary)",fontWeight:500,flexShrink:0,opacity:U.isSeen?1:.7},title:U.isSeen?"Seen":"Sent",children:U.isSeen?"":""}),U.isReply&&l.jsx("span",{style:{fontSize:"10px",opacity:.8,flexShrink:0},title:"Reply",children:""}),U.hasMention&&l.jsx("span",{style:{fontSize:"9px",backgroundColor:"var(--accent)",color:"#fff",padding:"1px 4px",borderRadius:"4px",fontWeight:600,flexShrink:0},title:"Mention",children:"@"}),l.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:U.preview})]})})()})]})]},E.id))]}),c&&l.jsxs("div",{className:N.userSection,children:[l.jsx("div",{className:N.userAvatar,children:l.jsx(Wc,{src:c.avatar,name:c.username,fallbackClass:N.avatarFallback})}),l.jsx("div",{className:N.userInfo,children:l.jsx("div",{className:N.username,children:c.username})}),l.jsx("button",{className:N.logoutButton,onClick:u,title:"Logout",children:""})]})]})]})},_o={getNotifications:async()=>{try{console.log("[NotificationService] Fetching notifications from GET /notifications");const t=await Ee.get("/notifications");console.log("[NotificationService] Raw API Response:",{status:t.status,statusText:t.statusText,data:t.data});let n=[];t.data?.success&&t.data?.data?(n=t.data.data,console.log("[NotificationService] Got notifications from response.data.data:",n.length,"items")):t.data&&Array.isArray(t.data)?(n=t.data,console.log("[NotificationService] Response is direct array:",n.length,"items")):(console.log("[NotificationService] Unexpected response format:",t.data),n=[]);const s=Array.isArray(n)?n.map(o=>({id:o.notificationId||o.id,chatId:o.chatId,messageId:o.messageId,chatName:o.chatName||"",chatAvatar:o.chatAvatar||"",senderName:o.senderName||"",content:o.content||"",fileUrl:o.fileUrl,sentTime:o.sentTime||new Date().toISOString(),seen:o.seen!==void 0?o.seen:!1})):[];return console.log("[NotificationService] Returning",s.length,"normalized notifications"),s}catch(t){return console.error("[NotificationService] Failed to fetch notifications:",t.message),console.error("[NotificationService] Error details:",{status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,url:t.config?.url}),[]}},markAsSeen:async t=>{try{console.log("[NotificationService] Marking notification as seen:",t);const n=await Ee.put(`/notifications/seen?notificationId=${t}`);return console.log("[NotificationService] Mark as seen response:",n.data),n.data?.data||n.data}catch(n){throw console.error("[NotificationService] Failed to mark notification as seen:",n),console.error("[NotificationService] Error details:",{status:n.response?.status,statusText:n.response?.statusText,data:n.response?.data}),n}},markMultipleAsSeen:async t=>{try{if(!Array.isArray(t)||t.length===0)return console.warn("[NotificationService] No notification IDs provided"),{success:!0};console.log("[NotificationService] Marking multiple notifications as seen:",t),console.log("[NotificationService] Notification IDs (type, count):",typeof t[0],t.length);const n={notificationIds:t};console.log("[NotificationService] Request body:",JSON.stringify(n));const s=await Ee.put("/notifications/seen/batch",n);return console.log("[NotificationService] Mark multiple response:",{status:s.status,statusText:s.statusText,data:s.data}),s.data?.success||s.status===200?(console.log("[NotificationService] Successfully marked",t.length,"notifications as seen"),s.data||{success:!0}):(console.warn("[NotificationService] Response indicates potential issue:",s.data),s.data||{success:!0})}catch(n){throw console.error("[NotificationService] Failed to mark multiple notifications as seen:",n),console.error("[NotificationService] Full error details:",{message:n.message,status:n.response?.status,statusText:n.response?.statusText,responseData:n.response?.data,requestData:n.config?.data,headers:n.config?.headers}),n}},markAllAsSeen:async()=>{try{const t=await Ee.put("/notifications/seen/all");return t.data?.data||t.data}catch(t){throw console.warn("[NotificationService] PUT /notifications/seen/all may not be implemented:",t),t}}},ip=Object.freeze(Object.defineProperty({__proto__:null,notificationService:_o},Symbol.toStringTag,{value:"Module"})),KD="_container_yar5o_1",QD="_header_yar5o_8",ZD="_headerLeft_yar5o_24",JD="_pinIcon_yar5o_30",e4="_title_yar5o_34",t4="_count_yar5o_40",n4="_headerRight_yar5o_51",a4="_content_yar5o_57",s4="_loading_yar5o_63",i4="_spinner_yar5o_73",o4="_messagesList_yar5o_82",r4="_pinnedMessage_yar5o_87",l4="_messageAvatar_yar5o_105",c4="_avatarFallback_yar5o_119",u4="_messageContent_yar5o_131",d4="_messageHeader_yar5o_136",f4="_senderName_yar5o_143",p4="_messageTime_yar5o_149",h4="_messageText_yar5o_154",m4="_pinnedBy_yar5o_164",g4="_messageActions_yar5o_173",y4="_jumpButton_yar5o_180",v4="_unpinButton_yar5o_181",Ut={container:KD,header:QD,headerLeft:ZD,pinIcon:JD,title:e4,count:t4,headerRight:n4,content:a4,loading:s4,spinner:i4,messagesList:o4,pinnedMessage:r4,messageAvatar:l4,avatarFallback:c4,messageContent:u4,messageHeader:d4,senderName:f4,messageTime:p4,messageText:h4,pinnedBy:m4,messageActions:g4,jumpButton:y4,unpinButton:v4},x4=({chatId:t,onJumpToMessage:n,canUnpin:s})=>{const[o,c]=b.useState(!1),[u,f]=b.useState(null),{loadPinnedMessages:h,getPinnedMessages:m,unpinMessage:g,isLoadingPinned:y}=Oe(),v=m(t);b.useEffect(()=>{t&&h(t)},[t,h]);const _=async C=>{f(C);try{await g(C)}catch(w){console.error("Failed to unpin message:",w)}finally{f(null)}};return v.length===0?null:l.jsxs("div",{className:Ut.container,children:[l.jsxs("button",{className:Ut.header,onClick:()=>c(!o),children:[l.jsxs("div",{className:Ut.headerLeft,children:[l.jsx(qr,{size:16,className:Ut.pinIcon}),l.jsx("span",{className:Ut.title,children:"Pinned Messages"}),l.jsx("span",{className:Ut.count,children:v.length})]}),l.jsx("div",{className:Ut.headerRight,children:o?l.jsx(bw,{size:18}):l.jsx(lp,{size:18})})]}),o&&l.jsx("div",{className:Ut.content,children:y?l.jsxs("div",{className:Ut.loading,children:[l.jsx(ta,{size:20,className:Ut.spinner}),l.jsx("span",{children:"Loading pinned messages..."})]}):l.jsx("div",{className:Ut.messagesList,children:v.map(C=>l.jsxs("div",{className:Ut.pinnedMessage,children:[l.jsx("div",{className:Ut.messageAvatar,children:C.senderAvatarUrl?l.jsx("img",{src:At(C.senderAvatarUrl)||C.senderAvatarUrl,alt:C.senderUsername}):l.jsx("div",{className:Ut.avatarFallback,children:Tn(C.senderUsername)})}),l.jsxs("div",{className:Ut.messageContent,children:[l.jsxs("div",{className:Ut.messageHeader,children:[l.jsx("span",{className:Ut.senderName,children:C.senderUsername}),l.jsx("span",{className:Ut.messageTime,children:au(C.sentAt)})]}),l.jsx("div",{className:Ut.messageText,children:C.content||(C.fileUrl?"[File attachment]":"[Empty message]")}),C.pinnedByUsername&&l.jsxs("div",{className:Ut.pinnedBy,children:[l.jsx(qr,{size:12}),l.jsxs("span",{children:["Pinned by ",C.pinnedByUsername]})]})]}),l.jsxs("div",{className:Ut.messageActions,children:[l.jsx("button",{className:Ut.jumpButton,onClick:()=>n(C.messageId),title:"Jump to message",children:l.jsx(Ys,{size:16})}),s&&l.jsx("button",{className:Ut.unpinButton,onClick:()=>_(C.messageId),disabled:u===C.messageId,title:"Unpin message",children:u===C.messageId?l.jsx(ta,{size:16,className:Ut.spinner}):l.jsx("span",{style:{fontSize:"18px",fontWeight:300,lineHeight:1},children:""})})]})]},C.messageId))})})]})},b4=({isOpen:t,onClose:n,chatId:s,chatType:o,onMemberAdded:c})=>{const[u,f]=b.useState(""),[h,m]=b.useState([]),[g,y]=b.useState(!1),[v,_]=b.useState(!1),C=b.useRef(null),w=async M=>{if(f(M),!M.trim()){m([]);return}C.current&&clearTimeout(C.current),y(!0),C.current=setTimeout(async()=>{try{const P=await(await bt(()=>Promise.resolve().then(()=>Vn),void 0).then(E=>E.userService)).searchUsers(M);m(P)}catch(B){console.error("Search failed:",B),m([])}finally{y(!1)}},300)},A=async(M,B)=>{_(!0);try{o==="group"?await Me.addMemberToGroup(s,M):o==="channel"&&await Me.addMemberToChannel(s,M),se.success(`${B} has been added to the chat.`),await c(),n()}catch(P){console.error("Failed to add member:",P),se.error(Fe(P,"Failed to add member"))}finally{_(!1)}};return t?l.jsx("div",{className:N.modalOverlay,onClick:n,children:l.jsxs("div",{className:N.modal,onClick:M=>M.stopPropagation(),style:{maxWidth:"500px"},children:[l.jsxs("div",{className:N.modalHeader,children:[l.jsx("h2",{children:"Add Member"}),l.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),l.jsxs("div",{className:N.modalBody,children:[l.jsxs("div",{className:N.formGroup,children:[l.jsx("label",{children:"Search Users"}),l.jsx("input",{type:"text",placeholder:"Type username to search...",value:u,onChange:M=>w(M.target.value),className:N.formInput})]}),g&&l.jsx("div",{className:N.loadingState,children:"Searching..."}),h.length>0&&l.jsx("div",{style:{marginTop:"16px",maxHeight:"300px",overflowY:"auto"},children:h.map(M=>l.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px",borderRadius:"8px",backgroundColor:"var(--background)",marginBottom:"8px"},children:[l.jsx("div",{style:{marginRight:"10px"},children:M.avatar?l.jsx("img",{src:M.avatar,alt:M.username,style:{width:"32px",height:"32px",borderRadius:"50%"}}):l.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--accent)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"13px"},children:Tn(M.username)})}),l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:M.username}),l.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:M.email})]}),l.jsx("button",{onClick:()=>A(M.id,M.username),disabled:v,style:{padding:"6px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600},children:"Add"})]},M.id))}),u&&!g&&h.length===0&&l.jsx("div",{className:N.emptyState,children:"No users found"})]}),l.jsx("div",{className:N.modalFooter,children:l.jsx("button",{onClick:n,className:N.primaryButton,children:"Close"})})]})}):null},S4=({currentChat:t,messages:n,isLoadingMessages:s,onSendMessage:o,onOpenGroupCreate:c,onOpenChannelCreate:u,onOpenUserProfile:f,onOpenMobileSidebar:h,onOpenChatProfile:m})=>{const[g,y]=b.useState(""),[v,_]=b.useState(!1),[C,w]=b.useState(null),[A,M]=b.useState(""),[B,P]=b.useState(null),[E,U]=b.useState(!1),[H,ee]=b.useState(null),[re,Z]=b.useState(!1),[pe,ue]=b.useState(!1),[Be,Ze]=b.useState(!1),me=b.useRef(null),Re=b.useRef(null),He=b.useRef(null),[z,ae]=b.useState(null),le=b.useRef(null),{isUserOnline:Se,getUserLastSeen:ze,getOnlineMembersCount:ve,loadPermissions:Ne}=Oe(),{user:Ce}=Ct(),te=b.useRef(new Set),he=b.useRef(null),de=b.useRef(0),$t=b.useRef(n),jt=b.useRef(new Set),Ot=b.useRef(null),Xe=b.useRef(null);b.useEffect(()=>{$t.current=n},[n]),b.useEffect(()=>{if(!t||!Ce)return;const O=He.current;if(!O)return;te.current=new Set,jt.current=new Set;const G=async()=>{const Ue=Array.from(jt.current);if(Ue.length!==0){jt.current=new Set;try{await _o.markMultipleAsSeen(Ue)}catch(ot){console.error("[ChatView] Failed to mark notifications as seen:",ot)}}},ge=new IntersectionObserver(Ue=>{Ue.forEach(ot=>{if(ot.isIntersecting){const gt=ot.target.dataset.messageId;if(!gt||te.current.has(gt))return;const mt=$t.current.find(ma=>ma.messageId===gt);if(!mt)return;!mt.isCurrentUser&&mt.isNotificated&&mt.notificationId&&(te.current.add(gt),jt.current.add(mt.notificationId),Ot.current&&clearTimeout(Ot.current),Ot.current=setTimeout(G,500))}})},{root:O,rootMargin:"0px",threshold:.5});return Xe.current=ge,O.querySelectorAll("[data-message-id]").forEach(Ue=>ge.observe(Ue)),()=>{ge.disconnect(),Xe.current=null,Ot.current&&clearTimeout(Ot.current)}},[t?.id,Ce]),b.useEffect(()=>{const O=He.current;if(!O||!Xe.current)return;O.querySelectorAll("[data-message-id]").forEach(ge=>{const Te=ge.dataset.messageId;Te&&!te.current.has(Te)&&Xe.current?.observe(ge)})},[n.length]);const{canSendMessage:qt,canPinMessages:Mt,canManageMessages:Dt,isLoading:Bt}=bu(t?.id);b.useEffect(()=>{console.log("[ChatView] Permission useEffect triggered:",{hasChatId:!!t?.id,chatType:t?.type,hasLoadPermissions:typeof Ne=="function"}),t&&(t.type==="group"||t.type==="channel")&&(console.log("[ChatView] Calling loadPermissions for chat:",t.id),Ne(t.id))},[t?.id,Ne]),b.useEffect(()=>{(async()=>{if(console.log("[ChatView] checkBlockStatus called:",{hasCurrent:!!t,type:t?.type,hasUser:!!Ce,members:t?.members?.map(ge=>({id:ge.id,odUserId:ge.userId}))}),!t||t.type!=="dm"||!Ce){Z(!1),ue(!1);return}const G=t.members?.find(ge=>(ge.userId||ge.id)!==Ce.id);if(console.log("[ChatView] otherMember found:",G,"using userId:",G?.userId,"or id:",G?.id),!G){Z(!1),ue(!1);return}Ze(!0);try{const{userService:ge}=await bt(async()=>{const{userService:gt}=await Promise.resolve().then(()=>Vn);return{userService:gt}},void 0),Te=G.userId||G.id;console.log("[ChatView] Checking mutual block status for user:",Te);const{iBlockedThem:Ue,theyBlockedMe:ot}=await ge.getMutualBlockStatus(Te);console.log("[ChatView] Block status result:",{iBlockedThem:Ue,theyBlockedMe:ot}),ue(Ue),Z(ot)}catch(ge){console.error("Failed to check block status:",ge)}finally{Ze(!1)}})()},[t?.id,t?.type,t?.members,Ce?.id]);const{usersYouBlocked:Gt,blockedByUsers:Et}=Oe();b.useEffect(()=>{if(!t||t.type!=="dm"||!Ce)return;const O=t.members?.find(Ue=>(Ue.userId||Ue.id)!==Ce.id);if(!O)return;const G=O.userId||O.id;if(!G)return;const ge=Gt.has(G),Te=Et.has(G);console.log("[ChatView] Store block status changed:",{otherUserId:G,iBlockedInStore:ge,blockedByInStore:Te,currentDidIBlock:pe,currentIsBlocked:re}),ge!==pe&&ue(ge),Te!==re&&Z(Te)},[t?.id,t?.type,t?.members,Ce?.id,Gt,Et]);const Qt=O=>O.type!=="dm"||!O.members||!Ce?null:O.members.find(ge=>ge.userId!==Ce.id)?.userId||null,Zt=()=>{me.current?.scrollIntoView({behavior:"smooth"})},Lt=()=>{const O=He.current;if(!O)return;const G=O.scrollHeight,ge=O.scrollTop,Te=O.clientHeight,Ue=G-ge-Te<100;U(!Ue)};b.useEffect(()=>{const O=t?.id!==he.current,G=n.length>de.current;he.current=t?.id||null,de.current=n.length,(O||G)&&(Zt(),U(!1))},[n,t?.id]);const ft=async()=>{if(console.log("[ChatView] handleSendMessage called",{messageText:g,selectedFile:z?{name:z.name,size:z.size,type:z.type}:null,currentChat:t?.id}),!g.trim()&&!z||!t){console.log("[ChatView] Early return - no content or no chat");return}_(!0);try{console.log("[ChatView] Calling onSendMessage with file:",z?z.name:"none","replyId:",H?.messageId),await o(g,z||void 0,H?.messageId),console.log("[ChatView] onSendMessage completed"),y(""),ae(null),ee(null),le.current&&(le.current.value="")}catch(O){console.error("[ChatView] Failed to send message:",O),gj(O)?(yj(O)?Z(!0):ue(!0),se.error(vj(O))):se.error(Fe(O,"Failed to send message"))}finally{_(!1)}},mn=async(O,G)=>{try{const{messageService:ge}=await bt(async()=>{const{messageService:Ue}=await Promise.resolve().then(()=>Gc);return{messageService:Ue}},void 0);await ge.toggleReactionByEmoji(O,G);const Te=Oe.getState();t&&await Te.loadMessages(t.id)}catch(ge){console.error("Failed to toggle reaction:",ge),se.error("Failed to add reaction")}},an=(O,G,ge)=>{O.preventDefault(),O.stopPropagation(),P({messageId:G,x:O.clientX,y:O.clientY})},rt=async O=>{try{await Oe.getState().pinMessage(O),P(null),se.success("Message pinned")}catch(G){console.error("Failed to pin message:",G),se.error(Fe(G,"Failed to pin message"))}},ie=async O=>{try{await Oe.getState().unpinMessage(O),P(null),se.success("Message unpinned")}catch(G){console.error("Failed to unpin message:",G),se.error(Fe(G,"Failed to unpin message"))}},xe=O=>{const G=document.querySelector(`[data-message-id="${O}"]`);G&&(G.scrollIntoView({behavior:"smooth",block:"center"}),G.classList.add("message-highlight"),setTimeout(()=>G.classList.remove("message-highlight"),2e3))},Qe=O=>{const G=n.find(ge=>ge.messageId===O);G&&(w(O),M(G.content),P(null))},$e=async O=>{if(A.trim())try{await(await bt(()=>Promise.resolve().then(()=>Gc),void 0).then(Te=>Te.messageService)).editMessage(O,A),w(null),M("");const ge=Oe.getState();t&&await ge.loadMessages(t.id)}catch(G){console.error("Failed to edit message:",G)}},X=()=>{w(null),M("")},lt=async O=>{if(await vn({title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))try{await(await bt(()=>Promise.resolve().then(()=>Gc),void 0).then(Ue=>Ue.messageService)).deleteMessage(O),P(null);const Te=Oe.getState();t&&await Te.loadMessages(t.id),se.success("Message deleted")}catch(ge){console.error("Failed to delete message:",ge),se.error("Failed to delete message")}};return b.useEffect(()=>{const O=G=>{Re.current&&!Re.current.contains(G.target)&&P(null)};return B&&document.addEventListener("click",O),()=>{document.removeEventListener("click",O)}},[B]),t?l.jsxs("div",{className:N.mainContent,style:{position:"relative"},children:[l.jsxs("div",{className:N.chatHeaderBar,children:[l.jsxs("div",{className:N.headerLeft,children:[h&&l.jsx("button",{onClick:h,className:N.mobileMenuButton,style:{display:"none",padding:"8px",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"var(--text)",marginRight:"8px"},"aria-label":"Open menu",children:""}),l.jsx("div",{className:N.headerAvatar,children:l.jsx(Wc,{src:t.avatar,name:t.name,fallbackClass:N.avatarFallback})}),l.jsxs("div",{className:N.headerInfo,children:[l.jsxs("h2",{className:N.headerTitle,children:[t.name,l.jsx("span",{className:N.headerChatType,title:t.type,children:t.type==="dm"?" ":t.type==="group"?" ":t.type==="channel"?" ":" "})]}),l.jsx("div",{className:N.headerStatus,children:t.type==="dm"?(()=>{const O=Qt(t);if(O){const G=Se(O),ge=ze(O);return l.jsx(Fp,{isOnline:G,lastSeen:ge,size:"sm",showLabel:!0,position:"standalone"})}return l.jsx(Fp,{isOnline:t.isOnline||!1,size:"sm",showLabel:!0,position:"standalone"})})():(()=>{const O=ve(t.id),G=t.members?.length||t.participantsCount||0;return console.log("[ChatView] Member count debug:",{chatId:t.id,chatName:t.name,membersLength:t.members?.length,participantsCount:t.participantsCount,totalMembers:G,fullChat:t}),l.jsx("span",{children:G>0?l.jsxs(l.Fragment,{children:[G," member",G!==1?"s":"",O>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{margin:"0 4px",color:"var(--text-muted)"},children:""}),l.jsxs("span",{style:{color:"#51cf66",fontWeight:600},children:[O," online"]})]})]}):l.jsx("span",{style:{color:"var(--text-muted)"},children:"Members"})})})()})]})]}),l.jsx("div",{className:N.headerActions,children:t.type!=="dm"&&l.jsxs("button",{onClick:()=>{m&&m()},style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1))",border:"1px solid rgba(99, 102, 241, 0.3)",cursor:"pointer",padding:"8px 14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",borderRadius:"12px",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(99, 102, 241, 0.2)"},onMouseEnter:O=>{O.currentTarget.style.background="linear-gradient(135deg, rgba(99, 102, 241, 0.25), rgba(139, 92, 246, 0.2))",O.currentTarget.style.boxShadow="0 4px 16px rgba(99, 102, 241, 0.35)",O.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:O=>{O.currentTarget.style.background="linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1))",O.currentTarget.style.boxShadow="0 2px 8px rgba(99, 102, 241, 0.2)",O.currentTarget.style.transform="translateY(0)"},title:`View ${t.type==="channel"?"Channel":"Group"} Profile`,children:[t.type==="channel"?l.jsx(Sw,{size:16,color:"#818cf8"}):l.jsx(Hn,{size:16,color:"#818cf8"}),l.jsxs("span",{style:{fontSize:"13px",fontWeight:600,color:"#818cf8",letterSpacing:"0.3px"},children:[t.type==="channel"?"Channel":"Group"," Profile"]})]})})]}),l.jsx(x4,{chatId:t.id,onJumpToMessage:xe,canUnpin:Mt}),l.jsxs("div",{className:N.messagesContainer,ref:He,onScroll:Lt,children:[s&&l.jsx("div",{className:N.loading,children:"Loading messages..."}),!s&&(!n||n.length===0)&&l.jsx("div",{className:N.noMessages,children:"No messages yet. Start the conversation!"}),Array.isArray(n)&&n.map(O=>l.jsxs("div",{"data-message-id":O.messageId,className:`${N.messageGroup} ${O.isCurrentUser?N.ownMessage:N.otherMessage} ${O.isCurrentUser?"message-self-enter":"message-other-enter"} ${O.isPinned?"message-pinned":""}`,style:{position:"relative"},children:[!O.isCurrentUser&&l.jsx("div",{className:N.senderAvatar,onClick:()=>f(O.senderId),style:{cursor:"pointer"},children:O.senderAvatarUrl?l.jsx("img",{src:O.senderAvatarUrl,alt:O.senderUsername}):l.jsx("div",{className:N.avatarFallback,children:Tn(O.senderUsername)})}),C===O.messageId?l.jsxs("div",{className:N.messageBubble,style:{display:"flex",flexDirection:"column",gap:"8px"},children:[l.jsx("textarea",{value:A,onChange:G=>M(G.target.value),style:{padding:"12px 14px",borderRadius:"10px",border:"2px solid var(--accent)",backgroundColor:"var(--background)",color:"var(--text)",fontSize:"15px",fontFamily:"inherit",minHeight:"60px",resize:"vertical"}}),l.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l.jsx("button",{onClick:()=>$e(O.messageId),style:{padding:"6px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Save"}),l.jsx("button",{onClick:X,style:{padding:"6px 12px",backgroundColor:"var(--border)",color:"var(--text)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Cancel"})]})]}):l.jsxs("div",{className:N.messageBubble,onContextMenu:G=>an(G,O.messageId,O.isCurrentUser),style:{position:"relative"},children:[!O.isCurrentUser&&l.jsx("div",{className:N.senderName,children:O.senderUsername}),O.replyId&&(()=>{const G=n.find(Te=>Te.messageId===O.replyId),ge=G?G.content?.substring(0,40)||(G.fileUrl?" File":"..."):"Message deleted";return l.jsxs("div",{onClick:()=>G&&xe(O.replyId),style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 8px",marginBottom:"4px",fontSize:"11px",color:"var(--text-secondary)",backgroundColor:O.isCurrentUser?"rgba(0,0,0,0.15)":"rgba(255,255,255,0.08)",borderRadius:"4px",cursor:G?"pointer":"default",borderLeft:"2px solid var(--accent)"},children:[l.jsx("span",{style:{opacity:.7},children:""}),l.jsxs("span",{style:{fontWeight:600,color:"var(--accent)",fontSize:"10px"},children:[G?.senderUsername||"Unknown",":"]}),l.jsxs("span",{style:{opacity:.8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[ge,G?.content&&G.content.length>40?"...":""]})]})})(),l.jsx("div",{className:N.messageContent,children:O.content}),O.fileUrl&&(()=>{const G=At(O.fileUrl)||O.fileUrl;return l.jsx("div",{style:{marginTop:"8px"},children:/\.(jpg|jpeg|png|gif|webp|bmp|svg)$/i.test(G)?l.jsxs("a",{href:G,target:"_blank",rel:"noopener noreferrer",children:[l.jsx("img",{src:G,alt:"Attachment",style:{maxWidth:"300px",maxHeight:"200px",borderRadius:"8px",objectFit:"cover",cursor:"pointer"},onError:ge=>{ge.currentTarget.style.display="none";const Te=ge.currentTarget.nextElementSibling;Te&&(Te.style.display="flex")}}),l.jsx("div",{style:{display:"none",alignItems:"center",gap:"6px",padding:"8px 12px",background:"var(--background)",borderRadius:"8px",color:"var(--text-secondary)",fontSize:"13px"},children:" Image (click to view)"})]}):/\.(mp4|webm|ogg|mov)$/i.test(G)?l.jsx("video",{src:G,controls:!0,style:{maxWidth:"300px",maxHeight:"200px",borderRadius:"8px"}}):/\.(mp3|wav|ogg|m4a)$/i.test(G)?l.jsx("audio",{src:G,controls:!0,style:{maxWidth:"300px"}}):l.jsxs("a",{href:G,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 14px",background:"var(--background)",borderRadius:"8px",color:"var(--text)",textDecoration:"none",fontSize:"13px",transition:"background 0.15s ease"},onMouseEnter:ge=>ge.currentTarget.style.background="var(--border)",onMouseLeave:ge=>ge.currentTarget.style.background="var(--background)",children:[l.jsx("span",{style:{fontSize:"18px"},children:/\.pdf$/i.test(G)?"":/\.(doc|docx)$/i.test(G)?"":/\.(xls|xlsx)$/i.test(G)?"":/\.(zip|rar|7z)$/i.test(G)?"":""}),l.jsx("span",{children:G.split("/").pop()?.substring(37)||"Download file"})]})})})(),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",flexWrap:"wrap"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[l.jsx("span",{className:N.messageTime,children:au(O.sentAt)}),l.jsx("span",{style:{fontSize:"11px",color:O.isSeen?"#51cf66":"rgba(255,255,255,0.5)",fontWeight:500},title:O.isSeen?"Seen":"Sent",children:O.isSeen?"":""})]}),O.messageReactions&&O.messageReactions.length>0&&(()=>{const G=O.messageReactions.reduce((Te,Ue)=>{const ot=Ue.reactionType||Ue.type||"Like";return Te[ot]||(Te[ot]={count:0,users:[]}),Te[ot].count++,Te[ot].users.push(Ue.userName||Ue.userId),Te},{}),ge={Like:"",Love:"",Laugh:"",Sad:"",Angry:""};return l.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"2px",padding:"2px 6px",backgroundColor:"rgba(0,0,0,0.15)",borderRadius:"12px",fontSize:"12px"},children:Object.entries(G).map(([Te,Ue])=>l.jsxs("span",{onClick:()=>mn(O.messageId,ge[Te]||""),title:Ue.users.join(", "),style:{cursor:"pointer"},children:[ge[Te],Ue.count>1&&l.jsx("span",{style:{fontSize:"10px",marginLeft:"1px"},children:Ue.count})]},Te))})})(),l.jsx("button",{onClick:G=>{G.stopPropagation(),P({messageId:O.messageId,x:G.clientX,y:G.clientY})},title:"Actions",style:{padding:"2px 6px",backgroundColor:"transparent",border:"1px solid var(--border)",borderRadius:"10px",cursor:"pointer",fontSize:"12px",opacity:.6,transition:"opacity 0.2s"},onMouseEnter:G=>G.currentTarget.style.opacity="1",onMouseLeave:G=>G.currentTarget.style.opacity="0.6",children:""})]})]}),B?.messageId===O.messageId&&l.jsxs("div",{ref:Re,style:{position:"fixed",top:Math.min(Math.max(B.y-20,10),window.innerHeight-180),left:Math.min(Math.max(B.x-70,10),window.innerWidth-150),backgroundColor:"var(--surface)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.15)",zIndex:1e3,width:"140px",padding:"4px"},children:[l.jsx("div",{style:{display:"flex",justifyContent:"space-around",padding:"4px 2px",borderBottom:"1px solid var(--border)",marginBottom:"2px"},children:["","","","",""].map(G=>l.jsx("button",{onClick:()=>{mn(O.messageId,G),P(null)},style:{padding:"2px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",lineHeight:1},onMouseEnter:ge=>{ge.currentTarget.style.backgroundColor="rgba(99, 102, 241, 0.2)"},onMouseLeave:ge=>{ge.currentTarget.style.backgroundColor="transparent"},children:G},G))}),l.jsxs("button",{onClick:()=>{ee(O),P(null)},style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:G=>G.currentTarget.style.background="var(--background)",onMouseLeave:G=>G.currentTarget.style.background="transparent",children:[l.jsx("span",{style:{fontSize:"14px"},children:""}),"Reply"]}),Mt&&l.jsxs("button",{onClick:()=>O.isPinned?ie(O.messageId):rt(O.messageId),style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:G=>G.currentTarget.style.background="var(--background)",onMouseLeave:G=>G.currentTarget.style.background="transparent",children:[l.jsx("span",{style:{fontSize:"14px"},children:""}),O.isPinned?"Unpin":"Pin"]}),(O.isCurrentUser||Dt)&&l.jsxs("button",{onClick:()=>Qe(O.messageId),style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:G=>G.currentTarget.style.background="var(--background)",onMouseLeave:G=>G.currentTarget.style.background="transparent",children:[l.jsx("span",{style:{fontSize:"14px"},children:""}),"Edit"]}),(O.isCurrentUser||Dt)&&l.jsxs("button",{onClick:()=>lt(O.messageId),style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"#ef4444",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:G=>G.currentTarget.style.background="rgba(239, 68, 68, 0.1)",onMouseLeave:G=>G.currentTarget.style.background="transparent",children:[l.jsx("span",{style:{fontSize:"14px"},children:""}),"Delete"]})]})]},O.messageId)),l.jsx("div",{ref:me})]}),E&&l.jsx("button",{onClick:Zt,title:"Scroll to bottom",style:{position:"absolute",bottom:"90px",right:"24px",width:"44px",height:"44px",borderRadius:"50%",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",color:"#fff",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.4)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:10},onMouseEnter:O=>{O.currentTarget.style.transform="translateY(-3px) scale(1.05)",O.currentTarget.style.boxShadow="0 8px 25px rgba(99, 102, 241, 0.5)"},onMouseLeave:O=>{O.currentTarget.style.transform="translateY(0) scale(1)",O.currentTarget.style.boxShadow="0 4px 15px rgba(99, 102, 241, 0.4)"},children:l.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"6 9 12 15 18 9"})})}),t.type==="dm"&&Be?l.jsx("div",{style:{padding:"16px 20px",textAlign:"center",color:"#94a3b8",backgroundColor:"rgba(30, 41, 59, 0.5)",borderTop:"1px solid rgba(99, 102, 241, 0.2)",fontSize:"14px"},children:"Loading..."}):t.type==="dm"&&re?l.jsxs("div",{style:{padding:"16px 20px",textAlign:"center",color:"#f87171",backgroundColor:"rgba(239, 68, 68, 0.1)",borderTop:"1px solid rgba(239, 68, 68, 0.3)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[l.jsx("span",{style:{fontSize:"18px"},children:""}),"This user has blocked you. You cannot send them messages."]}):t.type==="dm"&&pe?l.jsxs("div",{style:{padding:"16px 20px",textAlign:"center",color:"#f87171",backgroundColor:"rgba(239, 68, 68, 0.1)",borderTop:"1px solid rgba(239, 68, 68, 0.3)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[l.jsx("span",{style:{fontSize:"18px"},children:""}),"You have blocked this user. Unblock them to send messages."]}):t.type!=="dm"&&Bt?l.jsx("div",{style:{padding:"16px 20px",textAlign:"center",color:"#94a3b8",backgroundColor:"rgba(30, 41, 59, 0.5)",borderTop:"1px solid rgba(99, 102, 241, 0.2)",fontSize:"14px"},children:"Loading..."}):!qt&&t.type!=="dm"?l.jsxs("div",{style:{padding:"16px 20px",textAlign:"center",color:"#94a3b8",backgroundColor:"rgba(30, 41, 59, 0.8)",borderTop:"1px solid rgba(99, 102, 241, 0.2)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[l.jsx("span",{style:{fontSize:"18px"},children:""}),"You don't have permission to send messages in this chat"]}):l.jsxs("div",{className:N.messageInput,children:[H&&l.jsx("div",{style:{position:"absolute",bottom:"100%",left:0,right:0,padding:"10px 14px",backgroundColor:"var(--surface)",borderTop:"3px solid var(--accent)",borderRadius:"8px 8px 0 0",boxShadow:"0 -2px 10px rgba(0,0,0,0.1)"},children:l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"12px"},children:[l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[l.jsx("span",{style:{fontSize:"14px"},children:""}),l.jsxs("span",{style:{color:"var(--accent)",fontWeight:600,fontSize:"13px"},children:["Replying to ",H.senderUsername]})]}),l.jsxs("div",{style:{padding:"8px 10px",backgroundColor:"var(--background)",borderRadius:"6px",borderLeft:"3px solid var(--accent)"},children:[H.fileUrl&&l.jsx("div",{style:{marginBottom:"4px",fontSize:"12px",color:"var(--text-secondary)"},children:" Attachment"}),l.jsx("div",{style:{color:"var(--text)",fontSize:"13px",wordBreak:"break-word"},children:H.content?l.jsxs(l.Fragment,{children:[H.content.substring(0,100),H.content.length>100?"...":""]}):l.jsx("span",{style:{color:"var(--text-secondary)",fontStyle:"italic"},children:H.fileUrl?"File attachment":"No content"})})]})]}),l.jsx("button",{onClick:()=>ee(null),style:{padding:"6px",backgroundColor:"var(--background)",border:"none",borderRadius:"50%",cursor:"pointer",color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s"},onMouseEnter:O=>O.currentTarget.style.backgroundColor="var(--border)",onMouseLeave:O=>O.currentTarget.style.backgroundColor="var(--background)",title:"Cancel reply",children:""})]})}),l.jsx("input",{type:"text",placeholder:H?"Type your reply...":"Type a message...",value:g,onChange:O=>y(O.target.value),onKeyPress:O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),ft())},className:N.inputField,disabled:v}),l.jsx("input",{ref:le,type:"file",accept:"image/*,video/*,audio/*,application/pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar",style:{display:"none"},onChange:O=>{const G=O.target.files?.[0];console.log("[ChatView] File selected:",G?{name:G.name,size:G.size,type:G.type}:null),G&&ae(G)}}),l.jsx("button",{type:"button",className:N.attachButton,title:"Attach file",onClick:()=>{console.log("[ChatView] Attach button clicked, fileInputRef:",le.current),le.current?.click()},children:""}),z&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 12px",background:"var(--background)",borderRadius:"8px",border:"1px solid var(--border)",maxWidth:"200px"},children:[z.type.startsWith("image/")?l.jsx("img",{src:URL.createObjectURL(z),alt:"Preview",style:{width:"36px",height:"36px",borderRadius:"4px",objectFit:"cover"}}):l.jsx("span",{style:{fontSize:"24px"},children:z.type.includes("pdf")?"":z.type.includes("video")?"":""}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{style:{fontSize:"12px",fontWeight:500,color:"var(--text)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:z.name}),l.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)"},children:[(z.size/1024).toFixed(1)," KB"]})]}),l.jsx("button",{onClick:()=>{ae(null),le.current&&(le.current.value="")},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"var(--text-secondary)",padding:"2px",lineHeight:1},children:""})]}),l.jsx("button",{type:"button",onClick:ft,disabled:!g.trim()&&!z||v,className:N.sendButton,children:v?"...":""})]})]}):l.jsx("div",{className:N.mainContent,children:l.jsxs("div",{className:N.emptyScreen,children:[l.jsx("div",{className:N.emptyIcon,children:""}),l.jsx("h2",{children:"Select a chat to start messaging"}),l.jsx("p",{children:"Choose a conversation from the list or start a new one"}),l.jsxs("div",{className:N.emptyActions,children:[l.jsx("button",{className:N.actionButton,onClick:c,children:"Create Group"}),l.jsx("button",{className:N.actionButton,onClick:u,children:"Create Channel"})]})]})})},_4="_backdrop_r48nt_17",w4="_menu_r48nt_25",C4="_dark_r48nt_39",j4="_header_r48nt_45",T4="_title_r48nt_67",k4="_content_r48nt_114",A4="_section_r48nt_118",M4="_sectionHeader_r48nt_122",E4="_sectionItems_r48nt_139",R4="_menuItem_r48nt_145",N4="_itemIcon_r48nt_175",D4="_divider_r48nt_194",B4="_logoutBtn_r48nt_204",ea={backdrop:_4,menu:w4,dark:C4,header:j4,title:T4,content:k4,section:A4,sectionHeader:M4,sectionItems:E4,menuItem:R4,itemIcon:N4,divider:D4,logoutBtn:B4},z4=({isOpen:t,onClose:n,onCreateGroup:s,onCreateChannel:o,onCreateCustomReaction:c,onEditProfile:u,onShowNotifications:f,onShowAdminPanel:h,onShowBlockedUsers:m,isDarkMode:g,onToggleDarkMode:y,onLogout:v})=>{if(!t)return null;const _=[{title:"Create",items:[{icon:Hn,label:"New Group",onClick:s,color:"#3b82f6"},{icon:Br,label:"New Channel",onClick:o,color:"#8b5cf6"},{icon:_w,label:"Custom Reaction",onClick:c,color:"#f59e0b"}]},{title:"Account",items:[{icon:ww,label:"Edit Profile",onClick:u,color:"#10b981"},{icon:Mb,label:"Notifications",onClick:f,color:"#ef4444"},{icon:Co,label:"Blocked Users",onClick:m,color:"#dc2626"},{icon:ls,label:"Admin Panel",onClick:h,color:"#6366f1"}]},{title:"Preferences",items:[{icon:g?Cw:jw,label:g?"Light Mode":"Dark Mode",onClick:y,color:g?"#f59e0b":"#6366f1"}]}];return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:ea.backdrop,onClick:n}),l.jsxs("div",{className:`${ea.menu} ${g?ea.dark:""}`,children:[l.jsxs("div",{className:ea.header,children:[l.jsx("h3",{className:ea.title,children:"Settings"}),l.jsx("button",{onClick:n,style:{background:"none",border:"none",color:g?"#94a3b8":"#64748b",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(da,{size:22,strokeWidth:2.5})})]}),l.jsxs("div",{className:ea.content,children:[_.map(C=>l.jsxs("div",{className:ea.section,children:[l.jsx("div",{className:ea.sectionHeader,children:l.jsx("span",{children:C.title})}),l.jsx("div",{className:ea.sectionItems,children:C.items.map(w=>l.jsxs("button",{className:ea.menuItem,onClick:w.onClick,children:[l.jsx("div",{className:ea.itemIcon,style:{background:w.color},children:l.jsx(w.icon,{size:18,color:"white"})}),l.jsx("span",{children:w.label})]},w.label))})]},C.title)),l.jsx("div",{className:ea.divider}),l.jsxs("button",{className:ea.logoutBtn,onClick:v,children:[l.jsx(Gp,{size:18}),l.jsx("span",{children:"Sign Out"})]})]})]})]})},U4=({currentChat:t,onReloadChat:n,onViewUserProfile:s,onConversationDeleted:o})=>{const[c,u]=b.useState(!1),[f,h]=b.useState(!1),[m,g]=b.useState(null),[y,v]=b.useState(!1),[_,C]=b.useState(!1),[w,A]=b.useState(null),[M,B]=b.useState(!1),[P,E]=b.useState(!1),[U,H]=b.useState(!1),[ee,re]=b.useState(!1),{user:Z}=Ct(),{canAddUsers:pe,canManageChatInfo:ue,canManageBans:Be,canManageUsers:Ze}=bu(t?.id),Re=w?.members?.find(te=>te.userId===Z?.id)?.role==="admin";b.useEffect(()=>{(async()=>{if(t?.id){if(t.id.startsWith("temp_dm_")){const he=t.id.replace("temp_dm_","");console.log("[RightPanel] Temp DM chat, loading user profile for:",he),B(!0);try{const{userService:de}=await bt(async()=>{const{userService:jt}=await Promise.resolve().then(()=>Vn);return{userService:jt}},void 0),$t=await de.getUserProfile(he);A({id:t.id,name:$t.username,type:"dm",avatar:$t.avatar,members:[{userId:$t.id,user:$t,role:"member"}],participantsCount:2})}catch(de){console.error("[RightPanel] Failed to load user profile:",de),A(null)}finally{B(!1)}return}B(!0);try{const he=await Me.getChatProfile(t.id);console.log("[RightPanel] Chat profile loaded:",he),A(he)}catch(he){console.error("[RightPanel] Failed to load chat profile:",he),A(null)}finally{B(!1)}}})()},[t?.id]);const{usersYouBlocked:He,addBlockedUser:z,removeBlockedUser:ae}=Oe();b.useEffect(()=>{(async()=>{if(!t||t.type!=="dm"||!w?.members){E(!1);return}const he=w.members.find(de=>de.userId!==Z?.id);if(!he){E(!1);return}if(He.has(he.userId)){E(!0);return}try{const de=await yn.getBlockStatus(he.userId);E(de),de&&z(he.userId)}catch(de){console.error("[RightPanel] Failed to check block status:",de),E(!1)}})()},[t?.id,t?.type,w?.members,Z?.id]),b.useEffect(()=>{if(!t||t.type!=="dm"||!w?.members)return;const te=w.members.find(de=>de.userId!==Z?.id);if(!te)return;const he=He.has(te.userId);he!==P&&E(he)},[He,t?.id,w?.members,Z?.id]);const le=async()=>{if(!ve)return;const te=P?"unblock":"block";if(await vn({title:P?"Unblock User":"Block User",message:P?`Are you sure you want to unblock ${ve.username}? They will be able to message you again.`:`Are you sure you want to block ${ve.username}? They won't be able to send you messages.`,confirmText:P?"Unblock":"Block",cancelText:"Cancel",variant:P?"warning":"danger"})){H(!0);try{P?(await yn.unblockUser(ve.id),ae(ve.id),se.success(`${ve.username} has been unblocked`)):(await yn.blockUser(ve.id),z(ve.id),se.success(`${ve.username} has been blocked`)),E(!P)}catch(de){console.error(`Failed to ${te} user:`,de),se.error(Fe(de,`Failed to ${te} user`))}finally{H(!1)}}},Se=async()=>{if(!(!t||!await vn({title:"Delete Conversation",message:"Are you sure you want to delete this conversation? All messages will be permanently deleted.",confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))){re(!0);try{await Me.deleteConversation(t.id),se.success("Conversation deleted"),o?.()}catch(he){console.error("Failed to delete conversation:",he),se.error(Fe(he,"Failed to delete conversation"))}finally{re(!1)}}},ze=async()=>{if(!(!t||!ve||!await vn({title:"Delete & Block",message:`Are you sure you want to delete this conversation and block ${ve.username}? All messages will be deleted and they won't be able to message you.`,confirmText:"Delete & Block",cancelText:"Cancel",variant:"danger"}))){re(!0);try{await Me.deleteConversation(t.id),await yn.blockUser(ve.id),se.success(`Conversation deleted and ${ve.username} blocked`),o?.()}catch(he){console.error("Failed to delete and block:",he),se.error(Fe(he,"Failed to delete and block"))}finally{re(!1)}}};if(!t)return l.jsx("div",{className:N.rightPanel});const ve=t.type==="dm"&&w?.members?w.members.find(te=>te.userId!==Z?.id)?.user:null,Ne=async te=>{if(await vn({title:"Ban Member",message:`Are you sure you want to ban "${te.user.username}" from this chat? They won't be able to rejoin.`,confirmText:"Ban",cancelText:"Cancel",variant:"danger"}))try{await Me.banUser(t.id,te.userId),se.success(`${te.user.username} has been banned and removed from chat.`),await n()}catch(de){console.error("Failed to ban user:",de),se.error(Ir(de))}},Ce=async()=>{const te=t.privacy==="public"?"private":"public";if(await vn({title:"Change Privacy",message:`Change this chat to ${te}? ${te==="private"?"Only invited members will be able to join.":"Anyone will be able to find and join."}`,confirmText:"Change",cancelText:"Cancel",variant:"info"})){v(!0);try{await Me.updateChatPrivacy(t.id,te),se.success(`Chat privacy changed to ${te}.`),await n()}catch(de){console.error("Failed to update privacy:",de),se.error("Failed to update privacy. You may not have permission.")}finally{v(!1)}}};return l.jsxs("div",{className:N.rightPanel,children:[l.jsx("div",{className:N.panelHeader,children:l.jsx("h3",{children:"Chat Info"})}),l.jsx("div",{className:N.infoContent,children:t.type==="dm"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:N.infoSection,children:[l.jsx("div",{className:N.infoLabel,style:{color:"var(--text)",marginBottom:"12px",fontWeight:600},children:"Member"}),M?l.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"Loading profile..."}):ve?l.jsxs("div",{onClick:()=>s(ve.id),style:{padding:"16px",backgroundColor:"var(--background)",border:"2px solid var(--border)",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:te=>{te.currentTarget.style.borderColor="var(--accent)",te.currentTarget.style.transform="translateY(-2px)",te.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:te=>{te.currentTarget.style.borderColor="var(--border)",te.currentTarget.style.transform="translateY(0)",te.currentTarget.style.boxShadow="none"},title:"Click to view full profile",children:[l.jsx("div",{className:N.memberAvatar,children:ve.avatar||ve.avatarUrl?l.jsx("img",{src:At(ve.avatar||ve.avatarUrl),alt:ve.username,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"}}):l.jsx("div",{className:N.avatarFallback,style:{width:"50px",height:"50px",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--accent)",color:"#fff",borderRadius:"50%",fontWeight:600},children:Tn(ve.username)})}),l.jsxs("div",{style:{flex:1},children:[l.jsx("div",{style:{color:"var(--text)",fontWeight:700,fontSize:"16px",marginBottom:"4px"},children:ve.username}),ve.description&&l.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginBottom:"6px"},children:ve.description}),l.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"6px"},children:ve.isOnline?" Online":" Offline"}),l.jsx("div",{style:{fontSize:"12px",color:"var(--accent)",fontWeight:600},children:" Tap to view profile"})]})]}):l.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"No user information available"})]}),ve&&l.jsxs("div",{className:N.infoSection,style:{marginTop:"16px"},children:[l.jsx("div",{className:N.infoLabel,style:{color:"var(--text)",marginBottom:"12px",fontWeight:600},children:"Actions"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[l.jsx("button",{onClick:le,disabled:U||ee,style:{width:"100%",padding:"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:P?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:P?"#10b981":"#ef4444",border:`1px solid ${P?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"8px",cursor:U||ee?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,transition:"all 0.2s ease",opacity:U||ee?.6:1},onMouseEnter:te=>{!U&&!ee&&(te.currentTarget.style.backgroundColor=P?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)")},onMouseLeave:te=>{te.currentTarget.style.backgroundColor=P?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)"},children:P?l.jsxs(l.Fragment,{children:[l.jsx(Yp,{size:16}),U?"Unblocking...":"Unblock User"]}):l.jsxs(l.Fragment,{children:[l.jsx(La,{size:16}),U?"Blocking...":"Block User"]})}),l.jsxs("button",{onClick:Se,disabled:ee||U,style:{width:"100%",padding:"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",cursor:ee||U?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,transition:"all 0.2s ease",opacity:ee||U?.6:1},onMouseEnter:te=>{!ee&&!U&&(te.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.2)")},onMouseLeave:te=>{te.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.1)"},children:[l.jsx(Ci,{size:16}),ee?"Deleting...":"Delete Conversation"]}),!P&&l.jsxs("button",{onClick:ze,disabled:ee||U,style:{width:"100%",padding:"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"rgba(220, 38, 38, 0.1)",color:"#dc2626",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"8px",cursor:ee||U?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,transition:"all 0.2s ease",opacity:ee||U?.6:1},onMouseEnter:te=>{!ee&&!U&&(te.currentTarget.style.backgroundColor="rgba(220, 38, 38, 0.2)")},onMouseLeave:te=>{te.currentTarget.style.backgroundColor="rgba(220, 38, 38, 0.1)"},children:[l.jsx(Co,{size:16}),"Delete & Block"]})]})]})]}):l.jsxs(l.Fragment,{children:[(w?.name||w?.description)&&l.jsxs("div",{className:N.infoSection,children:[l.jsxs("div",{className:N.infoLabel,style:{color:"var(--text)",marginBottom:"8px",fontWeight:600},children:[t.type==="group"?"Group":"Channel"," Info"]}),l.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px",border:"1px solid var(--border)"},children:[l.jsx("div",{style:{color:"var(--text)",fontWeight:700,fontSize:"16px",marginBottom:"6px"},children:w.name||t.name}),w.description&&l.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",lineHeight:"1.5"},children:w.description}),l.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px",fontSize:"12px"},children:[l.jsxs("div",{style:{color:"var(--text-secondary)"},children:[" ",w.participantsCount||0," members"]}),l.jsxs("div",{style:{color:"var(--text-secondary)"},children:[" ",w.participantsOnline||0," online"]})]})]})]}),(Re||ue)&&l.jsxs("div",{className:N.infoSection,children:[l.jsx("div",{className:N.infoLabel,style:{color:"var(--text)"},children:"Privacy"}),l.jsx("button",{onClick:Ce,disabled:y,style:{padding:"8px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,width:"100%",marginTop:"4px"},children:y?"Changing...":`Current: ${t.privacy||"private"} (Click to toggle)`})]}),(Re||pe)&&l.jsx("div",{className:N.infoSection,children:l.jsx("button",{onClick:()=>u(!0),style:{padding:"10px 14px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:600,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:" Add Member"})}),l.jsxs("div",{className:N.infoSection,children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[l.jsxs("div",{className:N.infoLabel,style:{color:"var(--text)"},children:["Members (",w?.participants?.length||t.members?.length||0,")"]}),l.jsx("button",{onClick:()=>C(!_),style:{padding:"6px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600},children:_?" Hide":" Show"})]}),_&&l.jsx("div",{className:N.memberList,children:M?l.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"Loading members..."}):w?.members&&w.members.length>0?w.members.map(te=>{const he={id:te.id||te.userId,userId:te.userId||te.id,user:{id:te.user?.id||te.userId||te.id,username:te.user?.username||te.username,avatar:At(te.user?.avatar||te.user?.avatarUrl||te.avatarUrl),bio:te.user?.bio||te.user?.description||te.description},role:te.role||"member"};return l.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px",borderRadius:"10px",backgroundColor:"var(--background)",border:"1px solid var(--border)",marginBottom:"8px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:de=>{de.currentTarget.style.backgroundColor="var(--surface)",de.currentTarget.style.borderColor="var(--accent)"},onMouseLeave:de=>{de.currentTarget.style.backgroundColor="var(--background)",de.currentTarget.style.borderColor="var(--border)"},children:[l.jsx("div",{className:N.memberAvatar,style:{flexShrink:0,cursor:"pointer"},onClick:de=>{de.stopPropagation(),s(he.userId)},title:"View profile",children:he.user.avatar?l.jsx("img",{src:he.user.avatar,alt:he.user.username}):l.jsx("div",{className:N.avatarFallback,children:Tn(he.user.username)})}),l.jsxs("div",{className:N.memberInfo,style:{flex:1,minWidth:0,cursor:"pointer"},onClick:de=>{de.stopPropagation(),s(he.userId)},title:"View profile",children:[l.jsx("div",{className:N.memberName,style:{color:"var(--text)",fontWeight:600},children:he.user.username}),te.user?.isOnline!==void 0&&l.jsx("div",{className:N.memberRole,style:{color:"var(--text-secondary)",fontSize:"12px"},children:te.user.isOnline?" Online":" Offline"})]}),l.jsxs("div",{style:{display:"flex",gap:"4px",flexShrink:0},children:[(Re||Ze)&&he.role!=="admin"&&l.jsx("button",{onClick:de=>{de.stopPropagation(),g(he),h(!0)},title:"Manage Permissions",style:{padding:"6px 10px",backgroundColor:"#6366f1",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:de=>de.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:de=>de.currentTarget.style.backgroundColor="#6366f1",children:""}),(Re||Be)&&he.role!=="admin"&&l.jsx("button",{onClick:de=>{de.stopPropagation(),Ne(he)},title:"Ban User",style:{padding:"6px 10px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:de=>de.currentTarget.style.backgroundColor="#c82333",onMouseLeave:de=>de.currentTarget.style.backgroundColor="#dc3545",children:""})]})]},he.id)}):l.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"No members found"})})]}),t.description&&l.jsxs("div",{className:N.infoSection,children:[l.jsx("div",{className:N.infoLabel,style:{color:"var(--text)"},children:"Description"}),l.jsx("p",{style:{color:"var(--text-secondary)"},children:t.description})]})]})}),c&&l.jsx(b4,{isOpen:c,onClose:()=>u(!1),chatId:t.id,chatType:t.type,onMemberAdded:n}),f&&m&&l.jsx(eS,{isOpen:f,onClose:()=>{h(!1),g(null)},chatId:t.id,member:m,onPermissionsChanged:n})]})},I4=({isOpen:t,onClose:n,onCreate:s,isDarkMode:o=!1})=>{const[c,u]=b.useState(""),[f,h]=b.useState(null),[m,g]=b.useState(null),[y,v]=b.useState(!1),_=w=>{const A=w.target.files?.[0];if(A){h(A);const M=new FileReader;M.onloadend=()=>g(M.result),M.readAsDataURL(A)}},C=async()=>{if(c.trim()){v(!0);try{await s(c,f),u(""),h(null),g(null),n()}finally{v(!1)}}};return t?l.jsx("div",{className:`${N.modalOverlay} ${o?N.darkMode:""}`,onClick:n,children:l.jsxs("div",{className:N.modal,onClick:w=>w.stopPropagation(),children:[l.jsxs("div",{className:N.modalHeader,children:[l.jsx("h2",{children:"Create Custom Reaction"}),l.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),l.jsxs("div",{className:N.modalBody,children:[l.jsxs("div",{className:N.formGroup,children:[l.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Reaction Name *"}),l.jsx("input",{type:"text",placeholder:"e.g., happy, excited, custom-emoji",value:c,onChange:w=>u(w.target.value),className:N.formInput}),l.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:"This will be the emoji name (e.g., :happy:)"})]}),l.jsxs("div",{className:N.formGroup,children:[l.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Reaction Image (Optional)"}),l.jsx("input",{type:"file",accept:"image/*",onChange:_,className:N.formInput,style:{padding:"8px"}}),m&&l.jsx("div",{style:{marginTop:"12px",textAlign:"center"},children:l.jsx("img",{src:m,alt:"Preview",style:{width:"64px",height:"64px",objectFit:"contain",borderRadius:"8px",border:"2px solid var(--border)"}})})]})]}),l.jsxs("div",{className:N.modalFooter,children:[l.jsx("button",{onClick:n,className:N.secondaryButton,children:"Cancel"}),l.jsx("button",{onClick:C,disabled:!c.trim()||y,className:N.primaryButton,children:y?"Creating...":"Create"})]})]})}):null},kb=({isOpen:t,onClose:n,onCreate:s,isDarkMode:o=!1,isChannel:c=!1})=>{const[u,f]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState("private"),[v,_]=b.useState(null),[C,w]=b.useState(!1),A=B=>{_(B)},M=async()=>{if(u.trim()){w(!0);try{await s(u,h,g,v),f(""),m(""),y("private"),_(null),n()}finally{w(!1)}}};return t?l.jsx("div",{className:`${N.modalOverlay} ${o?N.darkMode:""}`,onClick:n,children:l.jsxs("div",{className:N.modal,onClick:B=>B.stopPropagation(),children:[l.jsxs("div",{className:N.modalHeader,children:[l.jsx("h2",{children:c?"Create Channel":"Create Group"}),l.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),l.jsxs("div",{className:N.modalBody,children:[l.jsxs("div",{className:N.formGroup,children:[l.jsxs("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:[c?"Channel":"Group"," Name *"]}),l.jsx("input",{type:"text",placeholder:`Enter ${c?"channel":"group"} name (1-40 characters)`,value:u,onChange:B=>f(B.target.value),maxLength:40,className:N.formInput}),l.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[u.length,"/40 characters"]})]}),l.jsx("div",{className:N.formGroup,children:l.jsx(zh,{onFileAccepted:A,label:`${c?"Channel":"Group"} Avatar (Optional)`,helperText:"Drag and drop an image, or click to browse"})}),l.jsxs("div",{className:N.formGroup,children:[l.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Description (Optional)"}),l.jsx("textarea",{placeholder:`Enter ${c?"channel":"group"} description (max 150 characters)`,value:h,onChange:B=>m(B.target.value),maxLength:150,className:N.formInput,rows:3}),l.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[h.length,"/150 characters"]})]}),l.jsxs("div",{className:N.formGroup,children:[l.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Privacy"}),l.jsxs("select",{value:g,onChange:B=>y(B.target.value),className:N.formInput,children:[l.jsx("option",{value:"private",children:"Private - Only invited members can join"}),l.jsx("option",{value:"public",children:"Public - Anyone can search and join"})]})]})]}),l.jsxs("div",{className:N.modalFooter,children:[l.jsx("button",{onClick:n,className:N.secondaryButton,children:"Cancel"}),l.jsx("button",{onClick:M,disabled:!u.trim()||C,className:N.primaryButton,children:C?"Creating...":"Create"})]})]})}):null},O4=({isOpen:t,onClose:n,chat:s,onUpdate:o,isDarkMode:c=!1,isChannel:u=!1})=>{const[f,h]=b.useState(""),[m,g]=b.useState(""),[y,v]=b.useState("private"),[_,C]=b.useState(null),[w,A]=b.useState(!1);b.useEffect(()=>{t&&s?(h(s.name||""),g(s.description||""),v(s.privacy||"private"),C(null)):t||(h(""),g(""),v("private"),C(null))},[t,s]);const M=P=>{C(P)},B=async()=>{if(!(!f.trim()||!s)){A(!0);try{await o(s.id,f,m,y,_),h(""),g(""),v("private"),C(null),n()}finally{A(!1)}}};return!t||!s?null:l.jsx("div",{className:`${N.modalOverlay} ${c?N.darkMode:""}`,onClick:n,children:l.jsxs("div",{className:N.modal,onClick:P=>P.stopPropagation(),children:[l.jsxs("div",{className:N.modalHeader,children:[l.jsx("h2",{children:u?"Edit Channel":"Edit Group"}),l.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),l.jsxs("div",{className:N.modalBody,children:[l.jsxs("div",{className:N.formGroup,children:[l.jsxs("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:[u?"Channel":"Group"," Name *"]}),l.jsx("input",{type:"text",placeholder:`Enter ${u?"channel":"group"} name (1-40 characters)`,value:f,onChange:P=>h(P.target.value),maxLength:40,className:N.formInput}),l.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[f.length,"/40 characters"]})]}),l.jsx("div",{className:N.formGroup,children:l.jsx(zh,{onFileAccepted:M,currentPreview:s.avatar,label:`${u?"Channel":"Group"} Avatar (Optional)`,helperText:"Drag and drop a new image to update, or click to browse"})}),l.jsxs("div",{className:N.formGroup,children:[l.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Description (Optional)"}),l.jsx("textarea",{placeholder:`Enter ${u?"channel":"group"} description (max 150 characters)`,value:m,onChange:P=>g(P.target.value),maxLength:150,className:N.formInput,rows:3}),l.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[m.length,"/150 characters"]})]}),l.jsxs("div",{className:N.formGroup,children:[l.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Privacy"}),l.jsxs("select",{value:y,onChange:P=>v(P.target.value),className:N.formInput,children:[l.jsx("option",{value:"private",children:"Private - Only invited members can join"}),l.jsx("option",{value:"public",children:"Public - Anyone can search and join"})]})]})]}),l.jsxs("div",{className:N.modalFooter,children:[l.jsx("button",{onClick:n,className:N.secondaryButton,children:"Cancel"}),l.jsx("button",{onClick:B,disabled:!f.trim()||w,className:N.primaryButton,children:w?"Updating...":"Update"})]})]})})},L4=({isOpen:t,onClose:n,user:s,onUpdate:o,isDarkMode:c=!1})=>{const[u,f]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState(""),[v,_]=b.useState("everyone"),[C,w]=b.useState(!1),[A,M]=b.useState(null),[B,P]=b.useState(null);b.useEffect(()=>{t&&s?(f(s.username||""),m(s.email||""),y(s.bio||""),_(s.addMePolicy||"everyone"),M(null),P(null)):t||(f(""),m(""),y(""),_("everyone"),M(null),P(null))},[t,s]);const E=H=>{M(H)},U=async()=>{w(!0);try{await o(u,h,g,v,A),n()}finally{w(!1)}};return!t||!s?null:l.jsx("div",{className:`${N.modalOverlay} ${c?N.darkMode:""}`,onClick:n,children:l.jsxs("div",{className:N.modal,onClick:H=>H.stopPropagation(),children:[l.jsxs("div",{className:N.modalHeader,children:[l.jsx("h2",{style:{color:"var(--text)"},children:"Edit Profile"}),l.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),l.jsxs("div",{className:N.modalBody,children:[l.jsx("div",{className:N.formGroup,children:l.jsx(zh,{onFileAccepted:E,currentPreview:s?.avatar||B,label:"Profile Avatar",helperText:"Drag and drop your profile picture, or click to browse"})}),l.jsxs("div",{className:N.formGroup,children:[l.jsx("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:"Username"}),l.jsx("input",{type:"text",value:u,onChange:H=>f(H.target.value),className:N.formInput,placeholder:"Enter your username"})]}),l.jsxs("div",{className:N.formGroup,children:[l.jsxs("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:["Email",l.jsx("span",{style:{fontSize:"12px",fontWeight:400,color:"var(--text-secondary)",marginLeft:"8px"},children:"(Read-only)"})]}),l.jsx("input",{type:"email",value:h,readOnly:!0,disabled:!0,className:N.formInput,placeholder:"Email cannot be changed",style:{backgroundColor:"var(--background)",cursor:"not-allowed",opacity:.7}})]}),l.jsxs("div",{className:N.formGroup,children:[l.jsx("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:"Bio/Description"}),l.jsx("textarea",{value:g,onChange:H=>y(H.target.value),className:N.formInput,rows:3,placeholder:"Tell us about yourself..."})]}),l.jsxs("div",{className:N.formGroup,children:[l.jsx("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:"Who can add you?"}),l.jsxs("select",{value:v,onChange:H=>_(H.target.value),className:N.formInput,children:[l.jsx("option",{value:"everyone",children:"Everyone"}),l.jsx("option",{value:"chatted",children:"Contacts Only"}),l.jsx("option",{value:"nobody",children:"Nobody"})]})]})]}),l.jsxs("div",{className:N.modalFooter,children:[l.jsx("button",{onClick:n,className:N.secondaryButton,children:"Cancel"}),l.jsx("button",{onClick:U,disabled:C,className:N.primaryButton,children:C?"Updating...":"Update Profile"})]})]},`profile-modal-${s.id}`)})},P4=({isOpen:t,onClose:n,isDarkMode:s=!1,onNavigateToChat:o})=>{const[c,u]=b.useState([]),[f,h]=b.useState(!1);b.useEffect(()=>{t&&m()},[t]);const m=async()=>{h(!0);try{const _=await(await bt(()=>Promise.resolve().then(()=>ip),void 0).then(w=>w.notificationService)).getNotifications();console.log("[Notifications] Loaded notifications:",_),Array.isArray(_)&&_.length>0&&console.log("[Notifications] First notification structure:",JSON.stringify(_[0],null,2));const C=Array.isArray(_)?_.map(w=>({id:w.id,chatId:w.chatId,title:`Message from ${w.senderName}`,message:w.content,type:"message",chatName:w.chatName,chatAvatar:w.chatAvatar,senderName:w.senderName,fileUrl:w.fileUrl,isRead:w.seen,createdAt:w.sentTime})):[];u(C)}catch(v){console.error("[Notifications] Failed to load notifications:",v),u([])}finally{h(!1)}},g=async(v,_)=>{try{await(await bt(()=>Promise.resolve().then(()=>ip),void 0).then(w=>w.notificationService)).markAsSeen(v),_&&o?(n(),o(_)):await m()}catch(C){console.error("Failed to handle notification click:",C)}},y=async()=>{try{await(await bt(()=>Promise.resolve().then(()=>ip),void 0).then(_=>_.notificationService)).markAllAsSeen(),await m()}catch(v){console.error("Failed to mark all notifications as seen:",v)}};return t?l.jsx("div",{className:`${N.modalOverlay} ${s?N.darkMode:""}`,onClick:n,children:l.jsxs("div",{className:N.modal,onClick:v=>v.stopPropagation(),children:[l.jsxs("div",{className:N.modalHeader,children:[l.jsx("h2",{children:"Notifications"}),l.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),l.jsx("div",{className:N.modalBody,style:{maxHeight:"60vh",overflowY:"auto"},children:f?l.jsx("div",{className:N.loadingState,children:"Loading notifications..."}):c.length===0?l.jsx("div",{className:N.emptyState,children:"No notifications yet"}):l.jsxs(l.Fragment,{children:[c.length>0&&l.jsx("button",{onClick:y,style:{padding:"8px 12px",backgroundColor:"var(--accent)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,marginBottom:"12px",position:"sticky",top:0,zIndex:1},children:"Mark All as Read"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:c.map(v=>l.jsxs("div",{onClick:()=>g(v.id,v.chatId),style:{padding:"14px",background:v.isRead?"rgba(99, 102, 241, 0.05)":"linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1))",border:v.isRead?"1px solid rgba(99, 102, 241, 0.1)":"1px solid rgba(99, 102, 241, 0.3)",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",gap:"12px",alignItems:"flex-start",boxShadow:v.isRead?"none":"0 2px 8px rgba(99, 102, 241, 0.15)",position:"relative",overflow:"hidden"},onMouseEnter:_=>{_.currentTarget.style.transform="translateX(4px)",_.currentTarget.style.boxShadow="0 4px 12px rgba(99, 102, 241, 0.2)"},onMouseLeave:_=>{_.currentTarget.style.transform="translateX(0)",_.currentTarget.style.boxShadow=v.isRead?"none":"0 2px 8px rgba(99, 102, 241, 0.15)"},children:[v.chatAvatar?l.jsx("img",{src:v.chatAvatar,alt:v.chatName,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",flexShrink:0}}):l.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600,fontSize:"14px",flexShrink:0},children:Tn(v.chatName)}),l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsx("div",{style:{fontWeight:600,marginBottom:"4px",color:"var(--text)"},children:v.chatName}),l.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"4px"},children:[l.jsxs("span",{style:{fontWeight:500,color:"var(--text)"},children:[v.senderName,":"]})," ",v.message&&v.message.trim()?v.message:v.fileUrl?l.jsx("span",{style:{fontStyle:"italic"},children:"Sent an attachment"}):l.jsx("span",{style:{fontStyle:"italic",opacity:.7},children:"No message content"})]}),v.fileUrl&&l.jsx("div",{style:{fontSize:"12px",color:"var(--accent)",marginBottom:"4px"},children:" Attachment"}),l.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:new Date(v.createdAt).toLocaleString()})]})]},v.id))})]})})]})}):null},H4=()=>{const{user:t,logout:n}=Ct(),{chats:s,currentChat:o,isLoadingChats:c,messages:u,setMessages:f,onlineUsers:h}=Oe(),{theme:m,toggleTheme:g}=eM(),y=I5(),[v,_]=b.useState(!1),[C,w]=b.useState(!1),[A,M]=b.useState(!1),[B,P]=b.useState(!1),[E,U]=b.useState(null),[H,ee]=b.useState(!1),[re,Z]=b.useState(!1),[pe,ue]=b.useState(!1),[Be,Ze]=b.useState(!1),[me,Re]=b.useState(!1),[He,z]=b.useState(!1),[ae,le]=b.useState(""),[Se,ze]=b.useState([]),[ve,Ne]=b.useState(!1),[Ce,te]=b.useState(!1),[he,de]=b.useState(null),[$t,jt]=b.useState(null),[Ot,Xe]=b.useState(!1),[qt,Mt]=b.useState(!1),[Dt,Bt]=b.useState(!1),[Gt,Et]=b.useState(null),[Qt,Zt]=b.useState(!1),Lt=b.useRef(null),ft=m==="dark",mn=b.useRef(null),an=b.useRef(null);b.useEffect(()=>{(async()=>{const oe=Oe.getState();s.length===0&&await oe.loadChats()})()},[s.length]);const rt=o?.id;b.useEffect(()=>{(async()=>{if(!rt||rt==="search"){console.log("[Dashboard] Clearing messages - no chat selected or search chat"),f([]),mn.current=null;return}if(rt.startsWith("temp_dm_")){console.log("[Dashboard] Temporary chat, skipping message load"),f([]),mn.current=rt;return}if(mn.current===rt){console.log("[Dashboard] Messages already loaded for chat:",rt);return}console.log("[Dashboard] ========== LOADING MESSAGES FOR CHAT =========="),console.log("[Dashboard] Chat ID:",rt),mn.current=rt,_(!0);try{console.log("[Dashboard] Fetching chat data from API...");const oe=await Me.getChat(rt);console.log("[Dashboard] API Response - Messages count:",oe.messages?.length||0),f(oe.messages||[]),y.isConnected&&(y.markMessagesAsSeen(rt),Oe.getState().resetUnreadCount(rt))}catch(oe){console.error("[Dashboard] Failed to load messages:",oe),f([])}finally{_(!1)}})()},[rt,y.isConnected]),b.useEffect(()=>{if(!rt||rt==="search"||rt.startsWith("temp_dm_"))return;if(an.current===rt){console.log("[Dashboard] Already joined chat room:",rt);return}return(async()=>{if(y.isConnected)try{an.current&&an.current!==rt&&(console.log("[Dashboard] Leaving previous chat room:",an.current),await y.leaveChat(an.current).catch(console.error)),console.log("[Dashboard] Joining SignalR chat room:",rt),await y.joinChat(rt),an.current=rt}catch(oe){console.error("[Dashboard] Failed to join chat room:",oe)}})(),()=>{an.current&&y.isConnected&&(console.log("[Dashboard] Cleanup - Leaving SignalR chat room:",an.current),y.leaveChat(an.current).catch(console.error),an.current=null)}},[rt,y.isConnected]);const ie=async ne=>{if(Oe.getState().setCurrentChat(ne),!ne.id.startsWith("temp_dm_")&&(ne.type==="group"||ne.type==="channel"||ne.type==="dm"))try{const ye=await Me.getChatProfile(ne.id);if(console.log("[Dashboard] Loaded full profile for",ne.type,":",ye.id,"members:",ye.members?.length),Oe.getState().setCurrentChat(ye),ye.members&&ye.members.length>0){const ke=ye.members.map(_e=>_e.userId||_e.id||_e.user?.id).filter(_e=>!!_e);if(ke.length>0)try{const{signalRService:_e}=await bt(async()=>{const{signalRService:Ve}=await Promise.resolve().then(()=>Ip);return{signalRService:Ve}},void 0),je=await _e.getPresenceStates(ke);console.log("[Dashboard] Fetched presence for chat members:",je),Oe.getState().setInitialPresenceStates(je)}catch(_e){console.error("[Dashboard] Failed to fetch presence states:",_e)}}}catch(ye){console.error("[Dashboard] Failed to load chat profile:",ye)}},xe=async()=>{await vn({title:"Sign Out",message:"Are you sure you want to sign out?",confirmText:"Sign Out",cancelText:"Cancel",variant:"warning"})&&n()},Qe=async(ne,oe,ye)=>{if(console.log("[Dashboard] handleSendChatMessage called",{content:ne,file:oe?{name:oe.name,size:oe.size,type:oe.type}:null,currentChatId:o?.id,userId:t?.id,replyId:ye}),!o||!o.id||o.id==="search"||!t){console.log("[Dashboard] Early return - missing chat or user");return}try{if(oe){console.log("[Dashboard] Sending message with file via REST API");const ke=new FormData;if(o.id.startsWith("temp_dm_")){const je=o.id.replace("temp_dm_","");ke.append("receiverId",je)}else if(ke.append("chatId",o.id),o.type==="dm"){const je=o.members?.find(Ve=>Ve.userId!==t.id)?.userId;je&&ke.append("receiverId",je)}ke.append("content",ne),ke.append("file",oe),ye&&ke.append("replyId",ye),await(await bt(()=>Promise.resolve().then(()=>Gc),void 0).then(je=>je.messageService)).sendMessage(ke)}else{console.log("[Dashboard] Sending text message via SignalR");let ke=null,_e=null;o.id.startsWith("temp_dm_")?_e=o.id.replace("temp_dm_",""):(ke=o.id,o.type==="dm"&&(_e=o.members?.find(je=>je.userId!==t.id)?.userId||null)),await y.sendMessage(ke,ne,_e,ye||null)}if(console.log("[Dashboard] Message sent successfully"),o.id.startsWith("temp_dm_")){console.log("[Dashboard] Reloading chats after sending to temp chat");const ke=Oe.getState(),_e=o.id.replace("temp_dm_","");let je;const Ve=o.name;for(let fe=0;fe<3;fe++){if(await new Promise(qe=>setTimeout(qe,500)),await ke.loadChats(),je=Oe.getState().chats.find(qe=>qe.type!=="dm"?!1:qe.members&&qe.members.length>0?qe.members.some(ct=>ct.userId===_e||ct.id===_e||ct.user?.id===_e||ct.user?.userId===_e):!!(Ve&&qe.name===Ve)),je){console.log(`[Dashboard] Found newly created real DM on attempt ${fe+1}:`,je.id);break}console.log(`[Dashboard] Real DM not found on attempt ${fe+1}, retrying...`)}if(je){mn.current=je.id,ke.setCurrentChat(je);const fe=await Me.getChat(je.id);f(fe.messages||[])}else console.error("[Dashboard] Failed to find newly created DM after retries"),se.error("Message sent, but failed to load conversation. Please refresh.")}else{const ke=await Me.getChat(o.id);f(ke.messages||[])}}catch(ke){console.error("Failed to send message:",ke),pp(ke)?se.error(Ir(ke)):se.error(Fe(ke,"Failed to send message"))}},$e=async(ne,oe,ye,ke)=>{try{const _e=new FormData;_e.append("name",ne),oe&&_e.append("description",oe),_e.append("privacyType",ye==="public"?"0":"1"),ke&&_e.append("file",ke),await Me.createGroup(_e),se.success("Group created successfully!"),await Oe.getState().loadChats()}catch(_e){throw console.error("Failed to create group:",_e),se.error(Fe(_e,"Failed to create group")),_e}},X=async(ne,oe,ye,ke)=>{try{const _e=new FormData;_e.append("name",ne),oe&&_e.append("description",oe),_e.append("privacyType",ye==="public"?"0":"1"),ke&&_e.append("file",ke),await Me.createChannel(_e),se.success("Channel created successfully!"),await Oe.getState().loadChats()}catch(_e){throw console.error("Failed to create channel:",_e),se.error(Fe(_e,"Failed to create channel")),_e}},lt=async(ne,oe,ye,ke,_e)=>{try{const je=new FormData;je.append("chatId",ne),je.append("name",oe),ye&&je.append("description",ye),je.append("privacyType",ke==="public"?"0":"1"),_e&&je.append("file",_e);const Ve=E?.type==="channel"?"channel":"group";await Me.updateChat(ne,Ve,je),se.success("Group/Channel updated successfully!"),await Oe.getState().loadChats()}catch(je){throw console.error("Failed to update group/channel:",je),se.error(Fe(je,"Failed to update group/channel")),je}},O=async ne=>{if(o)try{await Me.banUser(o.id,ne),se.success("User banned and removed from chat");const oe=await Me.getChatProfile(o.id);Oe.getState().setCurrentChat(oe)}catch(oe){console.error("Failed to ban user:",oe),se.error(Ir(oe))}},G=async ne=>{if(o)try{await Me.unbanUser(o.id,ne),se.success("User unbanned successfully");const oe=await Me.getChatProfile(o.id);Oe.getState().setCurrentChat(oe)}catch(oe){console.error("Failed to unban user:",oe),se.error(Ir(oe))}},ge=async ne=>{if(o)try{o.type==="group"?await Me.removeMemberFromGroup(o.id,ne):o.type==="channel"&&await Me.removeMemberFromChannel(o.id,ne),se.success("Member removed successfully");const oe=await Me.getChatProfile(o.id);Oe.getState().setCurrentChat(oe)}catch(oe){console.error("Failed to remove member:",oe),se.error(Fe(oe,"Failed to remove member"))}},Te=async ne=>{if(o)try{await Me.updateChatPrivacy(o.id,ne),se.success(`Privacy updated to ${ne}`);const oe=await Me.getChatProfile(o.id);Oe.getState().setCurrentChat(oe)}catch(oe){console.error("Failed to update privacy:",oe),se.error(Fe(oe,"Failed to update privacy"))}},Ue=async()=>{if(!(!o||!await vn({title:`Leave ${o.type==="channel"?"Channel":"Group"}`,message:`Are you sure you want to leave this ${o.type}? You will lose access to all messages and content.`,confirmText:"Leave",cancelText:"Stay",variant:"warning"})))try{await Me.leaveChat(o.id,o.type),se.success(`Left ${o.type} successfully`),await Oe.getState().loadChats(),Oe.getState().setCurrentChat(null),Mt(!1)}catch(oe){console.error("Failed to leave chat:",oe),se.error(Fe(oe,"Failed to leave"))}},ot=async()=>{if(o)try{await Me.deleteChat(o.id,o.type),se.success(`${o.type==="group"?"Group":"Channel"} deleted successfully`),await Oe.getState().loadChats(),Oe.getState().setCurrentChat(null),Mt(!1)}catch(ne){console.error("Failed to delete chat:",ne),se.error(Fe(ne,`Failed to delete ${o.type}`))}},gt=async ne=>{try{await(await bt(()=>Promise.resolve().then(()=>Vn),void 0).then(ye=>ye.userService)).blockUser(ne),Oe.getState().addBlockedUser(ne),se.success("User blocked successfully")}catch(oe){console.error("Failed to block user:",oe),se.error(Fe(oe,"Failed to block user"))}},mt=async ne=>{try{await(await bt(()=>Promise.resolve().then(()=>Vn),void 0).then(ye=>ye.userService)).unblockUser(ne),Oe.getState().removeBlockedUser(ne),se.success("User unblocked successfully")}catch(oe){console.error("Failed to unblock user:",oe),se.error(Fe(oe,"Failed to unblock user"))}},ma=async(ne,oe)=>{try{const ye=new FormData;ye.append("Name",ne),oe&&ye.append("file",oe);const{reactionService:ke}=await bt(async()=>{const{reactionService:_e}=await import("./reaction.service-Cz3kUL1F.js");return{reactionService:_e}},__vite__mapDeps([3,1,2]));await ke.createReaction(ye),se.success("Custom reaction created successfully!")}catch(ye){throw console.error("Failed to create custom reaction:",ye),se.error(Fe(ye,"Failed to create custom reaction")),ye}},ds=async(ne,oe,ye,ke,_e)=>{try{const je=new FormData;ne&&je.append("username",ne),je.append("description",ye||"");let Ve="0";ke==="chatted"?Ve="1":ke==="nobody"&&(Ve="2"),je.append("addChatMinLvl",Ve),_e&&je.append("file",_e);const it=await(await bt(()=>Promise.resolve().then(()=>Vn),void 0).then(ct=>ct.userService)).updateProfile(je);Ct.getState().setUser(it),se.success("Profile updated successfully!")}catch(je){throw console.error("Failed to update profile:",je),se.error(Fe(je,"Failed to update profile")),je}},Va=async ne=>{le(ne),ze([]),ne.trim()&&(Lt.current&&clearTimeout(Lt.current),Ne(!0),Lt.current=setTimeout(async()=>{try{const oe=await bt(()=>Promise.resolve().then(()=>Vn),void 0).then(Ve=>Ve.userService),ye=Me,ke=[];try{const Ve=await oe.searchUsers(ne);console.log("[Search] User search results:",Ve),Array.isArray(Ve)&&Ve.forEach(fe=>{const it=fe.EntityId||fe.entityId||fe.id,qe=fe.displayName||fe.DisplayName||fe.username||fe.name||"Unknown User";console.log("[Search] Mapping user result:",{EntityId:fe.EntityId,entityId:fe.entityId,id:fe.id,displayName:fe.displayName,DisplayName:fe.DisplayName,username:fe.username,finalUserId:it,finalName:qe}),ke.push({id:it,name:qe,type:"user",avatar:At(fe.avatarUrl||fe.avatar||fe.profileImage)})})}catch(Ve){console.error("User search failed:",Ve)}try{const Ve=await ye.searchChats(ne);console.log("[Search] Chat results:",Ve,"Type:",typeof Ve,"IsArray:",Array.isArray(Ve)),Array.isArray(Ve)?Ve.forEach((fe,it)=>{console.log(`[Search] Processing chat result #${it}:`,fe),console.log(`[Search] Result #${it} - chatType:`,fe.chatType,"type:",fe.type,"displayName:",fe.displayName,"name:",fe.name);let qe="channel";if(typeof fe.chatType=="number")qe=fe.chatType===0?"user":fe.chatType===1?"group":"channel",console.log(`[Search] Used numeric chatType (${fe.chatType}) -> ${qe}`);else if(fe.type&&typeof fe.type=="string"){const Pt=String(fe.type).toLowerCase().trim();if(Pt==="dm"||Pt==="directmessage")qe="user",console.log("[Search] Used type field 'dm/directmessage' -> user");else if(Pt==="group")qe="group",console.log("[Search] Used type field 'group' -> group");else if(Pt==="channel")qe="channel",console.log("[Search] Used type field 'channel' -> channel");else if(console.log(`[Search] type field '${fe.type}' is unknown, trying chatType...`),fe.chatType&&typeof fe.chatType=="string"){const Gn=String(fe.chatType).toLowerCase().trim();Gn==="conversation"||Gn==="dm"||Gn==="directmessage"?(qe="user",console.log("[Search] Used chatType field 'conversation/dm' -> user")):Gn==="group"?(qe="group",console.log("[Search] Used chatType field 'group' -> group")):Gn==="channel"?(qe="channel",console.log("[Search] Used chatType field 'channel' -> channel")):console.log(`[Search] chatType '${Gn}' unknown, defaulting to channel`)}}else if(fe.chatType&&typeof fe.chatType=="string"){const Pt=String(fe.chatType).toLowerCase().trim();Pt==="conversation"||Pt==="dm"||Pt==="directmessage"||Pt==="0"?(qe="user",console.log(`[Search] Used string chatType '${fe.chatType}' (${Pt}) -> user`)):Pt==="group"||Pt==="1"?(qe="group",console.log(`[Search] Used string chatType '${fe.chatType}' (${Pt}) -> group`)):Pt==="channel"||Pt==="2"?(qe="channel",console.log(`[Search] Used string chatType '${fe.chatType}' (${Pt}) -> channel`)):console.log(`[Search] string chatType '${Pt}' unknown, defaulting to channel`)}else console.log("[Search] No type info found, using default (channel)");const ct=String(fe.displayName||fe.name||fe.username||fe.title||"Unknown").trim(),En=At(fe.avatarUrl||fe.avatar||fe.profileImage)||"",fn={id:String(fe.entityId||fe.id||"unknown"),name:ct==="Unknown"||ct.length===0?"Unknown User":ct,type:qe,avatar:En||void 0};console.log("[Search] Mapped result:",fn,"Original:",{displayName:fe.displayName,name:fe.name,username:fe.username,avatar:fe.avatar,avatarUrl:fe.avatarUrl}),ke.push(fn)}):(console.warn("[Search] Chat results is not an array:",Ve),console.warn("[Search] Type of chatsResults:",typeof Ve))}catch(Ve){console.error("Chat search failed:",Ve)}const _e=new Set,je=ke.filter(Ve=>{const fe=`${Ve.name.toLowerCase().trim()}|${Ve.type}`;return _e.has(fe)?(console.log(`[Search] Filtered duplicate: ${fe}`),!1):(_e.add(fe),!0)});je.sort((Ve,fe)=>{const it={user:0,group:1,channel:2};return(it[Ve.type]??3)-(it[fe.type]??3)}),console.log("[Search] Final deduplicated results (by name+type):",je,"Removed duplicates:",ke.length-je.length),ze(je),Ne(!1)}catch(oe){console.error("Search error:",oe),Ne(!1)}},300))},ga=async ne=>{if(console.log("[Search] Selected result:",ne,"Type:",ne.type),ne.type==="user"){de(null),jt(ne),Xe(!0);try{const oe=await bt(()=>Promise.resolve().then(()=>Vn),void 0).then(ke=>ke.userService);console.log("[Search] Loading user profile for ID:",ne.id);const ye=await oe.getUserProfile(ne.id);console.log("[Search] Loaded user profile:",ye),de(ye),te(!0)}catch(oe){console.error("[Search] Failed to load user profile:",oe),de(ne),te(!0)}finally{Xe(!1)}}else{console.log("[Search] Opening group/channel profile for:",ne.name),de(null),Xe(!0);try{const oe=await Me.getChatProfile(ne.id);console.log("[Search] Loaded chat profile:",oe),Oe.getState().setCurrentChat(oe),Mt(!0)}catch(oe){console.error("[Search] Failed to load chat profile:",oe),se.error(Fe(oe,"Failed to load profile"))}finally{Xe(!1)}}le(""),ze([])},Ma=async(ne,oe)=>{try{if(!ne){se.error("Error: User ID not found");return}console.log("[Dashboard] handleSendMessage called with userId:",ne,"message:",oe),te(!1),de(null),jt(null);const ye=Oe.getState();console.log("[Dashboard] Looking for existing DM with user:",ne);const ke=ye.chats;let _e=ke.find(it=>it.type!=="dm"?!1:it.members&&it.members.length>0?it.members.some(qe=>qe.userId===ne||qe.id===ne||qe.user?.id===ne||qe.user?.userId===ne):!1);if(!_e){const it=ke.filter(qe=>qe.type==="dm"&&(!qe.members||qe.members.length===0));console.log("[Dashboard] Checking",it.length,"DM chats without members");for(const qe of it)try{const ct=await Me.getChatProfile(qe.id);if(console.log("[Dashboard] Fetched full DM profile:",ct.id,"members:",ct.members?.length),ct.members&&ct.members.length>0&&ct.members.some(fn=>fn.userId===ne||fn.id===ne||fn.user?.id===ne||fn.user?.userId===ne)){console.log("[Dashboard] Found existing DM by fetching profile:",ct.id),_e=ct;break}}catch(ct){console.error("[Dashboard] Error fetching DM profile:",ct)}}if(_e){console.log("[Dashboard] Opening existing DM:",_e.id),ye.setCurrentChat(_e);return}console.log("[Dashboard] No existing DM found, creating temporary blank chat for user:",ne);let je=he?.username||"User",Ve=he?.avatar;if(!he)try{const qe=await(await bt(()=>Promise.resolve().then(()=>Vn),void 0).then(ct=>ct.userService)).getUserProfile(ne);je=qe.username||"User",Ve=qe.avatar,console.log("[Dashboard] Fetched user profile for blank chat:",je)}catch(it){console.error("[Dashboard] Failed to fetch user profile:",it)}const fe={id:`temp_dm_${ne}`,name:je,type:"dm",avatar:Ve,description:"",privacy:"private",members:[],unreadCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(console.log("[Dashboard] Setting current chat to blank:",fe.id),ye.setCurrentChat(fe),oe&&oe.trim()){console.log("[Dashboard] Sending initial message to user:",ne);try{const it=new FormData;it.append("receiverId",ne),it.append("content",oe),await Ee.post("/messages/",it,{headers:{"Content-Type":"multipart/form-data"}}),console.log("[Dashboard] Message sent successfully, backend auto-created DM"),await new Promise(En=>setTimeout(En,500)),await ye.loadChats();const ct=ye.chats.find(En=>En.type!=="dm"||!En.members||En.members.length===0?!1:En.members.some(fn=>fn.userId===ne||fn.id===ne||fn.user?.id===ne||fn.user?.userId===ne));ct&&(console.log("[Dashboard] Found newly created DM:",ct.id),ye.setCurrentChat(ct))}catch(it){console.error("[Dashboard] Error sending message:",it),se.error(Fe(it,"Failed to send message"))}}}catch(ye){console.error("[Dashboard] Failed to open DM:",ye),se.error(Fe(ye,"Failed to open direct message"))}};return l.jsxs("div",{className:`${N.dashboard} ${ft?N.darkMode:""}`,children:[l.jsx(XD,{chats:s,currentChat:o,onSelectChat:ne=>{ie(ne),Zt(!1)},isLoadingChats:c,user:t,onLogout:xe,onMenuOpen:()=>z(!He),searchQuery:ae,onSearchChange:Va,searchResults:Se,onSelectSearchResult:ne=>{ga(ne),Zt(!1)},isSearching:ve,isDarkMode:ft,onClearSearch:()=>{le(""),jt(null),te(!1)},isMobileOpen:Qt,onMobileClose:()=>Zt(!1),onlineUsers:h}),l.jsx(z4,{isOpen:He,onClose:()=>z(!1),onCreateGroup:()=>{w(!0),z(!1)},onCreateChannel:()=>{M(!0),z(!1)},onCreateCustomReaction:()=>{ue(!0),z(!1)},onEditProfile:()=>{ee(!0),z(!1)},onShowNotifications:()=>{Z(!0),z(!1)},onShowAdminPanel:()=>{Ze(!0),z(!1)},onShowBlockedUsers:()=>{Re(!0),z(!1)},isDarkMode:ft,onToggleDarkMode:g,onLogout:xe}),l.jsx(S4,{currentChat:o,messages:u,isLoadingMessages:v,onSendMessage:Qe,onOpenGroupCreate:()=>w(!0),onOpenChannelCreate:()=>M(!0),onOpenUserProfile:async ne=>{Xe(!0),te(!0),jt(null);try{const ye=await(await bt(()=>Promise.resolve().then(()=>Vn),void 0).then(ke=>ke.userService)).getUserProfile(ne);de(ye)}catch(oe){console.error("Failed to load user profile:",oe)}finally{Xe(!1)}},onOpenMobileSidebar:()=>Zt(!0),onOpenChatProfile:()=>Mt(!0)}),o?.type==="dm"&&l.jsx(U4,{currentChat:o,onReloadChat:async()=>{if(o){const ne=await Me.getChatProfile(o.id);Oe.getState().setCurrentChat(ne)}},onViewUserProfile:ne=>{Et(ne),Bt(!0)},onConversationDeleted:()=>{Oe.getState().setCurrentChat(null),Oe.getState().loadChats()}}),l.jsx(kb,{isOpen:C,onClose:()=>w(!1),onCreate:$e,isDarkMode:ft,isChannel:!1}),l.jsx(kb,{isOpen:A,onClose:()=>M(!1),onCreate:X,isDarkMode:ft,isChannel:!0}),l.jsx(O4,{isOpen:B,onClose:()=>{P(!1),U(null)},chat:E,onUpdate:lt,isDarkMode:ft,isChannel:E?.type==="channel"}),l.jsx(L4,{isOpen:H,onClose:()=>ee(!1),user:t,onUpdate:ds,isDarkMode:ft}),l.jsx(P4,{isOpen:re,onClose:()=>Z(!1),isDarkMode:ft,onNavigateToChat:async ne=>{try{let oe=s.find(ye=>ye.id===ne);if(oe||(console.log("[Dashboard] Chat not in list, reloading chats..."),await Oe.getState().loadChats(),oe=Oe.getState().chats.find(ke=>ke.id===ne)),oe)await ie(oe);else{console.log("[Dashboard] Chat still not in list, loading profile directly...");const ye=await Me.getChatProfile(ne);ye?await ie(ye):se.error("Chat not found")}}catch(oe){console.error("[Dashboard] Failed to load chat from notification:",oe),se.error("Failed to open chat")}}}),l.jsx(I4,{isOpen:pe,onClose:()=>ue(!1),onCreate:ma,isDarkMode:ft}),l.jsx(JR,{isOpen:Be,onClose:()=>Ze(!1),isDarkMode:ft}),l.jsx(qD,{isOpen:me,onClose:()=>Re(!1),isDarkMode:ft}),Ce&&he&&l.jsx(Tb,{isOpen:Ce,onClose:()=>{te(!1),de(null),jt(null)},userId:he.id,onSendMessage:Ma,onBlockUser:gt,onUnblockUser:mt}),o&&(o.type==="group"||o.type==="channel")&&l.jsx($D,{isOpen:qt,onClose:()=>Mt(!1),chat:o,currentUserId:t?.id||"",onEditGroup:()=>{Mt(!1),U(o),P(!0)},onLeaveGroup:Ue,onDeleteGroup:ot,onKickMember:ge,onBanMember:O,onUnbanMember:G,onUpdatePrivacy:Te,onViewUserProfile:ne=>{Et(ne),Bt(!0)}}),Gt&&l.jsx(Tb,{isOpen:Dt,onClose:()=>{Bt(!1),Et(null)},userId:Gt,onSendMessage:Ma,onBlockUser:gt,onUnblockUser:mt})]})},V4="_dashboardContainer_csh33_41",F4="_mainWrapper_csh33_149",$4="_sidebar_csh33_165",q4="_searchSection_csh33_189",G4="_searchContainer_csh33_197",Y4="_searchWrapper_csh33_205",W4="_searchIcon_csh33_217",X4="_searchInput_csh33_245",K4="_clearSearch_csh33_381",Q4="_searchDropdown_csh33_439",Z4="_dropdownHeader_csh33_469",J4="_searchResultItem_csh33_487",eB="_resultAvatar_csh33_571",tB="_resultOnline_csh33_615",nB="_resultInfo_csh33_637",aB="_resultName_csh33_651",sB="_resultUsername_csh33_673",iB="_noResults_csh33_693",oB="_chatList_csh33_741",rB="_chatItem_csh33_789",lB="_active_csh33_821",cB="_chatAvatar_csh33_837",uB="_group_csh33_881",dB="_chatOnlineStatus_csh33_911",fB="_chatInfo_csh33_949",pB="_chatNameRow_csh33_959",hB="_chatName_csh33_959",mB="_chatTime_csh33_991",gB="_chatPreviewRow_csh33_1005",yB="_chatPreview_csh33_1005",vB="_unreadBadge_csh33_1037",xB="_mainContent_csh33_1069",bB="_mobileHeader_csh33_1089",SB="_mobileTitle_csh33_1107",_B="_mobileMenuBtn_csh33_1119",wB="_emptyState_csh33_1177",CB="_emptyStateIcon_csh33_1197",jB="_emptyStateTitle_csh33_1235",TB="_emptyStateText_csh33_1249",kB="_rightPanel_csh33_1267",AB="_collapsed_csh33_1289",MB="_rightPanelHeader_csh33_1305",EB="_rightPanelTitle_csh33_1321",RB="_closePanel_csh33_1335",NB="_rightPanelContent_csh33_1391",DB="_panelPlaceholder_csh33_1429",BB="_togglePanelBtn_csh33_1481",zB="_mobileOverlay_csh33_1549",UB="_visible_csh33_1573",IB="_open_csh33_1645",OB="_loadingChats_csh33_1815",LB="_noChats_csh33_1817",PB="_loadingMessages_csh33_1819",HB="_noMessages_csh33_1821",VB="_spinner_csh33_1879",FB="_chatViewContainer_csh33_1907",$B="_chatHeader_csh33_1923",qB="_chatHeaderLeft_csh33_1943",GB="_chatHeaderAvatar_csh33_1955",YB="_chatHeaderInfo_csh33_2027",WB="_chatHeaderName_csh33_2039",XB="_chatHeaderStatus_csh33_2053",KB="_chatHeaderRight_csh33_2063",QB="_chatHeaderBtn_csh33_2075",ZB="_messagesContainer_csh33_2115",JB="_message_csh33_2115",e6="_own_csh33_2177",t6="_messageAvatar_csh33_2187",n6="_messageBubble_csh33_2231",a6="_messageSender_csh33_2279",s6="_messageText_csh33_2305",i6="_messageTime_csh33_2329",o6="_seenIndicator_csh33_2359",r6="_seen_csh33_2359",l6="_delivered_csh33_2383",c6="_messageAttachment_csh33_2411",u6="_attachmentImage_csh33_2419",d6="_attachmentLink_csh33_2433",f6="_messageInputContainer_csh33_2503",p6="_inputDisabledNotice_csh33_2517",h6="_filePreview_csh33_2541",m6="_fileName_csh33_2561",g6="_removeFile_csh33_2577",y6="_messageInputRow_csh33_2637",v6="_fileInput_csh33_2649",x6="_attachBtn_csh33_2657",b6="_messageInput_csh33_2503",S6="_sendBtn_csh33_2831",_6="_panelDetails_csh33_2911",w6="_panelAvatar_csh33_2927",C6="_panelName_csh33_2991",j6="_panelType_csh33_3005",T6="_panelDescription_csh33_3021",k6="_panelMemberCount_csh33_3037",A6="_replyPreview_csh33_3077",M6="_replyAuthor_csh33_3155",E6="_replyContent_csh33_3175",R6="_messageReactions_csh33_3205",N6="_reactionBadge_csh33_3219",D6="_messageFooter_csh33_3345",B6="_editedLabel_csh33_3361",z6="_contextMenu_csh33_3415",U6="_contextReactions_csh33_3437",I6="_contextReactionBtn_csh33_3451",O6="_contextDivider_csh33_3491",L6="_contextMenuItem_csh33_3503",P6="_danger_csh33_3561",H6="_highlighted_csh33_3591",V6="_scrollToBottomBtn_csh33_3601",F6="_replyBar_csh33_3669",$6="_replyBarContent_csh33_3691",q6="_replyBarIcon_csh33_3707",G6="_replyBarInfo_csh33_3729",Y6="_replyBarLabel_csh33_3743",W6="_replyBarText_csh33_3755",X6="_replyBarClose_csh33_3773",K6="_editBar_csh33_3831",Q6="_editBarContent_csh33_3853",Z6="_editBarIcon_csh33_3869",J6="_editBarInfo_csh33_3891",ez="_editBarLabel_csh33_3905",tz="_editBarText_csh33_3917",nz="_editBarClose_csh33_3935",az="_pinnedBar_csh33_4081",sz="_pinnedBarHeader_csh33_4093",iz="_pinnedBarLeft_csh33_4125",oz="_pinnedBarChevron_csh33_4151",rz="_expanded_csh33_4161",lz="_pinnedBarContent_csh33_4169",cz="_pinnedLoading_csh33_4179",uz="_pinnedItem_csh33_4193",dz="_pinnedItemInfo_csh33_4227",fz="_pinnedItemSender_csh33_4243",pz="_pinnedItemPreview_csh33_4255",hz="_pinnedItemJump_csh33_4271",mz="_clickable_csh33_4309",gz="_panelClickHint_csh33_4333",yz="_modalBackdrop_csh33_4349",vz="_userProfileModal_csh33_4375",xz="_modalClose_csh33_4399",bz="_userProfileAvatar_csh33_4445",Sz="_userProfileStatus_csh33_4495",_z="_online_csh33_4517",wz="_userProfileName_csh33_4525",Cz="_userProfileHandle_csh33_4539",jz="_userProfileActions_csh33_4583",Tz="_userProfileBtn_csh33_4595",kz="_block_csh33_4629",Az="_unblock_csh33_4647",Mz="_groupProfileModal_csh33_4685",Ez="_groupProfileAvatar_csh33_4731",Rz="_groupProfileName_csh33_4775",Nz="_groupProfileDesc_csh33_4789",Dz="_statValue_csh33_4831",Bz="_statLabel_csh33_4851",zz="_groupMemberList_csh33_4867",Uz="_groupProfileActions_csh33_5079",Iz="_groupProfileBtn_csh33_5091",Oz="_leave_csh33_5143",Lz="_modalLoading_csh33_5167",Pz="_modalError_csh33_5197",Hz="_userProfileOnlineBadge_csh33_5213",Vz="_onlineDot_csh33_5245",Fz="_onlineDotLarge_csh33_5267",$z="_userProfileSection_csh33_5281",qz="_blockStatusBanner_csh33_5329",Gz="_primary_csh33_5369",Yz="_groupProfileStatsGrid_csh33_5409",Wz="_groupProfileStatBox_csh33_5423",Xz="_privacyBadge_csh33_5451",Kz="_privacyToggle_csh33_5491",Qz="_adminActionsBar_csh33_5529",Zz="_adminActionBtn_csh33_5541",Jz="_memberSearchBox_csh33_5595",eU="_memberRoleSection_csh33_5683",tU="_memberRoleHeader_csh33_5691",nU="_memberListItem_csh33_5725",aU="_memberListItemMain_csh33_5751",sU="_memberListItemAvatar_csh33_5767",iU="_memberListItemOnline_csh33_5817",oU="_memberListItemInfo_csh33_5847",rU="_memberListItemName_csh33_5859",lU="_memberListItemStatus_csh33_5871",cU="_memberListItemActions_csh33_5881",uU="_memberActionBtn_csh33_5889",dU="_memberActionsMenu_csh33_5927",fU="_subModal_csh33_6011",pU="_subModalHeader_csh33_6037",hU="_subModalSearch_csh33_6119",mU="_subModalContent_csh33_6171",gU="_subModalLoading_csh33_6201",yU="_subModalEmpty_csh33_6229",vU="_subModalItem_csh33_6243",xU="_subModalItemAvatar_csh33_6269",bU="_subModalItemInfo_csh33_6317",SU="_subModalItemName_csh33_6331",_U="_subModalItemMeta_csh33_6343",wU="_subModalItemBtn_csh33_6353",CU="_unban_csh33_6385",j={dashboardContainer:V4,mainWrapper:F4,sidebar:$4,searchSection:q4,searchContainer:G4,searchWrapper:Y4,searchIcon:W4,searchInput:X4,clearSearch:K4,searchDropdown:Q4,dropdownHeader:Z4,searchResultItem:J4,resultAvatar:eB,resultOnline:tB,resultInfo:nB,resultName:aB,resultUsername:sB,noResults:iB,chatList:oB,chatItem:rB,active:lB,chatAvatar:cB,group:uB,chatOnlineStatus:dB,chatInfo:fB,chatNameRow:pB,chatName:hB,chatTime:mB,chatPreviewRow:gB,chatPreview:yB,unreadBadge:vB,mainContent:xB,mobileHeader:bB,mobileTitle:SB,mobileMenuBtn:_B,emptyState:wB,emptyStateIcon:CB,emptyStateTitle:jB,emptyStateText:TB,rightPanel:kB,collapsed:AB,rightPanelHeader:MB,rightPanelTitle:EB,closePanel:RB,rightPanelContent:NB,panelPlaceholder:DB,togglePanelBtn:BB,mobileOverlay:zB,visible:UB,open:IB,loadingChats:OB,noChats:LB,loadingMessages:PB,noMessages:HB,spinner:VB,chatViewContainer:FB,chatHeader:$B,chatHeaderLeft:qB,chatHeaderAvatar:GB,chatHeaderInfo:YB,chatHeaderName:WB,chatHeaderStatus:XB,chatHeaderRight:KB,chatHeaderBtn:QB,messagesContainer:ZB,message:JB,own:e6,messageAvatar:t6,messageBubble:n6,messageSender:a6,messageText:s6,messageTime:i6,seenIndicator:o6,seen:r6,delivered:l6,messageAttachment:c6,attachmentImage:u6,attachmentLink:d6,messageInputContainer:f6,inputDisabledNotice:p6,filePreview:h6,fileName:m6,removeFile:g6,messageInputRow:y6,fileInput:v6,attachBtn:x6,messageInput:b6,sendBtn:S6,panelDetails:_6,panelAvatar:w6,panelName:C6,panelType:j6,panelDescription:T6,panelMemberCount:k6,replyPreview:A6,replyAuthor:M6,replyContent:E6,messageReactions:R6,reactionBadge:N6,messageFooter:D6,editedLabel:B6,contextMenu:z6,contextReactions:U6,contextReactionBtn:I6,contextDivider:O6,contextMenuItem:L6,danger:P6,highlighted:H6,scrollToBottomBtn:V6,replyBar:F6,replyBarContent:$6,replyBarIcon:q6,replyBarInfo:G6,replyBarLabel:Y6,replyBarText:W6,replyBarClose:X6,editBar:K6,editBarContent:Q6,editBarIcon:Z6,editBarInfo:J6,editBarLabel:ez,editBarText:tz,editBarClose:nz,pinnedBar:az,pinnedBarHeader:sz,pinnedBarLeft:iz,pinnedBarChevron:oz,expanded:rz,pinnedBarContent:lz,pinnedLoading:cz,pinnedItem:uz,pinnedItemInfo:dz,pinnedItemSender:fz,pinnedItemPreview:pz,pinnedItemJump:hz,clickable:mz,panelClickHint:gz,modalBackdrop:yz,userProfileModal:vz,modalClose:xz,userProfileAvatar:bz,userProfileStatus:Sz,online:_z,userProfileName:wz,userProfileHandle:Cz,userProfileActions:jz,userProfileBtn:Tz,block:kz,unblock:Az,groupProfileModal:Mz,groupProfileAvatar:Ez,groupProfileName:Rz,groupProfileDesc:Nz,statValue:Dz,statLabel:Bz,groupMemberList:zz,groupProfileActions:Uz,groupProfileBtn:Iz,leave:Oz,modalLoading:Lz,modalError:Pz,userProfileOnlineBadge:Hz,onlineDot:Vz,onlineDotLarge:Fz,userProfileSection:$z,blockStatusBanner:qz,primary:Gz,groupProfileStatsGrid:Yz,groupProfileStatBox:Wz,privacyBadge:Xz,privacyToggle:Kz,adminActionsBar:Qz,adminActionBtn:Zz,memberSearchBox:Jz,memberRoleSection:eU,memberRoleHeader:tU,memberListItem:nU,memberListItemMain:aU,memberListItemAvatar:sU,memberListItemOnline:iU,memberListItemInfo:oU,memberListItemName:rU,memberListItemStatus:lU,memberListItemActions:cU,memberActionBtn:uU,memberActionsMenu:dU,subModal:fU,subModalHeader:pU,subModalSearch:hU,subModalContent:mU,subModalLoading:gU,subModalEmpty:yU,subModalItem:vU,subModalItemAvatar:xU,subModalItemInfo:bU,subModalItemName:SU,subModalItemMeta:_U,subModalItemBtn:wU,unban:CU},jU=()=>{const{user:t}=Ct(),{chats:n,currentChat:s,messages:o,isLoadingChats:c,isLoadingMessages:u,setCurrentChat:f,loadChats:h,loadMessages:m,sendMessage:g,isUserOnline:y,deleteMessage:v,editMessage:_,isBlockedBy:C,hasBlocked:w,loadPinnedMessages:A,getPinnedMessages:M,unpinMessage:B,isLoadingPinned:P,addBlockedUser:E,removeBlockedUser:U,getUserLastSeen:H,setInitialPresenceStates:ee}=Oe(),{canSendMessage:re,canAddUsers:Z,canManageChatInfo:pe,canManageBans:ue,canManageUsers:Be}=bu(s?.id),me=(()=>{if(!s||s.type!=="dm"||!t)return null;const T=s.members?.find(Y=>(Y.userId||Y.id)!==t.id);return T?.userId||T?.id||null})(),Re=me?C(me):!1,He=me?w(me):!1,z=Re||He,[ae,le]=b.useState(""),[Se,ze]=b.useState(!1),[ve,Ne]=b.useState([]),[Ce,te]=b.useState(!1),[he,de]=b.useState(()=>window.innerWidth>768),[$t,jt]=b.useState(!1),[Ot,Xe]=b.useState(""),[qt,Mt]=b.useState(!1),[Dt,Bt]=b.useState(null),[Gt,Et]=b.useState(null),[Qt,Zt]=b.useState(null),[Lt,ft]=b.useState(null),[mn,an]=b.useState(!1),[rt,ie]=b.useState(!1),[xe,Qe]=b.useState(!1),[$e,X]=b.useState(null),[lt,O]=b.useState(!1),[G,ge]=b.useState(null),[Te,Ue]=b.useState(!1),[ot,gt]=b.useState(!1),[mt,ma]=b.useState(null),[ds,Va]=b.useState(!1),[ga,Ma]=b.useState(""),[ne,oe]=b.useState(!1),[ye,ke]=b.useState(""),[_e,je]=b.useState([]),[Ve,fe]=b.useState(!1),[it,qe]=b.useState(!1),[ct,En]=b.useState([]),[fn,Pt]=b.useState(!1),[Gn,ya]=b.useState(!1),Jt=b.useRef(null),xn=b.useRef(null),va=b.useRef(null),Di=b.useRef(null),fs=b.useRef(null),ul=b.useRef(null),Bi=b.useRef(null),ps=b.useRef(null),Zs=b.useRef(null);b.useEffect(()=>{n.length===0&&h()},[]),b.useEffect(()=>{const T=()=>{const Y=window.innerWidth<=768;Y||jt(!1),Y&&de(!1)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),b.useEffect(()=>{const T=Y=>{Jt.current&&!Jt.current.contains(Y.target)&&ze(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]),b.useEffect(()=>{s&&s.id!==ps.current&&(ps.current=s.id,m(s.id),A(s.id),tt.joinChat(s.id),tt.markMessagesAsSeen(s.id).catch(T=>{console.warn("[DashboardLayout] Failed to mark messages as seen:",T)}),Oe.getState().resetUnreadCount(s.id),ya(!1))},[s?.id]),b.useEffect(()=>{va.current&&va.current.scrollIntoView({behavior:"smooth"})},[o.length]),b.useEffect(()=>{const T=Y=>{Zs.current&&!Zs.current.contains(Y.target)&&Et(null)};return Gt&&document.addEventListener("click",T),()=>document.removeEventListener("click",T)},[Gt]),b.useEffect(()=>{const T=Di.current;if(!T)return;const Y=()=>{const{scrollTop:ce,scrollHeight:pt,clientHeight:bn}=T,Ss=pt-ce-bn<100;an(!Ss)};return T.addEventListener("scroll",Y),()=>T.removeEventListener("scroll",Y)},[s?.id]);const hs=(T,Y)=>{T.preventDefault(),T.stopPropagation(),Et({messageId:Y.messageId,x:T.clientX,y:T.clientY})},Fa=async(T,Y)=>{try{await Oe.getState().toggleReaction(T,Y)}catch(ce){console.error("Failed to toggle reaction:",ce),se.error("Failed to add reaction")}Et(null)},Js=T=>{Zt(T),Et(null),ul.current?.focus()},ms=T=>{ft(T),Xe(T.content||""),Et(null),ul.current?.focus()},sn=async T=>{if(confirm("Delete this message?")){try{await v(T),se.success("Message deleted")}catch(Y){console.error("Failed to delete message:",Y),se.error("Failed to delete message")}Et(null)}},dl=async T=>{try{T.isPinned?(await B(T.messageId),se.success("Message unpinned")):(await Oe.getState().pinMessage(T.messageId),se.success("Message pinned"))}catch(Y){console.error("Failed to toggle pin:",Y),se.error("Failed to update pin status")}Et(null)},fl=()=>{va.current?.scrollIntoView({behavior:"smooth"})},Ea=T=>{const Y=document.getElementById(`msg-${T}`);Y&&(Y.scrollIntoView({behavior:"smooth",block:"center"}),Y.classList.add(j.highlighted),setTimeout(()=>Y.classList.remove(j.highlighted),2e3))},gs=["","","","",""],pl={Like:"",Love:"",Laugh:"",Sad:"",Angry:""},hl=b.useCallback(T=>{if(le(T),!T.trim()){Ne([]),te(!1);return}Bi.current&&clearTimeout(Bi.current),te(!0),Bi.current=setTimeout(async()=>{try{const Y=await yn.searchUsers(T);Ne(Y)}catch(Y){console.error("Search failed:",Y),Ne([])}finally{te(!1)}},300)},[]),zo=n.filter(T=>T.name.toLowerCase().includes(ae.toLowerCase())),Su=Se&&ae.length>0,zi=()=>{le(""),Ne([]),xn.current?.focus()},Ui=async T=>{console.log("Start chat with user:",T),le(""),Ne([]),ze(!1)},xa=T=>{f(T),jt(!1)},Rn=async()=>{if(!(!Ot.trim()&&!Dt||!s||qt)){Mt(!0);try{if(Lt){await _(Lt.messageId,Ot.trim()),ft(null),Xe(""),se.success("Message edited");return}let T;if(s.type==="dm"&&s.members){const Y=s.members.find(ce=>(ce.userId||ce.id)!==t?.id);T=Y?.userId||Y?.id}await g(s.id,T,Ot.trim(),Dt||void 0,Qt?.messageId),Xe(""),Bt(null),Zt(null),fs.current&&(fs.current.value="")}catch(T){console.error("Failed to send message:",T),se.error("Failed to send message")}finally{Mt(!1)}}},ml=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),Rn())},gl=T=>{if(T.type!=="dm")return!1;if(!T.members||!t)return T.isOnline||!1;const Y=T.members.find(pt=>(pt.userId||pt.id)!==t.id);if(!Y)return!1;const ce=Y.userId||Y.id;return y(ce)},Uo=T=>{if(T.lastMessage){const Y=T.lastMessage.content||"";return T.lastMessage.fileUrl&&!Y?" Attachment":tb(Y,40)}return"No messages yet"},yl=T=>T.lastMessage?.createdAt?au(T.lastMessage.createdAt):au(T.updatedAt||T.createdAt),$a=async T=>{O(!0),ge(null);try{const Y=await yn.getUserProfile(T);X(Y);const ce=await yn.getMutualBlockStatus(T);Ue(ce.iBlockedThem),gt(ce.theyBlockedMe)}catch(Y){ge(Y.response?.data?.message||"Failed to load profile")}finally{O(!1)}},_u=async T=>{if(confirm("Are you sure you want to block this user? They will not be able to message you."))try{await yn.blockUser(T),E(T),Ue(!0),se.success("User blocked")}catch(Y){console.error("Failed to block user:",Y),se.error("Failed to block user")}},Bn=async T=>{if(confirm("Are you sure you want to unblock this user? They will be able to message you again."))try{await yn.unblockUser(T),U(T),Ue(!1),se.success("User unblocked")}catch(Y){console.error("Failed to unblock user:",Y),se.error("Failed to unblock user")}},Io=async T=>{try{const Y=await Me.createOrGetDM(T);f(Y||null),Qe(!1),await h()}catch(Y){console.error("Failed to start conversation:",Y),se.error("Failed to start conversation")}},ys=async T=>{Va(!0);try{const Y=await Me.getChatProfile(T);ma(Y);const ce=Y.members?.map(pt=>pt.userId)||[];if(ce.length>0)try{const pt=await tt.getPresenceStates(ce);Object.keys(pt).length>0&&ee(pt)}catch(pt){console.error("Failed to load presence states:",pt)}}catch(Y){console.error("Failed to load group profile:",Y),se.error("Failed to load profile")}finally{Va(!1)}},Oo=async T=>{if(ke(T),!T.trim()){je([]);return}fe(!0);try{const Y=await yn.searchUsers(T),ce=new Set(mt?.members?.map(bn=>bn.userId)||[]),pt=Y.filter(bn=>!ce.has(bn.id));je(pt)}catch(Y){console.error("Failed to search users:",Y)}finally{fe(!1)}},vs=async T=>{if(s)try{s.type==="group"?await Me.addMemberToGroup(s.id,T):s.type==="channel"&&await Me.addMemberToChannel(s.id,T),se.success("Member added successfully"),oe(!1),ke(""),je([]),await ys(s.id)}catch(Y){console.error("Failed to add member:",Y),Y.response?.status===400&&Y.response?.data?.message?.includes("banned")?se.error("This user is banned and cannot be added"):se.error("Failed to add member")}},Lo=async T=>{if(s&&confirm("Are you sure you want to remove this member?"))try{s.type==="group"?await Me.removeMemberFromGroup(s.id,T):s.type==="channel"&&await Me.removeMemberFromChannel(s.id,T),se.success("Member removed"),await ys(s.id)}catch(Y){console.error("Failed to remove member:",Y),se.error("Failed to remove member")}},Po=async T=>{if(s&&confirm("Are you sure you want to ban this member? They will not be able to rejoin."))try{await Me.banUser(s.id,T),se.success("Member banned"),await ys(s.id)}catch(Y){console.error("Failed to ban member:",Y),se.error("Failed to ban member")}},xs=async(T,Y)=>{if(s&&confirm(`Unban ${Y}? They will be able to rejoin.`))try{await Me.unbanUser(s.id,T),se.success(`${Y} unbanned`),await vl()}catch(ce){console.error("Failed to unban member:",ce),se.error("Failed to unban member")}},vl=async()=>{if(s){Pt(!0);try{const T=await Me.getBannedUsers(s.id);En(T)}catch(T){console.error("Failed to load banned users:",T),se.error("Failed to load banned users")}finally{Pt(!1)}}},xl=async()=>{if(s&&confirm(`Leave this ${s.type}?`))try{await Me.leaveChat(s.id,s.type),se.success(`Left ${s.type==="channel"?"channel":"group"}`),ie(!1),f(null),h()}catch(T){console.error("Failed to leave:",T),se.error("Failed to leave")}},bl=async()=>{if(s&&confirm(`Delete this ${s.type}? This cannot be undone.`))try{await Me.deleteChat(s.id,s.type),se.success(`${s.type==="channel"?"Channel":"Group"} deleted`),ie(!1),f(null),h()}catch(T){console.error("Failed to delete:",T),se.error("Failed to delete")}},Ho=async T=>{if(s&&confirm(`Change this ${s.type} to ${T}?`))try{await Me.updateChatPrivacy(s.id,T),se.success(`Privacy updated to ${T}`),await ys(s.id)}catch(Y){console.error("Failed to update privacy:",Y),se.error("Failed to update privacy")}},wu=()=>{if(!mt?.members)return{admin:[],moderator:[],member:[]};let T=mt.members;if(ga.trim()){const ce=ga.toLowerCase();T=T.filter(pt=>pt.user?.username?.toLowerCase().includes(ce))}const Y={admin:[],moderator:[],member:[]};return T.forEach(ce=>{const pt=ce.role||"member";Y[pt]?Y[pt].push(ce):Y.member.push(ce)}),Y},bs=()=>!s||!t?!1:s.members?.find(Y=>(Y.userId||Y.id)===t.id)?.role==="admin"||s.createdById===t.id;return l.jsxs("div",{className:j.dashboardContainer,children:[l.jsx("div",{className:`${j.mobileOverlay} ${$t?j.visible:""}`,onClick:()=>jt(!1)}),l.jsxs("div",{className:j.mainWrapper,children:[l.jsxs("aside",{className:`${j.sidebar} ${$t?j.open:""}`,children:[l.jsx("div",{className:j.searchSection,ref:Jt,children:l.jsxs("div",{className:j.searchContainer,children:[l.jsxs("div",{className:j.searchWrapper,children:[l.jsx("input",{ref:xn,type:"text",className:j.searchInput,placeholder:"Search...",value:ae,onChange:T=>hl(T.target.value),onFocus:()=>ze(!0)}),l.jsx(Mc,{className:j.searchIcon,size:15,strokeWidth:2}),ae&&l.jsx("button",{className:j.clearSearch,onClick:zi,"aria-label":"Clear",type:"button",children:l.jsx(da,{size:12,strokeWidth:2})})]}),Su&&l.jsx("div",{className:j.searchDropdown,children:Ce?l.jsxs("div",{className:j.noResults,children:[l.jsx(ta,{size:18,className:j.spinner}),l.jsx("span",{children:"Searching..."})]}):ve.length>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:j.dropdownHeader,children:"Users"}),ve.map(T=>l.jsxs("button",{className:j.searchResultItem,onClick:()=>Ui(T.id),type:"button",children:[l.jsxs("div",{className:j.resultAvatar,children:[T.avatar?l.jsx("img",{src:At(T.avatar),alt:T.username}):Tn(T.username),T.onlineStatus==="online"&&l.jsx("span",{className:j.resultOnline})]}),l.jsxs("div",{className:j.resultInfo,children:[l.jsx("span",{className:j.resultName,children:T.username}),l.jsxs("span",{className:j.resultUsername,children:["@",T.username]})]})]},T.id))]}):l.jsxs("div",{className:j.noResults,children:[l.jsx(Mc,{size:18,strokeWidth:1.5}),l.jsx("span",{children:"No users found"})]})})]})}),l.jsx("div",{className:j.chatList,children:c?l.jsxs("div",{className:j.loadingChats,children:[l.jsx(ta,{size:24,className:j.spinner}),l.jsx("span",{children:"Loading chats..."})]}):zo.length===0?l.jsxs("div",{className:j.noChats,children:[l.jsx(Dr,{size:24,strokeWidth:1.5}),l.jsx("span",{children:"No conversations yet"})]}):zo.map(T=>l.jsxs("div",{className:`${j.chatItem} ${s?.id===T.id?j.active:""}`,onClick:()=>xa(T),children:[l.jsxs("div",{className:`${j.chatAvatar} ${T.type!=="dm"?j.group:""}`,children:[T.avatar?l.jsx("img",{src:At(T.avatar),alt:T.name}):T.type==="group"?l.jsx(Hn,{size:18,strokeWidth:2}):T.type==="channel"?l.jsx(Br,{size:18,strokeWidth:2}):Tn(T.name),T.type==="dm"&&gl(T)&&l.jsx("div",{className:j.chatOnlineStatus})]}),l.jsxs("div",{className:j.chatInfo,children:[l.jsxs("div",{className:j.chatNameRow,children:[l.jsx("span",{className:j.chatName,children:T.name}),l.jsx("span",{className:j.chatTime,children:yl(T)})]}),l.jsxs("div",{className:j.chatPreviewRow,children:[l.jsx("span",{className:j.chatPreview,children:Uo(T)}),T.unreadCount>0&&l.jsx("span",{className:j.unreadBadge,children:T.unreadCount})]})]})]},T.id))})]}),l.jsxs("main",{className:j.mainContent,children:[l.jsxs("div",{className:j.mobileHeader,children:[l.jsx("button",{className:j.mobileMenuBtn,onClick:()=>jt(!$t),"aria-label":"Toggle menu",type:"button",children:l.jsx(Bb,{size:20,strokeWidth:2})}),l.jsx("span",{className:j.mobileTitle,children:s?s.name:"Messages"})]}),s?l.jsxs("div",{className:j.chatViewContainer,children:[l.jsxs("div",{className:j.chatHeader,children:[l.jsxs("div",{className:j.chatHeaderLeft,children:[l.jsx("div",{className:`${j.chatHeaderAvatar} ${s.type!=="dm"?j.group:""}`,children:s.avatar?l.jsx("img",{src:At(s.avatar),alt:s.name}):s.type==="group"?l.jsx(Hn,{size:20,strokeWidth:2}):s.type==="channel"?l.jsx(Br,{size:20,strokeWidth:2}):Tn(s.name)}),l.jsxs("div",{className:j.chatHeaderInfo,children:[l.jsx("h3",{className:j.chatHeaderName,children:s.name}),l.jsx("span",{className:j.chatHeaderStatus,children:s.type==="dm"?gl(s)?"Online":"Offline":`${s.members?.length||s.participantsCount||0} members`})]})]}),l.jsx("div",{className:j.chatHeaderRight,children:s.type!=="dm"&&l.jsx("button",{className:j.chatHeaderBtn,onClick:()=>{ie(!0),ys(s.id)},title:`${s.type==="channel"?"Channel":"Group"} Info`,type:"button",children:l.jsx(Rb,{size:18,strokeWidth:2})})})]}),(()=>{const T=M(s.id);return T.length===0?null:l.jsxs("div",{className:j.pinnedBar,children:[l.jsxs("button",{className:j.pinnedBarHeader,onClick:()=>ya(!Gn),type:"button",children:[l.jsxs("div",{className:j.pinnedBarLeft,children:[l.jsx(qr,{size:14}),l.jsxs("span",{children:[T.length," pinned message",T.length!==1?"s":""]})]}),l.jsx(lp,{size:16,className:`${j.pinnedBarChevron} ${Gn?j.expanded:""}`})]}),l.jsx(Ta,{children:Gn&&l.jsx(Pe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:j.pinnedBarContent,children:P?l.jsx("div",{className:j.pinnedLoading,children:l.jsx(ta,{size:16,className:j.spinner})}):T.map(Y=>l.jsxs("div",{className:j.pinnedItem,children:[l.jsxs("div",{className:j.pinnedItemInfo,children:[l.jsx("span",{className:j.pinnedItemSender,children:Y.senderUsername}),l.jsx("span",{className:j.pinnedItemPreview,children:Y.content?tb(Y.content,50):Y.fileUrl?"Attachment":"Empty"})]}),l.jsx("button",{className:j.pinnedItemJump,onClick:()=>Ea(Y.messageId),type:"button",children:"Jump"})]},Y.messageId))})})]})})(),l.jsxs("div",{className:j.messagesContainer,ref:Di,children:[u?l.jsxs("div",{className:j.loadingMessages,children:[l.jsx(ta,{size:24,className:j.spinner}),l.jsx("span",{children:"Loading messages..."})]}):o.length===0?l.jsxs("div",{className:j.noMessages,children:[l.jsx(Dr,{size:24,strokeWidth:1.5}),l.jsx("span",{children:"No messages yet. Start the conversation!"})]}):o.map(T=>l.jsxs("div",{id:`msg-${T.messageId}`,className:`${j.message} ${T.isCurrentUser?j.own:""}`,children:[!T.isCurrentUser&&l.jsx("div",{className:j.messageAvatar,children:T.senderAvatarUrl?l.jsx("img",{src:At(T.senderAvatarUrl),alt:T.senderUsername}):Tn(T.senderUsername)}),l.jsxs("div",{className:j.messageBubble,onContextMenu:Y=>hs(Y,T),onClick:Y=>{if("ontouchstart"in window&&Y.detail===1){const ce=Y.target;if(ce.closest("button")||ce.closest("a")||ce.closest(`.${j.replyPreview}`))return;Y.preventDefault(),Et({messageId:T.messageId,x:Y.clientX,y:Y.clientY})}},children:[!T.isCurrentUser&&s.type!=="dm"&&l.jsx("span",{className:j.messageSender,children:T.senderUsername}),T.replyId&&(()=>{const Y=o.find(ce=>ce.messageId===T.replyId);return l.jsxs("div",{className:j.replyPreview,onClick:()=>Y&&Ea(T.replyId),children:[l.jsx(Tf,{size:12}),l.jsx("span",{className:j.replyAuthor,children:Y?.senderUsername||"Unknown"}),l.jsxs("span",{className:j.replyContent,children:[Y?.content?.substring(0,40)||(Y?.fileUrl?" File":"Deleted"),Y?.content&&Y.content.length>40?"...":""]})]})})(),T.fileUrl&&l.jsx("div",{className:j.messageAttachment,children:/\.(jpg|jpeg|png|gif|webp)$/i.test(T.fileUrl)?l.jsx("img",{src:At(T.fileUrl),alt:"Attachment",className:j.attachmentImage}):l.jsxs("a",{href:At(T.fileUrl),target:"_blank",rel:"noopener noreferrer",className:j.attachmentLink,children:[l.jsx(hv,{size:14}),l.jsx("span",{children:"View Attachment"})]})}),T.content&&l.jsx("p",{className:j.messageText,children:T.content}),T.messageReactions&&T.messageReactions.length>0&&(()=>{const Y=T.messageReactions.reduce((ce,pt)=>{const bn=pt.reactionType||pt.type||"Like";return ce[bn]||(ce[bn]={count:0,users:[]}),ce[bn].count++,ce[bn].users.push(pt.userName||pt.userId||"User"),ce},{});return l.jsx("div",{className:j.messageReactions,children:Object.entries(Y).map(([ce,pt])=>l.jsxs("button",{className:j.reactionBadge,onClick:()=>Fa(T.messageId,pl[ce]||""),title:pt.users.join(", "),children:[pl[ce]||"",pt.count>1&&l.jsx("span",{children:pt.count})]},ce))})})(),l.jsxs("div",{className:j.messageFooter,children:[l.jsxs("span",{className:j.messageTime,children:[IA(T.sentAt),T.editedAt&&l.jsx("span",{className:j.editedLabel,children:" (edited)"})]}),"isSeen"in T&&l.jsx("span",{className:`${j.seenIndicator} ${T.isSeen?j.seen:j.delivered}`,children:T.isSeen?"":""})]}),Gt?.messageId===T.messageId&&l.jsxs("div",{ref:Zs,className:j.contextMenu,style:{position:"fixed",top:Math.min(Gt.y,window.innerHeight-220),left:Math.min(Gt.x,window.innerWidth-160)},children:[l.jsx("div",{className:j.contextReactions,children:gs.map(Y=>l.jsx("button",{className:j.contextReactionBtn,onClick:()=>Fa(T.messageId,Y),children:Y},Y))}),l.jsx("div",{className:j.contextDivider}),l.jsxs("button",{className:j.contextMenuItem,onClick:()=>Js(T),children:[l.jsx(Tf,{size:14})," Reply"]}),l.jsxs("button",{className:j.contextMenuItem,onClick:()=>dl(T),children:[l.jsx(qr,{size:14})," ",T.isPinned?"Unpin":"Pin"]}),T.isCurrentUser&&l.jsxs("button",{className:j.contextMenuItem,onClick:()=>ms(T),children:[l.jsx(mv,{size:14})," Edit"]}),T.isCurrentUser&&l.jsxs("button",{className:`${j.contextMenuItem} ${j.danger}`,onClick:()=>sn(T.messageId),children:[l.jsx(Ci,{size:14})," Delete"]})]})]})]},T.messageId)),l.jsx("div",{ref:va})]}),mn&&l.jsx("button",{className:j.scrollToBottomBtn,onClick:fl,type:"button","aria-label":"Scroll to bottom",children:l.jsx(lp,{size:18})}),l.jsx("div",{className:j.messageInputContainer,children:z?l.jsx("div",{className:j.inputDisabledNotice,children:l.jsx("span",{children:He?"You have blocked this user. Unblock to send messages.":"You cannot message this user."})}):!re&&s.type!=="dm"?l.jsx("div",{className:j.inputDisabledNotice,children:l.jsx("span",{children:"You don't have permission to send messages in this chat."})}):l.jsxs(l.Fragment,{children:[Qt&&l.jsxs("div",{className:j.replyBar,children:[l.jsxs("div",{className:j.replyBarContent,children:[l.jsx("div",{className:j.replyBarIcon,children:l.jsx(Tf,{size:14})}),l.jsxs("div",{className:j.replyBarInfo,children:[l.jsxs("span",{className:j.replyBarLabel,children:["Replying to ",Qt.senderUsername]}),l.jsxs("span",{className:j.replyBarText,children:[Qt.content?.substring(0,50)||" Attachment",Qt.content&&Qt.content.length>50?"...":""]})]})]}),l.jsx("button",{className:j.replyBarClose,onClick:()=>Zt(null),type:"button",children:l.jsx(da,{size:14})})]}),Lt&&l.jsxs("div",{className:j.editBar,children:[l.jsxs("div",{className:j.editBarContent,children:[l.jsx("div",{className:j.editBarIcon,children:l.jsx(mv,{size:14})}),l.jsxs("div",{className:j.editBarInfo,children:[l.jsx("span",{className:j.editBarLabel,children:"Editing message"}),l.jsxs("span",{className:j.editBarText,children:[Lt.content?.substring(0,50)||"",Lt.content&&Lt.content.length>50?"...":""]})]})]}),l.jsx("button",{className:j.editBarClose,onClick:()=>{ft(null),Xe("")},type:"button",children:l.jsx(da,{size:14})})]}),Dt&&l.jsxs("div",{className:j.filePreview,children:[l.jsx("span",{className:j.fileName,children:Dt.name}),l.jsx("button",{className:j.removeFile,onClick:()=>{Bt(null),fs.current&&(fs.current.value="")},children:l.jsx(da,{size:14})})]}),l.jsxs("div",{className:j.messageInputRow,children:[l.jsx("input",{type:"file",ref:fs,className:j.fileInput,onChange:T=>Bt(T.target.files?.[0]||null)}),l.jsx("button",{className:j.attachBtn,onClick:()=>fs.current?.click(),type:"button",children:l.jsx(hv,{size:18,strokeWidth:2})}),l.jsx("input",{type:"text",className:j.messageInput,placeholder:"Type a message...",value:Ot,onChange:T=>Xe(T.target.value),onKeyPress:ml,disabled:qt}),l.jsx("button",{className:j.sendBtn,onClick:Rn,disabled:!Ot.trim()&&!Dt||qt,type:"button",children:qt?l.jsx(ta,{size:18,className:j.spinner}):l.jsx(Tw,{size:18,strokeWidth:2})})]})]})})]}):l.jsxs("div",{className:j.emptyState,children:[l.jsx("div",{className:j.emptyStateIcon,children:l.jsx(Dr,{size:32,strokeWidth:1.5})}),l.jsx("h2",{className:j.emptyStateTitle,children:"Select a conversation"}),l.jsx("p",{className:j.emptyStateText,children:"Choose a chat from the sidebar to start messaging"})]}),!he&&s&&l.jsx("button",{className:j.togglePanelBtn,onClick:()=>de(!0),"aria-label":"Open panel",type:"button",children:l.jsx(kw,{size:16,strokeWidth:2})})]}),l.jsxs("aside",{className:`${j.rightPanel} ${he?"":j.collapsed}`,children:[l.jsxs("div",{className:j.rightPanelHeader,children:[l.jsx("span",{className:j.rightPanelTitle,children:"Details"}),l.jsx("button",{className:j.closePanel,onClick:()=>de(!1),"aria-label":"Close panel",type:"button",children:l.jsx(da,{size:16,strokeWidth:2})})]}),l.jsx("div",{className:j.rightPanelContent,children:s?l.jsxs("div",{className:`${j.panelDetails} ${s.type==="dm"?j.clickable:""}`,onClick:()=>{if(s.type==="dm"){const T=s.members?.find(Y=>(Y.userId||Y.id)!==t?.id);if(T){const Y=T.userId||T.id||"";Qe(!0),$a(Y)}}},children:[l.jsx("div",{className:j.panelAvatar,children:s.avatar?l.jsx("img",{src:At(s.avatar),alt:s.name}):s.type==="group"?l.jsx(Hn,{size:32,strokeWidth:1.5}):s.type==="channel"?l.jsx(Br,{size:32,strokeWidth:1.5}):l.jsx("span",{children:Tn(s.name)})}),l.jsx("h3",{className:j.panelName,children:s.name}),l.jsx("p",{className:j.panelType,children:s.type==="dm"?"Direct Message":s.type==="group"?"Group Chat":"Channel"}),s.description&&l.jsx("p",{className:j.panelDescription,children:s.description}),s.type!=="dm"&&l.jsxs("div",{className:j.panelMemberCount,children:[l.jsx(Hn,{size:16}),l.jsxs("span",{children:[s.members?.length||s.participantsCount||0," members"]})]}),s.type==="dm"&&l.jsx("p",{className:j.panelClickHint,children:"Click to view profile"})]}):l.jsxs("div",{className:j.panelPlaceholder,children:[l.jsx(Hn,{size:28,strokeWidth:1.5}),l.jsx("p",{children:"Select a conversation to view details"})]})})]})]}),l.jsx(Ta,{children:xe&&l.jsx(Pe.div,{className:j.modalBackdrop,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Qe(!1),children:l.jsxs(Pe.div,{className:j.userProfileModal,initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},onClick:T=>T.stopPropagation(),children:[l.jsx("button",{className:j.modalClose,onClick:()=>Qe(!1),type:"button",children:l.jsx(da,{size:18})}),lt&&l.jsxs("div",{className:j.modalLoading,children:[l.jsx(ta,{size:32,className:j.spinner}),l.jsx("span",{children:"Loading profile..."})]}),G&&!lt&&l.jsx("div",{className:j.modalError,children:l.jsx("span",{children:G})}),!lt&&!G&&$e&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:j.userProfileAvatar,children:[$e.avatar?l.jsx("img",{src:At($e.avatar),alt:$e.username}):l.jsx("span",{children:Tn($e.username)}),l.jsx("div",{className:`${j.userProfileStatus} ${y($e.id)?j.online:""}`})]}),l.jsx("h2",{className:j.userProfileName,children:$e.username}),l.jsxs("p",{className:j.userProfileHandle,children:["@",$e.username]}),l.jsxs("div",{className:j.userProfileOnlineBadge,children:[l.jsx("div",{className:`${j.onlineDot} ${y($e.id)?j.online:""}`}),l.jsx("span",{children:y($e.id)?"Online":"Offline"})]}),l.jsxs("div",{className:j.userProfileSection,children:[l.jsx("h4",{children:"About"}),l.jsx("p",{children:$e.bio||"No bio set"})]}),(Te||ot)&&l.jsxs("div",{className:j.blockStatusBanner,children:[l.jsx(La,{size:16}),l.jsx("span",{children:ot&&Te?"You have blocked each other":ot?"This user has blocked you":"You have blocked this user"})]}),l.jsxs("div",{className:j.userProfileActions,children:[!(Te||ot)&&l.jsxs("button",{className:`${j.userProfileBtn} ${j.primary}`,onClick:()=>Io($e.id),type:"button",children:[l.jsx(Dr,{size:16}),"Send Message"]}),Te?l.jsxs("button",{className:`${j.userProfileBtn} ${j.unblock}`,onClick:()=>Bn($e.id),type:"button",children:[l.jsx(Yp,{size:16}),"Unblock User"]}):l.jsxs("button",{className:`${j.userProfileBtn} ${j.block}`,onClick:()=>_u($e.id),type:"button",children:[l.jsx(Co,{size:16}),"Block User"]}),s&&s.type==="dm"&&l.jsxs("button",{className:`${j.userProfileBtn} ${j.danger}`,onClick:async()=>{if(confirm("Delete this conversation? This cannot be undone."))try{await Me.deleteConversation(s.id),se.success("Conversation deleted"),Qe(!1),f(null),h()}catch(T){console.error("Failed to delete conversation:",T),se.error("Failed to delete conversation")}},type:"button",children:[l.jsx(Ci,{size:16}),"Delete Conversation"]})]})]})]})})}),l.jsx(Ta,{children:rt&&s&&s.type!=="dm"&&l.jsx(Pe.div,{className:j.modalBackdrop,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>ie(!1),children:l.jsxs(Pe.div,{className:j.groupProfileModal,initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},onClick:T=>T.stopPropagation(),children:[l.jsx("button",{className:j.modalClose,onClick:()=>ie(!1),type:"button",children:l.jsx(da,{size:18})}),ds&&l.jsxs("div",{className:j.modalLoading,children:[l.jsx(ta,{size:32,className:j.spinner}),l.jsx("span",{children:"Loading profile..."})]}),!ds&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:j.groupProfileAvatar,children:mt?.avatar||s.avatar?l.jsx("img",{src:At(mt?.avatar||s.avatar),alt:s.name}):s.type==="group"?l.jsx(Hn,{size:40}):l.jsx(Br,{size:40})}),l.jsx("h2",{className:j.groupProfileName,children:mt?.name||s.name}),(mt?.description||s.description)&&l.jsx("p",{className:j.groupProfileDesc,children:mt?.description||s.description}),l.jsxs("div",{className:j.groupProfileStatsGrid,children:[l.jsxs("div",{className:j.groupProfileStatBox,children:[l.jsx(Hn,{size:18}),l.jsx("span",{className:j.statValue,children:mt?.members?.length||s.members?.length||0}),l.jsx("span",{className:j.statLabel,children:"Members"})]}),l.jsxs("div",{className:j.groupProfileStatBox,children:[l.jsx("div",{className:j.onlineDotLarge}),l.jsx("span",{className:`${j.statValue} ${j.online}`,children:(mt?.members||s.members||[]).filter(T=>y(T.userId||T.id||"")).length}),l.jsx("span",{className:j.statLabel,children:"Online"})]}),l.jsxs("div",{className:j.groupProfileStatBox,children:[l.jsx(Nb,{size:18}),l.jsx("span",{className:j.statValue,children:new Date(mt?.createdAt||s.createdAt).toLocaleDateString()}),l.jsx("span",{className:j.statLabel,children:"Created"})]})]}),mt?.privacy&&l.jsxs("div",{className:j.privacyBadge,children:[l.jsx(ls,{size:14}),l.jsx("span",{children:mt.privacy==="public"?"Public":"Private"}),bs()&&l.jsx("button",{className:j.privacyToggle,onClick:()=>Ho(mt.privacy==="public"?"private":"public"),type:"button",children:"Change"})]}),(bs()||Z||pe)&&l.jsxs("div",{className:j.adminActionsBar,children:[(bs()||Z)&&l.jsxs("button",{className:j.adminActionBtn,onClick:()=>oe(!0),type:"button",children:[l.jsx(qp,{size:16}),"Add Member"]}),(bs()||ue)&&l.jsxs("button",{className:j.adminActionBtn,onClick:()=>{qe(!0),vl()},type:"button",children:[l.jsx(La,{size:16}),"Banned Users"]})]}),(mt?.members?.length||s.members?.length||0)>5&&l.jsxs("div",{className:j.memberSearchBox,children:[l.jsx(Mc,{size:14}),l.jsx("input",{type:"text",placeholder:"Search members...",value:ga,onChange:T=>Ma(T.target.value)}),ga&&l.jsx("button",{onClick:()=>Ma(""),type:"button",children:l.jsx(da,{size:12})})]}),l.jsx("div",{className:j.groupMemberList,children:(()=>{const T=wu(),Y=bs();return l.jsxs(l.Fragment,{children:[T.admin.length>0&&l.jsxs("div",{className:j.memberRoleSection,children:[l.jsxs("div",{className:j.memberRoleHeader,children:[l.jsx(Db,{size:12}),l.jsxs("span",{children:["Admins (",T.admin.length,")"]})]}),T.admin.map(ce=>l.jsx(op,{member:ce,isCurrentUser:(ce.userId||ce.id)===t?.id,isOnline:y(ce.userId||ce.id||""),lastSeen:H(ce.userId||ce.id||""),canManage:!1,onViewProfile:()=>{ie(!1),$a(ce.userId||ce.id),Qe(!0)}},ce.userId||ce.id))]}),T.moderator.length>0&&l.jsxs("div",{className:j.memberRoleSection,children:[l.jsxs("div",{className:j.memberRoleHeader,children:[l.jsx(ls,{size:12}),l.jsxs("span",{children:["Moderators (",T.moderator.length,")"]})]}),T.moderator.map(ce=>l.jsx(op,{member:ce,isCurrentUser:(ce.userId||ce.id)===t?.id,isOnline:y(ce.userId||ce.id||""),lastSeen:H(ce.userId||ce.id||""),canManage:Y,onViewProfile:()=>{ie(!1),$a(ce.userId||ce.id),Qe(!0)},onKick:()=>Lo(ce.userId||ce.id),onBan:()=>Po(ce.userId||ce.id)},ce.userId||ce.id))]}),T.member.length>0&&l.jsxs("div",{className:j.memberRoleSection,children:[l.jsxs("div",{className:j.memberRoleHeader,children:[l.jsx(Hn,{size:12}),l.jsxs("span",{children:["Members (",T.member.length,")"]})]}),T.member.map(ce=>l.jsx(op,{member:ce,isCurrentUser:(ce.userId||ce.id)===t?.id,isOnline:y(ce.userId||ce.id||""),lastSeen:H(ce.userId||ce.id||""),canManage:Y||Be||ue,onViewProfile:()=>{ie(!1),$a(ce.userId||ce.id),Qe(!0)},onKick:Y?()=>Lo(ce.userId||ce.id):void 0,onBan:Y||ue?()=>Po(ce.userId||ce.id):void 0},ce.userId||ce.id))]})]})})()}),l.jsx("div",{className:j.groupProfileActions,children:bs()?l.jsxs("button",{className:`${j.groupProfileBtn} ${j.danger}`,onClick:bl,type:"button",children:[l.jsx(Ci,{size:16}),"Delete ",s.type==="channel"?"Channel":"Group"]}):l.jsxs("button",{className:`${j.groupProfileBtn} ${j.leave}`,onClick:xl,type:"button",children:[l.jsx(Gp,{size:16}),"Leave ",s.type==="channel"?"Channel":"Group"]})})]})]})})}),l.jsx(Ta,{children:ne&&l.jsx(Pe.div,{className:j.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>oe(!1),children:l.jsxs(Pe.div,{className:j.subModal,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:T=>T.stopPropagation(),children:[l.jsxs("div",{className:j.subModalHeader,children:[l.jsx("h3",{children:"Add Member"}),l.jsx("button",{onClick:()=>oe(!1),type:"button",children:l.jsx(da,{size:18})})]}),l.jsxs("div",{className:j.subModalSearch,children:[l.jsx(Mc,{size:14}),l.jsx("input",{type:"text",placeholder:"Search users to add...",value:ye,onChange:T=>Oo(T.target.value),autoFocus:!0})]}),l.jsxs("div",{className:j.subModalContent,children:[Ve&&l.jsxs("div",{className:j.subModalLoading,children:[l.jsx(ta,{size:20,className:j.spinner}),l.jsx("span",{children:"Searching..."})]}),!Ve&&ye&&_e.length===0&&l.jsx("div",{className:j.subModalEmpty,children:"No users found"}),_e.map(T=>l.jsxs("div",{className:j.subModalItem,children:[l.jsx("div",{className:j.subModalItemAvatar,children:T.avatar?l.jsx("img",{src:At(T.avatar),alt:T.username}):l.jsx("span",{children:Tn(T.username)})}),l.jsx("div",{className:j.subModalItemInfo,children:l.jsx("span",{className:j.subModalItemName,children:T.username})}),l.jsx("button",{className:j.subModalItemBtn,onClick:()=>vs(T.id),type:"button",children:"Add"})]},T.id))]})]})})}),l.jsx(Ta,{children:it&&l.jsx(Pe.div,{className:j.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>qe(!1),children:l.jsxs(Pe.div,{className:j.subModal,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:T=>T.stopPropagation(),children:[l.jsxs("div",{className:j.subModalHeader,children:[l.jsxs("h3",{children:[l.jsx(La,{size:18}),"Banned Users"]}),l.jsx("button",{onClick:()=>qe(!1),type:"button",children:l.jsx(da,{size:18})})]}),l.jsxs("div",{className:j.subModalContent,children:[fn&&l.jsxs("div",{className:j.subModalLoading,children:[l.jsx(ta,{size:20,className:j.spinner}),l.jsx("span",{children:"Loading..."})]}),!fn&&ct.length===0&&l.jsx("div",{className:j.subModalEmpty,children:"No banned users"}),ct.map(T=>l.jsxs("div",{className:j.subModalItem,children:[l.jsx("div",{className:j.subModalItemAvatar,children:T.avatarUrl?l.jsx("img",{src:At(T.avatarUrl),alt:T.username}):l.jsx("span",{children:Tn(T.username)})}),l.jsxs("div",{className:j.subModalItemInfo,children:[l.jsx("span",{className:j.subModalItemName,children:T.username}),l.jsxs("span",{className:j.subModalItemMeta,children:["Banned ",new Date(T.bannedAt).toLocaleDateString()]})]}),l.jsx("button",{className:`${j.subModalItemBtn} ${j.unban}`,onClick:()=>xs(T.userId,T.username),type:"button",children:"Unban"})]},T.userId))]})]})})})]})},op=({member:t,isCurrentUser:n,isOnline:s,lastSeen:o,canManage:c,onViewProfile:u,onKick:f,onBan:h})=>{const[m,g]=b.useState(!1);return l.jsxs("div",{className:j.memberListItem,children:[l.jsxs("div",{className:j.memberListItemMain,onClick:u,children:[l.jsxs("div",{className:j.memberListItemAvatar,children:[t.user?.avatar?l.jsx("img",{src:At(t.user.avatar),alt:t.user?.username}):l.jsx("span",{children:Tn(t.user?.username||"U")}),l.jsx("div",{className:`${j.memberListItemOnline} ${s?j.online:""}`})]}),l.jsxs("div",{className:j.memberListItemInfo,children:[l.jsxs("span",{className:j.memberListItemName,children:[t.user?.username||"Unknown",n&&" (You)"]}),l.jsx("span",{className:j.memberListItemStatus,children:s?"Online":o?`Last seen ${su(o)}`:"Offline"})]})]}),c&&!n&&t.role!=="admin"&&l.jsxs("div",{className:j.memberListItemActions,children:[l.jsx("button",{className:j.memberActionBtn,onClick:y=>{y.stopPropagation(),g(!m)},type:"button",children:l.jsx(Xc,{size:14})}),m&&l.jsxs("div",{className:j.memberActionsMenu,children:[f&&l.jsxs("button",{onClick:y=>{y.stopPropagation(),f(),g(!1)},type:"button",children:[l.jsx(Ci,{size:12}),"Remove"]}),h&&l.jsxs("button",{onClick:y=>{y.stopPropagation(),h(),g(!1)},type:"button",className:j.danger,children:[l.jsx(La,{size:12}),"Ban"]})]})]})]})},TU=cu(t=>({notifications:[],isLoading:!1,error:null,loadNotifications:async()=>{t({isLoading:!0,error:null});try{const n=await _o.getNotifications();t({notifications:n,isLoading:!1})}catch(n){const s=n.response?.data?.message||"Failed to load notifications";t({error:s,isLoading:!1})}},markAsSeen:async n=>{t({error:null});try{await _o.markAsSeen(n),t(s=>({notifications:s.notifications.map(o=>o.id===n?{...o,seen:!0}:o)}))}catch(s){const o=s.response?.data?.message||"Failed to mark notification as seen";t({error:o})}},markMultipleAsSeen:async n=>{t({error:null});try{await _o.markMultipleAsSeen(n),t(s=>({notifications:s.notifications.map(o=>n.includes(o.id)?{...o,seen:!0}:o)}))}catch(s){const o=s.response?.data?.message||"Failed to mark notifications as seen";t({error:o})}},markAllAsSeen:async()=>{t({error:null});try{await _o.markAllAsSeen(),t(n=>({notifications:n.notifications.map(s=>({...s,seen:!0}))}))}catch(n){const s=n.response?.data?.message||"Failed to mark all notifications as seen";t({error:s})}},clearError:()=>t({error:null}),handleNewNotification:n=>{console.log("[NotificationStore] New notification:",n),t(s=>{const o={id:n.messageId,messageId:n.messageId,chatId:n.chatId,chatName:n.chatName,chatAvatar:n.chatAvatar,senderName:n.senderName,content:n.content,sentTime:n.sentTime,seen:!1,fileUrl:n.fileUrl};return s.notifications.some(u=>u.chatId===o.chatId&&u.sentTime===o.sentTime)?s:{notifications:[o,...s.notifications]}})}}));function kU(){const{isAuthenticated:t}=il();return console.log("[AppRoutes] Rendering with isAuthenticated:",t),l.jsxs(rw,{children:[l.jsx(gi,{path:"/",element:t?l.jsx(mo,{to:"/dashboard-new",replace:!0}):l.jsx(aA,{})}),l.jsx(gi,{path:"/login",element:t?l.jsx(mo,{to:"/dashboard-new",replace:!0}):l.jsx(UA,{})}),l.jsx(gi,{path:"/register",element:t?l.jsx(mo,{to:"/dashboard-new",replace:!0}):l.jsx(VA,{})}),l.jsx(gi,{path:"/forgot-password",element:t?l.jsx(mo,{to:"/dashboard-new",replace:!0}):l.jsx(YA,{})}),l.jsx(gi,{path:"/dashboard",element:l.jsx(Hv,{children:l.jsx(H4,{})})}),l.jsx(gi,{path:"/dashboard-new",element:l.jsx(Hv,{children:l.jsx(jU,{})})}),l.jsx(gi,{path:"*",element:l.jsx(mo,{to:"/",replace:!0})})]})}function AU(){const{isAuthenticated:t}=il(),[n,s]=b.useState([]);b.useEffect(()=>So.subscribe(s),[]);const o=c=>{So.remove(c)};b.useEffect(()=>{(async()=>{console.log("[App] Initializing auth from localStorage..."),await Ct.getState().initializeAuth(),console.log("[App] Auth initialization complete")})()},[]),b.useEffect(()=>{if(!t){console.log("[App] Not authenticated, skipping SignalR initialization");return}console.log("[App] Setting up SignalR event handlers...");const c=Oe.getState(),u=TU.getState();return tt.setEventHandlers({onUserOnline:h=>{c.handleUserOnline(h)},onUserOffline:h=>{c.handleUserOffline({...h,lastSeen:h.lastSeen||new Date().toISOString()})},onReceiveMessage:h=>{c.handleReceiveMessage(h)},onMessageEdited:h=>{c.handleMessageEdited(h)},onMessageDeleted:h=>{c.handleMessageDeleted(h)},onReactionAdded:h=>{c.handleReactionAdded(h)},onReactionRemoved:h=>{c.handleReactionRemoved(h)},onUserTyping:h=>{c.handleUserTyping(h)},onUserStoppedTyping:h=>{c.handleUserStoppedTyping(h)},onNewNotification:h=>{u.handleNewNotification(h)},onMessagePinned:h=>{c.handleMessagePinned(h)},onMessageUnpinned:h=>{c.handleMessageUnpinned(h)},onAddedToChat:h=>{c.handleAddedToChat(h)},onNewConversation:h=>{c.handleNewConversation(h)},onConversationCreated:h=>{c.handleConversationCreated(h)},onPermissionGranted:h=>{c.handlePermissionGranted(h)},onPermissionRevoked:h=>{c.handlePermissionRevoked(h)},onAllPermissionsRevoked:h=>{c.handleAllPermissionsRevoked(h)},onUserBlockedYou:h=>{c.handleUserBlockedYou(h)},onYouBlockedUser:h=>{c.handleYouBlockedUser(h)},onUserUnblockedYou:h=>{c.handleUserUnblockedYou(h)},onYouUnblockedUser:h=>{c.handleYouUnblockedUser(h)},onChatDeleted:h=>{c.handleChatDeleted(h)},onRemovedFromChat:h=>{c.handleRemovedFromChat(h)},onMessagesMarkedSeen:h=>{c.handleMessagesMarkedSeen(h)},onError:h=>{console.error("[App] SignalR Error:",h)}}),(async()=>{try{console.log("[App] Starting SignalR connection..."),await tt.start(),console.log("[App] SignalR connected successfully");const h=Oe.getState();h.chats.length===0&&(console.log("[App] Loading chats before fetching presence states..."),await h.loadChats());const m=new Set;h.chats.forEach(y=>{y.members&&y.members.forEach(v=>{const _=v.userId||v.id||v.user?.id;_&&m.add(_)})});const g=Array.from(m);if(g.length>0){console.log("[App] Fetching presence states for",g.length,"users:",g);try{const y=await tt.getPresenceStates(g);console.log("[App] Received presence states:",y),console.log("[App] Presence states type check:",typeof y,Object.keys(y).length,"keys"),h.setInitialPresenceStates(y),console.log("[App] Presence states initialized successfully"),console.log("[App] OnlineUsers map after init:",h.onlineUsers)}catch(y){console.error("[App] Failed to fetch initial presence states:",y)}}else console.log("[App] No user IDs available from chat list - presence will be fetched when chats are opened")}catch(h){console.error("[App] Failed to start SignalR:",h)}})(),()=>{console.log("[App] Stopping SignalR connection..."),tt.stop()}},[t]);try{return l.jsxs(l.Fragment,{children:[l.jsx(ow,{children:l.jsx(kU,{})}),l.jsx(WR,{toasts:n,onClose:o}),l.jsx(QR,{})]})}catch(c){return console.error("App Error:",c),l.jsxs("div",{style:{padding:"20px",color:"red"},children:[l.jsx("h1",{children:"Error Loading Application"}),l.jsx("p",{children:"Check browser console for details"}),l.jsx("pre",{children:String(c)})]})}}const tS=document.getElementById("root");if(!tS)throw new Error("Root element not found");console.log("React app starting...");Bw.createRoot(tS).render(l.jsx(b.StrictMode,{children:l.jsx(AU,{})}));console.log("React app rendered");export{Ee as a};
