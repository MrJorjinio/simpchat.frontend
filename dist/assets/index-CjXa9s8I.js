const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/permission.service-D1eHFXSx.js","assets/vendor-DW-3xwEg.js","assets/ui-CEf3pEc0.js","assets/reaction.service-YsLyku3x.js"])))=>i.map(i=>d[i]);
import{a as j_,b as T_,R as La,N as Jo,r as b,L as as,u as Lh,g as xb,B as k_,c as M_,d as Wi}from"./vendor-DW-3xwEg.js";import{M as Al,S as Jf,A as yi,L as Ph,B as Hh,Z as E_,a as rr,U as jn,C as Ds,E as Rl,b as lr,c as vb,d as eh,K as A_,X as En,T as R_,I as $h,e as bb,f as Fh,g as Rs,h as Gd,i as Sb,j as D_,k as ln,l as th,m as wl,P as Dl,n as Vh,R as ns,o as wb,G as _b,p as N_,q as jl,r as z_,s as B_,t as Nd,u as U_,v as I_,w as _d,x as Cb,y as Nl,z as O_,D as jb,F as L_,H as nh,J as P_,N as H_,O as $_,Q as yf,V as Jx,W as ev,Y as F_,_ as V_,$ as q_}from"./ui-CEf3pEc0.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function s(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=s(c);fetch(c.href,d)}})();var xf={exports:{}},yl={};var tv;function G_(){if(tv)return yl;tv=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(o,c,d){var p=null;if(d!==void 0&&(p=""+d),c.key!==void 0&&(p=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:t,type:o,key:p,ref:c!==void 0?c:null,props:d}}return yl.Fragment=n,yl.jsx=s,yl.jsxs=s,yl}var nv;function W_(){return nv||(nv=1,xf.exports=G_()),xf.exports}var r=W_(),vf={exports:{}},xl={},bf={exports:{}},Sf={};var av;function Y_(){return av||(av=1,(function(t){function n(B,ne){var le=B.length;B.push(ne);e:for(;0<le;){var we=le-1>>>1,$e=B[we];if(0<c($e,ne))B[we]=ne,B[le]=$e,le=we;else break e}}function s(B){return B.length===0?null:B[0]}function o(B){if(B.length===0)return null;var ne=B[0],le=B.pop();if(le!==ne){B[0]=le;e:for(var we=0,$e=B.length,_e=$e>>>1;we<_e;){var Ae=2*(we+1)-1,je=B[Ae],ie=Ae+1,Ce=B[ie];if(0>c(je,le))ie<$e&&0>c(Ce,je)?(B[we]=Ce,B[ie]=le,we=ie):(B[we]=je,B[Ae]=le,we=Ae);else if(ie<$e&&0>c(Ce,le))B[we]=Ce,B[ie]=le,we=ie;else break e}}return ne}function c(B,ne){var le=B.sortIndex-ne.sortIndex;return le!==0?le:B.id-ne.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var p=Date,h=p.now();t.unstable_now=function(){return p.now()-h}}var m=[],g=[],y=1,v=null,S=3,j=!1,C=!1,T=!1,E=!1,z=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function Y(B){for(var ne=s(g);ne!==null;){if(ne.callback===null)o(g);else if(ne.startTime<=B)o(g),ne.sortIndex=ne.expirationTime,n(m,ne);else break;ne=s(g)}}function P(B){if(T=!1,Y(B),!C)if(s(m)!==null)C=!0,te||(te=!0,qe());else{var ne=s(g);ne!==null&&Te(P,ne.startTime-B)}}var te=!1,re=-1,K=5,ge=-1;function me(){return E?!0:!(t.unstable_now()-ge<K)}function He(){if(E=!1,te){var B=t.unstable_now();ge=B;var ne=!0;try{e:{C=!1,T&&(T=!1,L(re),re=-1),j=!0;var le=S;try{t:{for(Y(B),v=s(m);v!==null&&!(v.expirationTime>B&&me());){var we=v.callback;if(typeof we=="function"){v.callback=null,S=v.priorityLevel;var $e=we(v.expirationTime<=B);if(B=t.unstable_now(),typeof $e=="function"){v.callback=$e,Y(B),ne=!0;break t}v===s(m)&&o(m),Y(B)}else o(m);v=s(m)}if(v!==null)ne=!0;else{var _e=s(g);_e!==null&&Te(P,_e.startTime-B),ne=!1}}break e}finally{v=null,S=le,j=!1}ne=void 0}}finally{ne?qe():te=!1}}}var qe;if(typeof R=="function")qe=function(){R(He)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,Re=Ke.port2;Ke.port1.onmessage=He,qe=function(){Re.postMessage(null)}}else qe=function(){z(He,0)};function Te(B,ne){re=z(function(){B(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(B){switch(S){case 1:case 2:case 3:var ne=3;break;default:ne=S}var le=S;S=ne;try{return B()}finally{S=le}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(B,ne){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var le=S;S=B;try{return ne()}finally{S=le}},t.unstable_scheduleCallback=function(B,ne,le){var we=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?we+le:we):le=we,B){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=le+$e,B={id:y++,callback:ne,priorityLevel:B,startTime:le,expirationTime:$e,sortIndex:-1},le>we?(B.sortIndex=le,n(g,B),s(m)===null&&B===s(g)&&(T?(L(re),re=-1):T=!0,Te(P,le-we))):(B.sortIndex=$e,n(m,B),C||j||(C=!0,te||(te=!0,qe()))),B},t.unstable_shouldYield=me,t.unstable_wrapCallback=function(B){var ne=S;return function(){var le=S;S=ne;try{return B.apply(this,arguments)}finally{S=le}}}})(Sf)),Sf}var sv;function X_(){return sv||(sv=1,bf.exports=Y_()),bf.exports}var iv;function K_(){if(iv)return xl;iv=1;var t=X_(),n=j_(),s=T_();function o(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var a=e,i=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(i=a.return),e=a.return;while(e)}return a.tag===3?i:null}function p(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function h(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function m(e){if(d(e)!==e)throw Error(o(188))}function g(e){var a=e.alternate;if(!a){if(a=d(e),a===null)throw Error(o(188));return a!==e?null:e}for(var i=e,l=a;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(l=u.return,l!==null){i=l;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return m(u),e;if(f===l)return m(u),a;f=f.sibling}throw Error(o(188))}if(i.return!==l.return)i=u,l=f;else{for(var x=!1,w=u.child;w;){if(w===i){x=!0,i=u,l=f;break}if(w===l){x=!0,l=u,i=f;break}w=w.sibling}if(!x){for(w=f.child;w;){if(w===i){x=!0,i=f,l=u;break}if(w===l){x=!0,l=f,i=u;break}w=w.sibling}if(!x)throw Error(o(189))}}if(i.alternate!==l)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:a}function y(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=y(e),a!==null)return a;e=e.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),R=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),ge=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),He=Symbol.iterator;function qe(e){return e===null||typeof e!="object"?null:(e=He&&e[He]||e["@@iterator"],typeof e=="function"?e:null)}var Ke=Symbol.for("react.client.reference");function Re(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ke?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case z:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case te:return"SuspenseList";case ge:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case R:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case Y:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return a=e.displayName||null,a!==null?a:Re(e.type)||"Memo";case K:a=e._payload,e=e._init;try{return Re(e(a))}catch{}}return null}var Te=Array.isArray,B=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},we=[],$e=-1;function _e(e){return{current:e}}function Ae(e){0>$e||(e.current=we[$e],we[$e]=null,$e--)}function je(e,a){$e++,we[$e]=e.current,e.current=a}var ie=_e(null),Ce=_e(null),he=_e(null),Tt=_e(null);function kt(e,a){switch(je(he,a),je(Ce,e),je(ie,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?wx(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=wx(a),e=_x(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ae(ie),je(ie,e)}function Mt(){Ae(ie),Ae(Ce),Ae(he)}function Et(e){e.memoizedState!==null&&je(Tt,e);var a=ie.current,i=_x(a,e.type);a!==i&&(je(Ce,e),je(ie,i))}function un(e){Ce.current===e&&(Ae(ie),Ae(Ce)),Tt.current===e&&(Ae(Tt),fl._currentValue=le)}var At,pn;function xt(e){if(At===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);At=a&&a[1]||"",pn=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+At+e+pn}var On=!1;function dt(e,a){if(!e||On)return"";On=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(V){var H=V}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(V){H=V}e.call(ee.prototype)}}else{try{throw Error()}catch(V){H=V}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(V){if(V&&H&&typeof V.stack=="string")return[V.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),x=f[0],w=f[1];if(x&&w){var k=x.split(`
`),O=w.split(`
`);for(u=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;if(l===k.length||u===O.length)for(l=k.length-1,u=O.length-1;1<=l&&0<=u&&k[l]!==O[u];)u--;for(;1<=l&&0<=u;l--,u--)if(k[l]!==O[u]){if(l!==1||u!==1)do if(l--,u--,0>u||k[l]!==O[u]){var X=`
`+k[l].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=l&&0<=u);break}}}finally{On=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?xt(i):""}function bt(e,a){switch(e.tag){case 26:case 27:case 5:return xt(e.type);case 16:return xt("Lazy");case 13:return e.child!==a&&a!==null?xt("Suspense Fallback"):xt("Suspense");case 19:return xt("SuspenseList");case 0:case 15:return dt(e.type,!1);case 11:return dt(e.type.render,!1);case 1:return dt(e.type,!0);case 31:return xt("Activity");default:return""}}function Ht(e){try{var a="",i=null;do a+=bt(e,i),i=e,e=e.return;while(e);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var bn=Object.prototype.hasOwnProperty,st=t.unstable_scheduleCallback,en=t.unstable_cancelCallback,tn=t.unstable_shouldYield,Wn=t.unstable_requestPaint,oe=t.unstable_now,de=t.unstable_getCurrentPriorityLevel,ht=t.unstable_ImmediatePriority,ut=t.unstable_UserBlockingPriority,It=t.unstable_NormalPriority,Sn=t.unstable_LowPriority,$=t.unstable_IdlePriority,W=t.log,I=t.unstable_setDisableYieldValue,pe=null,ve=null;function Le(e){if(typeof W=="function"&&I(e),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(pe,e)}catch{}}var pt=Math.clz32?Math.clz32:Qn,Ln=Math.log,ma=Math.LN2;function Qn(e){return e>>>=0,e===0?32:31-(Ln(e)/ma|0)|0}var Bs=256,Pn=262144,os=4194304;function ga(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Us(e,a,i){var l=e.pendingLanes;if(l===0)return 0;var u=0,f=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var w=l&134217727;return w!==0?(l=w&~f,l!==0?u=ga(l):(x&=w,x!==0?u=ga(x):i||(i=w&~e,i!==0&&(u=ga(i))))):(w=l&~f,w!==0?u=ga(w):x!==0?u=ga(x):i||(i=l&~e,i!==0&&(u=ga(i)))),u===0?0:a!==0&&a!==u&&(a&f)===0&&(f=u&-u,i=a&-a,f>=i||f===32&&(i&4194048)!==0)?a:u}function ae(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function ue(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Me(){var e=os;return os<<=1,(os&62914560)===0&&(os=4194304),e}function Ue(e){for(var a=[],i=0;31>i;i++)a.push(e);return a}function ye(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,a,i,l,u,f){var x=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var w=e.entanglements,k=e.expirationTimes,O=e.hiddenUpdates;for(i=x&~i;0<i;){var X=31-pt(i),ee=1<<X;w[X]=0,k[X]=-1;var H=O[X];if(H!==null)for(O[X]=null,X=0;X<H.length;X++){var V=H[X];V!==null&&(V.lane&=-536870913)}i&=~ee}l!==0&&ze(e,l,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(x&~a))}function ze(e,a,i){e.pendingLanes|=a,e.suspendedLanes&=~a;var l=31-pt(a);e.entangledLanes|=a,e.entanglements[l]=e.entanglements[l]|1073741824|i&261930}function ce(e,a){var i=e.entangledLanes|=a;for(e=e.entanglements;i;){var l=31-pt(i),u=1<<l;u&a|e[l]&a&&(e[l]|=a),i&=~u}}function nn(e,a){var i=a&-a;return i=(i&42)!==0?1:Je(i),(i&(e.suspendedLanes|a))!==0?0:i}function Je(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function it(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function $t(){var e=ne.p;return e!==0?e:(e=window.event,e===void 0?32:Gx(e.type))}function Ft(e,a){var i=ne.p;try{return ne.p=e,a()}finally{ne.p=i}}var ot=Math.random().toString(36).slice(2),Ze="__reactFiber$"+ot,Rn="__reactProps$"+ot,rs="__reactContainer$"+ot,po="__reactEvents$"+ot,vr="__reactListeners$"+ot,Zl="__reactHandles$"+ot,br="__reactResources$"+ot,Si="__reactMarker$"+ot;function fo(e){delete e[Ze],delete e[Rn],delete e[po],delete e[vr],delete e[Zl]}function ls(e){var a=e[Ze];if(a)return a;for(var i=e.parentNode;i;){if(a=i[rs]||i[Ze]){if(i=a.alternate,a.child!==null||i!==null&&i.child!==null)for(e=Ax(e);e!==null;){if(i=e[Ze])return i;e=Ax(e)}return a}e=i,i=e.parentNode}return null}function Is(e){if(e=e[Ze]||e[rs]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function Os(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(o(33))}function cs(e){var a=e[br];return a||(a=e[br]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function fn(e){e[Si]=!0}var Jl=new Set,Sr={};function ds(e,a){Ls(e,a),Ls(e+"Capture",a)}function Ls(e,a){for(Sr[e]=a,e=0;e<a.length;e++)Jl.add(a[e])}var wi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$a={},wr={};function _r(e){return bn.call(wr,e)?!0:bn.call($a,e)?!1:wi.test(e)?wr[e]=!0:($a[e]=!0,!1)}function _i(e,a,i){if(_r(a))if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+i)}}function Fa(e,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+i)}}function ya(e,a,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(a,i,""+l)}}function Dn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cr(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function an(e,a,i){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var u=l.get,f=l.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return u.call(this)},set:function(x){i=""+x,f.call(this,x)}}),Object.defineProperty(e,a,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(x){i=""+x},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function ho(e){if(!e._valueTracker){var a=Cr(e)?"checked":"value";e._valueTracker=an(e,a,""+e[a])}}function Hn(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var i=a.getValue(),l="";return e&&(l=Cr(e)?e.checked?"true":"false":e.value),e=l,e!==i?(a.setValue(e),!0):!1}function Ps(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var mo=/[\n"\\]/g;function $n(e){return e.replace(mo,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Hs(e,a,i,l,u,f,x,w){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),a!=null?x==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+Dn(a)):e.value!==""+Dn(a)&&(e.value=""+Dn(a)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),a!=null?$s(e,x,Dn(a)):i!=null?$s(e,x,Dn(i)):l!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+Dn(w):e.removeAttribute("name")}function jr(e,a,i,l,u,f,x,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),a!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||a!=null)){ho(e);return}i=i!=null?""+Dn(i):"",a=a!=null?""+Dn(a):i,w||a===e.value||(e.value=a),e.defaultValue=a}l=l??u,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=w?e.checked:!!l,e.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x),ho(e)}function $s(e,a,i){a==="number"&&Ps(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function us(e,a,i,l){if(e=e.options,a){a={};for(var u=0;u<i.length;u++)a["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=a.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Dn(i),a=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}a!==null||e[u].disabled||(a=e[u])}a!==null&&(a.selected=!0)}}function Qe(e,a,i){if(a!=null&&(a=""+Dn(a),a!==e.value&&(e.value=a),i==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=i!=null?""+Dn(i):""}function Ci(e,a,i,l){if(a==null){if(l!=null){if(i!=null)throw Error(o(92));if(Te(l)){if(1<l.length)throw Error(o(93));l=l[0]}i=l}i==null&&(i=""),a=i}i=Dn(a),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l),ho(e)}function sn(e,a){if(a){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=a;return}}e.textContent=a}var ji=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ps(e,a,i){var l=a.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":l?e.setProperty(a,i):typeof i!="number"||i===0||ji.has(a)?a==="float"?e.cssFloat=i:e[a]=(""+i).trim():e[a]=i+"px"}function Tr(e,a,i){if(a!=null&&typeof a!="object")throw Error(o(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var u in a)l=a[u],a.hasOwnProperty(u)&&i[u]!==l&&ps(e,u,l)}else for(var f in a)a.hasOwnProperty(f)&&ps(e,f,a[f])}function go(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ec=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ti(e){return tc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function xa(){}var yo=null;function wn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fs=null,Va=null;function kr(e){var a=Is(e);if(a&&(e=a.stateNode)){var i=e[Rn]||null;e:switch(e=a.stateNode,a.type){case"input":if(Hs(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),a=i.name,i.type==="radio"&&a!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+$n(""+a)+'"][type="radio"]'),a=0;a<i.length;a++){var l=i[a];if(l!==e&&l.form===e.form){var u=l[Rn]||null;if(!u)throw Error(o(90));Hs(l,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(a=0;a<i.length;a++)l=i[a],l.form===e.form&&Hn(l)}break e;case"textarea":Qe(e,i.value,i.defaultValue);break e;case"select":a=i.value,a!=null&&us(e,!!i.multiple,a,!1)}}}var ki=!1;function Mr(e,a,i){if(ki)return e(a,i);ki=!0;try{var l=e(a);return l}finally{if(ki=!1,(fs!==null||Va!==null)&&(Gc(),fs&&(a=fs,e=Va,Va=fs=null,kr(a),e)))for(a=0;a<e.length;a++)kr(e[a])}}function qa(e,a){var i=e.stateNode;if(i===null)return null;var l=i[Rn]||null;if(l===null)return null;i=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,a,typeof i));return i}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(va)try{var Fs={};Object.defineProperty(Fs,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch{Ga=!1}var ba=null,xo=null,Vs=null;function nc(){if(Vs)return Vs;var e,a=xo,i=a.length,l,u="value"in ba?ba.value:ba.textContent,f=u.length;for(e=0;e<i&&a[e]===u[e];e++);var x=i-e;for(l=1;l<=x&&a[i-l]===u[f-l];l++);return Vs=u.slice(e,1<l?1-l:void 0)}function Mi(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function vo(){return!0}function ac(){return!1}function Fn(e){function a(i,l,u,f,x){this._reactName=i,this._targetInst=u,this.type=l,this.nativeEvent=f,this.target=x,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?vo:ac,this.isPropagationStopped=ac,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=vo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=vo)},persist:function(){},isPersistent:vo}),a}var hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bo=Fn(hs),qs=v({},hs,{view:0,detail:0}),iu=Fn(qs),So,Er,Gs,wo=v({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gs&&(Gs&&e.type==="mousemove"?(So=e.screenX-Gs.screenX,Er=e.screenY-Gs.screenY):Er=So=0,Gs=e),So)},movementY:function(e){return"movementY"in e?e.movementY:Er}}),sc=Fn(wo),Ar=v({},wo,{dataTransfer:0}),ou=Fn(Ar),ic=v({},qs,{relatedTarget:0}),Rr=Fn(ic),oc=v({},hs,{animationName:0,elapsedTime:0,pseudoElement:0}),ru=Fn(oc),lu=v({},hs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ei=Fn(lu),cu=v({},hs,{data:0}),rc=Fn(cu),du={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pu(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=uu[e])?!!a[e]:!1}function Dr(){return pu}var fu=v({},qs,{key:function(e){if(e.key){var a=du[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Mi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wa[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dr,charCode:function(e){return e.type==="keypress"?Mi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lc=Fn(fu),hu=v({},wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cc=Fn(hu),mu=v({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dr}),gu=Fn(mu),yu=v({},hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),xu=Fn(yu),vu=v({},wo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Sa=Fn(vu),dc=v({},hs,{newState:0,oldState:0}),bu=Fn(dc),Su=[9,13,27,32],Nr=va&&"CompositionEvent"in window,Ai=null;va&&"documentMode"in document&&(Ai=document.documentMode);var wu=va&&"TextEvent"in window&&!Ai,_=va&&(!Nr||Ai&&8<Ai&&11>=Ai),J=" ",xe=!1;function Fe(e,a){switch(e){case"keyup":return Su.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function St(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ft=!1;function Ya(e,a){switch(e){case"compositionend":return St(a);case"keypress":return a.which!==32?null:(xe=!0,J);case"textInput":return e=a.data,e===J&&xe?null:e;default:return null}}function Ri(e,a){if(ft)return e==="compositionend"||!Nr&&Fe(e,a)?(e=nc(),Vs=xo=ba=null,ft=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return _&&a.locale!=="ko"?null:a.data;default:return null}}var Ot={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xa(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!Ot[e.type]:a==="textarea"}function zr(e,a,i,l){fs?Va?Va.push(l):Va=[l]:fs=l,a=Jc(a,"onChange"),0<a.length&&(i=new bo("onChange","change",null,i,l),e.push({event:i,listeners:a}))}var Br=null,Ur=null;function ZS(e){gx(e,0)}function uc(e){var a=Os(e);if(Hn(a))return e}function Bm(e,a){if(e==="change")return a}var Um=!1;if(va){var _u;if(va){var Cu="oninput"in document;if(!Cu){var Im=document.createElement("div");Im.setAttribute("oninput","return;"),Cu=typeof Im.oninput=="function"}_u=Cu}else _u=!1;Um=_u&&(!document.documentMode||9<document.documentMode)}function Om(){Br&&(Br.detachEvent("onpropertychange",Lm),Ur=Br=null)}function Lm(e){if(e.propertyName==="value"&&uc(Ur)){var a=[];zr(a,Ur,e,wn(e)),Mr(ZS,a)}}function JS(e,a,i){e==="focusin"?(Om(),Br=a,Ur=i,Br.attachEvent("onpropertychange",Lm)):e==="focusout"&&Om()}function ew(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uc(Ur)}function tw(e,a){if(e==="click")return uc(a)}function nw(e,a){if(e==="input"||e==="change")return uc(a)}function aw(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var oa=typeof Object.is=="function"?Object.is:aw;function Ir(e,a){if(oa(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var i=Object.keys(e),l=Object.keys(a);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var u=i[l];if(!bn.call(a,u)||!oa(e[u],a[u]))return!1}return!0}function Pm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hm(e,a){var i=Pm(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=a&&l>=a)return{node:i,offset:a-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Pm(i)}}function $m(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?$m(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Fm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=Ps(e.document);a instanceof e.HTMLIFrameElement;){try{var i=typeof a.contentWindow.location.href=="string"}catch{i=!1}if(i)e=a.contentWindow;else break;a=Ps(e.document)}return a}function ju(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var sw=va&&"documentMode"in document&&11>=document.documentMode,_o=null,Tu=null,Or=null,ku=!1;function Vm(e,a,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ku||_o==null||_o!==Ps(l)||(l=_o,"selectionStart"in l&&ju(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Or&&Ir(Or,l)||(Or=l,l=Jc(Tu,"onSelect"),0<l.length&&(a=new bo("onSelect","select",null,a,i),e.push({event:a,listeners:l}),a.target=_o)))}function Di(e,a){var i={};return i[e.toLowerCase()]=a.toLowerCase(),i["Webkit"+e]="webkit"+a,i["Moz"+e]="moz"+a,i}var Co={animationend:Di("Animation","AnimationEnd"),animationiteration:Di("Animation","AnimationIteration"),animationstart:Di("Animation","AnimationStart"),transitionrun:Di("Transition","TransitionRun"),transitionstart:Di("Transition","TransitionStart"),transitioncancel:Di("Transition","TransitionCancel"),transitionend:Di("Transition","TransitionEnd")},Mu={},qm={};va&&(qm=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function Ni(e){if(Mu[e])return Mu[e];if(!Co[e])return e;var a=Co[e],i;for(i in a)if(a.hasOwnProperty(i)&&i in qm)return Mu[e]=a[i];return e}var Gm=Ni("animationend"),Wm=Ni("animationiteration"),Ym=Ni("animationstart"),iw=Ni("transitionrun"),ow=Ni("transitionstart"),rw=Ni("transitioncancel"),Xm=Ni("transitionend"),Km=new Map,Eu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Eu.push("scrollEnd");function Na(e,a){Km.set(e,a),ds(a,[e])}var pc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},wa=[],jo=0,Au=0;function fc(){for(var e=jo,a=Au=jo=0;a<e;){var i=wa[a];wa[a++]=null;var l=wa[a];wa[a++]=null;var u=wa[a];wa[a++]=null;var f=wa[a];if(wa[a++]=null,l!==null&&u!==null){var x=l.pending;x===null?u.next=u:(u.next=x.next,x.next=u),l.pending=u}f!==0&&Qm(i,u,f)}}function hc(e,a,i,l){wa[jo++]=e,wa[jo++]=a,wa[jo++]=i,wa[jo++]=l,Au|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Ru(e,a,i,l){return hc(e,a,i,l),mc(e)}function zi(e,a){return hc(e,null,null,a),mc(e)}function Qm(e,a,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var u=!1,f=e.return;f!==null;)f.childLanes|=i,l=f.alternate,l!==null&&(l.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&a!==null&&(u=31-pt(i),e=f.hiddenUpdates,l=e[u],l===null?e[u]=[a]:l.push(a),a.lane=i|536870912),f):null}function mc(e){if(50<ol)throw ol=0,Pp=null,Error(o(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var To={};function lw(e,a,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(e,a,i,l){return new lw(e,a,i,l)}function Du(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ms(e,a){var i=e.alternate;return i===null?(i=ra(e.tag,a,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=a,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,a=e.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Zm(e,a){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,a=i.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function gc(e,a,i,l,u,f){var x=0;if(l=e,typeof e=="function")Du(e)&&(x=1);else if(typeof e=="string")x=f_(e,i,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ge:return e=ra(31,i,a,u),e.elementType=ge,e.lanes=f,e;case T:return Bi(i.children,u,f,a);case E:x=8,u|=24;break;case z:return e=ra(12,i,a,u|2),e.elementType=z,e.lanes=f,e;case P:return e=ra(13,i,a,u),e.elementType=P,e.lanes=f,e;case te:return e=ra(19,i,a,u),e.elementType=te,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:x=10;break e;case L:x=9;break e;case Y:x=11;break e;case re:x=14;break e;case K:x=16,l=null;break e}x=29,i=Error(o(130,e===null?"null":typeof e,"")),l=null}return a=ra(x,i,a,u),a.elementType=e,a.type=l,a.lanes=f,a}function Bi(e,a,i,l){return e=ra(7,e,l,a),e.lanes=i,e}function Nu(e,a,i){return e=ra(6,e,null,a),e.lanes=i,e}function Jm(e){var a=ra(18,null,null,0);return a.stateNode=e,a}function zu(e,a,i){return a=ra(4,e.children!==null?e.children:[],e.key,a),a.lanes=i,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var eg=new WeakMap;function _a(e,a){if(typeof e=="object"&&e!==null){var i=eg.get(e);return i!==void 0?i:(a={value:e,source:a,stack:Ht(a)},eg.set(e,a),a)}return{value:e,source:a,stack:Ht(a)}}var ko=[],Mo=0,yc=null,Lr=0,Ca=[],ja=0,Ws=null,Ka=1,Qa="";function gs(e,a){ko[Mo++]=Lr,ko[Mo++]=yc,yc=e,Lr=a}function tg(e,a,i){Ca[ja++]=Ka,Ca[ja++]=Qa,Ca[ja++]=Ws,Ws=e;var l=Ka;e=Qa;var u=32-pt(l)-1;l&=~(1<<u),i+=1;var f=32-pt(a)+u;if(30<f){var x=u-u%5;f=(l&(1<<x)-1).toString(32),l>>=x,u-=x,Ka=1<<32-pt(a)+u|i<<u|l,Qa=f+e}else Ka=1<<f|i<<u|l,Qa=e}function Bu(e){e.return!==null&&(gs(e,1),tg(e,1,0))}function Uu(e){for(;e===yc;)yc=ko[--Mo],ko[Mo]=null,Lr=ko[--Mo],ko[Mo]=null;for(;e===Ws;)Ws=Ca[--ja],Ca[ja]=null,Qa=Ca[--ja],Ca[ja]=null,Ka=Ca[--ja],Ca[ja]=null}function ng(e,a){Ca[ja++]=Ka,Ca[ja++]=Qa,Ca[ja++]=Ws,Ka=a.id,Qa=a.overflow,Ws=e}var Nn=null,Lt=null,ct=!1,Ys=null,Ta=!1,Iu=Error(o(519));function Xs(e){var a=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pr(_a(a,e)),Iu}function ag(e){var a=e.stateNode,i=e.type,l=e.memoizedProps;switch(a[Ze]=e,a[Rn]=l,i){case"dialog":tt("cancel",a),tt("close",a);break;case"iframe":case"object":case"embed":tt("load",a);break;case"video":case"audio":for(i=0;i<ll.length;i++)tt(ll[i],a);break;case"source":tt("error",a);break;case"img":case"image":case"link":tt("error",a),tt("load",a);break;case"details":tt("toggle",a);break;case"input":tt("invalid",a),jr(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":tt("invalid",a);break;case"textarea":tt("invalid",a),Ci(a,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||a.textContent===""+i||l.suppressHydrationWarning===!0||bx(a.textContent,i)?(l.popover!=null&&(tt("beforetoggle",a),tt("toggle",a)),l.onScroll!=null&&tt("scroll",a),l.onScrollEnd!=null&&tt("scrollend",a),l.onClick!=null&&(a.onclick=xa),a=!0):a=!1,a||Xs(e,!0)}function sg(e){for(Nn=e.return;Nn;)switch(Nn.tag){case 5:case 31:case 13:Ta=!1;return;case 27:case 3:Ta=!0;return;default:Nn=Nn.return}}function Eo(e){if(e!==Nn)return!1;if(!ct)return sg(e),ct=!0,!1;var a=e.tag,i;if((i=a!==3&&a!==27)&&((i=a===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||tf(e.type,e.memoizedProps)),i=!i),i&&Lt&&Xs(e),sg(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Lt=Ex(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Lt=Ex(e)}else a===27?(a=Lt,ci(e.type)?(e=rf,rf=null,Lt=e):Lt=a):Lt=Nn?Ma(e.stateNode.nextSibling):null;return!0}function Ui(){Lt=Nn=null,ct=!1}function Ou(){var e=Ys;return e!==null&&(ta===null?ta=e:ta.push.apply(ta,e),Ys=null),e}function Pr(e){Ys===null?Ys=[e]:Ys.push(e)}var Lu=_e(null),Ii=null,ys=null;function Ks(e,a,i){je(Lu,a._currentValue),a._currentValue=i}function xs(e){e._currentValue=Lu.current,Ae(Lu)}function Pu(e,a,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),e===i)break;e=e.return}}function Hu(e,a,i,l){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var x=u.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=u;for(var k=0;k<a.length;k++)if(w.context===a[k]){f.lanes|=i,w=f.alternate,w!==null&&(w.lanes|=i),Pu(f.return,i,e),l||(x=null);break e}f=w.next}}else if(u.tag===18){if(x=u.return,x===null)throw Error(o(341));x.lanes|=i,f=x.alternate,f!==null&&(f.lanes|=i),Pu(x,i,e),x=null}else x=u.child;if(x!==null)x.return=u;else for(x=u;x!==null;){if(x===e){x=null;break}if(u=x.sibling,u!==null){u.return=x.return,x=u;break}x=x.return}u=x}}function Ao(e,a,i,l){e=null;for(var u=a,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var x=u.alternate;if(x===null)throw Error(o(387));if(x=x.memoizedProps,x!==null){var w=u.type;oa(u.pendingProps.value,x.value)||(e!==null?e.push(w):e=[w])}}else if(u===Tt.current){if(x=u.alternate,x===null)throw Error(o(387));x.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(fl):e=[fl])}u=u.return}e!==null&&Hu(a,e,i,l),a.flags|=262144}function xc(e){for(e=e.firstContext;e!==null;){if(!oa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Oi(e){Ii=e,ys=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function zn(e){return ig(Ii,e)}function vc(e,a){return Ii===null&&Oi(e),ig(e,a)}function ig(e,a){var i=a._currentValue;if(a={context:a,memoizedValue:i,next:null},ys===null){if(e===null)throw Error(o(308));ys=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else ys=ys.next=a;return i}var cw=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){a.aborted=!0,e.forEach(function(i){return i()})}},dw=t.unstable_scheduleCallback,uw=t.unstable_NormalPriority,hn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $u(){return{controller:new cw,data:new Map,refCount:0}}function Hr(e){e.refCount--,e.refCount===0&&dw(uw,function(){e.controller.abort()})}var $r=null,Fu=0,Ro=0,Do=null;function pw(e,a){if($r===null){var i=$r=[];Fu=0,Ro=Gp(),Do={status:"pending",value:void 0,then:function(l){i.push(l)}}}return Fu++,a.then(og,og),a}function og(){if(--Fu===0&&$r!==null){Do!==null&&(Do.status="fulfilled");var e=$r;$r=null,Ro=0,Do=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function fw(e,a){var i=[],l={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return e.then(function(){l.status="fulfilled",l.value=a;for(var u=0;u<i.length;u++)(0,i[u])(a)},function(u){for(l.status="rejected",l.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),l}var rg=B.S;B.S=function(e,a){Vy=oe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&pw(e,a),rg!==null&&rg(e,a)};var Li=_e(null);function Vu(){var e=Li.current;return e!==null?e:zt.pooledCache}function bc(e,a){a===null?je(Li,Li.current):je(Li,a.pool)}function lg(){var e=Vu();return e===null?null:{parent:hn._currentValue,pool:e}}var No=Error(o(460)),qu=Error(o(474)),Sc=Error(o(542)),wc={then:function(){}};function cg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function dg(e,a,i){switch(i=e[i],i===void 0?e.push(a):i!==a&&(a.then(xa,xa),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,pg(e),e;default:if(typeof a.status=="string")a.then(xa,xa);else{if(e=zt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=a,e.status="pending",e.then(function(l){if(a.status==="pending"){var u=a;u.status="fulfilled",u.value=l}},function(l){if(a.status==="pending"){var u=a;u.status="rejected",u.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,pg(e),e}throw Hi=a,No}}function Pi(e){try{var a=e._init;return a(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Hi=i,No):i}}var Hi=null;function ug(){if(Hi===null)throw Error(o(459));var e=Hi;return Hi=null,e}function pg(e){if(e===No||e===Sc)throw Error(o(483))}var zo=null,Fr=0;function _c(e){var a=Fr;return Fr+=1,zo===null&&(zo=[]),dg(zo,e,a)}function Vr(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Cc(e,a){throw a.$$typeof===S?Error(o(525)):(e=Object.prototype.toString.call(a),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function fg(e){function a(N,A){if(e){var U=N.deletions;U===null?(N.deletions=[A],N.flags|=16):U.push(A)}}function i(N,A){if(!e)return null;for(;A!==null;)a(N,A),A=A.sibling;return null}function l(N){for(var A=new Map;N!==null;)N.key!==null?A.set(N.key,N):A.set(N.index,N),N=N.sibling;return A}function u(N,A){return N=ms(N,A),N.index=0,N.sibling=null,N}function f(N,A,U){return N.index=U,e?(U=N.alternate,U!==null?(U=U.index,U<A?(N.flags|=67108866,A):U):(N.flags|=67108866,A)):(N.flags|=1048576,A)}function x(N){return e&&N.alternate===null&&(N.flags|=67108866),N}function w(N,A,U,Q){return A===null||A.tag!==6?(A=Nu(U,N.mode,Q),A.return=N,A):(A=u(A,U),A.return=N,A)}function k(N,A,U,Q){var De=U.type;return De===T?X(N,A,U.props.children,Q,U.key):A!==null&&(A.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===K&&Pi(De)===A.type)?(A=u(A,U.props),Vr(A,U),A.return=N,A):(A=gc(U.type,U.key,U.props,null,N.mode,Q),Vr(A,U),A.return=N,A)}function O(N,A,U,Q){return A===null||A.tag!==4||A.stateNode.containerInfo!==U.containerInfo||A.stateNode.implementation!==U.implementation?(A=zu(U,N.mode,Q),A.return=N,A):(A=u(A,U.children||[]),A.return=N,A)}function X(N,A,U,Q,De){return A===null||A.tag!==7?(A=Bi(U,N.mode,Q,De),A.return=N,A):(A=u(A,U),A.return=N,A)}function ee(N,A,U){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Nu(""+A,N.mode,U),A.return=N,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case j:return U=gc(A.type,A.key,A.props,null,N.mode,U),Vr(U,A),U.return=N,U;case C:return A=zu(A,N.mode,U),A.return=N,A;case K:return A=Pi(A),ee(N,A,U)}if(Te(A)||qe(A))return A=Bi(A,N.mode,U,null),A.return=N,A;if(typeof A.then=="function")return ee(N,_c(A),U);if(A.$$typeof===R)return ee(N,vc(N,A),U);Cc(N,A)}return null}function H(N,A,U,Q){var De=A!==null?A.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return De!==null?null:w(N,A,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case j:return U.key===De?k(N,A,U,Q):null;case C:return U.key===De?O(N,A,U,Q):null;case K:return U=Pi(U),H(N,A,U,Q)}if(Te(U)||qe(U))return De!==null?null:X(N,A,U,Q,null);if(typeof U.then=="function")return H(N,A,_c(U),Q);if(U.$$typeof===R)return H(N,A,vc(N,U),Q);Cc(N,U)}return null}function V(N,A,U,Q,De){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return N=N.get(U)||null,w(A,N,""+Q,De);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case j:return N=N.get(Q.key===null?U:Q.key)||null,k(A,N,Q,De);case C:return N=N.get(Q.key===null?U:Q.key)||null,O(A,N,Q,De);case K:return Q=Pi(Q),V(N,A,U,Q,De)}if(Te(Q)||qe(Q))return N=N.get(U)||null,X(A,N,Q,De,null);if(typeof Q.then=="function")return V(N,A,U,_c(Q),De);if(Q.$$typeof===R)return V(N,A,U,vc(A,Q),De);Cc(A,Q)}return null}function Se(N,A,U,Q){for(var De=null,gt=null,ke=A,Xe=A=0,lt=null;ke!==null&&Xe<U.length;Xe++){ke.index>Xe?(lt=ke,ke=null):lt=ke.sibling;var yt=H(N,ke,U[Xe],Q);if(yt===null){ke===null&&(ke=lt);break}e&&ke&&yt.alternate===null&&a(N,ke),A=f(yt,A,Xe),gt===null?De=yt:gt.sibling=yt,gt=yt,ke=lt}if(Xe===U.length)return i(N,ke),ct&&gs(N,Xe),De;if(ke===null){for(;Xe<U.length;Xe++)ke=ee(N,U[Xe],Q),ke!==null&&(A=f(ke,A,Xe),gt===null?De=ke:gt.sibling=ke,gt=ke);return ct&&gs(N,Xe),De}for(ke=l(ke);Xe<U.length;Xe++)lt=V(ke,N,Xe,U[Xe],Q),lt!==null&&(e&&lt.alternate!==null&&ke.delete(lt.key===null?Xe:lt.key),A=f(lt,A,Xe),gt===null?De=lt:gt.sibling=lt,gt=lt);return e&&ke.forEach(function(hi){return a(N,hi)}),ct&&gs(N,Xe),De}function Oe(N,A,U,Q){if(U==null)throw Error(o(151));for(var De=null,gt=null,ke=A,Xe=A=0,lt=null,yt=U.next();ke!==null&&!yt.done;Xe++,yt=U.next()){ke.index>Xe?(lt=ke,ke=null):lt=ke.sibling;var hi=H(N,ke,yt.value,Q);if(hi===null){ke===null&&(ke=lt);break}e&&ke&&hi.alternate===null&&a(N,ke),A=f(hi,A,Xe),gt===null?De=hi:gt.sibling=hi,gt=hi,ke=lt}if(yt.done)return i(N,ke),ct&&gs(N,Xe),De;if(ke===null){for(;!yt.done;Xe++,yt=U.next())yt=ee(N,yt.value,Q),yt!==null&&(A=f(yt,A,Xe),gt===null?De=yt:gt.sibling=yt,gt=yt);return ct&&gs(N,Xe),De}for(ke=l(ke);!yt.done;Xe++,yt=U.next())yt=V(ke,N,Xe,yt.value,Q),yt!==null&&(e&&yt.alternate!==null&&ke.delete(yt.key===null?Xe:yt.key),A=f(yt,A,Xe),gt===null?De=yt:gt.sibling=yt,gt=yt);return e&&ke.forEach(function(C_){return a(N,C_)}),ct&&gs(N,Xe),De}function Nt(N,A,U,Q){if(typeof U=="object"&&U!==null&&U.type===T&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case j:e:{for(var De=U.key;A!==null;){if(A.key===De){if(De=U.type,De===T){if(A.tag===7){i(N,A.sibling),Q=u(A,U.props.children),Q.return=N,N=Q;break e}}else if(A.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===K&&Pi(De)===A.type){i(N,A.sibling),Q=u(A,U.props),Vr(Q,U),Q.return=N,N=Q;break e}i(N,A);break}else a(N,A);A=A.sibling}U.type===T?(Q=Bi(U.props.children,N.mode,Q,U.key),Q.return=N,N=Q):(Q=gc(U.type,U.key,U.props,null,N.mode,Q),Vr(Q,U),Q.return=N,N=Q)}return x(N);case C:e:{for(De=U.key;A!==null;){if(A.key===De)if(A.tag===4&&A.stateNode.containerInfo===U.containerInfo&&A.stateNode.implementation===U.implementation){i(N,A.sibling),Q=u(A,U.children||[]),Q.return=N,N=Q;break e}else{i(N,A);break}else a(N,A);A=A.sibling}Q=zu(U,N.mode,Q),Q.return=N,N=Q}return x(N);case K:return U=Pi(U),Nt(N,A,U,Q)}if(Te(U))return Se(N,A,U,Q);if(qe(U)){if(De=qe(U),typeof De!="function")throw Error(o(150));return U=De.call(U),Oe(N,A,U,Q)}if(typeof U.then=="function")return Nt(N,A,_c(U),Q);if(U.$$typeof===R)return Nt(N,A,vc(N,U),Q);Cc(N,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,A!==null&&A.tag===6?(i(N,A.sibling),Q=u(A,U),Q.return=N,N=Q):(i(N,A),Q=Nu(U,N.mode,Q),Q.return=N,N=Q),x(N)):i(N,A)}return function(N,A,U,Q){try{Fr=0;var De=Nt(N,A,U,Q);return zo=null,De}catch(ke){if(ke===No||ke===Sc)throw ke;var gt=ra(29,ke,null,N.mode);return gt.lanes=Q,gt.return=N,gt}finally{}}}var $i=fg(!0),hg=fg(!1),Qs=!1;function Gu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wu(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Zs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Js(e,a,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(vt&2)!==0){var u=l.pending;return u===null?a.next=a:(a.next=u.next,u.next=a),l.pending=a,a=mc(e),Qm(e,null,i),a}return hc(e,l,a,i),mc(e)}function qr(e,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var l=a.lanes;l&=e.pendingLanes,i|=l,a.lanes=i,ce(e,i)}}function Yu(e,a){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var x={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=x:f=f.next=x,i=i.next}while(i!==null);f===null?u=f=a:f=f.next=a}else u=f=a;i={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=a:e.next=a,i.lastBaseUpdate=a}var Xu=!1;function Gr(){if(Xu){var e=Do;if(e!==null)throw e}}function Wr(e,a,i,l){Xu=!1;var u=e.updateQueue;Qs=!1;var f=u.firstBaseUpdate,x=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var k=w,O=k.next;k.next=null,x===null?f=O:x.next=O,x=k;var X=e.alternate;X!==null&&(X=X.updateQueue,w=X.lastBaseUpdate,w!==x&&(w===null?X.firstBaseUpdate=O:w.next=O,X.lastBaseUpdate=k))}if(f!==null){var ee=u.baseState;x=0,X=O=k=null,w=f;do{var H=w.lane&-536870913,V=H!==w.lane;if(V?(rt&H)===H:(l&H)===H){H!==0&&H===Ro&&(Xu=!0),X!==null&&(X=X.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Se=e,Oe=w;H=a;var Nt=i;switch(Oe.tag){case 1:if(Se=Oe.payload,typeof Se=="function"){ee=Se.call(Nt,ee,H);break e}ee=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Oe.payload,H=typeof Se=="function"?Se.call(Nt,ee,H):Se,H==null)break e;ee=v({},ee,H);break e;case 2:Qs=!0}}H=w.callback,H!==null&&(e.flags|=64,V&&(e.flags|=8192),V=u.callbacks,V===null?u.callbacks=[H]:V.push(H))}else V={lane:H,tag:w.tag,payload:w.payload,callback:w.callback,next:null},X===null?(O=X=V,k=ee):X=X.next=V,x|=H;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;V=w,w=V.next,V.next=null,u.lastBaseUpdate=V,u.shared.pending=null}}while(!0);X===null&&(k=ee),u.baseState=k,u.firstBaseUpdate=O,u.lastBaseUpdate=X,f===null&&(u.shared.lanes=0),si|=x,e.lanes=x,e.memoizedState=ee}}function mg(e,a){if(typeof e!="function")throw Error(o(191,e));e.call(a)}function gg(e,a){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)mg(i[e],a)}var Bo=_e(null),jc=_e(0);function yg(e,a){e=ks,je(jc,e),je(Bo,a),ks=e|a.baseLanes}function Ku(){je(jc,ks),je(Bo,Bo.current)}function Qu(){ks=jc.current,Ae(Bo),Ae(jc)}var la=_e(null),ka=null;function ei(e){var a=e.alternate;je(on,on.current&1),je(la,e),ka===null&&(a===null||Bo.current!==null||a.memoizedState!==null)&&(ka=e)}function Zu(e){je(on,on.current),je(la,e),ka===null&&(ka=e)}function xg(e){e.tag===22?(je(on,on.current),je(la,e),ka===null&&(ka=e)):ti()}function ti(){je(on,on.current),je(la,la.current)}function ca(e){Ae(la),ka===e&&(ka=null),Ae(on)}var on=_e(0);function Tc(e){for(var a=e;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||sf(i)||of(i)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var vs=0,We=null,Rt=null,mn=null,kc=!1,Uo=!1,Fi=!1,Mc=0,Yr=0,Io=null,hw=0;function Kt(){throw Error(o(321))}function Ju(e,a){if(a===null)return!1;for(var i=0;i<a.length&&i<e.length;i++)if(!oa(e[i],a[i]))return!1;return!0}function ep(e,a,i,l,u,f){return vs=f,We=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,B.H=e===null||e.memoizedState===null?ty:mp,Fi=!1,f=i(l,u),Fi=!1,Uo&&(f=bg(a,i,l,u)),vg(e),f}function vg(e){B.H=Qr;var a=Rt!==null&&Rt.next!==null;if(vs=0,mn=Rt=We=null,kc=!1,Yr=0,Io=null,a)throw Error(o(300));e===null||gn||(e=e.dependencies,e!==null&&xc(e)&&(gn=!0))}function bg(e,a,i,l){We=e;var u=0;do{if(Uo&&(Io=null),Yr=0,Uo=!1,25<=u)throw Error(o(301));if(u+=1,mn=Rt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}B.H=ny,f=a(i,l)}while(Uo);return f}function mw(){var e=B.H,a=e.useState()[0];return a=typeof a.then=="function"?Xr(a):a,e=e.useState()[0],(Rt!==null?Rt.memoizedState:null)!==e&&(We.flags|=1024),a}function tp(){var e=Mc!==0;return Mc=0,e}function np(e,a,i){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~i}function ap(e){if(kc){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}kc=!1}vs=0,mn=Rt=We=null,Uo=!1,Yr=Mc=0,Io=null}function Yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?We.memoizedState=mn=e:mn=mn.next=e,mn}function rn(){if(Rt===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=Rt.next;var a=mn===null?We.memoizedState:mn.next;if(a!==null)mn=a,Rt=e;else{if(e===null)throw We.alternate===null?Error(o(467)):Error(o(310));Rt=e,e={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},mn===null?We.memoizedState=mn=e:mn=mn.next=e}return mn}function Ec(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xr(e){var a=Yr;return Yr+=1,Io===null&&(Io=[]),e=dg(Io,e,a),a=We,(mn===null?a.memoizedState:mn.next)===null&&(a=a.alternate,B.H=a===null||a.memoizedState===null?ty:mp),e}function Ac(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Xr(e);if(e.$$typeof===R)return zn(e)}throw Error(o(438,String(e)))}function sp(e){var a=null,i=We.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var l=We.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(u){return u.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=Ec(),We.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(e),l=0;l<e;l++)i[l]=me;return a.index++,i}function bs(e,a){return typeof a=="function"?a(e):a}function Rc(e){var a=rn();return ip(a,Rt,e)}function ip(e,a,i){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=i;var u=e.baseQueue,f=l.pending;if(f!==null){if(u!==null){var x=u.next;u.next=f.next,f.next=x}a.baseQueue=u=f,l.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{a=u.next;var w=x=null,k=null,O=a,X=!1;do{var ee=O.lane&-536870913;if(ee!==O.lane?(rt&ee)===ee:(vs&ee)===ee){var H=O.revertLane;if(H===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),ee===Ro&&(X=!0);else if((vs&H)===H){O=O.next,H===Ro&&(X=!0);continue}else ee={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},k===null?(w=k=ee,x=f):k=k.next=ee,We.lanes|=H,si|=H;ee=O.action,Fi&&i(f,ee),f=O.hasEagerState?O.eagerState:i(f,ee)}else H={lane:ee,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},k===null?(w=k=H,x=f):k=k.next=H,We.lanes|=ee,si|=ee;O=O.next}while(O!==null&&O!==a);if(k===null?x=f:k.next=w,!oa(f,e.memoizedState)&&(gn=!0,X&&(i=Do,i!==null)))throw i;e.memoizedState=f,e.baseState=x,e.baseQueue=k,l.lastRenderedState=f}return u===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function op(e){var a=rn(),i=a.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var l=i.dispatch,u=i.pending,f=a.memoizedState;if(u!==null){i.pending=null;var x=u=u.next;do f=e(f,x.action),x=x.next;while(x!==u);oa(f,a.memoizedState)||(gn=!0),a.memoizedState=f,a.baseQueue===null&&(a.baseState=f),i.lastRenderedState=f}return[f,l]}function Sg(e,a,i){var l=We,u=rn(),f=ct;if(f){if(i===void 0)throw Error(o(407));i=i()}else i=a();var x=!oa((Rt||u).memoizedState,i);if(x&&(u.memoizedState=i,gn=!0),u=u.queue,cp(Cg.bind(null,l,u,e),[e]),u.getSnapshot!==a||x||mn!==null&&mn.memoizedState.tag&1){if(l.flags|=2048,Oo(9,{destroy:void 0},_g.bind(null,l,u,i,a),null),zt===null)throw Error(o(349));f||(vs&127)!==0||wg(l,a,i)}return i}function wg(e,a,i){e.flags|=16384,e={getSnapshot:a,value:i},a=We.updateQueue,a===null?(a=Ec(),We.updateQueue=a,a.stores=[e]):(i=a.stores,i===null?a.stores=[e]:i.push(e))}function _g(e,a,i,l){a.value=i,a.getSnapshot=l,jg(a)&&Tg(e)}function Cg(e,a,i){return i(function(){jg(a)&&Tg(e)})}function jg(e){var a=e.getSnapshot;e=e.value;try{var i=a();return!oa(e,i)}catch{return!0}}function Tg(e){var a=zi(e,2);a!==null&&na(a,e,2)}function rp(e){var a=Yn();if(typeof e=="function"){var i=e;if(e=i(),Fi){Le(!0);try{i()}finally{Le(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},a}function kg(e,a,i,l){return e.baseState=i,ip(e,Rt,typeof l=="function"?l:bs)}function gw(e,a,i,l,u){if(zc(e))throw Error(o(485));if(e=a.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){f.listeners.push(x)}};B.T!==null?i(!0):f.isTransition=!1,l(f),i=a.pending,i===null?(f.next=a.pending=f,Mg(a,f)):(f.next=i.next,a.pending=i.next=f)}}function Mg(e,a){var i=a.action,l=a.payload,u=e.state;if(a.isTransition){var f=B.T,x={};B.T=x;try{var w=i(u,l),k=B.S;k!==null&&k(x,w),Eg(e,a,w)}catch(O){lp(e,a,O)}finally{f!==null&&x.types!==null&&(f.types=x.types),B.T=f}}else try{f=i(u,l),Eg(e,a,f)}catch(O){lp(e,a,O)}}function Eg(e,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){Ag(e,a,l)},function(l){return lp(e,a,l)}):Ag(e,a,i)}function Ag(e,a,i){a.status="fulfilled",a.value=i,Rg(a),e.state=i,a=e.pending,a!==null&&(i=a.next,i===a?e.pending=null:(i=i.next,a.next=i,Mg(e,i)))}function lp(e,a,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=i,Rg(a),a=a.next;while(a!==l)}e.action=null}function Rg(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Dg(e,a){return a}function Ng(e,a){if(ct){var i=zt.formState;if(i!==null){e:{var l=We;if(ct){if(Lt){t:{for(var u=Lt,f=Ta;u.nodeType!==8;){if(!f){u=null;break t}if(u=Ma(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){Lt=Ma(u.nextSibling),l=u.data==="F!";break e}}Xs(l)}l=!1}l&&(a=i[0])}}return i=Yn(),i.memoizedState=i.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dg,lastRenderedState:a},i.queue=l,i=Zg.bind(null,We,l),l.dispatch=i,l=rp(!1),f=hp.bind(null,We,!1,l.queue),l=Yn(),u={state:a,dispatch:null,action:e,pending:null},l.queue=u,i=gw.bind(null,We,u,f,i),u.dispatch=i,l.memoizedState=e,[a,i,!1]}function zg(e){var a=rn();return Bg(a,Rt,e)}function Bg(e,a,i){if(a=ip(e,a,Dg)[0],e=Rc(bs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=Xr(a)}catch(x){throw x===No?Sc:x}else l=a;a=rn();var u=a.queue,f=u.dispatch;return i!==a.memoizedState&&(We.flags|=2048,Oo(9,{destroy:void 0},yw.bind(null,u,i),null)),[l,f,e]}function yw(e,a){e.action=a}function Ug(e){var a=rn(),i=Rt;if(i!==null)return Bg(a,i,e);rn(),a=a.memoizedState,i=rn();var l=i.queue.dispatch;return i.memoizedState=e,[a,l,!1]}function Oo(e,a,i,l){return e={tag:e,create:i,deps:l,inst:a,next:null},a=We.updateQueue,a===null&&(a=Ec(),We.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,a.lastEffect=e),e}function Ig(){return rn().memoizedState}function Dc(e,a,i,l){var u=Yn();We.flags|=e,u.memoizedState=Oo(1|a,{destroy:void 0},i,l===void 0?null:l)}function Nc(e,a,i,l){var u=rn();l=l===void 0?null:l;var f=u.memoizedState.inst;Rt!==null&&l!==null&&Ju(l,Rt.memoizedState.deps)?u.memoizedState=Oo(a,f,i,l):(We.flags|=e,u.memoizedState=Oo(1|a,f,i,l))}function Og(e,a){Dc(8390656,8,e,a)}function cp(e,a){Nc(2048,8,e,a)}function xw(e){We.flags|=4;var a=We.updateQueue;if(a===null)a=Ec(),We.updateQueue=a,a.events=[e];else{var i=a.events;i===null?a.events=[e]:i.push(e)}}function Lg(e){var a=rn().memoizedState;return xw({ref:a,nextImpl:e}),function(){if((vt&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}function Pg(e,a){return Nc(4,2,e,a)}function Hg(e,a){return Nc(4,4,e,a)}function $g(e,a){if(typeof a=="function"){e=e();var i=a(e);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function Fg(e,a,i){i=i!=null?i.concat([e]):null,Nc(4,4,$g.bind(null,a,e),i)}function dp(){}function Vg(e,a){var i=rn();a=a===void 0?null:a;var l=i.memoizedState;return a!==null&&Ju(a,l[1])?l[0]:(i.memoizedState=[e,a],e)}function qg(e,a){var i=rn();a=a===void 0?null:a;var l=i.memoizedState;if(a!==null&&Ju(a,l[1]))return l[0];if(l=e(),Fi){Le(!0);try{e()}finally{Le(!1)}}return i.memoizedState=[l,a],l}function up(e,a,i){return i===void 0||(vs&1073741824)!==0&&(rt&261930)===0?e.memoizedState=a:(e.memoizedState=i,e=Gy(),We.lanes|=e,si|=e,i)}function Gg(e,a,i,l){return oa(i,a)?i:Bo.current!==null?(e=up(e,i,l),oa(e,a)||(gn=!0),e):(vs&42)===0||(vs&1073741824)!==0&&(rt&261930)===0?(gn=!0,e.memoizedState=i):(e=Gy(),We.lanes|=e,si|=e,a)}function Wg(e,a,i,l,u){var f=ne.p;ne.p=f!==0&&8>f?f:8;var x=B.T,w={};B.T=w,hp(e,!1,a,i);try{var k=u(),O=B.S;if(O!==null&&O(w,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var X=fw(k,l);Kr(e,a,X,pa(e))}else Kr(e,a,l,pa(e))}catch(ee){Kr(e,a,{then:function(){},status:"rejected",reason:ee},pa())}finally{ne.p=f,x!==null&&w.types!==null&&(x.types=w.types),B.T=x}}function vw(){}function pp(e,a,i,l){if(e.tag!==5)throw Error(o(476));var u=Yg(e).queue;Wg(e,u,a,le,i===null?vw:function(){return Xg(e),i(l)})}function Yg(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:le},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:i},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Xg(e){var a=Yg(e);a.next===null&&(a=e.alternate.memoizedState),Kr(e,a.next.queue,{},pa())}function fp(){return zn(fl)}function Kg(){return rn().memoizedState}function Qg(){return rn().memoizedState}function bw(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var i=pa();e=Zs(i);var l=Js(a,e,i);l!==null&&(na(l,a,i),qr(l,a,i)),a={cache:$u()},e.payload=a;return}a=a.return}}function Sw(e,a,i){var l=pa();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},zc(e)?Jg(a,i):(i=Ru(e,a,i,l),i!==null&&(na(i,e,l),ey(i,a,l)))}function Zg(e,a,i){var l=pa();Kr(e,a,i,l)}function Kr(e,a,i,l){var u={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(zc(e))Jg(a,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=a.lastRenderedReducer,f!==null))try{var x=a.lastRenderedState,w=f(x,i);if(u.hasEagerState=!0,u.eagerState=w,oa(w,x))return hc(e,a,u,0),zt===null&&fc(),!1}catch{}finally{}if(i=Ru(e,a,u,l),i!==null)return na(i,e,l),ey(i,a,l),!0}return!1}function hp(e,a,i,l){if(l={lane:2,revertLane:Gp(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},zc(e)){if(a)throw Error(o(479))}else a=Ru(e,i,l,2),a!==null&&na(a,e,2)}function zc(e){var a=e.alternate;return e===We||a!==null&&a===We}function Jg(e,a){Uo=kc=!0;var i=e.pending;i===null?a.next=a:(a.next=i.next,i.next=a),e.pending=a}function ey(e,a,i){if((i&4194048)!==0){var l=a.lanes;l&=e.pendingLanes,i|=l,a.lanes=i,ce(e,i)}}var Qr={readContext:zn,use:Ac,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useLayoutEffect:Kt,useInsertionEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useSyncExternalStore:Kt,useId:Kt,useHostTransitionStatus:Kt,useFormState:Kt,useActionState:Kt,useOptimistic:Kt,useMemoCache:Kt,useCacheRefresh:Kt};Qr.useEffectEvent=Kt;var ty={readContext:zn,use:Ac,useCallback:function(e,a){return Yn().memoizedState=[e,a===void 0?null:a],e},useContext:zn,useEffect:Og,useImperativeHandle:function(e,a,i){i=i!=null?i.concat([e]):null,Dc(4194308,4,$g.bind(null,a,e),i)},useLayoutEffect:function(e,a){return Dc(4194308,4,e,a)},useInsertionEffect:function(e,a){Dc(4,2,e,a)},useMemo:function(e,a){var i=Yn();a=a===void 0?null:a;var l=e();if(Fi){Le(!0);try{e()}finally{Le(!1)}}return i.memoizedState=[l,a],l},useReducer:function(e,a,i){var l=Yn();if(i!==void 0){var u=i(a);if(Fi){Le(!0);try{i(a)}finally{Le(!1)}}}else u=a;return l.memoizedState=l.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},l.queue=e,e=e.dispatch=Sw.bind(null,We,e),[l.memoizedState,e]},useRef:function(e){var a=Yn();return e={current:e},a.memoizedState=e},useState:function(e){e=rp(e);var a=e.queue,i=Zg.bind(null,We,a);return a.dispatch=i,[e.memoizedState,i]},useDebugValue:dp,useDeferredValue:function(e,a){var i=Yn();return up(i,e,a)},useTransition:function(){var e=rp(!1);return e=Wg.bind(null,We,e.queue,!0,!1),Yn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,i){var l=We,u=Yn();if(ct){if(i===void 0)throw Error(o(407));i=i()}else{if(i=a(),zt===null)throw Error(o(349));(rt&127)!==0||wg(l,a,i)}u.memoizedState=i;var f={value:i,getSnapshot:a};return u.queue=f,Og(Cg.bind(null,l,f,e),[e]),l.flags|=2048,Oo(9,{destroy:void 0},_g.bind(null,l,f,i,a),null),i},useId:function(){var e=Yn(),a=zt.identifierPrefix;if(ct){var i=Qa,l=Ka;i=(l&~(1<<32-pt(l)-1)).toString(32)+i,a="_"+a+"R_"+i,i=Mc++,0<i&&(a+="H"+i.toString(32)),a+="_"}else i=hw++,a="_"+a+"r_"+i.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:fp,useFormState:Ng,useActionState:Ng,useOptimistic:function(e){var a=Yn();a.memoizedState=a.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=hp.bind(null,We,!0,i),i.dispatch=a,[e,a]},useMemoCache:sp,useCacheRefresh:function(){return Yn().memoizedState=bw.bind(null,We)},useEffectEvent:function(e){var a=Yn(),i={impl:e};return a.memoizedState=i,function(){if((vt&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}},mp={readContext:zn,use:Ac,useCallback:Vg,useContext:zn,useEffect:cp,useImperativeHandle:Fg,useInsertionEffect:Pg,useLayoutEffect:Hg,useMemo:qg,useReducer:Rc,useRef:Ig,useState:function(){return Rc(bs)},useDebugValue:dp,useDeferredValue:function(e,a){var i=rn();return Gg(i,Rt.memoizedState,e,a)},useTransition:function(){var e=Rc(bs)[0],a=rn().memoizedState;return[typeof e=="boolean"?e:Xr(e),a]},useSyncExternalStore:Sg,useId:Kg,useHostTransitionStatus:fp,useFormState:zg,useActionState:zg,useOptimistic:function(e,a){var i=rn();return kg(i,Rt,e,a)},useMemoCache:sp,useCacheRefresh:Qg};mp.useEffectEvent=Lg;var ny={readContext:zn,use:Ac,useCallback:Vg,useContext:zn,useEffect:cp,useImperativeHandle:Fg,useInsertionEffect:Pg,useLayoutEffect:Hg,useMemo:qg,useReducer:op,useRef:Ig,useState:function(){return op(bs)},useDebugValue:dp,useDeferredValue:function(e,a){var i=rn();return Rt===null?up(i,e,a):Gg(i,Rt.memoizedState,e,a)},useTransition:function(){var e=op(bs)[0],a=rn().memoizedState;return[typeof e=="boolean"?e:Xr(e),a]},useSyncExternalStore:Sg,useId:Kg,useHostTransitionStatus:fp,useFormState:Ug,useActionState:Ug,useOptimistic:function(e,a){var i=rn();return Rt!==null?kg(i,Rt,e,a):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:sp,useCacheRefresh:Qg};ny.useEffectEvent=Lg;function gp(e,a,i,l){a=e.memoizedState,i=i(l,a),i=i==null?a:v({},a,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var yp={enqueueSetState:function(e,a,i){e=e._reactInternals;var l=pa(),u=Zs(l);u.payload=a,i!=null&&(u.callback=i),a=Js(e,u,l),a!==null&&(na(a,e,l),qr(a,e,l))},enqueueReplaceState:function(e,a,i){e=e._reactInternals;var l=pa(),u=Zs(l);u.tag=1,u.payload=a,i!=null&&(u.callback=i),a=Js(e,u,l),a!==null&&(na(a,e,l),qr(a,e,l))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var i=pa(),l=Zs(i);l.tag=2,a!=null&&(l.callback=a),a=Js(e,l,i),a!==null&&(na(a,e,i),qr(a,e,i))}};function ay(e,a,i,l,u,f,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,x):a.prototype&&a.prototype.isPureReactComponent?!Ir(i,l)||!Ir(u,f):!0}function sy(e,a,i,l){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,l),a.state!==e&&yp.enqueueReplaceState(a,a.state,null)}function Vi(e,a){var i=a;if("ref"in a){i={};for(var l in a)l!=="ref"&&(i[l]=a[l])}if(e=e.defaultProps){i===a&&(i=v({},i));for(var u in e)i[u]===void 0&&(i[u]=e[u])}return i}function iy(e){pc(e)}function oy(e){console.error(e)}function ry(e){pc(e)}function Bc(e,a){try{var i=e.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function ly(e,a,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function xp(e,a,i){return i=Zs(i),i.tag=3,i.payload={element:null},i.callback=function(){Bc(e,a)},i}function cy(e){return e=Zs(e),e.tag=3,e}function dy(e,a,i,l){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=l.value;e.payload=function(){return u(f)},e.callback=function(){ly(a,i,l)}}var x=i.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){ly(a,i,l),typeof u!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function ww(e,a,i,l,u){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=i.alternate,a!==null&&Ao(a,i,u,!0),i=la.current,i!==null){switch(i.tag){case 31:case 13:return ka===null?Wc():i.alternate===null&&Qt===0&&(Qt=3),i.flags&=-257,i.flags|=65536,i.lanes=u,l===wc?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([l]):a.add(l),Fp(e,l,u)),!1;case 22:return i.flags|=65536,l===wc?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([l]):i.add(l)),Fp(e,l,u)),!1}throw Error(o(435,i.tag))}return Fp(e,l,u),Wc(),!1}if(ct)return a=la.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=u,l!==Iu&&(e=Error(o(422),{cause:l}),Pr(_a(e,i)))):(l!==Iu&&(a=Error(o(423),{cause:l}),Pr(_a(a,i))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,l=_a(l,i),u=xp(e.stateNode,l,u),Yu(e,u),Qt!==4&&(Qt=2)),!1;var f=Error(o(520),{cause:l});if(f=_a(f,i),il===null?il=[f]:il.push(f),Qt!==4&&(Qt=2),a===null)return!0;l=_a(l,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,e=u&-u,i.lanes|=e,e=xp(i.stateNode,l,e),Yu(i,e),!1;case 1:if(a=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ii===null||!ii.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=cy(u),dy(u,e,i,l),Yu(i,u),!1}i=i.return}while(i!==null);return!1}var vp=Error(o(461)),gn=!1;function Bn(e,a,i,l){a.child=e===null?hg(a,null,i,l):$i(a,e.child,i,l)}function uy(e,a,i,l,u){i=i.render;var f=a.ref;if("ref"in l){var x={};for(var w in l)w!=="ref"&&(x[w]=l[w])}else x=l;return Oi(a),l=ep(e,a,i,x,f,u),w=tp(),e!==null&&!gn?(np(e,a,u),Ss(e,a,u)):(ct&&w&&Bu(a),a.flags|=1,Bn(e,a,l,u),a.child)}function py(e,a,i,l,u){if(e===null){var f=i.type;return typeof f=="function"&&!Du(f)&&f.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=f,fy(e,a,f,l,u)):(e=gc(i.type,null,l,a,a.mode,u),e.ref=a.ref,e.return=a,a.child=e)}if(f=e.child,!kp(e,u)){var x=f.memoizedProps;if(i=i.compare,i=i!==null?i:Ir,i(x,l)&&e.ref===a.ref)return Ss(e,a,u)}return a.flags|=1,e=ms(f,l),e.ref=a.ref,e.return=a,a.child=e}function fy(e,a,i,l,u){if(e!==null){var f=e.memoizedProps;if(Ir(f,l)&&e.ref===a.ref)if(gn=!1,a.pendingProps=l=f,kp(e,u))(e.flags&131072)!==0&&(gn=!0);else return a.lanes=e.lanes,Ss(e,a,u)}return bp(e,a,i,l,u)}function hy(e,a,i,l){var u=l.children,f=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(l=a.child=e.child,u=0;l!==null;)u=u|l.lanes|l.childLanes,l=l.sibling;l=u&~f}else l=0,a.child=null;return my(e,a,f,i,l)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&bc(a,f!==null?f.cachePool:null),f!==null?yg(a,f):Ku(),xg(a);else return l=a.lanes=536870912,my(e,a,f!==null?f.baseLanes|i:i,i,l)}else f!==null?(bc(a,f.cachePool),yg(a,f),ti(),a.memoizedState=null):(e!==null&&bc(a,null),Ku(),ti());return Bn(e,a,u,i),a.child}function Zr(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function my(e,a,i,l,u){var f=Vu();return f=f===null?null:{parent:hn._currentValue,pool:f},a.memoizedState={baseLanes:i,cachePool:f},e!==null&&bc(a,null),Ku(),xg(a),e!==null&&Ao(e,a,l,!0),a.childLanes=u,null}function Uc(e,a){return a=Oc({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function gy(e,a,i){return $i(a,e.child,null,i),e=Uc(a,a.pendingProps),e.flags|=2,ca(a),a.memoizedState=null,e}function _w(e,a,i){var l=a.pendingProps,u=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(ct){if(l.mode==="hidden")return e=Uc(a,l),a.lanes=536870912,Zr(null,e);if(Zu(a),(e=Lt)?(e=Mx(e,Ta),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Ws!==null?{id:Ka,overflow:Qa}:null,retryLane:536870912,hydrationErrors:null},i=Jm(e),i.return=a,a.child=i,Nn=a,Lt=null)):e=null,e===null)throw Xs(a);return a.lanes=536870912,null}return Uc(a,l)}var f=e.memoizedState;if(f!==null){var x=f.dehydrated;if(Zu(a),u)if(a.flags&256)a.flags&=-257,a=gy(e,a,i);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(o(558));else if(gn||Ao(e,a,i,!1),u=(i&e.childLanes)!==0,gn||u){if(l=zt,l!==null&&(x=nn(l,i),x!==0&&x!==f.retryLane))throw f.retryLane=x,zi(e,x),na(l,e,x),vp;Wc(),a=gy(e,a,i)}else e=f.treeContext,Lt=Ma(x.nextSibling),Nn=a,ct=!0,Ys=null,Ta=!1,e!==null&&ng(a,e),a=Uc(a,l),a.flags|=4096;return a}return e=ms(e.child,{mode:l.mode,children:l.children}),e.ref=a.ref,a.child=e,e.return=a,e}function Ic(e,a){var i=a.ref;if(i===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(a.flags|=4194816)}}function bp(e,a,i,l,u){return Oi(a),i=ep(e,a,i,l,void 0,u),l=tp(),e!==null&&!gn?(np(e,a,u),Ss(e,a,u)):(ct&&l&&Bu(a),a.flags|=1,Bn(e,a,i,u),a.child)}function yy(e,a,i,l,u,f){return Oi(a),a.updateQueue=null,i=bg(a,l,i,u),vg(e),l=tp(),e!==null&&!gn?(np(e,a,f),Ss(e,a,f)):(ct&&l&&Bu(a),a.flags|=1,Bn(e,a,i,f),a.child)}function xy(e,a,i,l,u){if(Oi(a),a.stateNode===null){var f=To,x=i.contextType;typeof x=="object"&&x!==null&&(f=zn(x)),f=new i(l,f),a.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=yp,a.stateNode=f,f._reactInternals=a,f=a.stateNode,f.props=l,f.state=a.memoizedState,f.refs={},Gu(a),x=i.contextType,f.context=typeof x=="object"&&x!==null?zn(x):To,f.state=a.memoizedState,x=i.getDerivedStateFromProps,typeof x=="function"&&(gp(a,i,x,l),f.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(x=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),x!==f.state&&yp.enqueueReplaceState(f,f.state,null),Wr(a,l,f,u),Gr(),f.state=a.memoizedState),typeof f.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(e===null){f=a.stateNode;var w=a.memoizedProps,k=Vi(i,w);f.props=k;var O=f.context,X=i.contextType;x=To,typeof X=="object"&&X!==null&&(x=zn(X));var ee=i.getDerivedStateFromProps;X=typeof ee=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=a.pendingProps!==w,X||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||O!==x)&&sy(a,f,l,x),Qs=!1;var H=a.memoizedState;f.state=H,Wr(a,l,f,u),Gr(),O=a.memoizedState,w||H!==O||Qs?(typeof ee=="function"&&(gp(a,i,ee,l),O=a.memoizedState),(k=Qs||ay(a,i,k,l,H,O,x))?(X||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(a.flags|=4194308)):(typeof f.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=O),f.props=l,f.state=O,f.context=x,l=k):(typeof f.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{f=a.stateNode,Wu(e,a),x=a.memoizedProps,X=Vi(i,x),f.props=X,ee=a.pendingProps,H=f.context,O=i.contextType,k=To,typeof O=="object"&&O!==null&&(k=zn(O)),w=i.getDerivedStateFromProps,(O=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x!==ee||H!==k)&&sy(a,f,l,k),Qs=!1,H=a.memoizedState,f.state=H,Wr(a,l,f,u),Gr();var V=a.memoizedState;x!==ee||H!==V||Qs||e!==null&&e.dependencies!==null&&xc(e.dependencies)?(typeof w=="function"&&(gp(a,i,w,l),V=a.memoizedState),(X=Qs||ay(a,i,X,l,H,V,k)||e!==null&&e.dependencies!==null&&xc(e.dependencies))?(O||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,V,k),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,V,k)),typeof f.componentDidUpdate=="function"&&(a.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof f.componentDidUpdate!="function"||x===e.memoizedProps&&H===e.memoizedState||(a.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&H===e.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=V),f.props=l,f.state=V,f.context=k,l=X):(typeof f.componentDidUpdate!="function"||x===e.memoizedProps&&H===e.memoizedState||(a.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&H===e.memoizedState||(a.flags|=1024),l=!1)}return f=l,Ic(e,a),l=(a.flags&128)!==0,f||l?(f=a.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:f.render(),a.flags|=1,e!==null&&l?(a.child=$i(a,e.child,null,u),a.child=$i(a,null,i,u)):Bn(e,a,i,u),a.memoizedState=f.state,e=a.child):e=Ss(e,a,u),e}function vy(e,a,i,l){return Ui(),a.flags|=256,Bn(e,a,i,l),a.child}var Sp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wp(e){return{baseLanes:e,cachePool:lg()}}function _p(e,a,i){return e=e!==null?e.childLanes&~i:0,a&&(e|=ua),e}function by(e,a,i){var l=a.pendingProps,u=!1,f=(a.flags&128)!==0,x;if((x=f)||(x=e!==null&&e.memoizedState===null?!1:(on.current&2)!==0),x&&(u=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,e===null){if(ct){if(u?ei(a):ti(),(e=Lt)?(e=Mx(e,Ta),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Ws!==null?{id:Ka,overflow:Qa}:null,retryLane:536870912,hydrationErrors:null},i=Jm(e),i.return=a,a.child=i,Nn=a,Lt=null)):e=null,e===null)throw Xs(a);return of(e)?a.lanes=32:a.lanes=536870912,null}var w=l.children;return l=l.fallback,u?(ti(),u=a.mode,w=Oc({mode:"hidden",children:w},u),l=Bi(l,u,i,null),w.return=a,l.return=a,w.sibling=l,a.child=w,l=a.child,l.memoizedState=wp(i),l.childLanes=_p(e,x,i),a.memoizedState=Sp,Zr(null,l)):(ei(a),Cp(a,w))}var k=e.memoizedState;if(k!==null&&(w=k.dehydrated,w!==null)){if(f)a.flags&256?(ei(a),a.flags&=-257,a=jp(e,a,i)):a.memoizedState!==null?(ti(),a.child=e.child,a.flags|=128,a=null):(ti(),w=l.fallback,u=a.mode,l=Oc({mode:"visible",children:l.children},u),w=Bi(w,u,i,null),w.flags|=2,l.return=a,w.return=a,l.sibling=w,a.child=l,$i(a,e.child,null,i),l=a.child,l.memoizedState=wp(i),l.childLanes=_p(e,x,i),a.memoizedState=Sp,a=Zr(null,l));else if(ei(a),of(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var O=x.dgst;x=O,l=Error(o(419)),l.stack="",l.digest=x,Pr({value:l,source:null,stack:null}),a=jp(e,a,i)}else if(gn||Ao(e,a,i,!1),x=(i&e.childLanes)!==0,gn||x){if(x=zt,x!==null&&(l=nn(x,i),l!==0&&l!==k.retryLane))throw k.retryLane=l,zi(e,l),na(x,e,l),vp;sf(w)||Wc(),a=jp(e,a,i)}else sf(w)?(a.flags|=192,a.child=e.child,a=null):(e=k.treeContext,Lt=Ma(w.nextSibling),Nn=a,ct=!0,Ys=null,Ta=!1,e!==null&&ng(a,e),a=Cp(a,l.children),a.flags|=4096);return a}return u?(ti(),w=l.fallback,u=a.mode,k=e.child,O=k.sibling,l=ms(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,O!==null?w=ms(O,w):(w=Bi(w,u,i,null),w.flags|=2),w.return=a,l.return=a,l.sibling=w,a.child=l,Zr(null,l),l=a.child,w=e.child.memoizedState,w===null?w=wp(i):(u=w.cachePool,u!==null?(k=hn._currentValue,u=u.parent!==k?{parent:k,pool:k}:u):u=lg(),w={baseLanes:w.baseLanes|i,cachePool:u}),l.memoizedState=w,l.childLanes=_p(e,x,i),a.memoizedState=Sp,Zr(e.child,l)):(ei(a),i=e.child,e=i.sibling,i=ms(i,{mode:"visible",children:l.children}),i.return=a,i.sibling=null,e!==null&&(x=a.deletions,x===null?(a.deletions=[e],a.flags|=16):x.push(e)),a.child=i,a.memoizedState=null,i)}function Cp(e,a){return a=Oc({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function Oc(e,a){return e=ra(22,e,null,a),e.lanes=0,e}function jp(e,a,i){return $i(a,e.child,null,i),e=Cp(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function Sy(e,a,i){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a),Pu(e.return,a,i)}function Tp(e,a,i,l,u,f){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:u,treeForkCount:f}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=i,x.tailMode=u,x.treeForkCount=f)}function wy(e,a,i){var l=a.pendingProps,u=l.revealOrder,f=l.tail;l=l.children;var x=on.current,w=(x&2)!==0;if(w?(x=x&1|2,a.flags|=128):x&=1,je(on,x),Bn(e,a,l,i),l=ct?Lr:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sy(e,i,a);else if(e.tag===19)Sy(e,i,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(i=a.child,u=null;i!==null;)e=i.alternate,e!==null&&Tc(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=a.child,a.child=null):(u=i.sibling,i.sibling=null),Tp(a,!1,u,i,f,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,u=a.child,a.child=null;u!==null;){if(e=u.alternate,e!==null&&Tc(e)===null){a.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}Tp(a,!0,i,null,f,l);break;case"together":Tp(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function Ss(e,a,i){if(e!==null&&(a.dependencies=e.dependencies),si|=a.lanes,(i&a.childLanes)===0)if(e!==null){if(Ao(e,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(o(153));if(a.child!==null){for(e=a.child,i=ms(e,e.pendingProps),a.child=i,i.return=a;e.sibling!==null;)e=e.sibling,i=i.sibling=ms(e,e.pendingProps),i.return=a;i.sibling=null}return a.child}function kp(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&xc(e)))}function Cw(e,a,i){switch(a.tag){case 3:kt(a,a.stateNode.containerInfo),Ks(a,hn,e.memoizedState.cache),Ui();break;case 27:case 5:Et(a);break;case 4:kt(a,a.stateNode.containerInfo);break;case 10:Ks(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Zu(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(ei(a),a.flags|=128,null):(i&a.child.childLanes)!==0?by(e,a,i):(ei(a),e=Ss(e,a,i),e!==null?e.sibling:null);ei(a);break;case 19:var u=(e.flags&128)!==0;if(l=(i&a.childLanes)!==0,l||(Ao(e,a,i,!1),l=(i&a.childLanes)!==0),u){if(l)return wy(e,a,i);a.flags|=128}if(u=a.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),je(on,on.current),l)break;return null;case 22:return a.lanes=0,hy(e,a,i,a.pendingProps);case 24:Ks(a,hn,e.memoizedState.cache)}return Ss(e,a,i)}function _y(e,a,i){if(e!==null)if(e.memoizedProps!==a.pendingProps)gn=!0;else{if(!kp(e,i)&&(a.flags&128)===0)return gn=!1,Cw(e,a,i);gn=(e.flags&131072)!==0}else gn=!1,ct&&(a.flags&1048576)!==0&&tg(a,Lr,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(e=Pi(a.elementType),a.type=e,typeof e=="function")Du(e)?(l=Vi(e,l),a.tag=1,a=xy(null,a,e,l,i)):(a.tag=0,a=bp(null,a,e,l,i));else{if(e!=null){var u=e.$$typeof;if(u===Y){a.tag=11,a=uy(null,a,e,l,i);break e}else if(u===re){a.tag=14,a=py(null,a,e,l,i);break e}}throw a=Re(e)||e,Error(o(306,a,""))}}return a;case 0:return bp(e,a,a.type,a.pendingProps,i);case 1:return l=a.type,u=Vi(l,a.pendingProps),xy(e,a,l,u,i);case 3:e:{if(kt(a,a.stateNode.containerInfo),e===null)throw Error(o(387));l=a.pendingProps;var f=a.memoizedState;u=f.element,Wu(e,a),Wr(a,l,null,i);var x=a.memoizedState;if(l=x.cache,Ks(a,hn,l),l!==f.cache&&Hu(a,[hn],i,!0),Gr(),l=x.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=f,a.memoizedState=f,a.flags&256){a=vy(e,a,l,i);break e}else if(l!==u){u=_a(Error(o(424)),a),Pr(u),a=vy(e,a,l,i);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Lt=Ma(e.firstChild),Nn=a,ct=!0,Ys=null,Ta=!0,i=hg(a,null,l,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ui(),l===u){a=Ss(e,a,i);break e}Bn(e,a,l,i)}a=a.child}return a;case 26:return Ic(e,a),e===null?(i=zx(a.type,null,a.pendingProps,null))?a.memoizedState=i:ct||(i=a.type,e=a.pendingProps,l=ed(he.current).createElement(i),l[Ze]=a,l[Rn]=e,Un(l,i,e),fn(l),a.stateNode=l):a.memoizedState=zx(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return Et(a),e===null&&ct&&(l=a.stateNode=Rx(a.type,a.pendingProps,he.current),Nn=a,Ta=!0,u=Lt,ci(a.type)?(rf=u,Lt=Ma(l.firstChild)):Lt=u),Bn(e,a,a.pendingProps.children,i),Ic(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&ct&&((u=l=Lt)&&(l=e_(l,a.type,a.pendingProps,Ta),l!==null?(a.stateNode=l,Nn=a,Lt=Ma(l.firstChild),Ta=!1,u=!0):u=!1),u||Xs(a)),Et(a),u=a.type,f=a.pendingProps,x=e!==null?e.memoizedProps:null,l=f.children,tf(u,f)?l=null:x!==null&&tf(u,x)&&(a.flags|=32),a.memoizedState!==null&&(u=ep(e,a,mw,null,null,i),fl._currentValue=u),Ic(e,a),Bn(e,a,l,i),a.child;case 6:return e===null&&ct&&((e=i=Lt)&&(i=t_(i,a.pendingProps,Ta),i!==null?(a.stateNode=i,Nn=a,Lt=null,e=!0):e=!1),e||Xs(a)),null;case 13:return by(e,a,i);case 4:return kt(a,a.stateNode.containerInfo),l=a.pendingProps,e===null?a.child=$i(a,null,l,i):Bn(e,a,l,i),a.child;case 11:return uy(e,a,a.type,a.pendingProps,i);case 7:return Bn(e,a,a.pendingProps,i),a.child;case 8:return Bn(e,a,a.pendingProps.children,i),a.child;case 12:return Bn(e,a,a.pendingProps.children,i),a.child;case 10:return l=a.pendingProps,Ks(a,a.type,l.value),Bn(e,a,l.children,i),a.child;case 9:return u=a.type._context,l=a.pendingProps.children,Oi(a),u=zn(u),l=l(u),a.flags|=1,Bn(e,a,l,i),a.child;case 14:return py(e,a,a.type,a.pendingProps,i);case 15:return fy(e,a,a.type,a.pendingProps,i);case 19:return wy(e,a,i);case 31:return _w(e,a,i);case 22:return hy(e,a,i,a.pendingProps);case 24:return Oi(a),l=zn(hn),e===null?(u=Vu(),u===null&&(u=zt,f=$u(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),a.memoizedState={parent:l,cache:u},Gu(a),Ks(a,hn,u)):((e.lanes&i)!==0&&(Wu(e,a),Wr(a,null,null,i),Gr()),u=e.memoizedState,f=a.memoizedState,u.parent!==l?(u={parent:l,cache:l},a.memoizedState=u,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=u),Ks(a,hn,l)):(l=f.cache,Ks(a,hn,l),l!==u.cache&&Hu(a,[hn],i,!0))),Bn(e,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function ws(e){e.flags|=4}function Mp(e,a,i,l,u){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Ky())e.flags|=8192;else throw Hi=wc,qu}else e.flags&=-16777217}function Cy(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Lx(a))if(Ky())e.flags|=8192;else throw Hi=wc,qu}function Lc(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?Me():536870912,e.lanes|=a,$o|=a)}function Jr(e,a){if(!ct)switch(e.tailMode){case"hidden":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Pt(e){var a=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(a)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags&65011712,l|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=i,a}function jw(e,a,i){var l=a.pendingProps;switch(Uu(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(a),null;case 1:return Pt(a),null;case 3:return i=a.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),xs(hn),Mt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Eo(a)?ws(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ou())),Pt(a),null;case 26:var u=a.type,f=a.memoizedState;return e===null?(ws(a),f!==null?(Pt(a),Cy(a,f)):(Pt(a),Mp(a,u,null,l,i))):f?f!==e.memoizedState?(ws(a),Pt(a),Cy(a,f)):(Pt(a),a.flags&=-16777217):(e=e.memoizedProps,e!==l&&ws(a),Pt(a),Mp(a,u,e,l,i)),null;case 27:if(un(a),i=he.current,u=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==l&&ws(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return Pt(a),null}e=ie.current,Eo(a)?ag(a):(e=Rx(u,l,i),a.stateNode=e,ws(a))}return Pt(a),null;case 5:if(un(a),u=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==l&&ws(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return Pt(a),null}if(f=ie.current,Eo(a))ag(a);else{var x=ed(he.current);switch(f){case 1:f=x.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=x.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=x.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=x.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=x.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?x.createElement(u,{is:l.is}):x.createElement(u)}}f[Ze]=a,f[Rn]=l;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)f.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=f;e:switch(Un(f,u,l),u){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ws(a)}}return Pt(a),Mp(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,i),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==l&&ws(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(o(166));if(e=he.current,Eo(a)){if(e=a.stateNode,i=a.memoizedProps,l=null,u=Nn,u!==null)switch(u.tag){case 27:case 5:l=u.memoizedProps}e[Ze]=a,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||bx(e.nodeValue,i)),e||Xs(a,!0)}else e=ed(e).createTextNode(l),e[Ze]=a,a.stateNode=e}return Pt(a),null;case 31:if(i=a.memoizedState,e===null||e.memoizedState!==null){if(l=Eo(a),i!==null){if(e===null){if(!l)throw Error(o(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[Ze]=a}else Ui(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),e=!1}else i=Ou(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return a.flags&256?(ca(a),a):(ca(a),null);if((a.flags&128)!==0)throw Error(o(558))}return Pt(a),null;case 13:if(l=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Eo(a),l!==null&&l.dehydrated!==null){if(e===null){if(!u)throw Error(o(318));if(u=a.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));u[Ze]=a}else Ui(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),u=!1}else u=Ou(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return a.flags&256?(ca(a),a):(ca(a),null)}return ca(a),(a.flags&128)!==0?(a.lanes=i,a):(i=l!==null,e=e!==null&&e.memoizedState!==null,i&&(l=a.child,u=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(u=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==u&&(l.flags|=2048)),i!==e&&i&&(a.child.flags|=8192),Lc(a,a.updateQueue),Pt(a),null);case 4:return Mt(),e===null&&Kp(a.stateNode.containerInfo),Pt(a),null;case 10:return xs(a.type),Pt(a),null;case 19:if(Ae(on),l=a.memoizedState,l===null)return Pt(a),null;if(u=(a.flags&128)!==0,f=l.rendering,f===null)if(u)Jr(l,!1);else{if(Qt!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(f=Tc(e),f!==null){for(a.flags|=128,Jr(l,!1),e=f.updateQueue,a.updateQueue=e,Lc(a,e),a.subtreeFlags=0,e=i,i=a.child;i!==null;)Zm(i,e),i=i.sibling;return je(on,on.current&1|2),ct&&gs(a,l.treeForkCount),a.child}e=e.sibling}l.tail!==null&&oe()>Vc&&(a.flags|=128,u=!0,Jr(l,!1),a.lanes=4194304)}else{if(!u)if(e=Tc(f),e!==null){if(a.flags|=128,u=!0,e=e.updateQueue,a.updateQueue=e,Lc(a,e),Jr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!ct)return Pt(a),null}else 2*oe()-l.renderingStartTime>Vc&&i!==536870912&&(a.flags|=128,u=!0,Jr(l,!1),a.lanes=4194304);l.isBackwards?(f.sibling=a.child,a.child=f):(e=l.last,e!==null?e.sibling=f:a.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=oe(),e.sibling=null,i=on.current,je(on,u?i&1|2:i&1),ct&&gs(a,l.treeForkCount),e):(Pt(a),null);case 22:case 23:return ca(a),Qu(),l=a.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(i&536870912)!==0&&(a.flags&128)===0&&(Pt(a),a.subtreeFlags&6&&(a.flags|=8192)):Pt(a),i=a.updateQueue,i!==null&&Lc(a,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==i&&(a.flags|=2048),e!==null&&Ae(Li),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),xs(hn),Pt(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function Tw(e,a){switch(Uu(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return xs(hn),Mt(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return un(a),null;case 31:if(a.memoizedState!==null){if(ca(a),a.alternate===null)throw Error(o(340));Ui()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(ca(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(o(340));Ui()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return Ae(on),null;case 4:return Mt(),null;case 10:return xs(a.type),null;case 22:case 23:return ca(a),Qu(),e!==null&&Ae(Li),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return xs(hn),null;case 25:return null;default:return null}}function jy(e,a){switch(Uu(a),a.tag){case 3:xs(hn),Mt();break;case 26:case 27:case 5:un(a);break;case 4:Mt();break;case 31:a.memoizedState!==null&&ca(a);break;case 13:ca(a);break;case 19:Ae(on);break;case 10:xs(a.type);break;case 22:case 23:ca(a),Qu(),e!==null&&Ae(Li);break;case 24:xs(hn)}}function el(e,a){try{var i=a.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var u=l.next;i=u;do{if((i.tag&e)===e){l=void 0;var f=i.create,x=i.inst;l=f(),x.destroy=l}i=i.next}while(i!==u)}}catch(w){_t(a,a.return,w)}}function ni(e,a,i){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&e)===e){var x=l.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,u=a;var k=i,O=w;try{O()}catch(X){_t(u,k,X)}}}l=l.next}while(l!==f)}}catch(X){_t(a,a.return,X)}}function Ty(e){var a=e.updateQueue;if(a!==null){var i=e.stateNode;try{gg(a,i)}catch(l){_t(e,e.return,l)}}}function ky(e,a,i){i.props=Vi(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){_t(e,a,l)}}function tl(e,a){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(u){_t(e,a,u)}}function Za(e,a){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(u){_t(e,a,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){_t(e,a,u)}else i.current=null}function My(e){var a=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(u){_t(e,e.return,u)}}function Ep(e,a,i){try{var l=e.stateNode;Yw(l,e.type,i,a),l[Rn]=a}catch(u){_t(e,e.return,u)}}function Ey(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ci(e.type)||e.tag===4}function Ap(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ey(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ci(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rp(e,a,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,a?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,a):(a=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.appendChild(e),i=i._reactRootContainer,i!=null||a.onclick!==null||(a.onclick=xa));else if(l!==4&&(l===27&&ci(e.type)&&(i=e.stateNode,a=null),e=e.child,e!==null))for(Rp(e,a,i),e=e.sibling;e!==null;)Rp(e,a,i),e=e.sibling}function Pc(e,a,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,a?i.insertBefore(e,a):i.appendChild(e);else if(l!==4&&(l===27&&ci(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Pc(e,a,i),e=e.sibling;e!==null;)Pc(e,a,i),e=e.sibling}function Ay(e){var a=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,u=a.attributes;u.length;)a.removeAttributeNode(u[0]);Un(a,l,i),a[Ze]=e,a[Rn]=i}catch(f){_t(e,e.return,f)}}var _s=!1,yn=!1,Dp=!1,Ry=typeof WeakSet=="function"?WeakSet:Set,Mn=null;function kw(e,a){if(e=e.containerInfo,Jp=rd,e=Fm(e),ju(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var u=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var x=0,w=-1,k=-1,O=0,X=0,ee=e,H=null;t:for(;;){for(var V;ee!==i||u!==0&&ee.nodeType!==3||(w=x+u),ee!==f||l!==0&&ee.nodeType!==3||(k=x+l),ee.nodeType===3&&(x+=ee.nodeValue.length),(V=ee.firstChild)!==null;)H=ee,ee=V;for(;;){if(ee===e)break t;if(H===i&&++O===u&&(w=x),H===f&&++X===l&&(k=x),(V=ee.nextSibling)!==null)break;ee=H,H=ee.parentNode}ee=V}i=w===-1||k===-1?null:{start:w,end:k}}else i=null}i=i||{start:0,end:0}}else i=null;for(ef={focusedElem:e,selectionRange:i},rd=!1,Mn=a;Mn!==null;)if(a=Mn,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,Mn=e;else for(;Mn!==null;){switch(a=Mn,f=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)u=e[i],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=a,u=f.memoizedProps,f=f.memoizedState,l=i.stateNode;try{var Se=Vi(i.type,u);e=l.getSnapshotBeforeUpdate(Se,f),l.__reactInternalSnapshotBeforeUpdate=e}catch(Oe){_t(i,i.return,Oe)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,i=e.nodeType,i===9)af(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":af(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=a.sibling,e!==null){e.return=a.return,Mn=e;break}Mn=a.return}}function Dy(e,a,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:js(e,i),l&4&&el(5,i);break;case 1:if(js(e,i),l&4)if(e=i.stateNode,a===null)try{e.componentDidMount()}catch(x){_t(i,i.return,x)}else{var u=Vi(i.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(u,a,e.__reactInternalSnapshotBeforeUpdate)}catch(x){_t(i,i.return,x)}}l&64&&Ty(i),l&512&&tl(i,i.return);break;case 3:if(js(e,i),l&64&&(e=i.updateQueue,e!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}try{gg(e,a)}catch(x){_t(i,i.return,x)}}break;case 27:a===null&&l&4&&Ay(i);case 26:case 5:js(e,i),a===null&&l&4&&My(i),l&512&&tl(i,i.return);break;case 12:js(e,i);break;case 31:js(e,i),l&4&&By(e,i);break;case 13:js(e,i),l&4&&Uy(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Uw.bind(null,i),n_(e,i))));break;case 22:if(l=i.memoizedState!==null||_s,!l){a=a!==null&&a.memoizedState!==null||yn,u=_s;var f=yn;_s=l,(yn=a)&&!f?Ts(e,i,(i.subtreeFlags&8772)!==0):js(e,i),_s=u,yn=f}break;case 30:break;default:js(e,i)}}function Ny(e){var a=e.alternate;a!==null&&(e.alternate=null,Ny(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&fo(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Vt=null,Zn=!1;function Cs(e,a,i){for(i=i.child;i!==null;)zy(e,a,i),i=i.sibling}function zy(e,a,i){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(pe,i)}catch{}switch(i.tag){case 26:yn||Za(i,a),Cs(e,a,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:yn||Za(i,a);var l=Vt,u=Zn;ci(i.type)&&(Vt=i.stateNode,Zn=!1),Cs(e,a,i),dl(i.stateNode),Vt=l,Zn=u;break;case 5:yn||Za(i,a);case 6:if(l=Vt,u=Zn,Vt=null,Cs(e,a,i),Vt=l,Zn=u,Vt!==null)if(Zn)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(i.stateNode)}catch(f){_t(i,a,f)}else try{Vt.removeChild(i.stateNode)}catch(f){_t(i,a,f)}break;case 18:Vt!==null&&(Zn?(e=Vt,Tx(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Ko(e)):Tx(Vt,i.stateNode));break;case 4:l=Vt,u=Zn,Vt=i.stateNode.containerInfo,Zn=!0,Cs(e,a,i),Vt=l,Zn=u;break;case 0:case 11:case 14:case 15:ni(2,i,a),yn||ni(4,i,a),Cs(e,a,i);break;case 1:yn||(Za(i,a),l=i.stateNode,typeof l.componentWillUnmount=="function"&&ky(i,a,l)),Cs(e,a,i);break;case 21:Cs(e,a,i);break;case 22:yn=(l=yn)||i.memoizedState!==null,Cs(e,a,i),yn=l;break;default:Cs(e,a,i)}}function By(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ko(e)}catch(i){_t(a,a.return,i)}}}function Uy(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ko(e)}catch(i){_t(a,a.return,i)}}function Mw(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new Ry),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new Ry),a;default:throw Error(o(435,e.tag))}}function Hc(e,a){var i=Mw(e);a.forEach(function(l){if(!i.has(l)){i.add(l);var u=Iw.bind(null,e,l);l.then(u,u)}})}function Jn(e,a){var i=a.deletions;if(i!==null)for(var l=0;l<i.length;l++){var u=i[l],f=e,x=a,w=x;e:for(;w!==null;){switch(w.tag){case 27:if(ci(w.type)){Vt=w.stateNode,Zn=!1;break e}break;case 5:Vt=w.stateNode,Zn=!1;break e;case 3:case 4:Vt=w.stateNode.containerInfo,Zn=!0;break e}w=w.return}if(Vt===null)throw Error(o(160));zy(f,x,u),Vt=null,Zn=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Iy(a,e),a=a.sibling}var za=null;function Iy(e,a){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Jn(a,e),ea(e),l&4&&(ni(3,e,e.return),el(3,e),ni(5,e,e.return));break;case 1:Jn(a,e),ea(e),l&512&&(yn||i===null||Za(i,i.return)),l&64&&_s&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var u=za;if(Jn(a,e),ea(e),l&512&&(yn||i===null||Za(i,i.return)),l&4){var f=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,u=u.ownerDocument||u;t:switch(l){case"title":f=u.getElementsByTagName("title")[0],(!f||f[Si]||f[Ze]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(l),u.head.insertBefore(f,u.querySelector("head > title"))),Un(f,l,i),f[Ze]=e,fn(f),l=f;break e;case"link":var x=Ix("link","href",u).get(l+(i.href||""));if(x){for(var w=0;w<x.length;w++)if(f=x[w],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){x.splice(w,1);break t}}f=u.createElement(l),Un(f,l,i),u.head.appendChild(f);break;case"meta":if(x=Ix("meta","content",u).get(l+(i.content||""))){for(w=0;w<x.length;w++)if(f=x[w],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){x.splice(w,1);break t}}f=u.createElement(l),Un(f,l,i),u.head.appendChild(f);break;default:throw Error(o(468,l))}f[Ze]=e,fn(f),l=f}e.stateNode=l}else Ox(u,e.type,e.stateNode);else e.stateNode=Ux(u,l,e.memoizedProps);else f!==l?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,l===null?Ox(u,e.type,e.stateNode):Ux(u,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Ep(e,e.memoizedProps,i.memoizedProps)}break;case 27:Jn(a,e),ea(e),l&512&&(yn||i===null||Za(i,i.return)),i!==null&&l&4&&Ep(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Jn(a,e),ea(e),l&512&&(yn||i===null||Za(i,i.return)),e.flags&32){u=e.stateNode;try{sn(u,"")}catch(Se){_t(e,e.return,Se)}}l&4&&e.stateNode!=null&&(u=e.memoizedProps,Ep(e,u,i!==null?i.memoizedProps:u)),l&1024&&(Dp=!0);break;case 6:if(Jn(a,e),ea(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(Se){_t(e,e.return,Se)}}break;case 3:if(ad=null,u=za,za=td(a.containerInfo),Jn(a,e),za=u,ea(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Ko(a.containerInfo)}catch(Se){_t(e,e.return,Se)}Dp&&(Dp=!1,Oy(e));break;case 4:l=za,za=td(e.stateNode.containerInfo),Jn(a,e),ea(e),za=l;break;case 12:Jn(a,e),ea(e);break;case 31:Jn(a,e),ea(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Hc(e,l)));break;case 13:Jn(a,e),ea(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Fc=oe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Hc(e,l)));break;case 22:u=e.memoizedState!==null;var k=i!==null&&i.memoizedState!==null,O=_s,X=yn;if(_s=O||u,yn=X||k,Jn(a,e),yn=X,_s=O,ea(e),l&8192)e:for(a=e.stateNode,a._visibility=u?a._visibility&-2:a._visibility|1,u&&(i===null||k||_s||yn||qi(e)),i=null,a=e;;){if(a.tag===5||a.tag===26){if(i===null){k=i=a;try{if(f=k.stateNode,u)x=f.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=k.stateNode;var ee=k.memoizedProps.style,H=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;w.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(Se){_t(k,k.return,Se)}}}else if(a.tag===6){if(i===null){k=a;try{k.stateNode.nodeValue=u?"":k.memoizedProps}catch(Se){_t(k,k.return,Se)}}}else if(a.tag===18){if(i===null){k=a;try{var V=k.stateNode;u?kx(V,!0):kx(k.stateNode,!1)}catch(Se){_t(k,k.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,Hc(e,i))));break;case 19:Jn(a,e),ea(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Hc(e,l)));break;case 30:break;case 21:break;default:Jn(a,e),ea(e)}}function ea(e){var a=e.flags;if(a&2){try{for(var i,l=e.return;l!==null;){if(Ey(l)){i=l;break}l=l.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var u=i.stateNode,f=Ap(e);Pc(e,f,u);break;case 5:var x=i.stateNode;i.flags&32&&(sn(x,""),i.flags&=-33);var w=Ap(e);Pc(e,w,x);break;case 3:case 4:var k=i.stateNode.containerInfo,O=Ap(e);Rp(e,O,k);break;default:throw Error(o(161))}}catch(X){_t(e,e.return,X)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Oy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Oy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function js(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Dy(e,a.alternate,a),a=a.sibling}function qi(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:ni(4,a,a.return),qi(a);break;case 1:Za(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&ky(a,a.return,i),qi(a);break;case 27:dl(a.stateNode);case 26:case 5:Za(a,a.return),qi(a);break;case 22:a.memoizedState===null&&qi(a);break;case 30:qi(a);break;default:qi(a)}e=e.sibling}}function Ts(e,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,u=e,f=a,x=f.flags;switch(f.tag){case 0:case 11:case 15:Ts(u,f,i),el(4,f);break;case 1:if(Ts(u,f,i),l=f,u=l.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(O){_t(l,l.return,O)}if(l=f,u=l.updateQueue,u!==null){var w=l.stateNode;try{var k=u.shared.hiddenCallbacks;if(k!==null)for(u.shared.hiddenCallbacks=null,u=0;u<k.length;u++)mg(k[u],w)}catch(O){_t(l,l.return,O)}}i&&x&64&&Ty(f),tl(f,f.return);break;case 27:Ay(f);case 26:case 5:Ts(u,f,i),i&&l===null&&x&4&&My(f),tl(f,f.return);break;case 12:Ts(u,f,i);break;case 31:Ts(u,f,i),i&&x&4&&By(u,f);break;case 13:Ts(u,f,i),i&&x&4&&Uy(u,f);break;case 22:f.memoizedState===null&&Ts(u,f,i),tl(f,f.return);break;case 30:break;default:Ts(u,f,i)}a=a.sibling}}function Np(e,a){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Hr(i))}function zp(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Hr(e))}function Ba(e,a,i,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ly(e,a,i,l),a=a.sibling}function Ly(e,a,i,l){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Ba(e,a,i,l),u&2048&&el(9,a);break;case 1:Ba(e,a,i,l);break;case 3:Ba(e,a,i,l),u&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Hr(e)));break;case 12:if(u&2048){Ba(e,a,i,l),e=a.stateNode;try{var f=a.memoizedProps,x=f.id,w=f.onPostCommit;typeof w=="function"&&w(x,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){_t(a,a.return,k)}}else Ba(e,a,i,l);break;case 31:Ba(e,a,i,l);break;case 13:Ba(e,a,i,l);break;case 23:break;case 22:f=a.stateNode,x=a.alternate,a.memoizedState!==null?f._visibility&2?Ba(e,a,i,l):nl(e,a):f._visibility&2?Ba(e,a,i,l):(f._visibility|=2,Lo(e,a,i,l,(a.subtreeFlags&10256)!==0||!1)),u&2048&&Np(x,a);break;case 24:Ba(e,a,i,l),u&2048&&zp(a.alternate,a);break;default:Ba(e,a,i,l)}}function Lo(e,a,i,l,u){for(u=u&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var f=e,x=a,w=i,k=l,O=x.flags;switch(x.tag){case 0:case 11:case 15:Lo(f,x,w,k,u),el(8,x);break;case 23:break;case 22:var X=x.stateNode;x.memoizedState!==null?X._visibility&2?Lo(f,x,w,k,u):nl(f,x):(X._visibility|=2,Lo(f,x,w,k,u)),u&&O&2048&&Np(x.alternate,x);break;case 24:Lo(f,x,w,k,u),u&&O&2048&&zp(x.alternate,x);break;default:Lo(f,x,w,k,u)}a=a.sibling}}function nl(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=e,l=a,u=l.flags;switch(l.tag){case 22:nl(i,l),u&2048&&Np(l.alternate,l);break;case 24:nl(i,l),u&2048&&zp(l.alternate,l);break;default:nl(i,l)}a=a.sibling}}var al=8192;function Po(e,a,i){if(e.subtreeFlags&al)for(e=e.child;e!==null;)Py(e,a,i),e=e.sibling}function Py(e,a,i){switch(e.tag){case 26:Po(e,a,i),e.flags&al&&e.memoizedState!==null&&h_(i,za,e.memoizedState,e.memoizedProps);break;case 5:Po(e,a,i);break;case 3:case 4:var l=za;za=td(e.stateNode.containerInfo),Po(e,a,i),za=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=al,al=16777216,Po(e,a,i),al=l):Po(e,a,i));break;default:Po(e,a,i)}}function Hy(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function sl(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var l=a[i];Mn=l,Fy(l,e)}Hy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$y(e),e=e.sibling}function $y(e){switch(e.tag){case 0:case 11:case 15:sl(e),e.flags&2048&&ni(9,e,e.return);break;case 3:sl(e);break;case 12:sl(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,$c(e)):sl(e);break;default:sl(e)}}function $c(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var l=a[i];Mn=l,Fy(l,e)}Hy(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:ni(8,a,a.return),$c(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,$c(a));break;default:$c(a)}e=e.sibling}}function Fy(e,a){for(;Mn!==null;){var i=Mn;switch(i.tag){case 0:case 11:case 15:ni(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Hr(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,Mn=l;else e:for(i=e;Mn!==null;){l=Mn;var u=l.sibling,f=l.return;if(Ny(l),l===i){Mn=null;break e}if(u!==null){u.return=f,Mn=u;break e}Mn=f}}}var Ew={getCacheForType:function(e){var a=zn(hn),i=a.data.get(e);return i===void 0&&(i=e(),a.data.set(e,i)),i},cacheSignal:function(){return zn(hn).controller.signal}},Aw=typeof WeakMap=="function"?WeakMap:Map,vt=0,zt=null,et=null,rt=0,wt=0,da=null,ai=!1,Ho=!1,Bp=!1,ks=0,Qt=0,si=0,Gi=0,Up=0,ua=0,$o=0,il=null,ta=null,Ip=!1,Fc=0,Vy=0,Vc=1/0,qc=null,ii=null,_n=0,oi=null,Fo=null,Ms=0,Op=0,Lp=null,qy=null,ol=0,Pp=null;function pa(){return(vt&2)!==0&&rt!==0?rt&-rt:B.T!==null?Gp():$t()}function Gy(){if(ua===0)if((rt&536870912)===0||ct){var e=Pn;Pn<<=1,(Pn&3932160)===0&&(Pn=262144),ua=e}else ua=536870912;return e=la.current,e!==null&&(e.flags|=32),ua}function na(e,a,i){(e===zt&&(wt===2||wt===9)||e.cancelPendingCommit!==null)&&(Vo(e,0),ri(e,rt,ua,!1)),ye(e,i),((vt&2)===0||e!==zt)&&(e===zt&&((vt&2)===0&&(Gi|=i),Qt===4&&ri(e,rt,ua,!1)),Ja(e))}function Wy(e,a,i){if((vt&6)!==0)throw Error(o(327));var l=!i&&(a&127)===0&&(a&e.expiredLanes)===0||ae(e,a),u=l?Nw(e,a):$p(e,a,!0),f=l;do{if(u===0){Ho&&!l&&ri(e,a,0,!1);break}else{if(i=e.current.alternate,f&&!Rw(i)){u=$p(e,a,!1),f=!1;continue}if(u===2){if(f=a,e.errorRecoveryDisabledLanes&f)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var w=e;u=il;var k=w.current.memoizedState.isDehydrated;if(k&&(Vo(w,x).flags|=256),x=$p(w,x,!1),x!==2){if(Bp&&!k){w.errorRecoveryDisabledLanes|=f,Gi|=f,u=4;break e}f=ta,ta=u,f!==null&&(ta===null?ta=f:ta.push.apply(ta,f))}u=x}if(f=!1,u!==2)continue}}if(u===1){Vo(e,0),ri(e,a,0,!0);break}e:{switch(l=e,f=u,f){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:ri(l,a,ua,!ai);break e;case 2:ta=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(u=Fc+300-oe(),10<u)){if(ri(l,a,ua,!ai),Us(l,0,!0)!==0)break e;Ms=a,l.timeoutHandle=Cx(Yy.bind(null,l,i,ta,qc,Ip,a,ua,Gi,$o,ai,f,"Throttled",-0,0),u);break e}Yy(l,i,ta,qc,Ip,a,ua,Gi,$o,ai,f,null,-0,0)}}break}while(!0);Ja(e)}function Yy(e,a,i,l,u,f,x,w,k,O,X,ee,H,V){if(e.timeoutHandle=-1,ee=a.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xa},Py(a,f,ee);var Se=(f&62914560)===f?Fc-oe():(f&4194048)===f?Vy-oe():0;if(Se=m_(ee,Se),Se!==null){Ms=f,e.cancelPendingCommit=Se(nx.bind(null,e,a,f,i,l,u,x,w,k,X,ee,null,H,V)),ri(e,f,x,!O);return}}nx(e,a,f,i,l,u,x,w,k)}function Rw(e){for(var a=e;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var u=i[l],f=u.getSnapshot;u=u.value;try{if(!oa(f(),u))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ri(e,a,i,l){a&=~Up,a&=~Gi,e.suspendedLanes|=a,e.pingedLanes&=~a,l&&(e.warmLanes|=a),l=e.expirationTimes;for(var u=a;0<u;){var f=31-pt(u),x=1<<f;l[f]=-1,u&=~x}i!==0&&ze(e,i,a)}function Gc(){return(vt&6)===0?(rl(0),!1):!0}function Hp(){if(et!==null){if(wt===0)var e=et.return;else e=et,ys=Ii=null,ap(e),zo=null,Fr=0,e=et;for(;e!==null;)jy(e.alternate,e),e=e.return;et=null}}function Vo(e,a){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Qw(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Ms=0,Hp(),zt=e,et=i=ms(e.current,null),rt=a,wt=0,da=null,ai=!1,Ho=ae(e,a),Bp=!1,$o=ua=Up=Gi=si=Qt=0,ta=il=null,Ip=!1,(a&8)!==0&&(a|=a&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=a;0<l;){var u=31-pt(l),f=1<<u;a|=e[u],l&=~f}return ks=a,fc(),i}function Xy(e,a){We=null,B.H=Qr,a===No||a===Sc?(a=ug(),wt=3):a===qu?(a=ug(),wt=4):wt=a===vp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,da=a,et===null&&(Qt=1,Bc(e,_a(a,e.current)))}function Ky(){var e=la.current;return e===null?!0:(rt&4194048)===rt?ka===null:(rt&62914560)===rt||(rt&536870912)!==0?e===ka:!1}function Qy(){var e=B.H;return B.H=Qr,e===null?Qr:e}function Zy(){var e=B.A;return B.A=Ew,e}function Wc(){Qt=4,ai||(rt&4194048)!==rt&&la.current!==null||(Ho=!0),(si&134217727)===0&&(Gi&134217727)===0||zt===null||ri(zt,rt,ua,!1)}function $p(e,a,i){var l=vt;vt|=2;var u=Qy(),f=Zy();(zt!==e||rt!==a)&&(qc=null,Vo(e,a)),a=!1;var x=Qt;e:do try{if(wt!==0&&et!==null){var w=et,k=da;switch(wt){case 8:Hp(),x=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(a=!0);var O=wt;if(wt=0,da=null,qo(e,w,k,O),i&&Ho){x=0;break e}break;default:O=wt,wt=0,da=null,qo(e,w,k,O)}}Dw(),x=Qt;break}catch(X){Xy(e,X)}while(!0);return a&&e.shellSuspendCounter++,ys=Ii=null,vt=l,B.H=u,B.A=f,et===null&&(zt=null,rt=0,fc()),x}function Dw(){for(;et!==null;)Jy(et)}function Nw(e,a){var i=vt;vt|=2;var l=Qy(),u=Zy();zt!==e||rt!==a?(qc=null,Vc=oe()+500,Vo(e,a)):Ho=ae(e,a);e:do try{if(wt!==0&&et!==null){a=et;var f=da;t:switch(wt){case 1:wt=0,da=null,qo(e,a,f,1);break;case 2:case 9:if(cg(f)){wt=0,da=null,ex(a);break}a=function(){wt!==2&&wt!==9||zt!==e||(wt=7),Ja(e)},f.then(a,a);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:cg(f)?(wt=0,da=null,ex(a)):(wt=0,da=null,qo(e,a,f,7));break;case 5:var x=null;switch(et.tag){case 26:x=et.memoizedState;case 5:case 27:var w=et;if(x?Lx(x):w.stateNode.complete){wt=0,da=null;var k=w.sibling;if(k!==null)et=k;else{var O=w.return;O!==null?(et=O,Yc(O)):et=null}break t}}wt=0,da=null,qo(e,a,f,5);break;case 6:wt=0,da=null,qo(e,a,f,6);break;case 8:Hp(),Qt=6;break e;default:throw Error(o(462))}}zw();break}catch(X){Xy(e,X)}while(!0);return ys=Ii=null,B.H=l,B.A=u,vt=i,et!==null?0:(zt=null,rt=0,fc(),Qt)}function zw(){for(;et!==null&&!tn();)Jy(et)}function Jy(e){var a=_y(e.alternate,e,ks);e.memoizedProps=e.pendingProps,a===null?Yc(e):et=a}function ex(e){var a=e,i=a.alternate;switch(a.tag){case 15:case 0:a=yy(i,a,a.pendingProps,a.type,void 0,rt);break;case 11:a=yy(i,a,a.pendingProps,a.type.render,a.ref,rt);break;case 5:ap(a);default:jy(i,a),a=et=Zm(a,ks),a=_y(i,a,ks)}e.memoizedProps=e.pendingProps,a===null?Yc(e):et=a}function qo(e,a,i,l){ys=Ii=null,ap(a),zo=null,Fr=0;var u=a.return;try{if(ww(e,u,a,i,rt)){Qt=1,Bc(e,_a(i,e.current)),et=null;return}}catch(f){if(u!==null)throw et=u,f;Qt=1,Bc(e,_a(i,e.current)),et=null;return}a.flags&32768?(ct||l===1?e=!0:Ho||(rt&536870912)!==0?e=!1:(ai=e=!0,(l===2||l===9||l===3||l===6)&&(l=la.current,l!==null&&l.tag===13&&(l.flags|=16384))),tx(a,e)):Yc(a)}function Yc(e){var a=e;do{if((a.flags&32768)!==0){tx(a,ai);return}e=a.return;var i=jw(a.alternate,a,ks);if(i!==null){et=i;return}if(a=a.sibling,a!==null){et=a;return}et=a=e}while(a!==null);Qt===0&&(Qt=5)}function tx(e,a){do{var i=Tw(e.alternate,e);if(i!==null){i.flags&=32767,et=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(e=e.sibling,e!==null)){et=e;return}et=e=i}while(e!==null);Qt=6,et=null}function nx(e,a,i,l,u,f,x,w,k){e.cancelPendingCommit=null;do Xc();while(_n!==0);if((vt&6)!==0)throw Error(o(327));if(a!==null){if(a===e.current)throw Error(o(177));if(f=a.lanes|a.childLanes,f|=Au,Ie(e,i,f,x,w,k),e===zt&&(et=zt=null,rt=0),Fo=a,oi=e,Ms=i,Op=f,Lp=u,qy=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ow(It,function(){return rx(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,u=ne.p,ne.p=2,x=vt,vt|=4;try{kw(e,a,i)}finally{vt=x,ne.p=u,B.T=l}}_n=1,ax(),sx(),ix()}}function ax(){if(_n===1){_n=0;var e=oi,a=Fo,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=B.T,B.T=null;var l=ne.p;ne.p=2;var u=vt;vt|=4;try{Iy(a,e);var f=ef,x=Fm(e.containerInfo),w=f.focusedElem,k=f.selectionRange;if(x!==w&&w&&w.ownerDocument&&$m(w.ownerDocument.documentElement,w)){if(k!==null&&ju(w)){var O=k.start,X=k.end;if(X===void 0&&(X=O),"selectionStart"in w)w.selectionStart=O,w.selectionEnd=Math.min(X,w.value.length);else{var ee=w.ownerDocument||document,H=ee&&ee.defaultView||window;if(H.getSelection){var V=H.getSelection(),Se=w.textContent.length,Oe=Math.min(k.start,Se),Nt=k.end===void 0?Oe:Math.min(k.end,Se);!V.extend&&Oe>Nt&&(x=Nt,Nt=Oe,Oe=x);var N=Hm(w,Oe),A=Hm(w,Nt);if(N&&A&&(V.rangeCount!==1||V.anchorNode!==N.node||V.anchorOffset!==N.offset||V.focusNode!==A.node||V.focusOffset!==A.offset)){var U=ee.createRange();U.setStart(N.node,N.offset),V.removeAllRanges(),Oe>Nt?(V.addRange(U),V.extend(A.node,A.offset)):(U.setEnd(A.node,A.offset),V.addRange(U))}}}}for(ee=[],V=w;V=V.parentNode;)V.nodeType===1&&ee.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ee.length;w++){var Q=ee[w];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}rd=!!Jp,ef=Jp=null}finally{vt=u,ne.p=l,B.T=i}}e.current=a,_n=2}}function sx(){if(_n===2){_n=0;var e=oi,a=Fo,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=B.T,B.T=null;var l=ne.p;ne.p=2;var u=vt;vt|=4;try{Dy(e,a.alternate,a)}finally{vt=u,ne.p=l,B.T=i}}_n=3}}function ix(){if(_n===4||_n===3){_n=0,Wn();var e=oi,a=Fo,i=Ms,l=qy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?_n=5:(_n=0,Fo=oi=null,ox(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(ii=null),it(i),a=a.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(pe,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=B.T,u=ne.p,ne.p=2,B.T=null;try{for(var f=e.onRecoverableError,x=0;x<l.length;x++){var w=l[x];f(w.value,{componentStack:w.stack})}}finally{B.T=a,ne.p=u}}(Ms&3)!==0&&Xc(),Ja(e),u=e.pendingLanes,(i&261930)!==0&&(u&42)!==0?e===Pp?ol++:(ol=0,Pp=e):ol=0,rl(0)}}function ox(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Hr(a)))}function Xc(){return ax(),sx(),ix(),rx()}function rx(){if(_n!==5)return!1;var e=oi,a=Op;Op=0;var i=it(Ms),l=B.T,u=ne.p;try{ne.p=32>i?32:i,B.T=null,i=Lp,Lp=null;var f=oi,x=Ms;if(_n=0,Fo=oi=null,Ms=0,(vt&6)!==0)throw Error(o(331));var w=vt;if(vt|=4,$y(f.current),Ly(f,f.current,x,i),vt=w,rl(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(pe,f)}catch{}return!0}finally{ne.p=u,B.T=l,ox(e,a)}}function lx(e,a,i){a=_a(i,a),a=xp(e.stateNode,a,2),e=Js(e,a,2),e!==null&&(ye(e,2),Ja(e))}function _t(e,a,i){if(e.tag===3)lx(e,e,i);else for(;a!==null;){if(a.tag===3){lx(a,e,i);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ii===null||!ii.has(l))){e=_a(i,e),i=cy(2),l=Js(a,i,2),l!==null&&(dy(i,l,a,e),ye(l,2),Ja(l));break}}a=a.return}}function Fp(e,a,i){var l=e.pingCache;if(l===null){l=e.pingCache=new Aw;var u=new Set;l.set(a,u)}else u=l.get(a),u===void 0&&(u=new Set,l.set(a,u));u.has(i)||(Bp=!0,u.add(i),e=Bw.bind(null,e,a,i),a.then(e,e))}function Bw(e,a,i){var l=e.pingCache;l!==null&&l.delete(a),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,zt===e&&(rt&i)===i&&(Qt===4||Qt===3&&(rt&62914560)===rt&&300>oe()-Fc?(vt&2)===0&&Vo(e,0):Up|=i,$o===rt&&($o=0)),Ja(e)}function cx(e,a){a===0&&(a=Me()),e=zi(e,a),e!==null&&(ye(e,a),Ja(e))}function Uw(e){var a=e.memoizedState,i=0;a!==null&&(i=a.retryLane),cx(e,i)}function Iw(e,a){var i=0;switch(e.tag){case 31:case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(a),cx(e,i)}function Ow(e,a){return st(e,a)}var Kc=null,Go=null,Vp=!1,Qc=!1,qp=!1,li=0;function Ja(e){e!==Go&&e.next===null&&(Go===null?Kc=Go=e:Go=Go.next=e),Qc=!0,Vp||(Vp=!0,Pw())}function rl(e,a){if(!qp&&Qc){qp=!0;do for(var i=!1,l=Kc;l!==null;){if(e!==0){var u=l.pendingLanes;if(u===0)var f=0;else{var x=l.suspendedLanes,w=l.pingedLanes;f=(1<<31-pt(42|e)+1)-1,f&=u&~(x&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,fx(l,f))}else f=rt,f=Us(l,l===zt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||ae(l,f)||(i=!0,fx(l,f));l=l.next}while(i);qp=!1}}function Lw(){dx()}function dx(){Qc=Vp=!1;var e=0;li!==0&&Kw()&&(e=li);for(var a=oe(),i=null,l=Kc;l!==null;){var u=l.next,f=ux(l,a);f===0?(l.next=null,i===null?Kc=u:i.next=u,u===null&&(Go=i)):(i=l,(e!==0||(f&3)!==0)&&(Qc=!0)),l=u}_n!==0&&_n!==5||rl(e),li!==0&&(li=0)}function ux(e,a){for(var i=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var x=31-pt(f),w=1<<x,k=u[x];k===-1?((w&i)===0||(w&l)!==0)&&(u[x]=ue(w,a)):k<=a&&(e.expiredLanes|=w),f&=~w}if(a=zt,i=rt,i=Us(e,e===a?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===a&&(wt===2||wt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&en(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||ae(e,i)){if(a=i&-i,a===e.callbackPriority)return a;switch(l!==null&&en(l),it(i)){case 2:case 8:i=ut;break;case 32:i=It;break;case 268435456:i=$;break;default:i=It}return l=px.bind(null,e),i=st(i,l),e.callbackPriority=a,e.callbackNode=i,a}return l!==null&&l!==null&&en(l),e.callbackPriority=2,e.callbackNode=null,2}function px(e,a){if(_n!==0&&_n!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Xc()&&e.callbackNode!==i)return null;var l=rt;return l=Us(e,e===zt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Wy(e,l,a),ux(e,oe()),e.callbackNode!=null&&e.callbackNode===i?px.bind(null,e):null)}function fx(e,a){if(Xc())return null;Wy(e,a,!0)}function Pw(){Zw(function(){(vt&6)!==0?st(ht,Lw):dx()})}function Gp(){if(li===0){var e=Ro;e===0&&(e=Bs,Bs<<=1,(Bs&261888)===0&&(Bs=256)),li=e}return li}function hx(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ti(""+e)}function mx(e,a){var i=a.ownerDocument.createElement("input");return i.name=a.name,i.value=a.value,e.id&&i.setAttribute("form",e.id),a.parentNode.insertBefore(i,a),e=new FormData(e),i.parentNode.removeChild(i),e}function Hw(e,a,i,l,u){if(a==="submit"&&i&&i.stateNode===u){var f=hx((u[Rn]||null).action),x=l.submitter;x&&(a=(a=x[Rn]||null)?hx(a.formAction):x.getAttribute("formAction"),a!==null&&(f=a,x=null));var w=new bo("action","action",null,l,u);e.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(li!==0){var k=x?mx(u,x):new FormData(u);pp(i,{pending:!0,data:k,method:u.method,action:f},null,k)}}else typeof f=="function"&&(w.preventDefault(),k=x?mx(u,x):new FormData(u),pp(i,{pending:!0,data:k,method:u.method,action:f},f,k))},currentTarget:u}]})}}for(var Wp=0;Wp<Eu.length;Wp++){var Yp=Eu[Wp],$w=Yp.toLowerCase(),Fw=Yp[0].toUpperCase()+Yp.slice(1);Na($w,"on"+Fw)}Na(Gm,"onAnimationEnd"),Na(Wm,"onAnimationIteration"),Na(Ym,"onAnimationStart"),Na("dblclick","onDoubleClick"),Na("focusin","onFocus"),Na("focusout","onBlur"),Na(iw,"onTransitionRun"),Na(ow,"onTransitionStart"),Na(rw,"onTransitionCancel"),Na(Xm,"onTransitionEnd"),Ls("onMouseEnter",["mouseout","mouseover"]),Ls("onMouseLeave",["mouseout","mouseover"]),Ls("onPointerEnter",["pointerout","pointerover"]),Ls("onPointerLeave",["pointerout","pointerover"]),ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ds("onBeforeInput",["compositionend","keypress","textInput","paste"]),ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ll));function gx(e,a){a=(a&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],u=l.event;l=l.listeners;e:{var f=void 0;if(a)for(var x=l.length-1;0<=x;x--){var w=l[x],k=w.instance,O=w.currentTarget;if(w=w.listener,k!==f&&u.isPropagationStopped())break e;f=w,u.currentTarget=O;try{f(u)}catch(X){pc(X)}u.currentTarget=null,f=k}else for(x=0;x<l.length;x++){if(w=l[x],k=w.instance,O=w.currentTarget,w=w.listener,k!==f&&u.isPropagationStopped())break e;f=w,u.currentTarget=O;try{f(u)}catch(X){pc(X)}u.currentTarget=null,f=k}}}}function tt(e,a){var i=a[po];i===void 0&&(i=a[po]=new Set);var l=e+"__bubble";i.has(l)||(yx(a,e,2,!1),i.add(l))}function Xp(e,a,i){var l=0;a&&(l|=4),yx(i,e,l,a)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function Kp(e){if(!e[Zc]){e[Zc]=!0,Jl.forEach(function(i){i!=="selectionchange"&&(Vw.has(i)||Xp(i,!1,e),Xp(i,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Zc]||(a[Zc]=!0,Xp("selectionchange",!1,a))}}function yx(e,a,i,l){switch(Gx(a)){case 2:var u=x_;break;case 8:u=v_;break;default:u=pf}i=u.bind(null,a,i,e),u=void 0,!Ga||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(a,i,{capture:!0,passive:u}):e.addEventListener(a,i,!0):u!==void 0?e.addEventListener(a,i,{passive:u}):e.addEventListener(a,i,!1)}function Qp(e,a,i,l,u){var f=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var w=l.stateNode.containerInfo;if(w===u)break;if(x===4)for(x=l.return;x!==null;){var k=x.tag;if((k===3||k===4)&&x.stateNode.containerInfo===u)return;x=x.return}for(;w!==null;){if(x=ls(w),x===null)return;if(k=x.tag,k===5||k===6||k===26||k===27){l=f=x;continue e}w=w.parentNode}}l=l.return}Mr(function(){var O=f,X=wn(i),ee=[];e:{var H=Km.get(e);if(H!==void 0){var V=bo,Se=e;switch(e){case"keypress":if(Mi(i)===0)break e;case"keydown":case"keyup":V=lc;break;case"focusin":Se="focus",V=Rr;break;case"focusout":Se="blur",V=Rr;break;case"beforeblur":case"afterblur":V=Rr;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=sc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=ou;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=gu;break;case Gm:case Wm:case Ym:V=ru;break;case Xm:V=xu;break;case"scroll":case"scrollend":V=iu;break;case"wheel":V=Sa;break;case"copy":case"cut":case"paste":V=Ei;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=cc;break;case"toggle":case"beforetoggle":V=bu}var Oe=(a&4)!==0,Nt=!Oe&&(e==="scroll"||e==="scrollend"),N=Oe?H!==null?H+"Capture":null:H;Oe=[];for(var A=O,U;A!==null;){var Q=A;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||N===null||(Q=qa(A,N),Q!=null&&Oe.push(cl(A,Q,U))),Nt)break;A=A.return}0<Oe.length&&(H=new V(H,Se,null,i,X),ee.push({event:H,listeners:Oe}))}}if((a&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",H&&i!==yo&&(Se=i.relatedTarget||i.fromElement)&&(ls(Se)||Se[rs]))break e;if((V||H)&&(H=X.window===X?X:(H=X.ownerDocument)?H.defaultView||H.parentWindow:window,V?(Se=i.relatedTarget||i.toElement,V=O,Se=Se?ls(Se):null,Se!==null&&(Nt=d(Se),Oe=Se.tag,Se!==Nt||Oe!==5&&Oe!==27&&Oe!==6)&&(Se=null)):(V=null,Se=O),V!==Se)){if(Oe=sc,Q="onMouseLeave",N="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(Oe=cc,Q="onPointerLeave",N="onPointerEnter",A="pointer"),Nt=V==null?H:Os(V),U=Se==null?H:Os(Se),H=new Oe(Q,A+"leave",V,i,X),H.target=Nt,H.relatedTarget=U,Q=null,ls(X)===O&&(Oe=new Oe(N,A+"enter",Se,i,X),Oe.target=U,Oe.relatedTarget=Nt,Q=Oe),Nt=Q,V&&Se)t:{for(Oe=qw,N=V,A=Se,U=0,Q=N;Q;Q=Oe(Q))U++;Q=0;for(var De=A;De;De=Oe(De))Q++;for(;0<U-Q;)N=Oe(N),U--;for(;0<Q-U;)A=Oe(A),Q--;for(;U--;){if(N===A||A!==null&&N===A.alternate){Oe=N;break t}N=Oe(N),A=Oe(A)}Oe=null}else Oe=null;V!==null&&xx(ee,H,V,Oe,!1),Se!==null&&Nt!==null&&xx(ee,Nt,Se,Oe,!0)}}e:{if(H=O?Os(O):window,V=H.nodeName&&H.nodeName.toLowerCase(),V==="select"||V==="input"&&H.type==="file")var gt=Bm;else if(Xa(H))if(Um)gt=nw;else{gt=ew;var ke=JS}else V=H.nodeName,!V||V.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?O&&go(O.elementType)&&(gt=Bm):gt=tw;if(gt&&(gt=gt(e,O))){zr(ee,gt,i,X);break e}ke&&ke(e,H,O),e==="focusout"&&O&&H.type==="number"&&O.memoizedProps.value!=null&&$s(H,"number",H.value)}switch(ke=O?Os(O):window,e){case"focusin":(Xa(ke)||ke.contentEditable==="true")&&(_o=ke,Tu=O,Or=null);break;case"focusout":Or=Tu=_o=null;break;case"mousedown":ku=!0;break;case"contextmenu":case"mouseup":case"dragend":ku=!1,Vm(ee,i,X);break;case"selectionchange":if(sw)break;case"keydown":case"keyup":Vm(ee,i,X)}var Xe;if(Nr)e:{switch(e){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else ft?Fe(e,i)&&(lt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(lt="onCompositionStart");lt&&(_&&i.locale!=="ko"&&(ft||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&ft&&(Xe=nc()):(ba=X,xo="value"in ba?ba.value:ba.textContent,ft=!0)),ke=Jc(O,lt),0<ke.length&&(lt=new rc(lt,e,null,i,X),ee.push({event:lt,listeners:ke}),Xe?lt.data=Xe:(Xe=St(i),Xe!==null&&(lt.data=Xe)))),(Xe=wu?Ya(e,i):Ri(e,i))&&(lt=Jc(O,"onBeforeInput"),0<lt.length&&(ke=new rc("onBeforeInput","beforeinput",null,i,X),ee.push({event:ke,listeners:lt}),ke.data=Xe)),Hw(ee,e,O,i,X)}gx(ee,a)})}function cl(e,a,i){return{instance:e,listener:a,currentTarget:i}}function Jc(e,a){for(var i=a+"Capture",l=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=qa(e,i),u!=null&&l.unshift(cl(e,u,f)),u=qa(e,a),u!=null&&l.push(cl(e,u,f))),e.tag===3)return l;e=e.return}return[]}function qw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function xx(e,a,i,l,u){for(var f=a._reactName,x=[];i!==null&&i!==l;){var w=i,k=w.alternate,O=w.stateNode;if(w=w.tag,k!==null&&k===l)break;w!==5&&w!==26&&w!==27||O===null||(k=O,u?(O=qa(i,f),O!=null&&x.unshift(cl(i,O,k))):u||(O=qa(i,f),O!=null&&x.push(cl(i,O,k)))),i=i.return}x.length!==0&&e.push({event:a,listeners:x})}var Gw=/\r\n?/g,Ww=/\u0000|\uFFFD/g;function vx(e){return(typeof e=="string"?e:""+e).replace(Gw,`
`).replace(Ww,"")}function bx(e,a){return a=vx(a),vx(e)===a}function Dt(e,a,i,l,u,f){switch(i){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||sn(e,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&sn(e,""+l);break;case"className":Fa(e,"class",l);break;case"tabIndex":Fa(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Fa(e,i,l);break;case"style":Tr(e,l,f);break;case"data":if(a!=="object"){Fa(e,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Ti(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(a!=="input"&&Dt(e,a,"name",u.name,u,null),Dt(e,a,"formEncType",u.formEncType,u,null),Dt(e,a,"formMethod",u.formMethod,u,null),Dt(e,a,"formTarget",u.formTarget,u,null)):(Dt(e,a,"encType",u.encType,u,null),Dt(e,a,"method",u.method,u,null),Dt(e,a,"target",u.target,u,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=Ti(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=xa);break;case"onScroll":l!=null&&tt("scroll",e);break;case"onScrollEnd":l!=null&&tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(i=l.__html,i!=null){if(u.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=Ti(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":tt("beforetoggle",e),tt("toggle",e),_i(e,"popover",l);break;case"xlinkActuate":ya(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ya(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ya(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ya(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ya(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ya(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ya(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ya(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ya(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":_i(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=ec.get(i)||i,_i(e,i,l))}}function Zp(e,a,i,l,u,f){switch(i){case"style":Tr(e,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(i=l.__html,i!=null){if(u.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof l=="string"?sn(e,l):(typeof l=="number"||typeof l=="bigint")&&sn(e,""+l);break;case"onScroll":l!=null&&tt("scroll",e);break;case"onScrollEnd":l!=null&&tt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sr.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),a=i.slice(2,u?i.length-7:void 0),f=e[Rn]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(a,f,u),typeof l=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(a,l,u);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):_i(e,i,l)}}}function Un(e,a,i){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",e),tt("load",e);var l=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var x=i[f];if(x!=null)switch(f){case"src":l=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:Dt(e,a,f,x,i,null)}}u&&Dt(e,a,"srcSet",i.srcSet,i,null),l&&Dt(e,a,"src",i.src,i,null);return;case"input":tt("invalid",e);var w=f=x=u=null,k=null,O=null;for(l in i)if(i.hasOwnProperty(l)){var X=i[l];if(X!=null)switch(l){case"name":u=X;break;case"type":x=X;break;case"checked":k=X;break;case"defaultChecked":O=X;break;case"value":f=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,a));break;default:Dt(e,a,l,X,i,null)}}jr(e,f,w,k,O,x,u,!1);return;case"select":tt("invalid",e),l=x=f=null;for(u in i)if(i.hasOwnProperty(u)&&(w=i[u],w!=null))switch(u){case"value":f=w;break;case"defaultValue":x=w;break;case"multiple":l=w;default:Dt(e,a,u,w,i,null)}a=f,i=x,e.multiple=!!l,a!=null?us(e,!!l,a,!1):i!=null&&us(e,!!l,i,!0);return;case"textarea":tt("invalid",e),f=u=l=null;for(x in i)if(i.hasOwnProperty(x)&&(w=i[x],w!=null))switch(x){case"value":l=w;break;case"defaultValue":u=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(o(91));break;default:Dt(e,a,x,w,i,null)}Ci(e,l,u,f);return;case"option":for(k in i)if(i.hasOwnProperty(k)&&(l=i[k],l!=null))switch(k){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Dt(e,a,k,l,i,null)}return;case"dialog":tt("beforetoggle",e),tt("toggle",e),tt("cancel",e),tt("close",e);break;case"iframe":case"object":tt("load",e);break;case"video":case"audio":for(l=0;l<ll.length;l++)tt(ll[l],e);break;case"image":tt("error",e),tt("load",e);break;case"details":tt("toggle",e);break;case"embed":case"source":case"link":tt("error",e),tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in i)if(i.hasOwnProperty(O)&&(l=i[O],l!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:Dt(e,a,O,l,i,null)}return;default:if(go(a)){for(X in i)i.hasOwnProperty(X)&&(l=i[X],l!==void 0&&Zp(e,a,X,l,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(l=i[w],l!=null&&Dt(e,a,w,l,i,null))}function Yw(e,a,i,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,x=null,w=null,k=null,O=null,X=null;for(V in i){var ee=i[V];if(i.hasOwnProperty(V)&&ee!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":k=ee;default:l.hasOwnProperty(V)||Dt(e,a,V,null,l,ee)}}for(var H in l){var V=l[H];if(ee=i[H],l.hasOwnProperty(H)&&(V!=null||ee!=null))switch(H){case"type":f=V;break;case"name":u=V;break;case"checked":O=V;break;case"defaultChecked":X=V;break;case"value":x=V;break;case"defaultValue":w=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,a));break;default:V!==ee&&Dt(e,a,H,V,l,ee)}}Hs(e,x,w,k,O,X,f,u);return;case"select":V=x=w=H=null;for(f in i)if(k=i[f],i.hasOwnProperty(f)&&k!=null)switch(f){case"value":break;case"multiple":V=k;default:l.hasOwnProperty(f)||Dt(e,a,f,null,l,k)}for(u in l)if(f=l[u],k=i[u],l.hasOwnProperty(u)&&(f!=null||k!=null))switch(u){case"value":H=f;break;case"defaultValue":w=f;break;case"multiple":x=f;default:f!==k&&Dt(e,a,u,f,l,k)}a=w,i=x,l=V,H!=null?us(e,!!i,H,!1):!!l!=!!i&&(a!=null?us(e,!!i,a,!0):us(e,!!i,i?[]:"",!1));return;case"textarea":V=H=null;for(w in i)if(u=i[w],i.hasOwnProperty(w)&&u!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Dt(e,a,w,null,l,u)}for(x in l)if(u=l[x],f=i[x],l.hasOwnProperty(x)&&(u!=null||f!=null))switch(x){case"value":H=u;break;case"defaultValue":V=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(o(91));break;default:u!==f&&Dt(e,a,x,u,l,f)}Qe(e,H,V);return;case"option":for(var Se in i)if(H=i[Se],i.hasOwnProperty(Se)&&H!=null&&!l.hasOwnProperty(Se))switch(Se){case"selected":e.selected=!1;break;default:Dt(e,a,Se,null,l,H)}for(k in l)if(H=l[k],V=i[k],l.hasOwnProperty(k)&&H!==V&&(H!=null||V!=null))switch(k){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Dt(e,a,k,H,l,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in i)H=i[Oe],i.hasOwnProperty(Oe)&&H!=null&&!l.hasOwnProperty(Oe)&&Dt(e,a,Oe,null,l,H);for(O in l)if(H=l[O],V=i[O],l.hasOwnProperty(O)&&H!==V&&(H!=null||V!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(o(137,a));break;default:Dt(e,a,O,H,l,V)}return;default:if(go(a)){for(var Nt in i)H=i[Nt],i.hasOwnProperty(Nt)&&H!==void 0&&!l.hasOwnProperty(Nt)&&Zp(e,a,Nt,void 0,l,H);for(X in l)H=l[X],V=i[X],!l.hasOwnProperty(X)||H===V||H===void 0&&V===void 0||Zp(e,a,X,H,l,V);return}}for(var N in i)H=i[N],i.hasOwnProperty(N)&&H!=null&&!l.hasOwnProperty(N)&&Dt(e,a,N,null,l,H);for(ee in l)H=l[ee],V=i[ee],!l.hasOwnProperty(ee)||H===V||H==null&&V==null||Dt(e,a,ee,H,l,V)}function Sx(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var u=i[l],f=u.transferSize,x=u.initiatorType,w=u.duration;if(f&&w&&Sx(x)){for(x=0,w=u.responseEnd,l+=1;l<i.length;l++){var k=i[l],O=k.startTime;if(O>w)break;var X=k.transferSize,ee=k.initiatorType;X&&Sx(ee)&&(k=k.responseEnd,x+=X*(k<w?1:(w-O)/(k-O)))}if(--l,a+=8*(f+x)/(u.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Jp=null,ef=null;function ed(e){return e.nodeType===9?e:e.ownerDocument}function wx(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _x(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function tf(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var nf=null;function Kw(){var e=window.event;return e&&e.type==="popstate"?e===nf?!1:(nf=e,!0):(nf=null,!1)}var Cx=typeof setTimeout=="function"?setTimeout:void 0,Qw=typeof clearTimeout=="function"?clearTimeout:void 0,jx=typeof Promise=="function"?Promise:void 0,Zw=typeof queueMicrotask=="function"?queueMicrotask:typeof jx<"u"?function(e){return jx.resolve(null).then(e).catch(Jw)}:Cx;function Jw(e){setTimeout(function(){throw e})}function ci(e){return e==="head"}function Tx(e,a){var i=a,l=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"||i==="/&"){if(l===0){e.removeChild(u),Ko(a);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")dl(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,dl(i);for(var f=i.firstChild;f;){var x=f.nextSibling,w=f.nodeName;f[Si]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=x}}else i==="body"&&dl(e.ownerDocument.body);i=u}while(i);Ko(a)}function kx(e,a){var i=e;e=0;do{var l=i.nextSibling;if(i.nodeType===1?a?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(a?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=l}while(i)}function af(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var i=a;switch(a=a.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":af(i),fo(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function e_(e,a,i,l){for(;e.nodeType===1;){var u=i;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Si])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Ma(e.nextSibling),e===null)break}return null}function t_(e,a,i){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Ma(e.nextSibling),e===null))return null;return e}function Mx(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ma(e.nextSibling),e===null))return null;return e}function sf(e){return e.data==="$?"||e.data==="$~"}function of(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function n_(e,a){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||i.readyState!=="loading")a();else{var l=function(){a(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Ma(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var rf=null;function Ex(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(a===0)return Ma(e.nextSibling);a--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||a++}e=e.nextSibling}return null}function Ax(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(a===0)return e;a--}else i!=="/$"&&i!=="/&"||a++}e=e.previousSibling}return null}function Rx(e,a,i){switch(a=ed(i),e){case"html":if(e=a.documentElement,!e)throw Error(o(452));return e;case"head":if(e=a.head,!e)throw Error(o(453));return e;case"body":if(e=a.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function dl(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);fo(e)}var Ea=new Map,Dx=new Set;function td(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Es=ne.d;ne.d={f:a_,r:s_,D:i_,C:o_,L:r_,m:l_,X:d_,S:c_,M:u_};function a_(){var e=Es.f(),a=Gc();return e||a}function s_(e){var a=Is(e);a!==null&&a.tag===5&&a.type==="form"?Xg(a):Es.r(e)}var Wo=typeof document>"u"?null:document;function Nx(e,a,i){var l=Wo;if(l&&typeof a=="string"&&a){var u=$n(a);u='link[rel="'+e+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),Dx.has(u)||(Dx.add(u),e={rel:e,crossOrigin:i,href:a},l.querySelector(u)===null&&(a=l.createElement("link"),Un(a,"link",e),fn(a),l.head.appendChild(a)))}}function i_(e){Es.D(e),Nx("dns-prefetch",e,null)}function o_(e,a){Es.C(e,a),Nx("preconnect",e,a)}function r_(e,a,i){Es.L(e,a,i);var l=Wo;if(l&&e&&a){var u='link[rel="preload"][as="'+$n(a)+'"]';a==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+$n(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+$n(i.imageSizes)+'"]')):u+='[href="'+$n(e)+'"]';var f=u;switch(a){case"style":f=Yo(e);break;case"script":f=Xo(e)}Ea.has(f)||(e=v({rel:"preload",href:a==="image"&&i&&i.imageSrcSet?void 0:e,as:a},i),Ea.set(f,e),l.querySelector(u)!==null||a==="style"&&l.querySelector(ul(f))||a==="script"&&l.querySelector(pl(f))||(a=l.createElement("link"),Un(a,"link",e),fn(a),l.head.appendChild(a)))}}function l_(e,a){Es.m(e,a);var i=Wo;if(i&&e){var l=a&&typeof a.as=="string"?a.as:"script",u='link[rel="modulepreload"][as="'+$n(l)+'"][href="'+$n(e)+'"]',f=u;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Xo(e)}if(!Ea.has(f)&&(e=v({rel:"modulepreload",href:e},a),Ea.set(f,e),i.querySelector(u)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(pl(f)))return}l=i.createElement("link"),Un(l,"link",e),fn(l),i.head.appendChild(l)}}}function c_(e,a,i){Es.S(e,a,i);var l=Wo;if(l&&e){var u=cs(l).hoistableStyles,f=Yo(e);a=a||"default";var x=u.get(f);if(!x){var w={loading:0,preload:null};if(x=l.querySelector(ul(f)))w.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":a},i),(i=Ea.get(f))&&lf(e,i);var k=x=l.createElement("link");fn(k),Un(k,"link",e),k._p=new Promise(function(O,X){k.onload=O,k.onerror=X}),k.addEventListener("load",function(){w.loading|=1}),k.addEventListener("error",function(){w.loading|=2}),w.loading|=4,nd(x,a,l)}x={type:"stylesheet",instance:x,count:1,state:w},u.set(f,x)}}}function d_(e,a){Es.X(e,a);var i=Wo;if(i&&e){var l=cs(i).hoistableScripts,u=Xo(e),f=l.get(u);f||(f=i.querySelector(pl(u)),f||(e=v({src:e,async:!0},a),(a=Ea.get(u))&&cf(e,a),f=i.createElement("script"),fn(f),Un(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function u_(e,a){Es.M(e,a);var i=Wo;if(i&&e){var l=cs(i).hoistableScripts,u=Xo(e),f=l.get(u);f||(f=i.querySelector(pl(u)),f||(e=v({src:e,async:!0,type:"module"},a),(a=Ea.get(u))&&cf(e,a),f=i.createElement("script"),fn(f),Un(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function zx(e,a,i,l){var u=(u=he.current)?td(u):null;if(!u)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(a=Yo(i.href),i=cs(u).hoistableStyles,l=i.get(a),l||(l={type:"style",instance:null,count:0,state:null},i.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Yo(i.href);var f=cs(u).hoistableStyles,x=f.get(e);if(x||(u=u.ownerDocument||u,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,x),(f=u.querySelector(ul(e)))&&!f._p&&(x.instance=f,x.state.loading=5),Ea.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ea.set(e,i),f||p_(u,e,i,x.state))),a&&l===null)throw Error(o(528,""));return x}if(a&&l!==null)throw Error(o(529,""));return null;case"script":return a=i.async,i=i.src,typeof i=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Xo(i),i=cs(u).hoistableScripts,l=i.get(a),l||(l={type:"script",instance:null,count:0,state:null},i.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Yo(e){return'href="'+$n(e)+'"'}function ul(e){return'link[rel="stylesheet"]['+e+"]"}function Bx(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function p_(e,a,i,l){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=e.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),Un(a,"link",i),fn(a),e.head.appendChild(a))}function Xo(e){return'[src="'+$n(e)+'"]'}function pl(e){return"script[async]"+e}function Ux(e,a,i){if(a.count++,a.instance===null)switch(a.type){case"style":var l=e.querySelector('style[data-href~="'+$n(i.href)+'"]');if(l)return a.instance=l,fn(l),l;var u=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),fn(l),Un(l,"style",u),nd(l,i.precedence,e),a.instance=l;case"stylesheet":u=Yo(i.href);var f=e.querySelector(ul(u));if(f)return a.state.loading|=4,a.instance=f,fn(f),f;l=Bx(i),(u=Ea.get(u))&&lf(l,u),f=(e.ownerDocument||e).createElement("link"),fn(f);var x=f;return x._p=new Promise(function(w,k){x.onload=w,x.onerror=k}),Un(f,"link",l),a.state.loading|=4,nd(f,i.precedence,e),a.instance=f;case"script":return f=Xo(i.src),(u=e.querySelector(pl(f)))?(a.instance=u,fn(u),u):(l=i,(u=Ea.get(f))&&(l=v({},i),cf(l,u)),e=e.ownerDocument||e,u=e.createElement("script"),fn(u),Un(u,"link",l),e.head.appendChild(u),a.instance=u);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,nd(l,i.precedence,e));return a.instance}function nd(e,a,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=l.length?l[l.length-1]:null,f=u,x=0;x<l.length;x++){var w=l[x];if(w.dataset.precedence===a)f=w;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(a=i.nodeType===9?i.head:i,a.insertBefore(e,a.firstChild))}function lf(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function cf(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var ad=null;function Ix(e,a,i){if(ad===null){var l=new Map,u=ad=new Map;u.set(i,l)}else u=ad,l=u.get(i),l||(l=new Map,u.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),u=0;u<i.length;u++){var f=i[u];if(!(f[Si]||f[Ze]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var x=f.getAttribute(a)||"";x=e+x;var w=l.get(x);w?w.push(f):l.set(x,[f])}}return l}function Ox(e,a,i){e=e.ownerDocument||e,e.head.insertBefore(i,a==="title"?e.querySelector("head > title"):null)}function f_(e,a,i){if(i===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Lx(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function h_(e,a,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var u=Yo(l.href),f=a.querySelector(ul(u));if(f){a=f._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=sd.bind(e),a.then(e,e)),i.state.loading|=4,i.instance=f,fn(f);return}f=a.ownerDocument||a,l=Bx(l),(u=Ea.get(u))&&lf(l,u),f=f.createElement("link"),fn(f);var x=f;x._p=new Promise(function(w,k){x.onload=w,x.onerror=k}),Un(f,"link",l),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=sd.bind(e),a.addEventListener("load",i),a.addEventListener("error",i))}}var df=0;function m_(e,a){return e.stylesheets&&e.count===0&&od(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var l=setTimeout(function(){if(e.stylesheets&&od(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+a);0<e.imgBytes&&df===0&&(df=62500*Xw());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&od(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>df?50:800)+a);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(u)}}:null}function sd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)od(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var id=null;function od(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,id=new Map,a.forEach(g_,e),id=null,sd.call(e))}function g_(e,a){if(!(a.state.loading&4)){var i=id.get(e);if(i)var l=i.get(null);else{i=new Map,id.set(e,i);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var x=u[f];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(i.set(x.dataset.precedence,x),l=x)}l&&i.set(null,l)}u=a.instance,x=u.getAttribute("data-precedence"),f=i.get(x)||l,f===l&&i.set(null,u),i.set(x,u),this.count++,l=sd.bind(this),u.addEventListener("load",l),u.addEventListener("error",l),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),a.state.loading|=4}}var fl={$$typeof:R,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function y_(e,a,i,l,u,f,x,w,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ue(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ue(0),this.hiddenUpdates=Ue(null),this.identifierPrefix=l,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Px(e,a,i,l,u,f,x,w,k,O,X,ee){return e=new y_(e,a,i,x,k,O,X,ee,w),a=1,f===!0&&(a|=24),f=ra(3,null,null,a),e.current=f,f.stateNode=e,a=$u(),a.refCount++,e.pooledCache=a,a.refCount++,f.memoizedState={element:l,isDehydrated:i,cache:a},Gu(f),e}function Hx(e){return e?(e=To,e):To}function $x(e,a,i,l,u,f){u=Hx(u),l.context===null?l.context=u:l.pendingContext=u,l=Zs(a),l.payload={element:i},f=f===void 0?null:f,f!==null&&(l.callback=f),i=Js(e,l,a),i!==null&&(na(i,e,a),qr(i,e,a))}function Fx(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<a?i:a}}function uf(e,a){Fx(e,a),(e=e.alternate)&&Fx(e,a)}function Vx(e){if(e.tag===13||e.tag===31){var a=zi(e,67108864);a!==null&&na(a,e,67108864),uf(e,67108864)}}function qx(e){if(e.tag===13||e.tag===31){var a=pa();a=Je(a);var i=zi(e,a);i!==null&&na(i,e,a),uf(e,a)}}var rd=!0;function x_(e,a,i,l){var u=B.T;B.T=null;var f=ne.p;try{ne.p=2,pf(e,a,i,l)}finally{ne.p=f,B.T=u}}function v_(e,a,i,l){var u=B.T;B.T=null;var f=ne.p;try{ne.p=8,pf(e,a,i,l)}finally{ne.p=f,B.T=u}}function pf(e,a,i,l){if(rd){var u=ff(l);if(u===null)Qp(e,a,l,ld,i),Wx(e,l);else if(S_(u,e,a,i,l))l.stopPropagation();else if(Wx(e,l),a&4&&-1<b_.indexOf(e)){for(;u!==null;){var f=Is(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var x=ga(f.pendingLanes);if(x!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var k=1<<31-pt(x);w.entanglements[1]|=k,x&=~k}Ja(f),(vt&6)===0&&(Vc=oe()+500,rl(0))}}break;case 31:case 13:w=zi(f,2),w!==null&&na(w,f,2),Gc(),uf(f,2)}if(f=ff(l),f===null&&Qp(e,a,l,ld,i),f===u)break;u=f}u!==null&&l.stopPropagation()}else Qp(e,a,l,null,i)}}function ff(e){return e=wn(e),hf(e)}var ld=null;function hf(e){if(ld=null,e=ls(e),e!==null){var a=d(e);if(a===null)e=null;else{var i=a.tag;if(i===13){if(e=p(a),e!==null)return e;e=null}else if(i===31){if(e=h(a),e!==null)return e;e=null}else if(i===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return ld=e,null}function Gx(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case ht:return 2;case ut:return 8;case It:case Sn:return 32;case $:return 268435456;default:return 32}default:return 32}}var mf=!1,di=null,ui=null,pi=null,hl=new Map,ml=new Map,fi=[],b_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wx(e,a){switch(e){case"focusin":case"focusout":di=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":hl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(a.pointerId)}}function gl(e,a,i,l,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:a,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[u]},a!==null&&(a=Is(a),a!==null&&Vx(a)),e):(e.eventSystemFlags|=l,a=e.targetContainers,u!==null&&a.indexOf(u)===-1&&a.push(u),e)}function S_(e,a,i,l,u){switch(a){case"focusin":return di=gl(di,e,a,i,l,u),!0;case"dragenter":return ui=gl(ui,e,a,i,l,u),!0;case"mouseover":return pi=gl(pi,e,a,i,l,u),!0;case"pointerover":var f=u.pointerId;return hl.set(f,gl(hl.get(f)||null,e,a,i,l,u)),!0;case"gotpointercapture":return f=u.pointerId,ml.set(f,gl(ml.get(f)||null,e,a,i,l,u)),!0}return!1}function Yx(e){var a=ls(e.target);if(a!==null){var i=d(a);if(i!==null){if(a=i.tag,a===13){if(a=p(i),a!==null){e.blockedOn=a,Ft(e.priority,function(){qx(i)});return}}else if(a===31){if(a=h(i),a!==null){e.blockedOn=a,Ft(e.priority,function(){qx(i)});return}}else if(a===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cd(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var i=ff(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);yo=l,i.target.dispatchEvent(l),yo=null}else return a=Is(i),a!==null&&Vx(a),e.blockedOn=i,!1;a.shift()}return!0}function Xx(e,a,i){cd(e)&&i.delete(a)}function w_(){mf=!1,di!==null&&cd(di)&&(di=null),ui!==null&&cd(ui)&&(ui=null),pi!==null&&cd(pi)&&(pi=null),hl.forEach(Xx),ml.forEach(Xx)}function dd(e,a){e.blockedOn===a&&(e.blockedOn=null,mf||(mf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,w_)))}var ud=null;function Kx(e){ud!==e&&(ud=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ud===e&&(ud=null);for(var a=0;a<e.length;a+=3){var i=e[a],l=e[a+1],u=e[a+2];if(typeof l!="function"){if(hf(l||i)===null)continue;break}var f=Is(i);f!==null&&(e.splice(a,3),a-=3,pp(f,{pending:!0,data:u,method:i.method,action:l},l,u))}}))}function Ko(e){function a(k){return dd(k,e)}di!==null&&dd(di,e),ui!==null&&dd(ui,e),pi!==null&&dd(pi,e),hl.forEach(a),ml.forEach(a);for(var i=0;i<fi.length;i++){var l=fi[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<fi.length&&(i=fi[0],i.blockedOn===null);)Yx(i),i.blockedOn===null&&fi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var u=i[l],f=i[l+1],x=u[Rn]||null;if(typeof f=="function")x||Kx(i);else if(x){var w=null;if(f&&f.hasAttribute("formAction")){if(u=f,x=f[Rn]||null)w=x.formAction;else if(hf(u)!==null)continue}else w=x.action;typeof w=="function"?i[l+1]=w:(i.splice(l,3),l-=3),Kx(i)}}}function Qx(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(x){return u=x})},focusReset:"manual",scroll:"manual"})}function a(){u!==null&&(u(),u=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),u!==null&&(u(),u=null)}}}function gf(e){this._internalRoot=e}pd.prototype.render=gf.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(o(409));var i=a.current,l=pa();$x(i,l,e,a,null,null)},pd.prototype.unmount=gf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;$x(e.current,2,null,e,null,null),Gc(),a[rs]=null}};function pd(e){this._internalRoot=e}pd.prototype.unstable_scheduleHydration=function(e){if(e){var a=$t();e={blockedOn:null,target:e,priority:a};for(var i=0;i<fi.length&&a!==0&&a<fi[i].priority;i++);fi.splice(i,0,e),i===0&&Yx(e)}};var Zx=n.version;if(Zx!=="19.2.0")throw Error(o(527,Zx,"19.2.0"));ne.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(a),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var __={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fd.isDisabled&&fd.supportsFiber)try{pe=fd.inject(__),ve=fd}catch{}}return xl.createRoot=function(e,a){if(!c(e))throw Error(o(299));var i=!1,l="",u=iy,f=oy,x=ry;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(f=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Px(e,1,!1,null,null,i,l,null,u,f,x,Qx),e[rs]=a.current,Kp(e),new gf(a)},xl.hydrateRoot=function(e,a,i){if(!c(e))throw Error(o(299));var l=!1,u="",f=iy,x=oy,w=ry,k=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(x=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.formState!==void 0&&(k=i.formState)),a=Px(e,1,!0,a,i??null,l,u,k,f,x,w,Qx),a.context=Hx(null),i=a.current,l=pa(),l=Je(l),u=Zs(l),u.callback=null,Js(i,u,l),i=l,a.current.lanes=i,ye(a,i),Ja(a),e[rs]=a.current,Kp(e),new pd(a)},xl.version="19.2.0",xl}var ov;function Q_(){if(ov)return vf.exports;ov=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),vf.exports=K_(),vf.exports}var Z_=Q_();const J_="modulepreload",eC=function(t){return"/"+t},rv={},Ut=function(n,s,o){let c=Promise.resolve();if(s&&s.length>0){let m=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),h=p?.nonce||p?.getAttribute("nonce");c=m(s.map(g=>{if(g=eC(g),g in rv)return;rv[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":J_,y||(S.as="script"),S.crossOrigin="",S.href=g,h&&S.setAttribute("nonce",h),document.head.appendChild(S),y)return new Promise((j,C)=>{S.addEventListener("load",j),S.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${g}`)))})}))}function d(p){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=p,window.dispatchEvent(h),!h.defaultPrevented)throw p}return c.then(p=>{for(const h of p||[])h.status==="rejected"&&d(h.reason);return n().catch(d)})},lv=t=>{let n;const s=new Set,o=(g,y)=>{const v=typeof g=="function"?g(n):g;if(!Object.is(v,n)){const S=n;n=y??(typeof v!="object"||v===null)?v:Object.assign({},n,v),s.forEach(j=>j(n,S))}},c=()=>n,h={setState:o,getState:c,getInitialState:()=>m,subscribe:g=>(s.add(g),()=>s.delete(g))},m=n=t(o,c,h);return h},tC=(t=>t?lv(t):lv),nC=t=>t;function aC(t,n=nC){const s=La.useSyncExternalStore(t.subscribe,La.useCallback(()=>n(t.getState()),[t,n]),La.useCallback(()=>n(t.getInitialState()),[t,n]));return La.useDebugValue(s),s}const cv=t=>{const n=tC(t),s=o=>aC(n,o);return Object.assign(s,n),s},$l=(t=>t?cv(t):cv);function Tb(t,n){return function(){return t.apply(n,arguments)}}const{toString:sC}=Object.prototype,{getPrototypeOf:qh}=Object,{iterator:Wd,toStringTag:kb}=Symbol,Yd=(t=>n=>{const s=sC.call(n);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ha=t=>(t=t.toLowerCase(),n=>Yd(n)===t),Xd=t=>n=>typeof n===t,{isArray:hr}=Array,cr=Xd("undefined");function Fl(t){return t!==null&&!cr(t)&&t.constructor!==null&&!cr(t.constructor)&&sa(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Mb=Ha("ArrayBuffer");function iC(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&Mb(t.buffer),n}const oC=Xd("string"),sa=Xd("function"),Eb=Xd("number"),Vl=t=>t!==null&&typeof t=="object",rC=t=>t===!0||t===!1,Cd=t=>{if(Yd(t)!=="object")return!1;const n=qh(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(kb in t)&&!(Wd in t)},lC=t=>{if(!Vl(t)||Fl(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},cC=Ha("Date"),dC=Ha("File"),uC=Ha("Blob"),pC=Ha("FileList"),fC=t=>Vl(t)&&sa(t.pipe),hC=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||sa(t.append)&&((n=Yd(t))==="formdata"||n==="object"&&sa(t.toString)&&t.toString()==="[object FormData]"))},mC=Ha("URLSearchParams"),[gC,yC,xC,vC]=["ReadableStream","Request","Response","Headers"].map(Ha),bC=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ql(t,n,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let o,c;if(typeof t!="object"&&(t=[t]),hr(t))for(o=0,c=t.length;o<c;o++)n.call(null,t[o],o,t);else{if(Fl(t))return;const d=s?Object.getOwnPropertyNames(t):Object.keys(t),p=d.length;let h;for(o=0;o<p;o++)h=d[o],n.call(null,t[h],h,t)}}function Ab(t,n){if(Fl(t))return null;n=n.toLowerCase();const s=Object.keys(t);let o=s.length,c;for(;o-- >0;)if(c=s[o],n===c.toLowerCase())return c;return null}const eo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rb=t=>!cr(t)&&t!==eo;function ah(){const{caseless:t,skipUndefined:n}=Rb(this)&&this||{},s={},o=(c,d)=>{const p=t&&Ab(s,d)||d;Cd(s[p])&&Cd(c)?s[p]=ah(s[p],c):Cd(c)?s[p]=ah({},c):hr(c)?s[p]=c.slice():(!n||!cr(c))&&(s[p]=c)};for(let c=0,d=arguments.length;c<d;c++)arguments[c]&&ql(arguments[c],o);return s}const SC=(t,n,s,{allOwnKeys:o}={})=>(ql(n,(c,d)=>{s&&sa(c)?t[d]=Tb(c,s):t[d]=c},{allOwnKeys:o}),t),wC=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),_C=(t,n,s,o)=>{t.prototype=Object.create(n.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),s&&Object.assign(t.prototype,s)},CC=(t,n,s,o)=>{let c,d,p;const h={};if(n=n||{},t==null)return n;do{for(c=Object.getOwnPropertyNames(t),d=c.length;d-- >0;)p=c[d],(!o||o(p,t,n))&&!h[p]&&(n[p]=t[p],h[p]=!0);t=s!==!1&&qh(t)}while(t&&(!s||s(t,n))&&t!==Object.prototype);return n},jC=(t,n,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=n.length;const o=t.indexOf(n,s);return o!==-1&&o===s},TC=t=>{if(!t)return null;if(hr(t))return t;let n=t.length;if(!Eb(n))return null;const s=new Array(n);for(;n-- >0;)s[n]=t[n];return s},kC=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&qh(Uint8Array)),MC=(t,n)=>{const o=(t&&t[Wd]).call(t);let c;for(;(c=o.next())&&!c.done;){const d=c.value;n.call(t,d[0],d[1])}},EC=(t,n)=>{let s;const o=[];for(;(s=t.exec(n))!==null;)o.push(s);return o},AC=Ha("HTMLFormElement"),RC=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,o,c){return o.toUpperCase()+c}),dv=(({hasOwnProperty:t})=>(n,s)=>t.call(n,s))(Object.prototype),DC=Ha("RegExp"),Db=(t,n)=>{const s=Object.getOwnPropertyDescriptors(t),o={};ql(s,(c,d)=>{let p;(p=n(c,d,t))!==!1&&(o[d]=p||c)}),Object.defineProperties(t,o)},NC=t=>{Db(t,(n,s)=>{if(sa(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const o=t[s];if(sa(o)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},zC=(t,n)=>{const s={},o=c=>{c.forEach(d=>{s[d]=!0})};return hr(t)?o(t):o(String(t).split(n)),s},BC=()=>{},UC=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function IC(t){return!!(t&&sa(t.append)&&t[kb]==="FormData"&&t[Wd])}const OC=t=>{const n=new Array(10),s=(o,c)=>{if(Vl(o)){if(n.indexOf(o)>=0)return;if(Fl(o))return o;if(!("toJSON"in o)){n[c]=o;const d=hr(o)?[]:{};return ql(o,(p,h)=>{const m=s(p,c+1);!cr(m)&&(d[h]=m)}),n[c]=void 0,d}}return o};return s(t,0)},LC=Ha("AsyncFunction"),PC=t=>t&&(Vl(t)||sa(t))&&sa(t.then)&&sa(t.catch),Nb=((t,n)=>t?setImmediate:n?((s,o)=>(eo.addEventListener("message",({source:c,data:d})=>{c===eo&&d===s&&o.length&&o.shift()()},!1),c=>{o.push(c),eo.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",sa(eo.postMessage)),HC=typeof queueMicrotask<"u"?queueMicrotask.bind(eo):typeof process<"u"&&process.nextTick||Nb,$C=t=>t!=null&&sa(t[Wd]),F={isArray:hr,isArrayBuffer:Mb,isBuffer:Fl,isFormData:hC,isArrayBufferView:iC,isString:oC,isNumber:Eb,isBoolean:rC,isObject:Vl,isPlainObject:Cd,isEmptyObject:lC,isReadableStream:gC,isRequest:yC,isResponse:xC,isHeaders:vC,isUndefined:cr,isDate:cC,isFile:dC,isBlob:uC,isRegExp:DC,isFunction:sa,isStream:fC,isURLSearchParams:mC,isTypedArray:kC,isFileList:pC,forEach:ql,merge:ah,extend:SC,trim:bC,stripBOM:wC,inherits:_C,toFlatObject:CC,kindOf:Yd,kindOfTest:Ha,endsWith:jC,toArray:TC,forEachEntry:MC,matchAll:EC,isHTMLForm:AC,hasOwnProperty:dv,hasOwnProp:dv,reduceDescriptors:Db,freezeMethods:NC,toObjectSet:zC,toCamelCase:RC,noop:BC,toFiniteNumber:UC,findKey:Ab,global:eo,isContextDefined:Rb,isSpecCompliantForm:IC,toJSONObject:OC,isAsyncFn:LC,isThenable:PC,setImmediate:Nb,asap:HC,isIterable:$C};function Ye(t,n,s,o,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),s&&(this.config=s),o&&(this.request=o),c&&(this.response=c,this.status=c.status?c.status:null)}F.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.status}}});const zb=Ye.prototype,Bb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Bb[t]={value:t}});Object.defineProperties(Ye,Bb);Object.defineProperty(zb,"isAxiosError",{value:!0});Ye.from=(t,n,s,o,c,d)=>{const p=Object.create(zb);F.toFlatObject(t,p,function(y){return y!==Error.prototype},g=>g!=="isAxiosError");const h=t&&t.message?t.message:"Error",m=n==null&&t?t.code:n;return Ye.call(p,h,m,s,o,c),t&&p.cause==null&&Object.defineProperty(p,"cause",{value:t,configurable:!0}),p.name=t&&t.name||"Error",d&&Object.assign(p,d),p};const FC=null;function sh(t){return F.isPlainObject(t)||F.isArray(t)}function Ub(t){return F.endsWith(t,"[]")?t.slice(0,-2):t}function uv(t,n,s){return t?t.concat(n).map(function(c,d){return c=Ub(c),!s&&d?"["+c+"]":c}).join(s?".":""):n}function VC(t){return F.isArray(t)&&!t.some(sh)}const qC=F.toFlatObject(F,{},null,function(n){return/^is[A-Z]/.test(n)});function Kd(t,n,s){if(!F.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,s=F.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,E){return!F.isUndefined(E[T])});const o=s.metaTokens,c=s.visitor||y,d=s.dots,p=s.indexes,m=(s.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(n);if(!F.isFunction(c))throw new TypeError("visitor must be a function");function g(C){if(C===null)return"";if(F.isDate(C))return C.toISOString();if(F.isBoolean(C))return C.toString();if(!m&&F.isBlob(C))throw new Ye("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(C)||F.isTypedArray(C)?m&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function y(C,T,E){let z=C;if(C&&!E&&typeof C=="object"){if(F.endsWith(T,"{}"))T=o?T:T.slice(0,-2),C=JSON.stringify(C);else if(F.isArray(C)&&VC(C)||(F.isFileList(C)||F.endsWith(T,"[]"))&&(z=F.toArray(C)))return T=Ub(T),z.forEach(function(R,Y){!(F.isUndefined(R)||R===null)&&n.append(p===!0?uv([T],Y,d):p===null?T:T+"[]",g(R))}),!1}return sh(C)?!0:(n.append(uv(E,T,d),g(C)),!1)}const v=[],S=Object.assign(qC,{defaultVisitor:y,convertValue:g,isVisitable:sh});function j(C,T){if(!F.isUndefined(C)){if(v.indexOf(C)!==-1)throw Error("Circular reference detected in "+T.join("."));v.push(C),F.forEach(C,function(z,L){(!(F.isUndefined(z)||z===null)&&c.call(n,z,F.isString(L)?L.trim():L,T,S))===!0&&j(z,T?T.concat(L):[L])}),v.pop()}}if(!F.isObject(t))throw new TypeError("data must be an object");return j(t),n}function pv(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return n[o]})}function Gh(t,n){this._pairs=[],t&&Kd(t,this,n)}const Ib=Gh.prototype;Ib.append=function(n,s){this._pairs.push([n,s])};Ib.toString=function(n){const s=n?function(o){return n.call(this,o,pv)}:pv;return this._pairs.map(function(c){return s(c[0])+"="+s(c[1])},"").join("&")};function GC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ob(t,n,s){if(!n)return t;const o=s&&s.encode||GC;F.isFunction(s)&&(s={serialize:s});const c=s&&s.serialize;let d;if(c?d=c(n,s):d=F.isURLSearchParams(n)?n.toString():new Gh(n,s).toString(o),d){const p=t.indexOf("#");p!==-1&&(t=t.slice(0,p)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class fv{constructor(){this.handlers=[]}use(n,s,o){return this.handlers.push({fulfilled:n,rejected:s,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){F.forEach(this.handlers,function(o){o!==null&&n(o)})}}const Lb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},WC=typeof URLSearchParams<"u"?URLSearchParams:Gh,YC=typeof FormData<"u"?FormData:null,XC=typeof Blob<"u"?Blob:null,KC={isBrowser:!0,classes:{URLSearchParams:WC,FormData:YC,Blob:XC},protocols:["http","https","file","blob","url","data"]},Wh=typeof window<"u"&&typeof document<"u",ih=typeof navigator=="object"&&navigator||void 0,QC=Wh&&(!ih||["ReactNative","NativeScript","NS"].indexOf(ih.product)<0),ZC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",JC=Wh&&window.location.href||"http://localhost",ej=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Wh,hasStandardBrowserEnv:QC,hasStandardBrowserWebWorkerEnv:ZC,navigator:ih,origin:JC},Symbol.toStringTag,{value:"Module"})),qn={...ej,...KC};function tj(t,n){return Kd(t,new qn.classes.URLSearchParams,{visitor:function(s,o,c,d){return qn.isNode&&F.isBuffer(s)?(this.append(o,s.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...n})}function nj(t){return F.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function aj(t){const n={},s=Object.keys(t);let o;const c=s.length;let d;for(o=0;o<c;o++)d=s[o],n[d]=t[d];return n}function Pb(t){function n(s,o,c,d){let p=s[d++];if(p==="__proto__")return!0;const h=Number.isFinite(+p),m=d>=s.length;return p=!p&&F.isArray(c)?c.length:p,m?(F.hasOwnProp(c,p)?c[p]=[c[p],o]:c[p]=o,!h):((!c[p]||!F.isObject(c[p]))&&(c[p]=[]),n(s,o,c[p],d)&&F.isArray(c[p])&&(c[p]=aj(c[p])),!h)}if(F.isFormData(t)&&F.isFunction(t.entries)){const s={};return F.forEachEntry(t,(o,c)=>{n(nj(o),c,s,0)}),s}return null}function sj(t,n,s){if(F.isString(t))try{return(n||JSON.parse)(t),F.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(s||JSON.stringify)(t)}const Gl={transitional:Lb,adapter:["xhr","http","fetch"],transformRequest:[function(n,s){const o=s.getContentType()||"",c=o.indexOf("application/json")>-1,d=F.isObject(n);if(d&&F.isHTMLForm(n)&&(n=new FormData(n)),F.isFormData(n))return c?JSON.stringify(Pb(n)):n;if(F.isArrayBuffer(n)||F.isBuffer(n)||F.isStream(n)||F.isFile(n)||F.isBlob(n)||F.isReadableStream(n))return n;if(F.isArrayBufferView(n))return n.buffer;if(F.isURLSearchParams(n))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let h;if(d){if(o.indexOf("application/x-www-form-urlencoded")>-1)return tj(n,this.formSerializer).toString();if((h=F.isFileList(n))||o.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Kd(h?{"files[]":n}:n,m&&new m,this.formSerializer)}}return d||c?(s.setContentType("application/json",!1),sj(n)):n}],transformResponse:[function(n){const s=this.transitional||Gl.transitional,o=s&&s.forcedJSONParsing,c=this.responseType==="json";if(F.isResponse(n)||F.isReadableStream(n))return n;if(n&&F.isString(n)&&(o&&!this.responseType||c)){const p=!(s&&s.silentJSONParsing)&&c;try{return JSON.parse(n,this.parseReviver)}catch(h){if(p)throw h.name==="SyntaxError"?Ye.from(h,Ye.ERR_BAD_RESPONSE,this,null,this.response):h}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qn.classes.FormData,Blob:qn.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],t=>{Gl.headers[t]={}});const ij=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oj=t=>{const n={};let s,o,c;return t&&t.split(`
`).forEach(function(p){c=p.indexOf(":"),s=p.substring(0,c).trim().toLowerCase(),o=p.substring(c+1).trim(),!(!s||n[s]&&ij[s])&&(s==="set-cookie"?n[s]?n[s].push(o):n[s]=[o]:n[s]=n[s]?n[s]+", "+o:o)}),n},hv=Symbol("internals");function vl(t){return t&&String(t).trim().toLowerCase()}function jd(t){return t===!1||t==null?t:F.isArray(t)?t.map(jd):String(t)}function rj(t){const n=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=s.exec(t);)n[o[1]]=o[2];return n}const lj=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function wf(t,n,s,o,c){if(F.isFunction(o))return o.call(this,n,s);if(c&&(n=s),!!F.isString(n)){if(F.isString(o))return n.indexOf(o)!==-1;if(F.isRegExp(o))return o.test(n)}}function cj(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,s,o)=>s.toUpperCase()+o)}function dj(t,n){const s=F.toCamelCase(" "+n);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+s,{value:function(c,d,p){return this[o].call(this,n,c,d,p)},configurable:!0})})}let ia=class{constructor(n){n&&this.set(n)}set(n,s,o){const c=this;function d(h,m,g){const y=vl(m);if(!y)throw new Error("header name must be a non-empty string");const v=F.findKey(c,y);(!v||c[v]===void 0||g===!0||g===void 0&&c[v]!==!1)&&(c[v||m]=jd(h))}const p=(h,m)=>F.forEach(h,(g,y)=>d(g,y,m));if(F.isPlainObject(n)||n instanceof this.constructor)p(n,s);else if(F.isString(n)&&(n=n.trim())&&!lj(n))p(oj(n),s);else if(F.isObject(n)&&F.isIterable(n)){let h={},m,g;for(const y of n){if(!F.isArray(y))throw TypeError("Object iterator must return a key-value pair");h[g=y[0]]=(m=h[g])?F.isArray(m)?[...m,y[1]]:[m,y[1]]:y[1]}p(h,s)}else n!=null&&d(s,n,o);return this}get(n,s){if(n=vl(n),n){const o=F.findKey(this,n);if(o){const c=this[o];if(!s)return c;if(s===!0)return rj(c);if(F.isFunction(s))return s.call(this,c,o);if(F.isRegExp(s))return s.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,s){if(n=vl(n),n){const o=F.findKey(this,n);return!!(o&&this[o]!==void 0&&(!s||wf(this,this[o],o,s)))}return!1}delete(n,s){const o=this;let c=!1;function d(p){if(p=vl(p),p){const h=F.findKey(o,p);h&&(!s||wf(o,o[h],h,s))&&(delete o[h],c=!0)}}return F.isArray(n)?n.forEach(d):d(n),c}clear(n){const s=Object.keys(this);let o=s.length,c=!1;for(;o--;){const d=s[o];(!n||wf(this,this[d],d,n,!0))&&(delete this[d],c=!0)}return c}normalize(n){const s=this,o={};return F.forEach(this,(c,d)=>{const p=F.findKey(o,d);if(p){s[p]=jd(c),delete s[d];return}const h=n?cj(d):String(d).trim();h!==d&&delete s[d],s[h]=jd(c),o[h]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const s=Object.create(null);return F.forEach(this,(o,c)=>{o!=null&&o!==!1&&(s[c]=n&&F.isArray(o)?o.join(", "):o)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,s])=>n+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...s){const o=new this(n);return s.forEach(c=>o.set(c)),o}static accessor(n){const o=(this[hv]=this[hv]={accessors:{}}).accessors,c=this.prototype;function d(p){const h=vl(p);o[h]||(dj(c,p),o[h]=!0)}return F.isArray(n)?n.forEach(d):d(n),this}};ia.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(ia.prototype,({value:t},n)=>{let s=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(o){this[s]=o}}});F.freezeMethods(ia);function _f(t,n){const s=this||Gl,o=n||s,c=ia.from(o.headers);let d=o.data;return F.forEach(t,function(h){d=h.call(s,d,c.normalize(),n?n.status:void 0)}),c.normalize(),d}function Hb(t){return!!(t&&t.__CANCEL__)}function mr(t,n,s){Ye.call(this,t??"canceled",Ye.ERR_CANCELED,n,s),this.name="CanceledError"}F.inherits(mr,Ye,{__CANCEL__:!0});function $b(t,n,s){const o=s.config.validateStatus;!s.status||!o||o(s.status)?t(s):n(new Ye("Request failed with status code "+s.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function uj(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function pj(t,n){t=t||10;const s=new Array(t),o=new Array(t);let c=0,d=0,p;return n=n!==void 0?n:1e3,function(m){const g=Date.now(),y=o[d];p||(p=g),s[c]=m,o[c]=g;let v=d,S=0;for(;v!==c;)S+=s[v++],v=v%t;if(c=(c+1)%t,c===d&&(d=(d+1)%t),g-p<n)return;const j=y&&g-y;return j?Math.round(S*1e3/j):void 0}}function fj(t,n){let s=0,o=1e3/n,c,d;const p=(g,y=Date.now())=>{s=y,c=null,d&&(clearTimeout(d),d=null),t(...g)};return[(...g)=>{const y=Date.now(),v=y-s;v>=o?p(g,y):(c=g,d||(d=setTimeout(()=>{d=null,p(c)},o-v)))},()=>c&&p(c)]}const zd=(t,n,s=3)=>{let o=0;const c=pj(50,250);return fj(d=>{const p=d.loaded,h=d.lengthComputable?d.total:void 0,m=p-o,g=c(m),y=p<=h;o=p;const v={loaded:p,total:h,progress:h?p/h:void 0,bytes:m,rate:g||void 0,estimated:g&&h&&y?(h-p)/g:void 0,event:d,lengthComputable:h!=null,[n?"download":"upload"]:!0};t(v)},s)},mv=(t,n)=>{const s=t!=null;return[o=>n[0]({lengthComputable:s,total:t,loaded:o}),n[1]]},gv=t=>(...n)=>F.asap(()=>t(...n)),hj=qn.hasStandardBrowserEnv?((t,n)=>s=>(s=new URL(s,qn.origin),t.protocol===s.protocol&&t.host===s.host&&(n||t.port===s.port)))(new URL(qn.origin),qn.navigator&&/(msie|trident)/i.test(qn.navigator.userAgent)):()=>!0,mj=qn.hasStandardBrowserEnv?{write(t,n,s,o,c,d,p){if(typeof document>"u")return;const h=[`${t}=${encodeURIComponent(n)}`];F.isNumber(s)&&h.push(`expires=${new Date(s).toUTCString()}`),F.isString(o)&&h.push(`path=${o}`),F.isString(c)&&h.push(`domain=${c}`),d===!0&&h.push("secure"),F.isString(p)&&h.push(`SameSite=${p}`),document.cookie=h.join("; ")},read(t){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function gj(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function yj(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function Fb(t,n,s){let o=!gj(n);return t&&(o||s==!1)?yj(t,n):n}const yv=t=>t instanceof ia?{...t}:t;function lo(t,n){n=n||{};const s={};function o(g,y,v,S){return F.isPlainObject(g)&&F.isPlainObject(y)?F.merge.call({caseless:S},g,y):F.isPlainObject(y)?F.merge({},y):F.isArray(y)?y.slice():y}function c(g,y,v,S){if(F.isUndefined(y)){if(!F.isUndefined(g))return o(void 0,g,v,S)}else return o(g,y,v,S)}function d(g,y){if(!F.isUndefined(y))return o(void 0,y)}function p(g,y){if(F.isUndefined(y)){if(!F.isUndefined(g))return o(void 0,g)}else return o(void 0,y)}function h(g,y,v){if(v in n)return o(g,y);if(v in t)return o(void 0,g)}const m={url:d,method:d,data:d,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,withXSRFToken:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:h,headers:(g,y,v)=>c(yv(g),yv(y),v,!0)};return F.forEach(Object.keys({...t,...n}),function(y){const v=m[y]||c,S=v(t[y],n[y],y);F.isUndefined(S)&&v!==h||(s[y]=S)}),s}const Vb=t=>{const n=lo({},t);let{data:s,withXSRFToken:o,xsrfHeaderName:c,xsrfCookieName:d,headers:p,auth:h}=n;if(n.headers=p=ia.from(p),n.url=Ob(Fb(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&p.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),F.isFormData(s)){if(qn.hasStandardBrowserEnv||qn.hasStandardBrowserWebWorkerEnv)p.setContentType(void 0);else if(F.isFunction(s.getHeaders)){const m=s.getHeaders(),g=["content-type","content-length"];Object.entries(m).forEach(([y,v])=>{g.includes(y.toLowerCase())&&p.set(y,v)})}}if(qn.hasStandardBrowserEnv&&(o&&F.isFunction(o)&&(o=o(n)),o||o!==!1&&hj(n.url))){const m=c&&d&&mj.read(d);m&&p.set(c,m)}return n},xj=typeof XMLHttpRequest<"u",vj=xj&&function(t){return new Promise(function(s,o){const c=Vb(t);let d=c.data;const p=ia.from(c.headers).normalize();let{responseType:h,onUploadProgress:m,onDownloadProgress:g}=c,y,v,S,j,C;function T(){j&&j(),C&&C(),c.cancelToken&&c.cancelToken.unsubscribe(y),c.signal&&c.signal.removeEventListener("abort",y)}let E=new XMLHttpRequest;E.open(c.method.toUpperCase(),c.url,!0),E.timeout=c.timeout;function z(){if(!E)return;const R=ia.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),P={data:!h||h==="text"||h==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:R,config:t,request:E};$b(function(re){s(re),T()},function(re){o(re),T()},P),E=null}"onloadend"in E?E.onloadend=z:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(z)},E.onabort=function(){E&&(o(new Ye("Request aborted",Ye.ECONNABORTED,t,E)),E=null)},E.onerror=function(Y){const P=Y&&Y.message?Y.message:"Network Error",te=new Ye(P,Ye.ERR_NETWORK,t,E);te.event=Y||null,o(te),E=null},E.ontimeout=function(){let Y=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const P=c.transitional||Lb;c.timeoutErrorMessage&&(Y=c.timeoutErrorMessage),o(new Ye(Y,P.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,t,E)),E=null},d===void 0&&p.setContentType(null),"setRequestHeader"in E&&F.forEach(p.toJSON(),function(Y,P){E.setRequestHeader(P,Y)}),F.isUndefined(c.withCredentials)||(E.withCredentials=!!c.withCredentials),h&&h!=="json"&&(E.responseType=c.responseType),g&&([S,C]=zd(g,!0),E.addEventListener("progress",S)),m&&E.upload&&([v,j]=zd(m),E.upload.addEventListener("progress",v),E.upload.addEventListener("loadend",j)),(c.cancelToken||c.signal)&&(y=R=>{E&&(o(!R||R.type?new mr(null,t,E):R),E.abort(),E=null)},c.cancelToken&&c.cancelToken.subscribe(y),c.signal&&(c.signal.aborted?y():c.signal.addEventListener("abort",y)));const L=uj(c.url);if(L&&qn.protocols.indexOf(L)===-1){o(new Ye("Unsupported protocol "+L+":",Ye.ERR_BAD_REQUEST,t));return}E.send(d||null)})},bj=(t,n)=>{const{length:s}=t=t?t.filter(Boolean):[];if(n||s){let o=new AbortController,c;const d=function(g){if(!c){c=!0,h();const y=g instanceof Error?g:this.reason;o.abort(y instanceof Ye?y:new mr(y instanceof Error?y.message:y))}};let p=n&&setTimeout(()=>{p=null,d(new Ye(`timeout ${n} of ms exceeded`,Ye.ETIMEDOUT))},n);const h=()=>{t&&(p&&clearTimeout(p),p=null,t.forEach(g=>{g.unsubscribe?g.unsubscribe(d):g.removeEventListener("abort",d)}),t=null)};t.forEach(g=>g.addEventListener("abort",d));const{signal:m}=o;return m.unsubscribe=()=>F.asap(h),m}},Sj=function*(t,n){let s=t.byteLength;if(s<n){yield t;return}let o=0,c;for(;o<s;)c=o+n,yield t.slice(o,c),o=c},wj=async function*(t,n){for await(const s of _j(t))yield*Sj(s,n)},_j=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:s,value:o}=await n.read();if(s)break;yield o}}finally{await n.cancel()}},xv=(t,n,s,o)=>{const c=wj(t,n);let d=0,p,h=m=>{p||(p=!0,o&&o(m))};return new ReadableStream({async pull(m){try{const{done:g,value:y}=await c.next();if(g){h(),m.close();return}let v=y.byteLength;if(s){let S=d+=v;s(S)}m.enqueue(new Uint8Array(y))}catch(g){throw h(g),g}},cancel(m){return h(m),c.return()}},{highWaterMark:2})},vv=64*1024,{isFunction:hd}=F,Cj=(({Request:t,Response:n})=>({Request:t,Response:n}))(F.global),{ReadableStream:bv,TextEncoder:Sv}=F.global,wv=(t,...n)=>{try{return!!t(...n)}catch{return!1}},jj=t=>{t=F.merge.call({skipUndefined:!0},Cj,t);const{fetch:n,Request:s,Response:o}=t,c=n?hd(n):typeof fetch=="function",d=hd(s),p=hd(o);if(!c)return!1;const h=c&&hd(bv),m=c&&(typeof Sv=="function"?(C=>T=>C.encode(T))(new Sv):async C=>new Uint8Array(await new s(C).arrayBuffer())),g=d&&h&&wv(()=>{let C=!1;const T=new s(qn.origin,{body:new bv,method:"POST",get duplex(){return C=!0,"half"}}).headers.has("Content-Type");return C&&!T}),y=p&&h&&wv(()=>F.isReadableStream(new o("").body)),v={stream:y&&(C=>C.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(C=>{!v[C]&&(v[C]=(T,E)=>{let z=T&&T[C];if(z)return z.call(T);throw new Ye(`Response type '${C}' is not supported`,Ye.ERR_NOT_SUPPORT,E)})});const S=async C=>{if(C==null)return 0;if(F.isBlob(C))return C.size;if(F.isSpecCompliantForm(C))return(await new s(qn.origin,{method:"POST",body:C}).arrayBuffer()).byteLength;if(F.isArrayBufferView(C)||F.isArrayBuffer(C))return C.byteLength;if(F.isURLSearchParams(C)&&(C=C+""),F.isString(C))return(await m(C)).byteLength},j=async(C,T)=>{const E=F.toFiniteNumber(C.getContentLength());return E??S(T)};return async C=>{let{url:T,method:E,data:z,signal:L,cancelToken:R,timeout:Y,onDownloadProgress:P,onUploadProgress:te,responseType:re,headers:K,withCredentials:ge="same-origin",fetchOptions:me}=Vb(C),He=n||fetch;re=re?(re+"").toLowerCase():"text";let qe=bj([L,R&&R.toAbortSignal()],Y),Ke=null;const Re=qe&&qe.unsubscribe&&(()=>{qe.unsubscribe()});let Te;try{if(te&&g&&E!=="get"&&E!=="head"&&(Te=await j(K,z))!==0){let _e=new s(T,{method:"POST",body:z,duplex:"half"}),Ae;if(F.isFormData(z)&&(Ae=_e.headers.get("content-type"))&&K.setContentType(Ae),_e.body){const[je,ie]=mv(Te,zd(gv(te)));z=xv(_e.body,vv,je,ie)}}F.isString(ge)||(ge=ge?"include":"omit");const B=d&&"credentials"in s.prototype,ne={...me,signal:qe,method:E.toUpperCase(),headers:K.normalize().toJSON(),body:z,duplex:"half",credentials:B?ge:void 0};Ke=d&&new s(T,ne);let le=await(d?He(Ke,me):He(T,ne));const we=y&&(re==="stream"||re==="response");if(y&&(P||we&&Re)){const _e={};["status","statusText","headers"].forEach(Ce=>{_e[Ce]=le[Ce]});const Ae=F.toFiniteNumber(le.headers.get("content-length")),[je,ie]=P&&mv(Ae,zd(gv(P),!0))||[];le=new o(xv(le.body,vv,je,()=>{ie&&ie(),Re&&Re()}),_e)}re=re||"text";let $e=await v[F.findKey(v,re)||"text"](le,C);return!we&&Re&&Re(),await new Promise((_e,Ae)=>{$b(_e,Ae,{data:$e,headers:ia.from(le.headers),status:le.status,statusText:le.statusText,config:C,request:Ke})})}catch(B){throw Re&&Re(),B&&B.name==="TypeError"&&/Load failed|fetch/i.test(B.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,C,Ke),{cause:B.cause||B}):Ye.from(B,B&&B.code,C,Ke)}}},Tj=new Map,qb=t=>{let n=t&&t.env||{};const{fetch:s,Request:o,Response:c}=n,d=[o,c,s];let p=d.length,h=p,m,g,y=Tj;for(;h--;)m=d[h],g=y.get(m),g===void 0&&y.set(m,g=h?new Map:jj(n)),y=g;return g};qb();const Yh={http:FC,xhr:vj,fetch:{get:qb}};F.forEach(Yh,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const _v=t=>`- ${t}`,kj=t=>F.isFunction(t)||t===null||t===!1;function Mj(t,n){t=F.isArray(t)?t:[t];const{length:s}=t;let o,c;const d={};for(let p=0;p<s;p++){o=t[p];let h;if(c=o,!kj(o)&&(c=Yh[(h=String(o)).toLowerCase()],c===void 0))throw new Ye(`Unknown adapter '${h}'`);if(c&&(F.isFunction(c)||(c=c.get(n))))break;d[h||"#"+p]=c}if(!c){const p=Object.entries(d).map(([m,g])=>`adapter ${m} `+(g===!1?"is not supported by the environment":"is not available in the build"));let h=s?p.length>1?`since :
`+p.map(_v).join(`
`):" "+_v(p[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return c}const Gb={getAdapter:Mj,adapters:Yh};function Cf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new mr(null,t)}function Cv(t){return Cf(t),t.headers=ia.from(t.headers),t.data=_f.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Gb.getAdapter(t.adapter||Gl.adapter,t)(t).then(function(o){return Cf(t),o.data=_f.call(t,t.transformResponse,o),o.headers=ia.from(o.headers),o},function(o){return Hb(o)||(Cf(t),o&&o.response&&(o.response.data=_f.call(t,t.transformResponse,o.response),o.response.headers=ia.from(o.response.headers))),Promise.reject(o)})}const Wb="1.13.2",Qd={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Qd[t]=function(o){return typeof o===t||"a"+(n<1?"n ":" ")+t}});const jv={};Qd.transitional=function(n,s,o){function c(d,p){return"[Axios v"+Wb+"] Transitional option '"+d+"'"+p+(o?". "+o:"")}return(d,p,h)=>{if(n===!1)throw new Ye(c(p," has been removed"+(s?" in "+s:"")),Ye.ERR_DEPRECATED);return s&&!jv[p]&&(jv[p]=!0,console.warn(c(p," has been deprecated since v"+s+" and will be removed in the near future"))),n?n(d,p,h):!0}};Qd.spelling=function(n){return(s,o)=>(console.warn(`${o} is likely a misspelling of ${n}`),!0)};function Ej(t,n,s){if(typeof t!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let c=o.length;for(;c-- >0;){const d=o[c],p=n[d];if(p){const h=t[d],m=h===void 0||p(h,d,t);if(m!==!0)throw new Ye("option "+d+" must be "+m,Ye.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Ye("Unknown option "+d,Ye.ERR_BAD_OPTION)}}const Td={assertOptions:Ej,validators:Qd},es=Td.validators;let ao=class{constructor(n){this.defaults=n||{},this.interceptors={request:new fv,response:new fv}}async request(n,s){try{return await this._request(n,s)}catch(o){if(o instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const d=c.stack?c.stack.replace(/^.+\n/,""):"";try{o.stack?d&&!String(o.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+d):o.stack=d}catch{}}throw o}}_request(n,s){typeof n=="string"?(s=s||{},s.url=n):s=n||{},s=lo(this.defaults,s);const{transitional:o,paramsSerializer:c,headers:d}=s;o!==void 0&&Td.assertOptions(o,{silentJSONParsing:es.transitional(es.boolean),forcedJSONParsing:es.transitional(es.boolean),clarifyTimeoutError:es.transitional(es.boolean)},!1),c!=null&&(F.isFunction(c)?s.paramsSerializer={serialize:c}:Td.assertOptions(c,{encode:es.function,serialize:es.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Td.assertOptions(s,{baseUrl:es.spelling("baseURL"),withXsrfToken:es.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let p=d&&F.merge(d.common,d[s.method]);d&&F.forEach(["delete","get","head","post","put","patch","common"],C=>{delete d[C]}),s.headers=ia.concat(p,d);const h=[];let m=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(s)===!1||(m=m&&T.synchronous,h.unshift(T.fulfilled,T.rejected))});const g=[];this.interceptors.response.forEach(function(T){g.push(T.fulfilled,T.rejected)});let y,v=0,S;if(!m){const C=[Cv.bind(this),void 0];for(C.unshift(...h),C.push(...g),S=C.length,y=Promise.resolve(s);v<S;)y=y.then(C[v++],C[v++]);return y}S=h.length;let j=s;for(;v<S;){const C=h[v++],T=h[v++];try{j=C(j)}catch(E){T.call(this,E);break}}try{y=Cv.call(this,j)}catch(C){return Promise.reject(C)}for(v=0,S=g.length;v<S;)y=y.then(g[v++],g[v++]);return y}getUri(n){n=lo(this.defaults,n);const s=Fb(n.baseURL,n.url,n.allowAbsoluteUrls);return Ob(s,n.params,n.paramsSerializer)}};F.forEach(["delete","get","head","options"],function(n){ao.prototype[n]=function(s,o){return this.request(lo(o||{},{method:n,url:s,data:(o||{}).data}))}});F.forEach(["post","put","patch"],function(n){function s(o){return function(d,p,h){return this.request(lo(h||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:d,data:p}))}}ao.prototype[n]=s(),ao.prototype[n+"Form"]=s(!0)});let Aj=class Yb{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(d){s=d});const o=this;this.promise.then(c=>{if(!o._listeners)return;let d=o._listeners.length;for(;d-- >0;)o._listeners[d](c);o._listeners=null}),this.promise.then=c=>{let d;const p=new Promise(h=>{o.subscribe(h),d=h}).then(c);return p.cancel=function(){o.unsubscribe(d)},p},n(function(d,p,h){o.reason||(o.reason=new mr(d,p,h),s(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const s=this._listeners.indexOf(n);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const n=new AbortController,s=o=>{n.abort(o)};return this.subscribe(s),n.signal.unsubscribe=()=>this.unsubscribe(s),n.signal}static source(){let n;return{token:new Yb(function(c){n=c}),cancel:n}}};function Rj(t){return function(s){return t.apply(null,s)}}function Dj(t){return F.isObject(t)&&t.isAxiosError===!0}const oh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(oh).forEach(([t,n])=>{oh[n]=t});function Xb(t){const n=new ao(t),s=Tb(ao.prototype.request,n);return F.extend(s,ao.prototype,n,{allOwnKeys:!0}),F.extend(s,n,null,{allOwnKeys:!0}),s.create=function(c){return Xb(lo(t,c))},s}const dn=Xb(Gl);dn.Axios=ao;dn.CanceledError=mr;dn.CancelToken=Aj;dn.isCancel=Hb;dn.VERSION=Wb;dn.toFormData=Kd;dn.AxiosError=Ye;dn.Cancel=dn.CanceledError;dn.all=function(n){return Promise.all(n)};dn.spread=Rj;dn.isAxiosError=Dj;dn.mergeConfig=lo;dn.AxiosHeaders=ia;dn.formToJSON=t=>Pb(F.isHTMLForm(t)?new FormData(t):t);dn.getAdapter=Gb.getAdapter;dn.HttpStatusCode=oh;dn.default=dn;const{Axios:MU,AxiosError:EU,CanceledError:AU,isCancel:RU,CancelToken:DU,VERSION:NU,all:zU,Cancel:BU,isAxiosError:UU,spread:IU,toFormData:OU,AxiosHeaders:LU,HttpStatusCode:PU,formToJSON:HU,getAdapter:$U,mergeConfig:FU}=dn,Nj="https://your-domain.com/api",Ne=dn.create({baseURL:Nj,headers:{"Content-Type":"application/json"},withCredentials:!0});Ne.interceptors.request.use(t=>{const n=localStorage.getItem("token");return n&&(console.log("[API] Adding token to request:",t.url,"Token:",n.substring(0,20)+"..."),t.headers.Authorization=`Bearer ${n}`),t.data instanceof FormData&&(console.log("[API] FormData detected, removing Content-Type header for:",t.url),delete t.headers["Content-Type"]),t});Ne.interceptors.response.use(t=>t,t=>(t.response?.status===401?(console.warn("[API] 401 Unauthorized - logging out user"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"):t.response?.status===400&&console.error("[API] 400 Bad Request:",t.response?.data),Promise.reject(t)));const gi={login:async t=>{const n=await Ne.post("/auth/login",t);return n.data?.data||n.data},register:async t=>{const n=await Ne.post("/auth/register",t);return n.data?.data||n.data},sendOTP:async t=>(await Ne.post(`/otp/send-to-email?email=${encodeURIComponent(t)}`)).data,updatePassword:async(t,n)=>(await Ne.put("/auth/update-password",{oldPassword:t,newPassword:n})).data,resetPasswordByEmail:async(t,n,s)=>(await Ne.put("/auth/reset-password-by-email",{email:t,password:n,otp:s})).data,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")}};function Tn(t,n="An error occurred"){if(t.response?.data?.error?.message)return t.response.data.error.message;if(t.response?.data?.message)return t.response.data.message;if(t.response?.data?.validationErrors){const s=t.response.data.validationErrors,o=Object.values(s)[0];if(Array.isArray(o)&&o.length>0)return o[0]}return t.message?t.message:n}function Zd(t){return t.response?.data?.error?.code?t.response.data.error.code:null}function zj(t){return Zd(t)==="Chat.Ban.UserBanned"}function Bj(t){switch(Zd(t)){case"Chat.Ban.UserBanned":return"You are banned from this chat and cannot perform this action.";case"Chat.Ban.AlreadyBanned":return"This user is already banned from this chat.";case"Chat.Ban.CannotBanSelf":return"You cannot ban yourself.";case"Chat.Ban.CannotBanOwner":return"You cannot ban the owner of this chat.";default:return Tn(t,"An error occurred")}}function Uj(t){const n=Zd(t);return n==="UserBan.UserBanned"||n==="UserBan.CannotMessageBannedUser"}function Ij(t){return Zd(t)==="UserBan.UserBanned"}const Oj=()=>{try{return localStorage.getItem("token")}catch{return null}},Lj=()=>{try{const t=localStorage.getItem("user");return t?JSON.parse(t):null}catch{return null}},jt=$l(t=>({user:null,token:null,isLoading:!1,error:null,initialized:!1,initializeAuth:async()=>{const n=Lj(),s=Oj();if(console.log("[authStore] Initializing auth:",{hasUser:!!n,hasToken:!!s,user:n}),s&&n)try{console.log("[authStore] Validating stored token...");const{userService:o}=await Ut(async()=>{const{userService:d}=await Promise.resolve().then(()=>fa);return{userService:d}},void 0),c=await o.getCurrentUser();console.log("[authStore] Token is valid, user:",c),t({user:c,token:s,initialized:!0})}catch(o){console.warn("[authStore] Stored token is invalid, clearing auth:",o?.message),localStorage.removeItem("token"),localStorage.removeItem("user"),t({user:null,token:null,initialized:!0})}else t({user:n,token:s,initialized:!0})},login:async n=>{t({isLoading:!0,error:null});try{console.log("[authStore] Logging in...");const s=await gi.login(n);if(console.log("[authStore] Token received:",s?s.substring(0,20)+"...":"No token"),!s)throw new Error("No token received from login");localStorage.setItem("token",s),console.log("[authStore] Fetching user profile from /users/me...");const{userService:o}=await Ut(async()=>{const{userService:d}=await Promise.resolve().then(()=>fa);return{userService:d}},void 0),c=await o.getCurrentUser();!c.email&&n.credential.includes("@")&&(c.email=n.credential),console.log("[authStore] User profile fetched:",c),localStorage.setItem("user",JSON.stringify(c)),console.log("[authStore] Updating state with user and token..."),t({user:c,token:s,isLoading:!1}),console.log("[authStore] Login complete, state updated")}catch(s){const o=Tn(s,"Login failed");throw console.error("[authStore] Login error:",o,s),t({error:o,isLoading:!1}),s}},register:async(n,s,o,c)=>{t({isLoading:!0,error:null});try{console.log("[authStore] Registering user...");const d=await gi.register({email:n,username:s,password:o,otpCode:c});if(console.log("[authStore] Token received:",d?d.substring(0,20)+"...":"No token"),!d)throw new Error("No token received from registration");localStorage.setItem("token",d),console.log("[authStore] Fetching user profile from /users/me...");const{userService:p}=await Ut(async()=>{const{userService:m}=await Promise.resolve().then(()=>fa);return{userService:m}},void 0),h=await p.getCurrentUser();h.email||(h.email=n),console.log("[authStore] User profile fetched:",h),localStorage.setItem("user",JSON.stringify(h)),console.log("[authStore] Updating state with user and token..."),t({user:h,token:d,isLoading:!1}),console.log("[authStore] Registration complete, state updated")}catch(d){const p=Tn(d,"Registration failed");throw console.error("[authStore] Registration error:",p,d),t({error:p,isLoading:!1}),d}},logout:()=>{gi.logout(),t({user:null,token:null})},setUser:n=>{localStorage.setItem("user",JSON.stringify(n)),t({user:n})},clearError:()=>t({error:null})})),Wl=()=>{const t=jt(v=>v.user),n=jt(v=>v.token),s=jt(v=>v.isLoading),o=jt(v=>v.initialized),c=jt(v=>v.error),d=jt(v=>v.login),p=jt(v=>v.register),h=jt(v=>v.logout),m=jt(v=>v.setUser),g=jt(v=>v.clearError),y=jt(v=>v.initializeAuth);return{user:t,token:n,isLoading:s,initialized:o,error:c,login:d,register:p,logout:h,setUser:m,clearError:g,initializeAuth:y,isAuthenticated:!!n&&!!t}},Tv=({children:t})=>{const{isAuthenticated:n,isLoading:s,initialized:o}=Wl();return console.log("[ProtectedRoute] Current state:",{isAuthenticated:n,isLoading:s,initialized:o}),s||!o?r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"var(--background)",color:"var(--text)"},children:r.jsx("div",{children:"Loading..."})}):n?r.jsx(r.Fragment,{children:t}):(console.warn("[ProtectedRoute] Not authenticated, redirecting to login"),r.jsx(Jo,{to:"/login",replace:!0}))},Xh=b.createContext({});function Kh(t){const n=b.useRef(null);return n.current===null&&(n.current=t()),n.current}const Qh=typeof window<"u",Kb=Qh?b.useLayoutEffect:b.useEffect,Jd=b.createContext(null);function Zh(t,n){t.indexOf(n)===-1&&t.push(n)}function Jh(t,n){const s=t.indexOf(n);s>-1&&t.splice(s,1)}const Ns=(t,n,s)=>s>n?n:s<t?t:s;let em=()=>{};const zs={},Qb=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Zb(t){return typeof t=="object"&&t!==null}const Jb=t=>/^0[^.\s]+$/u.test(t);function tm(t){let n;return()=>(n===void 0&&(n=t()),n)}const Da=t=>t,Pj=(t,n)=>s=>n(t(s)),Yl=(...t)=>t.reduce(Pj),zl=(t,n,s)=>{const o=n-t;return o===0?1:(s-t)/o};class nm{constructor(){this.subscriptions=[]}add(n){return Zh(this.subscriptions,n),()=>Jh(this.subscriptions,n)}notify(n,s,o){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](n,s,o);else for(let d=0;d<c;d++){const p=this.subscriptions[d];p&&p(n,s,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ss=t=>t*1e3,Ra=t=>t/1e3;function e1(t,n){return n?t*(1e3/n):0}const t1=(t,n,s)=>(((1-3*s+3*n)*t+(3*s-6*n))*t+3*n)*t,Hj=1e-7,$j=12;function Fj(t,n,s,o,c){let d,p,h=0;do p=n+(s-n)/2,d=t1(p,o,c)-t,d>0?s=p:n=p;while(Math.abs(d)>Hj&&++h<$j);return p}function Xl(t,n,s,o){if(t===n&&s===o)return Da;const c=d=>Fj(d,0,1,t,s);return d=>d===0||d===1?d:t1(c(d),n,o)}const n1=t=>n=>n<=.5?t(2*n)/2:(2-t(2*(1-n)))/2,a1=t=>n=>1-t(1-n),s1=Xl(.33,1.53,.69,.99),am=a1(s1),i1=n1(am),o1=t=>(t*=2)<1?.5*am(t):.5*(2-Math.pow(2,-10*(t-1))),sm=t=>1-Math.sin(Math.acos(t)),r1=a1(sm),l1=n1(sm),Vj=Xl(.42,0,1,1),qj=Xl(0,0,.58,1),c1=Xl(.42,0,.58,1),Gj=t=>Array.isArray(t)&&typeof t[0]!="number",d1=t=>Array.isArray(t)&&typeof t[0]=="number",Wj={linear:Da,easeIn:Vj,easeInOut:c1,easeOut:qj,circIn:sm,circInOut:l1,circOut:r1,backIn:am,backInOut:i1,backOut:s1,anticipate:o1},Yj=t=>typeof t=="string",kv=t=>{if(d1(t)){em(t.length===4);const[n,s,o,c]=t;return Xl(n,s,o,c)}else if(Yj(t))return Wj[t];return t},md=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Xj(t,n){let s=new Set,o=new Set,c=!1,d=!1;const p=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function m(y){p.has(y)&&(g.schedule(y),t()),y(h)}const g={schedule:(y,v=!1,S=!1)=>{const C=S&&c?s:o;return v&&p.add(y),C.has(y)||C.add(y),y},cancel:y=>{o.delete(y),p.delete(y)},process:y=>{if(h=y,c){d=!0;return}c=!0,[s,o]=[o,s],s.forEach(m),s.clear(),c=!1,d&&(d=!1,g.process(y))}};return g}const Kj=40;function u1(t,n){let s=!1,o=!0;const c={delta:0,timestamp:0,isProcessing:!1},d=()=>s=!0,p=md.reduce((R,Y)=>(R[Y]=Xj(d),R),{}),{setup:h,read:m,resolveKeyframes:g,preUpdate:y,update:v,preRender:S,render:j,postRender:C}=p,T=()=>{const R=zs.useManualTiming?c.timestamp:performance.now();s=!1,zs.useManualTiming||(c.delta=o?1e3/60:Math.max(Math.min(R-c.timestamp,Kj),1)),c.timestamp=R,c.isProcessing=!0,h.process(c),m.process(c),g.process(c),y.process(c),v.process(c),S.process(c),j.process(c),C.process(c),c.isProcessing=!1,s&&n&&(o=!1,t(T))},E=()=>{s=!0,o=!0,c.isProcessing||t(T)};return{schedule:md.reduce((R,Y)=>{const P=p[Y];return R[Y]=(te,re=!1,K=!1)=>(s||E(),P.schedule(te,re,K)),R},{}),cancel:R=>{for(let Y=0;Y<md.length;Y++)p[md[Y]].cancel(R)},state:c,steps:p}}const{schedule:Gt,cancel:xi,state:In,steps:jf}=u1(typeof requestAnimationFrame<"u"?requestAnimationFrame:Da,!0);let kd;function Qj(){kd=void 0}const aa={now:()=>(kd===void 0&&aa.set(In.isProcessing||zs.useManualTiming?In.timestamp:performance.now()),kd),set:t=>{kd=t,queueMicrotask(Qj)}},p1=t=>n=>typeof n=="string"&&n.startsWith(t),f1=p1("--"),Zj=p1("var(--"),im=t=>Zj(t)?Jj.test(t.split("/*")[0].trim()):!1,Jj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,gr={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bl={...gr,transform:t=>Ns(0,1,t)},gd={...gr,default:1},Tl=t=>Math.round(t*1e5)/1e5,om=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function e2(t){return t==null}const t2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rm=(t,n)=>s=>!!(typeof s=="string"&&t2.test(s)&&s.startsWith(t)||n&&!e2(s)&&Object.prototype.hasOwnProperty.call(s,n)),h1=(t,n,s)=>o=>{if(typeof o!="string")return o;const[c,d,p,h]=o.match(om);return{[t]:parseFloat(c),[n]:parseFloat(d),[s]:parseFloat(p),alpha:h!==void 0?parseFloat(h):1}},n2=t=>Ns(0,255,t),Tf={...gr,transform:t=>Math.round(n2(t))},to={test:rm("rgb","red"),parse:h1("red","green","blue"),transform:({red:t,green:n,blue:s,alpha:o=1})=>"rgba("+Tf.transform(t)+", "+Tf.transform(n)+", "+Tf.transform(s)+", "+Tl(Bl.transform(o))+")"};function a2(t){let n="",s="",o="",c="";return t.length>5?(n=t.substring(1,3),s=t.substring(3,5),o=t.substring(5,7),c=t.substring(7,9)):(n=t.substring(1,2),s=t.substring(2,3),o=t.substring(3,4),c=t.substring(4,5),n+=n,s+=s,o+=o,c+=c),{red:parseInt(n,16),green:parseInt(s,16),blue:parseInt(o,16),alpha:c?parseInt(c,16)/255:1}}const rh={test:rm("#"),parse:a2,transform:to.transform},Kl=t=>({test:n=>typeof n=="string"&&n.endsWith(t)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${t}`}),mi=Kl("deg"),is=Kl("%"),Ve=Kl("px"),s2=Kl("vh"),i2=Kl("vw"),Mv={...is,parse:t=>is.parse(t)/100,transform:t=>is.transform(t*100)},er={test:rm("hsl","hue"),parse:h1("hue","saturation","lightness"),transform:({hue:t,saturation:n,lightness:s,alpha:o=1})=>"hsla("+Math.round(t)+", "+is.transform(Tl(n))+", "+is.transform(Tl(s))+", "+Tl(Bl.transform(o))+")"},xn={test:t=>to.test(t)||rh.test(t)||er.test(t),parse:t=>to.test(t)?to.parse(t):er.test(t)?er.parse(t):rh.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?to.transform(t):er.transform(t),getAnimatableNone:t=>{const n=xn.parse(t);return n.alpha=0,xn.transform(n)}},o2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function r2(t){return isNaN(t)&&typeof t=="string"&&(t.match(om)?.length||0)+(t.match(o2)?.length||0)>0}const m1="number",g1="color",l2="var",c2="var(",Ev="${}",d2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ul(t){const n=t.toString(),s=[],o={color:[],number:[],var:[]},c=[];let d=0;const h=n.replace(d2,m=>(xn.test(m)?(o.color.push(d),c.push(g1),s.push(xn.parse(m))):m.startsWith(c2)?(o.var.push(d),c.push(l2),s.push(m)):(o.number.push(d),c.push(m1),s.push(parseFloat(m))),++d,Ev)).split(Ev);return{values:s,split:h,indexes:o,types:c}}function y1(t){return Ul(t).values}function x1(t){const{split:n,types:s}=Ul(t),o=n.length;return c=>{let d="";for(let p=0;p<o;p++)if(d+=n[p],c[p]!==void 0){const h=s[p];h===m1?d+=Tl(c[p]):h===g1?d+=xn.transform(c[p]):d+=c[p]}return d}}const u2=t=>typeof t=="number"?0:xn.test(t)?xn.getAnimatableNone(t):t;function p2(t){const n=y1(t);return x1(t)(n.map(u2))}const vi={test:r2,parse:y1,createTransformer:x1,getAnimatableNone:p2};function kf(t,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(n-t)*6*s:s<1/2?n:s<2/3?t+(n-t)*(2/3-s)*6:t}function f2({hue:t,saturation:n,lightness:s,alpha:o}){t/=360,n/=100,s/=100;let c=0,d=0,p=0;if(!n)c=d=p=s;else{const h=s<.5?s*(1+n):s+n-s*n,m=2*s-h;c=kf(m,h,t+1/3),d=kf(m,h,t),p=kf(m,h,t-1/3)}return{red:Math.round(c*255),green:Math.round(d*255),blue:Math.round(p*255),alpha:o}}function Bd(t,n){return s=>s>0?n:t}const Xt=(t,n,s)=>t+(n-t)*s,Mf=(t,n,s)=>{const o=t*t,c=s*(n*n-o)+o;return c<0?0:Math.sqrt(c)},h2=[rh,to,er],m2=t=>h2.find(n=>n.test(t));function Av(t){const n=m2(t);if(!n)return!1;let s=n.parse(t);return n===er&&(s=f2(s)),s}const Rv=(t,n)=>{const s=Av(t),o=Av(n);if(!s||!o)return Bd(t,n);const c={...s};return d=>(c.red=Mf(s.red,o.red,d),c.green=Mf(s.green,o.green,d),c.blue=Mf(s.blue,o.blue,d),c.alpha=Xt(s.alpha,o.alpha,d),to.transform(c))},lh=new Set(["none","hidden"]);function g2(t,n){return lh.has(t)?s=>s<=0?t:n:s=>s>=1?n:t}function y2(t,n){return s=>Xt(t,n,s)}function lm(t){return typeof t=="number"?y2:typeof t=="string"?im(t)?Bd:xn.test(t)?Rv:b2:Array.isArray(t)?v1:typeof t=="object"?xn.test(t)?Rv:x2:Bd}function v1(t,n){const s=[...t],o=s.length,c=t.map((d,p)=>lm(d)(d,n[p]));return d=>{for(let p=0;p<o;p++)s[p]=c[p](d);return s}}function x2(t,n){const s={...t,...n},o={};for(const c in s)t[c]!==void 0&&n[c]!==void 0&&(o[c]=lm(t[c])(t[c],n[c]));return c=>{for(const d in o)s[d]=o[d](c);return s}}function v2(t,n){const s=[],o={color:0,var:0,number:0};for(let c=0;c<n.values.length;c++){const d=n.types[c],p=t.indexes[d][o[d]],h=t.values[p]??0;s[c]=h,o[d]++}return s}const b2=(t,n)=>{const s=vi.createTransformer(n),o=Ul(t),c=Ul(n);return o.indexes.var.length===c.indexes.var.length&&o.indexes.color.length===c.indexes.color.length&&o.indexes.number.length>=c.indexes.number.length?lh.has(t)&&!c.values.length||lh.has(n)&&!o.values.length?g2(t,n):Yl(v1(v2(o,c),c.values),s):Bd(t,n)};function b1(t,n,s){return typeof t=="number"&&typeof n=="number"&&typeof s=="number"?Xt(t,n,s):lm(t)(t,n)}const S2=t=>{const n=({timestamp:s})=>t(s);return{start:(s=!0)=>Gt.update(n,s),stop:()=>xi(n),now:()=>In.isProcessing?In.timestamp:aa.now()}},S1=(t,n,s=10)=>{let o="";const c=Math.max(Math.round(n/s),2);for(let d=0;d<c;d++)o+=Math.round(t(d/(c-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},Ud=2e4;function cm(t){let n=0;const s=50;let o=t.next(n);for(;!o.done&&n<Ud;)n+=s,o=t.next(n);return n>=Ud?1/0:n}function w2(t,n=100,s){const o=s({...t,keyframes:[0,n]}),c=Math.min(cm(o),Ud);return{type:"keyframes",ease:d=>o.next(c*d).value/n,duration:Ra(c)}}const _2=5;function w1(t,n,s){const o=Math.max(n-_2,0);return e1(s-t(o),n-o)}const Jt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ef=.001;function C2({duration:t=Jt.duration,bounce:n=Jt.bounce,velocity:s=Jt.velocity,mass:o=Jt.mass}){let c,d,p=1-n;p=Ns(Jt.minDamping,Jt.maxDamping,p),t=Ns(Jt.minDuration,Jt.maxDuration,Ra(t)),p<1?(c=g=>{const y=g*p,v=y*t,S=y-s,j=ch(g,p),C=Math.exp(-v);return Ef-S/j*C},d=g=>{const v=g*p*t,S=v*s+s,j=Math.pow(p,2)*Math.pow(g,2)*t,C=Math.exp(-v),T=ch(Math.pow(g,2),p);return(-c(g)+Ef>0?-1:1)*((S-j)*C)/T}):(c=g=>{const y=Math.exp(-g*t),v=(g-s)*t+1;return-Ef+y*v},d=g=>{const y=Math.exp(-g*t),v=(s-g)*(t*t);return y*v});const h=5/t,m=T2(c,d,h);if(t=ss(t),isNaN(m))return{stiffness:Jt.stiffness,damping:Jt.damping,duration:t};{const g=Math.pow(m,2)*o;return{stiffness:g,damping:p*2*Math.sqrt(o*g),duration:t}}}const j2=12;function T2(t,n,s){let o=s;for(let c=1;c<j2;c++)o=o-t(o)/n(o);return o}function ch(t,n){return t*Math.sqrt(1-n*n)}const k2=["duration","bounce"],M2=["stiffness","damping","mass"];function Dv(t,n){return n.some(s=>t[s]!==void 0)}function E2(t){let n={velocity:Jt.velocity,stiffness:Jt.stiffness,damping:Jt.damping,mass:Jt.mass,isResolvedFromDuration:!1,...t};if(!Dv(t,M2)&&Dv(t,k2))if(t.visualDuration){const s=t.visualDuration,o=2*Math.PI/(s*1.2),c=o*o,d=2*Ns(.05,1,1-(t.bounce||0))*Math.sqrt(c);n={...n,mass:Jt.mass,stiffness:c,damping:d}}else{const s=C2(t);n={...n,...s,mass:Jt.mass},n.isResolvedFromDuration=!0}return n}function Id(t=Jt.visualDuration,n=Jt.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:n}:t;let{restSpeed:o,restDelta:c}=s;const d=s.keyframes[0],p=s.keyframes[s.keyframes.length-1],h={done:!1,value:d},{stiffness:m,damping:g,mass:y,duration:v,velocity:S,isResolvedFromDuration:j}=E2({...s,velocity:-Ra(s.velocity||0)}),C=S||0,T=g/(2*Math.sqrt(m*y)),E=p-d,z=Ra(Math.sqrt(m/y)),L=Math.abs(E)<5;o||(o=L?Jt.restSpeed.granular:Jt.restSpeed.default),c||(c=L?Jt.restDelta.granular:Jt.restDelta.default);let R;if(T<1){const P=ch(z,T);R=te=>{const re=Math.exp(-T*z*te);return p-re*((C+T*z*E)/P*Math.sin(P*te)+E*Math.cos(P*te))}}else if(T===1)R=P=>p-Math.exp(-z*P)*(E+(C+z*E)*P);else{const P=z*Math.sqrt(T*T-1);R=te=>{const re=Math.exp(-T*z*te),K=Math.min(P*te,300);return p-re*((C+T*z*E)*Math.sinh(K)+P*E*Math.cosh(K))/P}}const Y={calculatedDuration:j&&v||null,next:P=>{const te=R(P);if(j)h.done=P>=v;else{let re=P===0?C:0;T<1&&(re=P===0?ss(C):w1(R,P,te));const K=Math.abs(re)<=o,ge=Math.abs(p-te)<=c;h.done=K&&ge}return h.value=h.done?p:te,h},toString:()=>{const P=Math.min(cm(Y),Ud),te=S1(re=>Y.next(P*re).value,P,30);return P+"ms "+te},toTransition:()=>{}};return Y}Id.applyToOptions=t=>{const n=w2(t,100,Id);return t.ease=n.ease,t.duration=ss(n.duration),t.type="keyframes",t};function dh({keyframes:t,velocity:n=0,power:s=.8,timeConstant:o=325,bounceDamping:c=10,bounceStiffness:d=500,modifyTarget:p,min:h,max:m,restDelta:g=.5,restSpeed:y}){const v=t[0],S={done:!1,value:v},j=K=>h!==void 0&&K<h||m!==void 0&&K>m,C=K=>h===void 0?m:m===void 0||Math.abs(h-K)<Math.abs(m-K)?h:m;let T=s*n;const E=v+T,z=p===void 0?E:p(E);z!==E&&(T=z-v);const L=K=>-T*Math.exp(-K/o),R=K=>z+L(K),Y=K=>{const ge=L(K),me=R(K);S.done=Math.abs(ge)<=g,S.value=S.done?z:me};let P,te;const re=K=>{j(S.value)&&(P=K,te=Id({keyframes:[S.value,C(S.value)],velocity:w1(R,K,S.value),damping:c,stiffness:d,restDelta:g,restSpeed:y}))};return re(0),{calculatedDuration:null,next:K=>{let ge=!1;return!te&&P===void 0&&(ge=!0,Y(K),re(K)),P!==void 0&&K>=P?te.next(K-P):(!ge&&Y(K),S)}}}function A2(t,n,s){const o=[],c=s||zs.mix||b1,d=t.length-1;for(let p=0;p<d;p++){let h=c(t[p],t[p+1]);if(n){const m=Array.isArray(n)?n[p]||Da:n;h=Yl(m,h)}o.push(h)}return o}function R2(t,n,{clamp:s=!0,ease:o,mixer:c}={}){const d=t.length;if(em(d===n.length),d===1)return()=>n[0];if(d===2&&n[0]===n[1])return()=>n[1];const p=t[0]===t[1];t[0]>t[d-1]&&(t=[...t].reverse(),n=[...n].reverse());const h=A2(n,o,c),m=h.length,g=y=>{if(p&&y<t[0])return n[0];let v=0;if(m>1)for(;v<t.length-2&&!(y<t[v+1]);v++);const S=zl(t[v],t[v+1],y);return h[v](S)};return s?y=>g(Ns(t[0],t[d-1],y)):g}function D2(t,n){const s=t[t.length-1];for(let o=1;o<=n;o++){const c=zl(0,n,o);t.push(Xt(s,1,c))}}function N2(t){const n=[0];return D2(n,t.length-1),n}function z2(t,n){return t.map(s=>s*n)}function B2(t,n){return t.map(()=>n||c1).splice(0,t.length-1)}function kl({duration:t=300,keyframes:n,times:s,ease:o="easeInOut"}){const c=Gj(o)?o.map(kv):kv(o),d={done:!1,value:n[0]},p=z2(s&&s.length===n.length?s:N2(n),t),h=R2(p,n,{ease:Array.isArray(c)?c:B2(n,c)});return{calculatedDuration:t,next:m=>(d.value=h(m),d.done=m>=t,d)}}const U2=t=>t!==null;function dm(t,{repeat:n,repeatType:s="loop"},o,c=1){const d=t.filter(U2),h=c<0||n&&s!=="loop"&&n%2===1?0:d.length-1;return!h||o===void 0?d[h]:o}const I2={decay:dh,inertia:dh,tween:kl,keyframes:kl,spring:Id};function _1(t){typeof t.type=="string"&&(t.type=I2[t.type])}class um{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,s){return this.finished.then(n,s)}}const O2=t=>t/100;class pm extends um{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==aa.now()&&this.tick(aa.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;_1(n);const{type:s=kl,repeat:o=0,repeatDelay:c=0,repeatType:d,velocity:p=0}=n;let{keyframes:h}=n;const m=s||kl;m!==kl&&typeof h[0]!="number"&&(this.mixKeyframes=Yl(O2,b1(h[0],h[1])),h=[0,100]);const g=m({...n,keyframes:h});d==="mirror"&&(this.mirroredGenerator=m({...n,keyframes:[...h].reverse(),velocity:-p})),g.calculatedDuration===null&&(g.calculatedDuration=cm(g));const{calculatedDuration:y}=g;this.calculatedDuration=y,this.resolvedDuration=y+c,this.totalDuration=this.resolvedDuration*(o+1)-c,this.generator=g}updateTime(n){const s=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(n,s=!1){const{generator:o,totalDuration:c,mixKeyframes:d,mirroredGenerator:p,resolvedDuration:h,calculatedDuration:m}=this;if(this.startTime===null)return o.next(0);const{delay:g=0,keyframes:y,repeat:v,repeatType:S,repeatDelay:j,type:C,onUpdate:T,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-c/this.speed,this.startTime)),s?this.currentTime=n:this.updateTime(n);const z=this.currentTime-g*(this.playbackSpeed>=0?1:-1),L=this.playbackSpeed>=0?z<0:z>c;this.currentTime=Math.max(z,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let R=this.currentTime,Y=o;if(v){const K=Math.min(this.currentTime,c)/h;let ge=Math.floor(K),me=K%1;!me&&K>=1&&(me=1),me===1&&ge--,ge=Math.min(ge,v+1),!!(ge%2)&&(S==="reverse"?(me=1-me,j&&(me-=j/h)):S==="mirror"&&(Y=p)),R=Ns(0,1,me)*h}const P=L?{done:!1,value:y[0]}:Y.next(R);d&&(P.value=d(P.value));let{done:te}=P;!L&&m!==null&&(te=this.playbackSpeed>=0?this.currentTime>=c:this.currentTime<=0);const re=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&te);return re&&C!==dh&&(P.value=dm(y,this.options,E,this.speed)),T&&T(P.value),re&&this.finish(),P}then(n,s){return this.finished.then(n,s)}get duration(){return Ra(this.calculatedDuration)}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+Ra(n)}get time(){return Ra(this.currentTime)}set time(n){n=ss(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(aa.now());const s=this.playbackSpeed!==n;this.playbackSpeed=n,s&&(this.time=Ra(this.currentTime))}play(){if(this.isStopped)return;const{driver:n=S2,startTime:s}=this.options;this.driver||(this.driver=n(c=>this.tick(c))),this.options.onPlay?.();const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=s??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(aa.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),n.observe(this)}}function L2(t){for(let n=1;n<t.length;n++)t[n]??(t[n]=t[n-1])}const no=t=>t*180/Math.PI,uh=t=>{const n=no(Math.atan2(t[1],t[0]));return ph(n)},P2={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:uh,rotateZ:uh,skewX:t=>no(Math.atan(t[1])),skewY:t=>no(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ph=t=>(t=t%360,t<0&&(t+=360),t),Nv=uh,zv=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Bv=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),H2={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:zv,scaleY:Bv,scale:t=>(zv(t)+Bv(t))/2,rotateX:t=>ph(no(Math.atan2(t[6],t[5]))),rotateY:t=>ph(no(Math.atan2(-t[2],t[0]))),rotateZ:Nv,rotate:Nv,skewX:t=>no(Math.atan(t[4])),skewY:t=>no(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function fh(t){return t.includes("scale")?1:0}function hh(t,n){if(!t||t==="none")return fh(n);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,c;if(s)o=H2,c=s;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=P2,c=h}if(!c)return fh(n);const d=o[n],p=c[1].split(",").map(F2);return typeof d=="function"?d(p):p[d]}const $2=(t,n)=>{const{transform:s="none"}=getComputedStyle(t);return hh(s,n)};function F2(t){return parseFloat(t.trim())}const yr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xr=new Set(yr),Uv=t=>t===gr||t===Ve,V2=new Set(["x","y","z"]),q2=yr.filter(t=>!V2.has(t));function G2(t){const n=[];return q2.forEach(s=>{const o=t.getValue(s);o!==void 0&&(n.push([s,o.get()]),o.set(s.startsWith("scale")?1:0))}),n}const so={width:({x:t},{paddingLeft:n="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(n)-parseFloat(s),height:({y:t},{paddingTop:n="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(n)-parseFloat(s),top:(t,{top:n})=>parseFloat(n),left:(t,{left:n})=>parseFloat(n),bottom:({y:t},{top:n})=>parseFloat(n)+(t.max-t.min),right:({x:t},{left:n})=>parseFloat(n)+(t.max-t.min),x:(t,{transform:n})=>hh(n,"x"),y:(t,{transform:n})=>hh(n,"y")};so.translateX=so.x;so.translateY=so.y;const io=new Set;let mh=!1,gh=!1,yh=!1;function C1(){if(gh){const t=Array.from(io).filter(o=>o.needsMeasurement),n=new Set(t.map(o=>o.element)),s=new Map;n.forEach(o=>{const c=G2(o);c.length&&(s.set(o,c),o.render())}),t.forEach(o=>o.measureInitialState()),n.forEach(o=>{o.render();const c=s.get(o);c&&c.forEach(([d,p])=>{o.getValue(d)?.set(p)})}),t.forEach(o=>o.measureEndState()),t.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}gh=!1,mh=!1,io.forEach(t=>t.complete(yh)),io.clear()}function j1(){io.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(gh=!0)})}function W2(){yh=!0,j1(),C1(),yh=!1}class fm{constructor(n,s,o,c,d,p=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=s,this.name=o,this.motionValue=c,this.element=d,this.isAsync=p}scheduleResolve(){this.state="scheduled",this.isAsync?(io.add(this),mh||(mh=!0,Gt.read(j1),Gt.resolveKeyframes(C1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:s,element:o,motionValue:c}=this;if(n[0]===null){const d=c?.get(),p=n[n.length-1];if(d!==void 0)n[0]=d;else if(o&&s){const h=o.readValue(s,p);h!=null&&(n[0]=h)}n[0]===void 0&&(n[0]=p),c&&d===void 0&&c.set(n[0])}L2(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),io.delete(this)}cancel(){this.state==="scheduled"&&(io.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Y2=t=>t.startsWith("--");function X2(t,n,s){Y2(n)?t.style.setProperty(n,s):t.style[n]=s}const K2=tm(()=>window.ScrollTimeline!==void 0),Q2={};function Z2(t,n){const s=tm(t);return()=>Q2[n]??s()}const T1=Z2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_l=([t,n,s,o])=>`cubic-bezier(${t}, ${n}, ${s}, ${o})`,Iv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_l([0,.65,.55,1]),circOut:_l([.55,0,1,.45]),backIn:_l([.31,.01,.66,-.59]),backOut:_l([.33,1.53,.69,.99])};function k1(t,n){if(t)return typeof t=="function"?T1()?S1(t,n):"ease-out":d1(t)?_l(t):Array.isArray(t)?t.map(s=>k1(s,n)||Iv.easeOut):Iv[t]}function J2(t,n,s,{delay:o=0,duration:c=300,repeat:d=0,repeatType:p="loop",ease:h="easeOut",times:m}={},g=void 0){const y={[n]:s};m&&(y.offset=m);const v=k1(h,c);Array.isArray(v)&&(y.easing=v);const S={delay:o,duration:c,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:d+1,direction:p==="reverse"?"alternate":"normal"};return g&&(S.pseudoElement=g),t.animate(y,S)}function M1(t){return typeof t=="function"&&"applyToOptions"in t}function eT({type:t,...n}){return M1(t)&&T1()?t.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class tT extends um{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:s,name:o,keyframes:c,pseudoElement:d,allowFlatten:p=!1,finalKeyframe:h,onComplete:m}=n;this.isPseudoElement=!!d,this.allowFlatten=p,this.options=n,em(typeof n.type!="string");const g=eT(n);this.animation=J2(s,o,c,g,d),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!d){const y=dm(c,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(y):X2(s,o,y),this.animation.cancel()}m?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const n=this.animation.effect?.getComputedTiming?.().duration||0;return Ra(Number(n))}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+Ra(n)}get time(){return Ra(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=ss(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,n&&K2()?(this.animation.timeline=n,Da):s(this)}}const E1={anticipate:o1,backInOut:i1,circInOut:l1};function nT(t){return t in E1}function aT(t){typeof t.ease=="string"&&nT(t.ease)&&(t.ease=E1[t.ease])}const Ov=10;class sT extends tT{constructor(n){aT(n),_1(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:s,onUpdate:o,onComplete:c,element:d,...p}=this.options;if(!s)return;if(n!==void 0){s.set(n);return}const h=new pm({...p,autoplay:!1}),m=ss(this.finishedTime??this.time);s.setWithVelocity(h.sample(m-Ov).value,h.sample(m).value,Ov),h.stop()}}const Lv=(t,n)=>n==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(vi.test(t)||t==="0")&&!t.startsWith("url("));function iT(t){const n=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==n)return!0}function oT(t,n,s,o){const c=t[0];if(c===null)return!1;if(n==="display"||n==="visibility")return!0;const d=t[t.length-1],p=Lv(c,n),h=Lv(d,n);return!p||!h?!1:iT(t)||(s==="spring"||M1(s))&&o}function xh(t){t.duration=0,t.type="keyframes"}const rT=new Set(["opacity","clipPath","filter","transform"]),lT=tm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function cT(t){const{motionValue:n,name:s,repeatDelay:o,repeatType:c,damping:d,type:p}=t;if(!(n?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:g}=n.owner.getProps();return lT()&&s&&rT.has(s)&&(s!=="transform"||!g)&&!m&&!o&&c!=="mirror"&&d!==0&&p!=="inertia"}const dT=40;class uT extends um{constructor({autoplay:n=!0,delay:s=0,type:o="keyframes",repeat:c=0,repeatDelay:d=0,repeatType:p="loop",keyframes:h,name:m,motionValue:g,element:y,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=aa.now();const S={autoplay:n,delay:s,type:o,repeat:c,repeatDelay:d,repeatType:p,name:m,motionValue:g,element:y,...v},j=y?.KeyframeResolver||fm;this.keyframeResolver=new j(h,(C,T,E)=>this.onKeyframesResolved(C,T,S,!E),m,g,y),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(n,s,o,c){this.keyframeResolver=void 0;const{name:d,type:p,velocity:h,delay:m,isHandoff:g,onUpdate:y}=o;this.resolvedAt=aa.now(),oT(n,d,p,h)||((zs.instantAnimations||!m)&&y?.(dm(n,o,s)),n[0]=n[n.length-1],xh(o),o.repeat=0);const S={startTime:c?this.resolvedAt?this.resolvedAt-this.createdAt>dT?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...o,keyframes:n},j=!g&&cT(S)?new sT({...S,element:S.motionValue.owner.current}):new pm(S);j.finished.then(()=>this.notifyFinished()).catch(Da),this.pendingTimeline&&(this.stopTimeline=j.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=j}get finished(){return this._animation?this.animation.finished:this._finished}then(n,s){return this.finished.finally(n).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),W2()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const pT=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function fT(t){const n=pT.exec(t);if(!n)return[,];const[,s,o,c]=n;return[`--${s??o}`,c]}function A1(t,n,s=1){const[o,c]=fT(t);if(!o)return;const d=window.getComputedStyle(n).getPropertyValue(o);if(d){const p=d.trim();return Qb(p)?parseFloat(p):p}return im(c)?A1(c,n,s+1):c}function hm(t,n){return t?.[n]??t?.default??t}const R1=new Set(["width","height","top","left","right","bottom",...yr]),hT={test:t=>t==="auto",parse:t=>t},D1=t=>n=>n.test(t),N1=[gr,Ve,is,mi,i2,s2,hT],Pv=t=>N1.find(D1(t));function mT(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Jb(t):!0}const gT=new Set(["brightness","contrast","saturate","opacity"]);function yT(t){const[n,s]=t.slice(0,-1).split("(");if(n==="drop-shadow")return t;const[o]=s.match(om)||[];if(!o)return t;const c=s.replace(o,"");let d=gT.has(n)?1:0;return o!==s&&(d*=100),n+"("+d+c+")"}const xT=/\b([a-z-]*)\(.*?\)/gu,vh={...vi,getAnimatableNone:t=>{const n=t.match(xT);return n?n.map(yT).join(" "):t}},Hv={...gr,transform:Math.round},vT={rotate:mi,rotateX:mi,rotateY:mi,rotateZ:mi,scale:gd,scaleX:gd,scaleY:gd,scaleZ:gd,skew:mi,skewX:mi,skewY:mi,distance:Ve,translateX:Ve,translateY:Ve,translateZ:Ve,x:Ve,y:Ve,z:Ve,perspective:Ve,transformPerspective:Ve,opacity:Bl,originX:Mv,originY:Mv,originZ:Ve},mm={borderWidth:Ve,borderTopWidth:Ve,borderRightWidth:Ve,borderBottomWidth:Ve,borderLeftWidth:Ve,borderRadius:Ve,radius:Ve,borderTopLeftRadius:Ve,borderTopRightRadius:Ve,borderBottomRightRadius:Ve,borderBottomLeftRadius:Ve,width:Ve,maxWidth:Ve,height:Ve,maxHeight:Ve,top:Ve,right:Ve,bottom:Ve,left:Ve,padding:Ve,paddingTop:Ve,paddingRight:Ve,paddingBottom:Ve,paddingLeft:Ve,margin:Ve,marginTop:Ve,marginRight:Ve,marginBottom:Ve,marginLeft:Ve,backgroundPositionX:Ve,backgroundPositionY:Ve,...vT,zIndex:Hv,fillOpacity:Bl,strokeOpacity:Bl,numOctaves:Hv},bT={...mm,color:xn,backgroundColor:xn,outlineColor:xn,fill:xn,stroke:xn,borderColor:xn,borderTopColor:xn,borderRightColor:xn,borderBottomColor:xn,borderLeftColor:xn,filter:vh,WebkitFilter:vh},z1=t=>bT[t];function B1(t,n){let s=z1(t);return s!==vh&&(s=vi),s.getAnimatableNone?s.getAnimatableNone(n):void 0}const ST=new Set(["auto","none","0"]);function wT(t,n,s){let o=0,c;for(;o<t.length&&!c;){const d=t[o];typeof d=="string"&&!ST.has(d)&&Ul(d).values.length&&(c=t[o]),o++}if(c&&s)for(const d of n)t[d]=B1(s,c)}class _T extends fm{constructor(n,s,o,c,d){super(n,s,o,c,d,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:s,name:o}=this;if(!s||!s.current)return;super.readKeyframes();for(let m=0;m<n.length;m++){let g=n[m];if(typeof g=="string"&&(g=g.trim(),im(g))){const y=A1(g,s.current);y!==void 0&&(n[m]=y),m===n.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!R1.has(o)||n.length!==2)return;const[c,d]=n,p=Pv(c),h=Pv(d);if(p!==h)if(Uv(p)&&Uv(h))for(let m=0;m<n.length;m++){const g=n[m];typeof g=="string"&&(n[m]=parseFloat(g))}else so[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:s}=this,o=[];for(let c=0;c<n.length;c++)(n[c]===null||mT(n[c]))&&o.push(c);o.length&&wT(n,o,s)}measureInitialState(){const{element:n,unresolvedKeyframes:s,name:o}=this;if(!n||!n.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=so[o](n.measureViewportBox(),window.getComputedStyle(n.current)),s[0]=this.measuredOrigin;const c=s[s.length-1];c!==void 0&&n.getValue(o,c).jump(c,!1)}measureEndState(){const{element:n,name:s,unresolvedKeyframes:o}=this;if(!n||!n.current)return;const c=n.getValue(s);c&&c.jump(this.measuredOrigin,!1);const d=o.length-1,p=o[d];o[d]=so[s](n.measureViewportBox(),window.getComputedStyle(n.current)),p!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=p),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,m])=>{n.getValue(h).set(m)}),this.resolveNoneKeyframes()}}function CT(t,n,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let o=document;const c=s?.[t]??o.querySelectorAll(t);return c?Array.from(c):[]}return Array.from(t)}const U1=(t,n)=>n&&typeof t=="number"?n.transform(t):t;function I1(t){return Zb(t)&&"offsetHeight"in t}const $v=30,jT=t=>!isNaN(parseFloat(t));class TT{constructor(n,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{const c=aa.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty()},this.hasAnimated=!1,this.setCurrent(n),this.owner=s.owner}setCurrent(n){this.current=n,this.updatedAt=aa.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=jT(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,s){this.events[n]||(this.events[n]=new nm);const o=this.events[n].add(s);return n==="change"?()=>{o(),Gt.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,s){this.passiveEffect=n,this.stopPassiveEffect=s}set(n){this.passiveEffect?this.passiveEffect(n,this.updateAndNotify):this.updateAndNotify(n)}setWithVelocity(n,s,o){this.set(s),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-o}jump(n,s=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=aa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>$v)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,$v);return e1(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(n){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=n(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function dr(t,n){return new TT(t,n)}const{schedule:gm}=u1(queueMicrotask,!1),Ia={x:!1,y:!1};function O1(){return Ia.x||Ia.y}function kT(t){return t==="x"||t==="y"?Ia[t]?null:(Ia[t]=!0,()=>{Ia[t]=!1}):Ia.x||Ia.y?null:(Ia.x=Ia.y=!0,()=>{Ia.x=Ia.y=!1})}function L1(t,n){const s=CT(t),o=new AbortController,c={passive:!0,...n,signal:o.signal};return[s,c,()=>o.abort()]}function Fv(t){return!(t.pointerType==="touch"||O1())}function MT(t,n,s={}){const[o,c,d]=L1(t,s),p=h=>{if(!Fv(h))return;const{target:m}=h,g=n(m,h);if(typeof g!="function"||!m)return;const y=v=>{Fv(v)&&(g(v),m.removeEventListener("pointerleave",y))};m.addEventListener("pointerleave",y,c)};return o.forEach(h=>{h.addEventListener("pointerenter",p,c)}),d}const P1=(t,n)=>n?t===n?!0:P1(t,n.parentElement):!1,ym=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ET=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function AT(t){return ET.has(t.tagName)||t.tabIndex!==-1}const Md=new WeakSet;function Vv(t){return n=>{n.key==="Enter"&&t(n)}}function Af(t,n){t.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const RT=(t,n)=>{const s=t.currentTarget;if(!s)return;const o=Vv(()=>{if(Md.has(s))return;Af(s,"down");const c=Vv(()=>{Af(s,"up")}),d=()=>Af(s,"cancel");s.addEventListener("keyup",c,n),s.addEventListener("blur",d,n)});s.addEventListener("keydown",o,n),s.addEventListener("blur",()=>s.removeEventListener("keydown",o),n)};function qv(t){return ym(t)&&!O1()}function DT(t,n,s={}){const[o,c,d]=L1(t,s),p=h=>{const m=h.currentTarget;if(!qv(h))return;Md.add(m);const g=n(m,h),y=(j,C)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",S),Md.has(m)&&Md.delete(m),qv(j)&&typeof g=="function"&&g(j,{success:C})},v=j=>{y(j,m===window||m===document||s.useGlobalTarget||P1(m,j.target))},S=j=>{y(j,!1)};window.addEventListener("pointerup",v,c),window.addEventListener("pointercancel",S,c)};return o.forEach(h=>{(s.useGlobalTarget?window:h).addEventListener("pointerdown",p,c),I1(h)&&(h.addEventListener("focus",g=>RT(g,c)),!AT(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),d}function H1(t){return Zb(t)&&"ownerSVGElement"in t}function NT(t){return H1(t)&&t.tagName==="svg"}const Gn=t=>!!(t&&t.getVelocity),zT=[...N1,xn,vi],BT=t=>zT.find(D1(t)),xm=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Gv(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function UT(...t){return n=>{let s=!1;const o=t.map(c=>{const d=Gv(c,n);return!s&&typeof d=="function"&&(s=!0),d});if(s)return()=>{for(let c=0;c<o.length;c++){const d=o[c];typeof d=="function"?d():Gv(t[c],null)}}}}function IT(...t){return b.useCallback(UT(...t),t)}class OT extends b.Component{getSnapshotBeforeUpdate(n){const s=this.props.childRef.current;if(s&&n.isPresent&&!this.props.isPresent){const o=s.offsetParent,c=I1(o)&&o.offsetWidth||0,d=this.props.sizeRef.current;d.height=s.offsetHeight||0,d.width=s.offsetWidth||0,d.top=s.offsetTop,d.left=s.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function LT({children:t,isPresent:n,anchorX:s,root:o}){const c=b.useId(),d=b.useRef(null),p=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=b.useContext(xm),m=IT(d,t?.ref);return b.useInsertionEffect(()=>{const{width:g,height:y,top:v,left:S,right:j}=p.current;if(n||!d.current||!g||!y)return;const C=s==="left"?`left: ${S}`:`right: ${j}`;d.current.dataset.motionPopId=c;const T=document.createElement("style");h&&(T.nonce=h);const E=o??document.head;return E.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${y}px !important;
            ${C}px !important;
            top: ${v}px !important;
          }
        `),()=>{E.contains(T)&&E.removeChild(T)}},[n]),r.jsx(OT,{isPresent:n,childRef:d,sizeRef:p,children:b.cloneElement(t,{ref:m})})}const PT=({children:t,initial:n,isPresent:s,onExitComplete:o,custom:c,presenceAffectsLayout:d,mode:p,anchorX:h,root:m})=>{const g=Kh(HT),y=b.useId();let v=!0,S=b.useMemo(()=>(v=!1,{id:y,initial:n,isPresent:s,custom:c,onExitComplete:j=>{g.set(j,!0);for(const C of g.values())if(!C)return;o&&o()},register:j=>(g.set(j,!1),()=>g.delete(j))}),[s,g,o]);return d&&v&&(S={...S}),b.useMemo(()=>{g.forEach((j,C)=>g.set(C,!1))},[s]),b.useEffect(()=>{!s&&!g.size&&o&&o()},[s]),p==="popLayout"&&(t=r.jsx(LT,{isPresent:s,anchorX:h,root:m,children:t})),r.jsx(Jd.Provider,{value:S,children:t})};function HT(){return new Map}function $1(t=!0){const n=b.useContext(Jd);if(n===null)return[!0,null];const{isPresent:s,onExitComplete:o,register:c}=n,d=b.useId();b.useEffect(()=>{if(t)return c(d)},[t]);const p=b.useCallback(()=>t&&o&&o(d),[d,o,t]);return!s&&o?[!1,p]:[!0]}const yd=t=>t.key||"";function Wv(t){const n=[];return b.Children.forEach(t,s=>{b.isValidElement(s)&&n.push(s)}),n}const Xn=({children:t,custom:n,initial:s=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:p=!1,anchorX:h="left",root:m})=>{const[g,y]=$1(p),v=b.useMemo(()=>Wv(t),[t]),S=p&&!g?[]:v.map(yd),j=b.useRef(!0),C=b.useRef(v),T=Kh(()=>new Map),[E,z]=b.useState(v),[L,R]=b.useState(v);Kb(()=>{j.current=!1,C.current=v;for(let te=0;te<L.length;te++){const re=yd(L[te]);S.includes(re)?T.delete(re):T.get(re)!==!0&&T.set(re,!1)}},[L,S.length,S.join("-")]);const Y=[];if(v!==E){let te=[...v];for(let re=0;re<L.length;re++){const K=L[re],ge=yd(K);S.includes(ge)||(te.splice(re,0,K),Y.push(K))}return d==="wait"&&Y.length&&(te=Y),R(Wv(te)),z(v),null}const{forceRender:P}=b.useContext(Xh);return r.jsx(r.Fragment,{children:L.map(te=>{const re=yd(te),K=p&&!g?!1:v===L||S.includes(re),ge=()=>{if(T.has(re))T.set(re,!0);else return;let me=!0;T.forEach(He=>{He||(me=!1)}),me&&(P?.(),R(C.current),p&&y?.(),o&&o())};return r.jsx(PT,{isPresent:K,initial:!j.current||s?void 0:!1,custom:n,presenceAffectsLayout:c,mode:d,root:m,onExitComplete:K?void 0:ge,anchorX:h,children:te},re)})})},F1=b.createContext({strict:!1}),Yv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ur={};for(const t in Yv)ur[t]={isEnabled:n=>Yv[t].some(s=>!!n[s])};function $T(t){for(const n in t)ur[n]={...ur[n],...t[n]}}const FT=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Od(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||FT.has(t)}let V1=t=>!Od(t);function VT(t){typeof t=="function"&&(V1=n=>n.startsWith("on")?!Od(n):t(n))}try{VT(require("@emotion/is-prop-valid").default)}catch{}function qT(t,n,s){const o={};for(const c in t)c==="values"&&typeof t.values=="object"||(V1(c)||s===!0&&Od(c)||!n&&!Od(c)||t.draggable&&c.startsWith("onDrag"))&&(o[c]=t[c]);return o}const eu=b.createContext({});function tu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Il(t){return typeof t=="string"||Array.isArray(t)}const vm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bm=["initial",...vm];function nu(t){return tu(t.animate)||bm.some(n=>Il(t[n]))}function q1(t){return!!(nu(t)||t.variants)}function GT(t,n){if(nu(t)){const{initial:s,animate:o}=t;return{initial:s===!1||Il(s)?s:void 0,animate:Il(o)?o:void 0}}return t.inherit!==!1?n:{}}function WT(t){const{initial:n,animate:s}=GT(t,b.useContext(eu));return b.useMemo(()=>({initial:n,animate:s}),[Xv(n),Xv(s)])}function Xv(t){return Array.isArray(t)?t.join(" "):t}function Kv(t,n){return n.max===n.min?0:t/(n.max-n.min)*100}const bl={correct:(t,n)=>{if(!n.target)return t;if(typeof t=="string")if(Ve.test(t))t=parseFloat(t);else return t;const s=Kv(t,n.target.x),o=Kv(t,n.target.y);return`${s}% ${o}%`}},YT={correct:(t,{treeScale:n,projectionDelta:s})=>{const o=t,c=vi.parse(t);if(c.length>5)return o;const d=vi.createTransformer(t),p=typeof c[0]!="number"?1:0,h=s.x.scale*n.x,m=s.y.scale*n.y;c[0+p]/=h,c[1+p]/=m;const g=Xt(h,m,.5);return typeof c[2+p]=="number"&&(c[2+p]/=g),typeof c[3+p]=="number"&&(c[3+p]/=g),d(c)}},bh={borderRadius:{...bl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:bl,borderTopRightRadius:bl,borderBottomLeftRadius:bl,borderBottomRightRadius:bl,boxShadow:YT};function G1(t,{layout:n,layoutId:s}){return xr.has(t)||t.startsWith("origin")||(n||s!==void 0)&&(!!bh[t]||t==="opacity")}const XT={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KT=yr.length;function QT(t,n,s){let o="",c=!0;for(let d=0;d<KT;d++){const p=yr[d],h=t[p];if(h===void 0)continue;let m=!0;if(typeof h=="number"?m=h===(p.startsWith("scale")?1:0):m=parseFloat(h)===0,!m||s){const g=U1(h,mm[p]);if(!m){c=!1;const y=XT[p]||p;o+=`${y}(${g}) `}s&&(n[p]=g)}}return o=o.trim(),s?o=s(n,c?"":o):c&&(o="none"),o}function Sm(t,n,s){const{style:o,vars:c,transformOrigin:d}=t;let p=!1,h=!1;for(const m in n){const g=n[m];if(xr.has(m)){p=!0;continue}else if(f1(m)){c[m]=g;continue}else{const y=U1(g,mm[m]);m.startsWith("origin")?(h=!0,d[m]=y):o[m]=y}}if(n.transform||(p||s?o.transform=QT(n,t.transform,s):o.transform&&(o.transform="none")),h){const{originX:m="50%",originY:g="50%",originZ:y=0}=d;o.transformOrigin=`${m} ${g} ${y}`}}const wm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function W1(t,n,s){for(const o in n)!Gn(n[o])&&!G1(o,s)&&(t[o]=n[o])}function ZT({transformTemplate:t},n){return b.useMemo(()=>{const s=wm();return Sm(s,n,t),Object.assign({},s.vars,s.style)},[n])}function JT(t,n){const s=t.style||{},o={};return W1(o,s,t),Object.assign(o,ZT(t,n)),o}function ek(t,n){const s={},o=JT(t,n);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=o,s}const tk={offset:"stroke-dashoffset",array:"stroke-dasharray"},nk={offset:"strokeDashoffset",array:"strokeDasharray"};function ak(t,n,s=1,o=0,c=!0){t.pathLength=1;const d=c?tk:nk;t[d.offset]=Ve.transform(-o);const p=Ve.transform(n),h=Ve.transform(s);t[d.array]=`${p} ${h}`}function Y1(t,{attrX:n,attrY:s,attrScale:o,pathLength:c,pathSpacing:d=1,pathOffset:p=0,...h},m,g,y){if(Sm(t,h,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:S}=t;v.transform&&(S.transform=v.transform,delete v.transform),(S.transform||v.transformOrigin)&&(S.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),S.transform&&(S.transformBox=y?.transformBox??"fill-box",delete v.transformBox),n!==void 0&&(v.x=n),s!==void 0&&(v.y=s),o!==void 0&&(v.scale=o),c!==void 0&&ak(v,c,d,p,!1)}const X1=()=>({...wm(),attrs:{}}),K1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function sk(t,n,s,o){const c=b.useMemo(()=>{const d=X1();return Y1(d,n,K1(o),t.transformTemplate,t.style),{...d.attrs,style:{...d.style}}},[n]);if(t.style){const d={};W1(d,t.style,t),c.style={...d,...c.style}}return c}const ik=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _m(t){return typeof t!="string"||t.includes("-")?!1:!!(ik.indexOf(t)>-1||/[A-Z]/u.test(t))}function ok(t,n,s,{latestValues:o},c,d=!1){const h=(_m(t)?sk:ek)(n,o,c,t),m=qT(n,typeof t=="string",d),g=t!==b.Fragment?{...m,...h,ref:s}:{},{children:y}=n,v=b.useMemo(()=>Gn(y)?y.get():y,[y]);return b.createElement(t,{...g,children:v})}function Qv(t){const n=[{},{}];return t?.values.forEach((s,o)=>{n[0][o]=s.get(),n[1][o]=s.getVelocity()}),n}function Cm(t,n,s,o){if(typeof n=="function"){const[c,d]=Qv(o);n=n(s!==void 0?s:t.custom,c,d)}if(typeof n=="string"&&(n=t.variants&&t.variants[n]),typeof n=="function"){const[c,d]=Qv(o);n=n(s!==void 0?s:t.custom,c,d)}return n}function Ed(t){return Gn(t)?t.get():t}function rk({scrapeMotionValuesFromProps:t,createRenderState:n},s,o,c){return{latestValues:lk(s,o,c,t),renderState:n()}}function lk(t,n,s,o){const c={},d=o(t,{});for(const S in d)c[S]=Ed(d[S]);let{initial:p,animate:h}=t;const m=nu(t),g=q1(t);n&&g&&!m&&t.inherit!==!1&&(p===void 0&&(p=n.initial),h===void 0&&(h=n.animate));let y=s?s.initial===!1:!1;y=y||p===!1;const v=y?h:p;if(v&&typeof v!="boolean"&&!tu(v)){const S=Array.isArray(v)?v:[v];for(let j=0;j<S.length;j++){const C=Cm(t,S[j]);if(C){const{transitionEnd:T,transition:E,...z}=C;for(const L in z){let R=z[L];if(Array.isArray(R)){const Y=y?R.length-1:0;R=R[Y]}R!==null&&(c[L]=R)}for(const L in T)c[L]=T[L]}}}return c}const Q1=t=>(n,s)=>{const o=b.useContext(eu),c=b.useContext(Jd),d=()=>rk(t,n,o,c);return s?d():Kh(d)};function jm(t,n,s){const{style:o}=t,c={};for(const d in o)(Gn(o[d])||n.style&&Gn(n.style[d])||G1(d,t)||s?.getValue(d)?.liveStyle!==void 0)&&(c[d]=o[d]);return c}const ck=Q1({scrapeMotionValuesFromProps:jm,createRenderState:wm});function Z1(t,n,s){const o=jm(t,n,s);for(const c in t)if(Gn(t[c])||Gn(n[c])){const d=yr.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;o[d]=t[c]}return o}const dk=Q1({scrapeMotionValuesFromProps:Z1,createRenderState:X1}),uk=Symbol.for("motionComponentSymbol");function tr(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function pk(t,n,s){return b.useCallback(o=>{o&&t.onMount&&t.onMount(o),n&&(o?n.mount(o):n.unmount()),s&&(typeof s=="function"?s(o):tr(s)&&(s.current=o))},[n])}const Tm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fk="framerAppearId",J1="data-"+Tm(fk),eS=b.createContext({});function hk(t,n,s,o,c){const{visualElement:d}=b.useContext(eu),p=b.useContext(F1),h=b.useContext(Jd),m=b.useContext(xm).reducedMotion,g=b.useRef(null);o=o||p.renderer,!g.current&&o&&(g.current=o(t,{visualState:n,parent:d,props:s,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const y=g.current,v=b.useContext(eS);y&&!y.projection&&c&&(y.type==="html"||y.type==="svg")&&mk(g.current,s,c,v);const S=b.useRef(!1);b.useInsertionEffect(()=>{y&&S.current&&y.update(s,h)});const j=s[J1],C=b.useRef(!!j&&!window.MotionHandoffIsComplete?.(j)&&window.MotionHasOptimisedAnimation?.(j));return Kb(()=>{y&&(S.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),C.current&&y.animationState&&y.animationState.animateChanges())}),b.useEffect(()=>{y&&(!C.current&&y.animationState&&y.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(j)}),C.current=!1),y.enteringChildren=void 0)}),y}function mk(t,n,s,o){const{layoutId:c,layout:d,drag:p,dragConstraints:h,layoutScroll:m,layoutRoot:g,layoutCrossfade:y}=n;t.projection=new s(t.latestValues,n["data-framer-portal-id"]?void 0:tS(t.parent)),t.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!p||h&&tr(h),visualElement:t,animationType:typeof d=="string"?d:"both",initialPromotionConfig:o,crossfade:y,layoutScroll:m,layoutRoot:g})}function tS(t){if(t)return t.options.allowProjection!==!1?t.projection:tS(t.parent)}function Rf(t,{forwardMotionProps:n=!1}={},s,o){s&&$T(s);const c=_m(t)?dk:ck;function d(h,m){let g;const y={...b.useContext(xm),...h,layoutId:gk(h)},{isStatic:v}=y,S=WT(h),j=c(h,v);if(!v&&Qh){yk();const C=xk(y);g=C.MeasureLayout,S.visualElement=hk(t,j,y,o,C.ProjectionNode)}return r.jsxs(eu.Provider,{value:S,children:[g&&S.visualElement?r.jsx(g,{visualElement:S.visualElement,...y}):null,ok(t,h,pk(j,S.visualElement,m),j,v,n)]})}d.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const p=b.forwardRef(d);return p[uk]=t,p}function gk({layoutId:t}){const n=b.useContext(Xh).id;return n&&t!==void 0?n+"-"+t:t}function yk(t,n){b.useContext(F1).strict}function xk(t){const{drag:n,layout:s}=ur;if(!n&&!s)return{};const o={...n,...s};return{MeasureLayout:n?.isEnabled(t)||s?.isEnabled(t)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function vk(t,n){if(typeof Proxy>"u")return Rf;const s=new Map,o=(d,p)=>Rf(d,p,t,n),c=(d,p)=>o(d,p);return new Proxy(c,{get:(d,p)=>p==="create"?o:(s.has(p)||s.set(p,Rf(p,void 0,t,n)),s.get(p))})}function nS({top:t,left:n,right:s,bottom:o}){return{x:{min:n,max:s},y:{min:t,max:o}}}function bk({x:t,y:n}){return{top:n.min,right:t.max,bottom:n.max,left:t.min}}function Sk(t,n){if(!n)return t;const s=n({x:t.left,y:t.top}),o=n({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:o.y,right:o.x}}function Df(t){return t===void 0||t===1}function Sh({scale:t,scaleX:n,scaleY:s}){return!Df(t)||!Df(n)||!Df(s)}function Ki(t){return Sh(t)||aS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function aS(t){return Zv(t.x)||Zv(t.y)}function Zv(t){return t&&t!=="0%"}function Ld(t,n,s){const o=t-s,c=n*o;return s+c}function Jv(t,n,s,o,c){return c!==void 0&&(t=Ld(t,c,o)),Ld(t,s,o)+n}function wh(t,n=0,s=1,o,c){t.min=Jv(t.min,n,s,o,c),t.max=Jv(t.max,n,s,o,c)}function sS(t,{x:n,y:s}){wh(t.x,n.translate,n.scale,n.originPoint),wh(t.y,s.translate,s.scale,s.originPoint)}const e0=.999999999999,t0=1.0000000000001;function wk(t,n,s,o=!1){const c=s.length;if(!c)return;n.x=n.y=1;let d,p;for(let h=0;h<c;h++){d=s[h],p=d.projectionDelta;const{visualElement:m}=d.options;m&&m.props.style&&m.props.style.display==="contents"||(o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ar(t,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),p&&(n.x*=p.x.scale,n.y*=p.y.scale,sS(t,p)),o&&Ki(d.latestValues)&&ar(t,d.latestValues))}n.x<t0&&n.x>e0&&(n.x=1),n.y<t0&&n.y>e0&&(n.y=1)}function nr(t,n){t.min=t.min+n,t.max=t.max+n}function n0(t,n,s,o,c=.5){const d=Xt(t.min,t.max,c);wh(t,n,s,d,o)}function ar(t,n){n0(t.x,n.x,n.scaleX,n.scale,n.originX),n0(t.y,n.y,n.scaleY,n.scale,n.originY)}function iS(t,n){return nS(Sk(t.getBoundingClientRect(),n))}function _k(t,n,s){const o=iS(t,s),{scroll:c}=n;return c&&(nr(o.x,c.offset.x),nr(o.y,c.offset.y)),o}const a0=()=>({translate:0,scale:1,origin:0,originPoint:0}),sr=()=>({x:a0(),y:a0()}),s0=()=>({min:0,max:0}),Cn=()=>({x:s0(),y:s0()}),_h={current:null},oS={current:!1};function Ck(){if(oS.current=!0,!!Qh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),n=()=>_h.current=t.matches;t.addEventListener("change",n),n()}else _h.current=!1}const jk=new WeakMap;function Tk(t,n,s){for(const o in n){const c=n[o],d=s[o];if(Gn(c))t.addValue(o,c);else if(Gn(d))t.addValue(o,dr(c,{owner:t}));else if(d!==c)if(t.hasValue(o)){const p=t.getValue(o);p.liveStyle===!0?p.jump(c):p.hasAnimated||p.set(c)}else{const p=t.getStaticValue(o);t.addValue(o,dr(p!==void 0?p:c,{owner:t}))}}for(const o in s)n[o]===void 0&&t.removeValue(o);return n}const i0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kk{scrapeMotionValuesFromProps(n,s,o){return{}}constructor({parent:n,props:s,presenceContext:o,reducedMotionConfig:c,blockInitialAnimation:d,visualState:p},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=fm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=aa.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,Gt.render(this.render,!1,!0))};const{latestValues:m,renderState:g}=p;this.latestValues=m,this.baseTarget={...m},this.initialValues=s.initial?{...m}:{},this.renderState=g,this.parent=n,this.props=s,this.presenceContext=o,this.depth=n?n.depth+1:0,this.reducedMotionConfig=c,this.options=h,this.blockInitialAnimation=!!d,this.isControllingVariants=nu(s),this.isVariantNode=q1(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:y,...v}=this.scrapeMotionValuesFromProps(s,{},this);for(const S in v){const j=v[S];m[S]!==void 0&&Gn(j)&&j.set(m[S])}}mount(n){this.current=n,jk.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),oS.current||Ck(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_h.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),xi(this.notifyUpdate),xi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(n){this.children.add(n),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(n)}removeChild(n){this.children.delete(n),this.enteringChildren&&this.enteringChildren.delete(n)}bindToMotionValue(n,s){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const o=xr.has(n);o&&this.onBindTransform&&this.onBindTransform();const c=s.on("change",p=>{this.latestValues[n]=p,this.props.onUpdate&&Gt.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let d;window.MotionCheckAppearSync&&(d=window.MotionCheckAppearSync(this,n,s)),this.valueSubscriptions.set(n,()=>{c(),d&&d(),s.owner&&s.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in ur){const s=ur[n];if(!s)continue;const{isEnabled:o,Feature:c}=s;if(!this.features[n]&&c&&o(this.props)&&(this.features[n]=new c(this)),this.features[n]){const d=this.features[n];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Cn()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,s){this.latestValues[n]=s}update(n,s){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let o=0;o<i0.length;o++){const c=i0[o];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const d="on"+c,p=n[d];p&&(this.propEventSubscriptions[c]=this.on(c,p))}this.prevMotionValues=Tk(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(n),()=>s.variantChildren.delete(n)}addValue(n,s){const o=this.values.get(n);s!==o&&(o&&this.removeValue(n),this.bindToMotionValue(n,s),this.values.set(n,s),this.latestValues[n]=s.get())}removeValue(n){this.values.delete(n);const s=this.valueSubscriptions.get(n);s&&(s(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,s){if(this.props.values&&this.props.values[n])return this.props.values[n];let o=this.values.get(n);return o===void 0&&s!==void 0&&(o=dr(s===null?void 0:s,{owner:this}),this.addValue(n,o)),o}readValue(n,s){let o=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return o!=null&&(typeof o=="string"&&(Qb(o)||Jb(o))?o=parseFloat(o):!BT(o)&&vi.test(s)&&(o=B1(n,s)),this.setBaseTarget(n,Gn(o)?o.get():o)),Gn(o)?o.get():o}setBaseTarget(n,s){this.baseTarget[n]=s}getBaseTarget(n){const{initial:s}=this.props;let o;if(typeof s=="string"||typeof s=="object"){const d=Cm(this.props,s,this.presenceContext?.custom);d&&(o=d[n])}if(s&&o!==void 0)return o;const c=this.getBaseTargetFromProps(this.props,n);return c!==void 0&&!Gn(c)?c:this.initialValues[n]!==void 0&&o===void 0?void 0:this.baseTarget[n]}on(n,s){return this.events[n]||(this.events[n]=new nm),this.events[n].add(s)}notify(n,...s){this.events[n]&&this.events[n].notify(...s)}scheduleRenderMicrotask(){gm.render(this.render)}}class rS extends kk{constructor(){super(...arguments),this.KeyframeResolver=_T}sortInstanceNodePosition(n,s){return n.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(n,s){return n.style?n.style[s]:void 0}removeValueFromRenderState(n,{vars:s,style:o}){delete s[n],delete o[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;Gn(n)&&(this.childSubscription=n.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function lS(t,{style:n,vars:s},o,c){const d=t.style;let p;for(p in n)d[p]=n[p];c?.applyProjectionStyles(d,o);for(p in s)d.setProperty(p,s[p])}function Mk(t){return window.getComputedStyle(t)}class Ek extends rS{constructor(){super(...arguments),this.type="html",this.renderInstance=lS}readValueFromInstance(n,s){if(xr.has(s))return this.projection?.isProjecting?fh(s):$2(n,s);{const o=Mk(n),c=(f1(s)?o.getPropertyValue(s):o[s])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(n,{transformPagePoint:s}){return iS(n,s)}build(n,s,o){Sm(n,s,o.transformTemplate)}scrapeMotionValuesFromProps(n,s,o){return jm(n,s,o)}}const cS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ak(t,n,s,o){lS(t,n,void 0,o);for(const c in n.attrs)t.setAttribute(cS.has(c)?c:Tm(c),n.attrs[c])}class Rk extends rS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Cn}getBaseTargetFromProps(n,s){return n[s]}readValueFromInstance(n,s){if(xr.has(s)){const o=z1(s);return o&&o.default||0}return s=cS.has(s)?s:Tm(s),n.getAttribute(s)}scrapeMotionValuesFromProps(n,s,o){return Z1(n,s,o)}build(n,s,o){Y1(n,s,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(n,s,o,c){Ak(n,s,o,c)}mount(n){this.isSVGTag=K1(n.tagName),super.mount(n)}}const Dk=(t,n)=>_m(t)?new Rk(n):new Ek(n,{allowProjection:t!==b.Fragment});function or(t,n,s){const o=t.getProps();return Cm(o,n,s!==void 0?s:o.custom,t)}const Ch=t=>Array.isArray(t);function Nk(t,n,s){t.hasValue(n)?t.getValue(n).set(s):t.addValue(n,dr(s))}function zk(t){return Ch(t)?t[t.length-1]||0:t}function Bk(t,n){const s=or(t,n);let{transitionEnd:o={},transition:c={},...d}=s||{};d={...d,...o};for(const p in d){const h=zk(d[p]);Nk(t,p,h)}}function Uk(t){return!!(Gn(t)&&t.add)}function jh(t,n){const s=t.getValue("willChange");if(Uk(s))return s.add(n);if(!s&&zs.WillChange){const o=new zs.WillChange("auto");t.addValue("willChange",o),o.add(n)}}function dS(t){return t.props[J1]}const Ik=t=>t!==null;function Ok(t,{repeat:n,repeatType:s="loop"},o){const c=t.filter(Ik),d=n&&s!=="loop"&&n%2===1?0:c.length-1;return c[d]}const Lk={type:"spring",stiffness:500,damping:25,restSpeed:10},Pk=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Hk={type:"keyframes",duration:.8},$k={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Fk=(t,{keyframes:n})=>n.length>2?Hk:xr.has(t)?t.startsWith("scale")?Pk(n[1]):Lk:$k;function Vk({when:t,delay:n,delayChildren:s,staggerChildren:o,staggerDirection:c,repeat:d,repeatType:p,repeatDelay:h,from:m,elapsed:g,...y}){return!!Object.keys(y).length}const km=(t,n,s,o={},c,d)=>p=>{const h=hm(o,t)||{},m=h.delay||o.delay||0;let{elapsed:g=0}=o;g=g-ss(m);const y={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:n.getVelocity(),...h,delay:-g,onUpdate:S=>{n.set(S),h.onUpdate&&h.onUpdate(S)},onComplete:()=>{p(),h.onComplete&&h.onComplete()},name:t,motionValue:n,element:d?void 0:c};Vk(h)||Object.assign(y,Fk(t,y)),y.duration&&(y.duration=ss(y.duration)),y.repeatDelay&&(y.repeatDelay=ss(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let v=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(xh(y),y.delay===0&&(v=!0)),(zs.instantAnimations||zs.skipAnimations)&&(v=!0,xh(y),y.delay=0),y.allowFlatten=!h.type&&!h.ease,v&&!d&&n.get()!==void 0){const S=Ok(y.keyframes,h);if(S!==void 0){Gt.update(()=>{y.onUpdate(S),y.onComplete()});return}}return h.isSync?new pm(y):new uT(y)};function qk({protectedKeys:t,needsAnimating:n},s){const o=t.hasOwnProperty(s)&&n[s]!==!0;return n[s]=!1,o}function uS(t,n,{delay:s=0,transitionOverride:o,type:c}={}){let{transition:d=t.getDefaultTransition(),transitionEnd:p,...h}=n;o&&(d=o);const m=[],g=c&&t.animationState&&t.animationState.getState()[c];for(const y in h){const v=t.getValue(y,t.latestValues[y]??null),S=h[y];if(S===void 0||g&&qk(g,y))continue;const j={delay:s,...hm(d||{},y)},C=v.get();if(C!==void 0&&!v.isAnimating&&!Array.isArray(S)&&S===C&&!j.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const z=dS(t);if(z){const L=window.MotionHandoffAnimation(z,y,Gt);L!==null&&(j.startTime=L,T=!0)}}jh(t,y),v.start(km(y,v,S,t.shouldReduceMotion&&R1.has(y)?{type:!1}:j,t,T));const E=v.animation;E&&m.push(E)}return p&&Promise.all(m).then(()=>{Gt.update(()=>{p&&Bk(t,p)})}),m}function pS(t,n,s,o=0,c=1){const d=Array.from(t).sort((g,y)=>g.sortNodePosition(y)).indexOf(n),p=t.size,h=(p-1)*o;return typeof s=="function"?s(d,p):c===1?d*o:h-d*o}function Th(t,n,s={}){const o=or(t,n,s.type==="exit"?t.presenceContext?.custom:void 0);let{transition:c=t.getDefaultTransition()||{}}=o||{};s.transitionOverride&&(c=s.transitionOverride);const d=o?()=>Promise.all(uS(t,o,s)):()=>Promise.resolve(),p=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:v}=c;return Gk(t,n,m,g,y,v,s)}:()=>Promise.resolve(),{when:h}=c;if(h){const[m,g]=h==="beforeChildren"?[d,p]:[p,d];return m().then(()=>g())}else return Promise.all([d(),p(s.delay)])}function Gk(t,n,s=0,o=0,c=0,d=1,p){const h=[];for(const m of t.variantChildren)m.notify("AnimationStart",n),h.push(Th(m,n,{...p,delay:s+(typeof o=="function"?0:o)+pS(t.variantChildren,m,o,c,d)}).then(()=>m.notify("AnimationComplete",n)));return Promise.all(h)}function Wk(t,n,s={}){t.notify("AnimationStart",n);let o;if(Array.isArray(n)){const c=n.map(d=>Th(t,d,s));o=Promise.all(c)}else if(typeof n=="string")o=Th(t,n,s);else{const c=typeof n=="function"?or(t,n,s.custom):n;o=Promise.all(uS(t,c,s))}return o.then(()=>{t.notify("AnimationComplete",n)})}function fS(t,n){if(!Array.isArray(n))return!1;const s=n.length;if(s!==t.length)return!1;for(let o=0;o<s;o++)if(n[o]!==t[o])return!1;return!0}const Yk=bm.length;function hS(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?hS(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const n={};for(let s=0;s<Yk;s++){const o=bm[s],c=t.props[o];(Il(c)||c===!1)&&(n[o]=c)}return n}const Xk=[...vm].reverse(),Kk=vm.length;function Qk(t){return n=>Promise.all(n.map(({animation:s,options:o})=>Wk(t,s,o)))}function Zk(t){let n=Qk(t),s=o0(),o=!0;const c=m=>(g,y)=>{const v=or(t,y,m==="exit"?t.presenceContext?.custom:void 0);if(v){const{transition:S,transitionEnd:j,...C}=v;g={...g,...C,...j}}return g};function d(m){n=m(t)}function p(m){const{props:g}=t,y=hS(t.parent)||{},v=[],S=new Set;let j={},C=1/0;for(let E=0;E<Kk;E++){const z=Xk[E],L=s[z],R=g[z]!==void 0?g[z]:y[z],Y=Il(R),P=z===m?L.isActive:null;P===!1&&(C=E);let te=R===y[z]&&R!==g[z]&&Y;if(te&&o&&t.manuallyAnimateOnMount&&(te=!1),L.protectedKeys={...j},!L.isActive&&P===null||!R&&!L.prevProp||tu(R)||typeof R=="boolean")continue;const re=Jk(L.prevProp,R);let K=re||z===m&&L.isActive&&!te&&Y||E>C&&Y,ge=!1;const me=Array.isArray(R)?R:[R];let He=me.reduce(c(z),{});P===!1&&(He={});const{prevResolvedValues:qe={}}=L,Ke={...qe,...He},Re=ne=>{K=!0,S.has(ne)&&(ge=!0,S.delete(ne)),L.needsAnimating[ne]=!0;const le=t.getValue(ne);le&&(le.liveStyle=!1)};for(const ne in Ke){const le=He[ne],we=qe[ne];if(j.hasOwnProperty(ne))continue;let $e=!1;Ch(le)&&Ch(we)?$e=!fS(le,we):$e=le!==we,$e?le!=null?Re(ne):S.add(ne):le!==void 0&&S.has(ne)?Re(ne):L.protectedKeys[ne]=!0}L.prevProp=R,L.prevResolvedValues=He,L.isActive&&(j={...j,...He}),o&&t.blockInitialAnimation&&(K=!1);const Te=te&&re;K&&(!Te||ge)&&v.push(...me.map(ne=>{const le={type:z};if(typeof ne=="string"&&o&&!Te&&t.manuallyAnimateOnMount&&t.parent){const{parent:we}=t,$e=or(we,ne);if(we.enteringChildren&&$e){const{delayChildren:_e}=$e.transition||{};le.delay=pS(we.enteringChildren,t,_e)}}return{animation:ne,options:le}}))}if(S.size){const E={};if(typeof g.initial!="boolean"){const z=or(t,Array.isArray(g.initial)?g.initial[0]:g.initial);z&&z.transition&&(E.transition=z.transition)}S.forEach(z=>{const L=t.getBaseTarget(z),R=t.getValue(z);R&&(R.liveStyle=!0),E[z]=L??null}),v.push({animation:E})}let T=!!v.length;return o&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(T=!1),o=!1,T?n(v):Promise.resolve()}function h(m,g){if(s[m].isActive===g)return Promise.resolve();t.variantChildren?.forEach(v=>v.animationState?.setActive(m,g)),s[m].isActive=g;const y=p(m);for(const v in s)s[v].protectedKeys={};return y}return{animateChanges:p,setActive:h,setAnimateFunction:d,getState:()=>s,reset:()=>{s=o0()}}}function Jk(t,n){return typeof n=="string"?n!==t:Array.isArray(n)?!fS(n,t):!1}function Yi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function o0(){return{animate:Yi(!0),whileInView:Yi(),whileHover:Yi(),whileTap:Yi(),whileDrag:Yi(),whileFocus:Yi(),exit:Yi()}}class bi{constructor(n){this.isMounted=!1,this.node=n}update(){}}class eM extends bi{constructor(n){super(n),n.animationState||(n.animationState=Zk(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();tu(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:s}=this.node.prevProps||{};n!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let tM=0;class nM extends bi{constructor(){super(...arguments),this.id=tM++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:s}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===o)return;const c=this.node.animationState.setActive("exit",!n);s&&!n&&c.then(()=>{s(this.id)})}mount(){const{register:n,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const aM={animation:{Feature:eM},exit:{Feature:nM}};function Ol(t,n,s,o={passive:!0}){return t.addEventListener(n,s,o),()=>t.removeEventListener(n,s)}function Ql(t){return{point:{x:t.pageX,y:t.pageY}}}const sM=t=>n=>ym(n)&&t(n,Ql(n));function Ml(t,n,s,o){return Ol(t,n,sM(s),o)}const mS=1e-4,iM=1-mS,oM=1+mS,gS=.01,rM=0-gS,lM=0+gS;function Kn(t){return t.max-t.min}function cM(t,n,s){return Math.abs(t-n)<=s}function r0(t,n,s,o=.5){t.origin=o,t.originPoint=Xt(n.min,n.max,t.origin),t.scale=Kn(s)/Kn(n),t.translate=Xt(s.min,s.max,t.origin)-t.originPoint,(t.scale>=iM&&t.scale<=oM||isNaN(t.scale))&&(t.scale=1),(t.translate>=rM&&t.translate<=lM||isNaN(t.translate))&&(t.translate=0)}function El(t,n,s,o){r0(t.x,n.x,s.x,o?o.originX:void 0),r0(t.y,n.y,s.y,o?o.originY:void 0)}function l0(t,n,s){t.min=s.min+n.min,t.max=t.min+Kn(n)}function dM(t,n,s){l0(t.x,n.x,s.x),l0(t.y,n.y,s.y)}function c0(t,n,s){t.min=n.min-s.min,t.max=t.min+Kn(n)}function Pd(t,n,s){c0(t.x,n.x,s.x),c0(t.y,n.y,s.y)}function Aa(t){return[t("x"),t("y")]}const yS=({current:t})=>t?t.ownerDocument.defaultView:null,d0=(t,n)=>Math.abs(t-n);function uM(t,n){const s=d0(t.x,n.x),o=d0(t.y,n.y);return Math.sqrt(s**2+o**2)}class xS{constructor(n,s,{transformPagePoint:o,contextWindow:c=window,dragSnapToOrigin:d=!1,distanceThreshold:p=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=zf(this.lastMoveEventInfo,this.history),j=this.startEvent!==null,C=uM(S.offset,{x:0,y:0})>=this.distanceThreshold;if(!j&&!C)return;const{point:T}=S,{timestamp:E}=In;this.history.push({...T,timestamp:E});const{onStart:z,onMove:L}=this.handlers;j||(z&&z(this.lastMoveEvent,S),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,S)},this.handlePointerMove=(S,j)=>{this.lastMoveEvent=S,this.lastMoveEventInfo=Nf(j,this.transformPagePoint),Gt.update(this.updatePoint,!0)},this.handlePointerUp=(S,j)=>{this.end();const{onEnd:C,onSessionEnd:T,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=zf(S.type==="pointercancel"?this.lastMoveEventInfo:Nf(j,this.transformPagePoint),this.history);this.startEvent&&C&&C(S,z),T&&T(S,z)},!ym(n))return;this.dragSnapToOrigin=d,this.handlers=s,this.transformPagePoint=o,this.distanceThreshold=p,this.contextWindow=c||window;const h=Ql(n),m=Nf(h,this.transformPagePoint),{point:g}=m,{timestamp:y}=In;this.history=[{...g,timestamp:y}];const{onSessionStart:v}=s;v&&v(n,zf(m,this.history)),this.removeListeners=Yl(Ml(this.contextWindow,"pointermove",this.handlePointerMove),Ml(this.contextWindow,"pointerup",this.handlePointerUp),Ml(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),xi(this.updatePoint)}}function Nf(t,n){return n?{point:n(t.point)}:t}function u0(t,n){return{x:t.x-n.x,y:t.y-n.y}}function zf({point:t},n){return{point:t,delta:u0(t,vS(n)),offset:u0(t,pM(n)),velocity:fM(n,.1)}}function pM(t){return t[0]}function vS(t){return t[t.length-1]}function fM(t,n){if(t.length<2)return{x:0,y:0};let s=t.length-1,o=null;const c=vS(t);for(;s>=0&&(o=t[s],!(c.timestamp-o.timestamp>ss(n)));)s--;if(!o)return{x:0,y:0};const d=Ra(c.timestamp-o.timestamp);if(d===0)return{x:0,y:0};const p={x:(c.x-o.x)/d,y:(c.y-o.y)/d};return p.x===1/0&&(p.x=0),p.y===1/0&&(p.y=0),p}function hM(t,{min:n,max:s},o){return n!==void 0&&t<n?t=o?Xt(n,t,o.min):Math.max(t,n):s!==void 0&&t>s&&(t=o?Xt(s,t,o.max):Math.min(t,s)),t}function p0(t,n,s){return{min:n!==void 0?t.min+n:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function mM(t,{top:n,left:s,bottom:o,right:c}){return{x:p0(t.x,s,c),y:p0(t.y,n,o)}}function f0(t,n){let s=n.min-t.min,o=n.max-t.max;return n.max-n.min<t.max-t.min&&([s,o]=[o,s]),{min:s,max:o}}function gM(t,n){return{x:f0(t.x,n.x),y:f0(t.y,n.y)}}function yM(t,n){let s=.5;const o=Kn(t),c=Kn(n);return c>o?s=zl(n.min,n.max-o,t.min):o>c&&(s=zl(t.min,t.max-c,n.min)),Ns(0,1,s)}function xM(t,n){const s={};return n.min!==void 0&&(s.min=n.min-t.min),n.max!==void 0&&(s.max=n.max-t.min),s}const kh=.35;function vM(t=kh){return t===!1?t=0:t===!0&&(t=kh),{x:h0(t,"left","right"),y:h0(t,"top","bottom")}}function h0(t,n,s){return{min:m0(t,n),max:m0(t,s)}}function m0(t,n){return typeof t=="number"?t:t[n]||0}const bM=new WeakMap;class SM{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Cn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:s=!1,distanceThreshold:o}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const d=v=>{const{dragSnapToOrigin:S}=this.getProps();S?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Ql(v).point)},p=(v,S)=>{const{drag:j,dragPropagation:C,onDragStart:T}=this.getProps();if(j&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kT(j),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=S,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Aa(z=>{let L=this.getAxisMotionValue(z).get()||0;if(is.test(L)){const{projection:R}=this.visualElement;if(R&&R.layout){const Y=R.layout.layoutBox[z];Y&&(L=Kn(Y)*(parseFloat(L)/100))}}this.originPoint[z]=L}),T&&Gt.postRender(()=>T(v,S)),jh(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},h=(v,S)=>{this.latestPointerEvent=v,this.latestPanInfo=S;const{dragPropagation:j,dragDirectionLock:C,onDirectionLock:T,onDrag:E}=this.getProps();if(!j&&!this.openDragLock)return;const{offset:z}=S;if(C&&this.currentDirection===null){this.currentDirection=wM(z),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",S.point,z),this.updateAxis("y",S.point,z),this.visualElement.render(),E&&E(v,S)},m=(v,S)=>{this.latestPointerEvent=v,this.latestPanInfo=S,this.stop(v,S),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>Aa(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:y}=this.getProps();this.panSession=new xS(n,{onSessionStart:d,onStart:p,onMove:h,onSessionEnd:m,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:o,contextWindow:yS(this.visualElement)})}stop(n,s){const o=n||this.latestPointerEvent,c=s||this.latestPanInfo,d=this.isDragging;if(this.cancel(),!d||!c||!o)return;const{velocity:p}=c;this.startAnimation(p);const{onDragEnd:h}=this.getProps();h&&Gt.postRender(()=>h(o,c))}cancel(){this.isDragging=!1;const{projection:n,animationState:s}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(n,s,o){const{drag:c}=this.getProps();if(!o||!xd(n,c,this.currentDirection))return;const d=this.getAxisMotionValue(n);let p=this.originPoint[n]+o[n];this.constraints&&this.constraints[n]&&(p=hM(p,this.constraints[n],this.elastic[n])),d.set(p)}resolveConstraints(){const{dragConstraints:n,dragElastic:s}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,c=this.constraints;n&&tr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=mM(o.layoutBox,n):this.constraints=!1,this.elastic=vM(s),c!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Aa(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=xM(o.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:s}=this.getProps();if(!n||!tr(n))return!1;const o=n.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const d=_k(o,c.root,this.visualElement.getTransformPagePoint());let p=gM(c.layout.layoutBox,d);if(s){const h=s(bk(p));this.hasMutatedConstraints=!!h,h&&(p=nS(h))}return p}startAnimation(n){const{drag:s,dragMomentum:o,dragElastic:c,dragTransition:d,dragSnapToOrigin:p,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},g=Aa(y=>{if(!xd(y,s,this.currentDirection))return;let v=m&&m[y]||{};p&&(v={min:0,max:0});const S=c?200:1e6,j=c?40:1e7,C={type:"inertia",velocity:o?n[y]:0,bounceStiffness:S,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...d,...v};return this.startAxisValueAnimation(y,C)});return Promise.all(g).then(h)}startAxisValueAnimation(n,s){const o=this.getAxisMotionValue(n);return jh(this.visualElement,n),o.start(km(n,o,0,s,this.visualElement,!1))}stopAnimation(){Aa(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){Aa(n=>this.getAxisMotionValue(n).animation?.pause())}getAnimationState(n){return this.getAxisMotionValue(n).animation?.state}getAxisMotionValue(n){const s=`_drag${n.toUpperCase()}`,o=this.visualElement.getProps(),c=o[s];return c||this.visualElement.getValue(n,(o.initial?o.initial[n]:void 0)||0)}snapToCursor(n){Aa(s=>{const{drag:o}=this.getProps();if(!xd(s,o,this.currentDirection))return;const{projection:c}=this.visualElement,d=this.getAxisMotionValue(s);if(c&&c.layout){const{min:p,max:h}=c.layout.layoutBox[s];d.set(n[s]-Xt(p,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:s}=this.getProps(),{projection:o}=this.visualElement;if(!tr(s)||!o||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};Aa(p=>{const h=this.getAxisMotionValue(p);if(h&&this.constraints!==!1){const m=h.get();c[p]=yM({min:m,max:m},this.constraints[p])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),Aa(p=>{if(!xd(p,n,null))return;const h=this.getAxisMotionValue(p),{min:m,max:g}=this.constraints[p];h.set(Xt(m,g,c[p]))})}addListeners(){if(!this.visualElement.current)return;bM.set(this.visualElement,this);const n=this.visualElement.current,s=Ml(n,"pointerdown",m=>{const{drag:g,dragListener:y=!0}=this.getProps();g&&y&&this.start(m)}),o=()=>{const{dragConstraints:m}=this.getProps();tr(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,d=c.addEventListener("measure",o);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),Gt.read(o);const p=Ol(window,"resize",()=>this.scalePositionWithinConstraints()),h=c.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:g})=>{this.isDragging&&g&&(Aa(y=>{const v=this.getAxisMotionValue(y);v&&(this.originPoint[y]+=m[y].translate,v.set(v.get()+m[y].translate))}),this.visualElement.render())}));return()=>{p(),s(),d(),h&&h()}}getProps(){const n=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:o=!1,dragPropagation:c=!1,dragConstraints:d=!1,dragElastic:p=kh,dragMomentum:h=!0}=n;return{...n,drag:s,dragDirectionLock:o,dragPropagation:c,dragConstraints:d,dragElastic:p,dragMomentum:h}}}function xd(t,n,s){return(n===!0||n===t)&&(s===null||s===t)}function wM(t,n=10){let s=null;return Math.abs(t.y)>n?s="y":Math.abs(t.x)>n&&(s="x"),s}class _M extends bi{constructor(n){super(n),this.removeGroupControls=Da,this.removeListeners=Da,this.controls=new SM(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Da}unmount(){this.removeGroupControls(),this.removeListeners()}}const g0=t=>(n,s)=>{t&&Gt.postRender(()=>t(n,s))};class CM extends bi{constructor(){super(...arguments),this.removePointerDownListener=Da}onPointerDown(n){this.session=new xS(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yS(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:s,onPan:o,onPanEnd:c}=this.node.getProps();return{onSessionStart:g0(n),onStart:g0(s),onMove:o,onEnd:(d,p)=>{delete this.session,c&&Gt.postRender(()=>c(d,p))}}}mount(){this.removePointerDownListener=Ml(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ad={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Bf=!1;class jM extends b.Component{componentDidMount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:o,layoutId:c}=this.props,{projection:d}=n;d&&(s.group&&s.group.add(d),o&&o.register&&c&&o.register(d),Bf&&d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),Ad.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:s,visualElement:o,drag:c,isPresent:d}=this.props,{projection:p}=o;return p&&(p.isPresent=d,Bf=!0,c||n.layoutDependency!==s||s===void 0||n.isPresent!==d?p.willUpdate():this.safeToRemove(),n.isPresent!==d&&(d?p.promote():p.relegate()||Gt.postRender(()=>{const h=p.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),gm.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:s,switchLayoutGroup:o}=this.props,{projection:c}=n;Bf=!0,c&&(c.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(c),o&&o.deregister&&o.deregister(c))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function bS(t){const[n,s]=$1(),o=b.useContext(Xh);return r.jsx(jM,{...t,layoutGroup:o,switchLayoutGroup:b.useContext(eS),isPresent:n,safeToRemove:s})}function TM(t,n,s){const o=Gn(t)?t:dr(t);return o.start(km("",o,n,s)),o.animation}const kM=(t,n)=>t.depth-n.depth;class MM{constructor(){this.children=[],this.isDirty=!1}add(n){Zh(this.children,n),this.isDirty=!0}remove(n){Jh(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(kM),this.isDirty=!1,this.children.forEach(n)}}function EM(t,n){const s=aa.now(),o=({timestamp:c})=>{const d=c-s;d>=n&&(xi(o),t(d-n))};return Gt.setup(o,!0),()=>xi(o)}const SS=["TopLeft","TopRight","BottomLeft","BottomRight"],AM=SS.length,y0=t=>typeof t=="string"?parseFloat(t):t,x0=t=>typeof t=="number"||Ve.test(t);function RM(t,n,s,o,c,d){c?(t.opacity=Xt(0,s.opacity??1,DM(o)),t.opacityExit=Xt(n.opacity??1,0,NM(o))):d&&(t.opacity=Xt(n.opacity??1,s.opacity??1,o));for(let p=0;p<AM;p++){const h=`border${SS[p]}Radius`;let m=v0(n,h),g=v0(s,h);if(m===void 0&&g===void 0)continue;m||(m=0),g||(g=0),m===0||g===0||x0(m)===x0(g)?(t[h]=Math.max(Xt(y0(m),y0(g),o),0),(is.test(g)||is.test(m))&&(t[h]+="%")):t[h]=g}(n.rotate||s.rotate)&&(t.rotate=Xt(n.rotate||0,s.rotate||0,o))}function v0(t,n){return t[n]!==void 0?t[n]:t.borderRadius}const DM=wS(0,.5,r1),NM=wS(.5,.95,Da);function wS(t,n,s){return o=>o<t?0:o>n?1:s(zl(t,n,o))}function b0(t,n){t.min=n.min,t.max=n.max}function Ua(t,n){b0(t.x,n.x),b0(t.y,n.y)}function S0(t,n){t.translate=n.translate,t.scale=n.scale,t.originPoint=n.originPoint,t.origin=n.origin}function w0(t,n,s,o,c){return t-=n,t=Ld(t,1/s,o),c!==void 0&&(t=Ld(t,1/c,o)),t}function zM(t,n=0,s=1,o=.5,c,d=t,p=t){if(is.test(n)&&(n=parseFloat(n),n=Xt(p.min,p.max,n/100)-p.min),typeof n!="number")return;let h=Xt(d.min,d.max,o);t===d&&(h-=n),t.min=w0(t.min,n,s,h,c),t.max=w0(t.max,n,s,h,c)}function _0(t,n,[s,o,c],d,p){zM(t,n[s],n[o],n[c],n.scale,d,p)}const BM=["x","scaleX","originX"],UM=["y","scaleY","originY"];function C0(t,n,s,o){_0(t.x,n,BM,s?s.x:void 0,o?o.x:void 0),_0(t.y,n,UM,s?s.y:void 0,o?o.y:void 0)}function j0(t){return t.translate===0&&t.scale===1}function _S(t){return j0(t.x)&&j0(t.y)}function T0(t,n){return t.min===n.min&&t.max===n.max}function IM(t,n){return T0(t.x,n.x)&&T0(t.y,n.y)}function k0(t,n){return Math.round(t.min)===Math.round(n.min)&&Math.round(t.max)===Math.round(n.max)}function CS(t,n){return k0(t.x,n.x)&&k0(t.y,n.y)}function M0(t){return Kn(t.x)/Kn(t.y)}function E0(t,n){return t.translate===n.translate&&t.scale===n.scale&&t.originPoint===n.originPoint}class OM{constructor(){this.members=[]}add(n){Zh(this.members,n),n.scheduleRender()}remove(n){if(Jh(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(n){const s=this.members.findIndex(c=>n===c);if(s===0)return!1;let o;for(let c=s;c>=0;c--){const d=this.members[c];if(d.isPresent!==!1){o=d;break}}return o?(this.promote(o),!0):!1}promote(n,s){const o=this.lead;if(n!==o&&(this.prevLead=o,this.lead=n,n.show(),o)){o.instance&&o.scheduleRender(),n.scheduleRender(),n.resumeFrom=o,s&&(n.resumeFrom.preserveOpacity=!0),o.snapshot&&(n.snapshot=o.snapshot,n.snapshot.latestValues=o.animationValues||o.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:c}=n.options;c===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:s,resumingFrom:o}=n;s.onExitComplete&&s.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function LM(t,n,s){let o="";const c=t.x.translate/n.x,d=t.y.translate/n.y,p=s?.z||0;if((c||d||p)&&(o=`translate3d(${c}px, ${d}px, ${p}px) `),(n.x!==1||n.y!==1)&&(o+=`scale(${1/n.x}, ${1/n.y}) `),s){const{transformPerspective:g,rotate:y,rotateX:v,rotateY:S,skewX:j,skewY:C}=s;g&&(o=`perspective(${g}px) ${o}`),y&&(o+=`rotate(${y}deg) `),v&&(o+=`rotateX(${v}deg) `),S&&(o+=`rotateY(${S}deg) `),j&&(o+=`skewX(${j}deg) `),C&&(o+=`skewY(${C}deg) `)}const h=t.x.scale*n.x,m=t.y.scale*n.y;return(h!==1||m!==1)&&(o+=`scale(${h}, ${m})`),o||"none"}const Uf=["","X","Y","Z"],PM=1e3;let HM=0;function If(t,n,s,o){const{latestValues:c}=n;c[t]&&(s[t]=c[t],n.setStaticValue(t,0),o&&(o[t]=0))}function jS(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:n}=t.options;if(!n)return;const s=dS(n);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:c,layoutId:d}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Gt,!(c||d))}const{parent:o}=t;o&&!o.hasCheckedOptimisedAppear&&jS(o)}function TS({attachResizeListener:t,defaultParent:n,measureScroll:s,checkIsScrollRoot:o,resetTransform:c}){return class{constructor(p={},h=n?.()){this.id=HM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(VM),this.nodes.forEach(YM),this.nodes.forEach(XM),this.nodes.forEach(qM)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=p,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new MM)}addEventListener(p,h){return this.eventHandlers.has(p)||this.eventHandlers.set(p,new nm),this.eventHandlers.get(p).add(h)}notifyListeners(p,...h){const m=this.eventHandlers.get(p);m&&m.notify(...h)}hasListeners(p){return this.eventHandlers.has(p)}mount(p){if(this.instance)return;this.isSVG=H1(p)&&!NT(p),this.instance=p;const{layoutId:h,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(p),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||h)&&(this.isLayoutDirty=!0),t){let y,v=0;const S=()=>this.root.updateBlockedByResize=!1;Gt.read(()=>{v=window.innerWidth}),t(p,()=>{const j=window.innerWidth;j!==v&&(v=j,this.root.updateBlockedByResize=!0,y&&y(),y=EM(S,250),Ad.hasAnimatedSinceResize&&(Ad.hasAnimatedSinceResize=!1,this.nodes.forEach(D0)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||m)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:v,hasRelativeLayoutChanged:S,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||g.getDefaultTransition()||eE,{onLayoutAnimationStart:T,onLayoutAnimationComplete:E}=g.getProps(),z=!this.targetLayout||!CS(this.targetLayout,j),L=!v&&S;if(this.options.layoutRoot||this.resumeFrom||L||v&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...hm(C,"layout"),onPlay:T,onComplete:E};(g.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(y,L)}else v||D0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const p=this.getStack();p&&p.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),xi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(KM),this.animationId++)}getTransformTemplate(){const{visualElement:p}=this.options;return p&&p.getProps().transformTemplate}willUpdate(p=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const v=this.path[y];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),p&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(A0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(R0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(WM),this.nodes.forEach($M),this.nodes.forEach(FM)):this.nodes.forEach(R0),this.clearAllSnapshots();const h=aa.now();In.delta=Ns(0,1e3/60,h-In.timestamp),In.timestamp=h,In.isProcessing=!0,jf.update.process(In),jf.preRender.process(In),jf.render.process(In),In.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(GM),this.sharedNodes.forEach(QM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Kn(this.snapshot.measuredBox.x)&&!Kn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const p=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,p?p.layoutBox:void 0)}updateScroll(p="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===p&&(h=!1),h&&this.instance){const m=o(this.instance);this.scroll={animationId:this.root.animationId,phase:p,isRoot:m,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!c)return;const p=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!_S(this.projectionDelta),m=this.getTransformTemplate(),g=m?m(this.latestValues,""):void 0,y=g!==this.prevTransformTemplateValue;p&&this.instance&&(h||Ki(this.latestValues)||y)&&(c(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(p=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return p&&(m=this.removeTransform(m)),tE(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:p}=this.options;if(!p)return Cn();const h=p.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(nE))){const{scroll:g}=this.root;g&&(nr(h.x,g.offset.x),nr(h.y,g.offset.y))}return h}removeElementScroll(p){const h=Cn();if(Ua(h,p),this.scroll?.wasRoot)return h;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:y,options:v}=g;g!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&Ua(h,p),nr(h.x,y.offset.x),nr(h.y,y.offset.y))}return h}applyTransform(p,h=!1){const m=Cn();Ua(m,p);for(let g=0;g<this.path.length;g++){const y=this.path[g];!h&&y.options.layoutScroll&&y.scroll&&y!==y.root&&ar(m,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Ki(y.latestValues)&&ar(m,y.latestValues)}return Ki(this.latestValues)&&ar(m,this.latestValues),m}removeTransform(p){const h=Cn();Ua(h,p);for(let m=0;m<this.path.length;m++){const g=this.path[m];if(!g.instance||!Ki(g.latestValues))continue;Sh(g.latestValues)&&g.updateSnapshot();const y=Cn(),v=g.measurePageBox();Ua(y,v),C0(h,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,y)}return Ki(this.latestValues)&&C0(h,this.latestValues),h}setTargetDelta(p){this.targetDelta=p,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(p){this.options={...this.options,...p,crossfade:p.crossfade!==void 0?p.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==In.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(p=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(p||m&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:v}=this.options;if(!this.layout||!(y||v))return;this.resolvedRelativeTargetAt=In.timestamp;const S=this.getClosestProjectingParent();S&&this.linkedParentVersion!==S.layoutVersion&&!S.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(S&&S.layout?this.createRelativeTarget(S,this.layout.layoutBox,S.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Cn(),this.targetWithTransforms=Cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ua(this.target,this.layout.layoutBox),sS(this.target,this.targetDelta)):Ua(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?this.createRelativeTarget(S,this.target,S.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Sh(this.parent.latestValues)||aS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(p,h,m){this.relativeParent=p,this.linkedParentVersion=p.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),Pd(this.relativeTargetOrigin,h,m),Ua(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const p=this.getLead(),h=!!this.resumingFrom||this!==p;let m=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===In.timestamp&&(m=!1),m)return;const{layout:g,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||y))return;Ua(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,S=this.treeScale.y;wk(this.layoutCorrected,this.treeScale,this.path,h),p.layout&&!p.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(p.target=p.layout.layoutBox,p.targetWithTransforms=Cn());const{target:j}=p;if(!j){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(S0(this.prevProjectionDelta.x,this.projectionDelta.x),S0(this.prevProjectionDelta.y,this.projectionDelta.y)),El(this.projectionDelta,this.layoutCorrected,j,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==S||!E0(this.projectionDelta.x,this.prevProjectionDelta.x)||!E0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(p=!0){if(this.options.visualElement?.scheduleRender(),p){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sr(),this.projectionDelta=sr(),this.projectionDeltaWithTransform=sr()}setAnimationOrigin(p,h=!1){const m=this.snapshot,g=m?m.latestValues:{},y={...this.latestValues},v=sr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const S=Cn(),j=m?m.source:void 0,C=this.layout?this.layout.source:void 0,T=j!==C,E=this.getStack(),z=!E||E.members.length<=1,L=!!(T&&!z&&this.options.crossfade===!0&&!this.path.some(JM));this.animationProgress=0;let R;this.mixTargetDelta=Y=>{const P=Y/1e3;N0(v.x,p.x,P),N0(v.y,p.y,P),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Pd(S,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ZM(this.relativeTarget,this.relativeTargetOrigin,S,P),R&&IM(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Cn()),Ua(R,this.relativeTarget)),T&&(this.animationValues=y,RM(y,g,this.latestValues,P,L,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(p){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(xi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gt.update(()=>{Ad.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=dr(0)),this.currentAnimation=TM(this.motionValue,[0,1e3],{...p,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),p.onUpdate&&p.onUpdate(h)},onStop:()=>{},onComplete:()=>{p.onComplete&&p.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const p=this.getStack();p&&p.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const p=this.getLead();let{targetWithTransforms:h,target:m,layout:g,latestValues:y}=p;if(!(!h||!m||!g)){if(this!==p&&this.layout&&g&&kS(this.options.animationType,this.layout.layoutBox,g.layoutBox)){m=this.target||Cn();const v=Kn(this.layout.layoutBox.x);m.x.min=p.target.x.min,m.x.max=m.x.min+v;const S=Kn(this.layout.layoutBox.y);m.y.min=p.target.y.min,m.y.max=m.y.min+S}Ua(h,m),ar(h,y),El(this.projectionDeltaWithTransform,this.layoutCorrected,h,y)}}registerSharedNode(p,h){this.sharedNodes.has(p)||this.sharedNodes.set(p,new OM),this.sharedNodes.get(p).add(h);const g=h.options.initialPromotionConfig;h.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(h):void 0})}isLead(){const p=this.getStack();return p?p.lead===this:!0}getLead(){const{layoutId:p}=this.options;return p?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:p}=this.options;return p?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:p}=this.options;if(p)return this.root.sharedNodes.get(p)}promote({needsReset:p,transition:h,preserveFollowOpacity:m}={}){const g=this.getStack();g&&g.promote(this,m),p&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const p=this.getStack();return p?p.relegate(this):!1}resetSkewAndRotation(){const{visualElement:p}=this.options;if(!p)return;let h=!1;const{latestValues:m}=p;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(h=!0),!h)return;const g={};m.z&&If("z",p,g,this.animationValues);for(let y=0;y<Uf.length;y++)If(`rotate${Uf[y]}`,p,g,this.animationValues),If(`skew${Uf[y]}`,p,g,this.animationValues);p.render();for(const y in g)p.setStaticValue(y,g[y]),this.animationValues&&(this.animationValues[y]=g[y]);p.scheduleRender()}applyProjectionStyles(p,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){p.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,p.visibility="",p.opacity="",p.pointerEvents=Ed(h?.pointerEvents)||"",p.transform=m?m(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Ed(h?.pointerEvents)||""),this.hasProjected&&!Ki(this.latestValues)&&(p.transform=m?m({},""):"none",this.hasProjected=!1);return}p.visibility="";const y=g.animationValues||g.latestValues;this.applyTransformsToTarget();let v=LM(this.projectionDeltaWithTransform,this.treeScale,y);m&&(v=m(y,v)),p.transform=v;const{x:S,y:j}=this.projectionDelta;p.transformOrigin=`${S.origin*100}% ${j.origin*100}% 0`,g.animationValues?p.opacity=g===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:p.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const C in bh){if(y[C]===void 0)continue;const{correct:T,applyTo:E,isCSSVariable:z}=bh[C],L=v==="none"?y[C]:T(y[C],g);if(E){const R=E.length;for(let Y=0;Y<R;Y++)p[E[Y]]=L}else z?this.options.visualElement.renderState.vars[C]=L:p[C]=L}this.options.layoutId&&(p.pointerEvents=g===this?Ed(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(p=>p.currentAnimation?.stop()),this.root.nodes.forEach(A0),this.root.sharedNodes.clear()}}}function $M(t){t.updateLayout()}function FM(t){const n=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=t.layout,{animationType:c}=t.options,d=n.source!==t.layout.source;c==="size"?Aa(y=>{const v=d?n.measuredBox[y]:n.layoutBox[y],S=Kn(v);v.min=s[y].min,v.max=v.min+S}):kS(c,n.layoutBox,s)&&Aa(y=>{const v=d?n.measuredBox[y]:n.layoutBox[y],S=Kn(s[y]);v.max=v.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+S)});const p=sr();El(p,s,n.layoutBox);const h=sr();d?El(h,t.applyTransform(o,!0),n.measuredBox):El(h,s,n.layoutBox);const m=!_S(p);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:S}=y;if(v&&S){const j=Cn();Pd(j,n.layoutBox,v.layoutBox);const C=Cn();Pd(C,s,S.layoutBox),CS(j,C)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=j,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:h,layoutDelta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function VM(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function qM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function GM(t){t.clearSnapshot()}function A0(t){t.clearMeasurements()}function R0(t){t.isLayoutDirty=!1}function WM(t){const{visualElement:n}=t.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),t.resetTransform()}function D0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function YM(t){t.resolveTargetDelta()}function XM(t){t.calcProjection()}function KM(t){t.resetSkewAndRotation()}function QM(t){t.removeLeadSnapshot()}function N0(t,n,s){t.translate=Xt(n.translate,0,s),t.scale=Xt(n.scale,1,s),t.origin=n.origin,t.originPoint=n.originPoint}function z0(t,n,s,o){t.min=Xt(n.min,s.min,o),t.max=Xt(n.max,s.max,o)}function ZM(t,n,s,o){z0(t.x,n.x,s.x,o),z0(t.y,n.y,s.y,o)}function JM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const eE={duration:.45,ease:[.4,0,.1,1]},B0=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),U0=B0("applewebkit/")&&!B0("chrome/")?Math.round:Da;function I0(t){t.min=U0(t.min),t.max=U0(t.max)}function tE(t){I0(t.x),I0(t.y)}function kS(t,n,s){return t==="position"||t==="preserve-aspect"&&!cM(M0(n),M0(s),.2)}function nE(t){return t!==t.root&&t.scroll?.wasRoot}const aE=TS({attachResizeListener:(t,n)=>Ol(t,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Of={current:void 0},MS=TS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Of.current){const t=new aE({});t.mount(window),t.setOptions({layoutScroll:!0}),Of.current=t}return Of.current},resetTransform:(t,n)=>{t.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),sE={pan:{Feature:CM},drag:{Feature:_M,ProjectionNode:MS,MeasureLayout:bS}};function O0(t,n,s){const{props:o}=t;t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",s==="Start");const c="onHover"+s,d=o[c];d&&Gt.postRender(()=>d(n,Ql(n)))}class iE extends bi{mount(){const{current:n}=this.node;n&&(this.unmount=MT(n,(s,o)=>(O0(this.node,o,"Start"),c=>O0(this.node,c,"End"))))}unmount(){}}class oE extends bi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yl(Ol(this.node.current,"focus",()=>this.onFocus()),Ol(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function L0(t,n,s){const{props:o}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&o.whileTap&&t.animationState.setActive("whileTap",s==="Start");const c="onTap"+(s==="End"?"":s),d=o[c];d&&Gt.postRender(()=>d(n,Ql(n)))}class rE extends bi{mount(){const{current:n}=this.node;n&&(this.unmount=DT(n,(s,o)=>(L0(this.node,o,"Start"),(c,{success:d})=>L0(this.node,c,d?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Mh=new WeakMap,Lf=new WeakMap,lE=t=>{const n=Mh.get(t.target);n&&n(t)},cE=t=>{t.forEach(lE)};function dE({root:t,...n}){const s=t||document;Lf.has(s)||Lf.set(s,{});const o=Lf.get(s),c=JSON.stringify(n);return o[c]||(o[c]=new IntersectionObserver(cE,{root:t,...n})),o[c]}function uE(t,n,s){const o=dE(n);return Mh.set(t,s),o.observe(t),()=>{Mh.delete(t),o.unobserve(t)}}const pE={some:0,all:1};class fE extends bi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:s,margin:o,amount:c="some",once:d}=n,p={root:s?s.current:void 0,rootMargin:o,threshold:typeof c=="number"?c:pE[c]},h=m=>{const{isIntersecting:g}=m;if(this.isInView===g||(this.isInView=g,d&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:y,onViewportLeave:v}=this.node.getProps(),S=g?y:v;S&&S(m)};return uE(this.node.current,p,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:s}=this.node;["amount","margin","root"].some(hE(n,s))&&this.startObserver()}unmount(){}}function hE({viewport:t={}},{viewport:n={}}={}){return s=>t[s]!==n[s]}const mE={inView:{Feature:fE},tap:{Feature:rE},focus:{Feature:oE},hover:{Feature:iE}},gE={layout:{ProjectionNode:MS,MeasureLayout:bS}},yE={...aM,...mE,...sE,...gE},se=vk(yE,Dk),Pf=t=>{const[n,s]=b.useState(!1);return b.useEffect(()=>{const o=window.matchMedia(t);o.matches!==n&&s(o.matches);const c=()=>s(o.matches);return o.addEventListener("change",c),()=>o.removeEventListener("change",c)},[n,t]),n},xE=()=>{const[t,n]=b.useState({x:0,y:0}),[s,o]=b.useState(!1),[c,d]=b.useState(!1),[p,h]=b.useState(!1);return b.useEffect(()=>{const m=j=>{n({x:j.clientX,y:j.clientY}),d(!0);const T=j.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');o(!!T)},g=()=>h(!0),y=()=>h(!1),v=()=>d(!1),S=()=>d(!0);return document.addEventListener("mousemove",m),document.addEventListener("mousedown",g),document.addEventListener("mouseup",y),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",S),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",y),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",S)}},[]),c?r.jsxs(r.Fragment,{children:[r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?40:12,height:s?40:12,borderRadius:"50%",background:s?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:s?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${p?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?50:32,height:s?50:32,borderRadius:"50%",border:`1.5px solid ${s?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"},animate:{x:t.x-t.x,y:t.y-t.y},transition:{type:"spring",stiffness:150,damping:15,mass:.1}})]}):null},vE=`
  /* Custom scrollbar - only for devices with fine pointer (mouse) */
  @media (pointer: fine) {
    /* Hide default cursor on landing page */
    .landing-page-custom-cursor {
      cursor: none !important;
    }
    .landing-page-custom-cursor * {
      cursor: none !important;
    }

    /* Custom Scrollbar for html/body */
    html:has(.landing-page-custom-cursor)::-webkit-scrollbar,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.landing-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.landing-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    /* Firefox scrollbar */
    html:has(.landing-page-custom-cursor),
    body:has(.landing-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  /* Touch devices - use default cursor and scrollbar */
  @media (pointer: coarse) {
    .landing-page-custom-cursor {
      cursor: auto !important;
    }
    .landing-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,Oa={page:{background:"#050505",fontFamily:'"DM Sans", sans-serif',color:"#f1f5f9",minHeight:"100vh",overflowX:"hidden"},h1:{fontFamily:'"Syne", sans-serif',color:"#ffffff",fontSize:"clamp(2.5rem, 8vw, 4.5rem)",fontWeight:700,lineHeight:1.1,marginBottom:"1.5rem"},h2:{fontFamily:'"Syne", sans-serif',color:"#f1f5f9",fontSize:"clamp(2rem, 5vw, 3rem)",fontWeight:700,lineHeight:1.2,marginBottom:"1.5rem"},h3:{fontFamily:'"Syne", sans-serif',color:"#f1f5f9",fontSize:"1.25rem",fontWeight:700,lineHeight:1.4,marginBottom:"0.75rem"},text:{color:"#94a3b8",fontSize:"1rem",lineHeight:1.7,marginBottom:0},textLarge:{color:"#94a3b8",fontSize:"1.125rem",lineHeight:1.7,marginBottom:0},gradientText:{background:"linear-gradient(135deg, #10b981 0%, #14b8a6 50%, #34d399 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"}},bE=({delay:t,duration:n,size:s,left:o,top:c})=>r.jsx(se.div,{className:"absolute rounded-full",style:{width:s,height:s,left:o,top:c,background:"radial-gradient(circle, rgba(16,185,129,0.4) 0%, transparent 70%)",filter:"blur(1px)"},animate:{y:[-20,20,-20],x:[-10,10,-10],opacity:[.3,.6,.3],scale:[1,1.2,1]},transition:{duration:n,delay:t,repeat:1/0,ease:"easeInOut"}}),Qo=({size:t,color:n,delay:s,x:o,y:c})=>r.jsx(se.div,{style:{position:"absolute",left:o,top:c},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1,y:[0,-15,0]},transition:{opacity:{duration:.6,delay:s},scale:{duration:.6,delay:s},y:{duration:3,delay:s+.5,repeat:1/0,ease:"easeInOut"}},children:r.jsxs("div",{style:{position:"relative",width:t,height:t,transformStyle:"preserve-3d",transform:"rotateX(-20deg) rotateY(45deg)"},children:[r.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(135deg, ${n} 0%, ${n}99 100%)`,transform:`translateZ(${t/2}px)`,borderRadius:8,boxShadow:`0 0 30px ${n}66`}}),r.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(180deg, ${n}cc 0%, ${n}66 100%)`,transform:`rotateX(-90deg) translateZ(${t/2}px)`,borderRadius:8}}),r.jsx("div",{style:{position:"absolute",inset:0,background:`linear-gradient(90deg, ${n}99 0%, ${n}44 100%)`,transform:`rotateY(90deg) translateZ(${t/2}px)`,borderRadius:8}})]})}),SE=({icon:t,title:n,description:s})=>r.jsx(se.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.5},whileHover:{y:-8,scale:1.02},style:{position:"relative"},children:r.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"1rem",padding:"2rem",height:"100%",background:"linear-gradient(145deg, rgba(20,20,20,0.95) 0%, rgba(10,10,10,0.98) 100%)",border:"1px solid rgba(16,185,129,0.2)"},children:[r.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"3.5rem",height:"3.5rem",borderRadius:"0.75rem",marginBottom:"1.5rem",background:"linear-gradient(135deg, rgba(16,185,129,0.2) 0%, rgba(20,184,166,0.1) 100%)",border:"1px solid rgba(16,185,129,0.3)"},children:r.jsx(t,{style:{width:"1.75rem",height:"1.75rem",color:"#34d399"}})}),r.jsx("h3",{style:Oa.h3,children:n}),r.jsx("p",{style:Oa.text,children:s})]})}),wE=()=>{const t=b.useRef(null),n=Pf("(max-width: 640px)"),s=Pf("(max-width: 1024px)"),o=Pf("(pointer: fine)");b.useEffect(()=>{const p="landing-page-custom-styles";if(!document.getElementById(p)){const h=document.createElement("style");h.id=p,h.textContent=vE,document.head.appendChild(h)}return()=>{const h=document.getElementById(p);h&&h.remove()}},[]);const c=Array.from({length:20},(p,h)=>({id:h,delay:Math.random()*2,duration:4+Math.random()*3,size:4+Math.random()*8,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`})),d=[{icon:E_,title:"Real-time Messaging",description:"Lightning-fast message delivery with live typing indicators. Your conversations flow naturally without any delays."},{icon:rr,title:"End-to-End Security",description:"Your conversations stay private with military-grade encryption. Only you and your recipients can read your messages."},{icon:jn,title:"Group Collaboration",description:"Create channels, manage groups, and share files seamlessly. Perfect for teams of any size."}];return r.jsxs("div",{ref:t,className:o?"landing-page-custom-cursor":"",style:Oa.page,children:[o&&r.jsx(xE,{}),r.jsx("div",{className:"fixed inset-0 pointer-events-none",style:{background:`
            radial-gradient(ellipse 80% 50% at 20% -10%, rgba(16,185,129,0.15) 0%, transparent 50%),
            radial-gradient(ellipse 60% 40% at 80% 10%, rgba(20,184,166,0.1) 0%, transparent 50%),
            radial-gradient(ellipse 50% 30% at 50% 100%, rgba(16,185,129,0.08) 0%, transparent 50%)
          `}}),r.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:c.map(p=>r.jsx(bE,{...p},p.id))}),r.jsx(se.nav,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},style:{position:"fixed",top:0,left:0,right:0,zIndex:50,backdropFilter:"blur(12px)",background:"rgba(5,5,5,0.85)",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:r.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"0.875rem 1rem":"1rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs(as,{to:"/",style:{display:"flex",alignItems:"center",gap:n?"0.5rem":"0.75rem",textDecoration:"none"},children:[r.jsx("div",{style:{width:n?"2rem":"2.5rem",height:n?"2rem":"2.5rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",boxShadow:"0 0 20px rgba(16,185,129,0.4)"},children:r.jsx(Al,{style:{width:n?"1rem":"1.25rem",height:n?"1rem":"1.25rem",color:"#ffffff"}})}),r.jsx("span",{style:{fontSize:n?"1rem":"1.25rem",fontWeight:700,color:"#ffffff",fontFamily:'"Syne", sans-serif'},children:"Simpchat"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:n?"0.5rem":"0.75rem"},children:[r.jsx(as,{to:"/login",style:{padding:n?"0.375rem 0.625rem":"0.5rem 1rem",fontSize:n?"0.813rem":"0.875rem",fontWeight:600,color:"#10b981",textDecoration:"none",borderRadius:"0.5rem",transition:"all 0.2s ease"},children:"Sign In"}),r.jsx(as,{to:"/register",style:{display:"inline-flex",alignItems:"center",gap:"0.375rem",padding:n?"0.5rem 0.875rem":"0.625rem 1.25rem",fontSize:n?"0.813rem":"0.875rem",fontWeight:600,borderRadius:"0.5rem",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",color:"#050505",textDecoration:"none",boxShadow:"0 0 20px rgba(16,185,129,0.3)",transition:"all 0.2s ease"},children:"Get Started"})]})]})}),r.jsxs("section",{style:{position:"relative",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"5rem"},children:[r.jsx("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"3rem 1rem":"5rem 1.5rem"},children:r.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"repeat(2, 1fr)",gap:s?"2rem":"4rem",alignItems:"center"},children:[r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx(se.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},style:{marginBottom:"1.5rem"},children:r.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:500,background:"rgba(16,185,129,0.1)",border:"1px solid rgba(16,185,129,0.3)",color:"#10b981"},children:[r.jsx(Jf,{style:{width:"1rem",height:"1rem"}}),"Simple. Secure. Seamless."]})}),r.jsxs(se.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},style:Oa.h1,children:[r.jsx("span",{style:{color:"#ffffff"},children:"Connect."}),r.jsx("br",{}),r.jsx("span",{style:Oa.gradientText,children:"Chat."}),r.jsx("br",{}),r.jsx("span",{style:{color:"#ffffff"},children:"Simplify."})]}),r.jsx(se.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},style:{...Oa.textLarge,marginBottom:"2.5rem",maxWidth:"32rem",margin:"0 auto 2.5rem auto"},children:"Experience real-time messaging reimagined. Simpchat brings you instant communication with uncompromising security and elegant simplicity."}),r.jsxs(se.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},style:{display:"flex",flexDirection:"row",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[r.jsxs(as,{to:"/register",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.875rem 1.75rem",fontSize:"0.938rem",fontWeight:600,borderRadius:"0.75rem",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",color:"#050505",boxShadow:"0 0 25px rgba(16,185,129,0.35)",textDecoration:"none",transition:"all 0.3s ease"},children:["Start Chatting Free",r.jsx(yi,{style:{width:"1.125rem",height:"1.125rem"}})]}),r.jsx(as,{to:"/login",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.875rem 1.75rem",fontSize:"0.938rem",fontWeight:600,borderRadius:"0.75rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.15)",color:"#f1f5f9",textDecoration:"none",transition:"all 0.3s ease"},children:"Open App"})]}),r.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.7},style:{display:"flex",flexDirection:n?"column":"row",alignItems:"center",gap:n?"0.75rem":"2rem",marginTop:"2.5rem",justifyContent:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Ph,{style:{width:"1rem",height:"1rem",color:"#34d399"}}),r.jsx("span",{style:{fontSize:n?"0.813rem":"0.875rem",color:"#64748b"},children:"End-to-end encrypted"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(Hh,{style:{width:"1rem",height:"1rem",color:"#34d399"}}),r.jsx("span",{style:{fontSize:n?"0.813rem":"0.875rem",color:"#64748b"},children:"Real-time notifications"})]})]})]}),!s&&r.jsx("div",{style:{position:"relative",height:"500px",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:[r.jsx("div",{style:{position:"absolute",width:"20rem",height:"20rem",borderRadius:"50%",background:"radial-gradient(circle, rgba(16,185,129,0.25) 0%, transparent 70%)",filter:"blur(40px)"}}),r.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",perspective:"1000px"},children:[r.jsx(Qo,{size:100,color:"#10b981",delay:0,x:180,y:120}),r.jsx(Qo,{size:70,color:"#14b8a6",delay:.2,x:280,y:180}),r.jsx(Qo,{size:50,color:"#34d399",delay:.4,x:220,y:250}),r.jsx(Qo,{size:80,color:"#10b981",delay:.3,x:120,y:200}),r.jsx(Qo,{size:60,color:"#0d9488",delay:.5,x:300,y:280}),r.jsx(Qo,{size:40,color:"#14b8a6",delay:.6,x:160,y:300})]}),r.jsx(se.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.8},style:{position:"absolute",top:"25%",right:"2.5rem"},children:r.jsx("div",{style:{padding:"1rem 1.5rem",borderRadius:"1rem",borderBottomRightRadius:"0.375rem",background:"linear-gradient(135deg, rgba(16,185,129,0.2) 0%, rgba(16,185,129,0.1) 100%)",border:"1px solid rgba(16,185,129,0.3)",backdropFilter:"blur(10px)"},children:r.jsx("p",{style:{fontSize:"0.875rem",fontWeight:500,color:"#6ee7b7",margin:0},children:"Hey! Welcome to Simpchat"})})}),r.jsx(se.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:1},style:{position:"absolute",bottom:"25%",left:"2.5rem"},children:r.jsx("div",{style:{padding:"1rem 1.5rem",borderRadius:"1rem",borderBottomLeftRadius:"0.375rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",backdropFilter:"blur(10px)"},children:r.jsx("p",{style:{fontSize:"0.875rem",fontWeight:500,color:"#cbd5e1",margin:0},children:"Thanks! This is amazing"})})})]})})]})}),r.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2},style:{position:"absolute",bottom:"2.5rem",left:"50%",transform:"translateX(-50%)",cursor:"pointer"},onClick:()=>document.getElementById("features")?.scrollIntoView({behavior:"smooth"}),children:[r.jsx(se.div,{animate:{y:[0,10,0]},transition:{duration:1.5,repeat:1/0},style:{width:"2rem",height:"3.5rem",borderRadius:"9999px",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:"0.625rem",border:"2px solid rgba(255,255,255,0.25)",background:"rgba(255,255,255,0.03)"},children:r.jsx(se.div,{animate:{y:[0,8,0],opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},style:{width:"0.5rem",height:"1rem",borderRadius:"9999px",background:"linear-gradient(180deg, #10b981 0%, #14b8a6 100%)",boxShadow:"0 0 8px rgba(16,185,129,0.5)"}})}),r.jsx("p",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.4)",marginTop:"0.5rem",textAlign:"center",fontWeight:500},children:"Scroll"})]})]}),r.jsx("section",{id:"features",style:{position:"relative",padding:n?"4rem 0":"8rem 0"},children:r.jsxs("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"0 1rem":"0 1.5rem"},children:[r.jsxs(se.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},style:{textAlign:"center",marginBottom:"4rem"},children:[r.jsxs("h2",{style:Oa.h2,children:["Built for"," ",r.jsx("span",{style:Oa.gradientText,children:"Modern Teams"})]}),r.jsx("p",{style:{...Oa.textLarge,maxWidth:"42rem",margin:"0 auto"},children:"Everything you need for seamless communication, wrapped in an elegant interface that stays out of your way."})]}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:n?"1fr":"repeat(auto-fit, minmax(300px, 1fr))",gap:n?"1rem":"1.5rem"},children:d.map((p,h)=>r.jsx(SE,{...p,index:h},p.title))})]})}),r.jsx("section",{style:{position:"relative",padding:n?"4rem 0":"8rem 0"},children:r.jsx("div",{style:{maxWidth:"56rem",margin:"0 auto",padding:n?"0 1rem":"0 1.5rem",textAlign:"center"},children:r.jsxs(se.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},style:{position:"relative",borderRadius:n?"1rem":"1.5rem",padding:n?"2.5rem 1.5rem":"4rem 3rem",overflow:"hidden",background:"linear-gradient(145deg, rgba(16,185,129,0.1) 0%, rgba(5,5,5,0.9) 100%)",border:"1px solid rgba(16,185,129,0.2)"},children:[r.jsx("div",{style:{position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",width:"100%",height:"50%",background:"radial-gradient(ellipse at center top, rgba(16,185,129,0.15) 0%, transparent 70%)"}}),r.jsx("h2",{style:{...Oa.h2,position:"relative"},children:"Ready to simplify your conversations?"}),r.jsx("p",{style:{...Oa.textLarge,position:"relative",maxWidth:"32rem",margin:"0 auto 2.5rem auto"},children:"Join thousands of users who have already made the switch to simpler, more secure messaging."}),r.jsxs(as,{to:"/register",style:{position:"relative",display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",fontSize:"1rem",fontWeight:600,borderRadius:"0.75rem",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",color:"#050505",boxShadow:"0 0 40px rgba(16,185,129,0.4)",textDecoration:"none"},children:["Get Started  It's Free",r.jsx(yi,{style:{width:"1.25rem",height:"1.25rem"}})]})]})})}),r.jsx("footer",{style:{position:"relative",padding:n?"2rem 0":"3rem 0",borderTop:"1px solid rgba(255,255,255,0.05)"},children:r.jsx("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:n?"0 1rem":"0 1.5rem"},children:r.jsxs("div",{style:{display:"flex",flexDirection:n?"column":"row",alignItems:"center",justifyContent:n?"center":"space-between",gap:n?"1rem":"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"2rem",height:"2rem",borderRadius:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)"},children:r.jsx(Al,{style:{width:"1rem",height:"1rem",color:"#ffffff"}})}),r.jsx("span",{style:{fontSize:"1.125rem",fontWeight:700,color:"#ffffff",fontFamily:'"Syne", sans-serif'},children:"Simpchat"})]}),r.jsxs("p",{style:{fontSize:"0.875rem",color:"#64748b",margin:0},children:[" ",new Date().getFullYear()," Simpchat. All rights reserved."]})]})})})]})},_E="_authContainer_1u6uv_47",CE="_orb_1u6uv_99",jE="_orb1_1u6uv_117",TE="_orb2_1u6uv_135",kE="_orb3_1u6uv_153",ME="_authCard_1u6uv_175",EE="_header_1u6uv_213",AE="_iconWrapper_1u6uv_225",RE="_title_1u6uv_257",DE="_subtitle_1u6uv_277",NE="_errorAlert_1u6uv_293",zE="_successAlert_1u6uv_343",BE="_form_1u6uv_393",UE="_inputGroup_1u6uv_401",IE="_label_1u6uv_409",OE="_inputWrapper_1u6uv_425",LE="_input_1u6uv_401",PE="_inputPassword_1u6uv_507",HE="_togglePassword_1u6uv_515",$E="_forgotLink_1u6uv_555",FE="_submitBtn_1u6uv_599",VE="_footer_1u6uv_689",qE="_backBtn_1u6uv_747",GE="_verifiedBadge_1u6uv_789",WE="_otpInput_1u6uv_837",YE="_resendSection_1u6uv_855",XE="_resendBtn_1u6uv_879",KE="_spinner_1u6uv_923",q={authContainer:_E,orb:CE,orb1:jE,orb2:TE,orb3:kE,authCard:ME,header:EE,iconWrapper:AE,title:RE,subtitle:DE,errorAlert:NE,successAlert:zE,form:BE,inputGroup:UE,label:IE,inputWrapper:OE,input:LE,inputPassword:PE,togglePassword:HE,forgotLink:$E,submitBtn:FE,footer:VE,backBtn:qE,verifiedBadge:GE,otpInput:WE,resendSection:YE,resendBtn:XE,spinner:KE},QE=()=>{const t=Lh(),{login:n,isLoading:s,error:o,clearError:c}=Wl(),[d,p]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState(!1),v=async S=>{S.preventDefault(),c();try{console.log("[LoginForm] Starting login..."),await n({credential:d,password:h});const j=jt.getState();console.log("[LoginForm] Login successful. Auth state:",{hasToken:!!j.token,hasUser:!!j.user,isLoading:j.isLoading}),j.token&&j.user?(console.log("[LoginForm] Auth state verified, navigating to dashboard..."),t("/dashboard-new")):console.error("[LoginForm] Login completed but auth state not set!")}catch(j){console.error("[LoginForm] Login error:",j)}};return r.jsxs("div",{className:q.authContainer,children:[r.jsx("div",{className:`${q.orb} ${q.orb1}`}),r.jsx("div",{className:`${q.orb} ${q.orb2}`}),r.jsx("div",{className:`${q.orb} ${q.orb3}`}),r.jsxs("div",{className:q.authCard,children:[r.jsxs("div",{className:q.header,children:[r.jsx("div",{className:q.iconWrapper,children:r.jsx(Al,{size:32,color:"#ffffff"})}),r.jsx("h1",{className:q.title,children:"Sign In"}),r.jsx("p",{className:q.subtitle,children:"Welcome back to Simpchat"})]}),o&&r.jsxs("div",{className:q.errorAlert,children:[r.jsx(Ds,{size:20}),r.jsx("p",{children:o})]}),r.jsxs("form",{onSubmit:v,className:q.form,children:[r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"credential",className:q.label,children:"Email or Username"}),r.jsx("input",{id:"credential",type:"text",value:d,onChange:S=>p(S.target.value),placeholder:"john@example.com",required:!0,disabled:s,className:q.input})]}),r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"password",className:q.label,children:"Password"}),r.jsxs("div",{className:q.inputWrapper,children:[r.jsx("input",{id:"password",type:g?"text":"password",value:h,onChange:S=>m(S.target.value),placeholder:"",required:!0,disabled:s,className:`${q.input} ${q.inputPassword}`}),r.jsx("button",{type:"button",onClick:()=>y(!g),disabled:s,className:q.togglePassword,children:g?r.jsx(Rl,{size:20}):r.jsx(lr,{size:20})})]})]}),r.jsx("div",{className:q.forgotLink,children:r.jsx(as,{to:"/forgot-password",children:"Forgot password?"})}),r.jsx("button",{type:"submit",disabled:s||!d||!h,className:q.submitBtn,children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:q.spinner}),"Signing in..."]}):r.jsxs(r.Fragment,{children:["Sign In",r.jsx(yi,{size:20})]})})]}),r.jsxs("div",{className:q.footer,children:[r.jsx("p",{children:"Don't have an account?"}),r.jsx(as,{to:"/register",children:"Create Account "})]})]})]})},ZE=t=>{const[n,s]=b.useState(!1);return b.useEffect(()=>{const o=window.matchMedia(t);o.matches!==n&&s(o.matches);const c=()=>s(o.matches);return o.addEventListener("change",c),()=>o.removeEventListener("change",c)},[n,t]),n},JE=()=>{const[t,n]=b.useState({x:0,y:0}),[s,o]=b.useState(!1),[c,d]=b.useState(!1),[p,h]=b.useState(!1);return b.useEffect(()=>{const m=j=>{n({x:j.clientX,y:j.clientY}),d(!0);const T=j.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');o(!!T)},g=()=>h(!0),y=()=>h(!1),v=()=>d(!1),S=()=>d(!0);return document.addEventListener("mousemove",m),document.addEventListener("mousedown",g),document.addEventListener("mouseup",y),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",S),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",y),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",S)}},[]),c?r.jsxs(r.Fragment,{children:[r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?40:12,height:s?40:12,borderRadius:"50%",background:s?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:s?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${p?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?50:32,height:s?50:32,borderRadius:"50%",border:`1.5px solid ${s?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"}})]}):null},eA=`
  @media (pointer: fine) {
    .auth-page-custom-cursor {
      cursor: none !important;
    }
    .auth-page-custom-cursor * {
      cursor: none !important;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    html:has(.auth-page-custom-cursor),
    body:has(.auth-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  @media (pointer: coarse) {
    .auth-page-custom-cursor {
      cursor: auto !important;
    }
    .auth-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,tA=()=>{const t=ZE("(pointer: fine)");return b.useEffect(()=>{const n="auth-page-custom-styles";if(!document.getElementById(n)){const s=document.createElement("style");s.id=n,s.textContent=eA,document.head.appendChild(s)}return()=>{const s=document.getElementById(n);s&&s.remove()}},[]),r.jsxs("div",{className:t?"auth-page-custom-cursor":"",children:[t&&r.jsx(JE,{}),r.jsx(QE,{})]})},Mm=t=>{const n=typeof t=="string"?new Date(t):t,o=new Date().getTime()-n.getTime(),c=Math.floor(o/6e4),d=Math.floor(o/36e5),p=Math.floor(o/864e5);return c<1?"just now":c<60?`${c}m ago`:d<24?`${d}h ago`:p<7?`${p}d ago`:n.toLocaleDateString()},nA=t=>(typeof t=="string"?new Date(t):t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),P0=(t,n)=>t.length<=n?t:t.substring(0,n)+"...",An=t=>{if(!t||t==="undefined"||t==="null")return"?";const n=String(t).trim();if(!n||n.length===0)return"?";const s=n.split(/\s+/).filter(o=>o.length>0);return s.length===0?"?":s.length===1?s[0][0]?.toUpperCase()||"?":s.map(o=>o[0]).join("").toUpperCase().slice(0,2)||"?"},ES=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),mt=t=>{if(t)return t.replace("simpchat.filestorage:9000","localhost:9000").replace("localhost:9000","localhost:9000")},Hd=t=>{if(!t)return"Unknown";const n=new Date(t),o=new Date().getTime()-n.getTime(),c=Math.floor(o/6e4),d=Math.floor(o/36e5),p=Math.floor(o/864e5);if(c<1)return"just now";if(c===1)return"1 minute ago";if(c<60)return`${c} minutes ago`;if(d===1)return"1 hour ago";if(d<24)return`${d} hours ago`;if(p===1)return`Yesterday at ${n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`;if(p<7){const h=n.toLocaleDateString([],{weekday:"long"}),m=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`${h} at ${m}`}return n.toLocaleDateString([],{month:"short",day:"numeric",year:"numeric"})},aA=()=>{const t=Lh(),{register:n,isLoading:s}=Wl(),[o,c]=b.useState("email"),[d,p]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState(""),[v,S]=b.useState(""),[j,C]=b.useState(""),[T,E]=b.useState(!1),[z,L]=b.useState(!1),[R,Y]=b.useState(""),[P,te]=b.useState(!1),re=async me=>{if(me.preventDefault(),Y(""),!ES(d)){Y("Please enter a valid email address");return}te(!0);try{await gi.sendOTP(d),c("complete")}catch(He){Y(Tn(He,"Failed to send verification code"))}finally{te(!1)}},K=async me=>{if(me.preventDefault(),Y(""),!h.trim()){Y("Username is required");return}if(h.length<3){Y("Username must be at least 3 characters");return}if(g.length<5){Y("Password must be at least 5 characters");return}if(g!==v){Y("Passwords do not match");return}if(!j.trim()){Y("Verification code is required");return}try{console.log("[RegisterForm] Registering user..."),await n(d,h,g,j);const He=jt.getState();console.log("[RegisterForm] Registration successful. Auth state:",{hasToken:!!He.token,hasUser:!!He.user,isLoading:He.isLoading}),He.token&&He.user?(console.log("[RegisterForm] Auth state verified, navigating to dashboard..."),t("/dashboard-new")):console.error("[RegisterForm] Registration completed but auth state not set!")}catch(He){Y(Tn(He,"Registration failed"))}},ge=async()=>{Y(""),te(!0);try{await gi.sendOTP(d)}catch(me){Y(Tn(me,"Failed to resend code"))}finally{te(!1)}};return o==="email"?r.jsxs("div",{className:q.authContainer,children:[r.jsx("div",{className:`${q.orb} ${q.orb1}`}),r.jsx("div",{className:`${q.orb} ${q.orb2}`}),r.jsx("div",{className:`${q.orb} ${q.orb3}`}),r.jsxs("div",{className:q.authCard,children:[r.jsxs("div",{className:q.header,children:[r.jsx("div",{className:q.iconWrapper,children:r.jsx(Al,{size:32,color:"#ffffff"})}),r.jsx("h1",{className:q.title,children:"Create Account"}),r.jsx("p",{className:q.subtitle,children:"Join Simpchat today"})]}),R&&r.jsxs("div",{className:q.errorAlert,children:[r.jsx(Ds,{size:20}),r.jsx("p",{children:R})]}),r.jsxs("form",{onSubmit:re,className:q.form,children:[r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"email",className:q.label,children:"Email Address"}),r.jsx("input",{id:"email",type:"email",value:d,onChange:me=>p(me.target.value),placeholder:"you@example.com",required:!0,disabled:P,className:q.input})]}),r.jsx("button",{type:"submit",disabled:P||!d,className:q.submitBtn,children:P?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:q.spinner}),"Sending..."]}):r.jsxs(r.Fragment,{children:["Continue",r.jsx(yi,{size:20})]})})]}),r.jsxs("div",{className:q.footer,children:[r.jsx("p",{children:"Already have an account?"}),r.jsx(as,{to:"/login",children:"Sign In "})]})]})]}):r.jsxs("div",{className:q.authContainer,children:[r.jsx("div",{className:`${q.orb} ${q.orb1}`}),r.jsx("div",{className:`${q.orb} ${q.orb2}`}),r.jsx("div",{className:`${q.orb} ${q.orb3}`}),r.jsxs("div",{className:q.authCard,children:[r.jsxs("div",{className:q.header,style:{textAlign:"left"},children:[r.jsxs("button",{onClick:()=>c("email"),className:q.backBtn,children:[r.jsx(vb,{size:16}),"Back"]}),r.jsx("h1",{className:q.title,style:{textAlign:"left"},children:"Complete Profile"}),r.jsxs("div",{className:q.verifiedBadge,children:[r.jsx(eh,{size:16}),r.jsxs("p",{children:["Email verified: ",d]})]})]}),R&&r.jsxs("div",{className:q.errorAlert,children:[r.jsx(Ds,{size:20}),r.jsx("p",{children:R})]}),r.jsxs("form",{onSubmit:K,className:q.form,children:[r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"username",className:q.label,children:"Username"}),r.jsx("input",{id:"username",type:"text",value:h,onChange:me=>m(me.target.value),placeholder:"johndoe",required:!0,disabled:s,className:q.input})]}),r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"password",className:q.label,children:"Password"}),r.jsxs("div",{className:q.inputWrapper,children:[r.jsx("input",{id:"password",type:T?"text":"password",value:g,onChange:me=>y(me.target.value),placeholder:"",required:!0,disabled:s,className:`${q.input} ${q.inputPassword}`}),r.jsx("button",{type:"button",onClick:()=>E(!T),disabled:s,className:q.togglePassword,children:T?r.jsx(Rl,{size:20}):r.jsx(lr,{size:20})})]})]}),r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"confirm-password",className:q.label,children:"Confirm Password"}),r.jsxs("div",{className:q.inputWrapper,children:[r.jsx("input",{id:"confirm-password",type:z?"text":"password",value:v,onChange:me=>S(me.target.value),placeholder:"",required:!0,disabled:s,className:`${q.input} ${q.inputPassword}`}),r.jsx("button",{type:"button",onClick:()=>L(!z),disabled:s,className:q.togglePassword,children:z?r.jsx(Rl,{size:20}):r.jsx(lr,{size:20})})]})]}),r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"otp-code",className:q.label,children:"Verification Code"}),r.jsx("input",{id:"otp-code",type:"text",value:j,onChange:me=>C(me.target.value),placeholder:"000000",required:!0,disabled:s,className:`${q.input} ${q.otpInput}`})]}),r.jsx("button",{type:"submit",disabled:s||!h||!g||!v||!j,className:q.submitBtn,children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:q.spinner}),"Creating..."]}):r.jsxs(r.Fragment,{children:["Create Account",r.jsx(yi,{size:20})]})})]}),r.jsxs("div",{className:q.resendSection,children:[r.jsx("p",{children:"Didn't get the code?"}),r.jsx("button",{onClick:ge,disabled:P,className:q.resendBtn,children:P?"Resending...":"Resend Code"})]})]})]})},sA=t=>{const[n,s]=b.useState(!1);return b.useEffect(()=>{const o=window.matchMedia(t);o.matches!==n&&s(o.matches);const c=()=>s(o.matches);return o.addEventListener("change",c),()=>o.removeEventListener("change",c)},[n,t]),n},iA=()=>{const[t,n]=b.useState({x:0,y:0}),[s,o]=b.useState(!1),[c,d]=b.useState(!1),[p,h]=b.useState(!1);return b.useEffect(()=>{const m=j=>{n({x:j.clientX,y:j.clientY}),d(!0);const T=j.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');o(!!T)},g=()=>h(!0),y=()=>h(!1),v=()=>d(!1),S=()=>d(!0);return document.addEventListener("mousemove",m),document.addEventListener("mousedown",g),document.addEventListener("mouseup",y),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",S),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",y),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",S)}},[]),c?r.jsxs(r.Fragment,{children:[r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?40:12,height:s?40:12,borderRadius:"50%",background:s?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:s?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${p?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?50:32,height:s?50:32,borderRadius:"50%",border:`1.5px solid ${s?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"}})]}):null},oA=`
  @media (pointer: fine) {
    .auth-page-custom-cursor {
      cursor: none !important;
    }
    .auth-page-custom-cursor * {
      cursor: none !important;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    html:has(.auth-page-custom-cursor),
    body:has(.auth-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  @media (pointer: coarse) {
    .auth-page-custom-cursor {
      cursor: auto !important;
    }
    .auth-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,rA=()=>{const t=sA("(pointer: fine)");return b.useEffect(()=>{const n="auth-page-custom-styles";if(!document.getElementById(n)){const s=document.createElement("style");s.id=n,s.textContent=oA,document.head.appendChild(s)}return()=>{const s=document.getElementById(n);s&&s.remove()}},[]),r.jsxs("div",{className:t?"auth-page-custom-cursor":"",children:[t&&r.jsx(iA,{}),r.jsx(aA,{})]})},lA=()=>{const t=Lh(),[n,s]=b.useState("email"),[o,c]=b.useState(""),[d,p]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState(""),[v,S]=b.useState(!1),[j,C]=b.useState(!1),[T,E]=b.useState(""),[z,L]=b.useState(""),[R,Y]=b.useState(!1),P=async K=>{if(K.preventDefault(),E(""),!ES(o)){E("Please enter a valid email address");return}Y(!0);try{await gi.sendOTP(o),s("reset")}catch(ge){E(Tn(ge,"Failed to send verification code"))}finally{Y(!1)}},te=async K=>{if(K.preventDefault(),E(""),L(""),d.length<5){E("Password must be at least 5 characters");return}if(d!==h){E("Passwords do not match");return}if(!g.trim()){E("Verification code is required");return}Y(!0);try{await gi.resetPasswordByEmail(o,d,g),L("Password reset successfully! Redirecting to login..."),setTimeout(()=>{t("/login")},2e3)}catch(ge){E(Tn(ge,"Failed to reset password"))}finally{Y(!1)}},re=async()=>{E(""),Y(!0);try{await gi.sendOTP(o)}catch(K){E(Tn(K,"Failed to resend code"))}finally{Y(!1)}};return n==="email"?r.jsxs("div",{className:q.authContainer,children:[r.jsx("div",{className:`${q.orb} ${q.orb1}`}),r.jsx("div",{className:`${q.orb} ${q.orb2}`}),r.jsx("div",{className:`${q.orb} ${q.orb3}`}),r.jsxs("div",{className:q.authCard,children:[r.jsxs("div",{className:q.header,children:[r.jsx("div",{className:q.iconWrapper,children:r.jsx(A_,{size:32,color:"#ffffff"})}),r.jsx("h1",{className:q.title,children:"Forgot Password"}),r.jsx("p",{className:q.subtitle,children:"Enter your email to reset your password"})]}),T&&r.jsxs("div",{className:q.errorAlert,children:[r.jsx(Ds,{size:20}),r.jsx("p",{children:T})]}),r.jsxs("form",{onSubmit:P,className:q.form,children:[r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"email",className:q.label,children:"Email Address"}),r.jsx("input",{id:"email",type:"email",value:o,onChange:K=>c(K.target.value),placeholder:"you@example.com",required:!0,disabled:R,className:q.input})]}),r.jsx("button",{type:"submit",disabled:R||!o,className:q.submitBtn,children:R?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:q.spinner}),"Sending..."]}):r.jsxs(r.Fragment,{children:["Send Reset Code",r.jsx(yi,{size:20})]})})]}),r.jsxs("div",{className:q.footer,children:[r.jsx("p",{children:"Remember your password?"}),r.jsx(as,{to:"/login",children:"Back to Sign In "})]})]})]}):r.jsxs("div",{className:q.authContainer,children:[r.jsx("div",{className:`${q.orb} ${q.orb1}`}),r.jsx("div",{className:`${q.orb} ${q.orb2}`}),r.jsx("div",{className:`${q.orb} ${q.orb3}`}),r.jsxs("div",{className:q.authCard,children:[r.jsxs("div",{className:q.header,style:{textAlign:"left"},children:[r.jsxs("button",{onClick:()=>s("email"),className:q.backBtn,children:[r.jsx(vb,{size:16}),"Back"]}),r.jsx("h1",{className:q.title,style:{textAlign:"left"},children:"Reset Password"}),r.jsxs("div",{className:q.verifiedBadge,children:[r.jsx(eh,{size:16}),r.jsxs("p",{children:["Code sent to: ",o]})]})]}),z&&r.jsxs("div",{className:q.successAlert,children:[r.jsx(eh,{size:20}),r.jsx("p",{children:z})]}),T&&r.jsxs("div",{className:q.errorAlert,children:[r.jsx(Ds,{size:20}),r.jsx("p",{children:T})]}),r.jsxs("form",{onSubmit:te,className:q.form,children:[r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"password",className:q.label,children:"New Password"}),r.jsxs("div",{className:q.inputWrapper,children:[r.jsx("input",{id:"password",type:v?"text":"password",value:d,onChange:K=>p(K.target.value),placeholder:"",required:!0,disabled:R||!!z,className:`${q.input} ${q.inputPassword}`}),r.jsx("button",{type:"button",onClick:()=>S(!v),disabled:R||!!z,className:q.togglePassword,children:v?r.jsx(Rl,{size:20}):r.jsx(lr,{size:20})})]})]}),r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"confirm-password",className:q.label,children:"Confirm New Password"}),r.jsxs("div",{className:q.inputWrapper,children:[r.jsx("input",{id:"confirm-password",type:j?"text":"password",value:h,onChange:K=>m(K.target.value),placeholder:"",required:!0,disabled:R||!!z,className:`${q.input} ${q.inputPassword}`}),r.jsx("button",{type:"button",onClick:()=>C(!j),disabled:R||!!z,className:q.togglePassword,children:j?r.jsx(Rl,{size:20}):r.jsx(lr,{size:20})})]})]}),r.jsxs("div",{className:q.inputGroup,children:[r.jsx("label",{htmlFor:"otp-code",className:q.label,children:"Verification Code"}),r.jsx("input",{id:"otp-code",type:"text",value:g,onChange:K=>y(K.target.value),placeholder:"000000",required:!0,disabled:R||!!z,className:`${q.input} ${q.otpInput}`})]}),r.jsx("button",{type:"submit",disabled:R||!d||!h||!g||!!z,className:q.submitBtn,children:R?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:q.spinner}),"Resetting..."]}):r.jsxs(r.Fragment,{children:["Reset Password",r.jsx(yi,{size:20})]})})]}),!z&&r.jsxs("div",{className:q.resendSection,children:[r.jsx("p",{children:"Didn't get the code?"}),r.jsx("button",{onClick:re,disabled:R,className:q.resendBtn,children:R?"Resending...":"Resend Code"})]})]})]})},cA=t=>{const[n,s]=b.useState(!1);return b.useEffect(()=>{const o=window.matchMedia(t);o.matches!==n&&s(o.matches);const c=()=>s(o.matches);return o.addEventListener("change",c),()=>o.removeEventListener("change",c)},[n,t]),n},dA=()=>{const[t,n]=b.useState({x:0,y:0}),[s,o]=b.useState(!1),[c,d]=b.useState(!1),[p,h]=b.useState(!1);return b.useEffect(()=>{const m=j=>{n({x:j.clientX,y:j.clientY}),d(!0);const T=j.target.closest('a, button, [role="button"], input, textarea, select, [onclick]');o(!!T)},g=()=>h(!0),y=()=>h(!1),v=()=>d(!1),S=()=>d(!0);return document.addEventListener("mousemove",m),document.addEventListener("mousedown",g),document.addEventListener("mouseup",y),document.addEventListener("mouseleave",v),document.addEventListener("mouseenter",S),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",g),document.removeEventListener("mouseup",y),document.removeEventListener("mouseleave",v),document.removeEventListener("mouseenter",S)}},[]),c?r.jsxs(r.Fragment,{children:[r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?40:12,height:s?40:12,borderRadius:"50%",background:s?"rgba(16, 185, 129, 0.15)":"linear-gradient(135deg, #10b981 0%, #14b8a6 100%)",border:s?"2px solid rgba(16, 185, 129, 0.6)":"none",pointerEvents:"none",zIndex:9999,transform:`translate(-50%, -50%) scale(${p?.8:1})`,transition:"width 0.2s ease, height 0.2s ease, background 0.2s ease, border 0.2s ease, transform 0.1s ease",mixBlendMode:"difference"}}),r.jsx(se.div,{style:{position:"fixed",left:t.x,top:t.y,width:s?50:32,height:s?50:32,borderRadius:"50%",border:`1.5px solid ${s?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.5)"}`,pointerEvents:"none",zIndex:9998,transform:"translate(-50%, -50%)",transition:"width 0.3s ease, height 0.3s ease, border 0.2s ease"}})]}):null},uA=`
  @media (pointer: fine) {
    .auth-page-custom-cursor {
      cursor: none !important;
    }
    .auth-page-custom-cursor * {
      cursor: none !important;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar {
      width: 12px;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-track,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-track {
      background: #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
      border-radius: 6px;
      border: 3px solid #050505;
    }

    html:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover,
    body:has(.auth-page-custom-cursor)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
    }

    html:has(.auth-page-custom-cursor),
    body:has(.auth-page-custom-cursor) {
      scrollbar-width: thin;
      scrollbar-color: #10b981 #050505;
    }
  }

  @media (pointer: coarse) {
    .auth-page-custom-cursor {
      cursor: auto !important;
    }
    .auth-page-custom-cursor * {
      cursor: auto !important;
    }
  }
`,pA=()=>{const t=cA("(pointer: fine)");return b.useEffect(()=>{const n="auth-page-custom-styles";if(!document.getElementById(n)){const s=document.createElement("style");s.id=n,s.textContent=uA,document.head.appendChild(s)}return()=>{const s=document.getElementById(n);s&&s.remove()}},[]),r.jsxs("div",{className:t?"auth-page-custom-cursor":"",children:[t&&r.jsx(dA,{}),r.jsx(lA,{})]})},fA=t=>{if(!t)return"channel";const n=String(t).toLowerCase().trim();return n==="conversation"||n==="dm"||n==="directmessage"?"dm":n==="group"?"group":(n==="channel"||console.warn("[Normalizer] Unknown chat type:",t,"defaulting to channel"),"channel")},Cl=t=>{if(!t)return{};console.log("[Normalizer] Raw chat data:",{id:t.id,name:t.name,participantsCount:t.participantsCount,ParticipantsCount:t.ParticipantsCount,membersLength:t.members?.length});let n;t.privacy!==null&&t.privacy!==void 0&&(typeof t.privacy=="number"?n=t.privacy===0?"public":"private":typeof t.privacy=="string"&&(n=t.privacy.toLowerCase()));const s={id:t.id,name:t.name||"Unknown",type:fA(t.type),avatar:mt(t.avatarUrl||t.AvatarUrl||t.avatar||t.profileImage),description:t.description||"",privacy:n,members:(t.members||[]).map(o=>{const c=o.user?{...o.user,id:o.user.id||o.user.userId||o.userId,avatar:mt(o.user.avatarUrl||o.user.AvatarUrl||o.user.avatar||o.user.profileImage)}:{id:o.userId||o.id,username:o.username||"Unknown",email:"",avatar:mt(o.avatarUrl||o.AvatarUrl||o.avatar),onlineStatus:"offline",lastSeen:new Date().toISOString()};return{id:o.id||o.userId||o.user?.id,userId:o.userId||o.id||o.user?.id,user:c,joinedAt:o.joinedAt,role:o.role||"member"}}),lastMessage:t.lastMessage?{id:t.lastMessage.id,content:t.lastMessage.content,createdAt:t.lastMessage.createdAt||t.lastMessage.sentAt||new Date().toISOString(),senderId:t.lastMessage.senderId,senderUsername:t.lastMessage.senderUsername,fileUrl:mt(t.lastMessage.fileUrl),replyId:t.lastMessage.replyId,isSeen:t.lastMessage.isSeen??!1}:void 0,unreadCount:t.unreadCount!==void 0?t.unreadCount:t.notificationsCount||0,createdAt:t.created||t.createdAt||new Date().toISOString(),updatedAt:t.userLastMessage||t.updatedAt||t.createdAt||new Date().toISOString(),messages:t.messages?t.messages.map(o=>({...o,fileUrl:mt(o.fileUrl),senderAvatarUrl:mt(o.senderAvatarUrl),isSeen:o.isSeen??o.IsSeen??!1,seenAt:o.seenAt??o.SeenAt,isCurrentUser:o.isCurrentUser??o.IsCurrentUser??!1})):void 0,participantsCount:t.participantsCount??t.ParticipantsCount,participantsOnline:t.participantsOnline??t.ParticipantsOnline,notificationsCount:t.notificationsCount??t.NotificationsCount,isOnline:t.isOnline??t.IsOnline??!1,createdById:t.createdById??t.CreatedById??t.ownerId??t.OwnerId};return console.log("[Normalizer] Normalized chat result:",{id:s.id,name:s.name,participantsCount:s.participantsCount,createdById:s.createdById,membersCount:s.members?.length}),s},Eh=t=>{if(!t)return{};console.log("[Normalizer] Normalizing user:",t),console.log("[Normalizer] User description fields:",{description:t.description,Description:t.Description,bio:t.bio});const n=t.userId||t.id||t.entityId||t.EntityId;let s="offline";return typeof t.onlineStatus=="string"?s=t.onlineStatus.toLowerCase()||"offline":typeof t.isOnline=="boolean"&&(s=t.isOnline?"online":"offline"),{id:n,username:t.username||t.displayName||t.name||"Unknown",email:t.email||"",avatar:mt(t.avatarUrl||t.AvatarUrl||t.avatar||t.profileImage),bio:t.description||t.Description||t.bio||"",onlineStatus:s,lastSeen:t.lastSeen||new Date().toISOString(),addMePolicy:t.addMePolicy||"everyone"}},hA=t=>Array.isArray(t)?t.map(n=>Cl(n)):(console.warn("[Normalizer] Expected array of chats, got:",typeof t),[]),H0=t=>Array.isArray(t)?t.map(n=>Eh(n)):(console.warn("[Normalizer] Expected array of users, got:",typeof t),[]),Ee={getAllChats:async()=>{const t=await Ne.get("/chats/me");console.log("[ChatService] Raw API response:",t.data);const n=t.data?.data||t.data;console.log("[ChatService] Extracted rawChats:",n),console.log("[ChatService] First chat participantsCount:",n?.[0]?.participantsCount);const s=hA(n);return console.log("[ChatService] After normalization, first chat participantsCount:",s?.[0]?.participantsCount),s},getChat:async t=>{const n=await Ne.get(`/chats/${t}`),s=n.data?.data||n.data;return console.log("[ChatService] getChat raw response:",{chatId:t,rawChat:s,hasMembers:!!s?.members,membersLength:s?.members?.length,members:s?.members}),Cl(s)},getChatProfile:async t=>{const n=await Ne.get(`/chats/${t}/profile`),s=n.data?.data||n.data;return console.log("[ChatService] getChatProfile raw response:",{chatId:t,rawChat:s,hasMembers:!!s?.members,membersLength:s?.members?.length,hasParticipants:!!s?.participants,participantsLength:s?.participants?.length,createdById:s?.createdById,ownerId:s?.ownerId,CreatedById:s?.CreatedById,OwnerId:s?.OwnerId}),Cl(s)},createGroup:async t=>{console.log("[ChatService] createGroup called"),console.log("[ChatService] FormData contents:");for(const[o,c]of t.entries())console.log(`  ${o}:`,c instanceof File?`File(${c.name}, ${c.size} bytes)`:c);const n=await Ne.post("/groups",t);console.log("[ChatService] createGroup raw response:",n),console.log("[ChatService] createGroup response.data:",n.data);const s=n.data?.data||n.data;return console.log("[ChatService] createGroup rawChat:",s),Cl(s)},createChannel:async t=>{console.log("[ChatService] createChannel called"),console.log("[ChatService] FormData contents:");for(const[o,c]of t.entries())console.log(`  ${o}:`,c instanceof File?`File(${c.name}, ${c.size} bytes)`:c);const n=await Ne.post("/channels",t);console.log("[ChatService] createChannel raw response:",n),console.log("[ChatService] createChannel response.data:",n.data);const s=n.data?.data||n.data;return console.log("[ChatService] createChannel rawChat:",s),Cl(s)},updateChat:async(t,n,s)=>{const o=n==="group"?"/groups":"/channels";console.log("[ChatService] updateChat FormData contents:");for(const[d,p]of s.entries())console.log(`  ${d}:`,p instanceof File?`File(${p.name}, ${p.size} bytes)`:p);const c=await Ne.put(o,s,{params:{chatId:t},headers:{"Content-Type":void 0}});return console.log("[ChatService] updateChat response:",c.data),c.data?.data||c.data},deleteChat:async(t,n)=>{const s=n==="group"?"/groups":"/channels",o=await Ne.delete(s,{params:{chatId:t}});return o.data?.data||o.data},deleteConversation:async t=>{const n=await Ne.delete("/conversations",{params:{conversationId:t}});return n.data?.data||n.data},joinChat:async(t,n)=>{const s=n==="group"?"/groups/join":"/channels/join",o=n==="group"?"groupId":"channelId",c=await Ne.post(s,null,{params:{[o]:t}});return c.data?.data||c.data},leaveChat:async(t,n)=>{const s=n==="group"?"/groups/leave":"/channels/leave",o=await Ne.post(s,null,{params:{chatId:t}});return o.data?.data||o.data},searchChats:async t=>{const n=await Ne.post("/chats/search",{pageNumber:1,pageSize:10,searchTerm:t});console.log("[ChatService] searchChats full response:",n);const s=n.data?.data;if(!Array.isArray(s))return console.warn("[ChatService] Search returned non-array data:",s),[];const o=s.map(c=>{const d=c.type||c.chatType,p=String(d).toLowerCase().trim();let h="channel";return p==="conversation"||p==="dm"||p==="directmessage"?h="dm":p==="group"?h="group":p==="channel"&&(h="channel"),{id:c.id||c.entityId,name:c.name||c.displayName||"Unknown",type:h,avatar:mt(c.avatarUrl||c.avatar||c.profileImage),description:c.description||"",memberCount:c.memberCount||c.participantsCount||0}});return console.log("[ChatService] Normalized search results:",o),o},banUser:async(t,n)=>{const s=await Ne.post(`/chats/ban/${n}`,null,{params:{chatId:t}});return s.data?.data||s.data},unbanUser:async(t,n)=>{const s=await Ne.post(`/chats/unban/${n}`,null,{params:{chatId:t}});return s.data?.data||s.data},getBannedUsers:async t=>{const n=await Ne.get(`/chats/${t}/banned-users`);return n.data?.data||n.data||[]},addMemberToGroup:async(t,n)=>{const s=await Ne.post("/groups/add-member",null,{params:{chatId:t,addingUserId:n}});return s.data?.data||s.data},addMemberToChannel:async(t,n)=>{const s=await Ne.post("/channels/add-member",null,{params:{chatId:t,addingUserId:n}});return s.data?.data||s.data},removeMemberFromGroup:async(t,n)=>{const s=await Ne.post("/groups/remove-member",null,{params:{chatId:t,removingUserId:n}});return s.data?.data||s.data},removeMemberFromChannel:async(t,n)=>{const s=await Ne.post("/channels/remove-member",null,{params:{chatId:t,removingUserId:n}});return s.data?.data||s.data},updateChatPrivacy:async(t,n)=>{const s=n==="public"?0:1,o=await Ne.put("/chats/privacy-type",null,{params:{chatId:t,privacyType:s}});return o.data?.data||o.data},addUserPermission:async(t,n,s)=>{const o=await Ne.post("/chats/add-user-permission",null,{params:{chatId:t,addingUserId:n,permissionName:s}});return o.data?.data||o.data},createOrGetDM:async(t,n)=>{try{if(console.log("[ChatService] createOrGetDM called with:",{recipientId:t,recipientIdType:typeof t,initialMessage:n,isRecipientIdValid:t&&t!=="undefined"}),!t||t==="undefined")throw new Error(`Invalid recipientId: ${t}`);const s=await Ee.getAllChats();console.log("[ChatService] Fetched chats, looking for existing DM with recipient:",t);let o;for(const c of s)if(console.log("[ChatService] Checking chat:",{chatId:c.id,type:c.type,memberCount:c.members?.length||0}),c.type==="dm")if(c.members&&c.members.length>0){if(c.members.some(p=>{const h=p.userId===t||p.id===t||p.user?.id===t;return h&&console.log("[ChatService] Found matching member:",p),h})){o=c;break}}else{console.log("[ChatService] Members array empty for DM, fetching full details for chat:",c.id);try{const d=await Ee.getChat(c.id);if(console.log("[ChatService] Full chat details:",{id:d.id,memberCount:d.members?.length||0,members:d.members?.map(p=>({userId:p.userId,id:p.id}))}),d.members&&d.members.length>0&&d.members.some(h=>{const m=h.userId===t||h.id===t||h.user?.id===t;return m&&console.log("[ChatService] Found matching member in full chat:",h),m})){o=d;break}}catch(d){console.error("[ChatService] Error fetching full chat details:",d)}}if(console.log("[ChatService] DM chat found:",o?.id||"NOT FOUND"),o&&n){console.log("[ChatService] Sending to existing DM with chatId:",o.id);const c=new FormData;return c.append("chatId",o.id),c.append("content",n),console.log("[ChatService] FormData entries:",{chatId:o.id,content:n}),await Ne.post("/messages/",c,{headers:{"Content-Type":void 0}}),console.log("[ChatService] Message sent to existing DM:",o.id),o}if(!o&&n){console.log("[ChatService] Creating new DM conversation with user:",t);const c=new FormData;c.append("receiverId",t),c.append("content",n),console.log("[ChatService] FormData entries for new DM:",{receiverId:t,content:n});const d=await Ne.post("/messages/",c,{headers:{"Content-Type":void 0}});console.log("[ChatService] Message sent to new DM, conversation auto-created. Response:",d);const h=(await Ee.getAllChats()).find(m=>m.type==="dm"&&m.members?.some(g=>g.id===t||g.userId===t));return console.log("[ChatService] Newly created DM:",h?.id||"NOT FOUND"),h}return console.log("[ChatService] No action taken (no message to send)"),o}catch(s){throw console.error("[ChatService] Error in createOrGetDM:",s),s}}},mA=Object.freeze(Object.defineProperty({__proto__:null,chatService:Ee},Symbol.toStringTag,{value:"Module"})),AS={"":"Like","":"Love","":"Laugh","":"Sad","":"Angry"},gA={Like:"",Love:"",Laugh:"",Sad:"",Angry:""},yA=[{emoji:"",type:"Like",label:"Like"},{emoji:"",type:"Love",label:"Love"},{emoji:"",type:"Laugh",label:"Laugh"},{emoji:"",type:"Sad",label:"Sad"},{emoji:"",type:"Angry",label:"Angry"}],As={sendMessage:async t=>{try{console.log("[MessageService] sendMessage called"),console.log("[MessageService] FormData entries:");for(const[s,o]of t.entries())o instanceof File?console.log(`  ${s}: File(${o.name}, ${o.size} bytes, ${o.type})`):console.log(`  ${s}: ${o}`);const n=await Ne.post("/messages",t,{headers:{"Content-Type":void 0}});return console.log("[MessageService] Response:",n.data),n.data?.data||n.data}catch(n){throw console.error("[MessageService] Error sending message:",n),n}},editMessage:async(t,n)=>{const s=new FormData;s.append("Content",n);const o=await Ne.put(`/messages/${t}`,s,{headers:{"Content-Type":void 0}});return o.data?.data||o.data},deleteMessage:async t=>{const n=await Ne.delete(`/messages/${t}`);return n.data?.data||n.data},toggleReaction:async(t,n)=>{const s=await Ne.post(`/messages/${t}/reactions/${n}`);return s.data?.data??s.data},toggleReactionByEmoji:async(t,n)=>{const s=AS[n];if(!s)throw new Error(`Unknown emoji: ${n}`);return As.toggleReaction(t,s)},getReactions:async t=>{const n=await Ne.get(`/messages/${t}/reactions`);return n.data?.data||n.data||[]},pinMessage:async t=>{const n=await Ne.post(`/messages/${t}/pin`);return n.data?.data||n.data},unpinMessage:async t=>{const n=await Ne.post(`/messages/${t}/unpin`);return n.data?.data||n.data},getPinnedMessages:async t=>{const n=await Ne.get(`/messages/pinned/${t}`);return n.data?.data||n.data}},Ah=Object.freeze(Object.defineProperty({__proto__:null,AVAILABLE_REACTIONS:yA,EMOJI_TO_REACTION_TYPE:AS,REACTION_TYPE_TO_EMOJI:gA,messageService:As},Symbol.toStringTag,{value:"Module"})),Pe=$l((t,n)=>({chats:[],currentChat:null,messages:[],pinnedMessages:new Map,chatPermissions:new Map,isLoadingChats:!1,isLoadingMessages:!1,isLoadingPinned:!1,permissionsLoading:!1,error:null,typingUsers:new Map,onlineUsers:new Map,userLastSeen:new Map,blockedByUsers:new Set,usersYouBlocked:new Set,loadChats:async()=>{t({isLoadingChats:!0,error:null});try{const s=await Ee.getAllChats();console.log("[ChatStore] Chats from API (already normalized):",s),console.log("[ChatStore] Sample chat participantsCount:",s[0]?.participantsCount,s[0]?.name),t({chats:s,isLoadingChats:!1})}catch(s){const o=Tn(s,"Failed to load chats");console.error("[ChatStore] Error loading chats:",s),t({error:o,isLoadingChats:!1})}},setCurrentChat:s=>{console.log("[ChatStore] setCurrentChat called with:",{chatId:s?.id,chatName:s?.name,participantsCount:s?.participantsCount,membersLength:s?.members?.length}),t({currentChat:s})},setMessages:s=>{t({messages:s})},loadMessages:async(s,o=1)=>{t({isLoadingMessages:!0,error:null});try{const{chatService:c}=await Ut(async()=>{const{chatService:h}=await Promise.resolve().then(()=>mA);return{chatService:h}},void 0),[d,p]=await Promise.all([c.getChat(s),c.getChatProfile(s)]);t(h=>({currentChat:h.currentChat?.id===s?{...h.currentChat,...p,messages:d.messages}:h.currentChat,messages:d.messages||[],isLoadingMessages:!1}))}catch(c){const d=Tn(c,"Failed to load messages");t({error:d,isLoadingMessages:!1})}},sendMessage:async(s,o,c,d,p)=>{t({error:null});try{const h=s&&s.startsWith("temp_dm_"),m=h?null:s,g=h?s.replace("temp_dm_",""):o;if(console.log("[ChatStore] sendMessage - isTempChat:",h,"actualChatId:",m,"actualReceiverId:",g),d){const y=new FormData;m&&y.append("chatId",m),g&&y.append("receiverId",g),c&&y.append("content",c),p&&y.append("replyId",p),y.append("file",d),await As.sendMessage(y)}else await(await Ut(()=>Promise.resolve().then(()=>Rh),void 0).then(v=>v.signalRService)).sendMessage(m,c,g||void 0,p||null)}catch(h){const m=Tn(h,"Failed to send message");t({error:m})}},editMessage:async(s,o)=>{t({error:null});try{await As.editMessage(s,o),t(c=>({messages:c.messages.map(d=>d.messageId===s?{...d,content:o,isEdited:!0}:d)}))}catch(c){const d=Tn(c,"Failed to edit message");t({error:d})}},deleteMessage:async s=>{t({error:null});try{await As.deleteMessage(s),t(o=>({messages:o.messages.filter(c=>c.messageId!==s)}))}catch(o){const c=Tn(o,"Failed to delete message");t({error:c})}},toggleReaction:async(s,o)=>{t({error:null});try{return await As.toggleReactionByEmoji(s,o)}catch(c){const d=Tn(c,"Failed to toggle reaction");return t({error:d}),!1}},clearError:()=>t({error:null}),loadPinnedMessages:async s=>{t({isLoadingPinned:!0});try{const o=await As.getPinnedMessages(s);t(c=>{const d=new Map(c.pinnedMessages);return d.set(s,o||[]),{pinnedMessages:d,isLoadingPinned:!1}})}catch(o){console.error("[ChatStore] Error loading pinned messages:",o),t({isLoadingPinned:!1})}},pinMessage:async s=>{try{await As.pinMessage(s)}catch(o){const c=Tn(o,"Failed to pin message");throw t({error:c}),o}},unpinMessage:async s=>{try{await As.unpinMessage(s)}catch(o){const c=Tn(o,"Failed to unpin message");throw t({error:c}),o}},getPinnedMessages:s=>n().pinnedMessages.get(s)||[],loadPermissions:async s=>{const{user:o}=jt.getState();if(console.log("[loadPermissions] Called with:",{chatId:s,userId:o?.id,username:o?.username}),!o||!s){console.log("[loadPermissions] Early return - no user or chatId");return}t({permissionsLoading:!0});try{const{permissionService:c}=await Ut(async()=>{const{permissionService:m}=await import("./permission.service-D1eHFXSx.js");return{permissionService:m}},__vite__mapDeps([0,1,2]));console.log("[loadPermissions] Calling API: GET /permissions/",s,"/user/",o.id);const d=await c.getUserPermissions(s,o.id);console.log("[loadPermissions] API response:",d);const p=d?.permissions||d||[],h=Array.isArray(p)?p.map(m=>m.permissionName||m.name||m):[];console.log("[ChatStore] Loaded permissions for chat",s,":",h),t(m=>({chatPermissions:new Map(m.chatPermissions).set(s,h),permissionsLoading:!1}))}catch(c){console.error("[ChatStore] Failed to load permissions:",c),t(d=>({chatPermissions:new Map(d.chatPermissions).set(s,[]),permissionsLoading:!1}))}},hasPermission:(s,o)=>{const{currentChat:c,chatPermissions:d}=n(),{user:p}=jt.getState();if(console.log("[hasPermission] Checking permission:",{chatId:s,permission:o,currentChatId:c?.id,currentChatType:c?.type,userId:p?.id,createdById:c?.createdById,membersCount:c?.members?.length}),c?.type==="dm")return["SendMessage","PinMessages"].includes(o)?(console.log("[hasPermission] DM chat - allowing:",o),!0):!1;if(c&&p&&c.createdById===p.id)return console.log("[hasPermission] User is chat creator - granting all permissions"),!0;if(c&&p&&c.members){const g=c.members.find(v=>v.userId===p.id);console.log("[hasPermission] Current member:",{found:!!g,memberId:g?.userId,role:g?.role});const y=g?.role?.toLowerCase();if(y==="admin"||y==="owner")return console.log("[hasPermission] User has admin/owner role - granting all permissions"),!0}const h=d.get(s)||[],m=h.includes(o);return console.log("[hasPermission] Checking cached permissions:",{cachedPermissions:h,hasPermission:m}),m},clearPermissions:s=>{t(s?o=>{const c=new Map(o.chatPermissions);return c.delete(s),{chatPermissions:c}}:{chatPermissions:new Map})},grantPermission:(s,o)=>{console.log("[ChatStore] Granting permission:",{chatId:s,permissionName:o}),t(c=>{const d=new Map(c.chatPermissions),p=d.get(s)||[];return p.includes(o)||d.set(s,[...p,o]),{chatPermissions:d}})},revokePermission:(s,o)=>{console.log("[ChatStore] Revoking permission:",{chatId:s,permissionName:o}),t(c=>{const d=new Map(c.chatPermissions),p=d.get(s)||[];return d.set(s,p.filter(h=>h!==o)),{chatPermissions:d}})},isUserOnline:s=>n().onlineUsers.get(s)||!1,getUserLastSeen:s=>n().userLastSeen.get(s),getOnlineMembersCount:s=>{const o=n().chats.find(p=>p.id===s);if(!o||!o.members)return 0;let c=0;const d=n().onlineUsers;for(const p of o.members)d.get(p.userId)&&c++;return c},setInitialPresenceStates:s=>{console.log("[ChatStore] Setting initial presence states for",Object.keys(s).length,"users"),console.log("[ChatStore] Raw presence states:",s);const o=new Map,c=new Map;Object.entries(s).forEach(([d,p])=>{console.log(`[ChatStore] Processing user ${d}, state:`,p,"type:",typeof p),typeof p=="boolean"?(o.set(d,p),console.log(`[ChatStore] Set user ${d} to ${p?"online":"offline"}`)):(o.set(d,p.isOnline),p.lastSeen&&c.set(d,p.lastSeen),console.log(`[ChatStore] Set user ${d} to ${p.isOnline?"online":"offline"}, lastSeen: ${p.lastSeen||"none"}`))}),t({onlineUsers:o,userLastSeen:c}),console.log("[ChatStore] Presence states initialized:",{online:Array.from(o.entries()).filter(([d,p])=>p).length,total:o.size,onlineUserIds:Array.from(o.entries()).filter(([d,p])=>p).map(([d])=>d)})},handleReceiveMessage:s=>{console.log("[ChatStore] Received message:",s);const o=jt.getState().user?.id;t(c=>{if(c.currentChat&&s.chatId===c.currentChat.id&&!c.messages.some(p=>p.messageId===s.messageId)){const p={messageId:s.messageId,chatId:s.chatId,senderId:s.senderId,senderUsername:s.senderUsername||"Unknown",senderAvatarUrl:s.senderAvatarUrl,content:s.content,fileUrl:s.fileUrl,replyId:s.replyId,sentAt:s.sentAt,isSeen:s.isSeen??!1,seenAt:s.seenAt,isNotificated:!1,notificationId:"",messageReactions:[],isCurrentUser:s.senderId===o};return console.log("[ChatStore] Added new message to state, isCurrentUser:",p.isCurrentUser),{messages:[...c.messages,p]}}return{}}),t(c=>({chats:c.chats.map(d=>d.id===s.chatId?{...d,lastMessage:{id:s.messageId,chatId:s.chatId,senderId:s.senderId,sender:{id:s.senderId,username:s.senderUsername||"Unknown"},content:s.content||"",fileUrl:s.fileUrl,reactions:[],edited:!1,createdAt:s.sentAt||new Date().toISOString()},updatedAt:s.sentAt||new Date().toISOString()}:d).sort((d,p)=>new Date(p.updatedAt||0).getTime()-new Date(d.updatedAt||0).getTime())}))},handleMessageEdited:s=>{console.log("[ChatStore] Message edited:",s),t(o=>({messages:o.messages.map(c=>c.messageId===s.messageId?{...c,content:s.content}:c)}))},handleMessageDeleted:s=>{console.log("[ChatStore] Message deleted:",s),t(o=>({messages:o.messages.filter(c=>c.messageId!==s.messageId)}))},handleReactionAdded:s=>{console.log("[ChatStore] Reaction added event received:",s);const o=n();console.log("[ChatStore] Current messages count:",o.messages.length),console.log("[ChatStore] Looking for messageId:",s.messageId);const c=o.messages.find(d=>d.messageId===s.messageId);console.log("[ChatStore] Found message:",c?"YES":"NO"),c&&(t(d=>({messages:d.messages.map(p=>p.messageId===s.messageId?{...p,messageReactions:[...p.messageReactions||[],{reactionType:s.reactionType,userId:s.userId,userName:""}]}:p)})),console.log("[ChatStore] Reaction added to message"))},handleReactionRemoved:s=>{console.log("[ChatStore] Reaction removed:",s),t(o=>({messages:o.messages.map(c=>c.messageId===s.messageId?{...c,messageReactions:(c.messageReactions||[]).filter(d=>!(d.userId===s.userId&&d.reactionType===s.reactionType))}:c)}))},handleUserOnline:s=>{console.log("[ChatStore] User online:",s),t(o=>{const c=new Map(o.onlineUsers);c.set(s.userId,!0);const d=new Map(o.userLastSeen);return d.delete(s.userId),{onlineUsers:c,userLastSeen:d,chats:o.chats.map(p=>p.members?.some(m=>m.userId===s.userId)?{...p,isOnline:p.type==="dm"?!0:p.isOnline,members:p.members?.map(m=>m.userId===s.userId?{...m,user:{...m.user,onlineStatus:"online",lastSeen:""}}:m)}:p)}})},handleUserOffline:s=>{console.log("[ChatStore] User offline:",s),t(o=>{const c=new Map(o.onlineUsers);c.set(s.userId,!1);const d=new Map(o.userLastSeen);return s.lastSeen&&d.set(s.userId,s.lastSeen),{onlineUsers:c,userLastSeen:d,chats:o.chats.map(p=>p.members?.some(m=>m.userId===s.userId)?{...p,isOnline:p.type==="dm"?!1:p.isOnline,members:p.members?.map(m=>m.userId===s.userId?{...m,user:{...m.user,onlineStatus:"offline",lastSeen:s.lastSeen}}:m)}:p)}})},handleUserTyping:s=>{console.log("[ChatStore] User typing:",s),t(o=>{const c=new Map(o.typingUsers);return c.set(`${s.chatId}-${s.userId}`,{userId:s.userId,timestamp:Date.now()}),{typingUsers:c}}),setTimeout(()=>{t(o=>{const c=new Map(o.typingUsers);return c.delete(`${s.chatId}-${s.userId}`),{typingUsers:c}})},3e3)},handleUserStoppedTyping:s=>{console.log("[ChatStore] User stopped typing:",s),t(o=>{const c=new Map(o.typingUsers);return c.delete(`${s.chatId}-${s.userId}`),{typingUsers:c}})},handleMessagePinned:s=>{console.log("[ChatStore] Message pinned:",s),t(o=>({messages:o.messages.map(c=>c.messageId===s.messageId?{...c,isPinned:!0,pinnedAt:s.pinnedAt,pinnedById:s.pinnedById,pinnedByUsername:s.pinnedByUsername}:c)})),n().loadPinnedMessages(s.chatId)},handleMessageUnpinned:s=>{console.log("[ChatStore] Message unpinned:",s),t(o=>({messages:o.messages.map(c=>c.messageId===s.messageId?{...c,isPinned:!1,pinnedAt:void 0,pinnedById:void 0,pinnedByUsername:void 0}:c)})),t(o=>{const c=new Map(o.pinnedMessages),d=c.get(s.chatId)||[];return c.set(s.chatId,d.filter(p=>p.messageId!==s.messageId)),{pinnedMessages:c}})},handleAddedToChat:s=>{console.log("[ChatStore] Added to chat:",s),n().loadChats()},handleNewConversation:s=>{console.log("[ChatStore] New conversation:",s),n().loadChats()},handleConversationCreated:async s=>{console.log("[ChatStore] Conversation created (sender notification):",s);const c=n().currentChat;if(c&&c.id.startsWith("temp_dm_")&&c.id.includes(s.receiverId)){console.log("[ChatStore] Switching from temp chat to real conversation:",s.conversationId),await n().loadChats();const p=n().chats.find(h=>h.id===s.conversationId);if(p){console.log("[ChatStore] Found new conversation, switching to it:",p.id),t({currentChat:p});try{await(await Ut(()=>Promise.resolve().then(()=>Rh),void 0).then(m=>m.signalRService)).joinChat(p.id)}catch(h){console.error("[ChatStore] Failed to join new chat:",h)}}}else n().loadChats()},handlePermissionGranted:s=>{console.log("[ChatStore] Permission granted:",s);const{user:o}=jt.getState();o&&s.userId===o.id&&t(c=>{const d=new Map(c.chatPermissions),p=d.get(s.chatId)||[];return p.includes(s.permissionName)||d.set(s.chatId,[...p,s.permissionName]),{chatPermissions:d}})},handlePermissionRevoked:s=>{console.log("[ChatStore] Permission revoked:",s);const{user:o}=jt.getState();o&&s.userId===o.id&&t(c=>{const d=new Map(c.chatPermissions),p=d.get(s.chatId)||[];return d.set(s.chatId,p.filter(h=>h!==s.permissionName)),{chatPermissions:d}})},handleAllPermissionsRevoked:s=>{console.log("[ChatStore] All permissions revoked:",s);const{user:o}=jt.getState();o&&s.userId===o.id&&t(c=>{const d=new Map(c.chatPermissions);return d.set(s.chatId,[]),{chatPermissions:d}})},handleUserBlockedYou:s=>{console.log("[ChatStore] User blocked you:",s),t(o=>{const c=new Set(o.blockedByUsers);return c.add(s.blockerId),{blockedByUsers:c}})},handleYouBlockedUser:s=>{console.log("[ChatStore] You blocked user:",s),s.blockedUserId&&t(o=>{const c=new Set(o.usersYouBlocked);return c.add(s.blockedUserId),{usersYouBlocked:c}})},handleUserUnblockedYou:s=>{console.log("[ChatStore] User unblocked you:",s),t(o=>{const c=new Set(o.blockedByUsers);return c.delete(s.unblockerId),{blockedByUsers:c}})},handleYouUnblockedUser:s=>{console.log("[ChatStore] You unblocked user:",s),s.unblockedUserId&&t(o=>{const c=new Set(o.usersYouBlocked);return c.delete(s.unblockedUserId),{usersYouBlocked:c}})},handleChatDeleted:s=>{console.log("[ChatStore] Chat deleted:",s);const o=n();t({chats:o.chats.filter(c=>c.id!==s.chatId),currentChat:o.currentChat?.id===s.chatId?null:o.currentChat,messages:o.currentChat?.id===s.chatId?[]:o.messages}),t(c=>{const d=new Map(c.chatPermissions);return d.delete(s.chatId),{chatPermissions:d}})},handleRemovedFromChat:s=>{console.log("[ChatStore] Removed from chat:",s);const o=n();t({chats:o.chats.filter(c=>c.id!==s.chatId),currentChat:o.currentChat?.id===s.chatId?null:o.currentChat,messages:o.currentChat?.id===s.chatId?[]:o.messages}),t(c=>{const d=new Map(c.chatPermissions);return d.delete(s.chatId),{chatPermissions:d}})},handleMessagesMarkedSeen:s=>{console.log("[ChatStore] Messages marked as seen:",s);const o=n();o.currentChat&&s.chatId===o.currentChat.id&&t({messages:o.messages.map(d=>s.messageIds.includes(d.messageId)?{...d,isSeen:!0,seenAt:s.seenAt}:d)});const c=jt.getState().user?.id;c&&s.seenByUserId===c&&t(d=>({chats:d.chats.map(p=>p.id===s.chatId?{...p,unreadCount:Math.max(0,(p.unreadCount||0)-s.messageIds.length)}:p),currentChat:d.currentChat?.id===s.chatId?{...d.currentChat,unreadCount:Math.max(0,(d.currentChat.unreadCount||0)-s.messageIds.length)}:d.currentChat}))},resetUnreadCount:s=>{console.log("[ChatStore] Resetting unread count for chat:",s),t(o=>({chats:o.chats.map(c=>c.id===s?{...c,unreadCount:0}:c),currentChat:o.currentChat?.id===s?{...o.currentChat,unreadCount:0}:o.currentChat}))},isBlockedBy:s=>n().blockedByUsers.has(s),hasBlocked:s=>n().usersYouBlocked.has(s),addBlockedUser:s=>{console.log("[ChatStore] Adding blocked user:",s),t(o=>{const c=new Set(o.usersYouBlocked);return c.add(s),{usersYouBlocked:c}})},removeBlockedUser:s=>{console.log("[ChatStore] Removing blocked user:",s),t(o=>{const c=new Set(o.usersYouBlocked);return c.delete(s),{usersYouBlocked:c}})}})),xA=()=>{const t=localStorage.getItem("simpchat-theme");return t==="dark"||t==="light"?t:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},Hf=t=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("simpchat-theme",t)},RS=$l(t=>{const n=xA();return Hf(n),{theme:n,toggleTheme:()=>{t(s=>{const o=s.theme==="light"?"dark":"light";return Hf(o),{theme:o}})},setTheme:s=>{Hf(s),t({theme:s})}}}),vA=()=>localStorage.getItem("simpchat-fancy-animations")!=="false",DS=$l(t=>({fancyAnimations:vA(),toggleFancyAnimations:()=>{t(n=>{const s=!n.fancyAnimations;return localStorage.setItem("simpchat-fancy-animations",String(s)),{fancyAnimations:s}})},setFancyAnimations:n=>{localStorage.setItem("simpchat-fancy-animations",String(n)),t({fancyAnimations:n})}})),bA="_dashboard_1003y_106",SA="_gradientFlow_1003y_1",wA="_darkMode_1003y_137",_A="_leftPanel_1003y_151",CA="_panelGlow_1003y_1",jA="_panelHeader_1003y_172",TA="_title_1003y_203",kA="_menuButton_1003y_226",MA="_searchBar_1003y_261",EA="_searchInput_1003y_266",AA="_searchResults_1003y_296",RA="_slideDown_1003y_1",DA="_searchResultItem_1003y_330",NA="_searchResultAvatar_1003y_356",zA="_searchResultInfo_1003y_372",BA="_searchResultName_1003y_377",UA="_searchResultType_1003y_390",IA="_searchResultTypeIcon_1003y_400",OA="_searchLoading_1003y_407",LA="_searchNoResults_1003y_408",PA="_chatList_1003y_421",HA="_emptyState_1003y_455",$A="_loading_1003y_456",FA="_chatItem_1003y_469",VA="_active_1003y_483",qA="_chatAvatar_1003y_511",GA="_avatarFallback_1003y_537",WA="_onlineIndicator_1003y_548",YA="_chatInfo_1003y_564",XA="_chatHeader_1003y_571",KA="_chatNameWithType_1003y_578",QA="_headerRight_1003y_586",ZA="_chatName_1003y_578",JA="_chatTypeIcon_1003y_606",e5="_iconDm_1003y_623",t5="_iconGroup_1003y_634",n5="_iconChannel_1003y_645",a5="_timestamp_1003y_655",s5="_chatPreview_1003y_666",i5="_unreadBadge_1003y_679",o5="_unreadPulse_1003y_1",r5="_chatHeader2_1003y_703",l5="_headerInfo_1003y_720",c5="_headerTitle_1003y_727",d5="_chatTitle_1003y_733",u5="_headerChatType_1003y_750",p5="_headerActions_1003y_760",f5="_headerButton_1003y_766",h5="_messagesContainer_1003y_804",m5="_noMessages_1003y_838",g5="_welcomeScreen_1003y_850",y5="_welcomeIcon_1003y_865",x5="_welcomeText_1003y_871",v5="_welcomeSubtext_1003y_882",b5="_inputArea_1003y_892",S5="_inputWrapper_1003y_906",w5="_messageInput_1003y_912",_5="_sendButton_1003y_952",C5="_modalOverlay_1003y_999",j5="_modalFadeIn_1003y_1",T5="_modal_1003y_999",k5="_modalSlideUp_1003y_1",M5="_modalHeader_1003y_1031",E5="_closeButton_1003y_1054",A5="_modalBody_1003y_1084",R5="_modalFooter_1003y_1121",D5="_formGroup_1003y_1133",N5="_formInput_1003y_1149",z5="_primaryButton_1003y_1179",B5="_secondaryButton_1003y_1205",U5="_profileContent_1003y_1235",I5="_profileInfo_1003y_1241",O5="_avatarSection_1003y_1247",L5="_largeAvatar_1003y_1253",P5="_profileField_1003y_1274",H5="_loadingState_1003y_1305",$5="_menuDropdown_1003y_1312",F5="_menuItem_1003y_1344",V5="_menuDivider_1003y_1385",q5="_mainContent_1003y_1396",G5="_chatHeaderBar_1003y_1419",W5="_headerLeft_1003y_1434",Y5="_headerAvatar_1003y_1441",X5="_headerStatus_1003y_1493",K5="_online_1003y_548",Q5="_messageGroup_1003y_1513",Z5="_ownMessage_1003y_1521",J5="_messageBubble_1003y_1525",e3="_otherMessage_1003y_1531",t3="_senderAvatar_1003y_1546",n3="_senderName_1003y_1584",a3="_messageContent_1003y_1592",s3="_messageTime_1003y_1599",i3="_attachment_1003y_1607",o3="_reactionsContainer_1003y_1626",r3="_reaction_1003y_1626",l3="_inputField_1003y_1663",c3="_emojiButton_1003y_1700",d3="_attachButton_1003y_1701",u3="_rightPanel_1003y_1731",p3="_chatInfoPanel_1003y_1772",f3="_chatInfoHeader_1003y_1779",h3="_chatInfoAvatar_1003y_1789",m3="_chatInfoName_1003y_1810",g3="_chatInfoType_1003y_1821",y3="_editChatButton_1003y_1831",x3="_infoContent_1003y_1850",v3="_infoSection_1003y_1856",b3="_infoLabel_1003y_1860",S3="_memberList_1003y_1873",w3="_memberItem_1003y_1879",_3="_memberAvatar_1003y_1895",C3="_memberInfo_1003y_1916",j3="_memberName_1003y_1921",T3="_memberRole_1003y_1934",k3="_memberStatus_1003y_1944",M3="_emptyScreen_1003y_1954",E3="_emptyIcon_1003y_1964",A3="_emptyActions_1003y_1991",R3="_actionButton_1003y_1997",D3="_userSection_1003y_2020",N3="_userAvatar_1003y_2040",z3="_userInfo_1003y_2061",B3="_username_1003y_2066",U3="_userStatus_1003y_2080",I3="_logoutButton_1003y_2090",O3="_hidden_1003y_2122",L3="_truncate_1003y_2126",P3="_mobileMenuButton_1003y_2133",H3="_mobileOverlay_1003y_2138",$3="_mobileOpen_1003y_2190",F3="_borderGlow_1003y_1",V3="_chatItemHoverGlow_1003y_1",q3="_buttonPulse_1003y_1",G3="_inputFocusGlow_1003y_1",W3="_subtleFloat_1003y_1",Y3="_messageSlideIn_1003y_1",X3="_shimmer_1003y_1",D={dashboard:bA,gradientFlow:SA,darkMode:wA,leftPanel:_A,panelGlow:CA,panelHeader:jA,title:TA,menuButton:kA,searchBar:MA,searchInput:EA,searchResults:AA,slideDown:RA,searchResultItem:DA,searchResultAvatar:NA,searchResultInfo:zA,searchResultName:BA,searchResultType:UA,searchResultTypeIcon:IA,searchLoading:OA,searchNoResults:LA,chatList:PA,emptyState:HA,loading:$A,chatItem:FA,active:VA,chatAvatar:qA,avatarFallback:GA,onlineIndicator:WA,chatInfo:YA,chatHeader:XA,chatNameWithType:KA,headerRight:QA,chatName:ZA,chatTypeIcon:JA,iconDm:e5,iconGroup:t5,iconChannel:n5,timestamp:a5,chatPreview:s5,unreadBadge:i5,unreadPulse:o5,chatHeader2:r5,headerInfo:l5,headerTitle:c5,chatTitle:d5,headerChatType:u5,headerActions:p5,headerButton:f5,messagesContainer:h5,noMessages:m5,welcomeScreen:g5,welcomeIcon:y5,welcomeText:x5,welcomeSubtext:v5,inputArea:b5,inputWrapper:S5,messageInput:w5,sendButton:_5,modalOverlay:C5,modalFadeIn:j5,modal:T5,modalSlideUp:k5,modalHeader:M5,closeButton:E5,modalBody:A5,modalFooter:R5,formGroup:D5,formInput:N5,primaryButton:z5,secondaryButton:B5,profileContent:U5,profileInfo:I5,avatarSection:O5,largeAvatar:L5,profileField:P5,loadingState:H5,menuDropdown:$5,menuItem:F5,menuDivider:V5,mainContent:q5,chatHeaderBar:G5,headerLeft:W5,headerAvatar:Y5,headerStatus:X5,online:K5,messageGroup:Q5,ownMessage:Z5,messageBubble:J5,otherMessage:e3,senderAvatar:t3,senderName:n3,messageContent:a3,messageTime:s3,attachment:i3,reactionsContainer:o3,reaction:r3,inputField:l3,emojiButton:c3,attachButton:d3,rightPanel:u3,chatInfoPanel:p3,chatInfoHeader:f3,chatInfoAvatar:h3,chatInfoName:m3,chatInfoType:g3,editChatButton:y3,infoContent:x3,infoSection:v3,infoLabel:b3,memberList:S3,memberItem:w3,memberAvatar:_3,memberInfo:C3,memberName:j3,memberRole:T3,memberStatus:k3,emptyScreen:M3,emptyIcon:E3,emptyActions:A3,actionButton:R3,userSection:D3,userAvatar:N3,userInfo:z3,username:B3,userStatus:U3,logoutButton:I3,hidden:O3,truncate:L3,mobileMenuButton:P3,mobileOverlay:H3,mobileOpen:$3,borderGlow:F3,chatItemHoverGlow:V3,buttonPulse:q3,inputFocusGlow:G3,subtleFloat:W3,messageSlideIn:Y3,shimmer:X3},cn={getCurrentUser:async()=>{const t=await Ne.get("/users/me"),n=t.data?.data||t.data;return Eh(n)},updateProfile:async t=>{console.log("[UserService] updateProfile called"),console.log("[UserService] FormData contents:");for(const[s,o]of t.entries())console.log(`  ${s}:`,o instanceof File?`File(${o.name}, ${o.size} bytes)`:o);const n=await Ne.put("/users/me",t);return console.log("[UserService] updateProfile response:",n),cn.getCurrentUser()},searchUsers:async t=>{const n=await Ne.get(`/users/search/${encodeURIComponent(t)}`),s=n.data?.data||n.data;return H0(s)},getUserProfile:async t=>{const n=await Ne.get(`/users/${t}`);console.log("[UserService] getUserProfile raw response:",n.data);const s=n.data?.data||n.data;return console.log("[UserService] getUserProfile rawUser:",s),console.log("[UserService] getUserProfile description:",s?.description,s?.Description),Eh(s)},updateLastSeen:async()=>{const t=await Ne.put("/users/last-seen");return t.data?.data||t.data},getAllUsers:async()=>{const t=await Ne.get("/users"),n=t.data?.data||t.data;return H0(n)},deleteUser:async t=>{const n=await Ne.delete(`/users/${t}`);return n.data?.data||n.data},blockUser:async t=>{const n=await Ne.post(`/users/blocks/${t}`);return n.data?.data||n.data},unblockUser:async t=>{const n=await Ne.delete(`/users/blocks/${t}`);return n.data?.data||n.data},getBlockedUsers:async()=>{const t=await Ne.get("/users/blocks");return t.data?.data||t.data||[]},getBlockStatus:async t=>(await Ne.get(`/users/blocks/${t}/status`)).data?.isBlocked||!1,getMutualBlockStatus:async t=>{const n=await Ne.get(`/users/blocks/${t}/mutual-status`);return{iBlockedThem:n.data?.iBlockedThem||!1,theyBlockedMe:n.data?.theyBlockedMe||!1}}},fa=Object.freeze(Object.defineProperty({__proto__:null,userService:cn},Symbol.toStringTag,{value:"Module"})),at={surface:"#0a0a0a",surfaceElevated:"#0f0f0f",surfaceHover:"#151515",border:"#1a1a1a",borderLight:"#252525",primaryHover:"#0d9668",danger:"#ef4444",dangerHover:"#dc2626",dangerMuted:"rgba(239, 68, 68, 0.15)",warning:"#f59e0b",warningHover:"#d97706",warningMuted:"rgba(245, 158, 11, 0.15)",info:"#10b981",infoHover:"#0d9668",infoMuted:"rgba(16, 185, 129, 0.15)",success:"#10b981",successMuted:"rgba(16, 185, 129, 0.15)",text:"#ffffff",textSecondary:"#a1a1aa",textMuted:"#71717a"},K3=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M5.5 3.21V20.8l4.75-4.73 2.99 6.73L15.5 21.6l-3-6.7h6z'/%3E%3Cpath fill='%23064e3b' d='M6.5 5.61v11.68l3.38-3.37.37-.37.48 1.07 1.93 4.35 1.07-.47L11.8 14.1l-.48-1.07H16z'/%3E%3C/svg%3E") 5 3, default`,$f=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M9 2.5a2.5 2.5 0 0 1 5 0v7.996l3.904-.74a2.095 2.095 0 0 1 2.537 2.466L19.5 17.5a6 6 0 0 1-6 6H11a7 7 0 0 1-7-7V9a2 2 0 1 1 4 0v3.5h1z'/%3E%3Cpath fill='%23064e3b' d='M10 2.5V14h-.5a1.5 1.5 0 0 1-1.5-1.5V9a1 1 0 1 0-2 0v7.5a6 6 0 0 0 6 6h2.5a5 5 0 0 0 5-5l.941-5.278a1.095 1.095 0 0 0-1.324-1.288l-4.117.78V2.5a1.5 1.5 0 0 0-3 0z'/%3E%3C/svg%3E") 9 4, pointer`,Q3=t=>{switch(t){case"danger":return{iconBg:at.dangerMuted,iconBorder:`${at.danger}30`,iconColor:at.danger,buttonBg:at.danger,buttonHover:at.dangerHover,glow:`0 0 60px ${at.dangerMuted}`};case"warning":return{iconBg:at.warningMuted,iconBorder:`${at.warning}30`,iconColor:at.warning,buttonBg:at.warning,buttonHover:at.warningHover,glow:`0 0 60px ${at.warningMuted}`};case"success":return{iconBg:at.successMuted,iconBorder:`${at.success}30`,iconColor:at.success,buttonBg:at.success,buttonHover:at.primaryHover,glow:`0 0 60px ${at.successMuted}`};case"info":default:return{iconBg:at.infoMuted,iconBorder:`${at.info}30`,iconColor:at.info,buttonBg:at.info,buttonHover:at.infoHover,glow:`0 0 60px ${at.infoMuted}`}}},Z3=(t,n)=>{switch(t){case"delete":return r.jsx(Gd,{size:28,color:n});case"ban":return r.jsx(Rs,{size:28,color:n});case"leave":return r.jsx(Fh,{size:28,color:n});case"shield":return r.jsx(rr,{size:28,color:n});case"success":return r.jsx(bb,{size:28,color:n});case"info":return r.jsx($h,{size:28,color:n});case"warning":default:return r.jsx(R_,{size:28,color:n})}},J3={hidden:{opacity:0},visible:{opacity:1}},eR={hidden:{opacity:0,scale:.9,y:20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:25,stiffness:400,mass:.8}},exit:{opacity:0,scale:.9,y:20,transition:{duration:.15,ease:"easeOut"}}},tR={hidden:{scale:0,rotate:-180},visible:{scale:1,rotate:0,transition:{type:"spring",damping:15,stiffness:400,delay:.1}}},nR={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{delay:.15,duration:.2}}},aR={hidden:{opacity:0},visible:{opacity:1,transition:{delay:.2,duration:.2}}},sR=({isOpen:t,title:n,message:s,confirmText:o="Confirm",cancelText:c="Cancel",variant:d="danger",icon:p="warning",onConfirm:h,onCancel:m})=>{const g=Q3(d);return r.jsx(Xn,{children:t&&r.jsxs(se.div,{variants:J3,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.2},onClick:m,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",cursor:K3},children:[r.jsx("div",{style:{position:"absolute",inset:0,backgroundImage:`
              linear-gradient(rgba(16, 185, 129, 0.02) 1px, transparent 1px),
              linear-gradient(90deg, rgba(16, 185, 129, 0.02) 1px, transparent 1px)
            `,backgroundSize:"50px 50px",pointerEvents:"none"}}),r.jsxs(se.div,{variants:eR,initial:"hidden",animate:"visible",exit:"exit",onClick:y=>y.stopPropagation(),style:{position:"relative",width:"100%",maxWidth:"420px",background:`linear-gradient(180deg, ${at.surfaceElevated} 0%, ${at.surface} 100%)`,border:`1px solid ${at.border}`,borderRadius:"20px",boxShadow:`
                0 25px 50px -12px rgba(0, 0, 0, 0.5),
                0 0 0 1px ${at.borderLight},
                ${g.glow}
              `,overflow:"hidden"},children:[r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"3px",background:`linear-gradient(90deg, transparent, ${g.iconColor}, transparent)`}}),r.jsx(se.button,{whileHover:{scale:1.1,backgroundColor:at.surfaceHover},whileTap:{scale:.9},onClick:m,style:{position:"absolute",top:"16px",right:"16px",width:"32px",height:"32px",borderRadius:"8px",border:"none",background:"transparent",cursor:$f,display:"flex",alignItems:"center",justifyContent:"center",color:at.textMuted,zIndex:1},children:r.jsx(En,{size:18})}),r.jsxs("div",{style:{padding:"32px 28px 28px"},children:[r.jsx(se.div,{variants:tR,style:{width:"72px",height:"72px",borderRadius:"20px",background:g.iconBg,border:`1px solid ${g.iconBorder}`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",boxShadow:`0 8px 32px ${g.iconBg}`},children:Z3(p,g.iconColor)}),r.jsxs(se.div,{variants:nR,style:{textAlign:"center"},children:[r.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"20px",fontWeight:700,color:at.text,letterSpacing:"-0.02em"},children:n}),r.jsx("p",{style:{margin:0,fontSize:"14px",lineHeight:1.7,color:at.textSecondary,maxWidth:"320px",marginLeft:"auto",marginRight:"auto"},children:s})]}),r.jsxs(se.div,{variants:aR,style:{display:"flex",gap:"12px",marginTop:"28px"},children:[r.jsx(se.button,{whileHover:{scale:1.02,backgroundColor:at.surfaceHover,borderColor:at.borderLight,boxShadow:"none"},whileTap:{scale:.98},onClick:m,style:{flex:1,padding:"14px 24px",borderRadius:"12px",border:`1px solid ${at.border}`,background:at.surfaceElevated,color:at.textSecondary,fontSize:"14px",fontWeight:600,cursor:$f,transition:"all 0.2s ease",outline:"none",boxShadow:"none"},children:c}),r.jsx(se.button,{whileHover:{scale:1.02,boxShadow:`0 8px 32px ${g.iconBg}`},whileTap:{scale:.98},onClick:h,style:{flex:1,padding:"14px 24px",borderRadius:"12px",border:"none",background:`linear-gradient(135deg, ${g.buttonBg} 0%, ${g.buttonHover} 100%)`,color:"white",fontSize:"14px",fontWeight:600,cursor:$f,boxShadow:`0 4px 16px ${g.iconBg}`,transition:"all 0.2s ease"},children:o})]})]})]})]})})};let Sl=null;const Rd={init:t=>{Sl=t},show:t=>new Promise(n=>{if(Sl){let s=t.icon;if(!s)switch(t.variant){case"danger":s="delete";break;case"warning":s="warning";break;case"success":s="success";break;case"info":default:s="info";break}Sl({isOpen:!0,title:t.title,message:t.message,confirmText:t.confirmText||"Confirm",cancelText:t.cancelText||"Cancel",variant:t.variant||"danger",icon:s||"warning",callback:n})}else console.warn("[ConfirmModal] Store not initialized"),n(!1)}),close:t=>{Sl&&Sl(n=>(n.callback&&n.callback(t),{...n,isOpen:!1,callback:null}))}},kn=Rd.show,iR=()=>{const[t,n]=La.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",variant:"danger",icon:"warning",callback:null});return La.useEffect(()=>{Rd.init(n)},[]),r.jsx(sR,{isOpen:t.isOpen,title:t.title,message:t.message,confirmText:t.confirmText,cancelText:t.cancelText,variant:t.variant,icon:t.icon,onConfirm:()=>Rd.close(!0),onCancel:()=>Rd.close(!1)})},oR=t=>{if(!t||t==="undefined"||t==="null")return"?";const n=String(t).trim();if(!n||n.length===0)return"?";const s=n.split(/\s+/).filter(o=>o.length>0);return s.length===0?"?":s.length===1?s[0][0]?.toUpperCase()||"?":s.map(o=>o[0]).join("").toUpperCase().slice(0,2)||"?"},NS=({isOpen:t,onClose:n,isDarkMode:s=!1})=>{const[o,c]=b.useState([]),[d,p]=b.useState(!1),[h,m]=b.useState(""),[g,y]=b.useState(null);b.useEffect(()=>{t&&v()},[t]);const v=async()=>{p(!0),y(null);try{const C=await cn.getAllUsers();c(C)}catch(C){console.error("Failed to load users:",C),C.response?.status===403?y("Access denied. You need admin privileges to view this panel."):y("Failed to load users. Please try again.")}finally{p(!1)}},S=async(C,T)=>{if(await kn({title:"Delete User",message:`Are you sure you want to delete user "${T}"? This action cannot be undone and all their data will be permanently deleted.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",icon:"delete"}))try{await cn.deleteUser(C),await v()}catch(z){console.error("Failed to delete user:",z)}},j=o.filter(C=>C.username.toLowerCase().includes(h.toLowerCase())||C.email.toLowerCase().includes(h.toLowerCase()));return t?r.jsx("div",{className:`${D.modalOverlay} ${s?D.darkMode:""}`,onClick:n,children:r.jsxs("div",{className:D.modal,onClick:C=>C.stopPropagation(),style:{maxWidth:"900px",width:"90%"},children:[r.jsxs("div",{className:D.modalHeader,children:[r.jsx("h2",{children:" Admin Panel - User Management"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsxs("div",{className:D.modalBody,style:{maxHeight:"70vh",overflowY:"auto"},children:[g&&r.jsx("div",{style:{padding:"12px",backgroundColor:"rgba(211, 47, 47, 0.1)",border:"1px solid rgba(211, 47, 47, 0.3)",borderRadius:"6px",color:"#d32f2f",marginBottom:"16px"},children:g}),r.jsx("div",{className:D.formGroup,style:{marginBottom:"16px"},children:r.jsx("input",{type:"text",placeholder:"Search users by username or email...",value:h,onChange:C=>m(C.target.value),className:D.formInput,style:{margin:0}})}),d?r.jsx("div",{className:D.loadingState,children:"Loading users..."}):j.length===0?r.jsx("div",{className:D.emptyState,children:h?"No users match your search":"No users found"}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"6px",fontWeight:600,fontSize:"14px",color:"var(--text)"},children:["Total Users: ",j.length]}),r.jsx("div",{style:{overflowX:"auto"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"var(--surface)",borderRadius:"8px",overflow:"hidden"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:"var(--background)",borderBottom:"2px solid var(--border)"},children:[r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"User"}),r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Email"}),r.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Status"}),r.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"13px",fontWeight:600,color:"var(--text)"},children:"Actions"})]})}),r.jsx("tbody",{children:j.map(C=>r.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",transition:"background-color 0.2s"},onMouseEnter:T=>{T.currentTarget.style.backgroundColor="var(--background)"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="transparent"},children:[r.jsx("td",{style:{padding:"12px"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[C.avatar?r.jsx("img",{src:C.avatar,alt:C.username,style:{width:"36px",height:"36px",borderRadius:"50%",objectFit:"cover"}}):r.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:"var(--accent)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"14px"},children:oR(C.username)}),r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:C.username}),C.bio&&r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:C.bio})]})]})}),r.jsx("td",{style:{padding:"12px",fontSize:"13px",color:"var(--text-secondary)"},children:C.email}),r.jsx("td",{style:{padding:"12px"},children:r.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:600,backgroundColor:C.onlineStatus==="online"?"rgba(16, 185, 129, 0.15)":C.onlineStatus==="away"?"rgba(245, 158, 11, 0.15)":"rgba(107, 114, 128, 0.15)",color:C.onlineStatus==="online"?"#10b981":C.onlineStatus==="away"?"#f59e0b":"#6b7280"},children:C.onlineStatus})}),r.jsx("td",{style:{padding:"12px",textAlign:"center"},children:r.jsx("button",{onClick:()=>S(C.id,C.username),style:{padding:"6px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:T=>{T.currentTarget.style.opacity="0.9",T.currentTarget.style.transform="scale(1.05)"},onMouseLeave:T=>{T.currentTarget.style.opacity="1",T.currentTarget.style.transform="scale(1)"},children:" Delete"})})]},C.id))})]})})]})]}),r.jsxs("div",{className:D.modalFooter,children:[r.jsx("button",{onClick:v,className:D.secondaryButton,disabled:d,children:" Refresh"}),r.jsx("button",{onClick:n,className:D.primaryButton,children:"Close"})]})]})}):null};class oo extends Error{constructor(n,s){const o=new.target.prototype;super(`${n}: Status code '${s}'`),this.statusCode=s,this.__proto__=o}}class Em extends Error{constructor(n="A timeout occurred."){const s=new.target.prototype;super(n),this.__proto__=s}}class Pa extends Error{constructor(n="An abort occurred."){const s=new.target.prototype;super(n),this.__proto__=s}}class rR extends Error{constructor(n,s){const o=new.target.prototype;super(n),this.transport=s,this.errorType="UnsupportedTransportError",this.__proto__=o}}class lR extends Error{constructor(n,s){const o=new.target.prototype;super(n),this.transport=s,this.errorType="DisabledTransportError",this.__proto__=o}}class cR extends Error{constructor(n,s){const o=new.target.prototype;super(n),this.transport=s,this.errorType="FailedToStartTransportError",this.__proto__=o}}class $0 extends Error{constructor(n){const s=new.target.prototype;super(n),this.errorType="FailedToNegotiateWithServerError",this.__proto__=s}}class dR extends Error{constructor(n,s){const o=new.target.prototype;super(n),this.innerErrors=s,this.__proto__=o}}class zS{constructor(n,s,o){this.statusCode=n,this.statusText=s,this.content=o}}class au{get(n,s){return this.send({...s,method:"GET",url:n})}post(n,s){return this.send({...s,method:"POST",url:n})}delete(n,s){return this.send({...s,method:"DELETE",url:n})}getCookieString(n){return""}}var Z;(function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"})(Z||(Z={}));class Ll{constructor(){}log(n,s){}}Ll.instance=new Ll;const uR="10.0.0";class vn{static isRequired(n,s){if(n==null)throw new Error(`The '${s}' argument is required.`)}static isNotEmpty(n,s){if(!n||n.match(/^\s*$/))throw new Error(`The '${s}' argument should not be empty.`)}static isIn(n,s,o){if(!(n in s))throw new Error(`Unknown ${o} value: ${n}.`)}}class Yt{static get isBrowser(){return!Yt.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Yt.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Yt.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Pl(t,n){let s="";return co(t)?(s=`Binary data of length ${t.byteLength}`,n&&(s+=`. Content: '${pR(t)}'`)):typeof t=="string"&&(s=`String data of length ${t.length}`,n&&(s+=`. Content: '${t}'`)),s}function pR(t){const n=new Uint8Array(t);let s="";return n.forEach(o=>{const c=o<16?"0":"";s+=`0x${c}${o.toString(16)} `}),s.substring(0,s.length-1)}function co(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}async function BS(t,n,s,o,c,d){const p={},[h,m]=pr();p[h]=m,t.log(Z.Trace,`(${n} transport) sending data. ${Pl(c,d.logMessageContent)}.`);const g=co(c)?"arraybuffer":"text",y=await s.post(o,{content:c,headers:{...p,...d.headers},responseType:g,timeout:d.timeout,withCredentials:d.withCredentials});t.log(Z.Trace,`(${n} transport) request complete. Response status: ${y.statusCode}.`)}function fR(t){return t===void 0?new $d(Z.Information):t===null?Ll.instance:t.log!==void 0?t:new $d(t)}class hR{constructor(n,s){this._subject=n,this._observer=s}dispose(){const n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(s=>{})}}class $d{constructor(n){this._minLevel=n,this.out=console}log(n,s){if(n>=this._minLevel){const o=`[${new Date().toISOString()}] ${Z[n]}: ${s}`;switch(n){case Z.Critical:case Z.Error:this.out.error(o);break;case Z.Warning:this.out.warn(o);break;case Z.Information:this.out.info(o);break;default:this.out.log(o);break}}}}function pr(){let t="X-SignalR-User-Agent";return Yt.isNode&&(t="User-Agent"),[t,mR(uR,gR(),xR(),yR())]}function mR(t,n,s,o){let c="Microsoft SignalR/";const d=t.split(".");return c+=`${d[0]}.${d[1]}`,c+=` (${t}; `,n&&n!==""?c+=`${n}; `:c+="Unknown OS; ",c+=`${s}`,o?c+=`; ${o}`:c+="; Unknown Runtime Version",c+=")",c}function gR(){if(Yt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function yR(){if(Yt.isNode)return process.versions.node}function xR(){return Yt.isNode?"NodeJS":"Browser"}function Ff(t){return t.stack?t.stack:t.message?t.message:`${t}`}function vR(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class bR extends au{constructor(n){if(super(),this._logger=n,typeof fetch>"u"||Yt.isNode){const s=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(s("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=s("node-fetch"):this._fetchType=fetch,this._fetchType=s("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(vR());if(typeof AbortController>"u"){const s=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=s("abort-controller")}else this._abortControllerType=AbortController}async send(n){if(n.abortSignal&&n.abortSignal.aborted)throw new Pa;if(!n.method)throw new Error("No method defined.");if(!n.url)throw new Error("No url defined.");const s=new this._abortControllerType;let o;n.abortSignal&&(n.abortSignal.onabort=()=>{s.abort(),o=new Pa});let c=null;if(n.timeout){const m=n.timeout;c=setTimeout(()=>{s.abort(),this._logger.log(Z.Warning,"Timeout from HTTP request."),o=new Em},m)}n.content===""&&(n.content=void 0),n.content&&(n.headers=n.headers||{},co(n.content)?n.headers["Content-Type"]="application/octet-stream":n.headers["Content-Type"]="text/plain;charset=UTF-8");let d;try{d=await this._fetchType(n.url,{body:n.content,cache:"no-cache",credentials:n.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...n.headers},method:n.method,mode:"cors",redirect:"follow",signal:s.signal})}catch(m){throw o||(this._logger.log(Z.Warning,`Error from HTTP request. ${m}.`),m)}finally{c&&clearTimeout(c),n.abortSignal&&(n.abortSignal.onabort=null)}if(!d.ok){const m=await F0(d,"text");throw new oo(m||d.statusText,d.status)}const h=await F0(d,n.responseType);return new zS(d.status,d.statusText,h)}getCookieString(n){let s="";return Yt.isNode&&this._jar&&this._jar.getCookies(n,(o,c)=>s=c.join("; ")),s}}function F0(t,n){let s;switch(n){case"arraybuffer":s=t.arrayBuffer();break;case"text":s=t.text();break;case"blob":case"document":case"json":throw new Error(`${n} is not supported.`);default:s=t.text();break}return s}class SR extends au{constructor(n){super(),this._logger=n}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new Pa):n.method?n.url?new Promise((s,o)=>{const c=new XMLHttpRequest;c.open(n.method,n.url,!0),c.withCredentials=n.withCredentials===void 0?!0:n.withCredentials,c.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.content===""&&(n.content=void 0),n.content&&(co(n.content)?c.setRequestHeader("Content-Type","application/octet-stream"):c.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const d=n.headers;d&&Object.keys(d).forEach(p=>{c.setRequestHeader(p,d[p])}),n.responseType&&(c.responseType=n.responseType),n.abortSignal&&(n.abortSignal.onabort=()=>{c.abort(),o(new Pa)}),n.timeout&&(c.timeout=n.timeout),c.onload=()=>{n.abortSignal&&(n.abortSignal.onabort=null),c.status>=200&&c.status<300?s(new zS(c.status,c.statusText,c.response||c.responseText)):o(new oo(c.response||c.responseText||c.statusText,c.status))},c.onerror=()=>{this._logger.log(Z.Warning,`Error from HTTP request. ${c.status}: ${c.statusText}.`),o(new oo(c.statusText,c.status))},c.ontimeout=()=>{this._logger.log(Z.Warning,"Timeout from HTTP request."),o(new Em)},c.send(n.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class wR extends au{constructor(n){if(super(),typeof fetch<"u"||Yt.isNode)this._httpClient=new bR(n);else if(typeof XMLHttpRequest<"u")this._httpClient=new SR(n);else throw new Error("No usable HttpClient found.")}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new Pa):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(n){return this._httpClient.getCookieString(n)}}class ha{static write(n){return`${n}${ha.RecordSeparator}`}static parse(n){if(n[n.length-1]!==ha.RecordSeparator)throw new Error("Message is incomplete.");const s=n.split(ha.RecordSeparator);return s.pop(),s}}ha.RecordSeparatorCode=30;ha.RecordSeparator=String.fromCharCode(ha.RecordSeparatorCode);class _R{writeHandshakeRequest(n){return ha.write(JSON.stringify(n))}parseHandshakeResponse(n){let s,o;if(co(n)){const h=new Uint8Array(n),m=h.indexOf(ha.RecordSeparatorCode);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;s=String.fromCharCode.apply(null,Array.prototype.slice.call(h.slice(0,g))),o=h.byteLength>g?h.slice(g).buffer:null}else{const h=n,m=h.indexOf(ha.RecordSeparator);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;s=h.substring(0,g),o=h.length>g?h.substring(g):null}const c=ha.parse(s),d=JSON.parse(c[0]);if(d.type)throw new Error("Expected a handshake response from the server.");return[o,d]}}var Ge;(function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close",t[t.Ack=8]="Ack",t[t.Sequence=9]="Sequence"})(Ge||(Ge={}));class CR{constructor(){this.observers=[]}next(n){for(const s of this.observers)s.next(n)}error(n){for(const s of this.observers)s.error&&s.error(n)}complete(){for(const n of this.observers)n.complete&&n.complete()}subscribe(n){return this.observers.push(n),new hR(this,n)}}class jR{constructor(n,s,o){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=n,this._connection=s,this._bufferSize=o}async _send(n){const s=this._protocol.writeMessage(n);let o=Promise.resolve();if(this._isInvocationMessage(n)){this._totalMessageCount++;let c=()=>{},d=()=>{};co(s)?this._bufferedByteCount+=s.byteLength:this._bufferedByteCount+=s.length,this._bufferedByteCount>=this._bufferSize&&(o=new Promise((p,h)=>{c=p,d=h})),this._messages.push(new TR(s,this._totalMessageCount,c,d))}try{this._reconnectInProgress||await this._connection.send(s)}catch{this._disconnected()}await o}_ack(n){let s=-1;for(let o=0;o<this._messages.length;o++){const c=this._messages[o];if(c._id<=n.sequenceId)s=o,co(c._message)?this._bufferedByteCount-=c._message.byteLength:this._bufferedByteCount-=c._message.length,c._resolver();else if(this._bufferedByteCount<this._bufferSize)c._resolver();else break}s!==-1&&(this._messages=this._messages.slice(s+1))}_shouldProcessMessage(n){if(this._waitForSequenceMessage)return n.type!==Ge.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(n))return!0;const s=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,s<=this._latestReceivedSequenceId?(s===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=s,this._ackTimer(),!0)}_resetSequence(n){if(n.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=n.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const n=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ge.Sequence,sequenceId:n}));const s=this._messages;for(const o of s)await this._connection.send(o._message);this._reconnectInProgress=!1}_dispose(n){n??(n=new Error("Unable to reconnect to server."));for(const s of this._messages)s._rejector(n)}_isInvocationMessage(n){switch(n.type){case Ge.Invocation:case Ge.StreamItem:case Ge.Completion:case Ge.StreamInvocation:case Ge.CancelInvocation:return!0;case Ge.Close:case Ge.Sequence:case Ge.Ping:case Ge.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ge.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class TR{constructor(n,s,o,c){this._message=n,this._id=s,this._resolver=o,this._rejector=c}}const kR=30*1e3,MR=15*1e3,ER=1e5;var Ct;(function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"})(Ct||(Ct={}));class Am{static create(n,s,o,c,d,p,h){return new Am(n,s,o,c,d,p,h)}constructor(n,s,o,c,d,p,h){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Z.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},vn.isRequired(n,"connection"),vn.isRequired(s,"logger"),vn.isRequired(o,"protocol"),this.serverTimeoutInMilliseconds=d??kR,this.keepAliveIntervalInMilliseconds=p??MR,this._statefulReconnectBufferSize=h??ER,this._logger=s,this._protocol=o,this.connection=n,this._reconnectPolicy=c,this._handshakeProtocol=new _R,this.connection.onreceive=m=>this._processIncomingData(m),this.connection.onclose=m=>this._connectionClosed(m),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Ct.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ge.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(n){if(this._connectionState!==Ct.Disconnected&&this._connectionState!==Ct.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Ct.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Ct.Connecting,this._logger.log(Z.Debug,"Starting HubConnection.");try{await this._startInternal(),Yt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Ct.Connected,this._connectionStarted=!0,this._logger.log(Z.Debug,"HubConnection connected successfully.")}catch(n){return this._connectionState=Ct.Disconnected,this._logger.log(Z.Debug,`HubConnection failed to start successfully because of error '${n}'.`),Promise.reject(n)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const n=new Promise((s,o)=>{this._handshakeResolver=s,this._handshakeRejecter=o});await this.connection.start(this._protocol.transferFormat);try{let s=this._protocol.version;this.connection.features.reconnect||(s=1);const o={protocol:this._protocol.name,version:s};if(this._logger.log(Z.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(o)),this._logger.log(Z.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await n,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new jR(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(s){throw this._logger.log(Z.Debug,`Hub handshake failed with error '${s}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(s),s}}async stop(){const n=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await n}catch{}}_stopInternal(n){if(this._connectionState===Ct.Disconnected)return this._logger.log(Z.Debug,`Call to HubConnection.stop(${n}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===Ct.Disconnecting)return this._logger.log(Z.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const s=this._connectionState;return this._connectionState=Ct.Disconnecting,this._logger.log(Z.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Z.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(s===Ct.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=n||new Pa("The connection was stopped before the hub handshake could complete."),this.connection.stop(n))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(n,...s){const[o,c]=this._replaceStreamingParams(s),d=this._createStreamInvocation(n,s,c);let p;const h=new CR;return h.cancelCallback=()=>{const m=this._createCancelInvocation(d.invocationId);return delete this._callbacks[d.invocationId],p.then(()=>this._sendWithProtocol(m))},this._callbacks[d.invocationId]=(m,g)=>{if(g){h.error(g);return}else m&&(m.type===Ge.Completion?m.error?h.error(new Error(m.error)):h.complete():h.next(m.item))},p=this._sendWithProtocol(d).catch(m=>{h.error(m),delete this._callbacks[d.invocationId]}),this._launchStreams(o,p),h}_sendMessage(n){return this._resetKeepAliveInterval(),this.connection.send(n)}_sendWithProtocol(n){return this._messageBuffer?this._messageBuffer._send(n):this._sendMessage(this._protocol.writeMessage(n))}send(n,...s){const[o,c]=this._replaceStreamingParams(s),d=this._sendWithProtocol(this._createInvocation(n,s,!0,c));return this._launchStreams(o,d),d}invoke(n,...s){const[o,c]=this._replaceStreamingParams(s),d=this._createInvocation(n,s,!1,c);return new Promise((h,m)=>{this._callbacks[d.invocationId]=(y,v)=>{if(v){m(v);return}else y&&(y.type===Ge.Completion?y.error?m(new Error(y.error)):h(y.result):m(new Error(`Unexpected message type: ${y.type}`)))};const g=this._sendWithProtocol(d).catch(y=>{m(y),delete this._callbacks[d.invocationId]});this._launchStreams(o,g)})}on(n,s){!n||!s||(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),this._methods[n].indexOf(s)===-1&&this._methods[n].push(s))}off(n,s){if(!n)return;n=n.toLowerCase();const o=this._methods[n];if(o)if(s){const c=o.indexOf(s);c!==-1&&(o.splice(c,1),o.length===0&&delete this._methods[n])}else delete this._methods[n]}onclose(n){n&&this._closedCallbacks.push(n)}onreconnecting(n){n&&this._reconnectingCallbacks.push(n)}onreconnected(n){n&&this._reconnectedCallbacks.push(n)}_processIncomingData(n){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(n=this._processHandshakeResponse(n),this._receivedHandshakeResponse=!0),n){const s=this._protocol.parseMessages(n,this._logger);for(const o of s)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(o)))switch(o.type){case Ge.Invocation:this._invokeClientMethod(o).catch(c=>{this._logger.log(Z.Error,`Invoke client method threw error: ${Ff(c)}`)});break;case Ge.StreamItem:case Ge.Completion:{const c=this._callbacks[o.invocationId];if(c){o.type===Ge.Completion&&delete this._callbacks[o.invocationId];try{c(o)}catch(d){this._logger.log(Z.Error,`Stream callback threw error: ${Ff(d)}`)}}break}case Ge.Ping:break;case Ge.Close:{this._logger.log(Z.Information,"Close message received from server.");const c=o.error?new Error("Server returned an error on close: "+o.error):void 0;o.allowReconnect===!0?this.connection.stop(c):this._stopPromise=this._stopInternal(c);break}case Ge.Ack:this._messageBuffer&&this._messageBuffer._ack(o);break;case Ge.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(o);break;default:this._logger.log(Z.Warning,`Invalid message type: ${o.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(n){let s,o;try{[o,s]=this._handshakeProtocol.parseHandshakeResponse(n)}catch(c){const d="Error parsing handshake response: "+c;this._logger.log(Z.Error,d);const p=new Error(d);throw this._handshakeRejecter(p),p}if(s.error){const c="Server returned handshake error: "+s.error;this._logger.log(Z.Error,c);const d=new Error(c);throw this._handshakeRejecter(d),d}else this._logger.log(Z.Debug,"Server handshake complete.");return this._handshakeResolver(),o}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!this.connection.features||!this.connection.features.inherentKeepAlive){this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds);let n=this._nextKeepAlive-new Date().getTime();if(n<0){this._connectionState===Ct.Connected&&this._trySendPingMessage();return}this._pingServerHandle===void 0&&(n<0&&(n=0),this._pingServerHandle=setTimeout(async()=>{this._connectionState===Ct.Connected&&await this._trySendPingMessage()},n))}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(n){const s=n.target.toLowerCase(),o=this._methods[s];if(!o){this._logger.log(Z.Warning,`No client method with the name '${s}' found.`),n.invocationId&&(this._logger.log(Z.Warning,`No result given for '${s}' method and invocation ID '${n.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)));return}const c=o.slice(),d=!!n.invocationId;let p,h,m;for(const g of c)try{const y=p;p=await g.apply(this,n.arguments),d&&p&&y&&(this._logger.log(Z.Error,`Multiple results provided for '${s}'. Sending error to server.`),m=this._createCompletionMessage(n.invocationId,"Client provided multiple results.",null)),h=void 0}catch(y){h=y,this._logger.log(Z.Error,`A callback for the method '${s}' threw error '${y}'.`)}m?await this._sendWithProtocol(m):d?(h?m=this._createCompletionMessage(n.invocationId,`${h}`,null):p!==void 0?m=this._createCompletionMessage(n.invocationId,null,p):(this._logger.log(Z.Warning,`No result given for '${s}' method and invocation ID '${n.invocationId}'.`),m=this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(m)):p&&this._logger.log(Z.Error,`Result given for '${s}' method but server is not expecting a result.`)}_connectionClosed(n){this._logger.log(Z.Debug,`HubConnection.connectionClosed(${n}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||n||new Pa("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(n||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Ct.Disconnecting?this._completeClose(n):this._connectionState===Ct.Connected&&this._reconnectPolicy?this._reconnect(n):this._connectionState===Ct.Connected&&this._completeClose(n)}_completeClose(n){if(this._connectionStarted){this._connectionState=Ct.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(n??new Error("Connection closed.")),this._messageBuffer=void 0),Yt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(s=>s.apply(this,[n]))}catch(s){this._logger.log(Z.Error,`An onclose callback called with error '${n}' threw error '${s}'.`)}}}async _reconnect(n){const s=Date.now();let o=0,c=n!==void 0?n:new Error("Attempting to reconnect due to a unknown error."),d=this._getNextRetryDelay(o,0,c);if(d===null){this._logger.log(Z.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(n);return}if(this._connectionState=Ct.Reconnecting,n?this._logger.log(Z.Information,`Connection reconnecting because of error '${n}'.`):this._logger.log(Z.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(p=>p.apply(this,[n]))}catch(p){this._logger.log(Z.Error,`An onreconnecting callback called with error '${n}' threw error '${p}'.`)}if(this._connectionState!==Ct.Reconnecting){this._logger.log(Z.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;d!==null;){if(this._logger.log(Z.Information,`Reconnect attempt number ${o+1} will start in ${d} ms.`),await new Promise(p=>{this._reconnectDelayHandle=setTimeout(p,d)}),this._reconnectDelayHandle=void 0,this._connectionState!==Ct.Reconnecting){this._logger.log(Z.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Ct.Connected,this._logger.log(Z.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(p=>p.apply(this,[this.connection.connectionId]))}catch(p){this._logger.log(Z.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${p}'.`)}return}catch(p){if(this._logger.log(Z.Information,`Reconnect attempt failed because of error '${p}'.`),this._connectionState!==Ct.Reconnecting){this._logger.log(Z.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===Ct.Disconnecting&&this._completeClose();return}o++,c=p instanceof Error?p:new Error(p.toString()),d=this._getNextRetryDelay(o,Date.now()-s,c)}}this._logger.log(Z.Information,`Reconnect retries have been exhausted after ${Date.now()-s} ms and ${o} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(n,s,o){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:s,previousRetryCount:n,retryReason:o})}catch(c){return this._logger.log(Z.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${n}, ${s}) threw error '${c}'.`),null}}_cancelCallbacksWithError(n){const s=this._callbacks;this._callbacks={},Object.keys(s).forEach(o=>{const c=s[o];try{c(null,n)}catch(d){this._logger.log(Z.Error,`Stream 'error' callback called with '${n}' threw error: ${Ff(d)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(n,s,o,c){if(o)return c.length!==0?{target:n,arguments:s,streamIds:c,type:Ge.Invocation}:{target:n,arguments:s,type:Ge.Invocation};{const d=this._invocationId;return this._invocationId++,c.length!==0?{target:n,arguments:s,invocationId:d.toString(),streamIds:c,type:Ge.Invocation}:{target:n,arguments:s,invocationId:d.toString(),type:Ge.Invocation}}}_launchStreams(n,s){if(n.length!==0){s||(s=Promise.resolve());for(const o in n)n[o].subscribe({complete:()=>{s=s.then(()=>this._sendWithProtocol(this._createCompletionMessage(o)))},error:c=>{let d;c instanceof Error?d=c.message:c&&c.toString?d=c.toString():d="Unknown error",s=s.then(()=>this._sendWithProtocol(this._createCompletionMessage(o,d)))},next:c=>{s=s.then(()=>this._sendWithProtocol(this._createStreamItemMessage(o,c)))}})}}_replaceStreamingParams(n){const s=[],o=[];for(let c=0;c<n.length;c++){const d=n[c];if(this._isObservable(d)){const p=this._invocationId;this._invocationId++,s[p]=d,o.push(p.toString()),n.splice(c,1)}}return[s,o]}_isObservable(n){return n&&n.subscribe&&typeof n.subscribe=="function"}_createStreamInvocation(n,s,o){const c=this._invocationId;return this._invocationId++,o.length!==0?{target:n,arguments:s,invocationId:c.toString(),streamIds:o,type:Ge.StreamInvocation}:{target:n,arguments:s,invocationId:c.toString(),type:Ge.StreamInvocation}}_createCancelInvocation(n){return{invocationId:n,type:Ge.CancelInvocation}}_createStreamItemMessage(n,s){return{invocationId:n,item:s,type:Ge.StreamItem}}_createCompletionMessage(n,s,o){return s?{error:s,invocationId:n,type:Ge.Completion}:{invocationId:n,result:o,type:Ge.Completion}}_createCloseMessage(){return{type:Ge.Close}}async _trySendPingMessage(){try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}}const AR=[0,2e3,1e4,3e4,null];class V0{constructor(n){this._retryDelays=n!==void 0?[...n,null]:AR}nextRetryDelayInMilliseconds(n){return this._retryDelays[n.previousRetryCount]}}class ro{}ro.Authorization="Authorization";ro.Cookie="Cookie";class RR extends au{constructor(n,s){super(),this._innerClient=n,this._accessTokenFactory=s}async send(n){let s=!0;this._accessTokenFactory&&(!this._accessToken||n.url&&n.url.indexOf("/negotiate?")>0)&&(s=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(n);const o=await this._innerClient.send(n);return s&&o.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(n),await this._innerClient.send(n)):o}_setAuthorizationHeader(n){n.headers||(n.headers={}),this._accessToken?n.headers[ro.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&n.headers[ro.Authorization]&&delete n.headers[ro.Authorization]}getCookieString(n){return this._innerClient.getCookieString(n)}}var Zt;(function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"})(Zt||(Zt={}));var Vn;(function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"})(Vn||(Vn={}));let DR=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class q0{get pollAborted(){return this._pollAbort.aborted}constructor(n,s,o){this._httpClient=n,this._logger=s,this._pollAbort=new DR,this._options=o,this._running=!1,this.onreceive=null,this.onclose=null}async connect(n,s){if(vn.isRequired(n,"url"),vn.isRequired(s,"transferFormat"),vn.isIn(s,Vn,"transferFormat"),this._url=n,this._logger.log(Z.Trace,"(LongPolling transport) Connecting."),s===Vn.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[o,c]=pr(),d={[o]:c,...this._options.headers},p={abortSignal:this._pollAbort.signal,headers:d,timeout:1e5,withCredentials:this._options.withCredentials};s===Vn.Binary&&(p.responseType="arraybuffer");const h=`${n}&_=${Date.now()}`;this._logger.log(Z.Trace,`(LongPolling transport) polling: ${h}.`);const m=await this._httpClient.get(h,p);m.statusCode!==200?(this._logger.log(Z.Error,`(LongPolling transport) Unexpected response code: ${m.statusCode}.`),this._closeError=new oo(m.statusText||"",m.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,p)}async _poll(n,s){try{for(;this._running;)try{const o=`${n}&_=${Date.now()}`;this._logger.log(Z.Trace,`(LongPolling transport) polling: ${o}.`);const c=await this._httpClient.get(o,s);c.statusCode===204?(this._logger.log(Z.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):c.statusCode!==200?(this._logger.log(Z.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new oo(c.statusText||"",c.statusCode),this._running=!1):c.content?(this._logger.log(Z.Trace,`(LongPolling transport) data received. ${Pl(c.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(c.content)):this._logger.log(Z.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(o){this._running?o instanceof Em?this._logger.log(Z.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=o,this._running=!1):this._logger.log(Z.Trace,`(LongPolling transport) Poll errored after shutdown: ${o.message}`)}}finally{this._logger.log(Z.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(n){return this._running?BS(this._logger,"LongPolling",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Z.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Z.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const n={},[s,o]=pr();n[s]=o;const c={headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let d;try{await this._httpClient.delete(this._url,c)}catch(p){d=p}d?d instanceof oo&&(d.statusCode===404?this._logger.log(Z.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Z.Trace,`(LongPolling transport) Error sending a DELETE request: ${d}`)):this._logger.log(Z.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Z.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let n="(LongPolling transport) Firing onclose event.";this._closeError&&(n+=" Error: "+this._closeError),this._logger.log(Z.Trace,n),this.onclose(this._closeError)}}}class NR{constructor(n,s,o,c){this._httpClient=n,this._accessToken=s,this._logger=o,this._options=c,this.onreceive=null,this.onclose=null}async connect(n,s){return vn.isRequired(n,"url"),vn.isRequired(s,"transferFormat"),vn.isIn(s,Vn,"transferFormat"),this._logger.log(Z.Trace,"(SSE transport) Connecting."),this._url=n,this._accessToken&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((o,c)=>{let d=!1;if(s!==Vn.Text){c(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let p;if(Yt.isBrowser||Yt.isWebWorker)p=new this._options.EventSource(n,{withCredentials:this._options.withCredentials});else{const h=this._httpClient.getCookieString(n),m={};m.Cookie=h;const[g,y]=pr();m[g]=y,p=new this._options.EventSource(n,{withCredentials:this._options.withCredentials,headers:{...m,...this._options.headers}})}try{p.onmessage=h=>{if(this.onreceive)try{this._logger.log(Z.Trace,`(SSE transport) data received. ${Pl(h.data,this._options.logMessageContent)}.`),this.onreceive(h.data)}catch(m){this._close(m);return}},p.onerror=h=>{d?this._close():c(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},p.onopen=()=>{this._logger.log(Z.Information,`SSE connected to ${this._url}`),this._eventSource=p,d=!0,o()}}catch(h){c(h);return}})}async send(n){return this._eventSource?BS(this._logger,"SSE",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}class zR{constructor(n,s,o,c,d,p){this._logger=o,this._accessTokenFactory=s,this._logMessageContent=c,this._webSocketConstructor=d,this._httpClient=n,this.onreceive=null,this.onclose=null,this._headers=p}async connect(n,s){vn.isRequired(n,"url"),vn.isRequired(s,"transferFormat"),vn.isIn(s,Vn,"transferFormat"),this._logger.log(Z.Trace,"(WebSockets transport) Connecting.");let o;return this._accessTokenFactory&&(o=await this._accessTokenFactory()),new Promise((c,d)=>{n=n.replace(/^http/,"ws");let p;const h=this._httpClient.getCookieString(n);let m=!1;if(Yt.isNode||Yt.isReactNative){const g={},[y,v]=pr();g[y]=v,o&&(g[ro.Authorization]=`Bearer ${o}`),h&&(g[ro.Cookie]=h),p=new this._webSocketConstructor(n,void 0,{headers:{...g,...this._headers}})}else o&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(o)}`);p||(p=new this._webSocketConstructor(n)),s===Vn.Binary&&(p.binaryType="arraybuffer"),p.onopen=g=>{this._logger.log(Z.Information,`WebSocket connected to ${n}.`),this._webSocket=p,m=!0,c()},p.onerror=g=>{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="There was an error with the transport",this._logger.log(Z.Information,`(WebSockets transport) ${y}.`)},p.onmessage=g=>{if(this._logger.log(Z.Trace,`(WebSockets transport) data received. ${Pl(g.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(g.data)}catch(y){this._close(y);return}},p.onclose=g=>{if(m)this._close(g);else{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",d(new Error(y))}}})}send(n){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Z.Trace,`(WebSockets transport) sending data. ${Pl(n,this._logMessageContent)}.`),this._webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(n){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Z.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(n)&&(n.wasClean===!1||n.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${n.code} (${n.reason||"no reason given"}).`)):n instanceof Error?this.onclose(n):this.onclose())}_isCloseEvent(n){return n&&typeof n.wasClean=="boolean"&&typeof n.code=="number"}}const G0=100;class BR{constructor(n,s={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,vn.isRequired(n,"url"),this._logger=fR(s.logger),this.baseUrl=this._resolveUrl(n),s=s||{},s.logMessageContent=s.logMessageContent===void 0?!1:s.logMessageContent,typeof s.withCredentials=="boolean"||s.withCredentials===void 0)s.withCredentials=s.withCredentials===void 0?!0:s.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");s.timeout=s.timeout===void 0?100*1e3:s.timeout;let o=null,c=null;if(Yt.isNode&&typeof require<"u"){const d=typeof __webpack_require__=="function"?__non_webpack_require__:require;o=d("ws"),c=d("eventsource")}!Yt.isNode&&typeof WebSocket<"u"&&!s.WebSocket?s.WebSocket=WebSocket:Yt.isNode&&!s.WebSocket&&o&&(s.WebSocket=o),!Yt.isNode&&typeof EventSource<"u"&&!s.EventSource?s.EventSource=EventSource:Yt.isNode&&!s.EventSource&&typeof c<"u"&&(s.EventSource=c),this._httpClient=new RR(s.httpClient||new wR(this._logger),s.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=s,this.onreceive=null,this.onclose=null}async start(n){if(n=n||Vn.Binary,vn.isIn(n,Vn,"transferFormat"),this._logger.log(Z.Debug,`Starting connection with transfer format '${Vn[n]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(n),await this._startInternalPromise,this._connectionState==="Disconnecting"){const s="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Z.Error,s),await this._stopPromise,Promise.reject(new Pa(s))}else if(this._connectionState!=="Connected"){const s="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Z.Error,s),Promise.reject(new Pa(s))}this._connectionStarted=!0}send(n){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Rm(this.transport)),this._sendQueue.send(n))}async stop(n){if(this._connectionState==="Disconnected")return this._logger.log(Z.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(Z.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(s=>{this._stopPromiseResolver=s}),await this._stopInternal(n),await this._stopPromise}async _stopInternal(n){this._stopError=n;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(s){this._logger.log(Z.Error,`HttpConnection.transport.stop() threw error '${s}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(Z.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(n){let s=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Zt.WebSockets)this.transport=this._constructTransport(Zt.WebSockets),await this._startTransport(s,n);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let o=null,c=0;do{if(o=await this._getNegotiationResponse(s),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Pa("The connection was stopped during negotiation.");if(o.error)throw new Error(o.error);if(o.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(o.url&&(s=o.url),o.accessToken){const d=o.accessToken;this._accessTokenFactory=()=>d,this._httpClient._accessToken=d,this._httpClient._accessTokenFactory=void 0}c++}while(o.url&&c<G0);if(c===G0&&o.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(s,this._options.transport,o,n)}this.transport instanceof q0&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(Z.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(o){return this._logger.log(Z.Error,"Failed to start the connection: "+o),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(o)}}async _getNegotiationResponse(n){const s={},[o,c]=pr();s[o]=c;const d=this._resolveNegotiateUrl(n);this._logger.log(Z.Debug,`Sending negotiation request: ${d}.`);try{const p=await this._httpClient.post(d,{content:"",headers:{...s,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(p.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${p.statusCode}'`));const h=JSON.parse(p.content);return(!h.negotiateVersion||h.negotiateVersion<1)&&(h.connectionToken=h.connectionId),h.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new $0("Client didn't negotiate Stateful Reconnect but the server did.")):h}catch(p){let h="Failed to complete negotiation with the server: "+p;return p instanceof oo&&p.statusCode===404&&(h=h+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Z.Error,h),Promise.reject(new $0(h))}}_createConnectUrl(n,s){return s?n+(n.indexOf("?")===-1?"?":"&")+`id=${s}`:n}async _createTransport(n,s,o,c){let d=this._createConnectUrl(n,o.connectionToken);if(this._isITransport(s)){this._logger.log(Z.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=s,await this._startTransport(d,c),this.connectionId=o.connectionId;return}const p=[],h=o.availableTransports||[];let m=o;for(const g of h){const y=this._resolveTransportOrError(g,s,c,m?.useStatefulReconnect===!0);if(y instanceof Error)p.push(`${g.transport} failed:`),p.push(y);else if(this._isITransport(y)){if(this.transport=y,!m){try{m=await this._getNegotiationResponse(n)}catch(v){return Promise.reject(v)}d=this._createConnectUrl(n,m.connectionToken)}try{await this._startTransport(d,c),this.connectionId=m.connectionId;return}catch(v){if(this._logger.log(Z.Error,`Failed to start the transport '${g.transport}': ${v}`),m=void 0,p.push(new cR(`${g.transport} failed: ${v}`,Zt[g.transport])),this._connectionState!=="Connecting"){const S="Failed to select transport before stop() was called.";return this._logger.log(Z.Debug,S),Promise.reject(new Pa(S))}}}}return p.length>0?Promise.reject(new dR(`Unable to connect to the server with any of the available transports. ${p.join(" ")}`,p)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(n){switch(n){case Zt.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new zR(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Zt.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new NR(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Zt.LongPolling:return new q0(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${n}.`)}}_startTransport(n,s){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async o=>{let c=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(n,s),await this.features.resend()}catch{c=!0}else{this._stopConnection(o);return}c&&this._stopConnection(o)}:this.transport.onclose=o=>this._stopConnection(o),this.transport.connect(n,s)}_resolveTransportOrError(n,s,o,c){const d=Zt[n.transport];if(d==null)return this._logger.log(Z.Debug,`Skipping transport '${n.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${n.transport}' because it is not supported by this client.`);if(UR(s,d))if(n.transferFormats.map(h=>Vn[h]).indexOf(o)>=0){if(d===Zt.WebSockets&&!this._options.WebSocket||d===Zt.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Z.Debug,`Skipping transport '${Zt[d]}' because it is not supported in your environment.'`),new rR(`'${Zt[d]}' is not supported in your environment.`,d);this._logger.log(Z.Debug,`Selecting transport '${Zt[d]}'.`);try{return this.features.reconnect=d===Zt.WebSockets?c:void 0,this._constructTransport(d)}catch(h){return h}}else return this._logger.log(Z.Debug,`Skipping transport '${Zt[d]}' because it does not support the requested transfer format '${Vn[o]}'.`),new Error(`'${Zt[d]}' does not support ${Vn[o]}.`);else return this._logger.log(Z.Debug,`Skipping transport '${Zt[d]}' because it was disabled by the client.`),new lR(`'${Zt[d]}' is disabled by the client.`,d)}_isITransport(n){return n&&typeof n=="object"&&"connect"in n}_stopConnection(n){if(this._logger.log(Z.Debug,`HttpConnection.stopConnection(${n}) called while in state ${this._connectionState}.`),this.transport=void 0,n=this._stopError||n,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(Z.Debug,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(Z.Warning,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${n}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),n?this._logger.log(Z.Error,`Connection disconnected with error '${n}'.`):this._logger.log(Z.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(s=>{this._logger.log(Z.Error,`TransportSendQueue.stop() threw error '${s}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(n)}catch(s){this._logger.log(Z.Error,`HttpConnection.onclose(${n}) threw error '${s}'.`)}}}_resolveUrl(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(!Yt.isBrowser)throw new Error(`Cannot resolve '${n}'.`);const s=window.document.createElement("a");return s.href=n,this._logger.log(Z.Information,`Normalizing '${n}' to '${s.href}'.`),s.href}_resolveNegotiateUrl(n){const s=new URL(n);s.pathname.endsWith("/")?s.pathname+="negotiate":s.pathname+="/negotiate";const o=new URLSearchParams(s.searchParams);return o.has("negotiateVersion")||o.append("negotiateVersion",this._negotiateVersion.toString()),o.has("useStatefulReconnect")?o.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&o.append("useStatefulReconnect","true"),s.search=o.toString(),s.toString()}}function UR(t,n){return!t||(n&t)!==0}class Rm{constructor(n){this._transport=n,this._buffer=[],this._executing=!0,this._sendBufferedData=new vd,this._transportResult=new vd,this._sendLoopPromise=this._sendLoop()}send(n){return this._bufferData(n),this._transportResult||(this._transportResult=new vd),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(n){if(this._buffer.length&&typeof this._buffer[0]!=typeof n)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof n}`);this._buffer.push(n),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new vd;const n=this._transportResult;this._transportResult=void 0;const s=typeof this._buffer[0]=="string"?this._buffer.join(""):Rm._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(s),n.resolve()}catch(o){n.reject(o)}}}static _concatBuffers(n){const s=n.map(d=>d.byteLength).reduce((d,p)=>d+p),o=new Uint8Array(s);let c=0;for(const d of n)o.set(new Uint8Array(d),c),c+=d.byteLength;return o.buffer}}class vd{constructor(){this.promise=new Promise((n,s)=>[this._resolver,this._rejecter]=[n,s])}resolve(){this._resolver()}reject(n){this._rejecter(n)}}const IR="json";class OR{constructor(){this.name=IR,this.version=2,this.transferFormat=Vn.Text}parseMessages(n,s){if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];s===null&&(s=Ll.instance);const o=ha.parse(n),c=[];for(const d of o){const p=JSON.parse(d);if(typeof p.type!="number")throw new Error("Invalid payload.");switch(p.type){case Ge.Invocation:this._isInvocationMessage(p);break;case Ge.StreamItem:this._isStreamItemMessage(p);break;case Ge.Completion:this._isCompletionMessage(p);break;case Ge.Ping:break;case Ge.Close:break;case Ge.Ack:this._isAckMessage(p);break;case Ge.Sequence:this._isSequenceMessage(p);break;default:s.log(Z.Information,"Unknown message type '"+p.type+"' ignored.");continue}c.push(p)}return c}writeMessage(n){return ha.write(JSON.stringify(n))}_isInvocationMessage(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message."),n.invocationId!==void 0&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message."),this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}_isAckMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(n,s){if(typeof n!="string"||n==="")throw new Error(s)}}const LR={trace:Z.Trace,debug:Z.Debug,info:Z.Information,information:Z.Information,warn:Z.Warning,warning:Z.Warning,error:Z.Error,critical:Z.Critical,none:Z.None};function PR(t){const n=LR[t.toLowerCase()];if(typeof n<"u")return n;throw new Error(`Unknown log level: ${t}`)}class HR{configureLogging(n){if(vn.isRequired(n,"logging"),$R(n))this.logger=n;else if(typeof n=="string"){const s=PR(n);this.logger=new $d(s)}else this.logger=new $d(n);return this}withUrl(n,s){return vn.isRequired(n,"url"),vn.isNotEmpty(n,"url"),this.url=n,typeof s=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...s}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:s},this}withHubProtocol(n){return vn.isRequired(n,"protocol"),this.protocol=n,this}withAutomaticReconnect(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return n?Array.isArray(n)?this.reconnectPolicy=new V0(n):this.reconnectPolicy=n:this.reconnectPolicy=new V0,this}withServerTimeout(n){return vn.isRequired(n,"milliseconds"),this._serverTimeoutInMilliseconds=n,this}withKeepAliveInterval(n){return vn.isRequired(n,"milliseconds"),this._keepAliveIntervalInMilliseconds=n,this}withStatefulReconnect(n){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=n?.bufferSize,this}build(){const n=this.httpConnectionOptions||{};if(n.logger===void 0&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const s=new BR(this.url,n);return Am.create(s,this.logger||Ll.instance,this.protocol||new OR,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function $R(t){return t.log!==void 0}class FR{connection=null;eventHandlers={};reconnectAttempts=0;maxReconnectAttempts=5;isManualDisconnect=!1;constructor(){const s="https://your-domain.com/api".replace("/api","/hubs/chat");this.connection=new HR().withUrl(s,{accessTokenFactory:()=>localStorage.getItem("token")||"",skipNegotiation:!1,withCredentials:!0,transport:Zt.WebSockets|Zt.ServerSentEvents|Zt.LongPolling}).withAutomaticReconnect({nextRetryDelayInMilliseconds:o=>o.previousRetryCount>=this.maxReconnectAttempts?null:Math.min(1e3*Math.pow(2,o.previousRetryCount),32e3)}).configureLogging(Z.Information).build(),this.setupConnectionHandlers(),this.setupEventListeners()}setupConnectionHandlers(){this.connection&&(this.connection.onreconnecting(n=>{console.warn("SignalR reconnecting...",n),this.reconnectAttempts++}),this.connection.onreconnected(n=>{console.log("SignalR reconnected:",n),this.reconnectAttempts=0,this.rejoinChats()}),this.connection.onclose(n=>{console.error("SignalR connection closed:",n),!this.isManualDisconnect&&this.reconnectAttempts<this.maxReconnectAttempts&&setTimeout(()=>this.start(),5e3)}))}setupEventListeners(){this.connection&&(this.connection.on("UserOnline",n=>{console.log("[SignalR] UserOnline event received:",n),this.eventHandlers.onUserOnline?.(n)}),this.connection.on("UserOffline",n=>{console.log("[SignalR] UserOffline event received:",n),this.eventHandlers.onUserOffline?.(n)}),this.connection.on("ReceiveMessage",n=>{this.eventHandlers.onReceiveMessage?.(n)}),this.connection.on("MessageEdited",n=>{this.eventHandlers.onMessageEdited?.(n)}),this.connection.on("MessageDeleted",n=>{this.eventHandlers.onMessageDeleted?.(n)}),this.connection.on("ReactionAdded",n=>{console.log("[SignalR] ReactionAdded event received:",n),this.eventHandlers.onReactionAdded?.(n)}),this.connection.on("ReactionRemoved",n=>{console.log("[SignalR] ReactionRemoved event received:",n),this.eventHandlers.onReactionRemoved?.(n)}),this.connection.on("UserTyping",n=>{this.eventHandlers.onUserTyping?.(n)}),this.connection.on("UserStoppedTyping",n=>{this.eventHandlers.onUserStoppedTyping?.(n)}),this.connection.on("NewNotification",n=>{this.eventHandlers.onNewNotification?.(n)}),this.connection.on("NotificationsMarkedSeen",n=>{this.eventHandlers.onNotificationsMarkedSeen?.(n)}),this.connection.on("MessagePinned",n=>{this.eventHandlers.onMessagePinned?.(n)}),this.connection.on("MessageUnpinned",n=>{this.eventHandlers.onMessageUnpinned?.(n)}),this.connection.on("AddedToChat",n=>{console.log("[SignalR] AddedToChat:",n),this.eventHandlers.onAddedToChat?.(n)}),this.connection.on("NewConversation",n=>{console.log("[SignalR] NewConversation:",n),this.eventHandlers.onNewConversation?.(n)}),this.connection.on("ConversationCreated",n=>{console.log("[SignalR] ConversationCreated:",n),this.eventHandlers.onConversationCreated?.(n)}),this.connection.on("PermissionGranted",n=>{console.log("[SignalR] PermissionGranted:",n),this.eventHandlers.onPermissionGranted?.(n)}),this.connection.on("PermissionRevoked",n=>{console.log("[SignalR] PermissionRevoked:",n),this.eventHandlers.onPermissionRevoked?.(n)}),this.connection.on("AllPermissionsRevoked",n=>{console.log("[SignalR] AllPermissionsRevoked:",n),this.eventHandlers.onAllPermissionsRevoked?.(n)}),this.connection.on("UserBlockedYou",n=>{console.log("[SignalR] UserBlockedYou:",n),this.eventHandlers.onUserBlockedYou?.(n)}),this.connection.on("YouBlockedUser",n=>{console.log("[SignalR] YouBlockedUser:",n),this.eventHandlers.onYouBlockedUser?.(n)}),this.connection.on("UserUnblockedYou",n=>{console.log("[SignalR] UserUnblockedYou:",n),this.eventHandlers.onUserUnblockedYou?.(n)}),this.connection.on("YouUnblockedUser",n=>{console.log("[SignalR] YouUnblockedUser:",n),this.eventHandlers.onYouUnblockedUser?.(n)}),this.connection.on("ChatDeleted",n=>{console.log("[SignalR] ChatDeleted:",n),this.eventHandlers.onChatDeleted?.(n)}),this.connection.on("RemovedFromChat",n=>{console.log("[SignalR] RemovedFromChat:",n),this.eventHandlers.onRemovedFromChat?.(n)}),this.connection.on("MessagesMarkedSeen",n=>{console.log("[SignalR] MessagesMarkedSeen:",n),this.eventHandlers.onMessagesMarkedSeen?.(n)}),this.connection.on("Error",n=>{console.error("SignalR Error:",n),this.eventHandlers.onError?.(n)}))}setEventHandlers(n){this.eventHandlers={...this.eventHandlers,...n}}async start(){if(this.connection)try{this.connection.state===Ct.Disconnected&&(this.isManualDisconnect=!1,await this.connection.start(),console.log("SignalR Connected:",this.connection.connectionId))}catch(n){throw console.error("Error starting SignalR connection:",n),n}}async getPresenceStates(n){if(!this.connection||this.connection.state!==Ct.Connected)return console.warn("Cannot fetch presence states: not connected"),{};try{const s=await this.connection.invoke("GetPresenceStates",n);return console.log(`Fetched initial presence states for ${n.length} users`),s}catch(s){return console.error("Error fetching presence states:",s),{}}}async stop(){if(this.connection)try{this.isManualDisconnect=!0,await this.connection.stop(),console.log("SignalR Disconnected")}catch(n){console.error("Error stopping SignalR connection:",n)}}getConnectionState(){return this.connection?.state||Ct.Disconnected}isConnected(){return this.connection?.state===Ct.Connected}activeChats=new Set;async joinChat(n){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("JoinChat",n),this.activeChats.add(n),console.log("Joined chat:",n)}catch(s){throw console.error("Error joining chat:",s),s}}async leaveChat(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("LeaveChat",n),this.activeChats.delete(n),console.log("Left chat:",n)}catch(s){console.error("Error leaving chat:",s)}}async rejoinChats(){const n=Array.from(this.activeChats);for(const s of n)try{await this.connection?.invoke("JoinChat",s)}catch(o){console.error("Error rejoining chat:",s,o)}}async sendMessage(n,s,o=null,c=null){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("SendMessage",{chatId:n,content:s,receiverId:o,replyId:c})}catch(d){throw console.error("Error sending message:",d),d}}async editMessage(n,s,o){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("EditMessage",n,s,o)}catch(c){throw console.error("Error editing message:",c),c}}async deleteMessage(n,s){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("DeleteMessage",n,s)}catch(o){throw console.error("Error deleting message:",o),o}}async addReaction(n,s,o){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("AddReaction",n,s,o)}catch(c){throw console.error("Error adding reaction:",c),c}}async removeReaction(n,s){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("RemoveReaction",n,s)}catch(o){throw console.error("Error removing reaction:",o),o}}async sendTyping(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("Typing",n)}catch(s){console.error("Error sending typing indicator:",s)}}async sendStopTyping(n){if(!(!this.connection||!this.isConnected()))try{await this.connection.invoke("StopTyping",n)}catch(s){console.error("Error sending stop typing indicator:",s)}}async markNotificationsAsSeen(n){if(!this.connection||!this.isConnected())throw new Error("SignalR not connected");try{await this.connection.invoke("MarkAsSeen",n)}catch(s){throw console.error("Error marking notifications as seen:",s),s}}markSeenDebounceTimers=new Map;async markMessagesAsSeen(n){if(!this.connection||!this.isConnected())return;const s=this.markSeenDebounceTimers.get(n);return s&&clearTimeout(s),new Promise(o=>{const c=setTimeout(async()=>{if(this.markSeenDebounceTimers.delete(n),!this.connection||!this.isConnected()){o();return}try{await this.connection.invoke("MarkMessagesAsSeen",n)}catch(d){d?.message?.includes("connection being closed")||console.error("Error marking messages as seen:",d)}o()},300);this.markSeenDebounceTimers.set(n,c)})}}const nt=new FR,Rh=Object.freeze(Object.defineProperty({__proto__:null,signalRService:nt},Symbol.toStringTag,{value:"Module"})),VR=t=>{const[n,s]=b.useState(nt.getConnectionState()),[o,c]=b.useState(nt.isConnected());return b.useEffect(()=>{const d=setInterval(()=>{s(nt.getConnectionState()),c(nt.isConnected())},1e3);return()=>clearInterval(d)},[t]),{connectionState:n,isConnected:o,joinChat:nt.joinChat.bind(nt),leaveChat:nt.leaveChat.bind(nt),sendMessage:nt.sendMessage.bind(nt),editMessage:nt.editMessage.bind(nt),deleteMessage:nt.deleteMessage.bind(nt),addReaction:nt.addReaction.bind(nt),removeReaction:nt.removeReaction.bind(nt),sendTyping:nt.sendTyping.bind(nt),sendStopTyping:nt.sendStopTyping.bind(nt),markNotificationsAsSeen:nt.markNotificationsAsSeen.bind(nt),markMessagesAsSeen:nt.markMessagesAsSeen.bind(nt),getPresenceStates:nt.getPresenceStates.bind(nt)}};var Vf={exports:{}},qf,W0;function qR(){if(W0)return qf;W0=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return qf=t,qf}var Gf,Y0;function GR(){if(Y0)return Gf;Y0=1;var t=qR();function n(){}function s(){}return s.resetWarningCache=n,Gf=function(){function o(p,h,m,g,y,v){if(v!==t){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}o.isRequired=o;function c(){return o}var d={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:c,element:o,elementType:o,instanceOf:c,node:o,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:s,resetWarningCache:n};return d.PropTypes=d,d},Gf}var X0;function WR(){return X0||(X0=1,Vf.exports=GR()()),Vf.exports}var YR=WR();const Bt=xb(YR);function uo(t,n,s,o){function c(d){return d instanceof s?d:new s(function(p){p(d)})}return new(s||(s=Promise))(function(d,p){function h(y){try{g(o.next(y))}catch(v){p(v)}}function m(y){try{g(o.throw(y))}catch(v){p(v)}}function g(y){y.done?d(y.value):c(y.value).then(h,m)}g((o=o.apply(t,n||[])).next())})}const XR=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function fr(t,n,s){const o=KR(t),{webkitRelativePath:c}=t,d=typeof n=="string"?n:typeof c=="string"&&c.length>0?c:`./${t.name}`;return typeof o.path!="string"&&K0(o,"path",d),K0(o,"relativePath",d),o}function KR(t){const{name:n}=t;if(n&&n.lastIndexOf(".")!==-1&&!t.type){const o=n.split(".").pop().toLowerCase(),c=XR.get(o);c&&Object.defineProperty(t,"type",{value:c,writable:!1,configurable:!1,enumerable:!0})}return t}function K0(t,n,s){Object.defineProperty(t,n,{value:s,writable:!1,configurable:!1,enumerable:!0})}const QR=[".DS_Store","Thumbs.db"];function ZR(t){return uo(this,void 0,void 0,function*(){return Fd(t)&&JR(t.dataTransfer)?aD(t.dataTransfer,t.type):eD(t)?tD(t):Array.isArray(t)&&t.every(n=>"getFile"in n&&typeof n.getFile=="function")?nD(t):[]})}function JR(t){return Fd(t)}function eD(t){return Fd(t)&&Fd(t.target)}function Fd(t){return typeof t=="object"&&t!==null}function tD(t){return Dh(t.target.files).map(n=>fr(n))}function nD(t){return uo(this,void 0,void 0,function*(){return(yield Promise.all(t.map(s=>s.getFile()))).map(s=>fr(s))})}function aD(t,n){return uo(this,void 0,void 0,function*(){if(t.items){const s=Dh(t.items).filter(c=>c.kind==="file");if(n!=="drop")return s;const o=yield Promise.all(s.map(sD));return Q0(US(o))}return Q0(Dh(t.files).map(s=>fr(s)))})}function Q0(t){return t.filter(n=>QR.indexOf(n.name)===-1)}function Dh(t){if(t===null)return[];const n=[];for(let s=0;s<t.length;s++){const o=t[s];n.push(o)}return n}function sD(t){if(typeof t.webkitGetAsEntry!="function")return Z0(t);const n=t.webkitGetAsEntry();return n&&n.isDirectory?IS(n):Z0(t,n)}function US(t){return t.reduce((n,s)=>[...n,...Array.isArray(s)?US(s):[s]],[])}function Z0(t,n){return uo(this,void 0,void 0,function*(){var s;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const d=yield t.getAsFileSystemHandle();if(d===null)throw new Error(`${t} is not a File`);if(d!==void 0){const p=yield d.getFile();return p.handle=d,fr(p)}}const o=t.getAsFile();if(!o)throw new Error(`${t} is not a File`);return fr(o,(s=n?.fullPath)!==null&&s!==void 0?s:void 0)})}function iD(t){return uo(this,void 0,void 0,function*(){return t.isDirectory?IS(t):oD(t)})}function IS(t){const n=t.createReader();return new Promise((s,o)=>{const c=[];function d(){n.readEntries(p=>uo(this,void 0,void 0,function*(){if(p.length){const h=Promise.all(p.map(iD));c.push(h),d()}else try{const h=yield Promise.all(c);s(h)}catch(h){o(h)}}),p=>{o(p)})}d()})}function oD(t){return uo(this,void 0,void 0,function*(){return new Promise((n,s)=>{t.file(o=>{const c=fr(o,t.fullPath);n(c)},o=>{s(o)})})})}var bd={},J0;function rD(){return J0||(J0=1,bd.__esModule=!0,bd.default=function(t,n){if(t&&n){var s=Array.isArray(n)?n:n.split(",");if(s.length===0)return!0;var o=t.name||"",c=(t.type||"").toLowerCase(),d=c.replace(/\/.*$/,"");return s.some(function(p){var h=p.trim().toLowerCase();return h.charAt(0)==="."?o.toLowerCase().endsWith(h):h.endsWith("/*")?d===h.replace(/\/.*$/,""):c===h})}return!0}),bd}var lD=rD();const Wf=xb(lD);function eb(t){return uD(t)||dD(t)||LS(t)||cD()}function cD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dD(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uD(t){if(Array.isArray(t))return Nh(t)}function tb(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),s.push.apply(s,o)}return s}function nb(t){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?tb(Object(s),!0).forEach(function(o){OS(t,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):tb(Object(s)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(s,o))})}return t}function OS(t,n,s){return n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,t}function Hl(t,n){return hD(t)||fD(t,n)||LS(t,n)||pD()}function pD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LS(t,n){if(t){if(typeof t=="string")return Nh(t,n);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Nh(t,n)}}function Nh(t,n){(n==null||n>t.length)&&(n=t.length);for(var s=0,o=new Array(n);s<n;s++)o[s]=t[s];return o}function fD(t,n){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var o=[],c=!0,d=!1,p,h;try{for(s=s.call(t);!(c=(p=s.next()).done)&&(o.push(p.value),!(n&&o.length===n));c=!0);}catch(m){d=!0,h=m}finally{try{!c&&s.return!=null&&s.return()}finally{if(d)throw h}}return o}}function hD(t){if(Array.isArray(t))return t}var mD=typeof Wf=="function"?Wf:Wf.default,gD="file-invalid-type",yD="file-too-large",xD="file-too-small",vD="too-many-files",bD=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=n.split(","),o=s.length>1?"one of ".concat(s.join(", ")):s[0];return{code:gD,message:"File type must be ".concat(o)}},ab=function(n){return{code:yD,message:"File is larger than ".concat(n," ").concat(n===1?"byte":"bytes")}},sb=function(n){return{code:xD,message:"File is smaller than ".concat(n," ").concat(n===1?"byte":"bytes")}},SD={code:vD,message:"Too many files"};function PS(t,n){var s=t.type==="application/x-moz-file"||mD(t,n);return[s,s?null:bD(n)]}function HS(t,n,s){if(Ji(t.size))if(Ji(n)&&Ji(s)){if(t.size>s)return[!1,ab(s)];if(t.size<n)return[!1,sb(n)]}else{if(Ji(n)&&t.size<n)return[!1,sb(n)];if(Ji(s)&&t.size>s)return[!1,ab(s)]}return[!0,null]}function Ji(t){return t!=null}function wD(t){var n=t.files,s=t.accept,o=t.minSize,c=t.maxSize,d=t.multiple,p=t.maxFiles,h=t.validator;return!d&&n.length>1||d&&p>=1&&n.length>p?!1:n.every(function(m){var g=PS(m,s),y=Hl(g,1),v=y[0],S=HS(m,o,c),j=Hl(S,1),C=j[0],T=h?h(m):null;return v&&C&&!T})}function Vd(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Sd(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(n){return n==="Files"||n==="application/x-moz-file"}):!!t.target&&!!t.target.files}function ib(t){t.preventDefault()}function _D(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function CD(t){return t.indexOf("Edge/")!==-1}function jD(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return _D(t)||CD(t)}function ts(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return function(o){for(var c=arguments.length,d=new Array(c>1?c-1:0),p=1;p<c;p++)d[p-1]=arguments[p];return n.some(function(h){return!Vd(o)&&h&&h.apply(void 0,[o].concat(d)),Vd(o)})}}function TD(){return"showOpenFilePicker"in window}function kD(t){if(Ji(t)){var n=Object.entries(t).filter(function(s){var o=Hl(s,2),c=o[0],d=o[1],p=!0;return $S(c)||(console.warn('Skipped "'.concat(c,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),p=!1),(!Array.isArray(d)||!d.every(FS))&&(console.warn('Skipped "'.concat(c,'" because an invalid file extension was provided.')),p=!1),p}).reduce(function(s,o){var c=Hl(o,2),d=c[0],p=c[1];return nb(nb({},s),{},OS({},d,p))},{});return[{description:"Files",accept:n}]}return t}function MD(t){if(Ji(t))return Object.entries(t).reduce(function(n,s){var o=Hl(s,2),c=o[0],d=o[1];return[].concat(eb(n),[c],eb(d))},[]).filter(function(n){return $S(n)||FS(n)}).join(",")}function ED(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function AD(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function $S(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function FS(t){return/^.*\.[\w]+$/.test(t)}var RD=["children"],DD=["open"],ND=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],zD=["refKey","onChange","onClick"];function BD(t){return OD(t)||ID(t)||VS(t)||UD()}function UD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ID(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function OD(t){if(Array.isArray(t))return zh(t)}function Yf(t,n){return HD(t)||PD(t,n)||VS(t,n)||LD()}function LD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VS(t,n){if(t){if(typeof t=="string")return zh(t,n);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return zh(t,n)}}function zh(t,n){(n==null||n>t.length)&&(n=t.length);for(var s=0,o=new Array(n);s<n;s++)o[s]=t[s];return o}function PD(t,n){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var o=[],c=!0,d=!1,p,h;try{for(s=s.call(t);!(c=(p=s.next()).done)&&(o.push(p.value),!(n&&o.length===n));c=!0);}catch(m){d=!0,h=m}finally{try{!c&&s.return!=null&&s.return()}finally{if(d)throw h}}return o}}function HD(t){if(Array.isArray(t))return t}function ob(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),s.push.apply(s,o)}return s}function Wt(t){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?ob(Object(s),!0).forEach(function(o){Bh(t,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ob(Object(s)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(s,o))})}return t}function Bh(t,n,s){return n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,t}function qd(t,n){if(t==null)return{};var s=$D(t,n),o,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(c=0;c<d.length;c++)o=d[c],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(s[o]=t[o])}return s}function $D(t,n){if(t==null)return{};var s={},o=Object.keys(t),c,d;for(d=0;d<o.length;d++)c=o[d],!(n.indexOf(c)>=0)&&(s[c]=t[c]);return s}var Dm=b.forwardRef(function(t,n){var s=t.children,o=qd(t,RD),c=GS(o),d=c.open,p=qd(c,DD);return b.useImperativeHandle(n,function(){return{open:d}},[d]),La.createElement(b.Fragment,null,s(Wt(Wt({},p),{},{open:d})))});Dm.displayName="Dropzone";var qS={disabled:!1,getFilesFromEvent:ZR,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dm.defaultProps=qS;Dm.propTypes={children:Bt.func,accept:Bt.objectOf(Bt.arrayOf(Bt.string)),multiple:Bt.bool,preventDropOnDocument:Bt.bool,noClick:Bt.bool,noKeyboard:Bt.bool,noDrag:Bt.bool,noDragEventsBubbling:Bt.bool,minSize:Bt.number,maxSize:Bt.number,maxFiles:Bt.number,disabled:Bt.bool,getFilesFromEvent:Bt.func,onFileDialogCancel:Bt.func,onFileDialogOpen:Bt.func,useFsAccessApi:Bt.bool,autoFocus:Bt.bool,onDragEnter:Bt.func,onDragLeave:Bt.func,onDragOver:Bt.func,onDrop:Bt.func,onDropAccepted:Bt.func,onDropRejected:Bt.func,onError:Bt.func,validator:Bt.func};var Uh={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function GS(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=Wt(Wt({},qS),t),s=n.accept,o=n.disabled,c=n.getFilesFromEvent,d=n.maxSize,p=n.minSize,h=n.multiple,m=n.maxFiles,g=n.onDragEnter,y=n.onDragLeave,v=n.onDragOver,S=n.onDrop,j=n.onDropAccepted,C=n.onDropRejected,T=n.onFileDialogCancel,E=n.onFileDialogOpen,z=n.useFsAccessApi,L=n.autoFocus,R=n.preventDropOnDocument,Y=n.noClick,P=n.noKeyboard,te=n.noDrag,re=n.noDragEventsBubbling,K=n.onError,ge=n.validator,me=b.useMemo(function(){return MD(s)},[s]),He=b.useMemo(function(){return kD(s)},[s]),qe=b.useMemo(function(){return typeof E=="function"?E:rb},[E]),Ke=b.useMemo(function(){return typeof T=="function"?T:rb},[T]),Re=b.useRef(null),Te=b.useRef(null),B=b.useReducer(FD,Uh),ne=Yf(B,2),le=ne[0],we=ne[1],$e=le.isFocused,_e=le.isFileDialogActive,Ae=b.useRef(typeof window<"u"&&window.isSecureContext&&z&&TD()),je=function(){!Ae.current&&_e&&setTimeout(function(){if(Te.current){var de=Te.current.files;de.length||(we({type:"closeDialog"}),Ke())}},300)};b.useEffect(function(){return window.addEventListener("focus",je,!1),function(){window.removeEventListener("focus",je,!1)}},[Te,_e,Ke,Ae]);var ie=b.useRef([]),Ce=function(de){Re.current&&Re.current.contains(de.target)||(de.preventDefault(),ie.current=[])};b.useEffect(function(){return R&&(document.addEventListener("dragover",ib,!1),document.addEventListener("drop",Ce,!1)),function(){R&&(document.removeEventListener("dragover",ib),document.removeEventListener("drop",Ce))}},[Re,R]),b.useEffect(function(){return!o&&L&&Re.current&&Re.current.focus(),function(){}},[Re,L,o]);var he=b.useCallback(function(oe){K?K(oe):console.error(oe)},[K]),Tt=b.useCallback(function(oe){oe.preventDefault(),oe.persist(),st(oe),ie.current=[].concat(BD(ie.current),[oe.target]),Sd(oe)&&Promise.resolve(c(oe)).then(function(de){if(!(Vd(oe)&&!re)){var ht=de.length,ut=ht>0&&wD({files:de,accept:me,minSize:p,maxSize:d,multiple:h,maxFiles:m,validator:ge}),It=ht>0&&!ut;we({isDragAccept:ut,isDragReject:It,isDragActive:!0,type:"setDraggedFiles"}),g&&g(oe)}}).catch(function(de){return he(de)})},[c,g,he,re,me,p,d,h,m,ge]),kt=b.useCallback(function(oe){oe.preventDefault(),oe.persist(),st(oe);var de=Sd(oe);if(de&&oe.dataTransfer)try{oe.dataTransfer.dropEffect="copy"}catch{}return de&&v&&v(oe),!1},[v,re]),Mt=b.useCallback(function(oe){oe.preventDefault(),oe.persist(),st(oe);var de=ie.current.filter(function(ut){return Re.current&&Re.current.contains(ut)}),ht=de.indexOf(oe.target);ht!==-1&&de.splice(ht,1),ie.current=de,!(de.length>0)&&(we({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Sd(oe)&&y&&y(oe))},[Re,y,re]),Et=b.useCallback(function(oe,de){var ht=[],ut=[];oe.forEach(function(It){var Sn=PS(It,me),$=Yf(Sn,2),W=$[0],I=$[1],pe=HS(It,p,d),ve=Yf(pe,2),Le=ve[0],pt=ve[1],Ln=ge?ge(It):null;if(W&&Le&&!Ln)ht.push(It);else{var ma=[I,pt];Ln&&(ma=ma.concat(Ln)),ut.push({file:It,errors:ma.filter(function(Qn){return Qn})})}}),(!h&&ht.length>1||h&&m>=1&&ht.length>m)&&(ht.forEach(function(It){ut.push({file:It,errors:[SD]})}),ht.splice(0)),we({acceptedFiles:ht,fileRejections:ut,isDragReject:ut.length>0,type:"setFiles"}),S&&S(ht,ut,de),ut.length>0&&C&&C(ut,de),ht.length>0&&j&&j(ht,de)},[we,h,me,p,d,m,S,j,C,ge]),un=b.useCallback(function(oe){oe.preventDefault(),oe.persist(),st(oe),ie.current=[],Sd(oe)&&Promise.resolve(c(oe)).then(function(de){Vd(oe)&&!re||Et(de,oe)}).catch(function(de){return he(de)}),we({type:"reset"})},[c,Et,he,re]),At=b.useCallback(function(){if(Ae.current){we({type:"openDialog"}),qe();var oe={multiple:h,types:He};window.showOpenFilePicker(oe).then(function(de){return c(de)}).then(function(de){Et(de,null),we({type:"closeDialog"})}).catch(function(de){ED(de)?(Ke(de),we({type:"closeDialog"})):AD(de)?(Ae.current=!1,Te.current?(Te.current.value=null,Te.current.click()):he(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):he(de)});return}Te.current&&(we({type:"openDialog"}),qe(),Te.current.value=null,Te.current.click())},[we,qe,Ke,z,Et,he,He,h]),pn=b.useCallback(function(oe){!Re.current||!Re.current.isEqualNode(oe.target)||(oe.key===" "||oe.key==="Enter"||oe.keyCode===32||oe.keyCode===13)&&(oe.preventDefault(),At())},[Re,At]),xt=b.useCallback(function(){we({type:"focus"})},[]),On=b.useCallback(function(){we({type:"blur"})},[]),dt=b.useCallback(function(){Y||(jD()?setTimeout(At,0):At())},[Y,At]),bt=function(de){return o?null:de},Ht=function(de){return P?null:bt(de)},bn=function(de){return te?null:bt(de)},st=function(de){re&&de.stopPropagation()},en=b.useMemo(function(){return function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=oe.refKey,ht=de===void 0?"ref":de,ut=oe.role,It=oe.onKeyDown,Sn=oe.onFocus,$=oe.onBlur,W=oe.onClick,I=oe.onDragEnter,pe=oe.onDragOver,ve=oe.onDragLeave,Le=oe.onDrop,pt=qd(oe,ND);return Wt(Wt(Bh({onKeyDown:Ht(ts(It,pn)),onFocus:Ht(ts(Sn,xt)),onBlur:Ht(ts($,On)),onClick:bt(ts(W,dt)),onDragEnter:bn(ts(I,Tt)),onDragOver:bn(ts(pe,kt)),onDragLeave:bn(ts(ve,Mt)),onDrop:bn(ts(Le,un)),role:typeof ut=="string"&&ut!==""?ut:"presentation"},ht,Re),!o&&!P?{tabIndex:0}:{}),pt)}},[Re,pn,xt,On,dt,Tt,kt,Mt,un,P,te,o]),tn=b.useCallback(function(oe){oe.stopPropagation()},[]),Wn=b.useMemo(function(){return function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=oe.refKey,ht=de===void 0?"ref":de,ut=oe.onChange,It=oe.onClick,Sn=qd(oe,zD),$=Bh({accept:me,multiple:h,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:bt(ts(ut,un)),onClick:bt(ts(It,tn)),tabIndex:-1},ht,Te);return Wt(Wt({},$),Sn)}},[Te,s,h,un,o]);return Wt(Wt({},le),{},{isFocused:$e&&!o,getRootProps:en,getInputProps:Wn,rootRef:Re,inputRef:Te,open:bt(At)})}function FD(t,n){switch(n.type){case"focus":return Wt(Wt({},t),{},{isFocused:!0});case"blur":return Wt(Wt({},t),{},{isFocused:!1});case"openDialog":return Wt(Wt({},Uh),{},{isFileDialogActive:!0});case"closeDialog":return Wt(Wt({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Wt(Wt({},t),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return Wt(Wt({},t),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections,isDragReject:n.isDragReject});case"reset":return Wt({},Uh);default:return t}}function rb(){}const lb=5*1024*1024,VD=["image/png","image/jpeg","image/jpg","image/gif","image/webp"],qD=t=>VD.includes(t.type)?t.size>lb?{valid:!1,error:`File too large. Maximum size is ${WS(lb)}.`}:{valid:!0}:{valid:!1,error:"Invalid file type. Please upload an image (PNG, JPG, GIF, or WEBP)."},WS=t=>{if(t===0)return"0 Bytes";const n=1024,s=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(t)/Math.log(n));return`${Math.round(t/Math.pow(n,o)*100)/100} ${s[o]}`},GD=t=>new Promise((n,s)=>{const o=new FileReader;o.onloadend=()=>{typeof o.result=="string"?n(o.result):s(new Error("Failed to read file"))},o.onerror=()=>{s(new Error("Error reading file"))},o.readAsDataURL(t)}),Nm=({onFileAccepted:t,currentPreview:n,maxSize:s=5*1024*1024,label:o="Upload Image",helperText:c="Drag and drop an image here, or click to browse",disabled:d=!1})=>{const[p,h]=b.useState(n||null),[m,g]=b.useState(null),[y,v]=b.useState(!1),S=b.useCallback(async L=>{g(null),v(!0);const R=L[0];if(!R){v(!1);return}const Y=qD(R);if(!Y.valid){g(Y.error||"Invalid file"),v(!1);return}try{const P=await GD(R);h(P),t(R)}catch(P){g("Failed to process image"),console.error("Error processing image:",P)}finally{v(!1)}},[t]),{getRootProps:j,getInputProps:C,isDragActive:T,isDragReject:E}=GS({onDrop:S,accept:{"image/*":[".png",".jpg",".jpeg",".gif",".webp"]},maxSize:s,multiple:!1,disabled:d||y}),z=L=>{L.stopPropagation(),h(null),g(null)};return r.jsxs("div",{style:{width:"100%"},children:[o&&r.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:600,color:"var(--text)"},children:o}),r.jsxs("div",{...j(),style:{border:`2px dashed ${m||E?"#ff6b6b":T?"var(--accent)":"var(--border)"}`,borderRadius:"12px",padding:p?"0":"32px",textAlign:"center",cursor:d||y?"not-allowed":"pointer",transition:"all 0.3s ease",backgroundColor:T?"var(--background)":p?"transparent":"var(--surface)",position:"relative",opacity:d||y?.6:1},children:[r.jsx("input",{...C()}),p?r.jsxs("div",{style:{position:"relative"},children:[r.jsx("img",{src:p,alt:"Preview",style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"10px"}}),!d&&r.jsx("button",{onClick:z,"aria-label":"Remove image",style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0, 0, 0, 0.7)",color:"white",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"background 0.2s ease",fontSize:"20px",fontWeight:300,lineHeight:1},onMouseEnter:L=>{L.currentTarget.style.background="rgba(0, 0, 0, 0.9)"},onMouseLeave:L=>{L.currentTarget.style.background="rgba(0, 0, 0, 0.7)"},children:""}),r.jsxs("div",{style:{position:"absolute",bottom:"8px",right:"8px",background:"rgba(76, 175, 80, 0.9)",color:"white",padding:"4px 12px",borderRadius:"16px",fontSize:"12px",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx(Sb,{size:14}),"Image selected"]})]}):r.jsxs("div",{children:[r.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"12px"},children:y?r.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid var(--border)",borderTop:"4px solid var(--accent)",borderRadius:"50%",animation:"spin 1s linear infinite"}}):E||m?r.jsx(Ds,{size:48,color:"#ff6b6b"}):r.jsx(D_,{size:48,color:T?"var(--accent)":"var(--text-muted)"})}),y?r.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"14px",fontWeight:600,color:"var(--text)"},children:"Processing..."}):r.jsxs(r.Fragment,{children:[r.jsx("p",{style:{margin:"0 0 8px 0",fontSize:"14px",fontWeight:600,color:T?"var(--accent)":"var(--text)"},children:E?"Invalid file type":T?"Drop image here":c}),r.jsxs("p",{style:{margin:0,fontSize:"12px",color:"var(--text-muted)"},children:["PNG, JPG, GIF or WEBP (max ",WS(s),")"]})]})]})]}),m&&r.jsxs("div",{style:{marginTop:"8px",padding:"8px 12px",backgroundColor:"#fee",border:"1px solid #fcc",borderRadius:"6px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Ds,{size:16,color:"#ff6b6b"}),r.jsx("span",{style:{fontSize:"13px",color:"#c33"},children:m})]}),r.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},cb=[],su=t=>{const n=Pe(h=>h.permissionsLoading),s=Pe(h=>h.currentChat),o=jt(h=>h.user),c=Pe(h=>t?h.chatPermissions.get(t)??cb:cb),d=(()=>{if(!t||!s||!o)return!1;if(s.createdById===o.id)return!0;const m=s.members?.find(g=>g.userId===o.id)?.role?.toLowerCase();return m==="admin"||m==="owner"})(),p=h=>d?!0:c.includes(h);return s?.type==="dm"?{canSendMessage:!0,canAddUsers:!1,canPinMessages:!0,canManageMessages:!1,canManageBans:!1,canManageChatInfo:!1,canManageUsers:!1,isLoading:!1}:t?{canSendMessage:p("SendMessage"),canAddUsers:p("AddUsers"),canPinMessages:p("PinMessages"),canManageMessages:p("ManageMessages"),canManageBans:p("ManageBans"),canManageChatInfo:p("ManageChatInfo"),canManageUsers:p("ManageUsers"),isLoading:n}:{canSendMessage:!1,canAddUsers:!1,canPinMessages:!1,canManageMessages:!1,canManageBans:!1,canManageChatInfo:!1,canManageUsers:!1,isLoading:!1}},WD="_overlay_1w6vq_69",YD="_fadeIn_1w6vq_1",XD="_closing_1w6vq_85",KD="_fadeOut_1w6vq_1",QD="_modal_1w6vq_90",ZD="_slideUp_1w6vq_1",JD="_slideDown_1w6vq_1",eN="_header_1w6vq_109",tN="_headerContent_1w6vq_118",nN="_headerIcon_1w6vq_124",aN="_title_1w6vq_136",sN="_subtitle_1w6vq_144",iN="_closeBtn_1w6vq_150",oN="_content_1w6vq_173",rN="_userCard_1w6vq_197",lN="_userAvatar_1w6vq_208",cN="_userInfo_1w6vq_229",dN="_userName_1w6vq_234",uN="_userRole_1w6vq_241",pN="_roleBadge_1w6vq_246",fN="_admin_1w6vq_255",hN="_moderator_1w6vq_261",mN="_member_1w6vq_267",gN="_permissionStats_1w6vq_273",yN="_statNumber_1w6vq_281",xN="_statLabel_1w6vq_287",vN="_loadingState_1w6vq_293",bN="_loadingSpinner_1w6vq_298",SN="_spin_1w6vq_302",wN="_skeletonList_1w6vq_313",_N="_skeletonItem_1w6vq_319",CN="_skeletonIcon_1w6vq_329",jN="_shimmer_1w6vq_1",TN="_skeletonText_1w6vq_338",kN="_skeletonLine_1w6vq_342",MN="_skeletonToggle_1w6vq_355",EN="_permissionsList_1w6vq_365",AN="_category_1w6vq_372",RN="_categoryHeader_1w6vq_376",DN="_categoryLabel_1w6vq_384",NN="_categoryCount_1w6vq_392",zN="_categoryItems_1w6vq_398",BN="_permissionItem_1w6vq_405",UN="_granted_1w6vq_421",IN="_updating_1w6vq_431",ON="_permissionIcon_1w6vq_436",LN="_permissionInfo_1w6vq_454",PN="_permissionLabel_1w6vq_459",HN="_permissionDescription_1w6vq_466",$N="_toggleSwitch_1w6vq_473",FN="_toggleTrack_1w6vq_483",VN="_on_1w6vq_492",qN="_toggleThumb_1w6vq_497",GN="_footer_1w6vq_523",WN="_footerInfo_1w6vq_532",YN="_doneButton_1w6vq_544",XN="_pulse_1w6vq_1",Be={overlay:WD,fadeIn:YD,closing:XD,fadeOut:KD,modal:QD,slideUp:ZD,slideDown:JD,header:eN,headerContent:tN,headerIcon:nN,title:aN,subtitle:sN,closeBtn:iN,content:oN,userCard:rN,userAvatar:lN,userInfo:cN,userName:dN,userRole:uN,roleBadge:pN,admin:fN,moderator:hN,member:mN,permissionStats:gN,statNumber:yN,statLabel:xN,loadingState:vN,loadingSpinner:bN,spin:SN,skeletonList:wN,skeletonItem:_N,skeletonIcon:CN,shimmer:jN,skeletonText:TN,skeletonLine:kN,skeletonToggle:MN,permissionsList:EN,category:AN,categoryHeader:RN,categoryLabel:DN,categoryCount:NN,categoryItems:zN,permissionItem:BN,granted:UN,updating:IN,permissionIcon:ON,permissionInfo:LN,permissionLabel:PN,permissionDescription:HN,toggleSwitch:$N,toggleTrack:FN,on:VN,toggleThumb:qN,footer:GN,footerInfo:WN,doneButton:YN,pulse:XN},db=[{name:"SendMessage",label:"Send Messages",description:"Allow sending messages in this chat",icon:r.jsx(Al,{size:18}),category:"messaging"},{name:"ManageMessages",label:"Manage Messages",description:"Edit or delete messages from other users",icon:r.jsx(th,{size:18}),category:"moderation"},{name:"AddUsers",label:"Add Users",description:"Invite new members to this chat",icon:r.jsx(wl,{size:18}),category:"management"},{name:"ManageUsers",label:"Manage Users",description:"Remove members and manage their roles",icon:r.jsx(jn,{size:18}),category:"management"},{name:"ManageChatInfo",label:"Manage Chat Info",description:"Edit chat name, description, and avatar",icon:r.jsx(th,{size:18}),category:"management"},{name:"ManageBans",label:"Manage Bans",description:"Ban or unban users from this chat",icon:r.jsx(Rs,{size:18}),category:"moderation"},{name:"PinMessages",label:"Pin Messages",description:"Pin important messages for all members",icon:r.jsx(Dl,{size:18}),category:"messaging"}],Xf={messaging:{label:"Messaging",order:1},moderation:{label:"Moderation",order:2},management:{label:"Management",order:3}},zm=({isOpen:t,onClose:n,chatId:s,member:o,onPermissionsChanged:c})=>{const[d,p]=b.useState([]),[h,m]=b.useState(!1),[g,y]=b.useState(null),[v,S]=b.useState(!1);b.useEffect(()=>{t&&(j(),S(!1))},[t,s,o.userId]);const j=async()=>{m(!0);try{const{permissionService:P}=await Ut(async()=>{const{permissionService:ge}=await import("./permission.service-D1eHFXSx.js");return{permissionService:ge}},__vite__mapDeps([0,1,2])),te=await P.getUserPermissions(s,o.userId),re=te?.permissions||te,K=Array.isArray(re)?re.map(ge=>ge.permissionName||ge.name||ge):[];p(K)}catch(P){console.error("Failed to load permissions:",P),p([])}finally{m(!1)}},C=async P=>{const te=d.includes(P);y(P);const K=jt.getState().user?.id===o.userId;try{const{permissionService:ge}=await Ut(async()=>{const{permissionService:me}=await import("./permission.service-D1eHFXSx.js");return{permissionService:me}},__vite__mapDeps([0,1,2]));te?(await ge.revokePermission(s,o.userId,P),p(d.filter(me=>me!==P)),K&&Pe.getState().revokePermission(s,P)):(await ge.grantPermission(s,o.userId,P),p([...d,P]),K&&Pe.getState().grantPermission(s,P)),await c()}catch(ge){console.error("Failed to update permission:",ge)}finally{y(null)}},T=()=>{S(!0),setTimeout(()=>{n(),S(!1)},200)};if(!t)return null;const E=P=>P.slice(0,2).toUpperCase(),z=db.reduce((P,te)=>(P[te.category]||(P[te.category]=[]),P[te.category].push(te),P),{}),L=Object.entries(z).sort(([P],[te])=>Xf[P].order-Xf[te].order),R=d.length,Y=db.length;return r.jsx("div",{className:`${Be.overlay} ${v?Be.closing:""}`,onClick:T,children:r.jsxs("div",{className:`${Be.modal} ${v?Be.closing:""}`,onClick:P=>P.stopPropagation(),children:[r.jsxs("div",{className:Be.header,children:[r.jsxs("div",{className:Be.headerContent,children:[r.jsx("div",{className:Be.headerIcon,children:r.jsx(rr,{size:20})}),r.jsxs("div",{children:[r.jsx("h2",{className:Be.title,children:"Manage Permissions"}),r.jsx("p",{className:Be.subtitle,children:"Configure access for this member"})]})]}),r.jsx("button",{onClick:T,className:Be.closeBtn,"aria-label":"Close",children:""})]}),r.jsxs("div",{className:Be.content,children:[r.jsxs("div",{className:Be.userCard,children:[r.jsx("div",{className:Be.userAvatar,children:o.user.avatarUrl?r.jsx("img",{src:o.user.avatarUrl,alt:o.user.username}):E(o.user.username)}),r.jsxs("div",{className:Be.userInfo,children:[r.jsx("div",{className:Be.userName,children:o.user.username}),r.jsx("div",{className:Be.userRole,children:r.jsx("span",{className:`${Be.roleBadge} ${Be[o.role]}`,children:o.role.charAt(0).toUpperCase()+o.role.slice(1)})})]}),r.jsxs("div",{className:Be.permissionStats,children:[r.jsx("div",{className:Be.statNumber,children:R}),r.jsxs("div",{className:Be.statLabel,children:["of ",Y]})]})]}),h?r.jsxs("div",{className:Be.loadingState,children:[r.jsx("div",{className:Be.loadingSpinner,children:r.jsx(ln,{size:32,className:Be.spin})}),r.jsx("p",{children:"Loading permissions..."}),r.jsx("div",{className:Be.skeletonList,children:[1,2,3,4].map(P=>r.jsxs("div",{className:Be.skeletonItem,children:[r.jsx("div",{className:Be.skeletonIcon}),r.jsxs("div",{className:Be.skeletonText,children:[r.jsx("div",{className:Be.skeletonLine,style:{width:"60%"}}),r.jsx("div",{className:Be.skeletonLine,style:{width:"80%"}})]}),r.jsx("div",{className:Be.skeletonToggle})]},P))})]}):r.jsx("div",{className:Be.permissionsList,children:L.map(([P,te],re)=>r.jsxs("div",{className:Be.category,style:{animationDelay:`${re*.1}s`},children:[r.jsxs("div",{className:Be.categoryHeader,children:[r.jsx("span",{className:Be.categoryLabel,children:Xf[P].label}),r.jsxs("span",{className:Be.categoryCount,children:[te.filter(K=>d.includes(K.name)).length," / ",te.length]})]}),r.jsx("div",{className:Be.categoryItems,children:te.map((K,ge)=>{const me=d.includes(K.name),He=g===K.name;return r.jsxs("div",{className:`${Be.permissionItem} ${me?Be.granted:""} ${He?Be.updating:""}`,style:{animationDelay:`${re*.1+ge*.05}s`},children:[r.jsx("div",{className:Be.permissionIcon,children:K.icon}),r.jsxs("div",{className:Be.permissionInfo,children:[r.jsx("div",{className:Be.permissionLabel,children:K.label}),r.jsx("div",{className:Be.permissionDescription,children:K.description})]}),r.jsx("button",{className:`${Be.toggleSwitch} ${me?Be.on:Be.off}`,onClick:()=>C(K.name),disabled:He,children:r.jsx("div",{className:Be.toggleTrack,children:r.jsx("div",{className:Be.toggleThumb,children:He&&r.jsx(ln,{size:12,className:Be.spin})})})})]},K.name)})})]},P))})]}),r.jsxs("div",{className:Be.footer,children:[r.jsxs("div",{className:Be.footerInfo,children:[r.jsx(rr,{size:14}),r.jsx("span",{children:"Changes take effect immediately"})]}),r.jsx("button",{onClick:T,className:Be.doneButton,children:"Done"})]})]})})},G={bg:"#030303",surface:"#080808",surfaceElevated:"#0c0c0c",surfaceHover:"#121212",surfaceActive:"#181818",border:"#1a1a1a",borderLight:"#222222",primary:"#10b981",primaryHover:"#0d9668",primaryMuted:"rgba(16, 185, 129, 0.12)",primaryGlow:"rgba(16, 185, 129, 0.25)",danger:"#ef4444",dangerMuted:"rgba(239, 68, 68, 0.12)",warning:"#f59e0b",warningMuted:"rgba(245, 158, 11, 0.12)",info:"#3b82f6",infoMuted:"rgba(59, 130, 246, 0.12)",text:"#fafafa",textSecondary:"#a1a1aa",textMuted:"#71717a",online:"#22c55e",offline:"#71717a"},KN=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M5.5 3.21V20.8l4.75-4.73 2.99 6.73L15.5 21.6l-3-6.7h6z'/%3E%3Cpath fill='%23064e3b' d='M6.5 5.61v11.68l3.38-3.37.37-.37.48 1.07 1.93 4.35 1.07-.47L11.8 14.1l-.48-1.07H16z'/%3E%3C/svg%3E") 4 2, default`,QN=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M9 2.5a2.5 2.5 0 0 1 5 0v7.996l3.904-.74a2.095 2.095 0 0 1 2.537 2.466L19.5 17.5a6 6 0 0 1-6 6H11a7 7 0 0 1-7-7V9a2 2 0 1 1 4 0v3.5h1z'/%3E%3Cpath fill='%23064e3b' d='M10 2.5V14h-.5a1.5 1.5 0 0 1-1.5-1.5V9a1 1 0 1 0-2 0v7.5a6 6 0 0 0 6 6h2.5a5 5 0 0 0 5-5l.941-5.278a1.095 1.095 0 0 0-1.324-1.288l-4.117.78V2.5a1.5 1.5 0 0 0-3 0z'/%3E%3C/svg%3E") 7 3, pointer`,ub="group-profile-modal-styles";if(typeof document<"u"&&!document.getElementById(ub)){const t=document.createElement("style");t.id=ub,t.textContent=`
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

    .gpm-overlay {
      cursor: ${KN};
    }
    .gpm-overlay * {
      cursor: inherit;
    }
    .gpm-overlay button,
    .gpm-overlay a,
    .gpm-overlay [role="button"],
    .gpm-overlay .gpm-clickable {
      cursor: ${QN} !important;
    }
    .gpm-overlay input[type="text"],
    .gpm-overlay input[type="search"],
    .gpm-overlay textarea {
      cursor: text !important;
    }

    .gpm-scrollable::-webkit-scrollbar {
      width: 6px;
    }
    .gpm-scrollable::-webkit-scrollbar-track {
      background: transparent;
    }
    .gpm-scrollable::-webkit-scrollbar-thumb {
      background: ${G.primary};
      border-radius: 3px;
    }
    .gpm-scrollable::-webkit-scrollbar-thumb:hover {
      background: ${G.primaryHover};
    }

    .gpm-scrollable {
      scrollbar-width: thin;
      scrollbar-color: ${G.primary} transparent;
    }

    @keyframes gpm-pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    @keyframes gpm-glow {
      0%, 100% { box-shadow: 0 0 20px ${G.primaryGlow}; }
      50% { box-shadow: 0 0 40px ${G.primaryGlow}; }
    }

    @keyframes matrix-fall {
      0% { transform: translateY(-100%); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(100%); opacity: 0; }
    }

    @keyframes matrix-flicker {
      0%, 100% { opacity: 0.1; }
      50% { opacity: 0.4; }
    }

    @keyframes matrix-glow-pulse {
      0%, 100% { filter: brightness(1) drop-shadow(0 0 2px ${G.primary}); }
      50% { filter: brightness(1.5) drop-shadow(0 0 6px ${G.primary}); }
    }

    .matrix-grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      grid-template-rows: repeat(8, 1fr);
      gap: 2px;
      position: absolute;
      inset: 0;
      padding: 8px;
      overflow: hidden;
    }

    .matrix-cell {
      background: ${G.primary};
      opacity: 0.18;
      border-radius: 2px;
      transition: all 0.2s ease;
      animation: matrix-flicker 2s ease-in-out infinite;
      animation-delay: calc(var(--cell-index) * 0.02s);
    }

    .matrix-cell:nth-child(3n) {
      opacity: 0.32;
      animation-duration: 1.5s;
      box-shadow: 0 0 3px ${G.primary};
    }

    .matrix-cell:nth-child(5n) {
      opacity: 0.42;
      animation-duration: 1.8s;
      box-shadow: 0 0 4px ${G.primary};
    }

    .matrix-cell:nth-child(7n+1) {
      opacity: 0.25;
      animation-duration: 2.2s;
    }

    .matrix-cell:nth-child(11n) {
      opacity: 0.55;
      box-shadow: 0 0 6px ${G.primary}, 0 0 10px ${G.primary};
      animation-duration: 1.2s;
    }

    .matrix-rain {
      position: absolute;
      width: 2px;
      background: linear-gradient(to bottom, transparent, ${G.primary}, transparent);
      pointer-events: none;
      animation: matrix-fall 2s linear infinite;
    }

    .avatar-wrapper {
      animation: matrix-glow-pulse 3s ease-in-out infinite;
    }
  `,document.head.appendChild(t)}const ZN={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.15,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.1,ease:"easeIn"}}},JN={hidden:{opacity:0,scale:.98,y:10},visible:{opacity:1,scale:1,y:0,transition:{duration:.15,ease:"easeOut"}},exit:{opacity:0,scale:.98,y:5,transition:{duration:.1,ease:"easeIn"}}},wd={hidden:{opacity:1},visible:{opacity:1}},Qi={hidden:{opacity:1,x:0},visible:{opacity:1,x:0}},Kf={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.1,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.08,ease:"easeIn"}}},e4=({type:t,message:n,onDismiss:s})=>{if(b.useEffect(()=>{const p=setTimeout(s,4e3);return()=>clearTimeout(p)},[s]),!t)return null;const o=t==="success"?G.primaryMuted:t==="error"?G.dangerMuted:G.infoMuted,c=t==="success"?G.primary:t==="error"?G.danger:G.info,d=t==="success"?Sb:t==="error"?Ds:lr;return r.jsxs(se.div,{initial:{opacity:0,y:-5,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-5,height:0},transition:{duration:.1,ease:"easeOut"},style:{background:o,borderRadius:8,padding:"10px 14px",marginBottom:12,display:"flex",alignItems:"center",gap:10,border:`1px solid ${c}20`},children:[r.jsx(d,{size:16,color:c,style:{flexShrink:0,minWidth:16}}),r.jsx("span",{style:{flex:1,fontSize:13,color:c,fontWeight:500},children:n}),r.jsx("button",{onClick:s,style:{background:"none",border:"none",padding:4,display:"flex",color:c,opacity:.7},className:"gpm-clickable",children:r.jsx(En,{size:14,style:{flexShrink:0,minWidth:14}})})]})},t4=({privacy:t,size:n="md"})=>{const s=t==="public",o=n==="sm"?12:14,c=n==="sm"?"4px 8px":"6px 12px",d=n==="sm"?11:12;return r.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6,padding:c,borderRadius:20,background:s?G.primaryMuted:G.warningMuted,border:`1px solid ${s?G.primary:G.warning}30`},children:[s?r.jsx(_b,{size:o,color:G.primary,style:{flexShrink:0,minWidth:o}}):r.jsx(Ph,{size:o,color:G.warning,style:{flexShrink:0,minWidth:o}}),r.jsx("span",{style:{fontSize:d,fontWeight:600,color:s?G.primary:G.warning,textTransform:"uppercase",letterSpacing:"0.5px"},children:s?"Public":"Private"})]})},n4=({role:t})=>{const n={admin:{icon:U_,color:"#fbbf24",bg:"rgba(251, 191, 36, 0.15)",label:"Admin"},moderator:{icon:rr,color:"#60a5fa",bg:"rgba(96, 165, 250, 0.15)",label:"Mod"},member:{icon:Nd,color:G.textMuted,bg:G.surfaceHover,label:"Member"}}[t]||{icon:Nd,color:G.textMuted,bg:G.surfaceHover,label:t},s=n.icon;return r.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"3px 8px",borderRadius:4,background:n.bg,border:`1px solid ${n.color}20`},children:[r.jsx(s,{size:11,color:n.color,style:{flexShrink:0,minWidth:11}}),r.jsx("span",{style:{fontSize:10,fontWeight:600,color:n.color,textTransform:"uppercase"},children:n.label})]})},a4=({children:t,enabled:n=!0})=>r.jsxs("div",{className:"matrix-container",style:{position:"relative",margin:"-20px -20px 24px -20px",padding:"28px 20px",borderRadius:"0 0 16px 16px",background:`linear-gradient(180deg, ${G.bg} 0%, ${G.surface} 100%)`,overflow:"hidden"},children:[n&&r.jsx("div",{className:"matrix-grid",style:{position:"absolute",inset:0,display:"grid",gridTemplateColumns:"repeat(15, 1fr)",gridTemplateRows:"repeat(12, 1fr)",gap:3,padding:10,opacity:.8},children:Array.from({length:180}).map((c,d)=>r.jsx("div",{className:"matrix-cell",style:{"--cell-index":d}},d))}),n&&Array.from({length:12}).map((c,d)=>r.jsx("div",{className:"matrix-rain",style:{left:`${5+d*8}%`,height:"40%",animationDelay:`${d*.15}s`}},`rain-${d}`)),r.jsx("div",{style:{position:"relative",zIndex:2,textAlign:"center"},children:t}),r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"60%",background:`radial-gradient(ellipse at 50% 0%, ${G.primary}15 0%, transparent 70%)`,pointerEvents:"none"}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:40,background:`linear-gradient(to top, ${G.surface}, transparent)`,pointerEvents:"none"}}),r.jsx("div",{style:{position:"absolute",inset:0,borderRadius:"0 0 16px 16px",border:`1px solid ${G.primary}20`,pointerEvents:"none"}})]}),s4=({member:t,isOnline:n,lastSeen:s,isCurrentUser:o,canManage:c,onViewProfile:d,onKick:p,onBan:h,onManagePermissions:m})=>{const[g,y]=b.useState(!1);return r.jsxs(se.div,{variants:Qi,style:{display:"flex",alignItems:"center",padding:"12px 14px",background:G.surfaceElevated,borderRadius:10,border:`1px solid ${G.border}`,transition:"background 0.1s, border-color 0.1s",position:"relative"},whileHover:{background:G.surfaceHover,borderColor:G.borderLight,transition:{duration:.1}},onHoverStart:()=>y(!0),onHoverEnd:()=>y(!1),children:[r.jsxs("div",{className:"gpm-clickable",onClick:d,style:{position:"relative",marginRight:12},children:[t.user.avatar?r.jsx("img",{src:mt(t.user.avatar),alt:t.user.username,style:{width:44,height:44,borderRadius:"50%",objectFit:"cover",border:`2px solid ${n?G.online:G.border}`}}):r.jsx("div",{style:{width:44,height:44,borderRadius:"50%",background:`linear-gradient(135deg, ${G.primary}40, ${G.primary}20)`,display:"flex",alignItems:"center",justifyContent:"center",border:`2px solid ${n?G.online:G.border}`,color:G.primary,fontWeight:600,fontSize:16},children:An(t.user.username)}),r.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:12,height:12,borderRadius:"50%",background:n?G.online:G.offline,border:`2px solid ${G.surfaceElevated}`}})]}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:2},children:[r.jsxs("span",{className:"gpm-clickable",onClick:d,style:{fontSize:14,fontWeight:600,color:G.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[t.user.username,o&&r.jsx("span",{style:{color:G.textMuted,fontWeight:400},children:" (you)"})]}),r.jsx(n4,{role:t.role})]}),r.jsx("div",{style:{fontSize:12,color:G.textMuted},children:n?r.jsx("span",{style:{color:G.online},children:" Online"}):s?`Last seen ${Hd(s)}`:"Offline"})]}),r.jsx(Xn,{children:g&&c&&!o&&t.role!=="admin"&&r.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.08},style:{display:"flex",gap:6},children:[m&&r.jsx("button",{onClick:m,className:"gpm-clickable",title:"Manage Permissions",style:{width:32,height:32,borderRadius:6,background:G.infoMuted,border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:G.info,transition:"all 0.15s"},children:r.jsx(z_,{size:16,strokeWidth:2.5,style:{flexShrink:0,minWidth:16}})}),p&&r.jsx("button",{onClick:p,className:"gpm-clickable",title:"Remove Member",style:{width:32,height:32,borderRadius:6,background:G.warningMuted,border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:G.warning,transition:"all 0.15s"},children:r.jsx(B_,{size:16,strokeWidth:2.5,style:{flexShrink:0,minWidth:16}})}),h&&r.jsx("button",{onClick:h,className:"gpm-clickable",title:"Ban Member",style:{width:32,height:32,borderRadius:6,background:G.dangerMuted,border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:G.danger,transition:"all 0.15s"},children:r.jsx(Rs,{size:16,strokeWidth:2.5,style:{flexShrink:0,minWidth:16}})})]})})]})},Xi=({icon:t,label:n,onClick:s,variant:o="default",disabled:c,loading:d})=>{const p=o==="danger"?G.dangerMuted:o==="primary"?G.primaryMuted:G.surfaceHover,h=o==="danger"?G.danger:o==="primary"?G.primary:G.text,m=o==="danger"?G.danger:o==="primary"?G.primary:G.surfaceActive,g=o==="danger"||o==="primary"?"#fff":G.text;return r.jsxs(se.button,{onClick:s,disabled:c||d,className:"gpm-clickable",style:{display:"flex",alignItems:"center",gap:10,width:"100%",padding:"12px 16px",background:p,border:`1px solid ${h}20`,borderRadius:10,color:h,fontSize:14,fontWeight:500,opacity:c?.5:1,transition:"background 0.1s, color 0.1s"},whileHover:c?{}:{background:m,color:g,transition:{duration:.1}},whileTap:c?{}:{scale:.98,transition:{duration:.05}},children:[d?r.jsx(ln,{size:18,className:"animate-spin"}):t,r.jsx("span",{children:n}),r.jsx(Vh,{size:16,style:{marginLeft:"auto",opacity:.5,flexShrink:0,minWidth:16}})]})},YS=({isOpen:t,onClose:n,chat:s,currentUserId:o,onEditGroup:c,onDeleteGroup:d,onLeaveGroup:p,onKickMember:h,onViewUserProfile:m,onBanMember:g,onUnbanMember:y,onUpdatePrivacy:v,fancyAnimations:S=!0})=>{const[j,C]=b.useState(null),[T,E]=b.useState(!1),[z,L]=b.useState("main"),[R,Y]=b.useState(""),[P,te]=b.useState(""),[re,K]=b.useState([]),[ge,me]=b.useState(!1),[He,qe]=b.useState(!1),[Ke,Re]=b.useState(!1),[Te,B]=b.useState([]),[ne,le]=b.useState(!1),[we,$e]=b.useState({type:null,message:""}),[_e,Ae]=b.useState(!1),[je,ie]=b.useState(null),[Ce,he]=b.useState(!1),{isUserOnline:Tt,getUserLastSeen:kt,loadChats:Mt,setInitialPresenceStates:Et}=Pe(),{canAddUsers:un,canManageChatInfo:At,canManageBans:pn,canManageUsers:xt}=su(s?.id),dt=j?.members.find(I=>I.userId===o)?.role==="admin",bt=j?.members.some(I=>I.userId===o),Ht=j?.members.filter(I=>Tt(I.userId)).length||0,bn=j?.members.filter(I=>{if(!R.trim())return!0;const pe=R.toLowerCase();return I.user.username.toLowerCase().includes(pe)||I.user.email?.toLowerCase().includes(pe)})||[],st=(I,pe)=>{$e({type:I,message:pe})},en=async()=>{E(!0);try{const I=await Ee.getChatProfile(s.id);C(I);const pe=I.members?.map(ve=>ve.userId)||[];if(pe.length>0)try{const ve=await nt.getPresenceStates(pe);Object.keys(ve).length>0&&Et(ve)}catch(ve){console.error("Failed to fetch presence:",ve)}}catch(I){st("error",I.response?.data?.message||"Failed to load profile")}finally{E(!1)}},tn=async()=>{if(!(!s?.id||!dt&&!pn)){le(!0);try{const I=await Ee.getBannedUsers(s.id);B(I)}catch{st("error","Failed to load banned users")}finally{le(!1)}}};b.useEffect(()=>{t&&s.id&&(Re(!1),L("main"),en())},[t,s.id]),b.useEffect(()=>{j&&s&&t&&(s.name!==j.name||s.description!==j.description||s.avatar!==j.avatar)&&C(pe=>pe?{...pe,name:s.name||pe.name,description:s.description??pe.description,avatar:s.avatar??pe.avatar}:null)},[s.name,s.description,s.avatar,t]),b.useEffect(()=>{z==="banned"&&(dt||pn)&&tn()},[z,dt,pn]);const Wn=async()=>{if(!(!s||!s.type)){qe(!0);try{await Ee.joinChat(s.id,s.type),st("success",`Successfully joined the ${s.type}!`),await Mt(),await en()}catch(I){zj(I)?(Re(!0),st("error",Bj(I))):st("error",Tn(I,"Failed to join"))}finally{qe(!1)}}},oe=async I=>{if(!h)return;const pe=j?.members.find(Le=>Le.userId===I);await kn({title:"Remove Member",message:`Remove ${pe?.user.username||"this member"} from the ${s.type}?`,confirmText:"Remove",cancelText:"Cancel",variant:"danger"})&&(C(Le=>Le?{...Le,members:Le.members.filter(pt=>pt.userId!==I)}:null),st("success",`${pe?.user.username} has been removed`),h(I))},de=async I=>{if(!g)return;const pe=j?.members.find(Le=>Le.userId===I);await kn({title:"Ban Member",message:`Ban ${pe?.user.username||"this member"}? They won't be able to rejoin.`,confirmText:"Ban",cancelText:"Cancel",variant:"danger"})&&(C(Le=>Le?{...Le,members:Le.members.filter(pt=>pt.userId!==I)}:null),st("success",`${pe?.user.username} has been banned`),await g(I))},ht=async(I,pe)=>{if(!y)return;if(await kn({title:"Unban User",message:`Unban ${pe}? They will be able to rejoin.`,confirmText:"Unban",cancelText:"Cancel",variant:"info"}))try{await y(I),B(Le=>Le.filter(pt=>pt.userId!==I)),st("success",`${pe} has been unbanned`)}catch{st("error","Failed to unban user")}},ut=async()=>{if(!v||!j)return;const I=j.privacy==="public"?"private":"public";if(await kn({title:`Make ${s.type} ${I}?`,message:I==="private"?"Only invited members will be able to join.":"Anyone can find and join this chat.",confirmText:"Confirm",cancelText:"Cancel",variant:"info"})){he(!0);try{await v(I),C(ve=>ve?{...ve,privacy:I}:null)}catch{st("error","Failed to update privacy")}finally{he(!1)}}},It=async()=>{if(!p)return;const I=s.type==="channel";await kn({title:`Leave ${I?"Channel":"Group"}?`,message:`Are you sure you want to leave "${j?.name||s.name}"? You can rejoin later if it's public.`,confirmText:"Leave",cancelText:"Cancel",variant:"danger"})&&p()},Sn=async()=>{if(!d)return;const I=s.type==="channel";await kn({title:`Delete ${I?"Channel":"Group"}?`,message:`Are you sure you want to permanently delete "${j?.name||s.name}"? This action cannot be undone and all messages will be lost.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger"})&&d()};b.useEffect(()=>{if(!P.trim()){K([]),me(!1);return}me(!0);const I=setTimeout(async()=>{try{const pe=await cn.searchUsers(P.trim()),ve=new Set(j?.members?.map(Le=>Le.userId)||[]);K(pe.filter(Le=>!ve.has(Le.id)))}catch(pe){console.error("Search failed:",pe),K([])}finally{me(!1)}},300);return()=>clearTimeout(I)},[P,j?.members]);const $=async I=>{try{s.type==="group"?await Ee.addMemberToGroup(s.id,I):await Ee.addMemberToChannel(s.id,I),st("success","Member added successfully"),te(""),K([]),await en()}catch(pe){st("error",Tn(pe,"Failed to add member"))}},W=s.type==="channel";return r.jsxs(r.Fragment,{children:[r.jsx(Xn,{children:t&&r.jsx(se.div,{className:"gpm-overlay",variants:ZN,initial:"hidden",animate:"visible",exit:"exit",onClick:n,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:20},children:r.jsxs(se.div,{variants:JN,onClick:I=>I.stopPropagation(),style:{width:"100%",maxWidth:520,maxHeight:"85vh",background:G.surface,borderRadius:16,border:`1px solid ${G.border}`,boxShadow:`0 0 0 1px ${G.border}, 0 25px 80px -20px rgba(0, 0, 0, 0.8)`,display:"flex",flexDirection:"column",overflow:"hidden"},children:[r.jsxs("div",{style:{padding:"16px 20px",borderBottom:`1px solid ${G.border}`,display:"flex",alignItems:"center",gap:12,background:G.bg},children:[z!=="main"&&r.jsx(se.button,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1},whileHover:{backgroundColor:G.surfaceActive,transition:{duration:.1}},whileTap:{scale:.95,transition:{duration:.05}},onClick:()=>L("main"),className:"gpm-clickable",style:{width:32,height:32,borderRadius:8,background:G.surfaceHover,border:`1px solid ${G.border}`,display:"flex",alignItems:"center",justifyContent:"center",color:G.text},children:r.jsx(Vh,{size:18,style:{transform:"rotate(180deg)",flexShrink:0,minWidth:18}})}),r.jsx("div",{style:{flex:1},children:r.jsxs("h2",{style:{margin:0,fontSize:16,fontWeight:600,color:G.text,letterSpacing:"-0.01em"},children:[z==="main"&&`${W?"Channel":"Group"} Profile`,z==="members"&&"Members",z==="banned"&&"Banned Users",z==="addMember"&&"Add Member"]})}),r.jsx(se.button,{whileHover:{backgroundColor:G.surfaceActive,transition:{duration:.1}},whileTap:{scale:.95,transition:{duration:.05}},onClick:n,className:"gpm-clickable",style:{width:32,height:32,borderRadius:8,background:G.surfaceHover,border:`1px solid ${G.border}`,display:"flex",alignItems:"center",justifyContent:"center",color:G.textMuted,transition:"background 0.1s"},children:r.jsx(En,{size:16,style:{flexShrink:0,minWidth:16}})})]}),r.jsxs("div",{className:"gpm-scrollable",style:{flex:1,overflowY:"auto",padding:20},children:[r.jsx(Xn,{children:we.type&&r.jsx(e4,{type:we.type,message:we.message,onDismiss:()=>$e({type:null,message:""})})}),r.jsx(Xn,{mode:"wait",children:T?r.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:60,gap:16},children:[r.jsx(se.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:r.jsx(ln,{size:32,color:G.primary})}),r.jsx("span",{style:{color:G.textMuted,fontSize:14},children:"Loading..."})]},"loading"):z==="main"?r.jsxs(se.div,{variants:wd,initial:"hidden",animate:"visible",exit:"hidden",children:[r.jsx(se.div,{variants:Qi,children:r.jsxs(a4,{enabled:S,children:[r.jsx("div",{style:{width:100,height:100,borderRadius:"50%",margin:"0 auto 16px",background:j?.avatar?"none":`linear-gradient(135deg, ${G.primary}60, ${G.primary}30)`,display:"flex",alignItems:"center",justifyContent:"center",border:`3px solid ${G.primary}50`,overflow:"hidden",boxShadow:`0 0 25px ${G.primaryGlow}`},children:j?.avatar?r.jsx("img",{src:mt(j.avatar),alt:j.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):W?r.jsx(ns,{size:42,color:G.primary,style:{flexShrink:0,minWidth:42}}):r.jsx(jn,{size:42,color:G.primary,style:{flexShrink:0,minWidth:42}})}),r.jsx("h3",{style:{margin:"0 0 8px",fontSize:22,fontWeight:700,color:G.text,letterSpacing:"-0.02em"},children:j?.name||s.name}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,marginBottom:8},children:[r.jsx(t4,{privacy:j?.privacy||"private"}),r.jsxs("span",{style:{fontSize:13,color:G.textSecondary,display:"flex",alignItems:"center",gap:6},children:[r.jsx(jn,{size:14,style:{flexShrink:0,minWidth:14}}),j?.members.length||0," members",r.jsxs("span",{style:{color:G.online},children:[" ",Ht," online"]})]})]}),j?.description&&r.jsx("p",{style:{margin:"12px 0 0",fontSize:14,color:G.textSecondary,lineHeight:1.5,maxWidth:360,marginLeft:"auto",marginRight:"auto"},children:j.description}),j?.createdAt&&r.jsxs("div",{style:{marginTop:12,fontSize:12,color:G.textMuted,display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[r.jsx(wb,{size:12,style:{flexShrink:0,minWidth:12}}),"Created ",new Date(j.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})}),!bt&&!Ke&&r.jsx(se.div,{variants:Qi,style:{marginBottom:20},children:r.jsxs(se.button,{onClick:Wn,disabled:He,className:"gpm-clickable",style:{width:"100%",padding:"14px 20px",background:G.primary,border:"none",borderRadius:10,color:"#fff",fontSize:15,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:10,transition:"box-shadow 0.1s"},whileHover:{boxShadow:`0 0 20px ${G.primaryGlow}`,transition:{duration:.1}},whileTap:{scale:.98,transition:{duration:.05}},children:[He?r.jsx(ln,{size:18,className:"animate-spin"}):r.jsx(wl,{size:18}),He?"Joining...":`Join ${W?"Channel":"Group"}`]})}),Ke&&r.jsxs(se.div,{variants:Qi,style:{padding:16,background:G.dangerMuted,borderRadius:10,border:`1px solid ${G.danger}30`,marginBottom:20,textAlign:"center"},children:[r.jsx(Rs,{size:24,color:G.danger,style:{marginBottom:8}}),r.jsxs("p",{style:{margin:0,fontSize:14,color:G.danger,fontWeight:500},children:["You are banned from this ",s.type]})]}),r.jsxs(se.div,{variants:Qi,style:{display:"flex",flexDirection:"column",gap:8},children:[r.jsx(Xi,{icon:r.jsx(jn,{size:18,style:{flexShrink:0,minWidth:18}}),label:`View Members (${j?.members.length||0})`,onClick:()=>L("members")}),(dt||un)&&bt&&r.jsx(Xi,{icon:r.jsx(wl,{size:18,style:{flexShrink:0,minWidth:18}}),label:"Add Member",onClick:()=>L("addMember"),variant:"primary"}),(dt||At)&&bt&&r.jsx(Xi,{icon:j?.privacy==="public"?r.jsx(Ph,{size:18,style:{flexShrink:0,minWidth:18}}):r.jsx(_b,{size:18,style:{flexShrink:0,minWidth:18}}),label:`Make ${j?.privacy==="public"?"Private":"Public"}`,onClick:ut,loading:Ce}),(dt||At)&&bt&&c&&r.jsx(Xi,{icon:r.jsx(N_,{size:18,style:{flexShrink:0,minWidth:18}}),label:`Edit ${W?"Channel":"Group"}`,onClick:c}),(dt||pn)&&bt&&r.jsx(Xi,{icon:r.jsx(Rs,{size:18,style:{flexShrink:0,minWidth:18}}),label:"Banned Users",onClick:()=>L("banned")}),bt&&p&&r.jsx(Xi,{icon:r.jsx(Fh,{size:18,style:{flexShrink:0,minWidth:18}}),label:`Leave ${W?"Channel":"Group"}`,onClick:It,variant:"danger"}),dt&&d&&r.jsx(Xi,{icon:r.jsx(Gd,{size:18,style:{flexShrink:0,minWidth:18}}),label:`Delete ${W?"Channel":"Group"}`,onClick:Sn,variant:"danger"})]})]},"main"):z==="members"?r.jsxs(se.div,{variants:Kf,initial:"hidden",animate:"visible",exit:"exit",children:[r.jsxs("div",{style:{marginBottom:16,position:"relative"},children:[r.jsx(jl,{size:16,color:G.textMuted,style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",flexShrink:0,minWidth:16}}),r.jsx("input",{type:"text",placeholder:"Search members...",value:R,onChange:I=>Y(I.target.value),style:{width:"100%",padding:"12px 14px 12px 42px",background:G.surfaceElevated,border:`1px solid ${G.border}`,borderRadius:10,color:G.text,fontSize:14,outline:"none",transition:"border-color 0.2s"},onFocus:I=>I.target.style.borderColor=G.primary,onBlur:I=>I.target.style.borderColor=G.border})]}),r.jsxs(se.div,{variants:wd,initial:"hidden",animate:"visible",style:{display:"flex",flexDirection:"column",gap:8},children:[bn.map(I=>r.jsx(s4,{member:I,isOnline:Tt(I.userId),lastSeen:kt(I.userId),isCurrentUser:I.userId===o,canManage:dt||xt||pn,onViewProfile:()=>m?.(I.userId),onKick:(dt||xt)&&I.role!=="admin"?()=>oe(I.userId):void 0,onBan:(dt||pn)&&I.role!=="admin"?()=>de(I.userId):void 0,onManagePermissions:dt&&I.role!=="admin"?()=>{ie(I),Ae(!0)}:void 0},I.userId)),bn.length===0&&r.jsx("div",{style:{textAlign:"center",padding:40,color:G.textMuted},children:"No members found"})]})]},"members"):z==="banned"?r.jsx(se.div,{variants:Kf,initial:"hidden",animate:"visible",exit:"exit",children:ne?r.jsx("div",{style:{textAlign:"center",padding:40},children:r.jsx(ln,{size:24,color:G.primary,className:"animate-spin"})}):Te.length===0?r.jsxs("div",{style:{textAlign:"center",padding:40,color:G.textMuted},children:[r.jsx(Rs,{size:32,style:{marginBottom:12,opacity:.5}}),r.jsx("p",{children:"No banned users"})]}):r.jsx(se.div,{variants:wd,initial:"hidden",animate:"visible",style:{display:"flex",flexDirection:"column",gap:8},children:Te.map(I=>r.jsxs(se.div,{variants:Qi,style:{display:"flex",alignItems:"center",padding:"12px 14px",background:G.surfaceElevated,borderRadius:10,border:`1px solid ${G.border}`},children:[I.avatarUrl?r.jsx("img",{src:mt(I.avatarUrl),alt:I.username,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover",marginRight:12}}):r.jsx("div",{style:{width:40,height:40,borderRadius:"50%",background:G.dangerMuted,display:"flex",alignItems:"center",justifyContent:"center",marginRight:12,color:G.danger,fontWeight:600},children:An(I.username)}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontSize:14,fontWeight:600,color:G.text},children:I.username}),r.jsxs("div",{style:{fontSize:12,color:G.textMuted},children:["Banned ",new Date(I.bannedAt).toLocaleDateString()]})]}),r.jsx("button",{onClick:()=>ht(I.userId,I.username),className:"gpm-clickable",style:{padding:"8px 14px",background:G.primaryMuted,border:`1px solid ${G.primary}30`,borderRadius:6,color:G.primary,fontSize:13,fontWeight:500},children:"Unban"})]},I.userId))})},"banned"):z==="addMember"?r.jsxs(se.div,{variants:Kf,initial:"hidden",animate:"visible",exit:"exit",children:[r.jsxs("div",{style:{marginBottom:16,position:"relative"},children:[r.jsx(jl,{size:16,color:G.textMuted,style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",flexShrink:0,minWidth:16}}),r.jsx("input",{type:"text",placeholder:"Search users to add...",value:P,onChange:I=>te(I.target.value),style:{width:"100%",padding:"12px 14px 12px 42px",background:G.surfaceElevated,border:`1px solid ${G.border}`,borderRadius:10,color:G.text,fontSize:14,outline:"none",transition:"border-color 0.2s"},onFocus:I=>I.target.style.borderColor=G.primary,onBlur:I=>I.target.style.borderColor=G.border})]}),ge?r.jsx("div",{style:{textAlign:"center",padding:40},children:r.jsx(ln,{size:24,color:G.primary,className:"animate-spin"})}):re.length>0?r.jsx(se.div,{variants:wd,initial:"hidden",animate:"visible",style:{display:"flex",flexDirection:"column",gap:8},children:re.map(I=>r.jsxs(se.div,{variants:Qi,style:{display:"flex",alignItems:"center",padding:"12px 14px",background:G.surfaceElevated,borderRadius:10,border:`1px solid ${G.border}`},children:[I.avatar?r.jsx("img",{src:mt(I.avatar),alt:I.username,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover",marginRight:12}}):r.jsx("div",{style:{width:40,height:40,borderRadius:"50%",background:G.primaryMuted,display:"flex",alignItems:"center",justifyContent:"center",marginRight:12,color:G.primary,fontWeight:600},children:An(I.username)}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontSize:14,fontWeight:600,color:G.text},children:I.username}),I.email&&r.jsx("div",{style:{fontSize:12,color:G.textMuted},children:I.email})]}),r.jsxs("button",{onClick:()=>$(I.id),className:"gpm-clickable",style:{padding:"8px 14px",background:G.primary,border:"none",borderRadius:6,color:"#fff",fontSize:13,fontWeight:500,display:"flex",alignItems:"center",gap:6},children:[r.jsx(wl,{size:14}),"Add"]})]},I.id))}):P.trim()?r.jsx("div",{style:{textAlign:"center",padding:40,color:G.textMuted},children:"No users found"}):r.jsxs("div",{style:{textAlign:"center",padding:40,color:G.textMuted},children:[r.jsx(wl,{size:32,style:{marginBottom:12,opacity:.5}}),r.jsx("p",{children:"Type to search for users"})]})]},"addMember"):null})]})]})})}),_e&&je&&r.jsx(zm,{isOpen:_e,onClose:()=>{Ae(!1),ie(null)},chatId:s.id,member:je,onPermissionsChanged:async()=>{await en()}})]})},fe={bg:"#050505",surface:"#0a0a0a",surfaceElevated:"#0f0f0f",surfaceHover:"#151515",border:"#1a1a1a",primary:"#10b981",primaryHover:"#0d9668",primaryMuted:"rgba(16, 185, 129, 0.15)",danger:"#ef4444",dangerMuted:"rgba(239, 68, 68, 0.15)",text:"#ffffff",textSecondary:"#a1a1aa",textMuted:"#71717a"},i4=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M5.5 3.21V20.8l4.75-4.73 2.99 6.73L15.5 21.6l-3-6.7h6z'/%3E%3Cpath fill='%23064e3b' d='M6.5 5.61v11.68l3.38-3.37.37-.37.48 1.07 1.93 4.35 1.07-.47L11.8 14.1l-.48-1.07H16z'/%3E%3C/svg%3E") 5 3, default`,o4=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M9 2.5a2.5 2.5 0 0 1 5 0v7.996l3.904-.74a2.095 2.095 0 0 1 2.537 2.466L19.5 17.5a6 6 0 0 1-6 6H11a7 7 0 0 1-7-7V9a2 2 0 1 1 4 0v3.5h1z'/%3E%3Cpath fill='%23064e3b' d='M10 2.5V14h-.5a1.5 1.5 0 0 1-1.5-1.5V9a1 1 0 1 0-2 0v7.5a6 6 0 0 0 6 6h2.5a5 5 0 0 0 5-5l.941-5.278a1.095 1.095 0 0 0-1.324-1.288l-4.117.78V2.5a1.5 1.5 0 0 0-3 0z'/%3E%3C/svg%3E") 9 4, pointer`,r4=`
  /* Custom Emerald Cursor Styles */
  .user-profile-modal-overlay {
    cursor: ${i4};
  }
  .user-profile-modal-overlay * {
    cursor: inherit;
  }
  .user-profile-modal-overlay button,
  .user-profile-modal-overlay a,
  .user-profile-modal-overlay [role="button"],
  .user-profile-modal-overlay input[type="submit"],
  .user-profile-modal-overlay input[type="button"],
  .user-profile-modal-overlay .clickable {
    cursor: ${o4};
  }
  .user-profile-modal-overlay input[type="text"],
  .user-profile-modal-overlay input[type="email"],
  .user-profile-modal-overlay input[type="password"],
  .user-profile-modal-overlay input[type="search"],
  .user-profile-modal-overlay textarea {
    cursor: text;
  }

  /* Scrollbar Styles */
  .user-profile-modal-content::-webkit-scrollbar {
    width: 8px;
  }
  .user-profile-modal-content::-webkit-scrollbar-track {
    background: ${fe.surface};
    border-radius: 4px;
  }
  .user-profile-modal-content::-webkit-scrollbar-thumb {
    background: ${fe.primary};
    border-radius: 4px;
    border: 2px solid ${fe.surface};
  }
  .user-profile-modal-content::-webkit-scrollbar-thumb:hover {
    background: ${fe.primaryHover};
  }

  /* Matrix Animation Keyframes */
  @keyframes user-matrix-flicker {
    0%, 100% { opacity: 0.1; }
    50% { opacity: 0.4; }
  }

  @keyframes user-matrix-fall {
    0% { transform: translateY(-100%); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateY(100%); opacity: 0; }
  }

  @keyframes user-matrix-glow {
    0%, 100% { filter: brightness(1) drop-shadow(0 0 2px ${fe.primary}); }
    50% { filter: brightness(1.3) drop-shadow(0 0 8px ${fe.primary}); }
  }

  .user-matrix-container .user-matrix-cell {
    background: ${fe.primary};
    opacity: 0.18;
    border-radius: 2px;
    transition: all 0.2s ease;
    animation: user-matrix-flicker 2s ease-in-out infinite;
    animation-delay: calc(var(--cell-index) * 0.02s);
  }

  .user-matrix-container .user-matrix-cell:nth-child(3n) {
    opacity: 0.32;
    animation-duration: 1.5s;
    box-shadow: 0 0 3px ${fe.primary};
  }
  .user-matrix-container .user-matrix-cell:nth-child(5n) {
    opacity: 0.42;
    animation-duration: 1.8s;
    box-shadow: 0 0 4px ${fe.primary};
  }
  .user-matrix-container .user-matrix-cell:nth-child(7n+1) {
    opacity: 0.25;
    animation-duration: 2.2s;
  }
  .user-matrix-container .user-matrix-cell:nth-child(11n) {
    opacity: 0.55;
    box-shadow: 0 0 6px ${fe.primary}, 0 0 10px ${fe.primary};
    animation-duration: 1.2s;
  }

  .user-matrix-container .user-matrix-rain {
    position: absolute;
    width: 2px;
    background: linear-gradient(to bottom, transparent, ${fe.primary}, transparent);
    pointer-events: none;
    animation: user-matrix-fall 2s linear infinite;
  }

  .user-matrix-container .user-avatar-wrapper {
    animation: user-matrix-glow 3s ease-in-out infinite;
  }
`;if(typeof document<"u"&&!document.getElementById("user-profile-scrollbar-styles")){const t=document.createElement("style");t.id="user-profile-scrollbar-styles",t.textContent=r4,document.head.appendChild(t)}const l4={hidden:{opacity:0},visible:{opacity:1}},c4={hidden:{opacity:0,scale:.95,y:20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:25,stiffness:300}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.15}}},d4={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}},Zo={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},u4=({children:t,enabled:n=!0})=>r.jsxs("div",{className:"user-matrix-container",style:{position:"relative",background:fe.bg,borderRadius:"16px",overflow:"hidden",marginBottom:"20px",border:`1px solid ${fe.border}`},children:[n&&r.jsx("div",{style:{position:"absolute",inset:0,display:"grid",gridTemplateColumns:"repeat(15, 1fr)",gridTemplateRows:"repeat(12, 1fr)",gap:"3px",padding:"12px",pointerEvents:"none",zIndex:0},children:Array.from({length:180}).map((p,h)=>r.jsx("div",{className:"user-matrix-cell",style:{"--cell-index":h}},h))}),n&&Array.from({length:8}).map((p,h)=>r.jsx("div",{className:"user-matrix-rain",style:{left:`${10+h*80/8}%`,height:"40px",animationDelay:`${h*.15}s`}},`rain-${h}`)),r.jsx("div",{style:{position:"relative",zIndex:1,padding:"24px"},children:t})]}),Ih=({isOpen:t,onClose:n,userId:s,onSendMessage:o,onBlockUser:c,onUnblockUser:d,fancyAnimations:p=!0})=>{const[h,m]=b.useState(null),[g,y]=b.useState(!1),[v,S]=b.useState(null),[j,C]=b.useState(!1),[T,E]=b.useState(!1),[z,L]=b.useState(!1),{isUserOnline:R,getUserLastSeen:Y,usersYouBlocked:P,blockedByUsers:te}=Pe();b.useEffect(()=>{t&&s&&(re(),K())},[t,s]),b.useEffect(()=>{if(!t||!s)return;const Te=P.has(s),B=te.has(s);Te!==j&&C(Te),B!==T&&E(B)},[t,s,P,te]);const re=async()=>{y(!0),S(null);try{const Te=await cn.getUserProfile(s);m(Te)}catch(Te){console.error("[UserProfileViewer] Error loading profile:",Te),S(Te.response?.data?.message||"Failed to load user profile")}finally{y(!1)}},K=async()=>{L(!0);try{const Te=await cn.getMutualBlockStatus(s);C(Te.iBlockedThem),E(Te.theyBlockedMe)}catch(Te){console.error("[UserProfileViewer] Error checking block status:",Te),C(!1),E(!1)}finally{L(!1)}},ge=()=>{o&&(o(s),n())},me=async()=>{if(!c)return;await kn({title:"Block User",message:`Are you sure you want to block ${h?.username||"this user"}? They won't be able to message you.`,confirmText:"Block",cancelText:"Cancel",variant:"danger"})&&(c(s),C(!0))},He=async()=>{if(!d)return;await kn({title:"Unblock User",message:`Are you sure you want to unblock ${h?.username||"this user"}? They will be able to message you again.`,confirmText:"Unblock",cancelText:"Cancel",variant:"success",icon:"success"})&&(d(s),C(!1))},qe=j||T,Ke=h?R(h.id):!1,Re=h?Y(h.id):void 0;return r.jsx(Xn,{children:t&&r.jsx(se.div,{className:"user-profile-modal-overlay",variants:l4,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.2},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:n,children:r.jsxs(se.div,{variants:c4,initial:"hidden",animate:"visible",exit:"exit",style:{background:fe.surface,borderRadius:"16px",border:`1px solid ${fe.border}`,maxWidth:"420px",width:"100%",maxHeight:"85vh",display:"flex",flexDirection:"column",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",overflow:"hidden"},onClick:Te=>Te.stopPropagation(),children:[r.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${fe.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",background:fe.bg},children:[r.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:700,color:fe.text,letterSpacing:"-0.02em"},children:"User Profile"}),r.jsx(se.button,{whileHover:{scale:1.1,backgroundColor:fe.surfaceHover},whileTap:{scale:.9},onClick:n,"aria-label":"Close",style:{background:"transparent",border:"none",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",color:fe.textMuted},children:r.jsx(En,{size:20,style:{flexShrink:0,minWidth:20}})})]}),r.jsxs("div",{className:"user-profile-modal-content",style:{overflowY:"auto",flex:1,padding:"24px"},children:[g&&r.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:fe.textMuted},children:[r.jsx(se.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{width:"40px",height:"40px",border:`3px solid ${fe.border}`,borderTopColor:fe.primary,borderRadius:"50%",margin:"0 auto 16px"}}),"Loading profile..."]}),v&&r.jsx("div",{style:{textAlign:"center",padding:"60px 20px",color:fe.danger,backgroundColor:fe.dangerMuted,borderRadius:"12px"},children:v}),!g&&!v&&h&&r.jsxs(se.div,{variants:d4,initial:"hidden",animate:"visible",children:[r.jsx(u4,{enabled:p,children:r.jsxs(se.div,{variants:Zo,style:{textAlign:"center"},children:[r.jsxs("div",{className:"user-avatar-wrapper",style:{position:"relative",display:"inline-block",marginBottom:"16px"},children:[h.avatar?r.jsx("img",{src:h.avatar,alt:h.username,style:{width:"120px",height:"120px",borderRadius:"50%",objectFit:"cover",border:`3px solid ${Ke?fe.primary:fe.border}`,boxShadow:Ke?`0 0 30px ${fe.primaryMuted}`:"none"}}):r.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:`linear-gradient(135deg, ${fe.primary} 0%, ${fe.primaryHover} 100%)`,color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"48px",fontWeight:700,boxShadow:`0 0 30px ${fe.primaryMuted}`},children:h.username.charAt(0).toUpperCase()}),r.jsx("div",{style:{position:"absolute",bottom:"6px",right:"6px",width:"24px",height:"24px",borderRadius:"50%",background:Ke?fe.primary:fe.textMuted,border:`3px solid ${fe.bg}`,boxShadow:Ke?`0 0 12px ${fe.primary}`:"none"}})]}),r.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"24px",fontWeight:700,color:fe.text,letterSpacing:"-0.02em",textShadow:`0 0 20px ${fe.primaryMuted}`},children:h.username}),r.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"6px 14px",borderRadius:"20px",background:Ke?fe.primaryMuted:"rgba(15, 15, 15, 0.8)",border:`1px solid ${Ke?`${fe.primary}30`:fe.border}`,backdropFilter:"blur(4px)"},children:[r.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:Ke?fe.primary:fe.textMuted,boxShadow:Ke?`0 0 8px ${fe.primary}`:"none"}}),r.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:Ke?fe.primary:fe.textMuted},children:Ke?"Online":Re?`Last seen ${Hd(Re)}`:"Offline"})]})]})}),r.jsxs(se.div,{variants:Zo,style:{padding:"16px",background:fe.surfaceElevated,borderRadius:"12px",marginBottom:"16px",border:`1px solid ${fe.border}`},children:[r.jsx("h4",{style:{margin:"0 0 10px 0",fontSize:"12px",fontWeight:700,color:fe.primary,textTransform:"uppercase",letterSpacing:"0.5px"},children:"About"}),r.jsx("p",{style:{margin:0,fontSize:"14px",color:h.bio?fe.textSecondary:fe.textMuted,lineHeight:"1.6",fontStyle:h.bio?"normal":"italic"},children:h.bio||"No bio set"})]}),h.email&&r.jsxs(se.div,{variants:Zo,style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",background:fe.surfaceElevated,borderRadius:"12px",marginBottom:"12px",border:`1px solid ${fe.border}`},children:[r.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:fe.primaryMuted,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(I_,{size:18,color:fe.primary,style:{flexShrink:0,minWidth:18}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"12px",color:fe.textMuted,marginBottom:"2px"},children:"Email"}),r.jsx("div",{style:{fontSize:"14px",color:fe.text,fontWeight:500},children:h.email})]})]}),h.createdAt&&r.jsxs(se.div,{variants:Zo,style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 16px",background:fe.surfaceElevated,borderRadius:"12px",marginBottom:"16px",border:`1px solid ${fe.border}`},children:[r.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:fe.primaryMuted,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(wb,{size:18,color:fe.primary,style:{flexShrink:0,minWidth:18}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"12px",color:fe.textMuted,marginBottom:"2px"},children:"Member Since"}),r.jsx("div",{style:{fontSize:"14px",color:fe.text,fontWeight:500},children:new Date(h.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),!z&&(T||j)&&r.jsxs(se.div,{variants:Zo,style:{padding:"14px 16px",background:fe.dangerMuted,borderRadius:"12px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px",border:`1px solid ${fe.danger}30`},children:[r.jsx(Rs,{size:20,color:fe.danger,style:{flexShrink:0,minWidth:20}}),r.jsx("span",{style:{fontSize:"14px",color:fe.danger,fontWeight:500},children:T&&j?"You have blocked each other":T?"This user has blocked you":"You have blocked this user"})]}),r.jsxs(se.div,{variants:Zo,style:{display:"flex",gap:"12px",flexDirection:"column"},children:[o&&r.jsxs(se.button,{whileHover:qe?{}:{scale:1.02},whileTap:qe?{}:{scale:.98},onClick:ge,disabled:qe||z,style:{width:"100%",padding:"14px 20px",background:qe?fe.surfaceElevated:fe.primary,color:qe?fe.textMuted:"white",border:qe?`1px solid ${fe.border}`:"none",borderRadius:"12px",cursor:qe?"not-allowed":"pointer",fontSize:"15px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",opacity:qe?.6:1,boxShadow:qe?"none":`0 0 20px ${fe.primaryMuted}`},children:[r.jsx(_d,{size:20,style:{flexShrink:0,minWidth:20}}),qe?"Cannot Message":"Send Message"]}),j?d&&r.jsxs(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:He,style:{width:"100%",padding:"14px 20px",background:fe.primaryMuted,color:fe.primary,border:`1px solid ${fe.primary}30`,borderRadius:"12px",cursor:"pointer",fontSize:"15px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[r.jsx(Cb,{size:20,style:{flexShrink:0,minWidth:20}}),"Unblock User"]}):c&&r.jsxs(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:me,style:{width:"100%",padding:"14px 20px",background:fe.dangerMuted,color:fe.danger,border:`1px solid ${fe.danger}30`,borderRadius:"12px",cursor:"pointer",fontSize:"15px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[r.jsx(Nl,{size:20,style:{flexShrink:0,minWidth:20}}),"Block User"]})]})]})]})]})})})},XS=({isOpen:t,onClose:n,isDarkMode:s=!1})=>{const[o,c]=b.useState([]),[d,p]=b.useState(!1),[h,m]=b.useState(null);b.useEffect(()=>{t&&g()},[t]);const g=async()=>{p(!0);try{const v=await cn.getBlockedUsers();c(v||[])}catch(v){console.error("Failed to load blocked users:",v)}finally{p(!1)}},y=async v=>{if(await kn({title:"Unblock User",message:`Are you sure you want to unblock ${v.username}? They will be able to message you again.`,confirmText:"Unblock",cancelText:"Cancel",variant:"success",icon:"success"})){m(v.userId);try{await cn.unblockUser(v.userId),c(j=>j.filter(C=>C.userId!==v.userId))}catch(j){console.error("Failed to unblock user:",j)}finally{m(null)}}};return t?r.jsxs(r.Fragment,{children:[r.jsx("div",{onClick:n,style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998}}),r.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"480px",maxHeight:"80vh",backgroundColor:s?"#1e293b":"#ffffff",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:`1px solid ${s?"#334155":"#e2e8f0"}`},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"#dc2626",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Nl,{size:20,color:"white"})}),r.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:700,color:s?"#f1f5f9":"#1e293b"},children:"Blocked Users"})]}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",color:s?"#94a3b8":"#64748b",transition:"background-color 0.2s"},onMouseEnter:v=>{v.currentTarget.style.backgroundColor=s?"#334155":"#f1f5f9"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor="transparent"},children:r.jsx(En,{size:20})})]}),r.jsx("div",{style:{flex:1,overflow:"auto",padding:"16px 24px"},children:d?r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 0",color:s?"#94a3b8":"#64748b"},children:"Loading..."}):o.length===0?r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 0",color:s?"#94a3b8":"#64748b"},children:[r.jsx(Nl,{size:48,style:{marginBottom:"16px",opacity:.5}}),r.jsx("p",{style:{margin:0,fontSize:"14px"},children:"You haven't blocked any users"})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:o.map(v=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:s?"#334155":"#f8fafc",borderRadius:"12px",border:`1px solid ${s?"#475569":"#e2e8f0"}`},children:[r.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"50%",overflow:"hidden",flexShrink:0},children:v.avatarUrl?r.jsx("img",{src:mt(v.avatarUrl),alt:v.username,style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#6366f1",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600,fontSize:"16px"},children:An(v.username)})}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontSize:"15px",fontWeight:600,color:s?"#f1f5f9":"#1e293b",marginBottom:"2px"},children:v.username}),r.jsxs("div",{style:{fontSize:"12px",color:s?"#94a3b8":"#64748b"},children:["Blocked ",new Date(v.blockedAt).toLocaleDateString()]})]}),r.jsxs("button",{onClick:()=>y(v),disabled:h===v.userId,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",backgroundColor:s?"#475569":"#e2e8f0",color:s?"#f1f5f9":"#1e293b",border:"none",borderRadius:"8px",cursor:h===v.userId?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,opacity:h===v.userId?.6:1,transition:"all 0.2s"},onMouseEnter:S=>{h!==v.userId&&(S.currentTarget.style.backgroundColor="#10b981",S.currentTarget.style.color="white")},onMouseLeave:S=>{h!==v.userId&&(S.currentTarget.style.backgroundColor=s?"#475569":"#e2e8f0",S.currentTarget.style.color=s?"#f1f5f9":"#1e293b")},children:[r.jsx(O_,{size:14}),h===v.userId?"Unblocking...":"Unblock"]})]},v.userId))})}),r.jsx("div",{style:{padding:"16px 24px",borderTop:`1px solid ${s?"#334155":"#e2e8f0"}`,display:"flex",justifyContent:"flex-end"},children:r.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:s?"#334155":"#e2e8f0",color:s?"#f1f5f9":"#1e293b",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600,transition:"background-color 0.2s"},onMouseEnter:v=>{v.currentTarget.style.backgroundColor=s?"#475569":"#cbd5e1"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor=s?"#334155":"#e2e8f0"},children:"Close"})})]})]}):null},p4=t=>{if(!t||t==="undefined"||t==="null")return"?";const n=String(t).trim();if(!n||n.length===0)return"?";const s=n.split(/\s+/).filter(o=>o.length>0);return s.length===0?"?":s.length===1?s[0][0]?.toUpperCase()||"?":s.map(o=>o[0]).join("").toUpperCase().slice(0,2)||"?"},Dd=({src:t,name:n,fallbackClass:s})=>{const[o,c]=La.useState(!t),[d,p]=La.useState(!1);La.useEffect(()=>{t?(c(!1),p(!1)):c(!0)},[t]);const h=()=>{p(!0),c(!0)};return o||d||!t?r.jsx("div",{className:s,children:p4(n)}):r.jsx("img",{src:t,alt:n,className:s,onError:h,loading:"lazy"})},f4=t=>{if(!t)return"Unknown";try{const n=new Date(t);if(isNaN(n.getTime()))return console.warn("Invalid date string:",t),"Invalid date";const s=new Date,o=new Date(s.getFullYear(),s.getMonth(),s.getDate()),c=new Date(o);c.setDate(c.getDate()-1);const d=new Date(n.getFullYear(),n.getMonth(),n.getDate());return d.getTime()===o.getTime()?n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):d.getTime()===c.getTime()?"Yesterday":s.getTime()-n.getTime()<10080*60*1e3?n.toLocaleString("en-US",{weekday:"short"}):n.toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch(n){return console.error("Error formatting time:",n,t),"Invalid date"}},h4=(t,n)=>{if(!t.lastMessage)return{preview:"No messages yet",isReply:!1,hasMention:!1,hasAttachment:!1,isOwnMessage:!1,isSeen:!1};const s=t.lastMessage,o=s.content||"",c=!!s.replyId,d=!!s.fileUrl,p=n?s.senderId===n:!1,h=s.isSeen===!0,m=n?/@\w+/.test(o):!1;let g=o;if(!o&&d&&(g=" Attachment"),t.type!=="dm"&&s.senderUsername){const v=`${s.senderUsername||"Unknown"}: ${g}`;return{preview:v.length>40?v.substring(0,37)+"...":v,isReply:c,hasMention:m,hasAttachment:d,isOwnMessage:p,isSeen:h}}return{preview:g.length>40?g.substring(0,37)+"...":g,isReply:c,hasMention:m,hasAttachment:d,isOwnMessage:p,isSeen:h}},m4=({chats:t,currentChat:n,onSelectChat:s,isLoadingChats:o,user:c,onLogout:d,onMenuOpen:p,searchQuery:h,onSearchChange:m,searchResults:g,onSelectSearchResult:y,isSearching:v,isDarkMode:S,onClearSearch:j,isMobileOpen:C=!1,onMobileClose:T,onlineUsers:E})=>{const z=R=>{if(R.type!=="dm")return!1;if(E&&R.members){const Y=R.members.find(P=>P.userId!==c?.id);if(Y?.userId&&E.has(Y.userId))return E.get(Y.userId)||!1}return R.isOnline||!1},L=b.useRef(null);return b.useEffect(()=>{const R=Y=>{L.current&&!L.current.contains(Y.target)&&j()};return h&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[h,j]),r.jsxs(r.Fragment,{children:[C&&r.jsx("div",{className:D.mobileOverlay,onClick:T,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99,display:"none"}}),r.jsxs("div",{className:`${D.leftPanel} ${S?D.darkMode:""} ${C?D.mobileOpen:""}`,children:[r.jsx("div",{className:D.panelHeader,children:r.jsx("button",{className:D.menuButton,onClick:p,title:"Settings",style:{background:"transparent",border:"none",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:S?"#94a3b8":"#64748b",transition:"background 0.15s ease, color 0.15s ease"},onMouseEnter:R=>{R.currentTarget.style.background=S?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",R.currentTarget.style.color=S?"#f1f5f9":"#1e293b"},onMouseLeave:R=>{R.currentTarget.style.background="transparent",R.currentTarget.style.color=S?"#94a3b8":"#64748b"},children:r.jsx(jb,{size:22})})}),r.jsxs("div",{className:D.searchBar,ref:L,children:[r.jsx("input",{type:"text",placeholder:"Search chats, users...",className:D.searchInput,value:h,onChange:R=>m(R.target.value)}),h&&r.jsxs("div",{className:`${D.searchResults} ${S?D.darkMode:""}`,onClick:R=>R.stopPropagation(),children:[v&&r.jsx("div",{className:D.searchLoading,children:"Searching..."}),!v&&g.length===0&&r.jsx("div",{className:D.searchNoResults,children:"No results found"}),g.map(R=>r.jsxs("div",{className:D.searchResultItem,onClick:()=>{y(R),j()},children:[r.jsx("div",{className:D.searchResultAvatar,children:r.jsx(Dd,{src:R.avatar,name:R.name,fallbackClass:D.avatarFallback})}),r.jsxs("div",{className:D.searchResultInfo,children:[r.jsxs("div",{className:D.searchResultName,children:[R.name,r.jsx("span",{className:D.searchResultTypeIcon,title:R.type,children:R.type==="user"?" ":R.type==="group"?" ":R.type==="channel"?" ":""})]}),r.jsx("div",{className:D.searchResultType,children:R.type==="user"?"User":R.type==="group"?"Group":R.type==="channel"?"Channel":"Unknown"})]})]},R.id))]})]}),r.jsxs("div",{className:D.chatList,children:[o&&r.jsx("div",{className:D.loading,children:"Loading chats..."}),!o&&t.length===0&&r.jsx("div",{className:D.emptyState,children:"No chats yet. Start a conversation!"}),t.map(R=>r.jsxs("div",{className:`${D.chatItem} ${n?.id===R.id?D.active:""}`,onClick:()=>s(R),children:[r.jsxs("div",{className:D.chatAvatar,children:[r.jsx(Dd,{src:R.avatar,name:R.name,fallbackClass:D.avatarFallback}),R.type==="dm"&&z(R)&&r.jsx("div",{className:D.onlineIndicator})]}),r.jsxs("div",{className:D.chatInfo,children:[r.jsxs("div",{className:D.chatHeader,children:[r.jsxs("div",{className:D.chatNameWithType,children:[r.jsx("span",{className:D.chatName,children:R.name}),r.jsx("span",{className:`${D.chatTypeIcon} ${D[`icon${R.type.charAt(0).toUpperCase()+R.type.slice(1)}`]}`,title:R.type,children:R.type==="dm"?"":R.type==="group"?"":R.type==="channel"?"":""})]}),r.jsxs("div",{className:D.headerRight,children:[r.jsx("span",{className:D.timestamp,children:f4(R.updatedAt)}),R.unreadCount>0&&r.jsx("span",{className:D.unreadBadge,children:R.unreadCount})]})]}),r.jsx("div",{className:D.chatPreview,children:(()=>{const Y=h4(R,c?.id);return r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx("span",{style:{fontSize:"10px",color:Y.isSeen?"#51cf66":"var(--text-secondary)",fontWeight:500,flexShrink:0,opacity:Y.isSeen?1:.7},title:Y.isSeen?"Seen":"Sent",children:Y.isSeen?"":""}),Y.isReply&&r.jsx("span",{style:{fontSize:"10px",opacity:.8,flexShrink:0},title:"Reply",children:""}),Y.hasMention&&r.jsx("span",{style:{fontSize:"9px",backgroundColor:"var(--accent)",color:"#fff",padding:"1px 4px",borderRadius:"4px",fontWeight:600,flexShrink:0},title:"Mention",children:"@"}),r.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:Y.preview})]})})()})]})]},R.id))]}),c&&r.jsxs("div",{className:D.userSection,children:[r.jsx("div",{className:D.userAvatar,children:r.jsx(Dd,{src:c.avatar,name:c.username,fallbackClass:D.avatarFallback})}),r.jsx("div",{className:D.userInfo,children:r.jsx("div",{className:D.username,children:c.username})}),r.jsx("button",{className:D.logoutButton,onClick:d,title:"Logout",children:""})]})]})]})},ir={getNotifications:async()=>{try{console.log("[NotificationService] Fetching notifications from GET /notifications");const t=await Ne.get("/notifications");console.log("[NotificationService] Raw API Response:",{status:t.status,statusText:t.statusText,data:t.data});let n=[];t.data?.success&&t.data?.data?(n=t.data.data,console.log("[NotificationService] Got notifications from response.data.data:",n.length,"items")):t.data&&Array.isArray(t.data)?(n=t.data,console.log("[NotificationService] Response is direct array:",n.length,"items")):(console.log("[NotificationService] Unexpected response format:",t.data),n=[]);const s=Array.isArray(n)?n.map(o=>({id:o.notificationId||o.id,chatId:o.chatId,messageId:o.messageId,chatName:o.chatName||"",chatAvatar:o.chatAvatar||"",senderName:o.senderName||"",content:o.content||"",fileUrl:o.fileUrl,sentTime:o.sentTime||new Date().toISOString(),seen:o.seen!==void 0?o.seen:!1})):[];return console.log("[NotificationService] Returning",s.length,"normalized notifications"),s}catch(t){return console.error("[NotificationService] Failed to fetch notifications:",t.message),console.error("[NotificationService] Error details:",{status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,url:t.config?.url}),[]}},markAsSeen:async t=>{try{console.log("[NotificationService] Marking notification as seen:",t);const n=await Ne.put(`/notifications/seen?notificationId=${t}`);return console.log("[NotificationService] Mark as seen response:",n.data),n.data?.data||n.data}catch(n){throw console.error("[NotificationService] Failed to mark notification as seen:",n),console.error("[NotificationService] Error details:",{status:n.response?.status,statusText:n.response?.statusText,data:n.response?.data}),n}},markMultipleAsSeen:async t=>{try{if(!Array.isArray(t)||t.length===0)return console.warn("[NotificationService] No notification IDs provided"),{success:!0};console.log("[NotificationService] Marking multiple notifications as seen:",t),console.log("[NotificationService] Notification IDs (type, count):",typeof t[0],t.length);const n={notificationIds:t};console.log("[NotificationService] Request body:",JSON.stringify(n));const s=await Ne.put("/notifications/seen/batch",n);return console.log("[NotificationService] Mark multiple response:",{status:s.status,statusText:s.statusText,data:s.data}),s.data?.success||s.status===200?(console.log("[NotificationService] Successfully marked",t.length,"notifications as seen"),s.data||{success:!0}):(console.warn("[NotificationService] Response indicates potential issue:",s.data),s.data||{success:!0})}catch(n){throw console.error("[NotificationService] Failed to mark multiple notifications as seen:",n),console.error("[NotificationService] Full error details:",{message:n.message,status:n.response?.status,statusText:n.response?.statusText,responseData:n.response?.data,requestData:n.config?.data,headers:n.config?.headers}),n}},markAllAsSeen:async()=>{try{const t=await Ne.put("/notifications/seen/all");return t.data?.data||t.data}catch(t){throw console.warn("[NotificationService] PUT /notifications/seen/all may not be implemented:",t),t}}},Qf=Object.freeze(Object.defineProperty({__proto__:null,notificationService:ir},Symbol.toStringTag,{value:"Module"})),g4={sm:8,md:10,lg:12},pb={scale:[1,1.2,1],opacity:[1,.8,1]},y4={boxShadow:["0 0 0 0 rgba(34, 197, 94, 0.4)","0 0 0 4px rgba(34, 197, 94, 0.2)","0 0 0 0 rgba(34, 197, 94, 0)"]},fb=({isOnline:t,size:n="sm",showLabel:s=!1,lastSeen:o,position:c="standalone",className:d=""})=>{const p=g4[n],g={width:p,height:p,backgroundColor:t?"var(--online-color, #22c55e)":"var(--offline-color, #94a3b8)",borderRadius:"50%"};return c==="avatar-overlay"?r.jsx(se.div,{className:d,style:{...g,position:"absolute",bottom:0,right:0,border:"2px solid var(--surface)",boxShadow:t?"0 0 8px rgba(34, 197, 94, 0.5)":"none"},animate:t?{...pb,...y4}:{},transition:{duration:2,repeat:1/0,ease:"easeInOut"},title:t?"Online":o?`Last seen ${Hd(o)}`:"Offline"}):r.jsxs("div",{className:d,style:{display:"flex",alignItems:"center",gap:s?"6px":"0"},children:[r.jsx(se.div,{style:{...g,flexShrink:0,boxShadow:t?"0 0 8px rgba(34, 197, 94, 0.5)":"none"},animate:t?pb:{},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),s&&r.jsx(se.span,{initial:{opacity:0,x:-5},animate:{opacity:1,x:0},transition:{duration:.2},style:{fontSize:"13px",color:t?"var(--online-color, #22c55e)":"var(--text-muted)",whiteSpace:"nowrap",fontWeight:t?500:400},children:t?"Online":o?`Last seen ${Hd(o)}`:"Offline"})]})},x4="_container_yar5o_1",v4="_header_yar5o_8",b4="_headerLeft_yar5o_24",S4="_pinIcon_yar5o_30",w4="_title_yar5o_34",_4="_count_yar5o_40",C4="_headerRight_yar5o_51",j4="_content_yar5o_57",T4="_loading_yar5o_63",k4="_spinner_yar5o_73",M4="_messagesList_yar5o_82",E4="_pinnedMessage_yar5o_87",A4="_messageAvatar_yar5o_105",R4="_avatarFallback_yar5o_119",D4="_messageContent_yar5o_131",N4="_messageHeader_yar5o_136",z4="_senderName_yar5o_143",B4="_messageTime_yar5o_149",U4="_messageText_yar5o_154",I4="_pinnedBy_yar5o_164",O4="_messageActions_yar5o_173",L4="_jumpButton_yar5o_180",P4="_unpinButton_yar5o_181",qt={container:x4,header:v4,headerLeft:b4,pinIcon:S4,title:w4,count:_4,headerRight:C4,content:j4,loading:T4,spinner:k4,messagesList:M4,pinnedMessage:E4,messageAvatar:A4,avatarFallback:R4,messageContent:D4,messageHeader:N4,senderName:z4,messageTime:B4,messageText:U4,pinnedBy:I4,messageActions:O4,jumpButton:L4,unpinButton:P4},H4=({chatId:t,onJumpToMessage:n,canUnpin:s})=>{const[o,c]=b.useState(!1),[d,p]=b.useState(null),{loadPinnedMessages:h,getPinnedMessages:m,unpinMessage:g,isLoadingPinned:y}=Pe(),v=m(t);b.useEffect(()=>{t&&h(t)},[t,h]);const S=async j=>{p(j);try{await g(j)}catch(C){console.error("Failed to unpin message:",C)}finally{p(null)}};return v.length===0?null:r.jsxs("div",{className:qt.container,children:[r.jsxs("button",{className:qt.header,onClick:()=>c(!o),children:[r.jsxs("div",{className:qt.headerLeft,children:[r.jsx(Dl,{size:16,className:qt.pinIcon}),r.jsx("span",{className:qt.title,children:"Pinned Messages"}),r.jsx("span",{className:qt.count,children:v.length})]}),r.jsx("div",{className:qt.headerRight,children:o?r.jsx(L_,{size:18}):r.jsx(nh,{size:18})})]}),o&&r.jsx("div",{className:qt.content,children:y?r.jsxs("div",{className:qt.loading,children:[r.jsx(ln,{size:20,className:qt.spinner}),r.jsx("span",{children:"Loading pinned messages..."})]}):r.jsx("div",{className:qt.messagesList,children:v.map(j=>r.jsxs("div",{className:qt.pinnedMessage,children:[r.jsx("div",{className:qt.messageAvatar,children:j.senderAvatarUrl?r.jsx("img",{src:mt(j.senderAvatarUrl)||j.senderAvatarUrl,alt:j.senderUsername}):r.jsx("div",{className:qt.avatarFallback,children:An(j.senderUsername)})}),r.jsxs("div",{className:qt.messageContent,children:[r.jsxs("div",{className:qt.messageHeader,children:[r.jsx("span",{className:qt.senderName,children:j.senderUsername}),r.jsx("span",{className:qt.messageTime,children:Mm(j.sentAt)})]}),r.jsx("div",{className:qt.messageText,children:j.content||(j.fileUrl?"[File attachment]":"[Empty message]")}),j.pinnedByUsername&&r.jsxs("div",{className:qt.pinnedBy,children:[r.jsx(Dl,{size:12}),r.jsxs("span",{children:["Pinned by ",j.pinnedByUsername]})]})]}),r.jsxs("div",{className:qt.messageActions,children:[r.jsx("button",{className:qt.jumpButton,onClick:()=>n(j.messageId),title:"Jump to message",children:r.jsx(yi,{size:16})}),s&&r.jsx("button",{className:qt.unpinButton,onClick:()=>S(j.messageId),disabled:d===j.messageId,title:"Unpin message",children:d===j.messageId?r.jsx(ln,{size:16,className:qt.spinner}):r.jsx("span",{style:{fontSize:"18px",fontWeight:300,lineHeight:1},children:""})})]})]},j.messageId))})})]})},$4=({isOpen:t,onClose:n,chatId:s,chatType:o,onMemberAdded:c})=>{const[d,p]=b.useState(""),[h,m]=b.useState([]),[g,y]=b.useState(!1),[v,S]=b.useState(!1),j=b.useRef(null),C=async E=>{if(p(E),!E.trim()){m([]);return}j.current&&clearTimeout(j.current),y(!0),j.current=setTimeout(async()=>{try{const L=await(await Ut(()=>Promise.resolve().then(()=>fa),void 0).then(R=>R.userService)).searchUsers(E);m(L)}catch(z){console.error("Search failed:",z),m([])}finally{y(!1)}},300)},T=async(E,z)=>{S(!0);try{o==="group"?await Ee.addMemberToGroup(s,E):o==="channel"&&await Ee.addMemberToChannel(s,E),await c(),n()}catch(L){console.error("Failed to add member:",L)}finally{S(!1)}};return t?r.jsx("div",{className:D.modalOverlay,onClick:n,children:r.jsxs("div",{className:D.modal,onClick:E=>E.stopPropagation(),style:{maxWidth:"500px"},children:[r.jsxs("div",{className:D.modalHeader,children:[r.jsx("h2",{children:"Add Member"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsxs("div",{className:D.modalBody,children:[r.jsxs("div",{className:D.formGroup,children:[r.jsx("label",{children:"Search Users"}),r.jsx("input",{type:"text",placeholder:"Type username to search...",value:d,onChange:E=>C(E.target.value),className:D.formInput})]}),g&&r.jsx("div",{className:D.loadingState,children:"Searching..."}),h.length>0&&r.jsx("div",{style:{marginTop:"16px",maxHeight:"300px",overflowY:"auto"},children:h.map(E=>r.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px",borderRadius:"8px",backgroundColor:"var(--background)",marginBottom:"8px"},children:[r.jsx("div",{style:{marginRight:"10px"},children:E.avatar?r.jsx("img",{src:E.avatar,alt:E.username,style:{width:"32px",height:"32px",borderRadius:"50%"}}):r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"var(--accent)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"13px"},children:An(E.username)})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:E.username}),r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:E.email})]}),r.jsx("button",{onClick:()=>T(E.id,E.username),disabled:v,style:{padding:"6px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600},children:"Add"})]},E.id))}),d&&!g&&h.length===0&&r.jsx("div",{className:D.emptyState,children:"No users found"})]}),r.jsx("div",{className:D.modalFooter,children:r.jsx("button",{onClick:n,className:D.primaryButton,children:"Close"})})]})}):null},F4=({currentChat:t,messages:n,isLoadingMessages:s,onSendMessage:o,onOpenGroupCreate:c,onOpenChannelCreate:d,onOpenUserProfile:p,onOpenMobileSidebar:h,onOpenChatProfile:m})=>{const[g,y]=b.useState(""),[v,S]=b.useState(!1),[j,C]=b.useState(null),[T,E]=b.useState(""),[z,L]=b.useState(null),[R,Y]=b.useState(!1),[P,te]=b.useState(null),[re,K]=b.useState(!1),[ge,me]=b.useState(!1),[He,qe]=b.useState(!1),Ke=b.useRef(null),Re=b.useRef(null),Te=b.useRef(null),[B,ne]=b.useState(null),le=b.useRef(null),{isUserOnline:we,getUserLastSeen:$e,getOnlineMembersCount:_e,loadPermissions:Ae}=Pe(),{user:je}=jt(),ie=b.useRef(new Set),Ce=b.useRef(null),he=b.useRef(0),Tt=b.useRef(n),kt=b.useRef(new Set),Mt=b.useRef(null),Et=b.useRef(null);b.useEffect(()=>{Tt.current=n},[n]),b.useEffect(()=>{if(!t||!je)return;const $=Te.current;if(!$)return;ie.current=new Set,kt.current=new Set;const W=async()=>{const ve=Array.from(kt.current);if(ve.length!==0){kt.current=new Set;try{await ir.markMultipleAsSeen(ve)}catch(Le){console.error("[ChatView] Failed to mark notifications as seen:",Le)}}},I=new IntersectionObserver(ve=>{ve.forEach(Le=>{if(Le.isIntersecting){const pt=Le.target.dataset.messageId;if(!pt||ie.current.has(pt))return;const Ln=Tt.current.find(ma=>ma.messageId===pt);if(!Ln)return;!Ln.isCurrentUser&&Ln.isNotificated&&Ln.notificationId&&(ie.current.add(pt),kt.current.add(Ln.notificationId),Mt.current&&clearTimeout(Mt.current),Mt.current=setTimeout(W,500))}})},{root:$,rootMargin:"0px",threshold:.5});return Et.current=I,$.querySelectorAll("[data-message-id]").forEach(ve=>I.observe(ve)),()=>{I.disconnect(),Et.current=null,Mt.current&&clearTimeout(Mt.current)}},[t?.id,je]),b.useEffect(()=>{const $=Te.current;if(!$||!Et.current)return;$.querySelectorAll("[data-message-id]").forEach(I=>{const pe=I.dataset.messageId;pe&&!ie.current.has(pe)&&Et.current?.observe(I)})},[n.length]);const{canSendMessage:un,canPinMessages:At,canManageMessages:pn,isLoading:xt}=su(t?.id);b.useEffect(()=>{console.log("[ChatView] Permission useEffect triggered:",{hasChatId:!!t?.id,chatType:t?.type,hasLoadPermissions:typeof Ae=="function"}),t&&(t.type==="group"||t.type==="channel")&&(console.log("[ChatView] Calling loadPermissions for chat:",t.id),Ae(t.id))},[t?.id,Ae]),b.useEffect(()=>{(async()=>{if(console.log("[ChatView] checkBlockStatus called:",{hasCurrent:!!t,type:t?.type,hasUser:!!je,members:t?.members?.map(I=>({id:I.id,odUserId:I.userId}))}),!t||t.type!=="dm"||!je){K(!1),me(!1);return}const W=t.members?.find(I=>(I.userId||I.id)!==je.id);if(console.log("[ChatView] otherMember found:",W,"using userId:",W?.userId,"or id:",W?.id),!W){K(!1),me(!1);return}qe(!0);try{const{userService:I}=await Ut(async()=>{const{userService:pt}=await Promise.resolve().then(()=>fa);return{userService:pt}},void 0),pe=W.userId||W.id;console.log("[ChatView] Checking mutual block status for user:",pe);const{iBlockedThem:ve,theyBlockedMe:Le}=await I.getMutualBlockStatus(pe);console.log("[ChatView] Block status result:",{iBlockedThem:ve,theyBlockedMe:Le}),me(ve),K(Le)}catch(I){console.error("Failed to check block status:",I)}finally{qe(!1)}})()},[t?.id,t?.type,t?.members,je?.id]);const{usersYouBlocked:On,blockedByUsers:dt}=Pe();b.useEffect(()=>{if(!t||t.type!=="dm"||!je)return;const $=t.members?.find(ve=>(ve.userId||ve.id)!==je.id);if(!$)return;const W=$.userId||$.id;if(!W)return;const I=On.has(W),pe=dt.has(W);console.log("[ChatView] Store block status changed:",{otherUserId:W,iBlockedInStore:I,blockedByInStore:pe,currentDidIBlock:ge,currentIsBlocked:re}),I!==ge&&me(I),pe!==re&&K(pe)},[t?.id,t?.type,t?.members,je?.id,On,dt]);const bt=$=>$.type!=="dm"||!$.members||!je?null:$.members.find(I=>I.userId!==je.id)?.userId||null,Ht=()=>{Ke.current?.scrollIntoView({behavior:"smooth"})},bn=()=>{const $=Te.current;if(!$)return;const W=$.scrollHeight,I=$.scrollTop,pe=$.clientHeight,ve=W-I-pe<100;Y(!ve)};b.useEffect(()=>{const $=t?.id!==Ce.current,W=n.length>he.current;Ce.current=t?.id||null,he.current=n.length,($||W)&&(Ht(),Y(!1))},[n,t?.id]);const st=async()=>{if(console.log("[ChatView] handleSendMessage called",{messageText:g,selectedFile:B?{name:B.name,size:B.size,type:B.type}:null,currentChat:t?.id}),!g.trim()&&!B||!t){console.log("[ChatView] Early return - no content or no chat");return}S(!0);try{console.log("[ChatView] Calling onSendMessage with file:",B?B.name:"none","replyId:",P?.messageId),await o(g,B||void 0,P?.messageId),console.log("[ChatView] onSendMessage completed"),y(""),ne(null),te(null),le.current&&(le.current.value="")}catch($){console.error("[ChatView] Failed to send message:",$),Uj($)&&(Ij($)?K(!0):me(!0))}finally{S(!1)}},en=async($,W)=>{try{const{messageService:I}=await Ut(async()=>{const{messageService:ve}=await Promise.resolve().then(()=>Ah);return{messageService:ve}},void 0);await I.toggleReactionByEmoji($,W);const pe=Pe.getState();t&&await pe.loadMessages(t.id)}catch(I){console.error("Failed to toggle reaction:",I)}},tn=($,W,I)=>{$.preventDefault(),$.stopPropagation(),L({messageId:W,x:$.clientX,y:$.clientY})},Wn=async $=>{try{await Pe.getState().pinMessage($),L(null)}catch(W){console.error("Failed to pin message:",W)}},oe=async $=>{try{await Pe.getState().unpinMessage($),L(null)}catch(W){console.error("Failed to unpin message:",W)}},de=$=>{const W=document.querySelector(`[data-message-id="${$}"]`);W&&(W.scrollIntoView({behavior:"smooth",block:"center"}),W.classList.add("message-highlight"),setTimeout(()=>W.classList.remove("message-highlight"),2e3))},ht=$=>{const W=n.find(I=>I.messageId===$);W&&(C($),E(W.content),L(null))},ut=async $=>{if(T.trim())try{await Pe.getState().editMessage($,T),C(null),E("")}catch(W){console.error("Failed to edit message:",W)}},It=()=>{C(null),E("")},Sn=async $=>{if(await kn({title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))try{await(await Ut(()=>Promise.resolve().then(()=>Ah),void 0).then(ve=>ve.messageService)).deleteMessage($),L(null);const pe=Pe.getState();t&&await pe.loadMessages(t.id)}catch(I){console.error("Failed to delete message:",I)}};return b.useEffect(()=>{const $=W=>{Re.current&&!Re.current.contains(W.target)&&L(null)};return z&&document.addEventListener("click",$),()=>{document.removeEventListener("click",$)}},[z]),t?r.jsxs("div",{className:D.mainContent,style:{position:"relative"},children:[r.jsxs("div",{className:D.chatHeaderBar,children:[r.jsxs("div",{className:D.headerLeft,children:[h&&r.jsx("button",{onClick:h,className:D.mobileMenuButton,style:{display:"none",padding:"8px",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"var(--text)",marginRight:"8px"},"aria-label":"Open menu",children:""}),r.jsx("div",{className:D.headerAvatar,children:r.jsx(Dd,{src:t.avatar,name:t.name,fallbackClass:D.avatarFallback})}),r.jsxs("div",{className:D.headerInfo,children:[r.jsxs("h2",{className:D.headerTitle,children:[t.name,r.jsx("span",{className:D.headerChatType,title:t.type,children:t.type==="dm"?" ":t.type==="group"?" ":t.type==="channel"?" ":" "})]}),r.jsx("div",{className:D.headerStatus,children:t.type==="dm"?(()=>{const $=bt(t);if($){const W=we($),I=$e($);return r.jsx(fb,{isOnline:W,lastSeen:I,size:"sm",showLabel:!0,position:"standalone"})}return r.jsx(fb,{isOnline:t.isOnline||!1,size:"sm",showLabel:!0,position:"standalone"})})():(()=>{const $=_e(t.id),W=t.members?.length||t.participantsCount||0;return console.log("[ChatView] Member count debug:",{chatId:t.id,chatName:t.name,membersLength:t.members?.length,participantsCount:t.participantsCount,totalMembers:W,fullChat:t}),r.jsx("span",{children:W>0?r.jsxs(r.Fragment,{children:[W," member",W!==1?"s":"",$>0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{style:{margin:"0 4px",color:"var(--text-muted)"},children:""}),r.jsxs("span",{style:{color:"#51cf66",fontWeight:600},children:[$," online"]})]})]}):r.jsx("span",{style:{color:"var(--text-muted)"},children:"Members"})})})()})]})]}),r.jsx("div",{className:D.headerActions,children:t.type!=="dm"&&r.jsxs("button",{onClick:()=>{m&&m()},style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1))",border:"1px solid rgba(99, 102, 241, 0.3)",cursor:"pointer",padding:"8px 14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",borderRadius:"12px",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(99, 102, 241, 0.2)"},onMouseEnter:$=>{$.currentTarget.style.background="linear-gradient(135deg, rgba(99, 102, 241, 0.25), rgba(139, 92, 246, 0.2))",$.currentTarget.style.boxShadow="0 4px 16px rgba(99, 102, 241, 0.35)",$.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:$=>{$.currentTarget.style.background="linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1))",$.currentTarget.style.boxShadow="0 2px 8px rgba(99, 102, 241, 0.2)",$.currentTarget.style.transform="translateY(0)"},title:`View ${t.type==="channel"?"Channel":"Group"} Profile`,children:[t.type==="channel"?r.jsx(P_,{size:16,color:"#818cf8"}):r.jsx(jn,{size:16,color:"#818cf8"}),r.jsxs("span",{style:{fontSize:"13px",fontWeight:600,color:"#818cf8",letterSpacing:"0.3px"},children:[t.type==="channel"?"Channel":"Group"," Profile"]})]})})]}),r.jsx(H4,{chatId:t.id,onJumpToMessage:de,canUnpin:At}),r.jsxs("div",{className:D.messagesContainer,ref:Te,onScroll:bn,children:[s&&r.jsx("div",{className:D.loading,children:"Loading messages..."}),!s&&(!n||n.length===0)&&r.jsx("div",{className:D.noMessages,children:"No messages yet. Start the conversation!"}),Array.isArray(n)&&n.map($=>r.jsxs("div",{"data-message-id":$.messageId,className:`${D.messageGroup} ${$.isCurrentUser?D.ownMessage:D.otherMessage} ${$.isCurrentUser?"message-self-enter":"message-other-enter"} ${$.isPinned?"message-pinned":""}`,style:{position:"relative"},children:[!$.isCurrentUser&&r.jsx("div",{className:D.senderAvatar,onClick:()=>p($.senderId),style:{cursor:"pointer"},children:$.senderAvatarUrl?r.jsx("img",{src:$.senderAvatarUrl,alt:$.senderUsername}):r.jsx("div",{className:D.avatarFallback,children:An($.senderUsername)})}),j===$.messageId?r.jsxs("div",{className:D.messageBubble,style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("textarea",{value:T,onChange:W=>E(W.target.value),style:{padding:"12px 14px",borderRadius:"10px",border:"2px solid var(--accent)",backgroundColor:"var(--background)",color:"var(--text)",fontSize:"15px",fontFamily:"inherit",minHeight:"60px",resize:"vertical"}}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>ut($.messageId),style:{padding:"6px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Save"}),r.jsx("button",{onClick:It,style:{padding:"6px 12px",backgroundColor:"var(--border)",color:"var(--text)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Cancel"})]})]}):r.jsxs("div",{className:D.messageBubble,onContextMenu:W=>tn(W,$.messageId,$.isCurrentUser),style:{position:"relative"},children:[!$.isCurrentUser&&r.jsx("div",{className:D.senderName,children:$.senderUsername}),$.replyId&&(()=>{const W=n.find(pe=>pe.messageId===$.replyId),I=W?W.content?.substring(0,40)||(W.fileUrl?" File":"..."):"Message deleted";return r.jsxs("div",{onClick:()=>W&&de($.replyId),style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 8px",marginBottom:"4px",fontSize:"11px",color:"var(--text-secondary)",backgroundColor:$.isCurrentUser?"rgba(0,0,0,0.15)":"rgba(255,255,255,0.08)",borderRadius:"4px",cursor:W?"pointer":"default",borderLeft:"2px solid var(--accent)"},children:[r.jsx("span",{style:{opacity:.7},children:""}),r.jsxs("span",{style:{fontWeight:600,color:"var(--accent)",fontSize:"10px"},children:[W?.senderUsername||"Unknown",":"]}),r.jsxs("span",{style:{opacity:.8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[I,W?.content&&W.content.length>40?"...":""]})]})})(),r.jsx("div",{className:D.messageContent,children:$.content}),$.fileUrl&&(()=>{const W=mt($.fileUrl)||$.fileUrl;return r.jsx("div",{style:{marginTop:"8px"},children:/\.(jpg|jpeg|png|gif|webp|bmp|svg)$/i.test(W)?r.jsxs("a",{href:W,target:"_blank",rel:"noopener noreferrer",children:[r.jsx("img",{src:W,alt:"Attachment",style:{maxWidth:"300px",maxHeight:"200px",borderRadius:"8px",objectFit:"cover",cursor:"pointer"},onError:I=>{I.currentTarget.style.display="none";const pe=I.currentTarget.nextElementSibling;pe&&(pe.style.display="flex")}}),r.jsx("div",{style:{display:"none",alignItems:"center",gap:"6px",padding:"8px 12px",background:"var(--background)",borderRadius:"8px",color:"var(--text-secondary)",fontSize:"13px"},children:" Image (click to view)"})]}):/\.(mp4|webm|ogg|mov)$/i.test(W)?r.jsx("video",{src:W,controls:!0,style:{maxWidth:"300px",maxHeight:"200px",borderRadius:"8px"}}):/\.(mp3|wav|ogg|m4a)$/i.test(W)?r.jsx("audio",{src:W,controls:!0,style:{maxWidth:"300px"}}):r.jsxs("a",{href:W,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 14px",background:"var(--background)",borderRadius:"8px",color:"var(--text)",textDecoration:"none",fontSize:"13px",transition:"background 0.15s ease"},onMouseEnter:I=>I.currentTarget.style.background="var(--border)",onMouseLeave:I=>I.currentTarget.style.background="var(--background)",children:[r.jsx("span",{style:{fontSize:"18px"},children:/\.pdf$/i.test(W)?"":/\.(doc|docx)$/i.test(W)?"":/\.(xls|xlsx)$/i.test(W)?"":/\.(zip|rar|7z)$/i.test(W)?"":""}),r.jsx("span",{children:W.split("/").pop()?.substring(37)||"Download file"})]})})})(),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",flexWrap:"wrap"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[r.jsx("span",{className:D.messageTime,children:Mm($.sentAt)}),r.jsx("span",{style:{fontSize:"11px",color:$.isSeen?"#51cf66":"rgba(255,255,255,0.5)",fontWeight:500},title:$.isSeen?"Seen":"Sent",children:$.isSeen?"":""})]}),$.messageReactions&&$.messageReactions.length>0&&(()=>{const W=$.messageReactions.reduce((pe,ve)=>{const Le=ve.reactionType||ve.type||"Like";return pe[Le]||(pe[Le]={count:0,users:[]}),pe[Le].count++,pe[Le].users.push(ve.userName||ve.userId),pe},{}),I={Like:"",Love:"",Laugh:"",Sad:"",Angry:""};return r.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"2px",padding:"2px 6px",backgroundColor:"rgba(0,0,0,0.15)",borderRadius:"12px",fontSize:"12px"},children:Object.entries(W).map(([pe,ve])=>r.jsxs("span",{onClick:()=>en($.messageId,I[pe]||""),title:ve.users.join(", "),style:{cursor:"pointer"},children:[I[pe],ve.count>1&&r.jsx("span",{style:{fontSize:"10px",marginLeft:"1px"},children:ve.count})]},pe))})})(),r.jsx("button",{onClick:W=>{W.stopPropagation(),L({messageId:$.messageId,x:W.clientX,y:W.clientY})},title:"Actions",style:{padding:"2px 6px",backgroundColor:"transparent",border:"1px solid var(--border)",borderRadius:"10px",cursor:"pointer",fontSize:"12px",opacity:.6,transition:"opacity 0.2s"},onMouseEnter:W=>W.currentTarget.style.opacity="1",onMouseLeave:W=>W.currentTarget.style.opacity="0.6",children:""})]})]}),z?.messageId===$.messageId&&r.jsxs("div",{ref:Re,style:{position:"fixed",top:Math.min(Math.max(z.y-20,10),window.innerHeight-180),left:Math.min(Math.max(z.x-70,10),window.innerWidth-150),backgroundColor:"var(--surface)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.15)",zIndex:1e3,width:"140px",padding:"4px"},children:[r.jsx("div",{style:{display:"flex",justifyContent:"space-around",padding:"4px 2px",borderBottom:"1px solid var(--border)",marginBottom:"2px"},children:["","","","",""].map(W=>r.jsx("button",{onClick:()=>{en($.messageId,W),L(null)},style:{padding:"2px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",lineHeight:1},onMouseEnter:I=>{I.currentTarget.style.backgroundColor="rgba(99, 102, 241, 0.2)"},onMouseLeave:I=>{I.currentTarget.style.backgroundColor="transparent"},children:W},W))}),r.jsxs("button",{onClick:()=>{te($),L(null)},style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:W=>W.currentTarget.style.background="var(--background)",onMouseLeave:W=>W.currentTarget.style.background="transparent",children:[r.jsx("span",{style:{fontSize:"14px"},children:""}),"Reply"]}),At&&r.jsxs("button",{onClick:()=>$.isPinned?oe($.messageId):Wn($.messageId),style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:W=>W.currentTarget.style.background="var(--background)",onMouseLeave:W=>W.currentTarget.style.background="transparent",children:[r.jsx("span",{style:{fontSize:"14px"},children:""}),$.isPinned?"Unpin":"Pin"]}),($.isCurrentUser||pn)&&r.jsxs("button",{onClick:()=>ht($.messageId),style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:W=>W.currentTarget.style.background="var(--background)",onMouseLeave:W=>W.currentTarget.style.background="transparent",children:[r.jsx("span",{style:{fontSize:"14px"},children:""}),"Edit"]}),($.isCurrentUser||pn)&&r.jsxs("button",{onClick:()=>Sn($.messageId),style:{width:"100%",padding:"6px 10px",border:"none",background:"transparent",color:"#ef4444",textAlign:"left",cursor:"pointer",fontSize:"12px",fontWeight:500,borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px",transition:"background 0.1s"},onMouseEnter:W=>W.currentTarget.style.background="rgba(239, 68, 68, 0.1)",onMouseLeave:W=>W.currentTarget.style.background="transparent",children:[r.jsx("span",{style:{fontSize:"14px"},children:""}),"Delete"]})]})]},$.messageId)),r.jsx("div",{ref:Ke})]}),R&&r.jsx("button",{onClick:Ht,title:"Scroll to bottom",style:{position:"absolute",bottom:"90px",right:"24px",width:"44px",height:"44px",borderRadius:"50%",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",color:"#fff",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(99, 102, 241, 0.4)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:10},onMouseEnter:$=>{$.currentTarget.style.transform="translateY(-3px) scale(1.05)",$.currentTarget.style.boxShadow="0 8px 25px rgba(99, 102, 241, 0.5)"},onMouseLeave:$=>{$.currentTarget.style.transform="translateY(0) scale(1)",$.currentTarget.style.boxShadow="0 4px 15px rgba(99, 102, 241, 0.4)"},children:r.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"6 9 12 15 18 9"})})}),t.type==="dm"&&He?r.jsx("div",{style:{padding:"16px 20px",textAlign:"center",color:"#94a3b8",backgroundColor:"rgba(30, 41, 59, 0.5)",borderTop:"1px solid rgba(99, 102, 241, 0.2)",fontSize:"14px"},children:"Loading..."}):t.type==="dm"&&re?r.jsxs("div",{style:{padding:"16px 20px",textAlign:"center",color:"#f87171",backgroundColor:"rgba(239, 68, 68, 0.1)",borderTop:"1px solid rgba(239, 68, 68, 0.3)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[r.jsx("span",{style:{fontSize:"18px"},children:""}),"This user has blocked you. You cannot send them messages."]}):t.type==="dm"&&ge?r.jsxs("div",{style:{padding:"16px 20px",textAlign:"center",color:"#f87171",backgroundColor:"rgba(239, 68, 68, 0.1)",borderTop:"1px solid rgba(239, 68, 68, 0.3)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[r.jsx("span",{style:{fontSize:"18px"},children:""}),"You have blocked this user. Unblock them to send messages."]}):t.type!=="dm"&&xt?r.jsx("div",{style:{padding:"16px 20px",textAlign:"center",color:"#94a3b8",backgroundColor:"rgba(30, 41, 59, 0.5)",borderTop:"1px solid rgba(99, 102, 241, 0.2)",fontSize:"14px"},children:"Loading..."}):!un&&t.type!=="dm"?r.jsxs("div",{style:{padding:"16px 20px",textAlign:"center",color:"#94a3b8",backgroundColor:"rgba(30, 41, 59, 0.8)",borderTop:"1px solid rgba(99, 102, 241, 0.2)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[r.jsx("span",{style:{fontSize:"18px"},children:""}),"You don't have permission to send messages in this chat"]}):r.jsxs("div",{className:D.messageInput,children:[P&&r.jsx("div",{style:{position:"absolute",bottom:"100%",left:0,right:0,padding:"10px 14px",backgroundColor:"var(--surface)",borderTop:"3px solid var(--accent)",borderRadius:"8px 8px 0 0",boxShadow:"0 -2px 10px rgba(0,0,0,0.1)"},children:r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"12px"},children:[r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[r.jsx("span",{style:{fontSize:"14px"},children:""}),r.jsxs("span",{style:{color:"var(--accent)",fontWeight:600,fontSize:"13px"},children:["Replying to ",P.senderUsername]})]}),r.jsxs("div",{style:{padding:"8px 10px",backgroundColor:"var(--background)",borderRadius:"6px",borderLeft:"3px solid var(--accent)"},children:[P.fileUrl&&r.jsx("div",{style:{marginBottom:"4px",fontSize:"12px",color:"var(--text-secondary)"},children:" Attachment"}),r.jsx("div",{style:{color:"var(--text)",fontSize:"13px",wordBreak:"break-word"},children:P.content?r.jsxs(r.Fragment,{children:[P.content.substring(0,100),P.content.length>100?"...":""]}):r.jsx("span",{style:{color:"var(--text-secondary)",fontStyle:"italic"},children:P.fileUrl?"File attachment":"No content"})})]})]}),r.jsx("button",{onClick:()=>te(null),style:{padding:"6px",backgroundColor:"var(--background)",border:"none",borderRadius:"50%",cursor:"pointer",color:"var(--text-secondary)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s"},onMouseEnter:$=>$.currentTarget.style.backgroundColor="var(--border)",onMouseLeave:$=>$.currentTarget.style.backgroundColor="var(--background)",title:"Cancel reply",children:""})]})}),r.jsx("input",{type:"text",placeholder:P?"Type your reply...":"Type a message...",value:g,onChange:$=>y($.target.value),onKeyPress:$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),st())},className:D.inputField,disabled:v}),r.jsx("input",{ref:le,type:"file",accept:"image/*,video/*,audio/*,application/pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar",style:{display:"none"},onChange:$=>{const W=$.target.files?.[0];console.log("[ChatView] File selected:",W?{name:W.name,size:W.size,type:W.type}:null),W&&ne(W)}}),r.jsx("button",{type:"button",className:D.attachButton,title:"Attach file",onClick:()=>{console.log("[ChatView] Attach button clicked, fileInputRef:",le.current),le.current?.click()},children:""}),B&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 12px",background:"var(--background)",borderRadius:"8px",border:"1px solid var(--border)",maxWidth:"200px"},children:[B.type.startsWith("image/")?r.jsx("img",{src:URL.createObjectURL(B),alt:"Preview",style:{width:"36px",height:"36px",borderRadius:"4px",objectFit:"cover"}}):r.jsx("span",{style:{fontSize:"24px"},children:B.type.includes("pdf")?"":B.type.includes("video")?"":""}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontSize:"12px",fontWeight:500,color:"var(--text)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:B.name}),r.jsxs("div",{style:{fontSize:"11px",color:"var(--text-secondary)"},children:[(B.size/1024).toFixed(1)," KB"]})]}),r.jsx("button",{onClick:()=>{ne(null),le.current&&(le.current.value="")},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"var(--text-secondary)",padding:"2px",lineHeight:1},children:""})]}),r.jsx("button",{type:"button",onClick:st,disabled:!g.trim()&&!B||v,className:D.sendButton,children:v?"...":""})]})]}):r.jsx("div",{className:D.mainContent,children:r.jsxs("div",{className:D.emptyScreen,children:[r.jsx("div",{className:D.emptyIcon,children:""}),r.jsx("h2",{children:"Select a chat to start messaging"}),r.jsx("p",{children:"Choose a conversation from the list or start a new one"}),r.jsxs("div",{className:D.emptyActions,children:[r.jsx("button",{className:D.actionButton,onClick:c,children:"Create Group"}),r.jsx("button",{className:D.actionButton,onClick:d,children:"Create Channel"})]})]})})},be={abyss:"#050505",obsidian:"#0a0a0a",charcoal:"#0f0f0f",slate:"#151515",border:"#1a1a1a",borderLight:"#252525",surfaceHover:"#1c1c1c",emerald:"#10b981",emeraldBright:"#34d399",emeraldDark:"#059669",emeraldGlow:"rgba(16, 185, 129, 0.4)",sapphire:"#3b82f6",amethyst:"#8b5cf6",amber:"#f59e0b",ruby:"#ef4444",rubyDark:"#dc2626",indigo:"#6366f1",text:"#ffffff",textSecondary:"#a1a1aa",textMuted:"#71717a",textDim:"#52525b"},V4=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M5.5 3.21V20.8l4.75-4.73 2.99 6.73L15.5 21.6l-3-6.7h6z'/%3E%3Cpath fill='%23064e3b' d='M6.5 5.61v11.68l3.38-3.37.37-.37.48 1.07 1.93 4.35 1.07-.47L11.8 14.1l-.48-1.07H16z'/%3E%3C/svg%3E") 5 3, default`,q4=`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M9 2.5a2.5 2.5 0 0 1 5 0v7.996l3.904-.74a2.095 2.095 0 0 1 2.537 2.466L19.5 17.5a6 6 0 0 1-6 6H11a7 7 0 0 1-7-7V9a2 2 0 1 1 4 0v3.5h1z'/%3E%3Cpath fill='%23064e3b' d='M10 2.5V14h-.5a1.5 1.5 0 0 1-1.5-1.5V9a1 1 0 1 0-2 0v7.5a6 6 0 0 0 6 6h2.5a5 5 0 0 0 5-5l.941-5.278a1.095 1.095 0 0 0-1.324-1.288l-4.117.78V2.5a1.5 1.5 0 0 0-3 0z'/%3E%3C/svg%3E") 9 4, pointer`,G4=`
  @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

  .settings-panel-overlay {
    cursor: ${V4};
  }
  .settings-panel-overlay * {
    cursor: inherit;
  }
  .settings-panel-overlay button,
  .settings-panel-overlay [role="button"],
  .settings-panel-overlay .clickable {
    cursor: ${q4};
  }

  .settings-panel-content::-webkit-scrollbar {
    width: 6px;
  }
  .settings-panel-content::-webkit-scrollbar-track {
    background: ${be.obsidian};
  }
  .settings-panel-content::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, ${be.emerald}, ${be.emeraldDark});
    border-radius: 3px;
  }
  .settings-panel-content::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, ${be.emeraldBright}, ${be.emerald});
  }

  @keyframes settings-matrix-pulse {
    0%, 100% { opacity: 0.08; transform: scale(1); }
    50% { opacity: 0.25; transform: scale(1.05); }
  }

  @keyframes settings-glow-breathe {
    0%, 100% { filter: drop-shadow(0 0 2px ${be.emeraldGlow}); }
    50% { filter: drop-shadow(0 0 8px ${be.emeraldGlow}); }
  }

  @keyframes settings-shimmer {
    0% { background-position: -200% center; }
    100% { background-position: 200% center; }
  }

  @keyframes emerald-pulse {
    0%, 100% { box-shadow: 0 0 0 0 ${be.emeraldGlow}; }
    50% { box-shadow: 0 0 20px 5px ${be.emeraldGlow}; }
  }
`;if(typeof document<"u"&&!document.getElementById("settings-panel-styles")){const t=document.createElement("style");t.id="settings-panel-styles",t.textContent=G4,document.head.appendChild(t)}const W4={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3,ease:[.22,1,.36,1]}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}}},Y4={hidden:{x:"-100%",opacity:.8},visible:{x:0,opacity:1,transition:{type:"spring",damping:30,stiffness:300,mass:.8}},exit:{x:"-100%",opacity:.5,transition:{duration:.25,ease:[.4,0,1,1]}}},X4={hidden:{opacity:0},visible:t=>({opacity:1,transition:{delay:.1+t*.08,duration:.4,ease:"easeOut"}})},Oh={hidden:{opacity:0,x:-20,scale:.95},visible:t=>({opacity:1,x:0,scale:1,transition:{delay:.15+t*.04,duration:.35,ease:[.22,1,.36,1]}})},K4=({enabled:t})=>{const n=b.useMemo(()=>{const s=[];for(let d=0;d<240;d++)s.push({id:d,delay:Math.random()*3,duration:1.5+Math.random()*2,opacity:.05+Math.random()*.15});return s},[]);return t?r.jsx("div",{style:{position:"absolute",inset:0,overflow:"hidden",pointerEvents:"none",zIndex:0},children:r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gap:"4px",padding:"20px",height:"100%"},children:n.map(s=>r.jsx(se.div,{initial:{opacity:0},animate:{opacity:[s.opacity*.3,s.opacity,s.opacity*.3],scale:[1,1.1,1]},transition:{duration:s.duration,delay:s.delay,repeat:1/0,ease:"easeInOut"},style:{background:be.emerald,borderRadius:"2px",aspectRatio:"1"}},s.id))})}):null},hb=({isOn:t,onToggle:n,label:s,icon:o,iconOff:c})=>r.jsxs(se.button,{onClick:n,whileHover:{scale:1.01},whileTap:{scale:.99},style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"14px 16px",background:be.charcoal,border:`1px solid ${be.border}`,borderRadius:"14px",fontFamily:"'Outfit', sans-serif",transition:"all 0.2s ease"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:t?`linear-gradient(135deg, ${be.emerald}, ${be.emeraldDark})`:be.slate,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:t?`0 0 20px ${be.emeraldGlow}, inset 0 1px 0 rgba(255,255,255,0.1)`:"inset 0 1px 0 rgba(255,255,255,0.05)",transition:"all 0.3s ease"},children:r.jsx(se.div,{animate:{rotate:t?0:180},transition:{duration:.3},children:t?o:c||o})}),r.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:be.text},children:s})]}),r.jsx("div",{style:{width:"52px",height:"28px",borderRadius:"14px",background:t?`linear-gradient(90deg, ${be.emeraldDark}, ${be.emerald})`:be.obsidian,border:`1px solid ${t?be.emerald:be.borderLight}`,padding:"2px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:t?`0 0 12px ${be.emeraldGlow}`:"inset 0 2px 4px rgba(0,0,0,0.3)"},children:r.jsx(se.div,{animate:{x:t?24:0},transition:{type:"spring",stiffness:500,damping:30},style:{width:"22px",height:"22px",borderRadius:"11px",background:t?"#fff":be.textMuted,boxShadow:t?"0 2px 8px rgba(0,0,0,0.3)":"0 1px 3px rgba(0,0,0,0.2)"}})})]}),mb=({icon:t,label:n,color:s,onClick:o,index:c})=>{const[d,p]=La.useState(!1);return r.jsxs(se.button,{custom:c,variants:Oh,initial:"hidden",animate:"visible",onClick:o,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),whileHover:{x:4},whileTap:{scale:.98},style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"12px 14px",background:d?be.surfaceHover:"transparent",border:"none",borderRadius:"12px",fontFamily:"'Outfit', sans-serif",transition:"background 0.15s ease"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px"},children:[r.jsx("div",{style:{width:"38px",height:"38px",borderRadius:"11px",background:`linear-gradient(135deg, ${s}20, ${s}10)`,border:`1px solid ${s}30`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:d?`0 0 16px ${s}40, inset 0 1px 0 rgba(255,255,255,0.1)`:`0 0 0 ${s}00`,transition:"all 0.25s ease"},children:r.jsx("div",{style:{color:s,transition:"transform 0.2s ease",transform:d?"scale(1.1)":"scale(1)"},children:t})}),r.jsx("span",{style:{fontSize:"14px",fontWeight:500,color:be.text,transition:"color 0.15s ease"},children:n})]}),r.jsx(se.div,{animate:{x:d?0:-4,opacity:d?1:0},transition:{duration:.15},children:r.jsx(Vh,{size:16,color:be.textMuted})})]})},Zf=({title:t,index:n})=>r.jsxs(se.div,{custom:n,variants:X4,initial:"hidden",animate:"visible",style:{display:"flex",alignItems:"center",gap:"10px",padding:"0 14px",marginBottom:"8px",marginTop:n>0?"24px":"0"},children:[r.jsx("span",{style:{fontSize:"11px",fontWeight:600,fontFamily:"'JetBrains Mono', monospace",textTransform:"uppercase",letterSpacing:"1.5px",color:be.textDim},children:t}),r.jsx("div",{style:{flex:1,height:"1px",background:`linear-gradient(90deg, ${be.border}, transparent)`}})]}),KS=({isOpen:t,onClose:n,onCreateGroup:s,onCreateChannel:o,onEditProfile:c,onShowNotifications:d,onShowAdminPanel:p,onShowBlockedUsers:h,isDarkMode:m,onToggleDarkMode:g,onLogout:y,fancyAnimations:v,onToggleFancyAnimations:S})=>{b.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]);const j=[{icon:r.jsx(jn,{size:18}),label:"New Group",color:be.sapphire,onClick:s},{icon:r.jsx(ns,{size:18}),label:"New Channel",color:be.amethyst,onClick:o}],C=[{icon:r.jsx(Nd,{size:18}),label:"Edit Profile",color:be.emerald,onClick:c},{icon:r.jsx(Hh,{size:18}),label:"Notifications",color:be.ruby,onClick:d},{icon:r.jsx(Nl,{size:18}),label:"Blocked Users",color:be.rubyDark,onClick:h},{icon:r.jsx(rr,{size:18}),label:"Admin Panel",color:be.indigo,onClick:p}];return r.jsx(Xn,{children:t&&r.jsxs(se.div,{className:"settings-panel-overlay",variants:W4,initial:"hidden",animate:"visible",exit:"exit",style:{position:"fixed",inset:0,zIndex:9999,display:"flex"},children:[r.jsx(se.div,{onClick:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(8px)"}}),r.jsxs(se.div,{variants:Y4,initial:"hidden",animate:"visible",exit:"exit",style:{position:"relative",width:"340px",height:"100vh",background:`linear-gradient(180deg, ${be.obsidian} 0%, ${be.abyss} 100%)`,borderRight:`1px solid ${be.border}`,boxShadow:`
                4px 0 24px rgba(0, 0, 0, 0.5),
                0 0 1px ${be.emeraldGlow}
              `,display:"flex",flexDirection:"column",overflow:"hidden"},children:[r.jsx(K4,{enabled:v}),r.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:`linear-gradient(90deg, transparent, ${be.emerald}, transparent)`,opacity:.6}}),r.jsx(se.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.3},style:{position:"relative",zIndex:1,padding:"20px 20px 16px",borderBottom:`1px solid ${be.border}`,background:`linear-gradient(180deg, ${be.charcoal}80 0%, transparent 100%)`},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:`linear-gradient(135deg, ${be.emerald}, ${be.emeraldDark})`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 0 20px ${be.emeraldGlow}`},children:r.jsx(Jf,{size:18,color:"#fff"})}),r.jsxs("div",{children:[r.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,fontFamily:"'Outfit', sans-serif",color:be.text,letterSpacing:"-0.02em"},children:"Settings"}),r.jsx("p",{style:{margin:0,fontSize:"12px",fontFamily:"'JetBrains Mono', monospace",color:be.textMuted},children:"Customize your experience"})]})]}),r.jsx(se.button,{onClick:n,whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},style:{width:"32px",height:"32px",borderRadius:"8px",border:`1px solid ${be.border}`,background:be.charcoal,display:"flex",alignItems:"center",justifyContent:"center",color:be.textSecondary,transition:"all 0.2s ease"},children:r.jsx(En,{size:16})})]})}),r.jsxs("div",{className:"settings-panel-content",style:{position:"relative",zIndex:1,flex:1,overflowY:"auto",overflowX:"hidden",padding:"20px 16px"},children:[r.jsx(Zf,{title:"Create",index:0}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:j.map((T,E)=>r.jsx(mb,{icon:T.icon,label:T.label,color:T.color,onClick:()=>{T.onClick(),n()},index:E},T.label))}),r.jsx(Zf,{title:"Account",index:1}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:C.map((T,E)=>r.jsx(mb,{icon:T.icon,label:T.label,color:T.color,onClick:()=>{T.onClick(),n()},index:E+j.length},T.label))}),r.jsx(Zf,{title:"Preferences",index:2}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[r.jsx(se.div,{custom:C.length+j.length,variants:Oh,initial:"hidden",animate:"visible",children:r.jsx(hb,{isOn:m,onToggle:g,label:m?"Dark Mode":"Light Mode",icon:r.jsx($_,{size:18,color:"#fff"}),iconOff:r.jsx(H_,{size:18,color:be.amber})})}),r.jsx(se.div,{custom:C.length+j.length+1,variants:Oh,initial:"hidden",animate:"visible",children:r.jsx(hb,{isOn:v,onToggle:S,label:"Fancy Animations",icon:r.jsx(Jf,{size:18,color:"#fff"})})})]}),r.jsx("div",{style:{height:"24px"}})]}),r.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},style:{position:"relative",zIndex:1,padding:"16px 20px 24px",borderTop:`1px solid ${be.border}`,background:`linear-gradient(180deg, transparent 0%, ${be.abyss}80 100%)`},children:[r.jsxs(se.button,{onClick:y,whileHover:{scale:1.02},whileTap:{scale:.98},style:{width:"100%",padding:"14px",borderRadius:"12px",border:`1px solid ${be.ruby}40`,background:`linear-gradient(135deg, ${be.ruby}15, ${be.rubyDark}10)`,display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",fontFamily:"'Outfit', sans-serif",fontSize:"14px",fontWeight:600,color:be.ruby,transition:"all 0.2s ease"},onMouseEnter:T=>{T.currentTarget.style.background=`linear-gradient(135deg, ${be.ruby}25, ${be.rubyDark}20)`,T.currentTarget.style.borderColor=`${be.ruby}60`,T.currentTarget.style.boxShadow=`0 0 20px ${be.ruby}30`},onMouseLeave:T=>{T.currentTarget.style.background=`linear-gradient(135deg, ${be.ruby}15, ${be.rubyDark}10)`,T.currentTarget.style.borderColor=`${be.ruby}40`,T.currentTarget.style.boxShadow="none"},children:[r.jsx(Fh,{size:18}),r.jsx("span",{children:"Sign Out"})]}),r.jsx("p",{style:{margin:"12px 0 0",textAlign:"center",fontSize:"11px",fontFamily:"'JetBrains Mono', monospace",color:be.textDim},children:"SimpChat v1.0"})]}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"1px",background:`linear-gradient(90deg, transparent, ${be.emerald}40, transparent)`}})]})]})})},Q4=({currentChat:t,onReloadChat:n,onViewUserProfile:s,onConversationDeleted:o})=>{const[c,d]=b.useState(!1),[p,h]=b.useState(!1),[m,g]=b.useState(null),[y,v]=b.useState(!1),[S,j]=b.useState(!1),[C,T]=b.useState(null),[E,z]=b.useState(!1),[L,R]=b.useState(!1),[Y,P]=b.useState(!1),[te,re]=b.useState(!1),{user:K}=jt(),{canAddUsers:ge,canManageChatInfo:me,canManageBans:He,canManageUsers:qe}=su(t?.id),Re=C?.members?.find(ie=>ie.userId===K?.id)?.role==="admin";b.useEffect(()=>{(async()=>{if(t?.id){if(t.id.startsWith("temp_dm_")){const Ce=t.id.replace("temp_dm_","");console.log("[RightPanel] Temp DM chat, loading user profile for:",Ce),z(!0);try{const{userService:he}=await Ut(async()=>{const{userService:kt}=await Promise.resolve().then(()=>fa);return{userService:kt}},void 0),Tt=await he.getUserProfile(Ce);T({id:t.id,name:Tt.username,type:"dm",avatar:Tt.avatar,members:[{userId:Tt.id,user:Tt,role:"member"}],participantsCount:2})}catch(he){console.error("[RightPanel] Failed to load user profile:",he),T(null)}finally{z(!1)}return}z(!0);try{const Ce=await Ee.getChatProfile(t.id);console.log("[RightPanel] Chat profile loaded:",Ce),T(Ce)}catch(Ce){console.error("[RightPanel] Failed to load chat profile:",Ce),T(null)}finally{z(!1)}}})()},[t?.id]);const{usersYouBlocked:Te,addBlockedUser:B,removeBlockedUser:ne}=Pe();b.useEffect(()=>{(async()=>{if(!t||t.type!=="dm"||!C?.members){R(!1);return}const Ce=C.members.find(he=>he.userId!==K?.id);if(!Ce){R(!1);return}if(Te.has(Ce.userId)){R(!0);return}try{const he=await cn.getBlockStatus(Ce.userId);R(he),he&&B(Ce.userId)}catch(he){console.error("[RightPanel] Failed to check block status:",he),R(!1)}})()},[t?.id,t?.type,C?.members,K?.id]),b.useEffect(()=>{if(!t||t.type!=="dm"||!C?.members)return;const ie=C.members.find(he=>he.userId!==K?.id);if(!ie)return;const Ce=Te.has(ie.userId);Ce!==L&&R(Ce)},[Te,t?.id,C?.members,K?.id]);const le=async()=>{if(!_e)return;const ie=L?"unblock":"block";if(await kn({title:L?"Unblock User":"Block User",message:L?`Are you sure you want to unblock ${_e.username}? They will be able to message you again.`:`Are you sure you want to block ${_e.username}? They won't be able to send you messages.`,confirmText:L?"Unblock":"Block",cancelText:"Cancel",variant:L?"warning":"danger"})){P(!0);try{L?(await cn.unblockUser(_e.id),ne(_e.id)):(await cn.blockUser(_e.id),B(_e.id)),R(!L)}catch(he){console.error(`Failed to ${ie} user:`,he)}finally{P(!1)}}},we=async()=>{if(!(!t||!await kn({title:"Delete Conversation",message:"Are you sure you want to delete this conversation? All messages will be permanently deleted.",confirmText:"Delete",cancelText:"Cancel",variant:"danger",icon:"delete"}))){re(!0);try{await Ee.deleteConversation(t.id),o?.()}catch(Ce){console.error("Failed to delete conversation:",Ce)}finally{re(!1)}}},$e=async()=>{if(!(!t||!_e||!await kn({title:"Delete & Block",message:`Are you sure you want to delete this conversation and block ${_e.username}? All messages will be deleted and they won't be able to message you.`,confirmText:"Delete & Block",cancelText:"Cancel",variant:"danger",icon:"ban"}))){re(!0);try{await Ee.deleteConversation(t.id),await cn.blockUser(_e.id),o?.()}catch(Ce){console.error("Failed to delete and block:",Ce)}finally{re(!1)}}};if(!t)return r.jsx("div",{className:D.rightPanel});const _e=t.type==="dm"&&C?.members?C.members.find(ie=>ie.userId!==K?.id)?.user:null,Ae=async ie=>{if(await kn({title:"Ban Member",message:`Are you sure you want to ban "${ie.user.username}" from this chat? They won't be able to rejoin.`,confirmText:"Ban",cancelText:"Cancel",variant:"danger",icon:"ban"}))try{await Ee.banUser(t.id,ie.userId),await n()}catch(he){console.error("Failed to ban user:",he)}},je=async()=>{const ie=t.privacy==="public"?"private":"public";if(await kn({title:"Change Privacy",message:`Change this chat to ${ie}? ${ie==="private"?"Only invited members will be able to join.":"Anyone will be able to find and join."}`,confirmText:"Change",cancelText:"Cancel",variant:"info",icon:"shield"})){v(!0);try{await Ee.updateChatPrivacy(t.id,ie),await n()}catch(he){console.error("Failed to update privacy:",he)}finally{v(!1)}}};return r.jsxs("div",{className:D.rightPanel,children:[r.jsx("div",{className:D.panelHeader,children:r.jsx("h3",{children:"Chat Info"})}),r.jsx("div",{className:D.infoContent,children:t.type==="dm"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:D.infoSection,children:[r.jsx("div",{className:D.infoLabel,style:{color:"var(--text)",marginBottom:"12px",fontWeight:600},children:"Member"}),E?r.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"Loading profile..."}):_e?r.jsxs("div",{onClick:()=>s(_e.id),style:{padding:"16px",backgroundColor:"var(--background)",border:"2px solid var(--border)",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:ie=>{ie.currentTarget.style.borderColor="var(--accent)",ie.currentTarget.style.transform="translateY(-2px)",ie.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:ie=>{ie.currentTarget.style.borderColor="var(--border)",ie.currentTarget.style.transform="translateY(0)",ie.currentTarget.style.boxShadow="none"},title:"Click to view full profile",children:[r.jsx("div",{className:D.memberAvatar,children:_e.avatar||_e.avatarUrl?r.jsx("img",{src:mt(_e.avatar||_e.avatarUrl),alt:_e.username,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"}}):r.jsx("div",{className:D.avatarFallback,style:{width:"50px",height:"50px",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--accent)",color:"#fff",borderRadius:"50%",fontWeight:600},children:An(_e.username)})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{color:"var(--text)",fontWeight:700,fontSize:"16px",marginBottom:"4px"},children:_e.username}),_e.description&&r.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginBottom:"6px"},children:_e.description}),r.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginBottom:"6px"},children:_e.isOnline?" Online":" Offline"}),r.jsx("div",{style:{fontSize:"12px",color:"var(--accent)",fontWeight:600},children:" Tap to view profile"})]})]}):r.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"No user information available"})]}),_e&&r.jsxs("div",{className:D.infoSection,style:{marginTop:"16px"},children:[r.jsx("div",{className:D.infoLabel,style:{color:"var(--text)",marginBottom:"12px",fontWeight:600},children:"Actions"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("button",{onClick:le,disabled:Y||te,style:{width:"100%",padding:"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:L?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",color:L?"#10b981":"#ef4444",border:`1px solid ${L?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,borderRadius:"8px",cursor:Y||te?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,transition:"all 0.2s ease",opacity:Y||te?.6:1},onMouseEnter:ie=>{!Y&&!te&&(ie.currentTarget.style.backgroundColor=L?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)")},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor=L?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)"},children:L?r.jsxs(r.Fragment,{children:[r.jsx(Cb,{size:16}),Y?"Unblocking...":"Unblock User"]}):r.jsxs(r.Fragment,{children:[r.jsx(Rs,{size:16}),Y?"Blocking...":"Block User"]})}),r.jsxs("button",{onClick:we,disabled:te||Y,style:{width:"100%",padding:"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",cursor:te||Y?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,transition:"all 0.2s ease",opacity:te||Y?.6:1},onMouseEnter:ie=>{!te&&!Y&&(ie.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.2)")},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.1)"},children:[r.jsx(Gd,{size:16}),te?"Deleting...":"Delete Conversation"]}),!L&&r.jsxs("button",{onClick:$e,disabled:te||Y,style:{width:"100%",padding:"10px 16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"rgba(220, 38, 38, 0.1)",color:"#dc2626",border:"1px solid rgba(220, 38, 38, 0.3)",borderRadius:"8px",cursor:te||Y?"not-allowed":"pointer",fontSize:"13px",fontWeight:600,transition:"all 0.2s ease",opacity:te||Y?.6:1},onMouseEnter:ie=>{!te&&!Y&&(ie.currentTarget.style.backgroundColor="rgba(220, 38, 38, 0.2)")},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="rgba(220, 38, 38, 0.1)"},children:[r.jsx(Nl,{size:16}),"Delete & Block"]})]})]})]}):r.jsxs(r.Fragment,{children:[(C?.name||C?.description)&&r.jsxs("div",{className:D.infoSection,children:[r.jsxs("div",{className:D.infoLabel,style:{color:"var(--text)",marginBottom:"8px",fontWeight:600},children:[t.type==="group"?"Group":"Channel"," Info"]}),r.jsxs("div",{style:{padding:"12px",backgroundColor:"var(--background)",borderRadius:"8px",border:"1px solid var(--border)"},children:[r.jsx("div",{style:{color:"var(--text)",fontWeight:700,fontSize:"16px",marginBottom:"6px"},children:C.name||t.name}),C.description&&r.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",lineHeight:"1.5"},children:C.description}),r.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px",fontSize:"12px"},children:[r.jsxs("div",{style:{color:"var(--text-secondary)"},children:[" ",C.participantsCount||0," members"]}),r.jsxs("div",{style:{color:"var(--text-secondary)"},children:[" ",C.participantsOnline||0," online"]})]})]})]}),(Re||me)&&r.jsxs("div",{className:D.infoSection,children:[r.jsx("div",{className:D.infoLabel,style:{color:"var(--text)"},children:"Privacy"}),r.jsx("button",{onClick:je,disabled:y,style:{padding:"8px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,width:"100%",marginTop:"4px"},children:y?"Changing...":`Current: ${t.privacy||"private"} (Click to toggle)`})]}),(Re||ge)&&r.jsx("div",{className:D.infoSection,children:r.jsx("button",{onClick:()=>d(!0),style:{padding:"10px 14px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:600,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:" Add Member"})}),r.jsxs("div",{className:D.infoSection,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[r.jsxs("div",{className:D.infoLabel,style:{color:"var(--text)"},children:["Members (",C?.participants?.length||t.members?.length||0,")"]}),r.jsx("button",{onClick:()=>j(!S),style:{padding:"6px 12px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600},children:S?" Hide":" Show"})]}),S&&r.jsx("div",{className:D.memberList,children:E?r.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"Loading members..."}):C?.members&&C.members.length>0?C.members.map(ie=>{const Ce={id:ie.id||ie.userId,userId:ie.userId||ie.id,user:{id:ie.user?.id||ie.userId||ie.id,username:ie.user?.username||ie.username,avatar:mt(ie.user?.avatar||ie.user?.avatarUrl||ie.avatarUrl),bio:ie.user?.bio||ie.user?.description||ie.description},role:ie.role||"member"};return r.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px",borderRadius:"10px",backgroundColor:"var(--background)",border:"1px solid var(--border)",marginBottom:"8px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:he=>{he.currentTarget.style.backgroundColor="var(--surface)",he.currentTarget.style.borderColor="var(--accent)"},onMouseLeave:he=>{he.currentTarget.style.backgroundColor="var(--background)",he.currentTarget.style.borderColor="var(--border)"},children:[r.jsx("div",{className:D.memberAvatar,style:{flexShrink:0,cursor:"pointer"},onClick:he=>{he.stopPropagation(),s(Ce.userId)},title:"View profile",children:Ce.user.avatar?r.jsx("img",{src:Ce.user.avatar,alt:Ce.user.username}):r.jsx("div",{className:D.avatarFallback,children:An(Ce.user.username)})}),r.jsxs("div",{className:D.memberInfo,style:{flex:1,minWidth:0,cursor:"pointer"},onClick:he=>{he.stopPropagation(),s(Ce.userId)},title:"View profile",children:[r.jsx("div",{className:D.memberName,style:{color:"var(--text)",fontWeight:600},children:Ce.user.username}),ie.user?.isOnline!==void 0&&r.jsx("div",{className:D.memberRole,style:{color:"var(--text-secondary)",fontSize:"12px"},children:ie.user.isOnline?" Online":" Offline"})]}),r.jsxs("div",{style:{display:"flex",gap:"4px",flexShrink:0},children:[(Re||qe)&&Ce.role!=="admin"&&r.jsx("button",{onClick:he=>{he.stopPropagation(),g(Ce),h(!0)},title:"Manage Permissions",style:{padding:"6px 10px",backgroundColor:"#6366f1",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:he=>he.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:he=>he.currentTarget.style.backgroundColor="#6366f1",children:""}),(Re||He)&&Ce.role!=="admin"&&r.jsx("button",{onClick:he=>{he.stopPropagation(),Ae(Ce)},title:"Ban User",style:{padding:"6px 10px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600,transition:"all 0.2s"},onMouseEnter:he=>he.currentTarget.style.backgroundColor="#c82333",onMouseLeave:he=>he.currentTarget.style.backgroundColor="#dc3545",children:""})]})]},Ce.id)}):r.jsx("div",{style:{padding:"16px",textAlign:"center",color:"var(--text-secondary)"},children:"No members found"})})]}),t.description&&r.jsxs("div",{className:D.infoSection,children:[r.jsx("div",{className:D.infoLabel,style:{color:"var(--text)"},children:"Description"}),r.jsx("p",{style:{color:"var(--text-secondary)"},children:t.description})]})]})}),c&&r.jsx($4,{isOpen:c,onClose:()=>d(!1),chatId:t.id,chatType:t.type,onMemberAdded:n}),p&&m&&r.jsx(zm,{isOpen:p,onClose:()=>{h(!1),g(null)},chatId:t.id,member:m,onPermissionsChanged:n})]})},Z4=({isOpen:t,onClose:n,onCreate:s,isDarkMode:o=!1})=>{const[c,d]=b.useState(""),[p,h]=b.useState(null),[m,g]=b.useState(null),[y,v]=b.useState(!1),S=C=>{const T=C.target.files?.[0];if(T){h(T);const E=new FileReader;E.onloadend=()=>g(E.result),E.readAsDataURL(T)}},j=async()=>{if(c.trim()){v(!0);try{await s(c,p),d(""),h(null),g(null),n()}finally{v(!1)}}};return t?r.jsx("div",{className:`${D.modalOverlay} ${o?D.darkMode:""}`,onClick:n,children:r.jsxs("div",{className:D.modal,onClick:C=>C.stopPropagation(),children:[r.jsxs("div",{className:D.modalHeader,children:[r.jsx("h2",{children:"Create Custom Reaction"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsxs("div",{className:D.modalBody,children:[r.jsxs("div",{className:D.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Reaction Name *"}),r.jsx("input",{type:"text",placeholder:"e.g., happy, excited, custom-emoji",value:c,onChange:C=>d(C.target.value),className:D.formInput}),r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:"This will be the emoji name (e.g., :happy:)"})]}),r.jsxs("div",{className:D.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Reaction Image (Optional)"}),r.jsx("input",{type:"file",accept:"image/*",onChange:S,className:D.formInput,style:{padding:"8px"}}),m&&r.jsx("div",{style:{marginTop:"12px",textAlign:"center"},children:r.jsx("img",{src:m,alt:"Preview",style:{width:"64px",height:"64px",objectFit:"contain",borderRadius:"8px",border:"2px solid var(--border)"}})})]})]}),r.jsxs("div",{className:D.modalFooter,children:[r.jsx("button",{onClick:n,className:D.secondaryButton,children:"Cancel"}),r.jsx("button",{onClick:j,disabled:!c.trim()||y,className:D.primaryButton,children:y?"Creating...":"Create"})]})]})}):null},gb=({isOpen:t,onClose:n,onCreate:s,isDarkMode:o=!1,isChannel:c=!1})=>{const[d,p]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState("private"),[v,S]=b.useState(null),[j,C]=b.useState(!1),T=z=>{S(z)},E=async()=>{if(d.trim()){C(!0);try{await s(d,h,g,v),p(""),m(""),y("private"),S(null),n()}finally{C(!1)}}};return t?r.jsx("div",{className:`${D.modalOverlay} ${o?D.darkMode:""}`,onClick:n,children:r.jsxs("div",{className:D.modal,onClick:z=>z.stopPropagation(),children:[r.jsxs("div",{className:D.modalHeader,children:[r.jsx("h2",{children:c?"Create Channel":"Create Group"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsxs("div",{className:D.modalBody,children:[r.jsxs("div",{className:D.formGroup,children:[r.jsxs("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:[c?"Channel":"Group"," Name *"]}),r.jsx("input",{type:"text",placeholder:`Enter ${c?"channel":"group"} name (1-40 characters)`,value:d,onChange:z=>p(z.target.value),maxLength:40,className:D.formInput}),r.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[d.length,"/40 characters"]})]}),r.jsx("div",{className:D.formGroup,children:r.jsx(Nm,{onFileAccepted:T,label:`${c?"Channel":"Group"} Avatar (Optional)`,helperText:"Drag and drop an image, or click to browse"})}),r.jsxs("div",{className:D.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Description (Optional)"}),r.jsx("textarea",{placeholder:`Enter ${c?"channel":"group"} description (max 150 characters)`,value:h,onChange:z=>m(z.target.value),maxLength:150,className:D.formInput,rows:3}),r.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[h.length,"/150 characters"]})]}),r.jsxs("div",{className:D.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Privacy"}),r.jsxs("select",{value:g,onChange:z=>y(z.target.value),className:D.formInput,children:[r.jsx("option",{value:"private",children:"Private - Only invited members can join"}),r.jsx("option",{value:"public",children:"Public - Anyone can search and join"})]})]})]}),r.jsxs("div",{className:D.modalFooter,children:[r.jsx("button",{onClick:n,className:D.secondaryButton,children:"Cancel"}),r.jsx("button",{onClick:E,disabled:!d.trim()||j,className:D.primaryButton,children:j?"Creating...":"Create"})]})]})}):null},J4=({isOpen:t,onClose:n,chat:s,onUpdate:o,isDarkMode:c=!1,isChannel:d=!1})=>{const[p,h]=b.useState(""),[m,g]=b.useState(""),[y,v]=b.useState("private"),[S,j]=b.useState(null),[C,T]=b.useState(!1);b.useEffect(()=>{t&&s?(h(s.name||""),g(s.description||""),v(s.privacy||"private"),j(null)):t||(h(""),g(""),v("private"),j(null))},[t,s]);const E=L=>{j(L)},z=async()=>{if(!(!p.trim()||!s)){T(!0);try{await o(s.id,p,m,y,S),h(""),g(""),v("private"),j(null),n()}finally{T(!1)}}};return!t||!s?null:r.jsx("div",{className:`${D.modalOverlay} ${c?D.darkMode:""}`,onClick:n,children:r.jsxs("div",{className:D.modal,onClick:L=>L.stopPropagation(),children:[r.jsxs("div",{className:D.modalHeader,children:[r.jsx("h2",{children:d?"Edit Channel":"Edit Group"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsxs("div",{className:D.modalBody,children:[r.jsxs("div",{className:D.formGroup,children:[r.jsxs("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:[d?"Channel":"Group"," Name *"]}),r.jsx("input",{type:"text",placeholder:`Enter ${d?"channel":"group"} name (1-40 characters)`,value:p,onChange:L=>h(L.target.value),maxLength:40,className:D.formInput}),r.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[p.length,"/40 characters"]})]}),r.jsx("div",{className:D.formGroup,children:r.jsx(Nm,{onFileAccepted:E,currentPreview:s.avatar,label:`${d?"Channel":"Group"} Avatar (Optional)`,helperText:"Drag and drop a new image to update, or click to browse"})}),r.jsxs("div",{className:D.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Description (Optional)"}),r.jsx("textarea",{placeholder:`Enter ${d?"channel":"group"} description (max 150 characters)`,value:m,onChange:L=>g(L.target.value),maxLength:150,className:D.formInput,rows:3}),r.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[m.length,"/150 characters"]})]}),r.jsxs("div",{className:D.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",fontWeight:600,display:"block",marginBottom:"6px"},children:"Privacy"}),r.jsxs("select",{value:y,onChange:L=>v(L.target.value),className:D.formInput,children:[r.jsx("option",{value:"private",children:"Private - Only invited members can join"}),r.jsx("option",{value:"public",children:"Public - Anyone can search and join"})]})]})]}),r.jsxs("div",{className:D.modalFooter,children:[r.jsx("button",{onClick:n,className:D.secondaryButton,children:"Cancel"}),r.jsx("button",{onClick:z,disabled:!p.trim()||C,className:D.primaryButton,children:C?"Updating...":"Update"})]})]})})},e6=({isOpen:t,onClose:n,user:s,onUpdate:o,isDarkMode:c=!1})=>{const[d,p]=b.useState(""),[h,m]=b.useState(""),[g,y]=b.useState(""),[v,S]=b.useState("everyone"),[j,C]=b.useState(!1),[T,E]=b.useState(null),[z,L]=b.useState(null);b.useEffect(()=>{t&&s?(p(s.username||""),m(s.email||""),y(s.bio||""),S(s.addMePolicy||"everyone"),E(null),L(null)):t||(p(""),m(""),y(""),S("everyone"),E(null),L(null))},[t,s]);const R=P=>{E(P)},Y=async()=>{C(!0);try{await o(d,h,g,v,T),n()}finally{C(!1)}};return!t||!s?null:r.jsx("div",{className:`${D.modalOverlay} ${c?D.darkMode:""}`,onClick:n,children:r.jsxs("div",{className:D.modal,onClick:P=>P.stopPropagation(),children:[r.jsxs("div",{className:D.modalHeader,children:[r.jsx("h2",{style:{color:"var(--text)"},children:"Edit Profile"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsxs("div",{className:D.modalBody,children:[r.jsx("div",{className:D.formGroup,children:r.jsx(Nm,{onFileAccepted:R,currentPreview:s?.avatar||z,label:"Profile Avatar",helperText:"Drag and drop your profile picture, or click to browse"})}),r.jsxs("div",{className:D.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:"Username"}),r.jsx("input",{type:"text",value:d,onChange:P=>p(P.target.value),className:D.formInput,placeholder:"Enter your username"})]}),r.jsxs("div",{className:D.formGroup,children:[r.jsxs("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:["Email",r.jsx("span",{style:{fontSize:"12px",fontWeight:400,color:"var(--text-secondary)",marginLeft:"8px"},children:"(Read-only)"})]}),r.jsx("input",{type:"email",value:h,readOnly:!0,disabled:!0,className:D.formInput,placeholder:"Email cannot be changed",style:{backgroundColor:"var(--background)",cursor:"not-allowed",opacity:.7}})]}),r.jsxs("div",{className:D.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:"Bio/Description"}),r.jsx("textarea",{value:g,onChange:P=>y(P.target.value),className:D.formInput,rows:3,placeholder:"Tell us about yourself..."})]}),r.jsxs("div",{className:D.formGroup,children:[r.jsx("label",{style:{color:"var(--text)",display:"block",marginBottom:"6px",fontWeight:600},children:"Who can add you?"}),r.jsxs("select",{value:v,onChange:P=>S(P.target.value),className:D.formInput,children:[r.jsx("option",{value:"everyone",children:"Everyone"}),r.jsx("option",{value:"chatted",children:"Contacts Only"}),r.jsx("option",{value:"nobody",children:"Nobody"})]})]})]}),r.jsxs("div",{className:D.modalFooter,children:[r.jsx("button",{onClick:n,className:D.secondaryButton,children:"Cancel"}),r.jsx("button",{onClick:Y,disabled:j,className:D.primaryButton,children:j?"Updating...":"Update Profile"})]})]},`profile-modal-${s.id}`)})},t6=({isOpen:t,onClose:n,isDarkMode:s=!1,onNavigateToChat:o})=>{const[c,d]=b.useState([]),[p,h]=b.useState(!1);b.useEffect(()=>{t&&m()},[t]);const m=async()=>{h(!0);try{const S=await(await Ut(()=>Promise.resolve().then(()=>Qf),void 0).then(C=>C.notificationService)).getNotifications();console.log("[Notifications] Loaded notifications:",S),Array.isArray(S)&&S.length>0&&console.log("[Notifications] First notification structure:",JSON.stringify(S[0],null,2));const j=Array.isArray(S)?S.map(C=>({id:C.id,chatId:C.chatId,title:`Message from ${C.senderName}`,message:C.content,type:"message",chatName:C.chatName,chatAvatar:C.chatAvatar,senderName:C.senderName,fileUrl:C.fileUrl,isRead:C.seen,createdAt:C.sentTime})):[];d(j)}catch(v){console.error("[Notifications] Failed to load notifications:",v),d([])}finally{h(!1)}},g=async(v,S)=>{try{await(await Ut(()=>Promise.resolve().then(()=>Qf),void 0).then(C=>C.notificationService)).markAsSeen(v),S&&o?(n(),o(S)):await m()}catch(j){console.error("Failed to handle notification click:",j)}},y=async()=>{try{await(await Ut(()=>Promise.resolve().then(()=>Qf),void 0).then(S=>S.notificationService)).markAllAsSeen(),await m()}catch(v){console.error("Failed to mark all notifications as seen:",v)}};return t?r.jsx("div",{className:`${D.modalOverlay} ${s?D.darkMode:""}`,onClick:n,children:r.jsxs("div",{className:D.modal,onClick:v=>v.stopPropagation(),children:[r.jsxs("div",{className:D.modalHeader,children:[r.jsx("h2",{children:"Notifications"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",fontSize:"24px",color:"#64748b",cursor:"pointer",padding:"4px 8px",lineHeight:1},children:""})]}),r.jsx("div",{className:D.modalBody,style:{maxHeight:"60vh",overflowY:"auto"},children:p?r.jsx("div",{className:D.loadingState,children:"Loading notifications..."}):c.length===0?r.jsx("div",{className:D.emptyState,children:"No notifications yet"}):r.jsxs(r.Fragment,{children:[c.length>0&&r.jsx("button",{onClick:y,style:{padding:"8px 12px",backgroundColor:"var(--accent)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:600,marginBottom:"12px",position:"sticky",top:0,zIndex:1},children:"Mark All as Read"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:c.map(v=>r.jsxs("div",{onClick:()=>g(v.id,v.chatId),style:{padding:"14px",background:v.isRead?"rgba(99, 102, 241, 0.05)":"linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1))",border:v.isRead?"1px solid rgba(99, 102, 241, 0.1)":"1px solid rgba(99, 102, 241, 0.3)",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",gap:"12px",alignItems:"flex-start",boxShadow:v.isRead?"none":"0 2px 8px rgba(99, 102, 241, 0.15)",position:"relative",overflow:"hidden"},onMouseEnter:S=>{S.currentTarget.style.transform="translateX(4px)",S.currentTarget.style.boxShadow="0 4px 12px rgba(99, 102, 241, 0.2)"},onMouseLeave:S=>{S.currentTarget.style.transform="translateX(0)",S.currentTarget.style.boxShadow=v.isRead?"none":"0 2px 8px rgba(99, 102, 241, 0.15)"},children:[v.chatAvatar?r.jsx("img",{src:v.chatAvatar,alt:v.chatName,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",flexShrink:0}}):r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:600,fontSize:"14px",flexShrink:0},children:An(v.chatName)}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontWeight:600,marginBottom:"4px",color:"var(--text)"},children:v.chatName}),r.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"4px"},children:[r.jsxs("span",{style:{fontWeight:500,color:"var(--text)"},children:[v.senderName,":"]})," ",v.message&&v.message.trim()?v.message:v.fileUrl?r.jsx("span",{style:{fontStyle:"italic"},children:"Sent an attachment"}):r.jsx("span",{style:{fontStyle:"italic",opacity:.7},children:"No message content"})]}),v.fileUrl&&r.jsx("div",{style:{fontSize:"12px",color:"var(--accent)",marginBottom:"4px"},children:" Attachment"}),r.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:new Date(v.createdAt).toLocaleString()})]})]},v.id))})]})})]})}):null},n6=()=>{const{user:t,logout:n}=jt(),{chats:s,currentChat:o,isLoadingChats:c,messages:d,setMessages:p,onlineUsers:h}=Pe(),{theme:m,toggleTheme:g}=RS(),{fancyAnimations:y,toggleFancyAnimations:v}=DS(),S=VR(),[j,C]=b.useState(!1),[T,E]=b.useState(!1),[z,L]=b.useState(!1),[R,Y]=b.useState(!1),[P,te]=b.useState(null),[re,K]=b.useState(!1),[ge,me]=b.useState(!1),[He,qe]=b.useState(!1),[Ke,Re]=b.useState(!1),[Te,B]=b.useState(!1),[ne,le]=b.useState(!1),[we,$e]=b.useState(""),[_e,Ae]=b.useState([]),[je,ie]=b.useState(!1),[Ce,he]=b.useState(!1),[Tt,kt]=b.useState(null),[Mt,Et]=b.useState(null),[un,At]=b.useState(!1),[pn,xt]=b.useState(!1),[On,dt]=b.useState(!1),[bt,Ht]=b.useState(null),[bn,st]=b.useState(!1),en=b.useRef(null),tn=m==="dark",Wn=b.useRef(null),oe=b.useRef(null);b.useEffect(()=>{(async()=>{const ue=Pe.getState();s.length===0&&await ue.loadChats()})()},[s.length]);const de=o?.id;b.useEffect(()=>{(async()=>{if(!de||de==="search"){console.log("[Dashboard] Clearing messages - no chat selected or search chat"),p([]),Wn.current=null;return}if(de.startsWith("temp_dm_")){console.log("[Dashboard] Temporary chat, skipping message load"),p([]),Wn.current=de;return}if(Wn.current===de){console.log("[Dashboard] Messages already loaded for chat:",de);return}console.log("[Dashboard] ========== LOADING MESSAGES FOR CHAT =========="),console.log("[Dashboard] Chat ID:",de),Wn.current=de,C(!0);try{console.log("[Dashboard] Fetching chat data from API...");const ue=await Ee.getChat(de);console.log("[Dashboard] API Response - Messages count:",ue.messages?.length||0),p(ue.messages||[]),S.isConnected&&(S.markMessagesAsSeen(de),Pe.getState().resetUnreadCount(de))}catch(ue){console.error("[Dashboard] Failed to load messages:",ue),p([])}finally{C(!1)}})()},[de,S.isConnected]),b.useEffect(()=>{if(!de||de==="search"||de.startsWith("temp_dm_"))return;if(oe.current===de){console.log("[Dashboard] Already joined chat room:",de);return}return(async()=>{if(S.isConnected)try{oe.current&&oe.current!==de&&(console.log("[Dashboard] Leaving previous chat room:",oe.current),await S.leaveChat(oe.current).catch(console.error)),console.log("[Dashboard] Joining SignalR chat room:",de),await S.joinChat(de),oe.current=de}catch(ue){console.error("[Dashboard] Failed to join chat room:",ue)}})(),()=>{oe.current&&S.isConnected&&(console.log("[Dashboard] Cleanup - Leaving SignalR chat room:",oe.current),S.leaveChat(oe.current).catch(console.error),oe.current=null)}},[de,S.isConnected]);const ht=async ae=>{if(Pe.getState().setCurrentChat(ae),!ae.id.startsWith("temp_dm_")&&(ae.type==="group"||ae.type==="channel"||ae.type==="dm"))try{const Me=await Ee.getChatProfile(ae.id);if(console.log("[Dashboard] Loaded full profile for",ae.type,":",Me.id,"members:",Me.members?.length),Pe.getState().setCurrentChat(Me),Me.members&&Me.members.length>0){const Ue=Me.members.map(ye=>ye.userId||ye.id||ye.user?.id).filter(ye=>!!ye);if(Ue.length>0)try{const{signalRService:ye}=await Ut(async()=>{const{signalRService:ze}=await Promise.resolve().then(()=>Rh);return{signalRService:ze}},void 0),Ie=await ye.getPresenceStates(Ue);console.log("[Dashboard] Fetched presence for chat members:",Ie),Pe.getState().setInitialPresenceStates(Ie)}catch(ye){console.error("[Dashboard] Failed to fetch presence states:",ye)}}}catch(Me){console.error("[Dashboard] Failed to load chat profile:",Me)}},ut=async()=>{await kn({title:"Sign Out",message:"Are you sure you want to sign out?",confirmText:"Sign Out",cancelText:"Cancel",variant:"warning"})&&n()},It=async(ae,ue,Me)=>{if(console.log("[Dashboard] handleSendChatMessage called",{content:ae,file:ue?{name:ue.name,size:ue.size,type:ue.type}:null,currentChatId:o?.id,userId:t?.id,replyId:Me}),!o||!o.id||o.id==="search"||!t){console.log("[Dashboard] Early return - missing chat or user");return}try{if(ue){console.log("[Dashboard] Sending message with file via REST API");const Ue=new FormData;if(o.id.startsWith("temp_dm_")){const Ie=o.id.replace("temp_dm_","");Ue.append("receiverId",Ie)}else if(Ue.append("chatId",o.id),o.type==="dm"){const Ie=o.members?.find(ze=>ze.userId!==t.id)?.userId;Ie&&Ue.append("receiverId",Ie)}Ue.append("content",ae),Ue.append("file",ue),Me&&Ue.append("replyId",Me),await(await Ut(()=>Promise.resolve().then(()=>Ah),void 0).then(Ie=>Ie.messageService)).sendMessage(Ue)}else{console.log("[Dashboard] Sending text message via SignalR");let Ue=null,ye=null;o.id.startsWith("temp_dm_")?ye=o.id.replace("temp_dm_",""):(Ue=o.id,o.type==="dm"&&(ye=o.members?.find(Ie=>Ie.userId!==t.id)?.userId||null)),await S.sendMessage(Ue,ae,ye,Me||null)}if(console.log("[Dashboard] Message sent successfully"),o.id.startsWith("temp_dm_")){console.log("[Dashboard] Reloading chats after sending to temp chat");const Ue=Pe.getState(),ye=o.id.replace("temp_dm_","");let Ie;const ze=o.name;for(let ce=0;ce<3;ce++){if(await new Promise(Je=>setTimeout(Je,500)),await Ue.loadChats(),Ie=Pe.getState().chats.find(Je=>Je.type!=="dm"?!1:Je.members&&Je.members.length>0?Je.members.some(it=>it.userId===ye||it.id===ye||it.user?.id===ye||it.user?.userId===ye):!!(ze&&Je.name===ze)),Ie){console.log(`[Dashboard] Found newly created real DM on attempt ${ce+1}:`,Ie.id);break}console.log(`[Dashboard] Real DM not found on attempt ${ce+1}, retrying...`)}if(Ie){Wn.current=Ie.id,Ue.setCurrentChat(Ie);const ce=await Ee.getChat(Ie.id);p(ce.messages||[])}else console.error("[Dashboard] Failed to find newly created DM after retries")}else{const Ue=await Ee.getChat(o.id);p(Ue.messages||[])}}catch(Ue){console.error("Failed to send message:",Ue)}},Sn=async(ae,ue,Me,Ue)=>{try{const ye=new FormData;ye.append("Name",ae),ye.append("Description",ue||""),ye.append("PrivacyType",Me==="public"?"Public":"Private"),Ue&&ye.append("file",Ue),console.log("[Dashboard] Creating group with FormData:");for(const[ze,ce]of ye.entries())console.log(`  ${ze}:`,ce instanceof File?`File(${ce.name})`:ce);await Ee.createGroup(ye),await Pe.getState().loadChats()}catch(ye){throw console.error("Failed to create group:",ye),ye}},$=async(ae,ue,Me,Ue)=>{try{const ye=new FormData;ye.append("Name",ae),ye.append("Description",ue||""),ye.append("PrivacyType",Me==="public"?"Public":"Private"),Ue&&ye.append("file",Ue),console.log("[Dashboard] Creating channel with FormData:");for(const[ze,ce]of ye.entries())console.log(`  ${ze}:`,ce instanceof File?`File(${ce.name})`:ce);await Ee.createChannel(ye),await Pe.getState().loadChats()}catch(ye){throw console.error("Failed to create channel:",ye),ye}},W=async(ae,ue,Me,Ue,ye)=>{try{const Ie=new FormData;Ie.append("Name",ue),Ie.append("Description",Me||""),Ie.append("PrivacyType",Ue==="public"?"Public":"Private"),ye&&Ie.append("file",ye),console.log("[Dashboard] Updating group/channel with FormData:");for(const[nn,Je]of Ie.entries())console.log(`  ${nn}:`,Je instanceof File?`File(${Je.name})`:Je);const ze=P?.type==="channel"?"channel":"group";await Ee.updateChat(ae,ze,Ie),await Pe.getState().loadChats()}catch(Ie){throw console.error("Failed to update group/channel:",Ie),Ie}},I=async ae=>{if(o)try{await Ee.banUser(o.id,ae);const ue=await Ee.getChatProfile(o.id);Pe.getState().setCurrentChat(ue)}catch(ue){console.error("Failed to ban user:",ue)}},pe=async ae=>{if(o)try{await Ee.unbanUser(o.id,ae);const ue=await Ee.getChatProfile(o.id);Pe.getState().setCurrentChat(ue)}catch(ue){console.error("Failed to unban user:",ue)}},ve=async ae=>{if(o)try{o.type==="group"?await Ee.removeMemberFromGroup(o.id,ae):o.type==="channel"&&await Ee.removeMemberFromChannel(o.id,ae);const ue=await Ee.getChatProfile(o.id);Pe.getState().setCurrentChat(ue)}catch(ue){console.error("Failed to remove member:",ue)}},Le=async ae=>{if(o)try{await Ee.updateChatPrivacy(o.id,ae);const ue=await Ee.getChatProfile(o.id);Pe.getState().setCurrentChat(ue)}catch(ue){console.error("Failed to update privacy:",ue)}},pt=async()=>{if(!(!o||!await kn({title:`Leave ${o.type==="channel"?"Channel":"Group"}`,message:`Are you sure you want to leave this ${o.type}? You will lose access to all messages and content.`,confirmText:"Leave",cancelText:"Stay",variant:"warning",icon:"leave"})))try{await Ee.leaveChat(o.id,o.type),await Pe.getState().loadChats(),Pe.getState().setCurrentChat(null),xt(!1)}catch(ue){console.error("Failed to leave chat:",ue)}},Ln=async()=>{if(o)try{await Ee.deleteChat(o.id,o.type),await Pe.getState().loadChats(),Pe.getState().setCurrentChat(null),xt(!1)}catch(ae){console.error("Failed to delete chat:",ae)}},ma=async ae=>{try{await(await Ut(()=>Promise.resolve().then(()=>fa),void 0).then(Me=>Me.userService)).blockUser(ae),Pe.getState().addBlockedUser(ae)}catch(ue){console.error("Failed to block user:",ue)}},Qn=async ae=>{try{await(await Ut(()=>Promise.resolve().then(()=>fa),void 0).then(Me=>Me.userService)).unblockUser(ae),Pe.getState().removeBlockedUser(ae)}catch(ue){console.error("Failed to unblock user:",ue)}},Bs=async(ae,ue)=>{try{const Me=new FormData;Me.append("Name",ae),ue&&Me.append("file",ue);const{reactionService:Ue}=await Ut(async()=>{const{reactionService:ye}=await import("./reaction.service-YsLyku3x.js");return{reactionService:ye}},__vite__mapDeps([3,1,2]));await Ue.createReaction(Me)}catch(Me){throw console.error("Failed to create custom reaction:",Me),Me}},Pn=async(ae,ue,Me,Ue,ye)=>{try{const Ie=new FormData;ae&&Ie.append("Username",ae),Ie.append("Description",Me||"");let ze="Everyone";Ue==="chatted"?ze="WithConversations":Ue==="nobody"&&(ze="Nobody"),Ie.append("AddChatMinLvl",ze),ye&&Ie.append("file",ye),console.log("[Dashboard] Updating profile with FormData:");for(const[it,$t]of Ie.entries())console.log(`  ${it}:`,$t instanceof File?`File(${$t.name})`:$t);const nn=await(await Ut(()=>Promise.resolve().then(()=>fa),void 0).then(it=>it.userService)).updateProfile(Ie);jt.getState().setUser(nn)}catch(Ie){throw console.error("Failed to update profile:",Ie),Ie}},os=async ae=>{$e(ae),Ae([]),ae.trim()&&(en.current&&clearTimeout(en.current),ie(!0),en.current=setTimeout(async()=>{try{const ue=await Ut(()=>Promise.resolve().then(()=>fa),void 0).then(ze=>ze.userService),Me=Ee,Ue=[];try{const ze=await ue.searchUsers(ae);console.log("[Search] User search results:",ze),Array.isArray(ze)&&ze.forEach(ce=>{const nn=ce.EntityId||ce.entityId||ce.id,Je=ce.displayName||ce.DisplayName||ce.username||ce.name||"Unknown User";console.log("[Search] Mapping user result:",{EntityId:ce.EntityId,entityId:ce.entityId,id:ce.id,displayName:ce.displayName,DisplayName:ce.DisplayName,username:ce.username,finalUserId:nn,finalName:Je}),Ue.push({id:nn,name:Je,type:"user",avatar:mt(ce.avatarUrl||ce.avatar||ce.profileImage)})})}catch(ze){console.error("User search failed:",ze)}try{const ze=await Me.searchChats(ae);console.log("[Search] Chat results:",ze,"Type:",typeof ze,"IsArray:",Array.isArray(ze)),Array.isArray(ze)?ze.forEach((ce,nn)=>{console.log(`[Search] Processing chat result #${nn}:`,ce),console.log(`[Search] Result #${nn} - chatType:`,ce.chatType,"type:",ce.type,"displayName:",ce.displayName,"name:",ce.name);let Je="channel";if(typeof ce.chatType=="number")Je=ce.chatType===0?"user":ce.chatType===1?"group":"channel",console.log(`[Search] Used numeric chatType (${ce.chatType}) -> ${Je}`);else if(ce.type&&typeof ce.type=="string"){const ot=String(ce.type).toLowerCase().trim();if(ot==="dm"||ot==="directmessage")Je="user",console.log("[Search] Used type field 'dm/directmessage' -> user");else if(ot==="group")Je="group",console.log("[Search] Used type field 'group' -> group");else if(ot==="channel")Je="channel",console.log("[Search] Used type field 'channel' -> channel");else if(console.log(`[Search] type field '${ce.type}' is unknown, trying chatType...`),ce.chatType&&typeof ce.chatType=="string"){const Ze=String(ce.chatType).toLowerCase().trim();Ze==="conversation"||Ze==="dm"||Ze==="directmessage"?(Je="user",console.log("[Search] Used chatType field 'conversation/dm' -> user")):Ze==="group"?(Je="group",console.log("[Search] Used chatType field 'group' -> group")):Ze==="channel"?(Je="channel",console.log("[Search] Used chatType field 'channel' -> channel")):console.log(`[Search] chatType '${Ze}' unknown, defaulting to channel`)}}else if(ce.chatType&&typeof ce.chatType=="string"){const ot=String(ce.chatType).toLowerCase().trim();ot==="conversation"||ot==="dm"||ot==="directmessage"||ot==="0"?(Je="user",console.log(`[Search] Used string chatType '${ce.chatType}' (${ot}) -> user`)):ot==="group"||ot==="1"?(Je="group",console.log(`[Search] Used string chatType '${ce.chatType}' (${ot}) -> group`)):ot==="channel"||ot==="2"?(Je="channel",console.log(`[Search] Used string chatType '${ce.chatType}' (${ot}) -> channel`)):console.log(`[Search] string chatType '${ot}' unknown, defaulting to channel`)}else console.log("[Search] No type info found, using default (channel)");const it=String(ce.displayName||ce.name||ce.username||ce.title||"Unknown").trim(),$t=mt(ce.avatarUrl||ce.avatar||ce.profileImage)||"",Ft={id:String(ce.entityId||ce.id||"unknown"),name:it==="Unknown"||it.length===0?"Unknown User":it,type:Je,avatar:$t||void 0};console.log("[Search] Mapped result:",Ft,"Original:",{displayName:ce.displayName,name:ce.name,username:ce.username,avatar:ce.avatar,avatarUrl:ce.avatarUrl}),Ue.push(Ft)}):(console.warn("[Search] Chat results is not an array:",ze),console.warn("[Search] Type of chatsResults:",typeof ze))}catch(ze){console.error("Chat search failed:",ze)}const ye=new Set,Ie=Ue.filter(ze=>{const ce=`${ze.name.toLowerCase().trim()}|${ze.type}`;return ye.has(ce)?(console.log(`[Search] Filtered duplicate: ${ce}`),!1):(ye.add(ce),!0)});Ie.sort((ze,ce)=>{const nn={user:0,group:1,channel:2};return(nn[ze.type]??3)-(nn[ce.type]??3)}),console.log("[Search] Final deduplicated results (by name+type):",Ie,"Removed duplicates:",Ue.length-Ie.length),Ae(Ie),ie(!1)}catch(ue){console.error("Search error:",ue),ie(!1)}},300))},ga=async ae=>{if(console.log("[Search] Selected result:",ae,"Type:",ae.type),ae.type==="user"){kt(null),Et(ae),At(!0);try{const ue=await Ut(()=>Promise.resolve().then(()=>fa),void 0).then(Ue=>Ue.userService);console.log("[Search] Loading user profile for ID:",ae.id);const Me=await ue.getUserProfile(ae.id);console.log("[Search] Loaded user profile:",Me),kt(Me),he(!0)}catch(ue){console.error("[Search] Failed to load user profile:",ue),kt(ae),he(!0)}finally{At(!1)}}else{console.log("[Search] Opening group/channel profile for:",ae.name),kt(null),At(!0);try{const ue=await Ee.getChatProfile(ae.id);console.log("[Search] Loaded chat profile:",ue),Pe.getState().setCurrentChat(ue),xt(!0)}catch(ue){console.error("[Search] Failed to load chat profile:",ue)}finally{At(!1)}}$e(""),Ae([])},Us=async(ae,ue)=>{console.log("[Dashboard] ========== handleSendMessage START =========="),console.log("[Dashboard] userId:",ae),console.log("[Dashboard] message:",ue),console.log("[Dashboard] selectedUser:",Tt),console.log("[Dashboard] viewingUserId:",bt);try{if(!ae){console.error("[Dashboard] ERROR: User ID not found");return}let Me=Tt?.username,Ue=Tt?.avatar;console.log("[Dashboard] Initial saved userName:",Me,"avatar:",Ue),he(!1),kt(null),Et(null),dt(!1),Ht(null);const ye=Pe.getState();console.log("[Dashboard] Total chats in store:",ye.chats.length),console.log("[Dashboard] Looking for existing DM with user:",ae);const Ie=ye.chats;let ze=Ie.find(it=>it.type!=="dm"?!1:it.members&&it.members.length>0?it.members.some($t=>$t.userId===ae||$t.id===ae||$t.user?.id===ae||$t.user?.userId===ae):!1);if(!ze){const it=Ie.filter($t=>$t.type==="dm"&&(!$t.members||$t.members.length===0));console.log("[Dashboard] Checking",it.length,"DM chats without members");for(const $t of it)try{const Ft=await Ee.getChatProfile($t.id);if(console.log("[Dashboard] Fetched full DM profile:",Ft.id,"members:",Ft.members?.length),Ft.members&&Ft.members.length>0&&Ft.members.some(Ze=>Ze.userId===ae||Ze.id===ae||Ze.user?.id===ae||Ze.user?.userId===ae)){console.log("[Dashboard] Found existing DM by fetching profile:",Ft.id),ze=Ft;break}}catch(Ft){console.error("[Dashboard] Error fetching DM profile:",Ft)}}if(ze){console.log("[Dashboard] Found existing DM, opening:",ze.id,ze.name),ye.setCurrentChat(ze),console.log("[Dashboard] ========== handleSendMessage END (existing DM) ==========");return}console.log("[Dashboard] No existing DM found, will create temporary blank chat"),console.log("[Dashboard] Creating temp chat for userId:",ae);let ce=Me||"User",nn=Ue;if(!Me)try{const $t=await(await Ut(()=>Promise.resolve().then(()=>fa),void 0).then(Ft=>Ft.userService)).getUserProfile(ae);ce=$t.username||"User",nn=$t.avatar,console.log("[Dashboard] Fetched user profile for blank chat:",ce)}catch(it){console.error("[Dashboard] Failed to fetch user profile:",it)}const Je={id:`temp_dm_${ae}`,name:ce,type:"dm",avatar:nn,description:"",privacy:"private",members:[],unreadCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(console.log("[Dashboard] Created blankChat:",JSON.stringify(Je,null,2)),console.log("[Dashboard] Setting current chat to blank chat..."),ye.setCurrentChat(Je),console.log("[Dashboard] Current chat set! Verifying..."),console.log("[Dashboard] chatStore.currentChat is now:",ye.currentChat?.id),console.log("[Dashboard] ========== handleSendMessage END (new blank chat) =========="),ue&&ue.trim()){console.log("[Dashboard] Sending initial message to user:",ae);try{const it=new FormData;it.append("receiverId",ae),it.append("content",ue),await Ne.post("/messages/",it,{headers:{"Content-Type":"multipart/form-data"}}),console.log("[Dashboard] Message sent successfully, backend auto-created DM"),await new Promise(ot=>setTimeout(ot,500)),await ye.loadChats();const Ft=ye.chats.find(ot=>ot.type!=="dm"||!ot.members||ot.members.length===0?!1:ot.members.some(Ze=>Ze.userId===ae||Ze.id===ae||Ze.user?.id===ae||Ze.user?.userId===ae));Ft&&(console.log("[Dashboard] Found newly created DM:",Ft.id),ye.setCurrentChat(Ft))}catch(it){console.error("[Dashboard] Error sending message:",it)}}}catch(Me){console.error("[Dashboard] Failed to open DM:",Me)}};return r.jsxs("div",{className:`${D.dashboard} ${tn?D.darkMode:""}`,children:[r.jsx(m4,{chats:s,currentChat:o,onSelectChat:ae=>{ht(ae),st(!1)},isLoadingChats:c,user:t,onLogout:ut,onMenuOpen:()=>le(!ne),searchQuery:we,onSearchChange:os,searchResults:_e,onSelectSearchResult:ae=>{ga(ae),st(!1)},isSearching:je,isDarkMode:tn,onClearSearch:()=>{$e(""),Et(null),he(!1)},isMobileOpen:bn,onMobileClose:()=>st(!1),onlineUsers:h}),r.jsx(KS,{isOpen:ne,onClose:()=>le(!1),onCreateGroup:()=>E(!0),onCreateChannel:()=>L(!0),onEditProfile:()=>K(!0),onShowNotifications:()=>me(!0),onShowAdminPanel:()=>Re(!0),onShowBlockedUsers:()=>B(!0),isDarkMode:tn,onToggleDarkMode:g,onLogout:ut,fancyAnimations:y,onToggleFancyAnimations:v}),r.jsx(F4,{currentChat:o,messages:d,isLoadingMessages:j,onSendMessage:It,onOpenGroupCreate:()=>E(!0),onOpenChannelCreate:()=>L(!0),onOpenUserProfile:async ae=>{At(!0),he(!0),Et(null);try{const Me=await(await Ut(()=>Promise.resolve().then(()=>fa),void 0).then(Ue=>Ue.userService)).getUserProfile(ae);kt(Me)}catch(ue){console.error("Failed to load user profile:",ue)}finally{At(!1)}},onOpenMobileSidebar:()=>st(!0),onOpenChatProfile:()=>xt(!0)}),o?.type==="dm"&&r.jsx(Q4,{currentChat:o,onReloadChat:async()=>{if(o){const ae=await Ee.getChatProfile(o.id);Pe.getState().setCurrentChat(ae)}},onViewUserProfile:ae=>{Ht(ae),dt(!0)},onConversationDeleted:()=>{Pe.getState().setCurrentChat(null),Pe.getState().loadChats()}}),r.jsx(gb,{isOpen:T,onClose:()=>E(!1),onCreate:Sn,isDarkMode:tn,isChannel:!1}),r.jsx(gb,{isOpen:z,onClose:()=>L(!1),onCreate:$,isDarkMode:tn,isChannel:!0}),r.jsx(J4,{isOpen:R,onClose:()=>{Y(!1),te(null)},chat:P,onUpdate:W,isDarkMode:tn,isChannel:P?.type==="channel"}),r.jsx(e6,{isOpen:re,onClose:()=>K(!1),user:t,onUpdate:Pn,isDarkMode:tn}),r.jsx(t6,{isOpen:ge,onClose:()=>me(!1),isDarkMode:tn,onNavigateToChat:async ae=>{try{let ue=s.find(Me=>Me.id===ae);if(ue||(console.log("[Dashboard] Chat not in list, reloading chats..."),await Pe.getState().loadChats(),ue=Pe.getState().chats.find(Ue=>Ue.id===ae)),ue)await ht(ue);else{console.log("[Dashboard] Chat still not in list, loading profile directly...");const Me=await Ee.getChatProfile(ae);Me?await ht(Me):console.error("Chat not found")}}catch(ue){console.error("[Dashboard] Failed to load chat from notification:",ue)}}}),r.jsx(Z4,{isOpen:He,onClose:()=>qe(!1),onCreate:Bs,isDarkMode:tn}),r.jsx(NS,{isOpen:Ke,onClose:()=>Re(!1),isDarkMode:tn}),r.jsx(XS,{isOpen:Te,onClose:()=>B(!1),isDarkMode:tn}),Ce&&Tt&&r.jsx(Ih,{isOpen:Ce,onClose:()=>{he(!1),kt(null),Et(null)},userId:Tt.id,onSendMessage:Us,onBlockUser:ma,onUnblockUser:Qn,fancyAnimations:y}),o&&(o.type==="group"||o.type==="channel")&&r.jsx(YS,{isOpen:pn,onClose:()=>xt(!1),chat:o,currentUserId:t?.id||"",onEditGroup:()=>{xt(!1),te(o),Y(!0)},onLeaveGroup:pt,onDeleteGroup:Ln,onKickMember:ve,onBanMember:I,onUnbanMember:pe,onUpdatePrivacy:Le,onViewUserProfile:ae=>{Ht(ae),dt(!0)},fancyAnimations:y}),bt&&r.jsx(Ih,{isOpen:On,onClose:()=>{dt(!1),Ht(null)},userId:bt,onSendMessage:Us,onBlockUser:ma,onUnblockUser:Qn,fancyAnimations:y})]})},a6="_dashboardContainer_1w0cn_47",s6="_togglePanelBtn_1w0cn_111",i6="_clickable_1w0cn_213",o6="_chatItem_1w0cn_215",r6="_searchResultItem_1w0cn_217",l6="_mainWrapper_1w0cn_267",c6="_sidebar_1w0cn_283",d6="_searchSection_1w0cn_307",u6="_searchContainer_1w0cn_315",p6="_searchWrapper_1w0cn_323",f6="_searchIcon_1w0cn_335",h6="_searchInput_1w0cn_363",m6="_clearSearch_1w0cn_499",g6="_searchDropdown_1w0cn_557",y6="_dropdownHeader_1w0cn_587",x6="_resultAvatar_1w0cn_689",v6="_resultInfo_1w0cn_755",b6="_resultName_1w0cn_769",S6="_resultUsername_1w0cn_791",w6="_resultType_1w0cn_811",_6="_resultTypeIcon_1w0cn_823",C6="_group_1w0cn_849",j6="_channel_1w0cn_859",T6="_noResults_1w0cn_921",k6="_chatList_1w0cn_969",M6="_sidebarFooter_1w0cn_1017",E6="_settingsButton_1w0cn_1029",A6="_userStatus_1w0cn_1069",R6="_userInfo_1w0cn_1077",D6="_userAvatar_1w0cn_1089",N6="_userDetails_1w0cn_1129",z6="_userName_1w0cn_1143",B6="_active_1w0cn_1203",U6="_chatAvatar_1w0cn_1219",I6="_chatOnlineStatus_1w0cn_1293",O6="_chatInfo_1w0cn_1331",L6="_chatNameRow_1w0cn_1341",P6="_chatName_1w0cn_1341",H6="_chatTime_1w0cn_1373",$6="_chatPreviewRow_1w0cn_1387",F6="_chatPreview_1w0cn_1387",V6="_unreadBadge_1w0cn_1419",q6="_mainContent_1w0cn_1451",G6="_mobileHeader_1w0cn_1471",W6="_mobileTitle_1w0cn_1489",Y6="_mobileMenuBtn_1w0cn_1501",X6="_emptyState_1w0cn_1559",K6="_emptyStateIcon_1w0cn_1579",Q6="_emptyStateTitle_1w0cn_1617",Z6="_emptyStateText_1w0cn_1631",J6="_rightPanel_1w0cn_1649",ez="_collapsed_1w0cn_1671",tz="_rightPanelHeader_1w0cn_1687",nz="_rightPanelTitle_1w0cn_1703",az="_closePanel_1w0cn_1717",sz="_rightPanelContent_1w0cn_1773",iz="_panelPlaceholder_1w0cn_1811",oz="_mobileOverlay_1w0cn_1945",rz="_visible_1w0cn_1969",lz="_open_1w0cn_2041",cz="_loadingChats_1w0cn_2211",dz="_noChats_1w0cn_2213",uz="_loadingMessages_1w0cn_2215",pz="_noMessages_1w0cn_2217",fz="_spinner_1w0cn_2275",hz="_chatViewContainer_1w0cn_2303",mz="_chatHeader_1w0cn_2319",gz="_chatHeaderLeft_1w0cn_2339",yz="_chatHeaderAvatar_1w0cn_2351",xz="_chatHeaderInfo_1w0cn_2423",vz="_chatHeaderName_1w0cn_2435",bz="_chatHeaderStatus_1w0cn_2449",Sz="_chatHeaderRight_1w0cn_2459",wz="_chatHeaderBtn_1w0cn_2471",_z="_messagesContainer_1w0cn_2511",Cz="_message_1w0cn_2511",jz="_own_1w0cn_2573",Tz="_messageAvatar_1w0cn_2583",kz="_messageBubble_1w0cn_2627",Mz="_messageSender_1w0cn_2675",Ez="_messageText_1w0cn_2701",Az="_messageTime_1w0cn_2725",Rz="_seenIndicator_1w0cn_2755",Dz="_seen_1w0cn_2755",Nz="_delivered_1w0cn_2779",zz="_messageAttachment_1w0cn_2807",Bz="_attachmentImage_1w0cn_2815",Uz="_attachmentLink_1w0cn_2829",Iz="_messageInputContainer_1w0cn_2899",Oz="_inputDisabledNotice_1w0cn_2913",Lz="_filePreview_1w0cn_2937",Pz="_fileName_1w0cn_2957",Hz="_removeFile_1w0cn_2973",$z="_messageInputRow_1w0cn_3033",Fz="_fileInput_1w0cn_3045",Vz="_attachBtn_1w0cn_3053",qz="_messageInput_1w0cn_2899",Gz="_sendBtn_1w0cn_3227",Wz="_panelDetails_1w0cn_3307",Yz="_panelAvatar_1w0cn_3323",Xz="_panelName_1w0cn_3387",Kz="_panelType_1w0cn_3401",Qz="_panelDescription_1w0cn_3417",Zz="_panelMemberCount_1w0cn_3433",Jz="_replyPreview_1w0cn_3473",eB="_replyAuthor_1w0cn_3551",tB="_replyContent_1w0cn_3571",nB="_messageReactions_1w0cn_3601",aB="_reactionBadge_1w0cn_3615",sB="_messageFooter_1w0cn_3741",iB="_editedLabel_1w0cn_3757",oB="_contextMenu_1w0cn_3811",rB="_contextReactions_1w0cn_3833",lB="_contextReactionBtn_1w0cn_3847",cB="_contextDivider_1w0cn_3887",dB="_contextMenuItem_1w0cn_3899",uB="_danger_1w0cn_3957",pB="_highlighted_1w0cn_3987",fB="_scrollToBottomBtn_1w0cn_3997",hB="_replyBar_1w0cn_4065",mB="_replyBarContent_1w0cn_4087",gB="_replyBarIcon_1w0cn_4103",yB="_replyBarInfo_1w0cn_4125",xB="_replyBarLabel_1w0cn_4139",vB="_replyBarText_1w0cn_4151",bB="_replyBarClose_1w0cn_4169",SB="_editBar_1w0cn_4227",wB="_editBarContent_1w0cn_4249",_B="_editBarIcon_1w0cn_4265",CB="_editBarInfo_1w0cn_4287",jB="_editBarLabel_1w0cn_4301",TB="_editBarText_1w0cn_4313",kB="_editBarClose_1w0cn_4331",MB="_pinnedBar_1w0cn_4477",EB="_pinnedBarHeader_1w0cn_4489",AB="_pinnedBarLeft_1w0cn_4521",RB="_pinnedBarChevron_1w0cn_4547",DB="_expanded_1w0cn_4557",NB="_pinnedBarContent_1w0cn_4565",zB="_pinnedLoading_1w0cn_4575",BB="_pinnedItem_1w0cn_4589",UB="_pinnedItemInfo_1w0cn_4623",IB="_pinnedItemSender_1w0cn_4639",OB="_pinnedItemPreview_1w0cn_4651",LB="_pinnedItemJump_1w0cn_4667",PB="_panelClickHint_1w0cn_4729",HB="_modalBackdrop_1w0cn_4745",$B="_subModal_1w0cn_6407",FB="_subModalHeader_1w0cn_6433",VB="_subModalSearch_1w0cn_6515",qB="_subModalContent_1w0cn_6567",GB="_subModalLoading_1w0cn_6597",WB="_subModalEmpty_1w0cn_6625",YB="_subModalItem_1w0cn_6639",XB="_subModalItemAvatar_1w0cn_6665",KB="_subModalItemInfo_1w0cn_6713",QB="_subModalItemName_1w0cn_6727",ZB="_subModalItemMeta_1w0cn_6739",JB="_subModalItemBtn_1w0cn_6749",eU="_unban_1w0cn_6781",M={dashboardContainer:a6,togglePanelBtn:s6,clickable:i6,chatItem:o6,searchResultItem:r6,mainWrapper:l6,sidebar:c6,searchSection:d6,searchContainer:u6,searchWrapper:p6,searchIcon:f6,searchInput:h6,clearSearch:m6,searchDropdown:g6,dropdownHeader:y6,resultAvatar:x6,resultInfo:v6,resultName:b6,resultUsername:S6,resultType:w6,resultTypeIcon:_6,group:C6,channel:j6,noResults:T6,chatList:k6,sidebarFooter:M6,settingsButton:E6,userStatus:A6,userInfo:R6,userAvatar:D6,userDetails:N6,userName:z6,active:B6,chatAvatar:U6,chatOnlineStatus:I6,chatInfo:O6,chatNameRow:L6,chatName:P6,chatTime:H6,chatPreviewRow:$6,chatPreview:F6,unreadBadge:V6,mainContent:q6,mobileHeader:G6,mobileTitle:W6,mobileMenuBtn:Y6,emptyState:X6,emptyStateIcon:K6,emptyStateTitle:Q6,emptyStateText:Z6,rightPanel:J6,collapsed:ez,rightPanelHeader:tz,rightPanelTitle:nz,closePanel:az,rightPanelContent:sz,panelPlaceholder:iz,mobileOverlay:oz,visible:rz,open:lz,loadingChats:cz,noChats:dz,loadingMessages:uz,noMessages:pz,spinner:fz,chatViewContainer:hz,chatHeader:mz,chatHeaderLeft:gz,chatHeaderAvatar:yz,chatHeaderInfo:xz,chatHeaderName:vz,chatHeaderStatus:bz,chatHeaderRight:Sz,chatHeaderBtn:wz,messagesContainer:_z,message:Cz,own:jz,messageAvatar:Tz,messageBubble:kz,messageSender:Mz,messageText:Ez,messageTime:Az,seenIndicator:Rz,seen:Dz,delivered:Nz,messageAttachment:zz,attachmentImage:Bz,attachmentLink:Uz,messageInputContainer:Iz,inputDisabledNotice:Oz,filePreview:Lz,fileName:Pz,removeFile:Hz,messageInputRow:$z,fileInput:Fz,attachBtn:Vz,messageInput:qz,sendBtn:Gz,panelDetails:Wz,panelAvatar:Yz,panelName:Xz,panelType:Kz,panelDescription:Qz,panelMemberCount:Zz,replyPreview:Jz,replyAuthor:eB,replyContent:tB,messageReactions:nB,reactionBadge:aB,messageFooter:sB,editedLabel:iB,contextMenu:oB,contextReactions:rB,contextReactionBtn:lB,contextDivider:cB,contextMenuItem:dB,danger:uB,highlighted:pB,scrollToBottomBtn:fB,replyBar:hB,replyBarContent:mB,replyBarIcon:gB,replyBarInfo:yB,replyBarLabel:xB,replyBarText:vB,replyBarClose:bB,editBar:SB,editBarContent:wB,editBarIcon:_B,editBarInfo:CB,editBarLabel:jB,editBarText:TB,editBarClose:kB,pinnedBar:MB,pinnedBarHeader:EB,pinnedBarLeft:AB,pinnedBarChevron:RB,expanded:DB,pinnedBarContent:NB,pinnedLoading:zB,pinnedItem:BB,pinnedItemInfo:UB,pinnedItemSender:IB,pinnedItemPreview:OB,pinnedItemJump:LB,panelClickHint:PB,modalBackdrop:HB,subModal:$B,subModalHeader:FB,subModalSearch:VB,subModalContent:qB,subModalLoading:GB,subModalEmpty:WB,subModalItem:YB,subModalItemAvatar:XB,subModalItemInfo:KB,subModalItemName:QB,subModalItemMeta:ZB,subModalItemBtn:JB,unban:eU},tU=()=>{const{user:t,logout:n}=jt(),{theme:s,toggleTheme:o}=RS(),{fancyAnimations:c,toggleFancyAnimations:d}=DS(),p=s==="dark",{chats:h,currentChat:m,messages:g,isLoadingChats:y,isLoadingMessages:v,setCurrentChat:S,loadChats:j,loadMessages:C,sendMessage:T,isUserOnline:E,deleteMessage:z,editMessage:L,isBlockedBy:R,hasBlocked:Y,loadPinnedMessages:P,getPinnedMessages:te,unpinMessage:re,isLoadingPinned:K,addBlockedUser:ge,removeBlockedUser:me,setInitialPresenceStates:He}=Pe(),{canSendMessage:qe}=su(m?.id),Ke=()=>{if(!m||m.type!=="dm"||!t)return null;const _=m.members?.find(J=>(J.userId||J.id)!==t.id);return _?.userId||_?.id||null},Re=Ke(),Te=Re?R(Re):!1,B=Re?Y(Re):!1,ne=Te||B,[le,we]=b.useState(""),[$e,_e]=b.useState(!1),[Ae,je]=b.useState([]),[ie,Ce]=b.useState(!1),[he,Tt]=b.useState(()=>window.innerWidth>768),[kt,Mt]=b.useState(!1),[Et,un]=b.useState(""),[At,pn]=b.useState(!1),[xt,On]=b.useState(null),[dt,bt]=b.useState(null),[Ht,bn]=b.useState(null),[st,en]=b.useState(null),[tn,Wn]=b.useState(!1),[oe,de]=b.useState(!1),[ht,ut]=b.useState(!1),[It,Sn]=b.useState(!1),[$,W]=b.useState(!1),[I,pe]=b.useState(!1),[ve,Le]=b.useState(!1),[pt,Ln]=b.useState(!1),[ma,Qn]=b.useState(!1),[Bs,Pn]=b.useState(!1),[os,ga]=b.useState(null),[Us,ae]=b.useState(null),[ue,Me]=b.useState(!1),[Ue,ye]=b.useState(null),[Ie,ze]=b.useState(!1),[ce,nn]=b.useState(!1),[Je,it]=b.useState(null),[$t,Ft]=b.useState(!1),[ot,Ze]=b.useState(!1),[Rn,rs]=b.useState(""),[po,vr]=b.useState([]),[Zl,br]=b.useState(!1),[Si,fo]=b.useState(!1),[ls,Is]=b.useState([]),[Os,cs]=b.useState(!1),[fn,Jl]=b.useState(!1),[Sr,ds]=b.useState(null),[Ls,wi]=b.useState(!1),[$a,wr]=b.useState(""),[_r,_i]=b.useState(""),[Fa,ya]=b.useState(null),[Dn,Cr]=b.useState(null),[an,ho]=b.useState(!1),[Hn,Ps]=b.useState(""),[mo,$n]=b.useState(""),[Hs,jr]=b.useState(null),[$s,us]=b.useState(null),[Qe,Ci]=b.useState(!1),[sn,ji]=b.useState("public"),[ps,Tr]=b.useState(""),[go,ec]=b.useState(""),[tc,Ti]=b.useState(null),[xa,yo]=b.useState(null),[wn,fs]=b.useState(!1),[Va,kr]=b.useState(!1),ki=b.useRef(null),Mr=b.useRef(null),qa=b.useRef(null),va=b.useRef(null),Ga=b.useRef(null),Fs=b.useRef(null),ba=b.useRef(null),xo=b.useRef(null),Vs=b.useRef(null);b.useEffect(()=>{h.length===0&&j()},[]),b.useEffect(()=>{const _=()=>{const J=window.innerWidth<=768;J||Mt(!1),J&&Tt(!1)};return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]),b.useEffect(()=>{const _=J=>{ki.current&&!ki.current.contains(J.target)&&_e(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),b.useEffect(()=>{m&&m.id!==xo.current&&(xo.current=m.id,C(m.id),P(m.id),nt.joinChat(m.id),nt.markMessagesAsSeen(m.id).catch(_=>{console.warn("[DashboardLayout] Failed to mark messages as seen:",_)}),Pe.getState().resetUnreadCount(m.id),kr(!1))},[m?.id]),b.useEffect(()=>{qa.current&&qa.current.scrollIntoView({behavior:"smooth"})},[g.length]),b.useEffect(()=>{const _=J=>{Vs.current&&!Vs.current.contains(J.target)&&bt(null)};return dt&&document.addEventListener("click",_),()=>document.removeEventListener("click",_)},[dt]),b.useEffect(()=>{const _=va.current;if(!_)return;const J=()=>{const{scrollTop:xe,scrollHeight:Fe,clientHeight:St}=_,ft=Fe-xe-St<100;Wn(!ft)};return _.addEventListener("scroll",J),()=>_.removeEventListener("scroll",J)},[m?.id]);const nc=(_,J)=>{_.preventDefault(),_.stopPropagation(),bt({messageId:J.messageId,x:_.clientX,y:_.clientY})},Mi=async(_,J)=>{try{await Pe.getState().toggleReaction(_,J)}catch(xe){console.error("Failed to toggle reaction:",xe)}bt(null)},vo=_=>{bn(_),bt(null),Fs.current?.focus()},ac=_=>{en(_),un(_.content||""),bt(null),Fs.current?.focus()},Fn=async _=>{if(await kn({title:"Delete Message",message:"Are you sure you want to delete this message? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger",icon:"delete"})){try{await z(_)}catch(xe){console.error("Failed to delete message:",xe)}bt(null)}},hs=async _=>{try{_.isPinned?await re(_.messageId):await Pe.getState().pinMessage(_.messageId)}catch(J){console.error("Failed to toggle pin:",J)}bt(null)},bo=()=>{qa.current?.scrollIntoView({behavior:"smooth"})},qs=_=>{const J=document.getElementById(`msg-${_}`);J&&(J.scrollIntoView({behavior:"smooth",block:"center"}),J.classList.add(M.highlighted),setTimeout(()=>J.classList.remove(M.highlighted),2e3))},iu=["","","","",""],So={Like:"",Love:"",Laugh:"",Sad:"",Angry:""},Er=b.useCallback(_=>{if(we(_),!_.trim()){je([]),Ce(!1);return}ba.current&&clearTimeout(ba.current),Ce(!0),ba.current=setTimeout(async()=>{try{const[J,xe]=await Promise.all([cn.searchUsers(_).catch(()=>[]),Ee.searchChats(_).catch(()=>[])]),Fe=J.map(Ot=>({id:Ot.id,name:Ot.username,type:"user",avatar:Ot.avatar,username:Ot.username})),St=xe.filter(Ot=>{const Xa=Ot.type||Ot.chatType;return Xa!=="dm"&&Xa!==0}).map(Ot=>({id:Ot.id||Ot.entityId,name:Ot.name||Ot.displayName,type:Ot.type==="group"||Ot.chatType===1?"group":Ot.type==="channel"||Ot.chatType===2?"channel":"group",avatar:Ot.avatar||Ot.avatarUrl})),ft=[...Fe,...St],Ya=new Set,Ri=ft.filter(Ot=>{const Xa=`${Ot.type}-${Ot.name.toLowerCase()}`;return Ya.has(Xa)?!1:(Ya.add(Xa),!0)});Ri.sort((Ot,Xa)=>{const zr={user:0,group:1,channel:2};return zr[Ot.type]-zr[Xa.type]}),je(Ri)}catch(J){console.error("Search failed:",J),je([])}finally{Ce(!1)}},300)},[]),Gs=h.filter(_=>_.name.toLowerCase().includes(le.toLowerCase())),wo=$e&&le.length>0,sc=()=>{we(""),je([]),Mr.current?.focus()},Ar=async _=>{if(we(""),je([]),_e(!1),_.type==="user")Ei(_.id),Pn(!0);else{const J=h.find(xe=>xe.id===_.id);if(J)S(J),Mt(!1);else try{const xe=await Ee.getChatProfile(_.id);it(xe);const Fe={id:_.id,name:_.name,type:_.type,avatar:_.avatar,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),unreadCount:0,members:[]};S(Fe),Qn(!0)}catch(xe){console.error("Failed to load profile:",xe)}}},ou=_=>{if(m?.id===_.id){Mt(!1);return}S(_),Mt(!1)},ic=async _=>{if(_&&(_.preventDefault(),_.stopPropagation()),console.log("[DashboardLayout] handleSendMessage called",{hasText:!!Et.trim(),hasFile:!!xt,fileName:xt?.name,chatId:m?.id}),!Et.trim()&&!xt||!m||At){console.log("[DashboardLayout] Skipping send - validation failed");return}pn(!0);try{if(st){await L(st.messageId,Et.trim()),en(null),un("");return}let J;if(m.id.startsWith("temp_dm_"))J=m.id.replace("temp_dm_",""),console.log("[DashboardLayout] Temp chat detected, using receiverId:",J);else if(m.type==="dm"&&m.members){const Fe=m.members.find(St=>(St.userId||St.id)!==t?.id);J=Fe?.userId||Fe?.id}console.log("[DashboardLayout] Sending message...",{chatId:m.id,receiverId:J,hasFile:!!xt,replyId:Ht?.messageId}),await T(m.id,J,Et.trim(),xt||void 0,Ht?.messageId),console.log("[DashboardLayout] Message sent successfully"),un(""),On(null),bn(null),Ga.current&&(Ga.current.value="")}catch(J){console.error("[DashboardLayout] Failed to send message:",J)}finally{console.log("[DashboardLayout] Send complete, resetting isSending"),pn(!1)}},Rr=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),ic())},oc=_=>{if(_.type!=="dm")return!1;if(!_.members||!t)return _.isOnline||!1;const J=_.members.find(Fe=>(Fe.userId||Fe.id)!==t.id);if(!J)return!1;const xe=J.userId||J.id;return E(xe)},ru=_=>{if(_.lastMessage){const J=_.lastMessage.content||"";if(_.lastMessage.fileUrl&&!J)return" Attachment";if(J)return P0(J,40)}return"No messages yet"},lu=_=>_.lastMessage?.createdAt&&(_.lastMessage.content||_.lastMessage.fileUrl)?Mm(_.lastMessage.createdAt):"",Ei=async _=>{ga(_),Me(!0),ye(null);try{const J=await cn.getUserProfile(_);ae(J);const xe=await cn.getMutualBlockStatus(_);ze(xe.iBlockedThem),nn(xe.theyBlockedMe)}catch(J){ye(J.response?.data?.message||"Failed to load profile")}finally{Me(!1)}},cu=async _=>{try{await cn.blockUser(_),ge(_),ze(!0)}catch(J){console.error("Failed to block user:",J)}},rc=async _=>{try{await cn.unblockUser(_),me(_),ze(!1)}catch(J){console.error("Failed to unblock user:",J)}},du=async _=>{try{const J=h.find(ft=>ft.type!=="dm"?!1:ft.members&&ft.members.length>0?ft.members.some(Ya=>(Ya.userId||Ya.id)===_):!1);if(J){S(J),Pn(!1),Mt(!1);return}for(const ft of h.filter(Ya=>Ya.type==="dm"))if(!ft.members||ft.members.length===0)try{if((await Ee.getChatProfile(ft.id)).members?.some(Ri=>Ri.userId===_||Ri.user?.id===_)){S(ft),Pn(!1),Mt(!1);return}}catch{}console.log("[DashboardLayout] No existing DM found, creating temporary blank chat for:",_);let xe="User",Fe;try{const ft=await cn.getUserProfile(_);xe=ft.username||"User",Fe=ft.avatar,console.log("[DashboardLayout] Fetched user profile for blank chat:",xe)}catch(ft){console.error("[DashboardLayout] Failed to fetch user profile:",ft)}const St={id:`temp_dm_${_}`,name:xe,type:"dm",avatar:Fe,description:"",privacy:"private",members:[],unreadCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("[DashboardLayout] Created blank chat:",St.id,St.name),S(St),Pn(!1),Mt(!1)}catch(J){console.error("Failed to start conversation:",J),console.error("Failed to start conversation")}},Wa=async _=>{Ft(!0);try{const J=await Ee.getChatProfile(_);it(J);const xe=J.members?.map(Fe=>Fe.userId)||[];if(xe.length>0)try{const Fe=await nt.getPresenceStates(xe);Object.keys(Fe).length>0&&He(Fe)}catch(Fe){console.error("Failed to load presence states:",Fe)}}catch(J){console.error("Failed to load group profile:",J)}finally{Ft(!1)}},uu=async _=>{if(rs(_),!_.trim()){vr([]);return}br(!0);try{const J=await cn.searchUsers(_),xe=new Set(Je?.members?.map(St=>St.userId)||[]),Fe=J.filter(St=>!xe.has(St.id));vr(Fe)}catch(J){console.error("Failed to search users:",J)}finally{br(!1)}},pu=async _=>{if(m)try{m.type==="group"?await Ee.addMemberToGroup(m.id,_):m.type==="channel"&&await Ee.addMemberToChannel(m.id,_),Ze(!1),rs(""),vr([]),await Wa(m.id)}catch(J){console.error("Failed to add member:",J)}},Dr=async _=>{if(m)try{m.type==="group"?await Ee.removeMemberFromGroup(m.id,_):m.type==="channel"&&await Ee.removeMemberFromChannel(m.id,_),await Wa(m.id)}catch(J){console.error("Failed to remove member:",J)}},fu=async _=>{if(m)try{await Ee.banUser(m.id,_),await Wa(m.id)}catch(J){console.error("Failed to ban member:",J)}},lc=async(_,J)=>{if(m)try{await Ee.unbanUser(m.id,_),await hu()}catch(xe){console.error("Failed to unban member:",xe)}},hu=async()=>{if(m){cs(!0);try{const _=await Ee.getBannedUsers(m.id);Is(_)}catch(_){console.error("Failed to load banned users:",_)}finally{cs(!1)}}},cc=async()=>{if(m)try{await Ee.leaveChat(m.id,m.type),Qn(!1),S(null),j()}catch(_){console.error("Failed to leave:",_)}},mu=async()=>{if(m)try{await Ee.deleteChat(m.id,m.type),Qn(!1),S(null),j()}catch(_){console.error("Failed to delete:",_)}},gu=async _=>{if(m)try{await Ee.updateChatPrivacy(m.id,_),S({...m,privacy:_}),Wa(m.id)}catch(J){console.error("Failed to update privacy:",J)}},yu=()=>{m&&(wr(m.name||""),_i(m.description||""),ya(null),Cr(m.avatar?mt(m.avatar)??null:null),wi(!0))},xu=_=>{const J=_.target.files?.[0];if(J){ya(J);const xe=new FileReader;xe.onloadend=()=>{Cr(xe.result)},xe.readAsDataURL(J)}},vu=async()=>{if(!(!m||!$a.trim())){ho(!0);try{const _=new FormData;_.append("Name",$a.trim()),_.append("Description",_r.trim()),Fa&&(_.append("file",Fa),console.log("[EditGroup] Appending avatar file:",Fa.name,Fa.size,"bytes")),console.log("[EditGroup] Sending update for chat:",m.id,m.type),await Ee.updateChat(m.id,m.type,_);const J={...m,name:$a.trim(),description:_r.trim(),...Fa&&Dn?{avatar:Dn}:{}};S(J),wi(!1),j(),setTimeout(()=>{Wa(m.id)},300)}catch(_){console.error("Failed to update group:",_)}finally{ho(!1)}}},Sa=()=>{Ps(""),$n(""),jr(null),us(null),ji("public")},dc=_=>{const J=_.target.files?.[0];if(J){jr(J);const xe=new FileReader;xe.onloadend=()=>{us(xe.result)},xe.readAsDataURL(J)}},bu=async()=>{if(console.log("[DashboardLayout] handleCreateGroup called"),console.log("[DashboardLayout] createGroupName:",Hn),!Hn.trim()){console.log("[DashboardLayout] Group name is empty, returning");return}Ci(!0);try{const _=new FormData;_.append("Name",Hn.trim()),_.append("Description",mo.trim()),_.append("PrivacyType",sn==="public"?"Public":"Private"),Hs&&_.append("file",Hs),console.log("[DashboardLayout] FormData contents:");for(const[xe,Fe]of _.entries())console.log(`  ${xe}:`,Fe instanceof File?`File(${Fe.name})`:Fe);console.log("[DashboardLayout] Calling chatService.createGroup...");const J=await Ee.createGroup(_);console.log("[DashboardLayout] createGroup response:",J),ut(!1),Sa(),await j(),J&&S(J),console.log("[DashboardLayout] Group created successfully!")}catch(_){console.error("[DashboardLayout] Failed to create group:",_)}finally{Ci(!1)}},Su=async()=>{if(Hn.trim()){Ci(!0);try{const _=new FormData;_.append("Name",Hn.trim()),_.append("Description",mo.trim()),_.append("PrivacyType",sn==="public"?"Public":"Private"),Hs&&_.append("file",Hs);const J=await Ee.createChannel(_);Sn(!1),Sa(),await j(),J&&S(J)}catch(_){console.error("Failed to create channel:",_)}finally{Ci(!1)}}},Nr=()=>{Tr(t?.username||""),ec(t?.bio||""),Ti(null),yo(t?.avatar?mt(t.avatar)??null:null),W(!0)},Ai=_=>{const J=_.target.files?.[0];if(J){Ti(J);const xe=new FileReader;xe.onloadend=()=>{yo(xe.result)},xe.readAsDataURL(J)}},wu=async()=>{if(ps.trim()){fs(!0);try{const _=new FormData;_.append("Username",ps.trim()),_.append("Description",go.trim()),tc&&_.append("file",tc);const J=await cn.updateProfile(_);J&&jt.getState().setUser(J),W(!1)}catch(_){console.error("Failed to update profile:",_)}finally{fs(!1)}}};return r.jsxs("div",{className:M.dashboardContainer,children:[r.jsx("div",{className:`${M.mobileOverlay} ${kt?M.visible:""}`,onClick:()=>Mt(!1)}),r.jsxs("div",{className:M.mainWrapper,children:[r.jsxs("aside",{className:`${M.sidebar} ${kt?M.open:""}`,children:[r.jsx("div",{className:M.searchSection,ref:ki,children:r.jsxs("div",{className:M.searchContainer,children:[r.jsxs("div",{className:M.searchWrapper,children:[r.jsx("input",{ref:Mr,type:"text",className:M.searchInput,placeholder:"Search...",value:le,onChange:_=>Er(_.target.value),onFocus:()=>_e(!0)}),r.jsx(jl,{className:M.searchIcon,size:15,strokeWidth:2}),le&&r.jsx("button",{className:M.clearSearch,onClick:sc,"aria-label":"Clear",type:"button",children:r.jsx(En,{size:12,strokeWidth:2})})]}),wo&&r.jsx("div",{className:M.searchDropdown,children:ie?r.jsxs("div",{className:M.noResults,children:[r.jsx(ln,{size:18,className:M.spinner}),r.jsx("span",{children:"Searching..."})]}):Ae.length>0?r.jsxs(r.Fragment,{children:[Ae.filter(_=>_.type==="user").length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:M.dropdownHeader,children:[r.jsx(jn,{size:12}),"Users"]}),Ae.filter(_=>_.type==="user").map(_=>r.jsxs("button",{className:M.searchResultItem,onClick:()=>Ar(_),type:"button",children:[r.jsx("div",{className:M.resultAvatar,children:_.avatar?r.jsx("img",{src:mt(_.avatar),alt:_.name}):An(_.name)}),r.jsxs("div",{className:M.resultInfo,children:[r.jsx("span",{className:M.resultName,children:_.name}),r.jsxs("span",{className:M.resultUsername,children:["@",_.username||_.name]})]}),r.jsx("div",{className:M.resultTypeIcon,children:r.jsx(jn,{size:14})})]},`user-${_.id}`))]}),Ae.filter(_=>_.type==="group").length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:M.dropdownHeader,children:[r.jsx(jn,{size:12}),"Groups"]}),Ae.filter(_=>_.type==="group").map(_=>r.jsxs("button",{className:M.searchResultItem,onClick:()=>Ar(_),type:"button",children:[r.jsx("div",{className:`${M.resultAvatar} ${M.group}`,children:_.avatar?r.jsx("img",{src:mt(_.avatar),alt:_.name}):r.jsx(jn,{size:16})}),r.jsxs("div",{className:M.resultInfo,children:[r.jsx("span",{className:M.resultName,children:_.name}),r.jsx("span",{className:M.resultType,children:"Group"})]}),r.jsx("div",{className:`${M.resultTypeIcon} ${M.group}`,children:r.jsx(jn,{size:14})})]},`group-${_.id}`))]}),Ae.filter(_=>_.type==="channel").length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:M.dropdownHeader,children:[r.jsx(ns,{size:12}),"Channels"]}),Ae.filter(_=>_.type==="channel").map(_=>r.jsxs("button",{className:M.searchResultItem,onClick:()=>Ar(_),type:"button",children:[r.jsx("div",{className:`${M.resultAvatar} ${M.channel}`,children:_.avatar?r.jsx("img",{src:mt(_.avatar),alt:_.name}):r.jsx(ns,{size:16})}),r.jsxs("div",{className:M.resultInfo,children:[r.jsx("span",{className:M.resultName,children:_.name}),r.jsx("span",{className:M.resultType,children:"Channel"})]}),r.jsx("div",{className:`${M.resultTypeIcon} ${M.channel}`,children:r.jsx(ns,{size:14})})]},`channel-${_.id}`))]})]}):r.jsxs("div",{className:M.noResults,children:[r.jsx(jl,{size:18,strokeWidth:1.5}),r.jsx("span",{children:"No results found"})]})})]})}),r.jsx("div",{className:M.chatList,children:y?r.jsxs("div",{className:M.loadingChats,children:[r.jsx(ln,{size:24,className:M.spinner}),r.jsx("span",{children:"Loading chats..."})]}):Gs.length===0?r.jsxs("div",{className:M.noChats,children:[r.jsx(_d,{size:24,strokeWidth:1.5}),r.jsx("span",{children:"No conversations yet"})]}):Gs.map(_=>r.jsxs("div",{className:`${M.chatItem} ${m?.id===_.id?M.active:""}`,onClick:()=>ou(_),children:[r.jsxs("div",{className:`${M.chatAvatar} ${_.type!=="dm"?M.group:""}`,children:[_.avatar?r.jsx("img",{src:mt(_.avatar),alt:_.name}):_.type==="group"?r.jsx(jn,{size:18,strokeWidth:2}):_.type==="channel"?r.jsx(ns,{size:18,strokeWidth:2}):An(_.name),_.type==="dm"&&oc(_)&&r.jsx("div",{className:M.chatOnlineStatus})]}),r.jsxs("div",{className:M.chatInfo,children:[r.jsxs("div",{className:M.chatNameRow,children:[r.jsx("span",{className:M.chatName,children:_.name}),r.jsx("span",{className:M.chatTime,children:lu(_)})]}),r.jsxs("div",{className:M.chatPreviewRow,children:[r.jsx("span",{className:M.chatPreview,children:ru(_)}),_.unreadCount>0&&r.jsx("span",{className:M.unreadBadge,children:_.unreadCount})]})]})]},_.id))}),r.jsx("div",{className:M.sidebarFooter,children:r.jsxs("button",{className:M.settingsButton,onClick:()=>de(!0),type:"button",children:[r.jsxs("div",{className:M.userInfo,children:[r.jsx("div",{className:M.userAvatar,children:t?.avatar?r.jsx("img",{src:mt(t.avatar),alt:t.username}):An(t?.username||"U")}),r.jsxs("div",{className:M.userDetails,children:[r.jsx("span",{className:M.userName,children:t?.username||"User"}),r.jsx("span",{className:M.userStatus,children:"Online"})]})]}),r.jsx(th,{size:18,strokeWidth:2})]})})]}),r.jsxs("main",{className:M.mainContent,children:[r.jsxs("div",{className:M.mobileHeader,children:[r.jsx("button",{className:M.mobileMenuBtn,onClick:()=>Mt(!kt),"aria-label":"Toggle menu",type:"button",children:r.jsx(jb,{size:20,strokeWidth:2})}),r.jsx("span",{className:M.mobileTitle,children:m?m.name:"Messages"})]}),m?r.jsxs("div",{className:M.chatViewContainer,children:[r.jsxs("div",{className:M.chatHeader,children:[r.jsxs("div",{className:M.chatHeaderLeft,children:[r.jsx("div",{className:`${M.chatHeaderAvatar} ${m.type!=="dm"?M.group:""}`,children:m.avatar?r.jsx("img",{src:mt(m.avatar),alt:m.name}):m.type==="group"?r.jsx(jn,{size:20,strokeWidth:2}):m.type==="channel"?r.jsx(ns,{size:20,strokeWidth:2}):An(m.name)}),r.jsxs("div",{className:M.chatHeaderInfo,children:[r.jsx("h3",{className:M.chatHeaderName,children:m.name}),r.jsx("span",{className:M.chatHeaderStatus,children:m.type==="dm"?oc(m)?"Online":"Offline":`${m.members?.length||m.participantsCount||0} members`})]})]}),r.jsx("div",{className:M.chatHeaderRight,children:m.type!=="dm"&&r.jsx("button",{className:M.chatHeaderBtn,onClick:()=>{Qn(!0),Wa(m.id)},title:`${m.type==="channel"?"Channel":"Group"} Info`,type:"button",children:r.jsx($h,{size:18,strokeWidth:2,style:{flexShrink:0,minWidth:18}})})})]}),(()=>{const _=te(m.id);return _.length===0?null:r.jsxs("div",{className:M.pinnedBar,children:[r.jsxs("button",{className:M.pinnedBarHeader,onClick:()=>kr(!Va),type:"button",children:[r.jsxs("div",{className:M.pinnedBarLeft,children:[r.jsx(Dl,{size:14}),r.jsxs("span",{children:[_.length," pinned message",_.length!==1?"s":""]})]}),r.jsx(nh,{size:16,className:`${M.pinnedBarChevron} ${Va?M.expanded:""}`})]}),r.jsx(Xn,{children:Va&&r.jsx(se.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:M.pinnedBarContent,children:K?r.jsx("div",{className:M.pinnedLoading,children:r.jsx(ln,{size:16,className:M.spinner})}):_.map(J=>r.jsxs("div",{className:M.pinnedItem,children:[r.jsxs("div",{className:M.pinnedItemInfo,children:[r.jsx("span",{className:M.pinnedItemSender,children:J.senderUsername}),r.jsx("span",{className:M.pinnedItemPreview,children:J.content?P0(J.content,50):J.fileUrl?"Attachment":"Empty"})]}),r.jsx("button",{className:M.pinnedItemJump,onClick:()=>qs(J.messageId),type:"button",children:"Jump"})]},J.messageId))})})]})})(),r.jsxs("div",{className:M.messagesContainer,ref:va,children:[v?r.jsxs("div",{className:M.loadingMessages,children:[r.jsx(ln,{size:24,className:M.spinner}),r.jsx("span",{children:"Loading messages..."})]}):g.length===0?r.jsxs("div",{className:M.noMessages,children:[r.jsx(_d,{size:24,strokeWidth:1.5}),r.jsx("span",{children:"No messages yet. Start the conversation!"})]}):g.map((_,J)=>r.jsxs("div",{id:`msg-${_.messageId}`,className:`${M.message} ${_.isCurrentUser?M.own:""}`,children:[!_.isCurrentUser&&r.jsx("div",{className:M.messageAvatar,onClick:()=>{_.senderId&&(Ei(_.senderId),Pn(!0))},style:{cursor:"pointer"},title:`View ${_.senderUsername}'s profile`,children:_.senderAvatarUrl?r.jsx("img",{src:mt(_.senderAvatarUrl),alt:_.senderUsername}):An(_.senderUsername)}),r.jsxs("div",{className:M.messageBubble,onContextMenu:xe=>nc(xe,_),onClick:xe=>{if("ontouchstart"in window&&xe.detail===1){const Fe=xe.target;if(Fe.closest("button")||Fe.closest("a")||Fe.closest(`.${M.replyPreview}`))return;xe.preventDefault(),bt({messageId:_.messageId,x:xe.clientX,y:xe.clientY})}},children:[!_.isCurrentUser&&m.type!=="dm"&&r.jsx("span",{className:M.messageSender,onClick:xe=>{xe.stopPropagation(),_.senderId&&(Ei(_.senderId),Pn(!0))},style:{cursor:"pointer"},title:`View ${_.senderUsername}'s profile`,children:_.senderUsername}),_.replyId&&(()=>{const xe=g.find(Fe=>Fe.messageId===_.replyId);return r.jsxs("div",{className:M.replyPreview,onClick:()=>xe&&qs(_.replyId),children:[r.jsx(yf,{size:12}),r.jsx("span",{className:M.replyAuthor,children:xe?.senderUsername||"Unknown"}),r.jsxs("span",{className:M.replyContent,children:[xe?.content?.substring(0,40)||(xe?.fileUrl?" File":"Deleted"),xe?.content&&xe.content.length>40?"...":""]})]})})(),_.fileUrl&&r.jsx("div",{className:M.messageAttachment,children:/\.(jpg|jpeg|png|gif|webp)$/i.test(_.fileUrl)?r.jsx("img",{src:mt(_.fileUrl),alt:"Attachment",className:M.attachmentImage}):r.jsxs("a",{href:mt(_.fileUrl),target:"_blank",rel:"noopener noreferrer",className:M.attachmentLink,children:[r.jsx(Jx,{size:14}),r.jsx("span",{children:"View Attachment"})]})}),_.content&&r.jsx("p",{className:M.messageText,children:_.content}),_.messageReactions&&_.messageReactions.length>0&&(()=>{const xe=_.messageReactions.reduce((Fe,St)=>{const ft=St.reactionType||St.type||"Like";return Fe[ft]||(Fe[ft]={count:0,users:[]}),Fe[ft].count++,Fe[ft].users.push(St.userName||St.userId||"User"),Fe},{});return r.jsx("div",{className:M.messageReactions,children:Object.entries(xe).map(([Fe,St])=>r.jsxs("button",{className:M.reactionBadge,onClick:()=>Mi(_.messageId,So[Fe]||""),title:St.users.join(", "),children:[So[Fe]||"",St.count>1&&r.jsx("span",{children:St.count})]},Fe))})})(),r.jsxs("div",{className:M.messageFooter,children:[r.jsxs("span",{className:M.messageTime,children:[nA(_.sentAt),_.editedAt&&r.jsx("span",{className:M.editedLabel,children:" (edited)"})]}),"isSeen"in _&&r.jsx("span",{className:`${M.seenIndicator} ${_.isSeen?M.seen:M.delivered}`,children:_.isSeen?"":""})]}),dt?.messageId===_.messageId&&(()=>{const xe=J>=g.length-3,Fe=180,St=220;return r.jsxs("div",{ref:Vs,className:M.contextMenu,style:{position:"fixed",top:xe?Math.max(10,dt.y-St):Math.min(dt.y,window.innerHeight-St-10),left:Math.max(10,dt.x-Fe)},children:[r.jsx("div",{className:M.contextReactions,children:iu.map(ft=>r.jsx("button",{className:M.contextReactionBtn,onClick:()=>Mi(_.messageId,ft),children:ft},ft))}),r.jsx("div",{className:M.contextDivider}),r.jsxs("button",{className:M.contextMenuItem,onClick:()=>vo(_),children:[r.jsx(yf,{size:14})," Reply"]}),r.jsxs("button",{className:M.contextMenuItem,onClick:()=>hs(_),children:[r.jsx(Dl,{size:14})," ",_.isPinned?"Unpin":"Pin"]}),_.isCurrentUser&&r.jsxs("button",{className:M.contextMenuItem,onClick:()=>ac(_),children:[r.jsx(ev,{size:14})," Edit"]}),_.isCurrentUser&&r.jsxs("button",{className:`${M.contextMenuItem} ${M.danger}`,onClick:()=>Fn(_.messageId),children:[r.jsx(Gd,{size:14})," Delete"]})]})})()]})]},_.messageId)),r.jsx("div",{ref:qa})]}),tn&&r.jsx("button",{className:M.scrollToBottomBtn,onClick:bo,type:"button","aria-label":"Scroll to bottom",children:r.jsx(nh,{size:18})}),r.jsx("div",{className:M.messageInputContainer,children:ne?r.jsx("div",{className:M.inputDisabledNotice,children:r.jsx("span",{children:B?"You have blocked this user. Unblock to send messages.":"You cannot message this user."})}):!qe&&m.type!=="dm"?r.jsx("div",{className:M.inputDisabledNotice,children:r.jsx("span",{children:"You don't have permission to send messages in this chat."})}):r.jsxs(r.Fragment,{children:[Ht&&r.jsxs("div",{className:M.replyBar,children:[r.jsxs("div",{className:M.replyBarContent,children:[r.jsx("div",{className:M.replyBarIcon,children:r.jsx(yf,{size:14})}),r.jsxs("div",{className:M.replyBarInfo,children:[r.jsxs("span",{className:M.replyBarLabel,children:["Replying to ",Ht.senderUsername]}),r.jsxs("span",{className:M.replyBarText,children:[Ht.content?.substring(0,50)||" Attachment",Ht.content&&Ht.content.length>50?"...":""]})]})]}),r.jsx("button",{className:M.replyBarClose,onClick:()=>bn(null),type:"button",children:r.jsx(En,{size:14})})]}),st&&r.jsxs("div",{className:M.editBar,children:[r.jsxs("div",{className:M.editBarContent,children:[r.jsx("div",{className:M.editBarIcon,children:r.jsx(ev,{size:14})}),r.jsxs("div",{className:M.editBarInfo,children:[r.jsx("span",{className:M.editBarLabel,children:"Editing message"}),r.jsxs("span",{className:M.editBarText,children:[st.content?.substring(0,50)||"",st.content&&st.content.length>50?"...":""]})]})]}),r.jsx("button",{className:M.editBarClose,onClick:()=>{en(null),un("")},type:"button",children:r.jsx(En,{size:14})})]}),xt&&r.jsxs("div",{className:M.filePreview,children:[r.jsx("span",{className:M.fileName,children:xt.name}),r.jsx("button",{className:M.removeFile,onClick:()=>{On(null),Ga.current&&(Ga.current.value="")},children:r.jsx(En,{size:14})})]}),r.jsxs("div",{className:M.messageInputRow,children:[r.jsx("input",{type:"file",ref:Ga,className:M.fileInput,onChange:_=>{_.preventDefault(),_.stopPropagation();const J=_.target.files?.[0]||null;console.log("[DashboardLayout] File selected:",J?.name,J?.size),On(J)}}),r.jsx("button",{className:M.attachBtn,onClick:()=>Ga.current?.click(),type:"button",children:r.jsx(Jx,{size:18,strokeWidth:2})}),r.jsx("input",{type:"text",className:M.messageInput,placeholder:"Type a message...",value:Et,onChange:_=>un(_.target.value),onKeyPress:Rr,disabled:At}),r.jsx("button",{className:M.sendBtn,onClick:_=>ic(_),disabled:!Et.trim()&&!xt||At,type:"button",children:At?r.jsx(ln,{size:18,className:M.spinner}):r.jsx(F_,{size:18,strokeWidth:2})})]})]})})]}):r.jsxs("div",{className:M.emptyState,children:[r.jsx("div",{className:M.emptyStateIcon,children:r.jsx(_d,{size:32,strokeWidth:1.5})}),r.jsx("h2",{className:M.emptyStateTitle,children:"Select a conversation"}),r.jsx("p",{className:M.emptyStateText,children:"Choose a chat from the sidebar to start messaging"})]}),!he&&m&&r.jsx("button",{className:M.togglePanelBtn,onClick:()=>Tt(!0),"aria-label":"Open panel",type:"button",children:r.jsx(V_,{size:16,strokeWidth:2})})]}),r.jsxs("aside",{className:`${M.rightPanel} ${he?"":M.collapsed}`,children:[r.jsxs("div",{className:M.rightPanelHeader,children:[r.jsx("span",{className:M.rightPanelTitle,children:"Details"}),r.jsx("button",{className:M.closePanel,onClick:()=>Tt(!1),"aria-label":"Close panel",type:"button",children:r.jsx(En,{size:16,strokeWidth:2})})]}),r.jsx("div",{className:M.rightPanelContent,children:m?r.jsxs("div",{className:`${M.panelDetails} ${M.clickable}`,onClick:()=>{if(console.log("[DashboardLayout] Panel details clicked",{chatType:m.type,members:m.members,currentUserId:t?.id}),m.type==="dm"){const _=Ke();console.log("[DashboardLayout] DM profile click, otherUserId:",_),_?(Pn(!0),Ei(_)):console.warn("[DashboardLayout] Could not find other user in DM")}else(m.type==="group"||m.type==="channel")&&(Qn(!0),Wa(m.id))},children:[r.jsx("div",{className:M.panelAvatar,children:m.avatar?r.jsx("img",{src:mt(m.avatar),alt:m.name}):m.type==="group"?r.jsx(jn,{size:32,strokeWidth:1.5}):m.type==="channel"?r.jsx(ns,{size:32,strokeWidth:1.5}):r.jsx("span",{children:An(m.name)})}),r.jsx("h3",{className:M.panelName,children:m.name}),r.jsx("p",{className:M.panelType,children:m.type==="dm"?"Direct Message":m.type==="group"?"Group Chat":"Channel"}),m.description&&r.jsx("p",{className:M.panelDescription,children:m.description}),m.type!=="dm"&&r.jsxs("div",{className:M.panelMemberCount,children:[r.jsx(jn,{size:16}),r.jsxs("span",{children:[m.members?.length||m.participantsCount||0," members"]})]}),r.jsx("p",{className:M.panelClickHint,children:m.type==="dm"?"Click to view profile":"Click to view details"})]}):r.jsxs("div",{className:M.panelPlaceholder,children:[r.jsx(jn,{size:28,strokeWidth:1.5}),r.jsx("p",{children:"Select a conversation to view details"})]})})]})]}),r.jsx(KS,{isOpen:oe,onClose:()=>de(!1),onCreateGroup:()=>{Sa(),ut(!0)},onCreateChannel:()=>{Sa(),Sn(!0)},onEditProfile:Nr,onShowNotifications:()=>pe(!0),onShowAdminPanel:()=>Le(!0),onShowBlockedUsers:()=>Ln(!0),isDarkMode:p,onToggleDarkMode:o,onLogout:n,fancyAnimations:c,onToggleFancyAnimations:d}),os&&r.jsx(Ih,{isOpen:Bs,onClose:()=>{Pn(!1),ga(null)},userId:os,onSendMessage:_=>{du(_)},onBlockUser:_=>{cu(_)},onUnblockUser:_=>{rc(_)},fancyAnimations:c}),m&&m.type!=="dm"&&r.jsx(YS,{isOpen:ma,onClose:()=>Qn(!1),chat:m,currentUserId:t?.id||"",onEditGroup:yu,onDeleteGroup:mu,onLeaveGroup:cc,onKickMember:Dr,onViewUserProfile:_=>{Qn(!1),Ei(_),Pn(!0)},onBanMember:async _=>{await fu(_)},onUnbanMember:async _=>{await lc(_)},onUpdatePrivacy:async _=>{await gu(_)},fancyAnimations:c}),r.jsx(Xn,{children:Ls&&m&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>wi(!1),children:r.jsxs(se.div,{className:M.subModal,style:{maxWidth:"400px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsxs("h3",{children:["Edit ",m.type==="channel"?"Channel":"Group"]}),r.jsx("button",{onClick:()=>wi(!1),type:"button",disabled:an,children:r.jsx(En,{size:18})})]}),r.jsxs("div",{className:M.subModalContent,style:{padding:"20px",position:"relative"},children:[an&&r.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.4)",borderRadius:"0 0 12px 12px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(2px)"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",color:"var(--dash-text)"},children:[r.jsx(ln,{size:32,className:M.spinner,style:{color:"var(--dash-primary)"}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"Saving changes..."})]})}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"24px",opacity:an?.5:1,pointerEvents:an?"none":"auto"},children:[r.jsxs("div",{style:{width:"100px",height:"100px",borderRadius:"50%",background:"var(--dash-surface-elevated)",border:"2px solid var(--dash-border-light)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:an?"not-allowed":"pointer",position:"relative"},onClick:()=>!an&&document.getElementById("editGroupAvatarInput")?.click(),children:[Dn?r.jsx("img",{src:Dn,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):m.type==="channel"?r.jsx(ns,{size:40,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}):r.jsx(jn,{size:40,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",padding:"4px",textAlign:"center",fontSize:"11px",color:"var(--dash-text)"},children:"Change"})]}),r.jsx("input",{type:"file",id:"editGroupAvatarInput",accept:"image/*",style:{display:"none"},onChange:xu}),r.jsx("span",{style:{fontSize:"12px",color:"var(--dash-text-muted)",marginTop:"8px"},children:"Click to change avatar"})]}),r.jsxs("div",{style:{marginBottom:"16px",opacity:an?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"6px"},children:"Name"}),r.jsx("input",{type:"text",value:$a,onChange:_=>wr(_.target.value),placeholder:`${m.type==="channel"?"Channel":"Group"} name`,disabled:an,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",cursor:an?"not-allowed":"text"}})]}),r.jsxs("div",{style:{marginBottom:"24px",opacity:an?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"6px"},children:"Description"}),r.jsx("textarea",{value:_r,onChange:_=>_i(_.target.value),placeholder:"Add a description...",rows:3,disabled:an,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",resize:"none",cursor:an?"not-allowed":"text"}})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",opacity:an?.5:1},children:[r.jsx("button",{onClick:()=>wi(!1),disabled:an,style:{flex:1,padding:"10px 16px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",fontWeight:500,cursor:an?"not-allowed":"pointer"},children:"Cancel"}),r.jsx("button",{onClick:vu,disabled:an||!$a.trim(),style:{flex:1,padding:"10px 16px",background:"var(--dash-primary)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"14px",fontWeight:500,cursor:an||!$a.trim()?"not-allowed":"pointer",opacity:an||!$a.trim()?.6:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:an?r.jsxs(r.Fragment,{children:[r.jsx(ln,{size:16,className:M.spinner}),"Saving..."]}):"Save Changes"})]})]})]})})}),r.jsx(Xn,{children:ot&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Ze(!1),children:r.jsxs(se.div,{className:M.subModal,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsx("h3",{children:"Add Member"}),r.jsx("button",{onClick:()=>Ze(!1),type:"button",children:r.jsx(En,{size:18})})]}),r.jsxs("div",{className:M.subModalSearch,children:[r.jsx(jl,{size:14}),r.jsx("input",{type:"text",placeholder:"Search users to add...",value:Rn,onChange:_=>uu(_.target.value),autoFocus:!0})]}),r.jsxs("div",{className:M.subModalContent,children:[Zl&&r.jsxs("div",{className:M.subModalLoading,children:[r.jsx(ln,{size:20,className:M.spinner}),r.jsx("span",{children:"Searching..."})]}),!Zl&&Rn&&po.length===0&&r.jsx("div",{className:M.subModalEmpty,children:"No users found"}),po.map(_=>r.jsxs("div",{className:M.subModalItem,children:[r.jsx("div",{className:M.subModalItemAvatar,children:_.avatar?r.jsx("img",{src:mt(_.avatar),alt:_.username}):r.jsx("span",{children:An(_.username)})}),r.jsx("div",{className:M.subModalItemInfo,children:r.jsx("span",{className:M.subModalItemName,children:_.username})}),r.jsx("button",{className:M.subModalItemBtn,onClick:()=>pu(_.id),type:"button",children:"Add"})]},_.id))]})]})})}),r.jsx(Xn,{children:Si&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>fo(!1),children:r.jsxs(se.div,{className:M.subModal,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsxs("h3",{children:[r.jsx(Rs,{size:18}),"Banned Users"]}),r.jsx("button",{onClick:()=>fo(!1),type:"button",children:r.jsx(En,{size:18})})]}),r.jsxs("div",{className:M.subModalContent,children:[Os&&r.jsxs("div",{className:M.subModalLoading,children:[r.jsx(ln,{size:20,className:M.spinner}),r.jsx("span",{children:"Loading..."})]}),!Os&&ls.length===0&&r.jsx("div",{className:M.subModalEmpty,children:"No banned users"}),ls.map(_=>r.jsxs("div",{className:M.subModalItem,children:[r.jsx("div",{className:M.subModalItemAvatar,children:_.avatarUrl?r.jsx("img",{src:mt(_.avatarUrl),alt:_.username}):r.jsx("span",{children:An(_.username)})}),r.jsxs("div",{className:M.subModalItemInfo,children:[r.jsx("span",{className:M.subModalItemName,children:_.username}),r.jsxs("span",{className:M.subModalItemMeta,children:["Banned ",new Date(_.bannedAt).toLocaleDateString()]})]}),r.jsx("button",{className:`${M.subModalItemBtn} ${M.unban}`,onClick:()=>lc(_.userId,_.username),type:"button",children:"Unban"})]},_.userId))]})]})})}),m&&Sr&&r.jsx(zm,{isOpen:fn,onClose:()=>{Jl(!1),ds(null)},chatId:m.id,member:Sr,onPermissionsChanged:async()=>{m&&await Wa(m.id)}}),r.jsx(Xn,{children:ht&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{Qe||(ut(!1),Sa())},children:r.jsxs(se.div,{className:M.subModal,style:{maxWidth:"420px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsx("h3",{children:"Create Group"}),r.jsx("button",{onClick:()=>{Qe||(ut(!1),Sa())},type:"button",disabled:Qe,children:r.jsx(En,{size:18})})]}),r.jsxs("div",{className:M.subModalContent,style:{padding:"20px",position:"relative"},children:[Qe&&r.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.4)",borderRadius:"0 0 12px 12px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(2px)"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",color:"var(--dash-text)"},children:[r.jsx(ln,{size:32,className:M.spinner,style:{color:"var(--dash-primary)"}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"Creating group..."})]})}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px",opacity:Qe?.5:1},children:[r.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"var(--dash-surface-elevated)",border:"2px solid var(--dash-border-light)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:Qe?"not-allowed":"pointer",position:"relative"},onClick:()=>!Qe&&document.getElementById("createGroupAvatarInput")?.click(),children:[$s?r.jsx("img",{src:$s,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx(jn,{size:32,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",padding:"3px",textAlign:"center",fontSize:"10px",color:"var(--dash-text)"},children:"Add Photo"})]}),r.jsx("input",{type:"file",id:"createGroupAvatarInput",accept:"image/*",style:{display:"none"},onChange:dc})]}),r.jsxs("div",{style:{marginBottom:"14px",opacity:Qe?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Group Name *"}),r.jsx("input",{type:"text",value:Hn,onChange:_=>Ps(_.target.value),placeholder:"Enter group name",disabled:Qe,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none"}})]}),r.jsxs("div",{style:{marginBottom:"14px",opacity:Qe?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Description"}),r.jsx("textarea",{value:mo,onChange:_=>$n(_.target.value),placeholder:"Add a description (optional)",rows:2,disabled:Qe,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",resize:"none"}})]}),r.jsxs("div",{style:{marginBottom:"20px",opacity:Qe?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"8px"},children:"Privacy"}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{type:"button",onClick:()=>ji("public"),disabled:Qe,style:{flex:1,padding:"10px",background:sn==="public"?"var(--dash-primary)":"var(--dash-surface)",border:`1px solid ${sn==="public"?"var(--dash-primary)":"var(--dash-border)"}`,borderRadius:"8px",color:sn==="public"?"#fff":"var(--dash-text)",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Public"}),r.jsx("button",{type:"button",onClick:()=>ji("private"),disabled:Qe,style:{flex:1,padding:"10px",background:sn==="private"?"var(--dash-primary)":"var(--dash-surface)",border:`1px solid ${sn==="private"?"var(--dash-primary)":"var(--dash-border)"}`,borderRadius:"8px",color:sn==="private"?"#fff":"var(--dash-text)",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Private"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:()=>{ut(!1),Sa()},disabled:Qe,style:{flex:1,padding:"10px 16px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:bu,disabled:Qe||!Hn.trim(),style:{flex:1,padding:"10px 16px",background:"var(--dash-primary)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"14px",fontWeight:500,cursor:Qe||!Hn.trim()?"not-allowed":"pointer",opacity:Qe||!Hn.trim()?.6:1},children:"Create Group"})]})]})]})})}),r.jsx(Xn,{children:It&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{Qe||(Sn(!1),Sa())},children:r.jsxs(se.div,{className:M.subModal,style:{maxWidth:"420px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsx("h3",{children:"Create Channel"}),r.jsx("button",{onClick:()=>{Qe||(Sn(!1),Sa())},type:"button",disabled:Qe,children:r.jsx(En,{size:18})})]}),r.jsxs("div",{className:M.subModalContent,style:{padding:"20px",position:"relative"},children:[Qe&&r.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.4)",borderRadius:"0 0 12px 12px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(2px)"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",color:"var(--dash-text)"},children:[r.jsx(ln,{size:32,className:M.spinner,style:{color:"var(--dash-primary)"}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"Creating channel..."})]})}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px",opacity:Qe?.5:1},children:[r.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"var(--dash-surface-elevated)",border:"2px solid var(--dash-border-light)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:Qe?"not-allowed":"pointer",position:"relative"},onClick:()=>!Qe&&document.getElementById("createChannelAvatarInput")?.click(),children:[$s?r.jsx("img",{src:$s,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx(ns,{size:32,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",padding:"3px",textAlign:"center",fontSize:"10px",color:"var(--dash-text)"},children:"Add Photo"})]}),r.jsx("input",{type:"file",id:"createChannelAvatarInput",accept:"image/*",style:{display:"none"},onChange:dc})]}),r.jsxs("div",{style:{marginBottom:"14px",opacity:Qe?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Channel Name *"}),r.jsx("input",{type:"text",value:Hn,onChange:_=>Ps(_.target.value),placeholder:"Enter channel name",disabled:Qe,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none"}})]}),r.jsxs("div",{style:{marginBottom:"14px",opacity:Qe?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Description"}),r.jsx("textarea",{value:mo,onChange:_=>$n(_.target.value),placeholder:"Add a description (optional)",rows:2,disabled:Qe,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",resize:"none"}})]}),r.jsxs("div",{style:{marginBottom:"20px",opacity:Qe?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"8px"},children:"Privacy"}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{type:"button",onClick:()=>ji("public"),disabled:Qe,style:{flex:1,padding:"10px",background:sn==="public"?"var(--dash-primary)":"var(--dash-surface)",border:`1px solid ${sn==="public"?"var(--dash-primary)":"var(--dash-border)"}`,borderRadius:"8px",color:sn==="public"?"#fff":"var(--dash-text)",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Public"}),r.jsx("button",{type:"button",onClick:()=>ji("private"),disabled:Qe,style:{flex:1,padding:"10px",background:sn==="private"?"var(--dash-primary)":"var(--dash-surface)",border:`1px solid ${sn==="private"?"var(--dash-primary)":"var(--dash-border)"}`,borderRadius:"8px",color:sn==="private"?"#fff":"var(--dash-text)",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Private"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:()=>{Sn(!1),Sa()},disabled:Qe,style:{flex:1,padding:"10px 16px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:Su,disabled:Qe||!Hn.trim(),style:{flex:1,padding:"10px 16px",background:"var(--dash-primary)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"14px",fontWeight:500,cursor:Qe||!Hn.trim()?"not-allowed":"pointer",opacity:Qe||!Hn.trim()?.6:1},children:"Create Channel"})]})]})]})})}),r.jsx(Xn,{children:$&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{wn||W(!1)},children:r.jsxs(se.div,{className:M.subModal,style:{maxWidth:"420px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsx("h3",{children:"Edit Profile"}),r.jsx("button",{onClick:()=>{wn||W(!1)},type:"button",disabled:wn,children:r.jsx(En,{size:18})})]}),r.jsxs("div",{className:M.subModalContent,style:{padding:"20px",position:"relative"},children:[wn&&r.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.4)",borderRadius:"0 0 12px 12px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,backdropFilter:"blur(2px)"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",color:"var(--dash-text)"},children:[r.jsx(ln,{size:32,className:M.spinner,style:{color:"var(--dash-primary)"}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:"Saving profile..."})]})}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px",opacity:wn?.5:1},children:[r.jsxs("div",{style:{width:"90px",height:"90px",borderRadius:"50%",background:"var(--dash-surface-elevated)",border:"2px solid var(--dash-border-light)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:wn?"not-allowed":"pointer",position:"relative"},onClick:()=>!wn&&document.getElementById("editProfileAvatarInput")?.click(),children:[xa?r.jsx("img",{src:xa,alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):r.jsx(Nd,{size:36,strokeWidth:1.5,style:{color:"var(--dash-text-muted)"}}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",padding:"3px",textAlign:"center",fontSize:"10px",color:"var(--dash-text)"},children:"Change Photo"})]}),r.jsx("input",{type:"file",id:"editProfileAvatarInput",accept:"image/*",style:{display:"none"},onChange:Ai})]}),r.jsxs("div",{style:{marginBottom:"14px",opacity:wn?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Username *"}),r.jsx("input",{type:"text",value:ps,onChange:_=>Tr(_.target.value),placeholder:"Enter username",disabled:wn,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none"}})]}),r.jsxs("div",{style:{marginBottom:"20px",opacity:wn?.5:1},children:[r.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"var(--dash-text-secondary)",marginBottom:"4px"},children:"Bio"}),r.jsx("textarea",{value:go,onChange:_=>ec(_.target.value),placeholder:"Tell us about yourself (optional)",rows:3,disabled:wn,style:{width:"100%",padding:"10px 12px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",outline:"none",resize:"none"}})]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:()=>W(!1),disabled:wn,style:{flex:1,padding:"10px 16px",background:"var(--dash-surface)",border:"1px solid var(--dash-border)",borderRadius:"8px",color:"var(--dash-text)",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:wu,disabled:wn||!ps.trim(),style:{flex:1,padding:"10px 16px",background:"var(--dash-primary)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"14px",fontWeight:500,cursor:wn||!ps.trim()?"not-allowed":"pointer",opacity:wn||!ps.trim()?.6:1},children:"Save Changes"})]})]})]})})}),r.jsx(Xn,{children:I&&r.jsx(se.div,{className:M.modalBackdrop,style:{zIndex:1100},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>pe(!1),children:r.jsxs(se.div,{className:M.subModal,style:{maxWidth:"400px",width:"90%"},initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:M.subModalHeader,children:[r.jsx("h3",{children:"Notifications"}),r.jsx("button",{onClick:()=>pe(!1),type:"button",children:r.jsx(En,{size:18})})]}),r.jsxs("div",{className:M.subModalContent,style:{padding:"24px",textAlign:"center"},children:[r.jsx(Hh,{size:48,style:{color:"var(--dash-primary)",marginBottom:"16px"}}),r.jsx("p",{style:{color:"var(--dash-text-secondary)",fontSize:"14px"},children:"No new notifications"})]})]})})}),r.jsx(NS,{isOpen:ve,onClose:()=>Le(!1),isDarkMode:p}),r.jsx(XS,{isOpen:pt,onClose:()=>Ln(!1),isDarkMode:p})]})},nU=$l(t=>({notifications:[],isLoading:!1,error:null,loadNotifications:async()=>{t({isLoading:!0,error:null});try{const n=await ir.getNotifications();t({notifications:n,isLoading:!1})}catch(n){const s=n.response?.data?.message||"Failed to load notifications";t({error:s,isLoading:!1})}},markAsSeen:async n=>{t({error:null});try{await ir.markAsSeen(n),t(s=>({notifications:s.notifications.map(o=>o.id===n?{...o,seen:!0}:o)}))}catch(s){const o=s.response?.data?.message||"Failed to mark notification as seen";t({error:o})}},markMultipleAsSeen:async n=>{t({error:null});try{await ir.markMultipleAsSeen(n),t(s=>({notifications:s.notifications.map(o=>n.includes(o.id)?{...o,seen:!0}:o)}))}catch(s){const o=s.response?.data?.message||"Failed to mark notifications as seen";t({error:o})}},markAllAsSeen:async()=>{t({error:null});try{await ir.markAllAsSeen(),t(n=>({notifications:n.notifications.map(s=>({...s,seen:!0}))}))}catch(n){const s=n.response?.data?.message||"Failed to mark all notifications as seen";t({error:s})}},clearError:()=>t({error:null}),handleNewNotification:n=>{console.log("[NotificationStore] New notification:",n),t(s=>{const o={id:n.messageId,messageId:n.messageId,chatId:n.chatId,chatName:n.chatName,chatAvatar:n.chatAvatar,senderName:n.senderName,content:n.content,sentTime:n.sentTime,seen:!1,fileUrl:n.fileUrl};return s.notifications.some(d=>d.chatId===o.chatId&&d.sentTime===o.sentTime)?s:{notifications:[o,...s.notifications]}})}})),aU="_container_nzeaj_52",sU="_toast_nzeaj_64",iU="_slideIn_nzeaj_1",oU="_glowPulse_nzeaj_1",rU="_exit_nzeaj_84",lU="_slideOut_nzeaj_1",cU="_success_nzeaj_89",dU="_error_nzeaj_97",uU="_warning_nzeaj_105",pU="_info_nzeaj_113",fU="_iconWrapper_nzeaj_120",hU="_iconBounce_nzeaj_1",mU="_message_nzeaj_134",gU="_closeBtn_nzeaj_143",yU="_progressBar_nzeaj_168",xU="_progressShrink_nzeaj_1",Zi={container:aU,toast:sU,slideIn:iU,glowPulse:oU,exit:rU,slideOut:lU,success:cU,error:dU,warning:uU,info:pU,iconWrapper:fU,iconBounce:hU,message:mU,closeBtn:gU,progressBar:yU,progressShrink:xU},vU=({toast:t,onClose:n})=>{const[s,o]=b.useState(!1);b.useEffect(()=>{const p=t.duration||4e3,h=setTimeout(()=>{o(!0)},p-300),m=setTimeout(()=>{n(t.id)},p);return()=>{clearTimeout(h),clearTimeout(m)}},[t.id,t.duration,n]);const c=()=>{o(!0),setTimeout(()=>n(t.id),300)},d=()=>{switch(t.type){case"success":return r.jsx(bb,{size:22});case"error":return r.jsx(q_,{size:22});case"warning":return r.jsx(Ds,{size:22});case"info":return r.jsx($h,{size:22})}};return r.jsxs("div",{className:`${Zi.toast} ${Zi[t.type]} ${s?Zi.exit:""}`,children:[r.jsx("div",{className:Zi.iconWrapper,children:d()}),r.jsx("span",{className:Zi.message,children:t.message}),r.jsx("button",{onClick:c,"aria-label":"Close",style:{background:"rgba(255, 255, 255, 0.15)",border:"none",borderRadius:"6px",color:"#ffffff",cursor:"pointer",padding:"6px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"8px",fontSize:"16px",fontWeight:"bold",lineHeight:1},children:""}),r.jsx("div",{className:Zi.progressBar,style:{animationDuration:`${t.duration||4e3}ms`}})]})},bU=({toasts:t,onClose:n})=>r.jsx("div",{className:Zi.container,children:t.map(s=>r.jsx(vU,{toast:s,onClose:n},s.id))});class SU{toasts=[];listeners=[];subscribe(n){return this.listeners.push(n),()=>{this.listeners=this.listeners.filter(s=>s!==n)}}notify(){this.listeners.forEach(n=>n([...this.toasts]))}show(n,s,o){const c=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,d={id:c,type:n,message:s,duration:o};return this.toasts.push(d),this.notify(),c}success(n,s){return this.show("success",n,s)}error(n,s){return this.show("error",n,s||5e3)}warning(n,s){return this.show("warning",n,s)}info(n,s){return this.show("info",n,s)}remove(n){this.toasts=this.toasts.filter(s=>s.id!==n),this.notify()}getToasts(){return[...this.toasts]}}const yb=new SU;function wU(){const{isAuthenticated:t}=Wl();return console.log("[AppRoutes] Rendering with isAuthenticated:",t),r.jsxs(M_,{children:[r.jsx(Wi,{path:"/",element:t?r.jsx(Jo,{to:"/dashboard-new",replace:!0}):r.jsx(wE,{})}),r.jsx(Wi,{path:"/login",element:t?r.jsx(Jo,{to:"/dashboard-new",replace:!0}):r.jsx(tA,{})}),r.jsx(Wi,{path:"/register",element:t?r.jsx(Jo,{to:"/dashboard-new",replace:!0}):r.jsx(rA,{})}),r.jsx(Wi,{path:"/forgot-password",element:t?r.jsx(Jo,{to:"/dashboard-new",replace:!0}):r.jsx(pA,{})}),r.jsx(Wi,{path:"/dashboard",element:r.jsx(Tv,{children:r.jsx(n6,{})})}),r.jsx(Wi,{path:"/dashboard-new",element:r.jsx(Tv,{children:r.jsx(tU,{})})}),r.jsx(Wi,{path:"*",element:r.jsx(Jo,{to:"/",replace:!0})})]})}function _U(){const{isAuthenticated:t}=Wl(),[n,s]=b.useState([]);b.useEffect(()=>yb.subscribe(s),[]);const o=c=>{yb.remove(c)};b.useEffect(()=>{(async()=>{console.log("[App] Initializing auth from localStorage..."),await jt.getState().initializeAuth(),console.log("[App] Auth initialization complete")})()},[]),b.useEffect(()=>{if(!t){console.log("[App] Not authenticated, skipping SignalR initialization");return}console.log("[App] Setting up SignalR event handlers...");const c=Pe.getState(),d=nU.getState();return nt.setEventHandlers({onUserOnline:h=>{c.handleUserOnline(h)},onUserOffline:h=>{c.handleUserOffline({...h,lastSeen:h.lastSeen||new Date().toISOString()})},onReceiveMessage:h=>{c.handleReceiveMessage(h)},onMessageEdited:h=>{c.handleMessageEdited(h)},onMessageDeleted:h=>{c.handleMessageDeleted(h)},onReactionAdded:h=>{c.handleReactionAdded(h)},onReactionRemoved:h=>{c.handleReactionRemoved(h)},onUserTyping:h=>{c.handleUserTyping(h)},onUserStoppedTyping:h=>{c.handleUserStoppedTyping(h)},onNewNotification:h=>{d.handleNewNotification(h)},onMessagePinned:h=>{c.handleMessagePinned(h)},onMessageUnpinned:h=>{c.handleMessageUnpinned(h)},onAddedToChat:h=>{c.handleAddedToChat(h)},onNewConversation:h=>{c.handleNewConversation(h)},onConversationCreated:h=>{c.handleConversationCreated(h)},onPermissionGranted:h=>{c.handlePermissionGranted(h)},onPermissionRevoked:h=>{c.handlePermissionRevoked(h)},onAllPermissionsRevoked:h=>{c.handleAllPermissionsRevoked(h)},onUserBlockedYou:h=>{c.handleUserBlockedYou(h)},onYouBlockedUser:h=>{c.handleYouBlockedUser(h)},onUserUnblockedYou:h=>{c.handleUserUnblockedYou(h)},onYouUnblockedUser:h=>{c.handleYouUnblockedUser(h)},onChatDeleted:h=>{c.handleChatDeleted(h)},onRemovedFromChat:h=>{c.handleRemovedFromChat(h)},onMessagesMarkedSeen:h=>{c.handleMessagesMarkedSeen(h)},onError:h=>{console.error("[App] SignalR Error:",h)}}),(async()=>{try{console.log("[App] Starting SignalR connection..."),await nt.start(),console.log("[App] SignalR connected successfully");const h=Pe.getState();h.chats.length===0&&(console.log("[App] Loading chats before fetching presence states..."),await h.loadChats());const m=new Set;h.chats.forEach(y=>{y.members&&y.members.forEach(v=>{const S=v.userId||v.id||v.user?.id;S&&m.add(S)})});const g=Array.from(m);if(g.length>0){console.log("[App] Fetching presence states for",g.length,"users:",g);try{const y=await nt.getPresenceStates(g);console.log("[App] Received presence states:",y),console.log("[App] Presence states type check:",typeof y,Object.keys(y).length,"keys"),h.setInitialPresenceStates(y),console.log("[App] Presence states initialized successfully"),console.log("[App] OnlineUsers map after init:",h.onlineUsers)}catch(y){console.error("[App] Failed to fetch initial presence states:",y)}}else console.log("[App] No user IDs available from chat list - presence will be fetched when chats are opened")}catch(h){console.error("[App] Failed to start SignalR:",h)}})(),()=>{console.log("[App] Stopping SignalR connection..."),nt.stop()}},[t]);try{return r.jsxs(r.Fragment,{children:[r.jsx(k_,{children:r.jsx(wU,{})}),r.jsx(bU,{toasts:n,onClose:o}),r.jsx(iR,{})]})}catch(c){return console.error("App Error:",c),r.jsxs("div",{style:{padding:"20px",color:"red"},children:[r.jsx("h1",{children:"Error Loading Application"}),r.jsx("p",{children:"Check browser console for details"}),r.jsx("pre",{children:String(c)})]})}}const QS=document.getElementById("root");if(!QS)throw new Error("Root element not found");console.log("React app starting...");Z_.createRoot(QS).render(r.jsx(b.StrictMode,{children:r.jsx(_U,{})}));console.log("React app rendered");export{Ne as a};
